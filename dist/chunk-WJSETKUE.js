import{a as Y}from"./chunk-PPAMQKOX.js";import{a as K}from"./chunk-2QWDS2UT.js";import{a as Q}from"./chunk-EB65ROO7.js";import{a as U,b as X}from"./chunk-GHMBIJMJ.js";import{a as G}from"./chunk-EAEBZZLM.js";import"./chunk-DQT4BSA2.js";import"./chunk-RNWIIYZZ.js";import{a as J}from"./chunk-SUAWKU6Z.js";import"./chunk-GVFZPDGQ.js";import{b as N,d as R,e as z,j as q}from"./chunk-6EPWFNOH.js";import{D as V,F as T,H as j,J as $,c as A,s as D,w as H}from"./chunk-3HKVS7J3.js";import{$a as l,$b as E,Ab as C,B as S,Bb as w,Bc as W,Cb as y,Db as r,Eb as c,Jb as F,Nb as _,Ob as h,Xb as g,Yb as m,Zb as B,_b as M,ab as p,ac as O,cc as L,fa as I,hc as b,ic as f,qa as x,ra as v,tb as P,vb as k,wb as u}from"./chunk-ZKAUCJHV.js";import"./chunk-DEPBX7UX.js";function ee(a,o){if(a&1){let s=F();r(0,"div",7),_("click",function(){let i=x(s).$index,e=h();return v(e.setTileColor(i))}),c()}if(a&2){let s=o.$implicit,t=o.$index,i=h();u("color-rect "+s),k("active",i.tile.color==t)}}function te(a,o){if(a&1){let s=F();r(0,"div",7),_("click",function(){let i=x(s).$index,e=h();return v(e.setFontColor(i))}),r(1,"span"),g(2,"A"),c()()}if(a&2){let s=o.$implicit,t=o.$index,i=h();u("color-rect "+s+" "+i.model.colors[i.tile.color]),k("active",i.tile.fontColor==t),l(),u(s)}}function ie(a,o){if(a&1){let s=F();r(0,"div",8),_("click",function(){let i=x(s).$index,e=h();return v(e.setIcon(i))}),c()}if(a&2){let s=o.$implicit,t=o.$index,i=h();u("cl"+i.tile.color+" "+(i.tile.icon==t?"active":"")),P("ngClass",s)}}var Ce=(()=>{let o=class o{constructor(t,i,e,d,n,Z){this.ds=t,this.ms=i,this.sbs=e,this.st=d,this.router=n,this.cdr=Z,this.tiles=[],this.folder="",this.model={colors:T.const.bgColorClasses,fontColors:T.const.fontColors,icons:T.const.icons,widgetList:[]},this.originalTiles="",this.subRouteChange=this.router.events.pipe(Q())}get tile(){return this._tile}set tile(t){let i=t!==this._tile;this._tile=t,i&&this.requestWidgetList()}ngOnInit(){this.subscribeForRouteChange(),this.saveOriginalTiles(),this.requestWidgetList()}ngOnDestroy(){this.ms.onEditDashboard.emit(!1)}saveTiles(){let t=this.st.getTilesSettings();for(let i=0;i<this.tiles.length;i++){let e=this.tiles[i],d=this.folder;t[d]||(t[d]={}),t[d][e.title]||(t[d][e.title]={});let n=t[d][e.title];n.row=e.y,n.col=e.x,n.sizeX=e.cols,n.sizeY=e.rows,n.color=e.color,n.fontColor=e.fontColor,n.icon=e.icon,n.hideTitle=e.hideTitle,n.customTitle=e.customTitle,e.widget!==null&&e.widget!==-1&&e.widget!==void 0?n.widget=e.widget:delete n.widget}this.st.setTilesSettings(t)}setTileColor(t){this.tile&&(this.tile.color=t)}setFontColor(t){this.tile&&(this.tile.fontColor=t)}setIcon(t){this.tile&&(this.tile.icon=t)}onCancelEditing(){this.restoreOriginalTiles(),this.close()}onSaveTiles(){this.saveTiles(),this.st.onTilesChanged.emit(),this.close()}close(){this.sbs.hide()}saveOriginalTiles(){this.originalTiles=JSON.stringify(this.tiles)}restoreOriginalTiles(){this.tiles.splice(0,this.tiles.length),JSON.parse(this.originalTiles).forEach(i=>this.tiles.push(i))}requestWidgetList(){this.model.widgetList=[],this.tile&&!this.tile.isFolder&&this.ds.getWidgets(this.tile.fullPath).then(t=>this.fillWidgetList(t))}fillWidgetList(t){t&&(this.model.widgetList=t.widgets.map((i,e)=>({idx:e,name:i.title||i.name})),this.model.widgetList=[{idx:-1,name:""},...this.model.widgetList],this.cdr.detectChanges())}subscribeForRouteChange(){this.subRouteChange.pipe(S(t=>t instanceof D)).subscribe(()=>this.onCancelEditing())}};o.\u0275fac=function(i){return new(i||o)(p(j),p(G),p(J),p($),p(H),p(W))},o.\u0275cmp=I({type:o,selectors:[["dsw-home-editor"]],inputs:{tiles:"tiles",folder:"folder",tile:"tile"},standalone:!0,features:[L],decls:30,vars:23,consts:[[3,"apply","cancel"],[1,"container"],[3,"ngModelChange","ngModel"],[3,"active","class"],[1,"color-rect",3,"ngClass","class"],["bindLabel","name","bindValue","idx",1,"dsw",3,"ngModelChange","ngModel","clearable","items"],["type","checkbox",3,"ngModelChange","ngModel"],[3,"click"],[1,"color-rect",3,"click","ngClass"]],template:function(i,e){i&1&&(r(0,"dsw-sidebar-actions",0),_("apply",function(){return e.onSaveTiles()})("cancel",function(){return e.onCancelEditing()}),g(1,"Edit dashboard"),c(),r(2,"div",1)(3,"label"),g(4),b(5,"i18n"),c(),r(6,"dsw-input",2),O("ngModelChange",function(n){return E(e.tile.customTitle,n)||(e.tile.customTitle=n),n}),c(),r(7,"label"),g(8),b(9,"i18n"),c(),w(10,ee,1,4,"div",3,C),r(12,"label"),g(13),b(14,"i18n"),c(),w(15,te,3,6,"div",3,C),r(17,"label"),g(18),b(19,"i18n"),c(),w(20,ie,1,3,"div",4,C),r(22,"label"),g(23),b(24,"i18n"),c(),r(25,"ng-select",5),O("ngModelChange",function(n){return E(e.tile.widget,n)||(e.tile.widget=n),n}),c(),r(26,"label"),g(27),b(28,"i18n"),r(29,"input",6),O("ngModelChange",function(n){return E(e.tile.hideTitle,n)||(e.tile.hideTitle=n),n}),c()()()),i&2&&(l(4),m(f(5,11,"title")),l(2),M("ngModel",e.tile.customTitle),l(2),m(f(9,13,"bgColor")),l(2),y(e.model.colors),l(3),m(f(14,15,"fntColor")),l(2),y(e.model.fontColors),l(3),m(f(19,17,"icon")),l(2),y(e.model.icons),l(3),m(f(24,19,"widget")),l(2),M("ngModel",e.tile.widget),P("clearable",!1)("items",e.model.widgetList),l(2),B("",f(28,21,"hideTitle")," "),l(2),M("ngModel",e.tile.hideTitle))},dependencies:[K,Y,q,N,R,z,X,U,V,A],styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;padding-bottom:20px;transition:transform 2s linear;min-width:var(--sidebar-width)}.container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;padding-left:20px;flex:1 1 100%}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px;height:4px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-left:solid 16px var(--cl-bg);background:#ebebea}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-left:solid 16px var(--cl-bg);border-radius:0;background:#1c1d2066}label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-family:Oxygen;color:var(--cl-sidebar-txt);margin-top:10px;margin-bottom:2px;font-size:14px;width:calc(100% - 4px)}input[_ngcontent-%COMP%]{margin-bottom:4px}.divider[_ngcontent-%COMP%]{display:block;width:100%;clear:both}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#fff;padding:10px;color:#1a73e8;font-size:14px;line-height:16px;border:1px solid #EBEBEA;border-radius:4px;width:100%;cursor:pointer;transition:background-color .3s linear}.btn-section[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#1a73e80d}.btn-section[_ngcontent-%COMP%]:not(.disabled):active{transform:translateY(1px)}.headline[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.navigation[_ngcontent-%COMP%]{margin-top:20px}.navigation[_ngcontent-%COMP%] > .btn-section[_ngcontent-%COMP%]:not(:last-child){margin-bottom:4px}.navigation[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]{margin-top:20px}.disabled[_ngcontent-%COMP%]{cursor:default;filter:grayscale(1);opacity:.5}.footer[_ngcontent-%COMP%]{padding-left:20px}.footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-top:20px}.footer[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}.color-rect[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:inline-flex;position:relative;align-items:center;justify-content:center;cursor:pointer;width:32px;height:32px;margin-right:4px;margin-bottom:4px;border:var(--tile-border);font-size:24px;outline-offset:-2px;float:left;background-size:60%}.color-rect[_ngcontent-%COMP%]:hover{outline:1px solid var(--cl-accent)}.color-rect.active[_ngcontent-%COMP%]{outline:3px solid var(--cl-accent)}.color-rect.small[_ngcontent-%COMP%]{width:32px}","[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}input[type=checkbox][_ngcontent-%COMP%]{cursor:pointer;outline:none;display:inline}input[type=checkbox][_ngcontent-%COMP%]:focus, input[type=checkbox][_ngcontent-%COMP%]:active{outline:none}.divider[_ngcontent-%COMP%]{display:block;width:100%;clear:both}"],changeDetection:0});let a=o;return a})();export{Ce as HomeEditorComponent};
