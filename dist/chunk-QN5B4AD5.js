import{a as Pt}from"./chunk-V6EVLSKF.js";import{a as Pe,c as Fe,d as ze,f as We}from"./chunk-2Y552RXN.js";import{c as De,d as Gt,f as wt,h as jt}from"./chunk-W7AFIDCE.js";import{a as st}from"./chunk-P5DO5VKB.js";import{a as nt}from"./chunk-EB65ROO7.js";import{a as Ee}from"./chunk-EAEBZZLM.js";import{a as Et}from"./chunk-DZHBHS6A.js";import{a as Ft}from"./chunk-RNWIIYZZ.js";import{a as ke}from"./chunk-SUAWKU6Z.js";import{a as pt,b as Me}from"./chunk-FILD5LFJ.js";import{c as ye,d as _e,e as ve,f as Ie,g as Se,h as Te,j as $e}from"./chunk-IQUH5TNY.js";import{D as $t,E as kt,F as tt,G as be,H as xe,I as dt,J as ct,K as ft,L as Mt,d as Yt,e as we,k as Ce,u as ht}from"./chunk-BHOYI6KV.js";import{$a as a,$b as Xt,Ab as G,Ba as J,Bb as B,Bc as K,Cb as H,Da as V,Db as d,Eb as g,F as le,Fb as I,Ib as fe,Jb as y,Nb as f,Ob as c,Pb as Bt,Qb as Ht,R as ae,Rb as Q,S as Rt,Tb as j,Ub as U,Vb as q,Wb as at,X as St,Xa as pe,Xb as b,Y as he,Yb as M,Zb as Tt,_b as At,ab as _,ac as Nt,ba as z,cc as X,eb as ot,f as It,fa as A,ga as de,gb as Vt,ha as ce,hc as S,ic as T,jb as me,lb as ge,pa as gt,qa as p,ra as m,rb as F,s as ne,tb as k,ub as ut,vb as E,xb as ue,y as re,yb as x,z as oe,zb as Lt}from"./chunk-ZKAUCJHV.js";import{a as it,b as Ot}from"./chunk-DEPBX7UX.js";var Ve=["*"];function si(o,i){if(o&1&&I(0,"div",0),o&2){let s=i.$index,t=c();k("ngStyle",t.gridRenderer.getGridColumnStyle(s))}}function ni(o,i){if(o&1&&I(0,"div",1),o&2){let s=i.$index,t=c();k("ngStyle",t.gridRenderer.getGridRowStyle(s))}}function ri(o,i){if(o&1){let s=y();d(0,"div",8),f("mousedown",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))})("touchstart",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))}),g()}}function oi(o,i){if(o&1){let s=y();d(0,"div",9),f("mousedown",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))})("touchstart",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))}),g()}}function li(o,i){if(o&1){let s=y();d(0,"div",10),f("mousedown",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))})("touchstart",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))}),g()}}function ai(o,i){if(o&1){let s=y();d(0,"div",11),f("mousedown",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))})("touchstart",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))}),g()}}function hi(o,i){if(o&1){let s=y();d(0,"div",12),f("mousedown",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))})("touchstart",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))}),g()}}function di(o,i){if(o&1){let s=y();d(0,"div",13),f("mousedown",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))})("touchstart",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))}),g()}}function ci(o,i){if(o&1){let s=y();d(0,"div",14),f("mousedown",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))})("touchstart",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))}),g()}}function pi(o,i){if(o&1){let s=y();d(0,"div",15),f("mousedown",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))})("touchstart",function(e){p(s);let n=c();return m(n.resize.dragStartDelay(e))}),g()}}var v=function(o){return o.Fit="fit",o.ScrollVertical="scrollVertical",o.ScrollHorizontal="scrollHorizontal",o.Fixed="fixed",o.VerticalFixed="verticalFixed",o.HorizontalFixed="horizontalFixed",o}(v||{}),zt=function(o){return o.Always="always",o.OnDragAndResize="onDrag&Resize",o.None="none",o}(zt||{}),P=function(o){return o.None="none",o.CompactUp="compactUp",o.CompactLeft="compactLeft",o.CompactUpAndLeft="compactUp&Left",o.CompactLeftAndUp="compactLeft&Up",o.CompactRight="compactRight",o.CompactUpAndRight="compactUp&Right",o.CompactRightAndUp="compactRight&Up",o.CompactDown="compactDown",o.CompactDownAndLeft="compactDown&Left",o.CompactLeftAndDown="compactLeft&Down",o.CompactDownAndRight="compactDown&Right",o.CompactRightAndDown="compactRight&Down",o}(P||{}),O=function(o){return o.LTR="ltr",o.RTL="rtl",o}(O||{}),Ut=class{constructor(i){this.gridster=i}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==P.None&&(this.gridster.$options.compactType===P.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===P.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===P.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===P.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===P.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===P.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===P.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===P.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===P.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===P.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===P.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===P.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(i){this.gridster.$options.compactType!==P.None&&(this.gridster.$options.compactType===P.CompactUp?this.moveTillCollision(i,"y",-1):this.gridster.$options.compactType===P.CompactLeft?this.moveTillCollision(i,"x",-1):this.gridster.$options.compactType===P.CompactUpAndLeft?(this.moveTillCollision(i,"y",-1),this.moveTillCollision(i,"x",-1)):this.gridster.$options.compactType===P.CompactLeftAndUp?(this.moveTillCollision(i,"x",-1),this.moveTillCollision(i,"y",-1)):this.gridster.$options.compactType===P.CompactUpAndRight?(this.moveTillCollision(i,"y",-1),this.moveTillCollision(i,"x",1)):this.gridster.$options.compactType===P.CompactDown?this.moveTillCollision(i,"y",1):this.gridster.$options.compactType===P.CompactDownAndLeft?(this.moveTillCollision(i,"y",1),this.moveTillCollision(i,"x",-1)):this.gridster.$options.compactType===P.CompactLeftAndDown?(this.moveTillCollision(i,"x",-1),this.moveTillCollision(i,"y",1)):this.gridster.$options.compactType===P.CompactDownAndRight?(this.moveTillCollision(i,"y",1),this.moveTillCollision(i,"x",1)):this.gridster.$options.compactType===P.CompactRightAndDown&&(this.moveTillCollision(i,"x",1),this.moveTillCollision(i,"y",1)))}checkCompactMovement(i,s){let t=!1;this.gridster.grid.forEach(e=>{e.$item.compactEnabled!==!1&&this.moveTillCollision(e.$item,i,s)&&(t=!0,e.item[i]=e.$item[i],e.itemChanged())}),t&&this.checkCompact()}moveTillCollision(i,s,t){return i[s]+=t,this.gridster.checkCollision(i)?(i[s]-=t,!1):(this.moveTillCollision(i,s,t),!0)}},mi={gridType:v.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:P.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:zt.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:O.LTR},L=class o{static merge(i,s,t){for(let e in s)s[e]!==void 0&&t.hasOwnProperty(e)&&(typeof s[e]=="object"?(e in i||(i[e]={}),i[e]=o.merge(i[e],s[e],t[e])):i[e]=s[e]);return i}static checkTouchEvent(i){i.clientX===void 0&&i.touches&&(i.touches&&i.touches.length?(i.clientX=i.touches[0].clientX,i.clientY=i.touches[0].clientY):i.changedTouches&&i.changedTouches.length&&(i.clientX=i.changedTouches[0].clientX,i.clientY=i.changedTouches[0].clientY))}static checkContentClassForEvent(i,s){if(i.$options.draggable.ignoreContent){if(!o.checkDragHandleClass(s.target,s.currentTarget,i.$options.draggable.dragHandleClass,i.$options.draggable.ignoreContentClass))return!0}else if(o.checkContentClass(s.target,s.currentTarget,i.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(i,s){return o.checkContentClass(s.target,s.currentTarget,i.$options.draggable.ignoreContentClass)||o.checkContentClass(s.target,s.currentTarget,i.$options.draggable.dragHandleClass)}static checkDragHandleClass(i,s,t,e){if(!i||i===s)return!1;if(i.hasAttribute("class")){let n=i.getAttribute("class").split(" ");if(n.indexOf(t)>-1)return!0;if(n.indexOf(e)>-1)return!1}return o.checkDragHandleClass(i.parentNode,s,t,e)}static checkContentClass(i,s,t){return!i||i===s?!1:i.hasAttribute("class")&&i.getAttribute("class").split(" ").indexOf(t)>-1?!0:o.checkContentClass(i.parentNode,s,t)}static compareItems(i,s){return i.y>s.y?-1:i.y<s.y?1:i.x>s.x?-1:1}},qt=class{constructor(i){this.gridster=i,this.emptyCellClickCb=s=>{if(!this.gridster||this.gridster.movingItem||L.checkContentClassForEmptyCellClickEvent(this.gridster,s))return;let t=this.getValidItemFromEvent(s);t&&(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(s,t),this.gridster.cdRef.markForCheck())},this.emptyCellContextMenuCb=s=>{if(this.gridster.movingItem||L.checkContentClassForEmptyCellClickEvent(this.gridster,s))return;s.preventDefault(),s.stopPropagation();let t=this.getValidItemFromEvent(s);t&&(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(s,t),this.gridster.cdRef.markForCheck())},this.emptyCellDragDrop=s=>{let t=this.getValidItemFromEvent(s);t&&(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(s,t),this.gridster.cdRef.markForCheck())},this.emptyCellDragOver=s=>{s.preventDefault(),s.stopPropagation();let t=this.getValidItemFromEvent(s);t?(s.dataTransfer&&(s.dataTransfer.dropEffect="move"),this.gridster.movingItem=t):(s.dataTransfer&&(s.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()},this.emptyCellMouseDown=s=>{if(L.checkContentClassForEmptyCellClickEvent(this.gridster,s))return;s.preventDefault(),s.stopPropagation();let t=this.getValidItemFromEvent(s);!t||s.buttons!==1&&!(s instanceof TouchEvent)||(this.initialItem=t,this.gridster.movingItem=t,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)}),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))},this.emptyCellMouseMove=s=>{s.preventDefault(),s.stopPropagation();let t=this.getValidItemFromEvent(s,this.initialItem);t&&(this.gridster.movingItem=t,this.gridster.previewStyle())},this.emptyCellMouseUp=s=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();let t=this.getValidItemFromEvent(s,this.initialItem);t&&(this.gridster.movingItem=t),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(s,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}getPixelsX(i,s){let t=this.gridster.options.scale;return t?(i.clientX-s.left)/t+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():i.clientX+this.gridster.el.scrollLeft-s.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(i,s){let t=this.gridster.options.scale;return t?(i.clientY-s.top)/t+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():i.clientY+this.gridster.el.scrollTop-s.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(i,s){i.preventDefault(),i.stopPropagation(),L.checkTouchEvent(i);let t=this.gridster.el.getBoundingClientRect(),e=this.getPixelsX(i,t),n=this.getPixelsY(i,t),r={x:this.gridster.pixelsToPositionX(e,Math.floor,!0),y:this.gridster.pixelsToPositionY(n,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(s&&(r.cols=Math.min(Math.abs(s.x-r.x)+1,this.gridster.$options.emptyCellDragMaxCols),r.rows=Math.min(Math.abs(s.y-r.y)+1,this.gridster.$options.emptyCellDragMaxRows),s.x<r.x?r.x=s.x:s.x-r.x>this.gridster.$options.emptyCellDragMaxCols-1&&(r.x=this.gridster.movingItem?this.gridster.movingItem.x:0),s.y<r.y?r.y=s.y:s.y-r.y>this.gridster.$options.emptyCellDragMaxRows-1&&(r.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),!(!this.gridster.$options.enableOccupiedCellDrop&&this.gridster.checkCollision(r)))return r}},Qt=class{constructor(i){this.gridster=i,this.lastGridColumnStyles={},this.lastGridRowStyles={}}destroy(){this.gridster=null}updateItem(i,s,t){if(this.gridster.mobile)this.clearCellPosition(t,i),this.gridster.$options.keepFixedHeightInMobile?t.setStyle(i,"height",(s.rows-1)*this.gridster.$options.margin+s.rows*this.gridster.$options.fixedRowHeight+"px"):t.setStyle(i,"height",s.rows*this.gridster.curWidth/s.cols+"px"),this.gridster.$options.keepFixedWidthInMobile?t.setStyle(i,"width",this.gridster.$options.fixedColWidth+"px"):t.setStyle(i,"width",""),t.setStyle(i,"margin-bottom",this.gridster.$options.margin+"px"),t.setStyle(i,O.LTR?"margin-right":"margin-left","");else{let e=Math.round(this.gridster.curColWidth*s.x),n=Math.round(this.gridster.curRowHeight*s.y),r=this.gridster.curColWidth*s.cols-this.gridster.$options.margin,l=this.gridster.curRowHeight*s.rows-this.gridster.$options.margin;this.setCellPosition(t,i,e,n),t.setStyle(i,"width",r+"px"),t.setStyle(i,"height",l+"px");let h=null,u=null;this.gridster.$options.outerMargin&&(this.gridster.rows===s.rows+s.y&&(this.gridster.$options.outerMarginBottom!==null?h=this.gridster.$options.outerMarginBottom+"px":h=this.gridster.$options.margin+"px"),this.gridster.columns===s.cols+s.x&&(this.gridster.$options.outerMarginBottom!==null?u=this.gridster.$options.outerMarginRight+"px":u=this.gridster.$options.margin+"px")),t.setStyle(i,"margin-bottom",h),t.setStyle(i,O.LTR?"margin-right":"margin-left",u)}}updateGridster(){let i="",s="",t="",e="";if(this.gridster.$options.gridType===v.Fit)i=v.Fit,s=v.ScrollVertical,t=v.ScrollHorizontal,e=v.Fixed;else if(this.gridster.$options.gridType===v.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,i=v.ScrollVertical,s=v.Fit,t=v.ScrollHorizontal,e=v.Fixed;else if(this.gridster.$options.gridType===v.ScrollHorizontal){let n=this.gridster.$options.rowHeightRatio,r=n>=1?n:n+1;this.gridster.curColWidth=this.gridster.curRowHeight*r,i=v.ScrollHorizontal,s=v.Fit,t=v.ScrollVertical,e=v.Fixed}else this.gridster.$options.gridType===v.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),i=v.Fixed,s=v.Fit,t=v.ScrollVertical,e=v.ScrollHorizontal):this.gridster.$options.gridType===v.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),i=v.ScrollVertical,s=v.Fit,t=v.ScrollHorizontal,e=v.Fixed):this.gridster.$options.gridType===v.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),i=v.ScrollHorizontal,s=v.Fit,t=v.ScrollVertical,e=v.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==v.Fit?this.gridster.renderer.removeClass(this.gridster.el,i):this.gridster.renderer.addClass(this.gridster.el,i),this.gridster.renderer.removeClass(this.gridster.el,s),this.gridster.renderer.removeClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,e)}getGridColumnStyle(i){let s={left:this.gridster.curColWidth*i,width:this.gridster.curColWidth-this.gridster.$options.margin,height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};s.style=Ot(it({},this.getLeftPosition(s.left)),{width:s.width+"px",height:s.height+"px"});let t=this.lastGridColumnStyles[i];return t&&t.left===s.left&&t.width===s.width&&t.height===s.height?t.style:(this.lastGridColumnStyles[i]=s,s.style)}getGridRowStyle(i){let s={top:this.gridster.curRowHeight*i,width:this.gridster.gridColumns.length*this.gridster.curColWidth+this.gridster.$options.margin,height:this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};s.style=Ot(it({},this.getTopPosition(s.top)),{width:s.width+"px",height:s.height+"px"});let t=this.lastGridRowStyles[i];return t&&t.top===s.top&&t.width===s.width&&t.height===s.height?t.style:(this.lastGridRowStyles[i]=s,s.style)}getLeftPosition(i){let s=this.gridster.$options.dirType===O.RTL?-i:i;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+s+"px)"}:{left:this.getLeftMargin()+s+"px"}}getTopPosition(i){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+i+"px)"}:{top:this.getTopMargin()+i+"px"}}clearCellPosition(i,s){this.gridster.$options.useTransformPositioning?i.setStyle(s,"transform",""):(i.setStyle(s,"top",""),i.setStyle(s,"left",""))}setCellPosition(i,s,t,e){let n=this.gridster.$options.dirType===O.RTL?-t:t;if(this.gridster.$options.useTransformPositioning){let r="translate3d("+n+"px, "+e+"px, 0)";i.setStyle(s,"transform",r)}else i.setStyle(s,"left",this.getLeftMargin()+n+"px"),i.setStyle(s,"top",this.getTopMargin()+e+"px")}getLeftMargin(){return this.gridster.$options.outerMargin?this.gridster.$options.outerMarginLeft!==null?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?this.gridster.$options.outerMarginTop!==null?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}},gi=(()=>{let i=class i{constructor(t,e){this.renderer=e,this.el=t.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(t=>this.previewStyle(t))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}previewStyle(t){t?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,t,this.renderer)):this.renderer.setStyle(this.el,"display","")}};i.\u0275fac=function(e){return new(e||i)(_(J),_(ot))},i.\u0275cmp=A({type:i,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},standalone:!0,features:[X],decls:0,vars:0,template:function(e,n){},styles:[`gridster-preview{position:absolute;display:none;background:#00000026}
`],encapsulation:2});let o=i;return o})(),ee=(()=>{let i=class i{constructor(t,e,n,r){this.renderer=e,this.cdRef=n,this.zone=r,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new V,this.calculateLayout$=new It,this.resize$=new It,this.destroy$=new It,this.optionsChanged=()=>{this.setOptions();let l=this.grid.length-1,h;for(;l>=0;l--)h=this.grid[l],h.updateOptions();this.calculateLayout()},this.onResize=()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())},this.getNextPossiblePosition=(l,h={})=>{l.cols===-1&&(l.cols=this.$options.defaultItemCols),l.rows===-1&&(l.rows=this.$options.defaultItemRows),this.setGridDimensions();let u=h.y||0,w;for(;u<this.rows;u++)for(l.y=u,w=h.x||0;w<this.columns;w++)if(l.x=w,!this.checkCollision(l))return!0;let C=this.$options.maxRows>=this.rows+l.rows,$=this.$options.maxCols>=this.columns+l.cols;return!(this.rows<=this.columns&&C)&&$?(l.x=this.columns,l.y=0,!0):C?(l.y=this.rows,l.x=0,!0):!1},this.getFirstPossiblePosition=l=>{let h=Object.assign({},l);return this.getNextPossiblePosition(h),h},this.getLastPossiblePosition=l=>{let h={y:0,x:0};h=this.grid.reduce((w,C)=>{let $={y:C.$item.y+C.$item.rows-1,x:C.$item.x+C.$item.cols-1};return L.compareItems(w,$)===1?$:w},h);let u=Object.assign({},l);return this.getNextPossiblePosition(u,h),u},this.el=t.nativeElement,this.$options=JSON.parse(JSON.stringify(mi)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new qt(this),this.compact=new Ut(this),this.gridRenderer=new Qt(this)}static checkCollisionTwoItemsForSwaping(t,e){let n=t.cols===1?0:1,r=e.cols===1?0:1,l=t.rows===1?0:1,h=e.rows===1?0:1;return t.x+n<e.x+e.cols&&t.x+t.cols>e.x+r&&t.y+l<e.y+e.rows&&t.y+t.rows>e.y+h}checkCollisionTwoItems(t,e){if(!(t.x<e.x+e.cols&&t.x+t.cols>e.x&&t.y<e.y+e.rows&&t.y+t.rows>e.y))return!1;if(!this.$options.allowMultiLayer)return!0;let r=this.$options.defaultLayerIndex,l=t.layerIndex===void 0?r:t.layerIndex,h=e.layerIndex===void 0?r:e.layerIndex;return l===h}ngOnInit(){this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe(le(0),Rt(this.destroy$)).subscribe(()=>this.calculateLayout()),this.resize$.pipe(ae(()=>oe(100)),Rt(this.destroy$)).subscribe(()=>this.resize())}ngOnChanges(t){t.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:e=>this.getItemComponent(e)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let t,e;this.$options.gridType==="fit"&&!this.mobile?(e=this.el.offsetWidth,t=this.el.offsetHeight):(e=this.el.clientWidth,t=this.el.clientHeight),(e!==this.curWidth||t!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=L.merge(this.$options,this.options,this.$options),!this.$options.disableWindowResize&&!this.windowResize?this.windowResize=this.renderer.listen("window","resize",this.onResize):this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null),this.emptyCell.updateOptions()}ngOnDestroy(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}checkIfToResize(){let t=this.el.clientWidth,e=this.el.offsetWidth,n=this.el.scrollWidth,r=this.el.clientHeight,l=this.el.offsetHeight,h=this.el.scrollHeight,u=t<e&&h>l&&h-l<e-t,w=r<l&&n>e&&n-e<l-r;return u?!1:!w}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}setGridSize(){let t=this.el,e,n;this.$options.setGridSize||this.$options.gridType===v.Fit&&!this.mobile?(e=t.offsetWidth,n=t.offsetHeight):(e=t.clientWidth,n=t.clientHeight),this.curWidth=e,this.curHeight=n}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let t=this.$options.minRows,e=this.$options.minCols,n=this.grid.length-1,r;for(;n>=0;n--)r=this.grid[n],r.notPlaced||(t=Math.max(t,r.$item.y+r.$item.rows),e=Math.max(e,r.$item.x+r.$item.cols));t+=this.$options.addEmptyRowsCount,(this.columns!==e||this.rows!==t)&&(this.columns=e,this.rows=t,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let n=-this.$options.margin;this.$options.outerMarginLeft!==null?(n+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(n+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),this.$options.outerMarginRight!==null?(n+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(n+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-n)/this.columns;let r=-this.$options.margin;this.$options.outerMarginTop!==null?(r+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(r+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),this.$options.outerMarginBottom!==null?(r+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(r+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-r)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let t=this.grid.length-1,e;for(;t>=0;t--)e=this.grid[t],e.setSize(),e.drag.toggle(),e.resize.toggle();this.resize$.next()}updateGrid(){this.$options.displayGrid==="always"&&!this.mobile?this.renderer.addClass(this.el,"display-grid"):this.$options.displayGrid==="onDrag&Resize"&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):(this.$options.displayGrid==="none"||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=i.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=i.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(t){t.$item.cols===void 0&&(t.$item.cols=this.$options.defaultItemCols,t.item.cols=t.$item.cols,t.itemChanged()),t.$item.rows===void 0&&(t.$item.rows=this.$options.defaultItemRows,t.item.rows=t.$item.rows,t.itemChanged()),t.$item.x===-1||t.$item.y===-1?this.autoPositionItem(t):this.checkCollision(t.$item)&&(this.$options.disableWarnings||(t.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(t.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?t.notPlaced=!0:this.autoPositionItem(t)),this.grid.push(t),this.calculateLayout$.next()}removeItem(t){this.grid.splice(this.grid.indexOf(t),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(t.item,t)}checkCollision(t){let e=!1;if(this.options.itemValidateCallback&&(e=!this.options.itemValidateCallback(t)),!e&&this.checkGridCollision(t)&&(e=!0),!e){let n=this.findItemWithItem(t);n&&(e=n)}return e}checkGridCollision(t){let e=t.y>-1&&t.x>-1,n=t.cols+t.x<=this.$options.maxCols,r=t.rows+t.y<=this.$options.maxRows,l=t.maxItemCols===void 0?this.$options.maxItemCols:t.maxItemCols,h=t.minItemCols===void 0?this.$options.minItemCols:t.minItemCols,u=t.maxItemRows===void 0?this.$options.maxItemRows:t.maxItemRows,w=t.minItemRows===void 0?this.$options.minItemRows:t.minItemRows,C=t.cols<=l&&t.cols>=h,$=t.rows<=u&&t.rows>=w,W=t.minItemArea===void 0?this.$options.minItemArea:t.minItemArea,R=t.maxItemArea===void 0?this.$options.maxItemArea:t.maxItemArea,D=t.cols*t.rows,Z=W<=D,mt=R>=D;return!(e&&n&&r&&C&&$&&Z&&mt)}findItemWithItem(t){let e=0,n;for(;e<this.grid.length;e++)if(n=this.grid[e],n.$item!==t&&this.checkCollisionTwoItems(n.$item,t))return n;return!1}findItemsWithItem(t){let e=[],n=0,r;for(;n<this.grid.length;n++)r=this.grid[n],r.$item!==t&&this.checkCollisionTwoItems(r.$item,t)&&e.push(r);return e}autoPositionItem(t){this.getNextPossiblePosition(t.$item)?(t.notPlaced=!1,t.item.x=t.$item.x,t.item.y=t.$item.y,t.itemChanged()):(t.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(t.item,["cols","rows","x","y"])))}pixelsToPositionX(t,e,n){let r=e(t/this.curColWidth);return n?r:Math.max(r,0)}pixelsToPositionY(t,e,n){let r=e(t/this.curRowHeight);return n?r:Math.max(r,0)}positionXToPixels(t){return t*this.curColWidth}positionYToPixels(t){return t*this.curRowHeight}getItemComponent(t){return this.grid.find(e=>e.item===t)}checkCollisionForSwaping(t){let e=!1;if(this.options.itemValidateCallback&&(e=!this.options.itemValidateCallback(t)),!e&&this.checkGridCollision(t)&&(e=!0),!e){let n=this.findItemWithItemForSwapping(t);n&&(e=n)}return e}findItemWithItemForSwapping(t){let e=this.grid.length-1,n;for(;e>-1;e--)if(n=this.grid[e],n.$item!==t&&i.checkCollisionTwoItemsForSwaping(n.$item,t))return n;return!1}previewStyle(t=!1){this.movingItem?(this.compact&&t&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(t,e,n){let r=Math.max(t,Math.floor(e/n));return r<0?0:Number.isFinite(r)?Math.floor(r):0}};i.\u0275fac=function(e){return new(e||i)(_(J),_(ot),_(K),_(Vt))},i.\u0275cmp=A({type:i,selectors:[["gridster"]],inputs:{options:"options"},standalone:!0,features:[gt,X],ngContentSelectors:Ve,decls:6,vars:2,consts:[[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"]],template:function(e,n){e&1&&(Bt(),B(0,si,1,1,"div",0,Lt),B(2,ni,1,1,"div",1,Lt),Ht(4),I(5,"gridster-preview",2)),e&2&&(H(n.gridColumns),a(2),H(n.gridRows),a(3),k("gridRenderer",n.gridRenderer)("previewStyle$",n.previewStyle$))},dependencies:[we,gi],styles:[`gridster{position:relative;box-sizing:border-box;background:gray;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}
`],encapsulation:2});let o=i;return o})(),Dt=class{constructor(i){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=i,this.gridster=i.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(i,s){if(this.gridster.$options.pushItems&&!s){this.pushedItemsOrder=[],this.iteration=0;let t=this.push(this.gridsterItem,i);return t||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],t}else return!1}restoreTempItems(){let i=this.pushedItemsTemp.length-1;for(;i>-1;i--)this.removeFromTempPushed(this.pushedItemsTemp[i])}restoreItems(){let i=0,s=this.pushedItems.length,t;for(;i<s;i++)t=this.pushedItems[i],t.$item.x=t.item.x||0,t.$item.y=t.item.y||0,t.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let i=0,s=this.pushedItems.length,t;for(;i<s;i++)t=this.pushedItems[i],t.checkItemChanges(t.$item,t.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let i=this.pushedItems.length-1,s=!1;for(;i>-1;i--)this.checkPushedItem(this.pushedItems[i],i)&&(s=!0);s&&this.checkPushBack()}push(i,s){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(i.$item)||s==="")return!1;let t=this.gridster.findItemsWithItem(i.$item),e=s===this.fromNorth||s===this.fromWest;t.sort((u,w)=>e?w.$item.y-u.$item.y||w.$item.x-u.$item.x:u.$item.y-w.$item.y||u.$item.x-w.$item.x);let n=0,r,l=!0,h=[];for(;n<t.length;n++){if(r=t[n],r===this.gridsterItem)continue;if(!r.canBeDragged()){l=!1;break}let u=this.pushedItemsTemp.indexOf(r);if(u>-1&&this.pushedItemsTempPath[u].length>10){l=!1;break}if(this.tryPattern[s][0].call(this,r,i))this.pushedItemsOrder.push(r),h.push(r);else if(this.tryPattern[s][1].call(this,r,i))this.pushedItemsOrder.push(r),h.push(r);else if(this.tryPattern[s][2].call(this,r,i))this.pushedItemsOrder.push(r),h.push(r);else if(this.tryPattern[s][3].call(this,r,i))this.pushedItemsOrder.push(r),h.push(r);else{l=!1;break}}if(!l&&(n=this.pushedItemsOrder.lastIndexOf(h[0]),n>-1)){let u=this.pushedItemsOrder.length-1;for(;u>=n;u--)r=this.pushedItemsOrder[u],this.pushedItemsOrder.pop(),this.removeFromTempPushed(r),this.removeFromPushedItem(r)}return this.iteration++,l}trySouth(i,s){return this.gridster.$options.pushDirections.south?(this.addToTempPushed(i),i.$item.y=s.$item.y+s.$item.rows,this.push(i,this.fromNorth)?(i.setSize(),this.addToPushed(i),!0):(this.removeFromTempPushed(i),!1)):!1}tryNorth(i,s){return this.gridster.$options.pushDirections.north?(this.addToTempPushed(i),i.$item.y=s.$item.y-i.$item.rows,this.push(i,this.fromSouth)?(i.setSize(),this.addToPushed(i),!0):(this.removeFromTempPushed(i),!1)):!1}tryEast(i,s){return this.gridster.$options.pushDirections.east?(this.addToTempPushed(i),i.$item.x=s.$item.x+s.$item.cols,this.push(i,this.fromWest)?(i.setSize(),this.addToPushed(i),!0):(this.removeFromTempPushed(i),!1)):!1}tryWest(i,s){return this.gridster.$options.pushDirections.west?(this.addToTempPushed(i),i.$item.x=s.$item.x-i.$item.cols,this.push(i,this.fromEast)?(i.setSize(),this.addToPushed(i),!0):(this.removeFromTempPushed(i),!1)):!1}addToTempPushed(i){let s=this.pushedItemsTemp.indexOf(i);s===-1&&(s=this.pushedItemsTemp.push(i)-1,this.pushedItemsTempPath[s]=[]),this.pushedItemsTempPath[s].push({x:i.$item.x,y:i.$item.y})}removeFromTempPushed(i){let s=this.pushedItemsTemp.indexOf(i),t=this.pushedItemsTempPath[s].pop();t&&(i.$item.x=t.x,i.$item.y=t.y,i.setSize(),this.pushedItemsTempPath[s].length||(this.pushedItemsTemp.splice(s,1),this.pushedItemsTempPath.splice(s,1)))}addToPushed(i){if(this.pushedItems.indexOf(i)<0)this.pushedItems.push(i),this.pushedItemsPath.push([{x:i.item.x||0,y:i.item.y||0},{x:i.$item.x,y:i.$item.y}]);else{let s=this.pushedItems.indexOf(i);this.pushedItemsPath[s].push({x:i.$item.x,y:i.$item.y})}}removeFromPushed(i){i>-1&&(this.pushedItems.splice(i,1),this.pushedItemsPath.splice(i,1))}removeFromPushedItem(i){let s=this.pushedItems.indexOf(i);s>-1&&(this.pushedItemsPath[s].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(s,1),this.pushedItemsPath.splice(s,1)))}checkPushedItem(i,s){let t=this.pushedItemsPath[s],e=t.length-2,n,r,l,h=!1;for(;e>-1;e--)n=t[e],r=i.$item.x,l=i.$item.y,i.$item.x=n.x,i.$item.y=n.y,this.gridster.findItemWithItem(i.$item)?(i.$item.x=r,i.$item.y=l):(i.setSize(),t.splice(e+1,t.length-e-1),h=!0);return t.length<2&&this.removeFromPushed(s),h}},Ct,lt,Le=50,Y,bt,et,xt,yt,_t,vt;function Be(o,i,s,t,e,n,r,l,h,u){Ct=o.$options.scrollSensitivity,lt=o.$options.scrollSpeed,Y=o.el,bt=h,et=u;let w=Y.offsetWidth,C=Y.offsetHeight,$=Y.scrollLeft,W=Y.scrollTop,R=s-W,D=C+W-s-e,{clientX:Z,clientY:mt}=n;if(!o.$options.disableScrollVertical)if(r.clientY<mt&&D<Ct){if(Ye(),bt&&et&&!et.south||vt)return;vt=Oe(1,l,r)}else if(r.clientY>mt&&W>0&&R<Ct){if(Ne(),bt&&et&&!et.north||_t)return;_t=Oe(-1,l,r)}else r.clientY!==mt&&se();let ei=$+w-i-t,ii=i-$;if(!o.$options.disableScrollHorizontal)if(r.clientX<Z&&ei<=Ct){if(Xe(),bt&&et&&!et.east||xt)return;xt=Re(1,l,r)}else if(r.clientX>Z&&$>0&&ii<Ct){if(Ae(),bt&&et&&!et.west||yt)return;yt=Re(-1,l,r)}else r.clientX!==Z&&ie()}function Oe(o,i,s){let t=s.clientY;return window.setInterval(()=>{(!Y||o===-1&&Y.scrollTop-lt<0)&&se(),Y.scrollTop+=o*lt,t+=o*lt,i({clientX:s.clientX,clientY:t})},Le)}function Re(o,i,s){let t=s.clientX;return window.setInterval(()=>{(!Y||o===-1&&Y.scrollLeft-lt<0)&&ie(),Y.scrollLeft+=o*lt,t+=o*lt,i({clientX:t,clientY:s.clientY})},Le)}function He(){ie(),se(),Y=null}function ie(){Ae(),Xe()}function se(){Ye(),Ne()}function Ae(){xt&&(clearInterval(xt),xt=0)}function Xe(){yt&&(clearInterval(yt),yt=0)}function Ne(){vt&&(clearInterval(vt),vt=0)}function Ye(){_t&&(clearInterval(_t),_t=0)}var Kt=class{constructor(i){this.gridsterItem=i,this.gridster=i.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){let i=this.swapedItem.$item.x,s=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=i,this.swapedItem.$item.y=s):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(i){let s;if(this.gridster.$options.swapWhileDragging?s=this.gridster.checkCollisionForSwaping(i.$item):s=this.gridster.checkCollision(i.$item),s&&s!==!0&&s.canBeDragged()){let t=s,e=t.$item.x,n=t.$item.y,r=i.$item.x,l=i.$item.y,h=r-e,u=l-n;t.$item.x=i.item.x-h,t.$item.y=i.item.y-u,i.$item.x=t.item.x+h,i.$item.y=t.item.y+u,this.gridster.checkCollision(t.$item)||this.gridster.checkCollision(i.$item)?(i.$item.x=r,i.$item.y=l,t.$item.x=e,t.$item.y=n):(t.setSize(),this.swapedItem=t,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}},ui="gridster-item-resizable-handler",N=function(o){return o.UP="UP",o.DOWN="DOWN",o.LEFT="LEFT",o.RIGHT="RIGHT",o}(N||{}),Zt=class{constructor(i,s,t){this.zone=t,this.collision=!1,this.dragMove=e=>{e.stopPropagation(),e.preventDefault(),L.checkTouchEvent(e);let n=this.getDirections(e);this.gridster.options.enableBoundaryControl&&(n.includes(N.UP)&&this.gridsterItem.el.getBoundingClientRect().top<this.gridster.el.getBoundingClientRect().top+(this.outerMarginTop??this.margin)&&(n=n.filter(r=>r!=N.UP),e=new MouseEvent(e.type,{clientX:e.clientX,clientY:this.lastMouse.clientY})),n.includes(N.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<this.gridster.el.getBoundingClientRect().left+(this.outerMarginLeft??this.margin)&&(n=n.filter(r=>r!=N.LEFT),e=new MouseEvent(e.type,{clientX:this.lastMouse.clientX,clientY:e.clientY})),n.includes(N.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>this.gridster.el.getBoundingClientRect().right-(this.outerMarginRight??this.margin)&&(n=n.filter(r=>r!=N.RIGHT),e=new MouseEvent(e.type,{clientX:this.lastMouse.clientX,clientY:e.clientY})),n.includes(N.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>this.gridster.el.getBoundingClientRect().bottom-(this.outerMarginBottom??this.margin)&&(n=n.filter(r=>r!=N.DOWN),e=new MouseEvent(e.type,{clientX:e.clientX,clientY:this.lastMouse.clientY}))),n.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,Be(this.gridster,this.left,this.top,this.width,this.height,e,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(e))},this.calculateItemPositionFromMousePosition=e=>{this.gridster.options.scale?this.calculateItemPositionWithScale(e,this.gridster.options.scale):this.calculateItemPositionWithoutScale(e),this.calculateItemPosition(),this.lastMouse.clientX=e.clientX,this.lastMouse.clientY=e.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=e=>{e.stopPropagation(),e.preventDefault(),He(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,e)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})},this.cancelDrag=()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.makeDrag=()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&this.collision!==!0&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.dragStartDelay=e=>{if(e.target.classList.contains(ui)||L.checkContentClassForEvent(this.gridster,e))return;if(L.checkTouchEvent(e),!this.gridster.$options.draggable.delayStart){this.dragStart(e);return}let r=setTimeout(()=>{this.dragStart(e),R()},this.gridster.$options.draggable.delayStart),l=this.gridsterItem.renderer.listen("document","mouseup",R),h=this.gridsterItem.renderer.listen("document","mouseleave",R),u=this.gridsterItem.renderer.listen("window","blur",R),w=this.gridsterItem.renderer.listen("document","touchmove",W),C=this.gridsterItem.renderer.listen("document","touchend",R),$=this.gridsterItem.renderer.listen("document","touchcancel",R);function W(D){L.checkTouchEvent(D),(Math.abs(D.clientX-e.clientX)>9||Math.abs(D.clientY-e.clientY)>9)&&R()}function R(){clearTimeout(r),u(),l(),h(),w(),C(),$()}},this.gridsterItem=i,this.gridster=s,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(i){i.which&&i.which!==1||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,i),i.stopPropagation(),i.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=i.clientX,this.originalClientY=i.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.gridster.$options.dirType===O.RTL?this.diffLeft=i.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:this.diffLeft=i.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=i.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new Dt(this.gridsterItem),this.swap=new Kt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}calculateItemPositionWithScale(i,s){this.gridster.$options.dirType===O.RTL?this.left=this.gridster.el.scrollWidth-this.originalClientX+(i.clientX-this.originalClientX)/s+this.diffLeft:this.left=this.originalClientX+(i.clientX-this.originalClientX)/s+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(i.clientY-this.originalClientY)/s+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(i){this.gridster.$options.dirType===O.RTL?this.left=this.gridster.el.scrollWidth-i.clientX+this.diffLeft:this.left=i.clientX+this.offsetLeft-this.diffLeft,this.top=i.clientY+this.offsetTop-this.diffTop}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){let i=this.path[this.path.length-1],s="";i.x<this.gridsterItem.$item.x?s=this.push.fromWest:i.x>this.gridsterItem.$item.x?s=this.push.fromEast:i.y<this.gridsterItem.$item.y?s=this.push.fromNorth:i.y>this.gridsterItem.$item.y&&(s=this.push.fromSouth),this.push.pushItems(s,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&this.collision!==!0&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}else this.collision=!1;this.gridster.previewStyle(!0)}toggle(){let i=this.gridsterItem.canBeDragged();!this.enabled&&i?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!i&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}getDirections(i){let s=[];return this.lastMouse.clientX===0&&this.lastMouse.clientY===0&&(this.lastMouse.clientY=i.clientY,this.lastMouse.clientX=i.clientX),this.lastMouse.clientY>i.clientY&&s.push(N.UP),this.lastMouse.clientY<i.clientY&&s.push(N.DOWN),this.lastMouse.clientX<i.clientX&&s.push(N.RIGHT),this.lastMouse.clientX>i.clientX&&s.push(N.LEFT),s}},Jt=class{constructor(i){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=i,this.gridster=i.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(i){return this.gridster.$options.pushResizeItems?this.push(this.gridsterItem,i):!1}restoreItems(){let i=0,s=this.pushedItems.length,t;for(;i<s;i++)t=this.pushedItems[i],t.$item.x=t.item.x||0,t.$item.y=t.item.y||0,t.$item.cols=t.item.cols||1,t.$item.row=t.item.row||1,t.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let i=0,s=this.pushedItems.length,t;for(;i<s;i++)t=this.pushedItems[i],t.checkItemChanges(t.$item,t.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let i=this.pushedItems.length-1,s=!1;for(;i>-1;i--)this.checkPushedItem(this.pushedItems[i],i)&&(s=!0);s&&this.checkPushBack()}push(i,s){let t=this.gridster.checkCollision(i.$item);if(t&&t!==!0&&t!==this.gridsterItem&&t.canBeResized()){if(this.tryPattern[s].call(this,t,i,s))return!0}else if(t===!1)return!0;return!1}trySouth(i,s,t){let e=i.$item.y,n=i.$item.rows;return i.$item.y=s.$item.y+s.$item.rows,i.$item.rows=n+e-i.$item.y,!this.gridster.checkCollisionTwoItems(i.$item,s.$item)&&!this.gridster.checkGridCollision(i.$item)?(i.setSize(),this.addToPushed(i),this.push(s,t),!0):(i.$item.y=e,i.$item.rows=n,!1)}tryNorth(i,s,t){let e=i.$item.rows;return i.$item.rows=s.$item.y-i.$item.y,!this.gridster.checkCollisionTwoItems(i.$item,s.$item)&&!this.gridster.checkGridCollision(i.$item)?(i.setSize(),this.addToPushed(i),this.push(s,t),!0):(i.$item.rows=e,!1)}tryEast(i,s,t){let e=i.$item.x,n=i.$item.cols;return i.$item.x=s.$item.x+s.$item.cols,i.$item.cols=n+e-i.$item.x,!this.gridster.checkCollisionTwoItems(i.$item,s.$item)&&!this.gridster.checkGridCollision(i.$item)?(i.setSize(),this.addToPushed(i),this.push(s,t),!0):(i.$item.x=e,i.$item.cols=n,!1)}tryWest(i,s,t){let e=i.$item.cols;return i.$item.cols=s.$item.x-i.$item.x,!this.gridster.checkCollisionTwoItems(i.$item,s.$item)&&!this.gridster.checkGridCollision(i.$item)?(i.setSize(),this.addToPushed(i),this.push(s,t),!0):(i.$item.cols=e,!1)}addToPushed(i){if(this.pushedItems.indexOf(i)<0)this.pushedItems.push(i),this.pushedItemsPath.push([{x:i.item.x||0,y:i.item.y||0,cols:i.item.cols||0,rows:i.item.rows||0},{x:i.$item.x,y:i.$item.y,cols:i.$item.cols,rows:i.$item.rows}]);else{let s=this.pushedItems.indexOf(i);this.pushedItemsPath[s].push({x:i.$item.x,y:i.$item.y,cols:i.$item.cols,rows:i.$item.rows})}}removeFromPushed(i){i>-1&&(this.pushedItems.splice(i,1),this.pushedItemsPath.splice(i,1))}checkPushedItem(i,s){let t=this.pushedItemsPath[s],e=t.length-2,n,r,l,h,u;for(;e>-1;e--)n=t[e],r=i.$item.x,l=i.$item.y,h=i.$item.cols,u=i.$item.rows,i.$item.x=n.x,i.$item.y=n.y,i.$item.cols=n.cols,i.$item.rows=n.rows,this.gridster.findItemWithItem(i.$item)?(i.$item.x=r,i.$item.y=l,i.$item.cols=h,i.$item.rows=u):(i.setSize(),t.splice(e+1,t.length-1-e));return t.length<2?(this.removeFromPushed(s),!0):!1}},te=class{constructor(i,s,t){this.zone=t,this.directionFunction=null,this.dragMove=e=>{if(this.directionFunction===null)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");e.stopPropagation(),e.preventDefault(),L.checkTouchEvent(e),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,Be(this.gridster,this.left,this.top,this.width,this.height,e,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);let n=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(e.clientX-this.originalClientX)/n,clientY:this.originalClientY+(e.clientY-this.originalClientY)/n}),this.lastMouse.clientX=e.clientX,this.lastMouse.clientY=e.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=e=>{e.stopPropagation(),e.preventDefault(),He(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,e)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})},this.cancelResize=()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.makeResize=()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.handleNorth=e=>{this.top=e.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height?(this.height=this.minHeight,this.top=this.bottom-this.minHeight):this.gridster.options.enableBoundaryControl&&(this.top=Math.max(0,this.top),this.height=this.bottom-this.top);let n=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionY(this.top+n,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.top=this.gridster.positionYToPixels(this.gridsterItem.$item.y),this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)},this.handleWest=e=>{let n=this.gridster.$options.dirType===O.RTL?this.originalClientX+(this.originalClientX-e.clientX):e.clientX;this.left=n+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width?(this.width=this.minWidth,this.left=this.right-this.minWidth):this.gridster.options.enableBoundaryControl&&(this.left=Math.max(0,this.left),this.width=this.right-this.left);let r=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionX(this.left+r,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.left=this.gridster.positionXToPixels(this.gridsterItem.$item.x),this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)},this.handleSouth=e=>{if(this.height=e.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.gridster.options.enableBoundaryControl){let r=this.outerMarginBottom??this.margin,l=this.gridster.el.getBoundingClientRect();this.bottom=Math.min(this.bottom,l.bottom-l.top-2*r),this.height=this.bottom-this.top}let n=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionY(this.bottom+n,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)},this.handleEast=e=>{let n=this.gridster.$options.dirType===O.RTL?this.originalClientX+(this.originalClientX-e.clientX):e.clientX;if(this.width=n+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.gridster.options.enableBoundaryControl){let l=this.outerMarginRight??this.margin,h=this.gridster.el.getBoundingClientRect();this.right=Math.min(this.right,h.right-h.left-2*l),this.width=this.right-this.left}let r=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionX(this.right+r,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)},this.handleNorthWest=e=>{this.handleNorth(e),this.handleWest(e)},this.handleNorthEast=e=>{this.handleNorth(e),this.handleEast(e)},this.handleSouthWest=e=>{this.handleSouth(e),this.handleWest(e)},this.handleSouthEast=e=>{this.handleSouth(e),this.handleEast(e)},this.gridsterItem=i,this.gridster=s,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){this.gridster?.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(i){if(i.which&&i.which!==1)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,i),i.stopPropagation(),i.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=i.clientX,this.lastMouse.clientY=i.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=i.clientX,this.originalClientY=i.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=i.clientX+this.offsetLeft-this.left,this.diffRight=i.clientX+this.offsetLeft-this.right,this.diffTop=i.clientY+this.offsetTop-this.top,this.diffBottom=i.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new Dt(this.gridsterItem),this.pushResize=new Jt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();let{classList:s}=i.target;s.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):s.contains("handle-w")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):s.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):s.contains("handle-e")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):s.contains("handle-nw")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):s.contains("handle-ne")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):s.contains("handle-sw")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):s.contains("handle-se")&&(this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized(),this.resizableHandles=this.gridsterItem.getResizableHandles()}dragStartDelay(i){if(L.checkTouchEvent(i),!this.gridster.$options.resizable.delayStart){this.dragStart(i);return}let s=setTimeout(()=>{this.dragStart(i),w()},this.gridster.$options.resizable.delayStart),{cancelMouse:t,cancelMouseLeave:e,cancelOnBlur:n,cancelTouchMove:r,cancelTouchEnd:l,cancelTouchCancel:h}=this.zone.runOutsideAngular(()=>{let C=this.gridsterItem.renderer.listen("document","mouseup",w),$=this.gridsterItem.renderer.listen("document","mouseleave",w),W=this.gridsterItem.renderer.listen("window","blur",w),R=this.gridsterItem.renderer.listen("document","touchmove",u),D=this.gridsterItem.renderer.listen("document","touchend",w),Z=this.gridsterItem.renderer.listen("document","touchcancel",w);return{cancelMouse:C,cancelMouseLeave:$,cancelOnBlur:W,cancelTouchMove:R,cancelTouchEnd:D,cancelTouchCancel:Z}});function u(C){L.checkTouchEvent(C),(Math.abs(C.clientX-i.clientX)>9||Math.abs(C.clientY-i.clientY)>9)&&w()}function w(){clearTimeout(s),n(),t(),e(),r(),l(),h()}}setItemTop(i){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,i)}setItemLeft(i){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,i,this.top)}setItemHeight(i){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",i+"px")}setItemWidth(i){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",i+"px")}},Ge=(()=>{let i=class i{get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}constructor(t,e,n,r){this.renderer=n,this.zone=r,this.itemInit=new V,this.itemChange=new V,this.itemResize=new V,this.el=t.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=e,this.drag=new Zt(this,e,this.zone),this.resize=new te(this,e,this.zone)}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(t){t.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),t.item&&t.item.previousValue&&this.setSize()}updateOptions(){this.$item=L.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0,resizableHandles:{s:void 0,e:void 0,n:void 0,w:void 0,se:void 0,ne:void 0,sw:void 0,nw:void 0}})}ngOnDestroy(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){let t=this.$item.y*this.gridster.curRowHeight,e=this.$item.x*this.gridster.curColWidth,n=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,r=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=t,this.left=e,!this.init&&n>0&&r>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(n!==this.width||r!==this.height)&&(this.width=n,this.height=r,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(t,e){t.rows===e.rows&&t.cols===e.cols&&t.x===e.x&&t.y===e.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=e.x||0,this.$item.y=e.y||0,this.$item.cols=e.cols||1,this.$item.rows=e.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){let t=this.gridster.$options.draggable.enabled,e=this.$item.dragEnabled===void 0?t:this.$item.dragEnabled;return!this.gridster.mobile&&t&&e}canBeResized(){let t=this.gridster.$options.resizable.enabled,e=this.$item.resizeEnabled===void 0?t:this.$item.resizeEnabled;return!this.gridster.mobile&&t&&e}getResizableHandles(){let t=this.gridster.$options.resizable.handles,e=this.$item.resizableHandles;return e===void 0?t:it(it({},t),e)}bringToFront(t){if(t&&t<=0)return;let e=this.getLayerIndex(),n=this.gridster.$options.maxLayerIndex;if(e<n){let r=t?e+t:n;this.item.layerIndex=this.$item.layerIndex=r>n?n:r}}sendToBack(t){if(t&&t<=0)return;let e=this.getLayerIndex();if(e>0){let n=t?e-t:0;this.item.layerIndex=this.$item.layerIndex=n<0?0:n}}getLayerIndex(){return this.item.layerIndex!==void 0?this.item.layerIndex:this.gridster.$options.defaultLayerIndex!==void 0?this.gridster.$options.defaultLayerIndex:0}};i.\u0275fac=function(e){return new(e||i)(_(J),_(ee),_(ot),_(Vt))},i.\u0275cmp=A({type:i,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(e,n){e&2&&ut("z-index",n.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},standalone:!0,features:[gt,X],ngContentSelectors:Ve,decls:9,vars:8,consts:[[1,"gridster-item-resizable-handler","handle-s"],[1,"gridster-item-resizable-handler","handle-e"],[1,"gridster-item-resizable-handler","handle-n"],[1,"gridster-item-resizable-handler","handle-w"],[1,"gridster-item-resizable-handler","handle-se"],[1,"gridster-item-resizable-handler","handle-ne"],[1,"gridster-item-resizable-handler","handle-sw"],[1,"gridster-item-resizable-handler","handle-nw"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(e,n){e&1&&(Bt(),Ht(0),F(1,ri,1,0,"div",0)(2,oi,1,0,"div",1)(3,li,1,0,"div",2)(4,ai,1,0,"div",3)(5,hi,1,0,"div",4)(6,di,1,0,"div",5)(7,ci,1,0,"div",6)(8,pi,1,0,"div",7)),e&2&&(a(),x(n.resize.resizableHandles!=null&&n.resize.resizableHandles.s&&n.resize.resizeEnabled?1:-1),a(),x(n.resize.resizableHandles!=null&&n.resize.resizableHandles.e&&n.resize.resizeEnabled?2:-1),a(),x(n.resize.resizableHandles!=null&&n.resize.resizableHandles.n&&n.resize.resizeEnabled?3:-1),a(),x(n.resize.resizableHandles!=null&&n.resize.resizableHandles.w&&n.resize.resizeEnabled?4:-1),a(),x(n.resize.resizableHandles!=null&&n.resize.resizableHandles.se&&n.resize.resizeEnabled?5:-1),a(),x(n.resize.resizableHandles!=null&&n.resize.resizableHandles.ne&&n.resize.resizeEnabled?6:-1),a(),x(n.resize.resizableHandles!=null&&n.resize.resizableHandles.sw&&n.resize.resizeEnabled?7:-1),a(),x(n.resize.resizableHandles!=null&&n.resize.resizableHandles.nw&&n.resize.resizeEnabled?8:-1))},styles:[`gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:#fff;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}
`],encapsulation:2});let o=i;return o})();var Fs=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=de({type:i}),i.\u0275inj=he({});let o=i;return o})();var Wt=(()=>{let i=class i{constructor(){this.items=[],this.widgets=[]}init(t){if(this.items=[],this.widgets=[],!!t.widgets)for(let e=0;e<t.widgets.length;e++){let n=t.widgets[e];this.widgets.push(n);for(let r=0;r<n.controls.length;r++)n.controls[r].action.toLowerCase()==="applyvariable"&&this.items.push(n.controls[r])}}clear(){this.items=[]}isExists(){return this.items.length!==0}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=St({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var wi=["gridster"],Ci=["widgets"],je=(()=>{let i=class i{constructor(){this.list=[],this.dbs=z(Me),this.cd=z(K),this.eds=z(Et),this.route=z(ht),this.ss=z(ct),this.ns=z(Mt),this.ds=z(xe),this.sbs=z(ke),this.fs=z(st),this.bs=z(pt),this.ms=z(Ee),this.r2=z(ot),this.us=z(dt),this.hs=z(Pt),this.vs=z(Wt),this.i18n=z(kt),this.es=z(be),this.subOnEditedWidgetChanged=this.eds.onEditedWidgetChanged.pipe(nt()),this.subOnNewWidget=this.eds.onNewWidget.pipe(nt()),this.subOnSaveWidget=this.eds.onSave.pipe(nt()),this.subCancelEditing=this.eds.onCancelEditing.pipe(nt()),this.subOnDeleteWidget=this.eds.onDeleteWidget.pipe(nt())}ngOnDestroy(){clearTimeout(this.scrollToNewWidgetTimeout)}getWidgetByInfo(t){if(t)return this.widgets.find(e=>e.widget===t)}subscribeForEditing(){this.subOnEditedWidgetChanged.subscribe(t=>this.updateEditedWidget(t)),this.subOnNewWidget.subscribe(t=>this.newWidget(t)),this.subOnSaveWidget.subscribe(()=>this.onSaveWidget()),this.subCancelEditing.subscribe(()=>this.cancelEditing()),this.subOnDeleteWidget.subscribe(t=>this.deleteWidget(t))}updateEditedWidget(t){this.editedWidget||(this.editedWidget=t.widget);let e=this.getWidgetByInfo(this.editedWidget);e&&(e.header?.cd.detectChanges(),e.cd.detectChanges(),t.refreshData&&e.requestData()),this.detectChanges()}newWidget(t){let e=this.dbs.getWidgetsWithoutEmpty().pop();e&&(t.cols=e.cols,t.rows=e.rows),this.editedWidget=t,this.list.push(this.editedWidget);let n=this.gridster.getFirstPossiblePosition(this.editedWidget);this.editedWidget.x=n.x,this.editedWidget.y=n.y,this.editedWidget.cols=n.cols,this.editedWidget.rows=n.rows,this.detectChanges(),this.scrollNewWidgetIntoView()}onSaveWidget(){this.editedWidget&&(this.editedWidget.edKey=""),this.editedWidget=void 0,this.detectChanges()}cancelEditing(){if(!this.editedWidget)return;let t=this.list.indexOf(this.editedWidget);if(this.editedWidget?.oldWidget){this.editedWidget=this.editedWidget.oldWidget,this.editedWidget.edKey="ed"+new Date().getTime(),this.list[t]=this.editedWidget,this.cd.detectChanges(),this.editedWidget.edKey="",this.editedWidget=void 0,this.detectChanges();return}else t!==-1&&this.list.splice(t,1);this.editedWidget=void 0,this.detectChanges()}scrollNewWidgetIntoView(){clearTimeout(this.scrollToNewWidgetTimeout),this.scrollToNewWidgetTimeout=setTimeout(()=>{let t=document.getElementById("edited-widget");t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})},300)}detectChanges(){let t=this.gridster.el.scrollLeft,e=this.gridster.el.scrollTop;this.cd.detectChanges(),this.gridster.onResize(),this.gridster.el.scrollLeft=t,this.gridster.el.scrollTop=e}deleteWidget(t){this.editedWidget=void 0;let e=this.list.indexOf(t);e!==-1&&this.list.splice(e,1),this.list=[...this.list],this.cd.detectChanges()}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=A({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(e&1&&(j(wi,5),j(Ci,5)),e&2){let r;U(r=q())&&(n.gridster=r.first),U(r=q())&&(n.widgets=r)}},standalone:!0,features:[X],decls:0,vars:0,template:function(e,n){},encapsulation:2});let o=i;return o})();var Ue=(()=>{let i=class i{constructor(t){this.el=t,this.tooltip="",this.tooltipEl=null,this.onHover=e=>this.showTooltip(e),this.onOut=e=>this.removeTooltip()}ngAfterViewInit(){this.el.nativeElement.addEventListener("mouseover",this.onHover),this.el.nativeElement.addEventListener("mouseout",this.onOut)}ngOnDestroy(){this.el.nativeElement.removeEventListener("mouseover",this.onHover),this.el.nativeElement.removeEventListener("mouseout",this.onOut),this.removeTooltip()}showTooltip(t){if(this.tooltipEl||(this.createTooltip(),!this.tooltipEl))return;let e=t.clientX,n=t.clientY,r=this.tooltipEl.offsetWidth,l=this.tooltipEl.offsetHeight,h=window.innerWidth,u=window.innerHeight,w=e,C=n;e+r>h&&(w=e-r),n+l>u&&(C=n-l),this.tooltipEl&&(this.tooltipEl.style.left=w+"px",this.tooltipEl.style.top=C+"px")}removeTooltip(){this.tooltipEl&&(this.tooltipEl.parentNode?.removeChild(this.tooltipEl),this.tooltipEl=null)}createTooltip(){this.removeTooltip(),this.tooltipEl=document.createElement("div"),this.tooltipEl.classList.add("dsw-tooltip"),this.tooltipEl.innerHTML=this.tooltip,document.body.appendChild(this.tooltipEl)}};i.\u0275fac=function(e){return new(e||i)(_(J))},i.\u0275dir=ce({type:i,selectors:[["","tooltip",""]],inputs:{tooltip:"tooltip"},standalone:!0});let o=i;return o})();var qe=(()=>{let i=class i{constructor(){this.onToggleHeaderButton=new V}toggleButton(t){this.onToggleHeaderButton.emit(t)}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=St({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();function vi(o,i){if(o&1&&I(0,"img",1),o&2){let s=c();k("tooltip",s.filtersTooltip)}}function Ii(o,i){if(o&1){let s=y();d(0,"button",6),f("click",function(){p(s);let e=c();return m(e.onBackClick())}),I(1,"img",7),d(2,"label"),b(3),S(4,"i18n"),g()()}o&2&&(a(3),M(T(4,1,"back")))}function Si(o,i){if(o&1){let s=y();d(0,"button",6),f("click",function(){p(s);let e=c();return m(e.onResetClickFilterHandler())}),I(1,"img",8),d(2,"label"),b(3),S(4,"i18n"),g()()}o&2&&(a(3),M(T(4,1,"resetClickFilter")))}function Ti(o,i){if(o&1){let s=y();d(0,"button",9),S(1,"i18n"),f("click",function(){p(s);let e=c();return m(e.onClick("by6columns"))}),I(2,"img",10),g(),d(3,"button",9),S(4,"i18n"),f("click",function(){p(s);let e=c();return m(e.onClick("by5columns"))}),I(5,"img",11),g(),d(6,"button",9),S(7,"i18n"),f("click",function(){p(s);let e=c();return m(e.onClick("by4columns"))}),I(8,"img",12),g(),d(9,"button",9),S(10,"i18n"),f("click",function(){p(s);let e=c();return m(e.onClick("by3columns"))}),I(11,"img",13),g(),d(12,"button",9),S(13,"i18n"),f("click",function(){p(s);let e=c();return m(e.onClick("by2columns"))}),I(14,"img",14),g(),d(15,"button",9),S(16,"i18n"),f("click",function(){p(s);let e=c();return m(e.onClick("byRows"))}),I(17,"img",15),g(),d(18,"button",16),S(19,"i18n"),f("click",function(){p(s);let e=c();return m(e.onClick("setDefault"))}),I(20,"img",17),d(21,"label"),b(22),S(23,"i18n"),g()(),d(24,"button",18),f("click",function(){p(s);let e=c();return m(e.closeMobileFilter())}),I(25,"img",8),d(26,"label"),b(27),S(28,"i18n"),g()()}if(o&2){let s=c();E("active",s.widget.viewSize===5),k("title",T(1,21,"by6columns")),a(3),E("active",s.widget.viewSize===4),k("title",T(4,23,"by5columns")),a(3),E("active",s.widget.viewSize===3),k("title",T(7,25,"by4columns")),a(3),E("active",s.widget.viewSize===2),k("title",T(10,27,"by3columns")),a(3),E("active",s.widget.viewSize===1),k("title",T(13,29,"by2columns")),a(3),E("active",s.widget.viewSize===0),k("title",T(16,31,"byRows")),a(3),k("title",T(19,33,"setDefault")),a(4),M(T(23,35,"refresh")),a(5),M(T(28,37,"close"))}}function $i(o,i){if(o&1){let s=y();d(0,"button",19),f("click",function(){p(s);let e=c();return m(e.deleteWidgetClick())}),I(1,"img",20),d(2,"label"),b(3,"Delete widget"),g()()}}function ki(o,i){if(o&1){let s=y();d(0,"button",16),f("click",function(){let e=p(s).$implicit,n=c(2);return m(n.onClick(e.id))}),I(1,"img",24),d(2,"label"),b(3),g()()}if(o&2){let s=i.$implicit,t=c(2);E("active",t.widget[s.id]),k("title",s.tooltip),a(),k("src",s.icon,pe),a(2),M(s.text)}}function Mi(o,i){if(o&1){let s=y();d(0,"button",16),S(1,"i18n"),f("click",function(){p(s);let e=c(2);return m(e.onClick("isLegend"))}),I(2,"img",25),d(3,"label"),b(4,"Legend"),g()()}if(o&2){let s=c(2);E("active",s.widget.isLegend),Q("title",T(1,3,"showLegend"))}}function Pi(o,i){if(o&1){let s=y();d(0,"button",16),S(1,"i18n"),f("click",function(){p(s);let e=c(2);return m(e.onClick("showValues"))}),I(2,"img",26),d(3,"label"),b(4,"Values"),g()()}if(o&2){let s=c(2);E("active",s.widget.showValues),Q("title",T(1,3,"showValues"))}}function Fi(o,i){if(o&1){let s=y();d(0,"button",16),S(1,"i18n"),f("click",function(){p(s);let e=c(2);return m(e.onClick("isTop"))}),I(2,"img",27),d(3,"label"),b(4,"Top"),g()()}if(o&2){let s=c(2);E("active",s.widget.isTop),Q("title",T(1,3,"showTop"))}}function Ei(o,i){if(o&1){let s=y();d(0,"button",16),S(1,"i18n"),f("click",function(){p(s);let e=c(2);return m(e.onClick("showZero"))}),I(2,"img",28),d(3,"label"),b(4,"Zero"),g()()}if(o&2){let s=c(2);E("active",s.widget.showZero),Q("title",T(1,3,"showZero"))}}function Di(o,i){if(o&1){let s=y();d(0,"button",16),S(1,"i18n"),f("click",function(){p(s);let e=c(2);return m(e.onClick("displayAsPivot"))}),I(2,"img",29),d(3,"label"),b(4,"Pivot"),g()()}if(o&2){let s=c(2);E("active",s.widget.type==="pivot"),Q("title",T(1,3,"showPivot"))}}function zi(o,i){if(o&1){let s=y();d(0,"button",16),S(1,"i18n"),f("click",function(){p(s);let e=c(2);return m(e.onClick("chartConfig"))}),I(2,"img",30),d(3,"label"),b(4,"Colors"),g()()}o&2&&Q("title",T(1,1,"changeColors"))}function Wi(o,i){if(o&1){let s=y();d(0,"button",31),S(1,"i18n"),f("click",function(){p(s);let e=c(2);return m(e.onClick("expand"))}),I(2,"img",32),g()}if(o&2){let s=c(2);E("active",s.widget.isExpanded),k("title",T(1,4,"fullscreen"))("hidden",s.isEmptyWidget()||!s.widget.isSupported)}}function Oi(o,i){if(o&1&&(B(0,ki,4,5,"button",21,G),F(2,Mi,5,5,"button",21)(3,Pi,5,5,"button",21)(4,Fi,5,5,"button",21)(5,Ei,5,5,"button",21)(6,Di,5,5,"button",21)(7,zi,5,3,"button",22)(8,Wi,3,6,"button",23)),o&2){let s=c();H(s.typeDesc==null?null:s.typeDesc.headerButtons),a(2),x(!(s.typeDesc!=null&&s.typeDesc.disableLegend)&&s.widget.isChart&&!s.widget.noToggleLegend?2:-1),a(),x(s.widget.isBtnValues?3:-1),a(),x(s.widget.isChart?4:-1),a(),x(s.widget.isBtnZero?5:-1),a(),x(s.widget.isChart||s.widget.isMap||s.widget.type==="regular"||s.widget.oldType==="regular"?6:-1),a(),x(s.widget.isChart||s.widget.type==="regular"?7:-1),a(),x(s.widget.shared?-1:8)}}var Ke=(()=>{let i=class i{constructor(t,e,n,r,l,h,u,w,C){this.ss=t,this.us=e,this.ws=n,this.cd=r,this.ns=l,this.fs=h,this.hs=u,this.eds=w,this.route=C,this.onButtonClick=new V,this.onBack=new V,this.onResetClickFilter=new V,this.hasFilters=!1,this.filtersTooltip="",this.noDrag=!1,this.noDrag=this.route.snapshot.queryParamMap.get("nodrag")==="1"}ngOnInit(){this.subFiltersChanged=this.fs.onFiltersChanged.subscribe(()=>{this.updateActiveFiltersInfo(),this.cd.detectChanges()}),this.updateActiveFiltersInfo()}updateActiveFiltersInfo(){if(!this.widget||this.widget.type===tt.const.emptyWidgetClass)return;let t=this.fs.getWidgetFilters(this.widget?.name).filter(e=>e.value!==""||e.isInterval);this.hasFilters=!!t.length,this.filtersTooltip=t.map(e=>e.label+': <span style="opacity: 0.7">'+e.valueDisplay+"</span>").join(`
`)}onClick(t){this.widget[t]=!this.widget[t];let e=this.ss.getWidgetsSettings(this.widget.dashboard);e[this.widget.name]||(e[this.widget.name]={}),e[this.widget.name][t]=this.widget[t],this.ss.setWidgetsSettings(e,this.widget.dashboard),this.onButtonClick.emit({widget:this.widget,name:t,state:this.widget[t]})}loadToolbarButton(t,e,n){if(this.us.isEmbedded()){let r=this.route.snapshot.queryParamMap.get(e);if(r){let l=!1;r.toLowerCase()==="true"?l=!0:r.toLowerCase()==="false"&&(l=!1),this.widget[e]=l;return}}t[this.widget.name]&&(t[this.widget.name][e]!==void 0?this.widget[e]=this.widgetsSettings[this.widget.name][e]:n!==void 0&&(this.widget[e]=n))}onBackClick(){this.onBack.emit()}onResetClickFilterHandler(){this.onResetClickFilter.emit()}isEmptyWidget(){if(!this.widget)return!1;let t=this.widget.type;return t===Pe||t==="horizontalControls"||t==="verticalControls"}closeMobileFilter(){this.hs.toggleMobileFilterDialog()}ngOnChanges(t){t.widget?.currentValue&&t.widget.currentValue!==t.widget.previousValue&&this.loadButtons()}ngOnDestroy(){this.subFiltersChanged?.unsubscribe()}onHeaderDoubleClick(){this.isEmptyWidget()||!this.widget.isSupported||this.onClick("expand")}deleteWidgetClick(){this.eds.deleteWidget(this.widget)}loadButtons(){this.widgetsSettings=this.ss.getWidgetsSettings(this.widget.dashboard)||{},this.loadToolbarButton(this.widgetsSettings,"isLegend"),this.loadToolbarButton(this.widgetsSettings,"isTop"),this.loadToolbarButton(this.widgetsSettings,"showZero"),this.loadToolbarButton(this.widgetsSettings,"showValues");let t=this.typeDesc?.headerButtons;if(t)for(let e=0;e<t.length;e++)this.loadToolbarButton(this.widgetsSettings,t[e].id,t[e].defValue)}};i.\u0275fac=function(e){return new(e||i)(_(ct),_(dt),_(qe),_(K),_(Mt),_(st),_(Pt),_(Et),_(ht))},i.\u0275cmp=A({type:i,selectors:[["dsw-widget-header"]],inputs:{typeDesc:"typeDesc",widget:"widget"},outputs:{onButtonClick:"onButtonClick",onBack:"onBack",onResetClickFilter:"onResetClickFilter"},standalone:!0,features:[gt,X],decls:10,vars:11,consts:[[1,"title-text"],["src","assets/img/icons/icon-filter.svg",1,"btn-filters",3,"tooltip"],[1,"btn-with-text"],[1,"divider"],[1,"drag-handle",3,"dblclick"],["title","Delete widget"],[1,"btn-with-text",3,"click"],["src","assets/img/icons/chevron_left-black-18dp.svg"],["src","assets/img/icons/close-black-18dp.svg"],[1,"only-desktop",3,"click","title"],["src","assets/img/icons/view-6columns.svg"],["src","assets/img/icons/view-5columns.svg"],["src","assets/img/icons/view-4columns.svg"],["src","assets/img/icons/view-3columns.svg"],["src","assets/img/icons/view-2columns.svg"],["src","assets/img/icons/view-list.svg"],[3,"click","title"],["src","assets/img/icons/reset.svg"],[1,"only-sm",3,"click"],["title","Delete widget",3,"click"],["src","assets/img/icons/icon-close.svg"],[3,"active","title"],[3,"title"],[1,"only-desktop",3,"active","title","hidden"],[3,"src"],["src","assets/img/icons/legend-toggle.svg"],["src","assets/img/icons/format-list-numbered.svg"],["src","assets/img/icons/top-records.svg"],["src","assets/img/icons/exposure-zero.svg"],["src","assets/img/icons/table.svg"],["src","assets/img/icons/palette-icon.svg"],[1,"only-desktop",3,"click","title","hidden"],["src","assets/img/icons/full-screen.svg"]],template:function(e,n){e&1&&(d(0,"span",0),b(1),F(2,vi,1,1,"img",1),g(),F(3,Ii,5,3,"button",2)(4,Si,5,3,"button",2),I(5,"div",3),d(6,"div",4),f("dblclick",function(){return n.onHeaderDoubleClick()}),g(),F(7,Ti,29,39)(8,$i,4,0,"button",5)(9,Oi,9,7)),e&2&&(a(),Tt(" ",n.widget.title," "),a(),x(n.hasFilters?2:-1),a(),x(n.widget.backButton?3:-1),a(),x(n.widget.clickFilterActive?4:-1),a(2),E("no-drag",n.noDrag)("expanded",n.widget.isExpanded),a(),x(n.isEmptyWidget()?7:-1),a(),x(n.widget.edKey||n.widget.oldWidget?8:-1),a(),x(!n.widget.edKey&&!n.widget.oldWidget?9:-1))},dependencies:[Ue,$t],styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{position:relative;display:flex;z-index:11;flex:0 0 auto;justify-content:space-between;font-family:Oxygen;background:var(--cl-widget-header-bg);height:var(--tile-header-height);padding:0;font-size:8pt;text-align:center;color:var(--cl-widget-header-txt);white-space:nowrap;text-overflow:ellipsis;border-bottom:var(--cl-widget-header-border)}[_nghost-%COMP%] > .drag-handle[_ngcontent-%COMP%]{position:absolute;inset:-20px -20px 0}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{z-index:1;flex:0 0 auto;cursor:pointer;background-color:transparent;border:none;padding-left:4px;padding-right:4px;margin:-3px 0 0;height:22px;display:flex;align-items:center;justify-content:center;transition:background-color .3s line-height;outline:none}[_nghost-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{opacity:var(--widget-header-btn-opacity);filter:var(--widget-header-btn-filter)}[_nghost-%COMP%]   button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{opacity:var(--widget-header-btn-opacity);filter:var(--widget-header-btn-filter)}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--cl-header-btn-hover-darken)}[_nghost-%COMP%]   button.active[_ngcontent-%COMP%] > img[_ngcontent-%COMP%], [_nghost-%COMP%]   button.active[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{opacity:1;filter:var(--widget-header-btn-active-filter)}[_nghost-%COMP%]   button[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}@media (max-width: 576px){[_nghost-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0;flex:1 1 100%}[_nghost-%COMP%]   button[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:inline-block;font-size:13px;opacity:var(--widget-header-btn-opacity);filter:var(--widget-header-btn-filter)}[_nghost-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:calc(var(--header-height) * .5)}}@media (max-width: 576px){[_nghost-%COMP%]{order:3;height:var(--header-height);border-bottom:none;border-top:1px solid var(--cl-header-border)}}.drag-handle[_ngcontent-%COMP%]{cursor:move;flex:1 1 100%;display:flex;justify-content:center;align-items:center}.drag-handle.no-drag[_ngcontent-%COMP%], .drag-handle.expanded[_ngcontent-%COMP%]{cursor:default}button.btn-with-text[_ngcontent-%COMP%]{cursor:pointer;color:var(--cl-widget-header-txt);display:flex;align-items:center}button.btn-with-text[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}button.btn-with-text[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:block;cursor:pointer}@media (max-width: 576px){button.btn-with-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0;flex:1 1 100%}button.btn-with-text[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:inline-block;font-size:13px;opacity:var(--widget-header-btn-opacity);filter:var(--widget-header-btn-filter)}button.btn-with-text[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:calc(var(--header-height) * .5)}}.title-text[_ngcontent-%COMP%]{pointer-events:none;margin-left:0;margin-right:4px;font-size:14px;font-weight:700;z-index:2}@media (max-width: 576px){.title-text[_ngcontent-%COMP%]{display:none!important}}.divider[_ngcontent-%COMP%]{margin-left:auto}.btn-filters[_ngcontent-%COMP%]{pointer-events:auto;vertical-align:top}"],changeDetection:0});let o=i;return o})();var Li=["filterPopup"];function Bi(o,i){if(o&1){let s=y();d(0,"span",1)(1,"label"),b(2),g(),d(3,"input",3),Nt("ngModelChange",function(e){let n=p(s).$implicit;return Xt(n.value,e)||(n.value=e),m(e)}),f("keydown.enter",function(){let e=p(s).$implicit,n=c();return m(n.emitVarChange(e))}),g()()}if(o&2){let s=i.$implicit;a(2),M(s.label),a(),At("ngModel",s.value)}}function Hi(o,i){if(o&1&&(d(0,"option",7),b(1),g()),o&2){let s=i.$implicit;k("ngValue",s),a(),M(s)}}function Ai(o,i){if(o&1){let s=y();d(0,"select",6),Nt("ngModelChange",function(e){p(s);let n=c().$implicit;return Xt(n.dsSelected,e)||(n.dsSelected=e),m(e)}),f("change",function(){p(s);let e=c().$implicit,n=c();return m(n.onDataSourceChangeHandler(e))}),B(1,Hi,2,2,"option",7,G),g()}if(o&2){let s=c().$implicit;At("ngModel",s.dsSelected),a(),H(s.labels)}}function Xi(o,i){if(o&1){let s=y();d(0,"input",8,0),f("keydown.enter",function(){p(s);let e=at(1);return m(e.blur())})("change",function(){p(s);let e=at(1),n=c().$implicit,r=c();return m(r.setControlValue(n,e.value,e))}),g()}if(o&2){let s=c().$implicit;k("type",s.type)("value",s._value)}}function Ni(o,i){if(o&1&&(d(0,"span",1)(1,"label"),b(2),g(),F(3,Ai,3,1,"select",4)(4,Xi,2,2,"input",5),g()),o&2){let s=i.$implicit;a(2),M(s.label),a(),x(s.field==="select"?3:-1),a(),x(s.field==="input"?4:-1)}}function Yi(o,i){if(o&1){let s=y();d(0,"span",1)(1,"button",9),f("click",function(){let e=p(s).$implicit,n=c();return m(n.performAction(e))}),b(2),g()()}if(o&2){let s=i.$implicit;a(2),M(s.label||s.action)}}function Gi(o,i){if(o&1){let s=y();d(0,"span",1)(1,"label"),b(2),g(),d(3,"input",10),f("click",function(e){let n=p(s).$implicit,r=c();return n.isOpen=!0,m(r.toggleFilter(n.idx,e))}),g()()}if(o&2){let s=i.$implicit,t=c();E("active",t.openedFilter===s.idx),a(2),M(s.label),a(),Q("value",s.text),Q("title",s.text)}}var Ze=(()=>{let i=class i{constructor(t,e,n,r,l,h){this.fs=t,this.ms=e,this.el=n,this.us=r,this.bs=l,this.cd=h,this.filters=[],this.onVariable=new V,this.onDataSource=new V,this.onAction=new V,this.onFilter=new V,this.openedFilter=-1}get isHorizontal(){return this.widget.type==="horizontalControls"}get colCount2(){return this.widget?.viewSize===1}get colCount3(){return this.widget?.viewSize===2}get colCount4(){return this.widget?.viewSize===3}get colCount5(){return this.widget?.viewSize===4}get colCount6(){return this.widget?.viewSize===5}get colCount1(){return this.widget?.viewSize===0}ngOnInit(){}emitVarChange(t){this.onVariable.emit(t)}onDataSourceChangeHandler(t){this.onDataSource.emit(t)}performAction(t){this.onAction.emit(t)}toggleFilter(t,e){let n=this.fs.getFilter(t);if(!n)return;this.openedFilter=t;let l=e.target.getBoundingClientRect(),h=l.x-4,u=l.y+l.height+4,w=n.isDate?420:340;h+w>window.innerWidth&&(h=l.x+l.width-w);let C=this.us.isMobile(),$;if(C){let W=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--header-height"),10);$=window.document.body.offsetHeight-W-this.el.nativeElement.offsetHeight}this.ms.show({component:import("./chunk-BXIO2E6R.js"),hideBackdrop:!0,closeByEsc:!0,closeByBackdropClick:!0,buttons:[],noPadding:!0,componentStyles:{position:"absolute",left:h+"px",top:u+"px",height:C?`${$}px`:"auto"},onComponentInit:W=>{W.initialize(this.widget,n,this.widget.dataSource)},onClose:()=>{this.openedFilter=-1,this.cd.detectChanges()}})}setControlValue(t,e,n){let r=parseInt(e,10);isNaN(r)||r===0?(delete t._value,n.value=""):t._value=e,this.bs.broadcast("refresh:"+this.widget.name)}detectChanges(){this.cd.detectChanges()}};i.\u0275fac=function(e){return new(e||i)(_(st),_(Ft),_(J),_(dt),_(pt),_(K))},i.\u0275cmp=A({type:i,selectors:[["dsw-widget-filter"]],viewQuery:function(e,n){if(e&1&&j(Li,7,me),e&2){let r;U(r=q())&&(n.filterPopup=r.first)}},hostVars:14,hostBindings:function(e,n){e&2&&E("horizontal",n.isHorizontal)("col-2",n.colCount2)("col-3",n.colCount3)("col-4",n.colCount4)("col-5",n.colCount5)("col-6",n.colCount6)("col-1",n.colCount1)},inputs:{widget:"widget",filters:"filters"},outputs:{onVariable:"onVariable",onDataSource:"onDataSource",onAction:"onAction",onFilter:"onFilter"},standalone:!0,features:[X],decls:8,vars:0,consts:[["inp",""],[1,"flt-holder"],[1,"flt-holder",3,"active"],[3,"ngModelChange","keydown.enter","ngModel"],[3,"ngModel"],[3,"type","value"],[3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"keydown.enter","change","type","value"],[1,"btn-round",3,"click"],["readonly","","type","text",3,"click","value","title"]],template:function(e,n){e&1&&(B(0,Bi,4,2,"span",1,G),B(2,Ni,5,3,"span",1,G),B(4,Yi,3,1,"span",1,G),B(6,Gi,4,5,"span",2,G)),e&2&&(H(n.widget.pvItems),a(2),H(n.widget.dsItems),a(2),H(n.widget.acItems),a(2),H(n.filters))},dependencies:[$e,Se,Te,ye,Ie,_e,ve],styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{position:relative;display:flex;flex-shrink:0;background:var(--cl-widget-filter-bg);height:auto;flex-wrap:wrap;margin-bottom:5px}.col-1[_nghost-%COMP%], .col-2[_nghost-%COMP%], .col-3[_nghost-%COMP%], .col-4[_nghost-%COMP%], .col-5[_nghost-%COMP%], .col-6[_nghost-%COMP%]{display:grid;gap:10px}.col-1[_nghost-%COMP%] > span[_ngcontent-%COMP%], .col-2[_nghost-%COMP%] > span[_ngcontent-%COMP%], .col-3[_nghost-%COMP%] > span[_ngcontent-%COMP%], .col-4[_nghost-%COMP%] > span[_ngcontent-%COMP%], .col-5[_nghost-%COMP%] > span[_ngcontent-%COMP%], .col-6[_nghost-%COMP%] > span[_ngcontent-%COMP%]{width:100%;padding:0}.col-1[_nghost-%COMP%]{grid-template-columns:1fr}.col-2[_nghost-%COMP%]{grid-template-columns:1fr 1fr}.col-3[_nghost-%COMP%]{grid-template-columns:1fr 1fr 1fr}.col-4[_nghost-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr}.col-5[_nghost-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr 1fr}.col-6[_nghost-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr}.flt-holder[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;padding:2px 4px}.flt-holder[_ngcontent-%COMP%]:first-child{padding-left:0}.flt-holder[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:12px;color:var(--cl-widget-filter-txt);margin-bottom:4px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.flt-holder[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .flt-holder[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{cursor:pointer;height:26px;padding:0 10px;border:1px solid #EBEBEA;border-radius:13px;box-shadow:none}.flt-holder[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus, .flt-holder[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]:focus{outline:none;outline-offset:-1px}@media (max-width: 576px){.flt-holder[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .flt-holder[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{height:34px}}.flt-holder.active[_ngcontent-%COMP%]{background-color:var(--cl-widget-filter-bg)}.flt-holder.active[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .flt-holder.active[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{border-color:var(--cl-accent)}@media (max-width: 576px){.flt-holder[_ngcontent-%COMP%]{width:auto!important;flex:1 1 25%!important}}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]});let o=i;return o})();var ji=["header"],Ui=["filters"];function qi(o,i){o&1&&fe(0)}function Qi(o,i){if(o&1&&F(0,qi,1,0,"ng-container",6),o&2){let s=c();k("ngComponentOutlet",s.widgetType.class)("ngComponentOutletInputs",s.widgetInputs)}}function Ki(o,i){if(o&1&&(d(0,"div",4),b(1),g()),o&2){let s=c();a(),M(s.model.error)}}function Zi(o,i){o&1&&(d(0,"div",5),I(1,"img",7),g()),o&2&&k("@fade-in-out",void 0)}var Je=(()=>{let i=class i{constructor(t,e,n,r,l,h,u,w,C){this.fs=t,this.ss=e,this.vs=n,this.i18n=r,this.wts=l,this.bs=h,this.ms=u,this.cd=w,this.route=C,this.widget={},this.model={error:""},this.hasDatasourceChooser=!1,this.hasActions=!1,this.isHeader=!0,this.isHeader=this.route.snapshot.queryParamMap.get("noheader")!=="1"}ngOnInit(){this.widgetInputs={widget:this.widget,model:this.model,parent:this},this.updateComponent(),this.initFilters(),this.setupPivotVariables(),this.checkToolbarVisibility(),this.subscribeFilters(),this.subscribeActions()}ngAfterViewInit(){this.component=this.ngComponentOutlet?._componentRef?.instance,this.initDataSourceFromParams(),this.initDrillsForSharedWidget()}onHeaderButton(t){if(t.name==="displayAsPivot"){this.component?.displayAsPivot();return}this.component?.onHeaderButton(t),this.header?.cd.detectChanges()}setupPivotVariables(){this.widget.pvItems=[];let t=this.widget.type==="mdx2json.emptyportlet",e=[];this.vs.isExists()&&(e=this.vs.items.filter(n=>t?n.location==="dashboard":n.location!=="dashboard"&&(n.location==="*"||n.location===this.widget.name)),this.widget.pvItems=e,this.showToolbar())}showLoading(){this.widget.isLoading=!0}hideLoading(){this.widget.isLoading=!1}ngOnDestroy(){this.subCopyMdx?.unsubscribe(),this.subRefresh?.unsubscribe(),this.subFilter?.unsubscribe(),this.subUpdateFilterText?.unsubscribe(),this.subFilterAll?.unsubscribe(),this.subShare?.unsubscribe(),this.subChangeType?.unsubscribe()}clearError(){this.model.error=""}showError(t){this.model.error=t}updateFiltersText(){if(this.widget.type==="mdx2json.emptyportlet")for(let t=0;t<this.model.filters.length;t++){let e=this.getFilter(t);e&&!e.valueDisplay&&e.value&&(e.valueDisplay=e.value.toString().replace("&[","").replace("]",""))}for(let t=0;t<this.model.filters.length;t++){let e=this.getFilter(t);if(e){if(e.isDate){this.model.filters[t].text=e.valueDisplay;continue}if(e.isInterval){this.model.filters[t].text=e.values[e.fromIdx].name+":"+e.values[e.toIdx].name;continue}this.model.filters&&(this.model.filters[t].text=e?.valueDisplay||"")}}this.cd.detectChanges()}getFilter(t){return this.fs.getFilter(this.model.filters?.[t].idx)}copyMDX(){if(!this.component)return;let t=this.component.getMDX(),e={title:"",component:import("./chunk-7D6L56HF.js"),inputs:{title:"Copy MDX",shareUrl:t,btnTitle:"Copy",hideOptions:!0},closeByEsc:!0,buttons:[],class:"modal-no-border",componentStyles:{padding:"0"},onComponentInit:n=>{n.onCopy=()=>{this.ms.close(e)}}};this.ms.show(e)}appendShareState(t,e){let n=this.widget[e];return n&&(t+="&"+e+"="+n),t}share(){let t=this.component?.chart,e=this.fs.getFiltersShareUrl(),n=e.split("#")[1],r=(this.widget.name||this.widget.idx).toString();if(n&&n.indexOf("?")===-1?e+="?widget="+r:e+="&widget="+r,e=this.appendShareState(e,"isLegend"),e=this.appendShareState(e,"isTop"),e=this.appendShareState(e,"showZero"),e=this.appendShareState(e,"showValues"),t&&t.series){let w=t.series.map((C,$)=>({v:C.visible,i:$})).filter(C=>!C.v);w.length&&(e+="&hiddenSeries="+w.map(C=>C.i).join(","))}let l=this.component?.getDrillsAsParameter();l&&(e+="&drilldown="+l);let h='<iframe style="border: none" src="'+e+'" ';h+="></iframe>";let u={title:"",component:import("./chunk-7D6L56HF.js"),inputs:{title:"Share widget",shareUrl:h,btnTitle:"Copy",hideOptions:!0},closeByEsc:!0,buttons:[],class:"modal-no-border",componentStyles:{padding:"0"},onComponentInit:w=>{w.onCopy=()=>{this.ms.close(u)}}};this.ms.show(u)}requestData(){this.component?.requestData()}applyFilter(t){this.updateFiltersText(),this.requestData()}changeStyle(t,e,n){}showToolbar(){this.widget.toolbar=!0}hideToolbar(){this.widget.toolbar=!1}onHeaderButtonBack(){this.component?.doDrillUp()}onResetClickFilter(){this.component?.resetClickFilter()}onFilterVariable(t){this.component?.onVariableChange(t)}onFilterDatasource(t){this.component?.onDataSourceChange(t)}onFilterAction(t){this.component?.performAction(t)}onFilter(t){}updateComponent(){this.widgetType=this.wts.getDesc(this.widget.type),this.widgetType?.class?(this.widget.isSupported=!0,this.cd.detectChanges()):(this.widget.isSupported=!1,this.showError(this.i18n.get("errWidgetNotSupported")+": "+this.widget.type),this.cd.detectChanges())}initDrillsForSharedWidget(){let t=this.route.snapshot.queryParamMap.get("drilldown")||"";t&&this.component&&this.widget&&(this.component.drills=decodeURIComponent(t).split("~").map(e=>({path:e,name:e})),this.widget.backButton=!!this.component?.drills.length,this.widget.title=this.component.getDrillTitle(this.component.drills[this.component.drills.length-1]),this.header?.cd.detectChanges())}initDataSourceFromParams(){if(!this.widget.shared)return;let t=this.route.snapshot.queryParamMap.get("datasource");t&&this.component&&(this.component.customDataSource=t)}updateFilterText(t){this.updateFiltersText()}initFilters(){this.model.filters=this.fs.getWidgetModelFilters(this.widget.name),this.updateFiltersText()}checkToolbarVisibility(){this.model.filters.length===0&&!this.hasDatasourceChooser&&!this.hasActions&&!this.widget.pvItems.length&&this.hideToolbar()}subscribeFilters(){this.subFilter=this.bs.subscribe("filter"+this.widget.name,t=>this.applyFilter(t)),this.subUpdateFilterText=this.bs.subscribe("updateFilterText"+this.widget.name,t=>this.updateFilterText(t)),this.subFilterAll=this.bs.subscribe("filterAll",t=>this.applyFilter(t))}subscribeActions(){this.subRefresh=this.bs.subscribe("refresh:"+this.widget.name,()=>this.requestData()),this.subCopyMdx=this.bs.subscribe(`copyMDX:${this.widget.name}`,()=>this.copyMDX()),this.subShare=this.bs.subscribe(`share:${this.widget.name}`,()=>this.share())}};i.\u0275fac=function(e){return new(e||i)(_(st),_(ct),_(Wt),_(kt),_(We),_(pt),_(Ft),_(K),_(ht))},i.\u0275cmp=A({type:i,selectors:[["dsw-widget"]],viewQuery:function(e,n){if(e&1&&(j(Yt,5),j(ji,7),j(Ui,7)),e&2){let r;U(r=q())&&(n.ngComponentOutlet=r.first),U(r=q())&&(n.header=r.first),U(r=q())&&(n.filters=r.first)}},inputs:{widget:"widget"},standalone:!0,features:[X],decls:7,vars:9,consts:[["header",""],["filters",""],[3,"onButtonClick","onBack","onResetClickFilter","typeDesc","widget","hidden"],[3,"onVariable","onDataSource","onAction","hidden","widget","filters"],[1,"error"],[1,"spinner"],[4,"ngComponentOutlet","ngComponentOutletInputs"],["ngSrc","assets/img/spinner.svg","height","100","width","100","priority",""]],template:function(e,n){if(e&1){let r=y();d(0,"dsw-widget-header",2,0),f("onButtonClick",function(h){return p(r),m(n.onHeaderButton(h))})("onBack",function(){return p(r),m(n.onHeaderButtonBack())})("onResetClickFilter",function(){return p(r),m(n.onResetClickFilter())}),g(),d(2,"dsw-widget-filter",3,1),f("onVariable",function(h){return p(r),m(n.onFilterVariable(h))})("onDataSource",function(h){return p(r),m(n.onFilterDatasource(h))})("onAction",function(h){return p(r),m(n.onFilterAction(h))}),g(),F(4,Qi,1,2,"ng-container")(5,Ki,2,1,"div",4)(6,Zi,2,1,"div",5)}e&2&&(k("typeDesc",n.widgetType)("widget",n.widget)("hidden",n.widget.tile||!n.isHeader),a(2),k("hidden",n.widget.tile||!n.isHeader)("widget",n.widget)("filters",n.model.filters),a(2),x(n.widgetType&&n.widgetType.class?4:-1),a(),x(n.model.error?5:-1),a(),x(n.component!=null&&n.component.isSpinner&&!n.model.error?6:-1))},dependencies:[Ke,Ze,Yt,Ce],styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;min-height:0;overflow:hidden;background-color:var(--cl-widget-bg);padding:20px}.error[_ngcontent-%COMP%]{font-family:Oxygen;position:absolute;inset:0;color:#d7070294;background-color:transparent;text-align:center;background:var(--cl-widget-bg);display:flex;align-items:center;justify-content:center;padding:20px;z-index:10}.spinner[_ngcontent-%COMP%]{position:absolute;inset:44px 0 0;z-index:3;display:flex;justify-content:center;align-items:center;background-color:#ffffffe6;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);height:auto}dsw-widget-filter[_ngcontent-%COMP%]{z-index:4}"],data:{animation:[De("fade-in-out",[jt(":enter",[wt({opacity:0}),Gt("100ms",wt({opacity:1}))]),jt(":leave",[wt({opacity:1}),Gt("100ms",wt({opacity:0}))])])]},changeDetection:0});let o=i;return o})();var Ji=["ctxMenu"];function ts(o,i){if(o&1){let s=y();d(0,"gridster-item",18,3),f("transitionend",function(e){let n=p(s).$implicit,r=c(2);return m(r.onWidgetSizeChanged(n,e))})("contextmenu",function(e){let n=p(s).$implicit,r=c(2);return m(r.showContextMenu(n,e))}),I(2,"dsw-widget",19,4),g()}if(o&2){let s=i.$implicit,t=c(2);E("editing",s===t.editedWidget)("no-anim",t.isLoading||t.editedWidget)("expanded",s.isExpanded),k("id",s===t.editedWidget?"edited-widget":void 0)("item",s),a(2),k("widget",s)}}function es(o,i){if(o&1&&(d(0,"gridster",6,2),B(2,ts,4,9,"gridster-item",17,ue().trackByName,!0),g()),o&2){let s=c();k("options",s.tilesOptions),a(2),H(s.list)}}function is(o,i){if(o&1&&(d(0,"div",21),I(1,"dsw-widget",19,4),g()),o&2){let s=i.$implicit;a(),k("widget",s)}}function ss(o,i){if(o&1&&(d(0,"div",23),I(1,"dsw-widget",19),g()),o&2){let s=c(2);ut("transform","translateX(calc(-100vw * "+-s.page+"))"),a(),k("widget",s.mobileFilter)}}function ns(o,i){if(o&1&&(d(0,"div",20),B(1,is,3,1,"div",21,G),F(3,ss,2,3,"div",22),g()),o&2){let s=c();ut("transform","translateX(calc(100vw * "+-s.page+"))"),a(),H(s.list),a(2),x(s.isMobileFilterVisible?3:-1)}}function rs(o,i){if(o&1&&I(0,"span"),o&2){let s=i.$index,t=c();E("active",s===t.page)}}function os(o,i){o&1&&(d(0,"div",10),I(1,"img",24),g())}function ls(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.ctxDrill())}),b(1,"Drilldown"),g()}}function as(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.ctxDrillthrough())}),b(1,"Drillthrough"),g()}}function hs(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.printItem())}),b(1),S(2,"i18n"),g()}o&2&&(a(),M(T(2,1,"print")))}function ds(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.gotoKPIPage(e.ctxItem))}),b(1),S(2,"i18n"),g()}o&2&&(a(),M(T(2,1,"showKPI")))}function cs(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.gotoAnalyzer(e.ctxItem))}),b(1),S(2,"i18n"),g()}o&2&&(a(),M(T(2,1,"openAnalyzer")))}function ps(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.exportWidget("svg"))}),b(1),S(2,"i18n"),g()}o&2&&(a(),M(T(2,1,"svgImage")))}function ms(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.exportWidget("png"))}),b(1),S(2,"i18n"),g()}o&2&&(a(),M(T(2,1,"pngImage")))}function gs(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.exportWidget("jpg"))}),b(1),S(2,"i18n"),g()}o&2&&(a(),M(T(2,1,"jpgImage")))}function us(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.exportWidget("pdf"))}),b(1),S(2,"i18n"),g()}o&2&&(a(),M(T(2,1,"pdfDoc")))}function fs(o,i){if(o&1){let s=y();d(0,"div",14),f("mouseover",function(e){p(s);let n=at(4),r=c();return m(r.showSubmenu(n,e))}),b(1),S(2,"i18n"),d(3,"div",15,5)(5,"div",12),f("click",function(){p(s);let e=c();return m(e.setType("areaChart"))}),b(6,"Area chart"),g(),d(7,"div",12),f("click",function(){p(s);let e=c();return m(e.setType("barChart"))}),b(8,"Bar chart"),g(),d(9,"div",12),f("click",function(){p(s);let e=c();return m(e.setType("barChartStacked"))}),b(10,"Stacked bar chart"),g(),d(11,"div",12),f("click",function(){p(s);let e=c();return m(e.setType("columnChart"))}),b(12,"Column chart"),g(),d(13,"div",12),f("click",function(){p(s);let e=c();return m(e.setType("columnChartStacked"))}),b(14,"Stacked column chart"),g(),d(15,"div",12),f("click",function(){p(s);let e=c();return m(e.setType("lineChart"))}),b(16,"Line chart"),g(),d(17,"div",12),f("click",function(){p(s);let e=c();return m(e.setType("pieChart"))}),b(18,"Pie chart"),g()()()}o&2&&(a(),Tt(" ",T(2,1,"viewAs")," "))}function ws(o,i){if(o&1){let s=y();d(0,"div",12),f("click",function(){p(s);let e=c();return m(e.ctxEdit())}),b(1,"Edit widget"),g()}}var Cs=200,bs=100,xs=50,ti=12,Nn=(()=>{let i=class i extends je{constructor(){super(),this.page=0,this.model={items:[]},this.contextMenuData={canDrill:!1,canDrillthrough:!1},this.tilesOptions={disablePushOnResize:!1,displayGrid:zt.None,disableScrollHorizontal:!0,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushItems:!0,useTransformPositioning:!0,margin:20,gridType:v.VerticalFixed,draggable:{ignoreContent:!0,dragHandleClass:"drag-handle",enabled:!0},resizable:{enabled:!0}},this.isMobile=!1,this.isLoading=!0,this.itemsInitialized=0,this.isMobileFilterVisible=!1,this.sharedWidget="",this.path="",this.sidebarAnimEnd$=this.sbs.onAnimEnd.pipe(nt()),this.trackByName=(t,e)=>{let n=this.path+"-"+e.name.toString();return e===this.editedWidget&&this.editedWidget.edKey||n},this.subscribeForSidebarAnim(),this.checkRestrictions(),this.hs.resetSearch(),this.hs.hideMobileFilterButton(),this.sharedWidget=this.route.snapshot.queryParamMap.get("widget")??"",this.subscribeForGridsterEvents(),this.loadSettings(),this.subscribeForSettingsChanged(),this.subscribeForEditing(),this.setupSharedWidget(),this.isMobile=this.us.isMobile(),this.subReset=this.bs.subscribe("refresh-dashboard",()=>{this.requestData()}),this.subMobileFilterDialog=this.hs.mobileFilterDialogToggle.subscribe(()=>{this.isMobileFilterVisible=!this.isMobileFilterVisible,this.cd.detectChanges()}),this.subContextMenu=this.bs.subscribe("contextmenu",t=>{this.showContextMenu(t.widget,t.event,t.ctxData),this.cd.detectChanges()})}get canEdit(){return location.port==="4007"}ngOnInit(){this.subscribeForParamsChange()}ngAfterViewInit(){}ngOnDestroy(){super.ngOnDestroy(),clearTimeout(this.onLoadingTimeout),window.onafterprint=null,this.subParamsChange?.unsubscribe(),this.subContextMenu.unsubscribe(),this.subMobileFilterDialog.unsubscribe(),this.subCtxClose&&this.subCtxClose.unsubscribe(),this.subReset&&this.subReset.unsubscribe()}setType(t){this.ctxItem&&(this.bs.broadcast("setWidgetType:"+this.ctxItem.name,t),this.hideContextMenu())}hideContextMenu(){this.ctxItem=void 0,this.r2.setStyle(this.ctxMenu.nativeElement,"visibility","hidden")}shareItem(){this.ctxItem&&(this.bs.broadcast("share:"+this.ctxItem.name),this.hideContextMenu())}copyMDX(){this.ctxItem&&(this.bs.broadcast("copyMDX:"+this.ctxItem.name),this.hideContextMenu())}printItem(){this.ctxItem&&(this.bs.broadcast("print:"+this.ctxItem.name),this.hideContextMenu())}refreshItem(){this.ctxItem&&(this.bs.broadcast("refresh:"+this.ctxItem.name),this.hideContextMenu())}prepareData(t){let e;if(this.itemsInitialized=0,!t)return;if(t.Error){this.es.show(t.Error);return}if(!t.widgets){this.es.show(this.i18n.get("errNoWidgets"));return}if(t.displayInfo&&t.displayInfo.gridRows&&!this.settings.widgetHeight&&!this.sharedWidget){let l=t.displayInfo.gridRows,h=20,u=window.innerHeight;u<800&&(u=800),this.tilesOptions.fixedRowHeight=Math.floor((u-(63+h*(l+1)))/l)-1,this.gridster&&this.gridster.optionsChanged()}this.vs.init(t),t.filters&&this.fs.init(t.filters,this.path);let n=!1;if((this.fs.isFiltersOnToolbarExists||this.vs.isExists())&&!this.sharedWidget){for(e=0;e<t.widgets.length;e++)t.widgets[e].type.toLowerCase()===tt.const.emptyWidgetClass&&(n=!0);n||(t.widgets.push({dashboard:this.path,autocreated:!0,name:"emptyWidget",type:tt.const.emptyWidgetClass,key:"emptyWidgetFor"+this.path}),n=!0)}for(tt.mobile,t.info,this.list=[],this.dbs.setWidgets(this.list),this.dbs.setAllWidgets(t.widgets),e=0;e<t.widgets.length;e++){if(t.widgets[e].dashboard=this.path,this.sharedWidget){let l=parseInt(this.sharedWidget,10);if(!isNaN(l)&&l!==e||t.widgets[e].name!==this.sharedWidget)continue}let r={idx:e,cols:2,rows:t.widgets[e].type?.toLowerCase()===tt.const.emptyWidgetClass?void 0:2,x:e*2%(this.tilesOptions.maxCols||1),y:Math.floor(e/6)*2,title:t.widgets[e].title,toolbar:!0,backButton:!1,menuDisabled:!1};if(t.widgets[e].displayInfo){let l=1,h=1;t.displayInfo&&(l=Math.floor(12/t.displayInfo.gridCols),l<1&&(l=1),h<1&&(h=1)),r.x=t.widgets[e].displayInfo.topCol*l,r.y=t.widgets[e].displayInfo.leftRow*h,r.cols=(t.widgets[e].displayInfo.colWidth||1)*l,r.rows=t.widgets[e].displayInfo.rowHeight||2,this.tilesOptions.maxCols!==void 0&&r.cols>this.tilesOptions.maxCols&&(r.cols=this.tilesOptions.maxCols)}if(t.widgets[e].autocreated&&(delete r.x,delete r.y),t.widgets[e].name&&this.setWidgetSizeAndPos(r,t.widgets[e].name.toString()),this.sharedWidget&&(r.x=0,r.y=0,r.idx=0,r.cols=1,r.rows=1,r.menuDisabled=!0,r.shared=!0),r=it(it({},JSON.parse(JSON.stringify(t.widgets[e]))),JSON.parse(JSON.stringify(r))),this.sharedWidget||this.fillDependentWidgets(r,t.widgets),this.isMobile&&r.type===tt.const.emptyWidgetClass){this.mobileFilter=r,this.hs.showMobileFilterButton();continue}this.list.push(r)}this.sharedWidget||setTimeout(()=>this.broadcastDependents(),0),this.fitEmptyWidget(),this.dbs.setWidgets(this.list),this.ms.onSetTitle.emit(this.dbs.getWidgets()[this.page]?.title),setTimeout(()=>{})}broadcastDependents(){let t=[];for(let e=0;e<this.list.length;e++)if(this.list[e].dependents.length!==0){let n=this.list[e];if(t.indexOf(n.name)!==-1)continue;t.push(n.name),this.bs.broadcast("widget:"+n.name+":refreshDependents")}}fillDependentWidgets(t,e){t.dependents=[];for(let n=0;n<e.length;n++)if(e[n]!==t){if(!e[n].dataLink)continue;e[n].dataLink===t.name&&t.dependents.push(e[n].name)}}setWidgetSizeAndPos(t,e){let r=this.ss.getWidgetsSettings(this.path)[e];r&&(r.sizeX!==void 0&&(t.cols=r.sizeX),r.sizeY!==void 0&&(t.rows=r.sizeY),r.col!==void 0&&(t.x=r.col),r.row!==void 0&&(t.y=r.row))}getDesc(t){if(this.list[t])return this.list[t]}onWidgetSizeChanged(t,e){if(e&&e.propertyName!=="width"&&e.propertyName!=="height")return;let n=this.getWidgetByInfo(t);n&&n.component&&n.component.onResize()}showContextMenu(t,e,n){if(t===this.editedWidget)return;this.contextMenuData=n;let r=this.ctxMenu.nativeElement;this.r2.setStyle(r,"visibility","hidden");let l=!1,h=t.dataProperties?.find(C=>C.name==="disableContextMenu");if(h&&(l=h.dataValue===1),t.type===tt.const.emptyWidgetClass||l||this.us.isPreventContextMenu())return;e.preventDefault(),this.ctxItem=t;let u=e.clientY,w=e.clientX;setTimeout(()=>{u+r.offsetHeight>window.innerHeight&&(u-=r.offsetHeight),w+r.offsetWidth>window.innerWidth&&(w-=r.offsetWidth),this.r2.setStyle(r,"left",w+"px"),this.r2.setStyle(r,"top",u+"px"),this.subCtxClose&&this.subCtxClose.unsubscribe(),this.subCtxClose=re(document,"mousedown").subscribe(C=>{this.subCtxClose?.unsubscribe(),!C.target.parentElement?.classList.contains("ctx-menu")&&(this.hideContextMenu(),this.cd.detectChanges())}),this.r2.setStyle(r,"visibility","visible")})}exportWidget(t){let e=this.getWidgetByInfo(this.ctxItem)?.component,n={sourceWidth:Math.floor(window.screen.width/2),sourceHeight:Math.floor(window.screen.height/2),filename:this.ctxItem?.tile||"chart",type:"image/svg+xml"};switch(t){case"png":n.type="image/png";break;case"svg":n.type="image/svg+xml";break;case"jpg":n.type="image/jpeg";break;case"pdf":n.type="application/pdf";break;case"xls":{let r=e?.getMDX();if(!r){console.warn(`Can't get MDX for widget: ${this.ctxItem}`);return}if(e?.lpt){let u=e.lpt;r=u._dataSourcesStack[u._dataSourcesStack.length-1].BASIC_MDX+u.dataSource.FILTERS}let h=(this.ss.serverSettings.DefaultApp||"/csp/"+ft)+"/_DeepSee.UI.MDXExcel.zen?MDX="+encodeURIComponent(r||"");window.open(h,"_blank"),this.hideContextMenu();return}case"csv":{this.exportToCsv(),this.hideContextMenu();return}}this.ctxItem?.isChart&&e?.chart?.exportChart(n,{}),this.hideContextMenu()}showSubmenu(t,e){e.target.classList.contains("ctx-sub")&&(this.r2.removeStyle(t,"transform"),this.r2.setStyle(t,"visibility","hidden"),setTimeout(()=>{let n=t.getBoundingClientRect(),r=0,l=0;n.top+n.height>window.innerHeight&&(l=n.top+n.height-window.innerHeight+10),n.left+n.width>window.innerWidth&&(r=n.width+(t.parentElement?.getBoundingClientRect()?.width||0)+2),this.r2.setStyle(t,"transform",`translateX(${-r}px) translateY(${-l}px)`),this.r2.setStyle(t,"visibility","visible")}))}onTouchStart(t){this.touchInfo={startTime:performance.now(),endTime:0,sx:t.changedTouches[0].screenX,sy:t.changedTouches[0].screenY,ex:0,ey:0}}onTouchEnd(t){if(this.isMobileFilterVisible)return;let e=this.touchInfo;if(!e||(e.endTime=performance.now(),e.ex=t.changedTouches[0].screenX,e.ey=t.changedTouches[0].screenY,e.endTime-e.startTime>Cs)||Math.abs(e.ey-e.sy)>bs||Math.abs(e.ex-e.sx)<xs)return;let n=e.ex>e.sx?-1:1;this.page+=n;let r=this.dbs.getWidgets().length;this.page<0&&(this.page=0),this.page>r-1&&(this.page=r-1),this.ms.onSetTitle.emit(this.dbs.getWidgets()[this.page].title);let l=this.widgets.toArray()[this.page].component;if(l instanceof Fe){l.adjustSize();return}if(l instanceof ze&&l.chartConfig.chart?.type!=="treemap"){l.updateChart(!0,!1);return}}ctxDrill(){this.contextMenuData&&(this.bs.broadcast("drilldown:"+(this.ctxItem?.name||""),{path:this.contextMenuData.drillPath,title:this.contextMenuData.drillTitle}),this.hideContextMenu())}ctxDrillthrough(){this.contextMenuData&&(this.bs.broadcast("drillthrough:"+(this.ctxItem?.name||""),{path:this.contextMenuData.drillPath,title:this.contextMenuData.drillTitle}),this.hideContextMenu())}gotoKPIPage(t){if(!t?.kpiclass)return;let n=(this.ss.serverSettings.DefaultApp||"/csp/"+ft)+"/"+t.kpiclass+".cls";window.open(n,"_blank")}gotoAnalyzer(t){if(!t?.dataSource)return;let e=this.ss.serverSettings.DefaultApp||"/csp/"+ft,n=this.fs.getFiltersUrlString(t.name,!1,"	",`
`),r=e+"/_DeepSee.UI.Dialog.Analyzer.zen?&PIVOT="+encodeURIComponent(t.dataSource);n&&(r+="&FILTERSTATE="+n),window.open(r,"_blank")}ctxEdit(){this.ctxItem?.isExpanded&&this.getWidgetByInfo(this.ctxItem)?.header?.onClick("expand"),this.sbs.showComponent({component:import("./chunk-4FKYEC35.js"),single:!0,inputs:{widget:this.ctxItem}}),this.hideContextMenu()}exportToCsv(){let t=this.getWidgetByInfo(this.ctxItem)?.component,e=t?._currentData;if(!t||!t.lpt||!e)return;let n,r,l;t.lpt?(r=t.lpt.dataController.getData().dimensions[0],n=t.lpt.dataController.getData().dimensions[1],l=t.lpt.dataController.getData().dataArray):(n=e.Cols[1].tuples,r=e.Cols[0].tuples,l=e.Data);let h=`\r
`,u="|",w='"sep='+u+'"'+h,C,$;for(n[0]&&n[0].dimension&&(w+=n[0].dimension+u),$=0;$<r.length;$++)w+=r[$].caption,$!==r.length-1&&(w+=u);for(w+=h,C=0;C<(n.length||l.length/r.length);C++){for(n[C]&&n[C].caption&&(w+=n[C].caption+u),$=0;$<r.length;$++)w+=l[C*r.length+$]||"0",$!==r.length-1&&(w+=u);w+=h}let W=(this.ctxItem?.title||"data")+".csv",R=new Blob([w],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(R,W);else{let D=document.createElement("a");if(D.download!==void 0){let Z=URL.createObjectURL(R);D.setAttribute("href",Z),D.setAttribute("download",W),D.style.visibility="hidden",document.body.appendChild(D),setTimeout(()=>{D.click(),document.body.removeChild(D)},10)}}}fitEmptyWidget(){let t,e=0,n=0;this.list.forEach(r=>{if(r.name==="emptyWidget"){t=r;return}let l=(r.x||0)+(r.cols||0),h=(r.y||0)+(r.rows||0);l>e&&(e=l),h>n&&(n=h)}),!(!t||t.rows)&&(t.rows=n||2)}requestData(){this.list=[],this.path.indexOf(".dashboard")!==-1&&(this.isLoading=!0,this.cd.detectChanges(),this.ds.getWidgets(this.path||"").then(t=>{this.dbs.dashboard.next(t),this.prepareData(t)}).finally(()=>{this.onDataLoaded()}))}subscribeForParamsChange(){this.subParamsChange=ne([this.route.url,this.route.params]).subscribe(([t,e])=>{this.switchNamespaceAndPath(t,e),this.requestData()})}switchNamespaceAndPath(t,e){e.ns&&e.ns.toLowerCase()!==ft.toLowerCase()&&this.ns.setCurrent(e.ns),this.path=[e.name,...t.map(n=>n.path)].join("/").slice(1),this.dbs.current.next(this.path)}onDataLoaded(){this.cd.detectChanges(),this.gridster.onResize(),clearTimeout(this.onLoadingTimeout),this.onLoadingTimeout=setTimeout(()=>{this.isLoading=!1,this.cd.detectChanges()},1)}subscribeForSettingsChanged(){this.subSettingsChanged=this.ss.onSettingsChanged.subscribe(t=>{this.tilesOptions.maxCols=t.colCount||ti,this.tilesOptions.minCols=this.tilesOptions.maxCols,this.tilesOptions.pushItems=!t.isTilePushDisabled,this.tilesOptions.disablePushOnResize=!!t.isTilePushDisabled,this.gridster&&(this.gridster.optionsChanged(),setTimeout(()=>{this.gridster.onResize()},1e3))})}subscribeForGridsterEvents(){this.tilesOptions.itemResizeCallback=t=>{this.onWidgetSizeChanged(t)},this.tilesOptions.draggable&&(this.tilesOptions.draggable.start=()=>{this.cd.detach()},this.tilesOptions.draggable.stop=()=>{this.cd.reattach()}),this.tilesOptions.itemChangeCallback=(t,e)=>{this.isLoading||this.dbs.saveWidgetPositionAndSize(t)}}loadSettings(){this.settings=this.ss.getAppSettings(),this.tilesOptions.pushItems=!this.settings.isTilePushDisabled,this.tilesOptions.disablePushOnResize=!!this.settings.isTilePushDisabled,this.tilesOptions.maxCols=parseInt(this.settings.colCount,10)||ti,this.tilesOptions.minCols=this.tilesOptions.maxCols,this.tilesOptions.fixedRowHeight=parseInt(this.settings.widgetHeight,10)||Math.floor((window.innerHeight-158)/10)-1}setupSharedWidget(){if(!this.sharedWidget)return;this.tilesOptions.maxCols=1,this.tilesOptions.minCols=1,this.tilesOptions.maxRows=1,this.tilesOptions.minRows=1,this.tilesOptions.gridType="fit";let e=this.route.snapshot.queryParamMap.get("height");e&&(this.tilesOptions.rowHeight=parseInt(e,10)),this.tilesOptions.draggable={enabled:!1,dragHandleClass:""},this.tilesOptions.resizable={enabled:!1}}checkRestrictions(){this.route.snapshot.queryParamMap.get("nodrag")==="1"&&this.tilesOptions?.draggable&&(this.tilesOptions.draggable.enabled=!1),this.route.snapshot.queryParamMap.get("noresize")==="1"&&this.tilesOptions?.resizable&&(this.tilesOptions.resizable.enabled=!1)}subscribeForSidebarAnim(){this.sidebarAnimEnd$.subscribe(()=>{this.gridster.onResize()})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=A({type:i,selectors:[["dsw-dashboard-screen"]],viewQuery:function(e,n){if(e&1&&j(Ji,5),e&2){let r;U(r=q())&&(n.ctxMenu=r.first)}},hostBindings:function(e,n){e&1&&f("touchstart",function(l){return n.onTouchStart(l)})("touchend",function(l){return n.onTouchEnd(l)})},standalone:!0,features:[ge,X],decls:40,vars:30,consts:[["ctxMenu",""],["sub1",""],["gridster",""],["list",""],["widgets",""],["sub2",""],[3,"options"],[1,"mobile-widgets",3,"transform"],[1,"pager",3,"hidden"],[3,"active"],[1,"dsw-spinner"],[1,"ctx-menu",2,"visibility","hidden"],[3,"click"],[1,"divider"],[1,"ctx-sub",3,"mouseover"],[1,"ctx-menu"],[1,"ctx-sub"],[1,"tile",3,"id","editing","no-anim","expanded","item"],[1,"tile",3,"transitionend","contextmenu","id","item"],[3,"widget"],[1,"mobile-widgets"],[1,"tile"],[1,"tile","mobile-filter",3,"transform"],[1,"tile","mobile-filter"],["src","assets/img/spinner.svg"]],template:function(e,n){if(e&1){let r=y();F(0,es,4,1,"gridster",6)(1,ns,4,3,"div",7),d(2,"div",8)(3,"div"),B(4,rs,1,2,"span",9,G),g()(),F(6,os,2,0,"div",10),d(7,"div",11,0),F(9,ls,2,0,"div")(10,as,2,0,"div"),d(11,"div",12),f("click",function(){return p(r),m(n.refreshItem())}),b(12),S(13,"i18n"),g(),F(14,hs,3,3,"div"),d(15,"div",12),f("click",function(){return p(r),m(n.shareItem())}),b(16),S(17,"i18n"),g(),d(18,"div",12),f("click",function(){return p(r),m(n.copyMDX())}),b(19),S(20,"i18n"),g(),F(21,ds,3,3,"div")(22,cs,3,3,"div"),I(23,"div",13),d(24,"div",14),f("mouseover",function(h){p(r);let u=at(27);return m(n.showSubmenu(u,h))}),b(25," Export "),d(26,"div",15,1),F(28,ps,3,3,"div")(29,ms,3,3,"div")(30,gs,3,3,"div")(31,us,3,3,"div"),d(32,"div",12),f("click",function(){return p(r),m(n.exportWidget("xls"))}),b(33),S(34,"i18n"),g(),d(35,"div",12),f("click",function(){return p(r),m(n.exportWidget("csv"))}),b(36),S(37,"i18n"),g()()(),F(38,fs,19,3,"div",16)(39,ws,2,0,"div"),g()}e&2&&(x(n.isMobile?-1:0),a(),x(n.isMobile?1:-1),a(),k("hidden",n.isMobileFilterVisible||n.us.isEmbedded()),a(2),H(n.dbs.getWidgets()),a(2),x(n.isLoading?6:-1),a(3),x(n.contextMenuData!=null&&n.contextMenuData.canDrill?9:-1),a(),x(n.contextMenuData!=null&&n.contextMenuData.canDrillthrough?10:-1),a(2),M(T(13,20,"refresh")),a(2),x(n.ctxItem!=null&&n.ctxItem.isChart?14:-1),a(2),M(T(17,22,"share")),a(3),M(T(20,24,"copyMDX")),a(2),x(n.ctxItem!=null&&n.ctxItem.kpitype?21:-1),a(),x(n.ctxItem!=null&&n.ctxItem.dataSource?22:-1),a(6),x(n.ctxItem!=null&&n.ctxItem.isChart?28:-1),a(),x(n.ctxItem!=null&&n.ctxItem.isChart?29:-1),a(),x(n.ctxItem!=null&&n.ctxItem.isChart?30:-1),a(),x(n.ctxItem!=null&&n.ctxItem.isChart?31:-1),a(2),M(T(34,26,"xlsDoc")),a(3),M(T(37,28,"csvDoc")),a(2),x(n.ctxItem!=null&&n.ctxItem.isChart?38:-1),a(),x(n.ctxItem&&n.canEdit?39:-1))},dependencies:[ee,Ge,Je,$t],styles:['[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:block;width:100%;height:100%;padding-bottom:20px}gridster[_ngcontent-%COMP%]{background:var(--cl-bg)}.mobile-widgets[_ngcontent-%COMP%]{display:flex;width:fit-content;transition:transform .2s linear;white-space:nowrap;height:100%}.tile[_ngcontent-%COMP%]{content-visibility:auto;overflow:visible;display:flex!important;flex-direction:column;position:absolute;border-radius:var(--tile-border-radius);border:1px solid var(--cl-header-border);user-select:none;-webkit-user-select:none}.tile.expanded[_ngcontent-%COMP%]{position:fixed;z-index:3!important;left:15px!important;top:calc(var(--header-height) + 15px)!important;right:15px!important;bottom:15px!important;width:auto!important;height:auto!important;transform:none!important;transition:none!important;margin:0!important;box-shadow:0 0 10px #0000001a;border:1px solid darkgray}.tile.expanded[_ngcontent-%COMP%]  .gridster-item-resizable-handler.handle-se{display:none!important;pointer-events:none!important}@media (max-width: 576px){.tile[_ngcontent-%COMP%]{position:static;margin-bottom:0!important;width:100vw;display:inline-flex!important;border:none}}.ctx-menu[_ngcontent-%COMP%]{font-family:Oxygen;position:absolute;top:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;border:1px solid var(--cl-header-border);border-radius:4px;z-index:4;background-color:#fff;white-space:nowrap;box-shadow:0 0 5px #0000001f;min-width:140px}.ctx-menu[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;padding:10px 20px;cursor:pointer;-webkit-user-select:none;user-select:none}.ctx-menu[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background-color:#0000000d}.ctx-menu[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:0;margin:0;padding:0;border-bottom:1px solid var(--cl-header-border)}.ctx-sub[_ngcontent-%COMP%]{position:relative}.ctx-sub[_ngcontent-%COMP%]:after{content:"";background-image:url(./assets/img/icons/next.svg);position:absolute;right:6px;display:block;z-index:1;top:14px;width:12px;height:12px;opacity:.4;transform:scaleX(.6)}.ctx-sub[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:none;position:absolute;left:calc(100% + 1px);top:0}.ctx-sub[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{display:block}.pager[_ngcontent-%COMP%]{display:none;position:absolute;left:0;width:100vw;bottom:calc(var(--header-height) - 10px);z-index:1;align-items:center;justify-content:center}.pager[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:2px;background-color:var(--cl-widget-bg);border-radius:20px;border:1px solid var(--cl-header-border);height:20px}.pager[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:9px;height:9px;border-radius:20px;background-color:var(--cl-header-bg);border:1px solid var(--cl-header-border);margin-left:4px;margin-right:4px}.pager[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span.active[_ngcontent-%COMP%]{width:14px;height:14px;position:relative}@media (max-width: 576px){.pager[_ngcontent-%COMP%]{display:flex}}.mobile-filter[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;z-index:10}.editing[_ngcontent-%COMP%]{border:2px solid var(--cl-accent)}gridster-item[_ngcontent-%COMP%]:not([style]){display:none}.dsw-spinner[_ngcontent-%COMP%]{top:var(--header-height)}'],changeDetection:0});let o=i;return o})();export{zt as a,mi as b,ee as c,Ge as d,Fs as e,Wt as f,Je as g,ti as h,Nn as i};
