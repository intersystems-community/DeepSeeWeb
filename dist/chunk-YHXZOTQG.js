import{F as f,K as h}from"./chunk-4SYSDVZ7.js";import{Da as c,X as r,aa as l,g as a}from"./chunk-ZKAUCJHV.js";var y=(()=>{let i=class i{constructor(){this.emitter=new c}broadcast(t,s){this.emitter.emit({message:t,value:s})}subscribe(t,s){return this.emitter.subscribe(e=>{e.message===t&&s(e.value)})}};i.\u0275fac=function(s){return new(s||i)},i.\u0275prov=r({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var v=(()=>{let i=class i{constructor(t){this.ss=t,this.current=new a(""),this.dashboard=new a(null),this.widgets=[],this.allWidgets=[]}setWidgets(t){this.widgets=t}getWidgets(){return this.widgets}getWidgetsWithoutEmpty(t=[]){return this.widgets.filter(s=>s.type!==f.const.emptyWidgetClass&&!t.includes(s.name))}setAllWidgets(t){this.allWidgets=t}getAllWidgets(){return this.allWidgets}saveWidgetPositionAndSize(t){let s=this.ss.getWidgetsSettings(t.dashboard),e=t.name;s[e]||(s[e]={}),isNaN(t.x)||(s[e].col=t.x),isNaN(t.y)||(s[e].row=t.y),isNaN(t.cols)||(s[e].sizeX=t.cols),isNaN(t.rows)||(s[e].sizeY=t.rows),this.ss.setWidgetsSettings(s,t.dashboard)}generateDisplayInfo(t){if(t.displayInfo)return;let s=1,e=1,n=this.dashboard.value;n&&(s=Math.floor(12/n.displayInfo.gridCols),s<1&&(s=1),e<1&&(e=1));let d={topCol:Math.floor((t.x||0)/s),leftRow:Math.floor((t.y||0)/e),colWidth:Math.floor((t.cols||1)/s),rowHeight:Math.floor(t.rows||1)};t.displayInfo=d}};i.\u0275fac=function(s){return new(s||i)(l(h))},i.\u0275prov=r({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();export{y as a,v as b};
