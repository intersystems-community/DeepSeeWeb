import{a as Co}from"./chunk-54YLOEMX.js";import{a as Wh}from"./chunk-KPBGF7I6.js";import{a as qr}from"./chunk-SUAWKU6Z.js";import{a as Gh,b as Xh}from"./chunk-6BTXKMB7.js";import{E as zh,F as de,H as Nh,I as jh,J as Bh,K as Ss,r as Oh,u as Fh}from"./chunk-CKPIETEW.js";import{$a as Lt,Ab as le,Ba as Dh,Bb as he,Bc as Rh,Cb as ce,Db as Dt,Eb as It,Fb as Ht,Jb as Ih,Nb as kh,Ob as Bt,Tb as wi,Ub as Si,Vb as Mi,X as Mh,Xa as Cs,Xb as re,Yb as Fe,Zb as ws,ba as Qt,cc as vt,fa as bt,gb as Lh,lb as Ct,qa as Eh,ra as Ph,rb as sr,sa as Th,ta as Ah,tb as _s,ua as _t,ub as Oe,vb as Ze,yb as rr}from"./chunk-ZKAUCJHV.js";import{a as Se,b as ns,d as oi,f as Jt,g as Sh,h as Ft}from"./chunk-DEPBX7UX.js";var Ms=oi((Vh,$r)=>{"use strict";(function(o,t){typeof define=="function"&&define.amd?define(t):typeof $r=="object"&&$r.exports?$r.exports=t():o.numeral=t()})(Vh,function(){var o,t,i="2.0.6",e={},s={},r={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},n={currentLocale:r.currentLocale,zeroFormat:r.zeroFormat,nullFormat:r.nullFormat,defaultFormat:r.defaultFormat,scalePercentBy100:r.scalePercentBy100};function l(a,h){this._input=a,this._value=h}return o=function(a){var h,c,f,u;if(o.isNumeral(a))h=a.value();else if(a===0||typeof a>"u")h=0;else if(a===null||t.isNaN(a))h=null;else if(typeof a=="string")if(n.zeroFormat&&a===n.zeroFormat)h=0;else if(n.nullFormat&&a===n.nullFormat||!a.replace(/[^0-9]+/g,"").length)h=null;else{for(c in e)if(u=typeof e[c].regexps.unformat=="function"?e[c].regexps.unformat():e[c].regexps.unformat,u&&a.match(u)){f=e[c].unformat;break}f=f||o._.stringToNumber,h=f(a)}else h=Number(a)||null;return new l(a,h)},o.version=i,o.isNumeral=function(a){return a instanceof l},o._=t={numberToFormat:function(a,h,c){var f=s[o.options.currentLocale],u=!1,p=!1,b=0,v="",x=1e12,m=1e9,E=1e6,L=1e3,S="",w=!1,R,O,I,_,A,F,P,D,C,d;if(a=a||0,O=Math.abs(a),o._.includes(h,"(")?(u=!0,h=h.replace(/[\(|\)]/g,"")):(o._.includes(h,"+")||o._.includes(h,"-"))&&(D=o._.includes(h,"+")?h.indexOf("+"):a<0?h.indexOf("-"):-1,h=h.replace(/[\+|\-]/g,"")),o._.includes(h,"a")&&(R=h.match(/a(k|m|b|t)?/),R=R?R[1]:!1,o._.includes(h," a")&&(v=" "),h=h.replace(new RegExp(v+"a[kmbt]?"),""),O>=x&&!R||R==="t"?(v+=f.abbreviations.trillion,a=a/x):O<x&&O>=m&&!R||R==="b"?(v+=f.abbreviations.billion,a=a/m):O<m&&O>=E&&!R||R==="m"?(v+=f.abbreviations.million,a=a/E):(O<E&&O>=L&&!R||R==="k")&&(v+=f.abbreviations.thousand,a=a/L)),o._.includes(h,"[.]")&&(p=!0,h=h.replace("[.]",".")),F=a.toString().split(".")[0],P=h.split(".")[1],C=h.indexOf(","),b=(h.split(".")[0].split(",")[0].match(/0/g)||[]).length,P?(o._.includes(P,"[")?(P=P.replace("]",""),P=P.split("["),S=o._.toFixed(a,P[0].length+P[1].length,c,P[1].length)):S=o._.toFixed(a,P.length,c),F=S.split(".")[0],o._.includes(S,".")?S=f.delimiters.decimal+S.split(".")[1]:S="",p&&Number(S.slice(1))===0&&(S="")):F=o._.toFixed(a,0,c),v&&!R&&Number(F)>=1e3&&v!==f.abbreviations.trillion)switch(F=String(Number(F)/1e3),v){case f.abbreviations.thousand:v=f.abbreviations.million;break;case f.abbreviations.million:v=f.abbreviations.billion;break;case f.abbreviations.billion:v=f.abbreviations.trillion;break}if(o._.includes(F,"-")&&(F=F.slice(1),w=!0),F.length<b)for(var g=b-F.length;g>0;g--)F="0"+F;return C>-1&&(F=F.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.delimiters.thousands)),h.indexOf(".")===0&&(F=""),d=F+S+(v||""),u?d=(u&&w?"(":"")+d+(u&&w?")":""):D>=0?d=D===0?(w?"-":"+")+d:d+(w?"-":"+"):w&&(d="-"+d),d},stringToNumber:function(a){var h=s[n.currentLocale],c=a,f={thousand:3,million:6,billion:9,trillion:12},u,p,b,v;if(n.zeroFormat&&a===n.zeroFormat)p=0;else if(n.nullFormat&&a===n.nullFormat||!a.replace(/[^0-9]+/g,"").length)p=null;else{p=1,h.delimiters.decimal!=="."&&(a=a.replace(/\./g,"").replace(h.delimiters.decimal,"."));for(u in f)if(v=new RegExp("[^a-zA-Z]"+h.abbreviations[u]+"(?:\\)|(\\"+h.currency.symbol+")?(?:\\))?)?$"),c.match(v)){p*=Math.pow(10,f[u]);break}p*=(a.split("-").length+Math.min(a.split("(").length-1,a.split(")").length-1))%2?1:-1,a=a.replace(/[^0-9\.]+/g,""),p*=Number(a)}return p},isNaN:function(a){return typeof a=="number"&&isNaN(a)},includes:function(a,h){return a.indexOf(h)!==-1},insert:function(a,h,c){return a.slice(0,c)+h+a.slice(c)},reduce:function(a,h){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof h!="function")throw new TypeError(h+" is not a function");var c=Object(a),f=c.length>>>0,u=0,p;if(arguments.length===3)p=arguments[2];else{for(;u<f&&!(u in c);)u++;if(u>=f)throw new TypeError("Reduce of empty array with no initial value");p=c[u++]}for(;u<f;u++)u in c&&(p=h(p,c[u],u,c));return p},multiplier:function(a){var h=a.toString().split(".");return h.length<2?1:Math.pow(10,h[1].length)},correctionFactor:function(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(h,c){var f=t.multiplier(c);return h>f?h:f},1)},toFixed:function(a,h,c,f){var u=a.toString().split("."),p=h-(f||0),b,v,x,m;return u.length===2?b=Math.min(Math.max(u[1].length,p),h):b=p,x=Math.pow(10,b),m=(c(a+"e+"+b)/x).toFixed(b),f>h-b&&(v=new RegExp("\\.?0{1,"+(f-(h-b))+"}$"),m=m.replace(v,"")),m}},o.options=n,o.formats=e,o.locales=s,o.locale=function(a){return a&&(n.currentLocale=a.toLowerCase()),n.currentLocale},o.localeData=function(a){if(!a)return s[n.currentLocale];if(a=a.toLowerCase(),!s[a])throw new Error("Unknown locale : "+a);return s[a]},o.reset=function(){for(var a in r)n[a]=r[a]},o.zeroFormat=function(a){n.zeroFormat=typeof a=="string"?a:null},o.nullFormat=function(a){n.nullFormat=typeof a=="string"?a:null},o.defaultFormat=function(a){n.defaultFormat=typeof a=="string"?a:"0.0"},o.register=function(a,h,c){if(h=h.toLowerCase(),this[a+"s"][h])throw new TypeError(h+" "+a+" already registered.");return this[a+"s"][h]=c,c},o.validate=function(a,h){var c,f,u,p,b,v,x,m;if(typeof a!="string"&&(a+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",a)),a=a.trim(),a.match(/^\d+$/))return!0;if(a==="")return!1;try{x=o.localeData(h)}catch{x=o.localeData(o.locale())}return u=x.currency.symbol,b=x.abbreviations,c=x.delimiters.decimal,x.delimiters.thousands==="."?f="\\.":f=x.delimiters.thousands,m=a.match(/^[^\d]+/),m!==null&&(a=a.substr(1),m[0]!==u)||(m=a.match(/[^\d]+$/),m!==null&&(a=a.slice(0,-1),m[0]!==b.thousand&&m[0]!==b.million&&m[0]!==b.billion&&m[0]!==b.trillion))?!1:(v=new RegExp(f+"{2}"),a.match(/[^\d.,]/g)?!1:(p=a.split(c),p.length>2?!1:p.length<2?!!p[0].match(/^\d+.*\d$/)&&!p[0].match(v):p[0].length===1?!!p[0].match(/^\d+$/)&&!p[0].match(v)&&!!p[1].match(/^\d+$/):!!p[0].match(/^\d+.*\d$/)&&!p[0].match(v)&&!!p[1].match(/^\d+$/)))},o.fn=l.prototype={clone:function(){return o(this)},format:function(a,h){var c=this._value,f=a||n.defaultFormat,u,p,b;if(h=h||Math.round,c===0&&n.zeroFormat!==null)p=n.zeroFormat;else if(c===null&&n.nullFormat!==null)p=n.nullFormat;else{for(u in e)if(f.match(e[u].regexps.format)){b=e[u].format;break}b=b||o._.numberToFormat,p=b(c,f,h)}return p},value:function(){return this._value},input:function(){return this._input},set:function(a){return this._value=Number(a),this},add:function(a){var h=t.correctionFactor.call(null,this._value,a);function c(f,u,p,b){return f+Math.round(h*u)}return this._value=t.reduce([this._value,a],c,0)/h,this},subtract:function(a){var h=t.correctionFactor.call(null,this._value,a);function c(f,u,p,b){return f-Math.round(h*u)}return this._value=t.reduce([a],c,Math.round(this._value*h))/h,this},multiply:function(a){function h(c,f,u,p){var b=t.correctionFactor(c,f);return Math.round(c*b)*Math.round(f*b)/Math.round(b*b)}return this._value=t.reduce([this._value,a],h,1),this},divide:function(a){function h(c,f,u,p){var b=t.correctionFactor(c,f);return Math.round(c*b)/Math.round(f*b)}return this._value=t.reduce([this._value,a],h),this},difference:function(a){return Math.abs(o(this._value).subtract(a).value())}},o.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var h=a%10;return~~(a%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th"},currency:{symbol:"$"}}),function(){o.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(a,h,c){var f=o._.includes(h," BPS")?" ":"",u;return a=a*1e4,h=h.replace(/\s?BPS/,""),u=o._.numberToFormat(a,h,c),o._.includes(u,")")?(u=u.split(""),u.splice(-1,0,f+"BPS"),u=u.join("")):u=u+f+"BPS",u},unformat:function(a){return+(o._.stringToNumber(a)*1e-4).toFixed(15)}})}(),function(){var a={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},h={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},c=a.suffixes.concat(h.suffixes.filter(function(u){return a.suffixes.indexOf(u)<0})),f=c.join("|");f="("+f.replace("B","B(?!PS)")+")",o.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(f)},format:function(u,p,b){var v,x=o._.includes(p,"ib")?h:a,m=o._.includes(p," b")||o._.includes(p," ib")?" ":"",E,L,S;for(p=p.replace(/\s?i?b/,""),E=0;E<=x.suffixes.length;E++)if(L=Math.pow(x.base,E),S=Math.pow(x.base,E+1),u===null||u===0||u>=L&&u<S){m+=x.suffixes[E],L>0&&(u=u/L);break}return v=o._.numberToFormat(u,p,b),v+m},unformat:function(u){var p=o._.stringToNumber(u),b,v;if(p){for(b=a.suffixes.length-1;b>=0;b--){if(o._.includes(u,a.suffixes[b])){v=Math.pow(a.base,b);break}if(o._.includes(u,h.suffixes[b])){v=Math.pow(h.base,b);break}}p*=v||1}return p}})}(),function(){o.register("format","currency",{regexps:{format:/(\$)/},format:function(a,h,c){var f=o.locales[o.options.currentLocale],u={before:h.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:h.match(/([\+|\-|\)|\s|\$]*)$/)[0]},p,b,v;for(h=h.replace(/\s?\$\s?/,""),p=o._.numberToFormat(a,h,c),a>=0?(u.before=u.before.replace(/[\-\(]/,""),u.after=u.after.replace(/[\-\)]/,"")):a<0&&!o._.includes(u.before,"-")&&!o._.includes(u.before,"(")&&(u.before="-"+u.before),v=0;v<u.before.length;v++)switch(b=u.before[v],b){case"$":p=o._.insert(p,f.currency.symbol,v);break;case" ":p=o._.insert(p," ",v+f.currency.symbol.length-1);break}for(v=u.after.length-1;v>=0;v--)switch(b=u.after[v],b){case"$":p=v===u.after.length-1?p+f.currency.symbol:o._.insert(p,f.currency.symbol,-(u.after.length-(1+v)));break;case" ":p=v===u.after.length-1?p+" ":o._.insert(p," ",-(u.after.length-(1+v)+f.currency.symbol.length-1));break}return p}})}(),function(){o.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(a,h,c){var f,u=typeof a=="number"&&!o._.isNaN(a)?a.toExponential():"0e+0",p=u.split("e");return h=h.replace(/e[\+|\-]{1}0/,""),f=o._.numberToFormat(Number(p[0]),h,c),f+"e"+p[1]},unformat:function(a){var h=o._.includes(a,"e+")?a.split("e+"):a.split("e-"),c=Number(h[0]),f=Number(h[1]);f=o._.includes(a,"e-")?f*=-1:f;function u(p,b,v,x){var m=o._.correctionFactor(p,b),E=p*m*(b*m)/(m*m);return E}return o._.reduce([c,Math.pow(10,f)],u,1)}})}(),function(){o.register("format","ordinal",{regexps:{format:/(o)/},format:function(a,h,c){var f=o.locales[o.options.currentLocale],u,p=o._.includes(h," o")?" ":"";return h=h.replace(/\s?o/,""),p+=f.ordinal(a),u=o._.numberToFormat(a,h,c),u+p}})}(),function(){o.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(a,h,c){var f=o._.includes(h," %")?" ":"",u;return o.options.scalePercentBy100&&(a=a*100),h=h.replace(/\s?\%/,""),u=o._.numberToFormat(a,h,c),o._.includes(u,")")?(u=u.split(""),u.splice(-1,0,f+"%"),u=u.join("")):u=u+f+"%",u},unformat:function(a){var h=o._.stringToNumber(a);return o.options.scalePercentBy100?h*.01:h}})}(),function(){o.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(a,h,c){var f=Math.floor(a/60/60),u=Math.floor((a-f*60*60)/60),p=Math.round(a-f*60*60-u*60);return f+":"+(u<10?"0"+u:u)+":"+(p<10?"0"+p:p)},unformat:function(a){var h=a.split(":"),c=0;return h.length===3?(c=c+Number(h[0])*60*60,c=c+Number(h[1])*60,c=c+Number(h[2])):h.length===2&&(c=c+Number(h[0])*60,c=c+Number(h[1])),Number(c)}})}(),o})});var yl=oi((ml,xl)=>{"use strict";(function(o,t){typeof ml=="object"&&typeof xl<"u"?xl.exports=t():typeof define=="function"&&define.amd?define(t):(o=o||self).RBush=t()})(ml,function(){"use strict";function o(x,m,E,L,S){(function w(R,O,I,_,A){for(;_>I;){if(_-I>600){var F=_-I+1,P=O-I+1,D=Math.log(F),C=.5*Math.exp(2*D/3),d=.5*Math.sqrt(D*C*(F-C)/F)*(P-F/2<0?-1:1),g=Math.max(I,Math.floor(O-P*C/F+d)),y=Math.min(_,Math.floor(O+(F-P)*C/F+d));w(R,O,g,y,A)}var M=R[O],k=I,T=_;for(t(R,I,O),A(R[_],M)>0&&t(R,I,_);k<T;){for(t(R,k,T),k++,T--;A(R[k],M)<0;)k++;for(;A(R[T],M)>0;)T--}A(R[I],M)===0?t(R,I,T):t(R,++T,_),T<=O&&(I=T+1),O<=T&&(_=T-1)}})(x,m,E||0,L||x.length-1,S||i)}function t(x,m,E){var L=x[m];x[m]=x[E],x[E]=L}function i(x,m){return x<m?-1:x>m?1:0}var e=function(x){x===void 0&&(x=9),this._maxEntries=Math.max(4,x),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(x,m,E){if(!E)return m.indexOf(x);for(var L=0;L<m.length;L++)if(E(x,m[L]))return L;return-1}function r(x,m){n(x,0,x.children.length,m,x)}function n(x,m,E,L,S){S||(S=b(null)),S.minX=1/0,S.minY=1/0,S.maxX=-1/0,S.maxY=-1/0;for(var w=m;w<E;w++){var R=x.children[w];l(S,x.leaf?L(R):R)}return S}function l(x,m){return x.minX=Math.min(x.minX,m.minX),x.minY=Math.min(x.minY,m.minY),x.maxX=Math.max(x.maxX,m.maxX),x.maxY=Math.max(x.maxY,m.maxY),x}function a(x,m){return x.minX-m.minX}function h(x,m){return x.minY-m.minY}function c(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}function f(x){return x.maxX-x.minX+(x.maxY-x.minY)}function u(x,m){return x.minX<=m.minX&&x.minY<=m.minY&&m.maxX<=x.maxX&&m.maxY<=x.maxY}function p(x,m){return m.minX<=x.maxX&&m.minY<=x.maxY&&m.maxX>=x.minX&&m.maxY>=x.minY}function b(x){return{children:x,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(x,m,E,L,S){for(var w=[m,E];w.length;)if(!((E=w.pop())-(m=w.pop())<=L)){var R=m+Math.ceil((E-m)/L/2)*L;o(x,R,m,E,S),w.push(m,R,R,E)}}return e.prototype.all=function(){return this._all(this.data,[])},e.prototype.search=function(x){var m=this.data,E=[];if(!p(x,m))return E;for(var L=this.toBBox,S=[];m;){for(var w=0;w<m.children.length;w++){var R=m.children[w],O=m.leaf?L(R):R;p(x,O)&&(m.leaf?E.push(R):u(x,O)?this._all(R,E):S.push(R))}m=S.pop()}return E},e.prototype.collides=function(x){var m=this.data;if(!p(x,m))return!1;for(var E=[];m;){for(var L=0;L<m.children.length;L++){var S=m.children[L],w=m.leaf?this.toBBox(S):S;if(p(x,w)){if(m.leaf||u(x,w))return!0;E.push(S)}}m=E.pop()}return!1},e.prototype.load=function(x){if(!x||!x.length)return this;if(x.length<this._minEntries){for(var m=0;m<x.length;m++)this.insert(x[m]);return this}var E=this._build(x.slice(),0,x.length-1,0);if(this.data.children.length)if(this.data.height===E.height)this._splitRoot(this.data,E);else{if(this.data.height<E.height){var L=this.data;this.data=E,E=L}this._insert(E,this.data.height-E.height-1,!0)}else this.data=E;return this},e.prototype.insert=function(x){return x&&this._insert(x,this.data.height-1),this},e.prototype.clear=function(){return this.data=b([]),this},e.prototype.remove=function(x,m){if(!x)return this;for(var E,L,S,w=this.data,R=this.toBBox(x),O=[],I=[];w||O.length;){if(w||(w=O.pop(),L=O[O.length-1],E=I.pop(),S=!0),w.leaf){var _=s(x,w.children,m);if(_!==-1)return w.children.splice(_,1),O.push(w),this._condense(O),this}S||w.leaf||!u(w,R)?L?(E++,w=L.children[E],S=!1):w=null:(O.push(w),I.push(E),E=0,L=w,w=w.children[0])}return this},e.prototype.toBBox=function(x){return x},e.prototype.compareMinX=function(x,m){return x.minX-m.minX},e.prototype.compareMinY=function(x,m){return x.minY-m.minY},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(x){return this.data=x,this},e.prototype._all=function(x,m){for(var E=[];x;)x.leaf?m.push.apply(m,x.children):E.push.apply(E,x.children),x=E.pop();return m},e.prototype._build=function(x,m,E,L){var S,w=E-m+1,R=this._maxEntries;if(w<=R)return r(S=b(x.slice(m,E+1)),this.toBBox),S;L||(L=Math.ceil(Math.log(w)/Math.log(R)),R=Math.ceil(w/Math.pow(R,L-1))),(S=b([])).leaf=!1,S.height=L;var O=Math.ceil(w/R),I=O*Math.ceil(Math.sqrt(R));v(x,m,E,I,this.compareMinX);for(var _=m;_<=E;_+=I){var A=Math.min(_+I-1,E);v(x,_,A,O,this.compareMinY);for(var F=_;F<=A;F+=O){var P=Math.min(F+O-1,A);S.children.push(this._build(x,F,P,L-1))}}return r(S,this.toBBox),S},e.prototype._chooseSubtree=function(x,m,E,L){for(;L.push(m),!m.leaf&&L.length-1!==E;){for(var S=1/0,w=1/0,R=void 0,O=0;O<m.children.length;O++){var I=m.children[O],_=c(I),A=(F=x,P=I,(Math.max(P.maxX,F.maxX)-Math.min(P.minX,F.minX))*(Math.max(P.maxY,F.maxY)-Math.min(P.minY,F.minY))-_);A<w?(w=A,S=_<S?_:S,R=I):A===w&&_<S&&(S=_,R=I)}m=R||m.children[0]}var F,P;return m},e.prototype._insert=function(x,m,E){var L=E?x:this.toBBox(x),S=[],w=this._chooseSubtree(L,this.data,m,S);for(w.children.push(x),l(w,L);m>=0&&S[m].children.length>this._maxEntries;)this._split(S,m),m--;this._adjustParentBBoxes(L,S,m)},e.prototype._split=function(x,m){var E=x[m],L=E.children.length,S=this._minEntries;this._chooseSplitAxis(E,S,L);var w=this._chooseSplitIndex(E,S,L),R=b(E.children.splice(w,E.children.length-w));R.height=E.height,R.leaf=E.leaf,r(E,this.toBBox),r(R,this.toBBox),m?x[m-1].children.push(R):this._splitRoot(E,R)},e.prototype._splitRoot=function(x,m){this.data=b([x,m]),this.data.height=x.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},e.prototype._chooseSplitIndex=function(x,m,E){for(var L,S,w,R,O,I,_,A=1/0,F=1/0,P=m;P<=E-m;P++){var D=n(x,0,P,this.toBBox),C=n(x,P,E,this.toBBox),d=(S=D,w=C,R=void 0,O=void 0,I=void 0,_=void 0,R=Math.max(S.minX,w.minX),O=Math.max(S.minY,w.minY),I=Math.min(S.maxX,w.maxX),_=Math.min(S.maxY,w.maxY),Math.max(0,I-R)*Math.max(0,_-O)),g=c(D)+c(C);d<A?(A=d,L=P,F=g<F?g:F):d===A&&g<F&&(F=g,L=P)}return L||E-m},e.prototype._chooseSplitAxis=function(x,m,E){var L=x.leaf?this.compareMinX:a,S=x.leaf?this.compareMinY:h;this._allDistMargin(x,m,E,L)<this._allDistMargin(x,m,E,S)&&x.children.sort(L)},e.prototype._allDistMargin=function(x,m,E,L){x.children.sort(L);for(var S=this.toBBox,w=n(x,0,m,S),R=n(x,E-m,E,S),O=f(w)+f(R),I=m;I<E-m;I++){var _=x.children[I];l(w,x.leaf?S(_):_),O+=f(w)}for(var A=E-m-1;A>=m;A--){var F=x.children[A];l(R,x.leaf?S(F):F),O+=f(R)}return O},e.prototype._adjustParentBBoxes=function(x,m,E){for(var L=E;L>=0;L--)l(m[L],x)},e.prototype._condense=function(x){for(var m=x.length-1,E=void 0;m>=0;m--)x[m].children.length===0?m>0?(E=x[m-1].children).splice(E.indexOf(x[m]),1):this.clear():r(x[m],this.toBBox)},e})});var Uu=oi((ZT,ao)=>{"use strict";(function(o){typeof ao=="object"&&ao.exports?(o.default=o,ao.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/map",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function i(e,s,r,n){e.hasOwnProperty(s)||(e[s]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:e[s]}})))}i(t,"Core/Axis/Color/ColorAxisComposition.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,s){var r;let{parse:n}=e,{addEvent:l,extend:a,merge:h,pick:c,splat:f}=s;return function(u){let p;function b(){let{userOptions:I}=this;this.colorAxis=[],I.colorAxis&&(I.colorAxis=f(I.colorAxis),I.colorAxis.map(_=>new p(this,_)))}function v(I){let _=this.chart.colorAxis||[],A=C=>{let d=I.allItems.indexOf(C);d!==-1&&(this.destroyItem(I.allItems[d]),I.allItems.splice(d,1))},F=[],P,D;for(_.forEach(function(C){(P=C.options)&&P.showInLegend&&(P.dataClasses&&P.visible?F=F.concat(C.getDataClassLegendSymbols()):P.visible&&F.push(C),C.series.forEach(function(d){(!d.options.showInLegend||P.dataClasses)&&(d.options.legendType==="point"?d.points.forEach(function(g){A(g)}):A(d))}))}),D=F.length;D--;)I.allItems.unshift(F[D])}function x(I){I.visible&&I.item.legendColor&&I.item.legendItem.symbol.attr({fill:I.item.legendColor})}function m(I){this.chart.colorAxis?.forEach(_=>{_.update({},I.redraw)})}function E(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function L(){let I=this.axisTypes;I?I.indexOf("colorAxis")===-1&&I.push("colorAxis"):this.axisTypes=["colorAxis"]}function S(I){let _=this,A=I?"show":"hide";_.visible=_.options.visible=!!I,["graphic","dataLabel"].forEach(function(F){_[F]&&_[F][A]()}),this.series.buildKDTree()}function w(){let I=this,_=this.data.length?this.data:this.points,A=this.options.nullColor,F=this.colorAxis,P=this.colorKey;_.forEach(D=>{let C=D.getNestedProperty(P),d=D.options.color||(D.isNull||D.value===null?A:F&&C!==void 0?F.toColor(C,D):D.color||I.color);d&&D.color!==d&&(D.color=d,I.options.legendType==="point"&&D.legendItem&&D.legendItem.label&&I.chart.legend.colorizeItem(D,D.visible))})}function R(){this.elem.attr("fill",n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}function O(){this.elem.attr("stroke",n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}u.compose=function(I,_,A,F,P){let D=_.prototype,C=A.prototype,d=P.prototype;D.collectionsWithUpdate.includes("colorAxis")||(p=I,D.collectionsWithUpdate.push("colorAxis"),D.collectionsWithInit.colorAxis=[D.addColorAxis],l(_,"afterGetAxes",b),function(g){let y=g.prototype.createAxis;g.prototype.createAxis=function(M,k){if(M!=="colorAxis")return y.apply(this,arguments);let T=new p(this,h(k.axis,{index:this[M].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(z=>{z.series=[]}),this.series.forEach(z=>{z.bindAxes(),z.isDirtyData=!0}),c(k.redraw,!0)&&this.redraw(k.animation),T}}(_),C.fillSetter=R,C.strokeSetter=O,l(F,"afterGetAllItems",v),l(F,"afterColorizeItem",x),l(F,"afterUpdate",m),a(d,{optionalAxis:"colorAxis",translateColors:w}),a(d.pointClass.prototype,{setVisible:S}),l(P,"afterTranslate",E,{order:1}),l(P,"bindAxes",L))},u.pointSetVisible=S}(r||(r={})),r}),i(t,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0}}),i(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,s){var r,n;let{parse:l}=e,{merge:a}=s;return(n=r||(r={})).initDataClasses=function(h){let c=this.chart,f=this.legendItem=this.legendItem||{},u=this.options,p=h.dataClasses||[],b,v,x=c.options.chart.colorCount,m=0,E;this.dataClasses=v=[],f.labels=[];for(let L=0,S=p.length;L<S;++L)b=a(b=p[L]),v.push(b),(c.styledMode||!b.color)&&(u.dataClassColor==="category"?(c.styledMode||(x=(E=c.options.colors||[]).length,b.color=E[m]),b.colorIndex=m,++m===x&&(m=0)):b.color=l(u.minColor).tweenTo(l(u.maxColor),S<2?.5:L/(S-1)))},n.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let f=0,u=c.length;f<u;++f)c[f].color=l(c[f][1])},n.normalizedValue=function(h){let c=this.max||0,f=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-f||1)},n.toColor=function(h,c){let f,u,p,b,v,x,m=this.dataClasses,E=this.stops;if(m){for(x=m.length;x--;)if(u=(v=m[x]).from,p=v.to,(u===void 0||h>=u)&&(p===void 0||h<=p)){b=v.color,c&&(c.dataClass=x,c.colorIndex=v.colorIndex);break}}else{for(f=this.normalizedValue(h),x=E.length;x--&&!(f>E[x][0]););u=E[x]||E[x+1],f=1-((p=E[x+1]||u)[0]-f)/(p[0]-u[0]||1),b=u.color.tweenTo(p.color,f)}return b},r}),i(t,"Core/Axis/Color/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Axis/Color/ColorAxisComposition.js"],t["Core/Axis/Color/ColorAxisDefaults.js"],t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Defaults.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c){let{defaultOptions:f}=l,{series:u}=h,{defined:p,extend:b,fireEvent:v,isArray:x,isNumber:m,merge:E,pick:L,relativeLength:S}=c;f.colorAxis=E(f.xAxis,r);class w extends e{static compose(O,I,_,A){s.compose(w,O,I,_,A)}constructor(O,I){super(O,I),this.coll="colorAxis",this.visible=!0,this.init(O,I)}init(O,I){let _=O.options.legend||{},A=I.layout?I.layout!=="vertical":_.layout!=="vertical";this.side=I.side||A?2:1,this.reversed=I.reversed||!A,this.opposite=!A,super.init(O,I,"colorAxis"),this.userOptions=I,x(O.userOptions.colorAxis)&&(O.userOptions.colorAxis[this.index]=I),I.dataClasses&&this.initDataClasses(I),this.initStops(),this.horiz=A,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(O){let I=E(f.colorAxis,O,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&O.visible!==!1});super.setOptions(I),this.options.crosshair=this.options.marker}setAxisSize(){let O=this.chart,I=this.legendItem?.symbol,{width:_,height:A}=this.getSize();I&&(this.left=+I.attr("x"),this.top=+I.attr("y"),this.width=_=+I.attr("width"),this.height=A=+I.attr("height"),this.right=O.chartWidth-this.left-_,this.bottom=O.chartHeight-this.top-A,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?_:A)||w.defaultLegendLength}getOffset(){let O=this.legendItem?.group,I=this.chart.axisOffset[this.side];if(O){this.axisParent=O,super.getOffset();let _=this.chart.legend;_.allItems.forEach(function(A){A instanceof w&&A.drawLegendSymbol(_,A)}),_.render(),this.chart.getMargins(!0),this.chart.series.some(A=>A.isDrilling)||(this.isDirty=!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=I}}setLegendColor(){let O=this.horiz,I=this.reversed,_=I?1:0,A=I?0:1,F=O?[_,0,A,0]:[0,A,0,_];this.legendColor={linearGradient:{x1:F[0],y1:F[1],x2:F[2],y2:F[3]},stops:this.stops}}drawLegendSymbol(O,I){let _=I.legendItem||{},A=O.padding,F=O.options,P=this.options.labels,D=L(F.itemDistance,10),C=this.horiz,{width:d,height:g}=this.getSize(),y=L(F.labelPadding,C?16:30);this.setLegendColor(),_.symbol||(_.symbol=this.chart.renderer.symbol("roundedRect").attr({r:F.symbolRadius??3,zIndex:1}).add(_.group)),_.symbol.attr({x:0,y:(O.baseline||0)-11,width:d,height:g}),_.labelWidth=d+A+(C?D:L(P.x,P.distance)+(this.maxLabelLength||0)),_.labelHeight=g+A+(C?y:0)}setState(O){this.series.forEach(function(I){I.setState(O)})}setVisible(){}getSeriesExtremes(){let O=this.series,I,_,A,F,P,D,C=O.length,d,g;for(this.dataMin=1/0,this.dataMax=-1/0;C--;){if(_=(D=O[C]).colorKey=L(D.options.colorKey,D.colorKey,D.pointValKey,D.zoneAxis,"y"),F=D.pointArrayMap,P=D[_+"Min"]&&D[_+"Max"],D[_+"Data"])I=D[_+"Data"];else if(F){if(I=[],A=F.indexOf(_),d=D.yData,A>=0&&d)for(g=0;g<d.length;g++)I.push(L(d[g][A],d[g]))}else I=D.yData;if(P)D.minColorValue=D[_+"Min"],D.maxColorValue=D[_+"Max"];else{let y=u.prototype.getExtremes.call(D,I);D.minColorValue=y.dataMin,D.maxColorValue=y.dataMax}p(D.minColorValue)&&p(D.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,D.minColorValue),this.dataMax=Math.max(this.dataMax,D.maxColorValue)),P||u.prototype.applyExtremes.call(D)}}drawCrosshair(O,I){let _,A=this.legendItem||{},F=I&&I.plotX,P=I&&I.plotY,D=this.pos,C=this.len;I&&((_=this.toPixels(I.getNestedProperty(I.series.colorKey)))<D?_=D-2:_>D+C&&(_=D+C+2),I.plotX=_,I.plotY=this.len-_,super.drawCrosshair(O,I),I.plotX=F,I.plotY=P,this.cross&&!this.cross.addedToColorAxis&&A.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(A.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||typeof this.crosshair!="object"||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(O){let I=this.left,_=O.translatedValue,A=this.top;return m(_)?this.horiz?[["M",_-4,A-6],["L",_+4,A-6],["L",_,A],["Z"]]:[["M",I,_],["L",I-6,_+6],["L",I-6,_-6],["Z"]]:super.getPlotLinePath(O)}update(O,I){let _=this.chart.legend;this.series.forEach(A=>{A.isDirtyData=!0}),(O.dataClasses&&_.allItems||this.dataClasses)&&this.destroyItems(),super.update(O,I),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),_.colorizeItem(this,!0))}destroyItems(){let O=this.chart,I=this.legendItem||{};if(I.label)O.legend.destroyItem(this);else if(I.labels)for(let _ of I.labels)O.legend.destroyItem(_);O.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(O){this.destroyItems(),super.remove(O)}getDataClassLegendSymbols(){let O,I=this,_=I.chart,A=I.legendItem&&I.legendItem.labels||[],F=_.options.legend,P=L(F.valueDecimals,-1),D=L(F.valueSuffix,""),C=d=>I.series.reduce((g,y)=>(g.push(...y.points.filter(M=>M.dataClass===d)),g),[]);return A.length||I.dataClasses.forEach((d,g)=>{let y=d.from,M=d.to,{numberFormatter:k}=_,T=!0;O="",y===void 0?O="< ":M===void 0&&(O="> "),y!==void 0&&(O+=k(y,P)+D),y!==void 0&&M!==void 0&&(O+=" - "),M!==void 0&&(O+=k(M,P)+D),A.push(b({chart:_,name:O,options:{},drawLegendSymbol:a.rectangle,visible:!0,isDataClass:!0,setState:z=>{for(let N of C(g))N.setState(z)},setVisible:function(){this.visible=T=I.visible=!T;let z=[];for(let N of C(g))N.setVisible(T),N.hiddenInDataClass=!T,z.indexOf(N.series)===-1&&z.push(N.series);_.legend.colorizeItem(this,T),z.forEach(N=>{v(N,"afterDataClassLegendClick")})}},d))}),A}getSize(){let{chart:O,horiz:I}=this,{height:_,width:A}=this.options,{legend:F}=O.options;return{width:L(p(A)?S(A,O.chartWidth):void 0,F?.symbolWidth,I?w.defaultLegendLength:12),height:L(p(_)?S(_,O.chartHeight):void 0,F?.symbolHeight,I?12:w.defaultLegendLength)}}}return w.defaultLegendLength=200,w.keepProps=["legendItem"],b(w.prototype,n),Array.prototype.push.apply(e.keepProps,w.keepProps),w}),i(t,"masters/modules/coloraxis.src.js",[t["Core/Globals.js"],t["Core/Axis/Color/ColorAxis.js"]],function(e,s){return e.ColorAxis=e.ColorAxis||s,e.ColorAxis.compose(e.Chart,e.Fx,e.Legend,e.Series),e}),i(t,"Maps/MapNavigationDefaults.js",[],function(){return{lang:{zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation:{buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}}}),i(t,"Maps/MapPointer.js",[t["Core/Utilities.js"]],function(e){var s;let{defined:r,extend:n,pick:l,wrap:a}=e;return function(h){let c,f=0;function u(x){let m=this.chart;x=this.normalize(x),m.options.mapNavigation.enableDoubleClickZoomTo?m.pointer.inClass(x.target,"highcharts-tracker")&&m.hoverPoint&&m.hoverPoint.zoomTo():m.isInsidePlot(x.chartX-m.plotLeft,x.chartY-m.plotTop)&&m.mapZoom(.5,void 0,void 0,x.chartX,x.chartY)}function p(x){let m=this.chart,E=r((x=this.normalize(x)).wheelDelta)&&-x.wheelDelta/120||x.deltaY||x.detail;Math.abs(E)>=1&&(f+=Math.abs(E),c&&clearTimeout(c),c=setTimeout(()=>{f=0},50)),f<10&&m.isInsidePlot(x.chartX-m.plotLeft,x.chartY-m.plotTop)&&m.mapView&&m.mapView.zoomBy(-((m.options.mapNavigation.mouseWheelSensitivity-1)*E),void 0,[x.chartX,x.chartY],!(1>Math.abs(E))&&void 0)}function b(x,m,E){let L=this.chart;if(m=x.call(this,m,E),L&&L.mapView){let S=L.mapView.pixelsToLonLat({x:m.chartX-L.plotLeft,y:m.chartY-L.plotTop});S&&n(m,S)}return m}function v(x){let m=this.chart.options.mapNavigation;m&&l(m.enableTouchZoom,m.enabled)&&(this.chart.zooming.pinchType="xy"),x.apply(this,[].slice.call(arguments,1))}h.compose=function(x){let m=x.prototype;m.onContainerDblClick||(n(m,{onContainerDblClick:u,onContainerMouseWheel:p}),a(m,"normalize",b),a(m,"zoomOption",v))}}(s||(s={})),s}),i(t,"Maps/MapSymbols.js",[],function(){let e;function s(n,l,a,h,c){if(c){let f=c?.r||0;c.brBoxY=l-f,c.brBoxHeight=h+f}return e.roundedRect(n,l,a,h,c)}function r(n,l,a,h,c){if(c){let f=c?.r||0;c.brBoxHeight=h+f}return e.roundedRect(n,l,a,h,c)}return{compose:function(n){(e=n.prototype.symbols).bottombutton=s,e.topbutton=r}}}),i(t,"Maps/MapNavigation.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Maps/MapNavigationDefaults.js"],t["Maps/MapPointer.js"],t["Maps/MapSymbols.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{setOptions:h}=e,{composed:c}=s,{addEvent:f,extend:u,merge:p,objectEach:b,pick:v,pushUnique:x}=a;function m(L){L&&(L.preventDefault&&L.preventDefault(),L.stopPropagation&&L.stopPropagation(),L.cancelBubble=!0)}class E{static compose(S,w,R){n.compose(w),l.compose(R),x(c,"Map.Navigation")&&(f(S,"beforeRender",function(){this.mapNavigation=new E(this),this.mapNavigation.update()}),h(r))}constructor(S){this.chart=S,this.navButtons=[]}update(S){let w=this,R=w.chart,O=w.navButtons,I=function(A){this.handler.call(R,A),m(A)},_=R.options.mapNavigation;for(S&&(_=R.options.mapNavigation=p(R.options.mapNavigation,S));O.length;)O.pop().destroy();if(!R.renderer.forExport&&v(_.enableButtons,_.enabled)){w.navButtonsGroup||(w.navButtonsGroup=R.renderer.g().attr({zIndex:7}).add()),b(_.buttons,(F,P)=>{let D={padding:(F=p(_.buttonOptions,F)).padding};!R.styledMode&&F.theme&&(u(D,F.theme),D.style=p(F.theme.style,F.style));let{text:C,width:d=0,height:g=0,padding:y=0}=F,M=R.renderer.button(C!=="+"&&C!=="-"&&C||"",0,0,I,D,void 0,void 0,void 0,P==="zoomIn"?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[P]).attr({width:d,height:g,title:R.options.lang[P],zIndex:5}).add(w.navButtonsGroup);if(C==="+"||C==="-"){let k=d+1,T=[["M",y+3,y+g/2],["L",y+k-3,y+g/2]];C==="+"&&T.push(["M",y+k/2,y+3],["L",y+k/2,y+g-3]),R.renderer.path(T).addClass("highcharts-button-symbol").attr(R.styledMode?{}:{stroke:F.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(M)}if(M.handler=F.onclick,f(M.element,"dblclick",m),O.push(M),u(F,{width:M.width,height:2*(M.height||0)}),R.hasLoaded)M.align(F,!1,F.alignTo);else{let k=f(R,"load",()=>{M.element&&M.align(F,!1,F.alignTo),k()})}});let A=(F,P)=>!(P.x>=F.x+F.width||P.x+P.width<=F.x||P.y>=F.y+F.height||P.y+P.height<=F.y);R.hasLoaded||f(R,"render",function(){let F=R.exportingGroup&&R.exportingGroup.getBBox();if(F){let P=w.navButtonsGroup.getBBox();if(A(F,P)){let D=-P.y-P.height+F.y-5,C=F.y+F.height-P.y+5,d=_.buttonOptions&&_.buttonOptions.verticalAlign;w.navButtonsGroup.attr({translateY:d==="bottom"?D:C})}}})}this.updateEvents(_)}updateEvents(S){let w=this.chart;v(S.enableDoubleClickZoom,S.enabled)||S.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||f(w.container,"dblclick",function(R){w.pointer.onContainerDblClick(R)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),v(S.enableMouseWheelZoom,S.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||f(w.container,"wheel",function(R){return w.pointer.inClass(R.target,"highcharts-no-mousewheel")||(w.pointer.onContainerMouseWheel(R),m(R)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}}return E}),i(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(e,s,r){var n;let{column:{prototype:l}}=e.seriesTypes,{addEvent:a,defined:h}=r;return function(c){function f(u){let p=this.series,b=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new s(b,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),u?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${b.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(u){let p={};return h(u.color)&&(!u.state||u.state==="normal")&&(p[this.colorProp||"fill"]=u.color),p},pointAttribs:l.pointAttribs},c.compose=function(u){return a(u.prototype.pointClass,"afterSetState",f),u}}(n||(n={})),n}),i(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(e,s,r,n){var l;let{getOptions:a}=s,{isNumber:h,merge:c,pick:f}=n;class u extends e{init(b,v){let x=a().credits,m=c({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:f(x.mapText,' \xA9 <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:f(x.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},b);super.init(m,v)}mapZoom(b,v,x,m,E){this.mapView&&(h(b)&&(b=Math.log(b)/Math.log(.5)),this.mapView.zoomBy(b,h(v)&&h(x)?this.mapView.projection.inverse([v,x]):void 0,h(m)&&h(E)?[m,E]:void 0))}update(b){b.chart&&"map"in b.chart&&this.mapView?.recommendMapView(this,[b.chart.map,...(this.options.series||[]).map(v=>v.mapData)],!0),super.update.apply(this,arguments)}}return(l=u||(u={})).maps={},l.mapChart=function(p,b,v){return new l(p,b,v)},l.splitPath=function(p){let b;return b=typeof p=="string"?(p=p.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(v=>/[A-Za-z]/.test(v)?v:parseFloat(v)):p,r.prototype.pathToSegments(b)},u}),i(t,"Maps/MapUtilities.js",[],function(){return{boundsFromPath:function(e){let s=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE,l=Number.MAX_VALUE,a;if(e.forEach(h=>{let c=h[h.length-2],f=h[h.length-1];typeof c=="number"&&typeof f=="number"&&(r=Math.min(r,c),s=Math.max(s,c),l=Math.min(l,f),n=Math.max(n,f),a=!0)}),a)return{x1:r,y1:l,x2:s,y2:n}},pointInPolygon:function({x:e,y:s},r){let n,l,a=!1;for(n=0,l=r.length-1;n<r.length;l=n++)r[n][1]>s!=r[l][1]>s&&e<(r[l][0]-r[n][0])*(s-r[n][1])/(r[l][1]-r[n][1])+r[n][0]&&(a=!a);return a}}}),i(t,"Series/Map/MapPoint.js",[t["Series/ColorMapComposition.js"],t["Maps/MapUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{boundsFromPath:l}=s,a=r.seriesTypes.scatter.prototype.pointClass,{extend:h,isNumber:c,pick:f}=n;class u extends a{static getProjectedPath(b,v){return b.projectedPath||(v&&b.geometry?(v.hasCoordinates=!0,b.projectedPath=v.path(b.geometry)):b.projectedPath=b.path),b.projectedPath||[]}applyOptions(b,v){let x=this.series,m=super.applyOptions(b,v),E=x.joinBy;if(x.mapData&&x.mapMap){let L=E[1],S=super.getNestedProperty(L),w=S!==void 0&&x.mapMap[S];w?h(m,ns(Se({},w),{name:m.name??w.name})):x.pointArrayMap.indexOf("value")!==-1&&(m.value=m.value||null)}return m}getProjectedBounds(b){let v=l(u.getProjectedPath(this,b)),x=this.properties,m=this.series.chart.mapView;if(v){let E=x&&x["hc-middle-lon"],L=x&&x["hc-middle-lat"];if(m&&c(E)&&c(L)){let S=b.forward([E,L]);v.midX=S[0],v.midY=S[1]}else{let S=x&&x["hc-middle-x"],w=x&&x["hc-middle-y"];v.midX=v.x1+(v.x2-v.x1)*f(this.middleX,c(S)?S:.5);let R=f(this.middleY,c(w)?w:.5);this.geometry||(R=1-R),v.midY=v.y2-(v.y2-v.y1)*R}return v}}onMouseOver(b){n.clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,b):this.series.onMouseOut()}setVisible(b){this.visible=this.options.visible=!!b,this.dataLabel&&this.dataLabel[b?"show":"hide"](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(b){let v=this.series.chart,x=v.mapView,m=this.bounds;if(x&&m){let E=c(this.insetIndex)&&x.insets[this.insetIndex];if(E){let L=E.projectedUnitsToPixels({x:m.x1,y:m.y1}),S=E.projectedUnitsToPixels({x:m.x2,y:m.y2}),w=x.pixelsToProjectedUnits({x:L.x,y:L.y}),R=x.pixelsToProjectedUnits({x:S.x,y:S.y});m={x1:w.x,y1:w.y,x2:R.x,y2:R.y}}x.fitToBounds(m,void 0,!1),this.series.isDirty=!0,v.redraw(b)}}}return h(u.prototype,{dataLabelOnNull:e.pointMembers.dataLabelOnNull,moveToTopOnHover:e.pointMembers.moveToTopOnHover,isValid:e.pointMembers.isValid}),u}),i(t,"Series/Map/MapSeriesDefaults.js",[t["Core/Utilities.js"]],function(e){let{isNumber:s}=e;return{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){let{numberFormatter:r}=this.series.chart,{value:n}=this.point;return s(n)?r(n,-1):this.point.name},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}}),i(t,"Maps/MapViewDefaults.js",[],function(){return{center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}}}),i(t,"Maps/GeoJSONComposition.js",[t["Core/Globals.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(e,s,r){var n;let{win:l}=e,{format:a}=s,{error:h,extend:c,merge:f,wrap:u}=r;return function(p){function b(S){return this.mapView&&this.mapView.lonLatToProjectedUnits(S)}function v(S){return this.mapView&&this.mapView.projectedUnitsToLonLat(S)}function x(S,w){let R=this.options.chart.proj4||l.proj4;if(!R){h(21,!1,this);return}let{jsonmarginX:O=0,jsonmarginY:I=0,jsonres:_=1,scale:A=1,xoffset:F=0,xpan:P=0,yoffset:D=0,ypan:C=0}=w,d=R(w.crs,[S.lon,S.lat]),g=w.cosAngle||w.rotation&&Math.cos(w.rotation),y=w.sinAngle||w.rotation&&Math.sin(w.rotation),M=w.rotation?[d[0]*g+d[1]*y,-d[0]*y+d[1]*g]:d;return{x:((M[0]-F)*A+P)*_+O,y:-(((D-M[1])*A+C)*_-I)}}function m(S,w){let R=this.options.chart.proj4||l.proj4;if(!R){h(21,!1,this);return}if(S.y===null)return;let{jsonmarginX:O=0,jsonmarginY:I=0,jsonres:_=1,scale:A=1,xoffset:F=0,xpan:P=0,yoffset:D=0,ypan:C=0}=w,d={x:((S.x-O)/_-P)/A+F,y:((S.y-I)/_+C)/A+D},g=w.cosAngle||w.rotation&&Math.cos(w.rotation),y=w.sinAngle||w.rotation&&Math.sin(w.rotation),M=R(w.crs,"WGS84",w.rotation?{x:d.x*g+-(d.y*y),y:d.x*y+d.y*g}:d);return{lat:M.y,lon:M.x}}function E(S,w){w||(w=Object.keys(S.objects)[0]);let R=S.objects[w];if(R["hc-decoded-geojson"]&&R["hc-decoded-geojson"].title===S.title)return R["hc-decoded-geojson"];let O=S.arcs;if(S.transform){let P,D,C,d=S.arcs,{scale:g,translate:y}=S.transform;O=[];for(let M=0,k=d.length;M<k;++M){let T=d[M];O.push(P=[]),D=0,C=0;for(let z=0,N=T.length;z<N;++z)P.push([(D+=T[z][0])*g[0]+y[0],(C+=T[z][1])*g[1]+y[1]])}}let I=P=>typeof P[0]=="number"?P.reduce((D,C,d)=>{let g=C<0?O[~C]:O[C];return C<0?(g=g.slice(0,d===0?g.length:g.length-1)).reverse():d&&(g=g.slice(1)),D.concat(g)},[]):P.map(I),_=R.geometries,A=[];for(let P=0,D=_.length;P<D;++P)A.push({type:"Feature",properties:_[P].properties,geometry:{type:_[P].type,coordinates:_[P].coordinates||I(_[P].arcs)}});let F={type:"FeatureCollection",copyright:S.copyright,copyrightShort:S.copyrightShort,copyrightUrl:S.copyrightUrl,features:A,"hc-recommended-mapview":R["hc-recommended-mapview"],bbox:S.bbox,title:S.title};return R["hc-decoded-geojson"]=F,F}function L(S,w){w=f(!0,this.options.credits,w),this.mapCredits&&(w.href=void 0),S.call(this,w),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}p.compose=function(S){let w=S.prototype;w.transformFromLatLon||(w.fromLatLonToPoint=b,w.fromPointToLatLon=v,w.transformFromLatLon=x,w.transformToLatLon=m,u(w,"addCredits",L))},p.geojson=function(S,w="map",R){let O=[],I=S.type==="Topology"?E(S):S,_=I.features;for(let A=0,F=_.length;A<F;++A){let P,D=_[A],C=D.geometry||{},d=C.type,g=C.coordinates,y=D.properties;if((w==="map"||w==="mapbubble")&&(d==="Polygon"||d==="MultiPolygon")?g.length&&(P={geometry:{coordinates:g,type:d}}):w==="mapline"&&(d==="LineString"||d==="MultiLineString")?g.length&&(P={geometry:{coordinates:g,type:d}}):w==="mappoint"&&d==="Point"&&g.length&&(P={geometry:{coordinates:g,type:d}}),P){let M=y&&(y.name||y.NAME),k=y&&y.lon,T=y&&y.lat;O.push(c(P,{lat:typeof T=="number"?T:void 0,lon:typeof k=="number"?k:void 0,name:typeof M=="string"?M:void 0,properties:y}))}}return R&&I.copyrightShort&&(R.chart.mapCredits=a(R.chart.options.credits?.mapText,{geojson:I}),R.chart.mapCreditsFull=a(R.chart.options.credits?.mapTextFull,{geojson:I})),O},p.topo2geo=E}(n||(n={})),n}),i(t,"Core/Geometry/PolygonClip.js",[],function(){function e(n,l,a=!0){let h=l[l.length-1],c,f,u,p=n;for(let b=0;b<l.length;b++){let v=p;c=l[b],p=[],f=a?v[v.length-1]:v[0];for(let x=0;x<v.length;x++)s(h,c,u=v[x])?(s(h,c,f)||p.push(r(h,c,f,u)),p.push(u)):s(h,c,f)&&p.push(r(h,c,f,u)),f=u;h=c}return p}function s(n,l,a){return(l[0]-n[0])*(a[1]-n[1])>(l[1]-n[1])*(a[0]-n[0])}function r(n,l,a,h){let c=[n[0]-l[0],n[1]-l[1]],f=[a[0]-h[0],a[1]-h[1]],u=n[0]*l[1]-n[1]*l[0],p=a[0]*h[1]-a[1]*h[0],b=1/(c[0]*f[1]-c[1]*f[0]),v=[(u*f[0]-p*c[0])*b,(u*f[1]-p*c[1])*b];return v.isIntersection=!0,v}return{clipLineString:function(n,l){let a=[],h=e(n,l,!1);for(let c=1;c<h.length;c++)h[c].isIntersection&&h[c-1].isIntersection&&(a.push(h.splice(0,c)),c=0),c===h.length-1&&a.push(h);return a},clipPolygon:e}}),i(t,"Maps/Projections/LambertConformalConic.js",[],function(){let e=Math.sign||(l=>l===0?0:l>0?1:-1),s=Math.PI/180,r=Math.PI/2,n=l=>Math.tan((r+l)/2);return class{constructor(l){let a=(l.parallels||[]).map(p=>p*s),h=a[0]||0,c=a[1]??h,f=Math.cos(h);typeof l.projectedBounds=="object"&&(this.projectedBounds=l.projectedBounds);let u=h===c?Math.sin(h):Math.log(f/Math.cos(c))/Math.log(n(c)/n(h));1e-10>Math.abs(u)&&(u=1e-10*(e(u)||1)),this.n=u,this.c=f*Math.pow(n(h),u)/u}forward(l){let{c:a,n:h,projectedBounds:c}=this,f=l[0]*s,u=l[1]*s;a>0?u<-r+1e-6&&(u=-r+1e-6):u>r-1e-6&&(u=r-1e-6);let p=a/Math.pow(n(u),h),b=p*Math.sin(h*f)*63.78137,v=(a-p*Math.cos(h*f))*63.78137,x=[b,v];return c&&(b<c.x1||b>c.x2||v<c.y1||v>c.y2)&&(x.outside=!0),x}inverse(l){let{c:a,n:h}=this,c=l[0]/63.78137,f=a-l[1]/63.78137,u=e(h)*Math.sqrt(c*c+f*f),p=Math.atan2(c,Math.abs(f))*e(f);return f*h<0&&(p-=Math.PI*e(c)*e(f)),[p/h/s,(2*Math.atan(Math.pow(a/u,1/h))-r)/s]}}}),i(t,"Maps/Projections/EqualEarth.js",[],function(){let e=Math.sqrt(3)/2;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(s){let r=Math.PI/180,n=Math.asin(e*Math.sin(s[1]*r)),l=n*n,a=l*l*l;return[s[0]*r*Math.cos(n)*74.03120656864502/(e*(1.340264+-.24331799999999998*l+a*(.0062510000000000005+.034164*l))),74.03120656864502*n*(1.340264+-.081106*l+a*(893e-6+.003796*l))]}inverse(s){let r=s[0]/74.03120656864502,n=s[1]/74.03120656864502,l=180/Math.PI,a=n,h,c,f,u;for(let v=0;v<12&&(c=(h=a*a)*h*h,f=a*(1.340264+-.081106*h+c*(893e-6+.003796*h))-n,a-=u=f/(1.340264+-.24331799999999998*h+c*(.0062510000000000005+.034164*h)),!(1e-9>Math.abs(u)));++v);c=(h=a*a)*h*h;let p=l*e*r*(1.340264+-.24331799999999998*h+c*(.0062510000000000005+.034164*h))/Math.cos(a),b=l*Math.asin(Math.sin(a)/e);return Math.abs(p)>180?[NaN,NaN]:[p,b]}}}),i(t,"Maps/Projections/Miller.js",[],function(){let e=Math.PI/4,s=Math.PI/180;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(r){return[r[0]*s*63.78137,79.7267125*Math.log(Math.tan(e+.4*r[1]*s))]}inverse(r){return[r[0]/63.78137/s,2.5*(Math.atan(Math.exp(r[1]/63.78137*.8))-e)/s]}}}),i(t,"Maps/Projections/Orthographic.js",[],function(){let e=Math.PI/180;return class{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}forward(s){let r=s[0],n=s[1]*e,l=[Math.cos(n)*Math.sin(r*e)*63.78460826781007,63.78460826781007*Math.sin(n)];return(r<-90||r>90)&&(l.outside=!0),l}inverse(s){let r=s[0]/63.78460826781007,n=s[1]/63.78460826781007,l=Math.sqrt(r*r+n*n),a=Math.asin(l),h=Math.sin(a);return[Math.atan2(r*h,l*Math.cos(a))/e,Math.asin(l&&n*h/l)/e]}}}),i(t,"Maps/Projections/WebMercator.js",[],function(){let e=Math.PI/180;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(s){let r=Math.sin(s[1]*e),n=[63.78137*s[0]*e,63.78137*Math.log((1+r)/(1-r))/2];return Math.abs(s[1])>this.maxLatitude&&(n.outside=!0),n}inverse(s){return[s[0]/(63.78137*e),(2*Math.atan(Math.exp(s[1]/63.78137))-Math.PI/2)/e]}}}),i(t,"Maps/Projections/ProjectionRegistry.js",[t["Maps/Projections/LambertConformalConic.js"],t["Maps/Projections/EqualEarth.js"],t["Maps/Projections/Miller.js"],t["Maps/Projections/Orthographic.js"],t["Maps/Projections/WebMercator.js"]],function(e,s,r,n,l){return{EqualEarth:s,LambertConformalConic:e,Miller:r,Orthographic:n,WebMercator:l}}),i(t,"Maps/Projection.js",[t["Core/Geometry/PolygonClip.js"],t["Maps/Projections/ProjectionRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{clipLineString:n,clipPolygon:l}=e,{clamp:a,erase:h}=r,c=2*Math.PI/360,f=v=>(v<-180&&(v+=360),v>180&&(v-=360),v),u=v=>(1-Math.cos(v))/2,p=(v,x)=>{let m=Math.cos,E=v[1]*c,L=v[0]*c,S=x[1]*c,w=x[0]*c;return u(S-E)+m(E)*m(S)*u(w-L)};class b{static add(x,m){b.registry[x]=m}static distance(x,m){let{atan2:E,sqrt:L}=Math,S=p(x,m);return 2*E(L(S),L(1-S))*6371e3}static geodesic(x,m,E,L=5e5){let{atan2:S,cos:w,sin:R,sqrt:O}=Math,I=b.distance,_=x[1]*c,A=x[0]*c,F=m[1]*c,P=m[0]*c,D=w(_)*w(A),C=w(F)*w(P),d=w(_)*R(A),g=w(F)*R(P),y=R(_),M=R(F),k=I(x,m),T=k/6371e3,z=R(T),N=Math.round(k/L),G=[];if(E&&G.push(x),N>1){let X=1/N;for(let j=X;j<.999;j+=X){let B=R((1-j)*T)/z,W=R(j*T)/z,V=B*D+W*C,U=B*d+W*g,q=S(B*y+W*M,O(V*V+U*U)),H=S(U,V);G.push([H/c,q/c])}}return E&&G.push(m),G}static insertGeodesics(x){let m=x.length-1;for(;m--;)if(Math.max(Math.abs(x[m][0]-x[m+1][0]),Math.abs(x[m][1]-x[m+1][1]))>10){let E=b.geodesic(x[m],x[m+1]);E.length&&x.splice(m+1,0,...E)}}static toString(x){let{name:m,rotation:E}=x||{};return[m,E&&E.join(",")].join(";")}constructor(x={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90,this.options=x;let{name:m,projectedBounds:E,rotation:L}=x;this.rotator=L?this.getRotator(L):void 0;let S=m?b.registry[m]:void 0;S&&(this.def=new S(x));let{def:w,rotator:R}=this;w&&(this.maxLatitude=w.maxLatitude||90,this.hasGeoProjection=!0),R&&w?(this.forward=O=>w.forward(R.forward(O)),this.inverse=O=>R.inverse(w.inverse(O))):w?(this.forward=O=>w.forward(O),this.inverse=O=>w.inverse(O)):R&&(this.forward=R.forward,this.inverse=R.inverse),this.bounds=E==="world"?w&&w.bounds:E}lineIntersectsBounds(x){let{x1:m,x2:E,y1:L,y2:S}=this.bounds||{},w=(I,_,A)=>{let[F,P]=I,D=_?0:1;if(typeof A=="number"&&F[_]>=A!=P[_]>=A){let C=(A-F[_])/(P[_]-F[_]),d=F[D]+C*(P[D]-F[D]);return _?[d,A]:[A,d]}},R,O=x[0];return((R=w(x,0,m))||(R=w(x,0,E)))&&(O=R,x[1]=R),((R=w(x,1,L))||(R=w(x,1,S)))&&(O=R),O}getRotator(x){let m=x[0]*c,E=(x[1]||0)*c,L=(x[2]||0)*c,S=Math.cos(E),w=Math.sin(E),R=Math.cos(L),O=Math.sin(L);if(m!==0||E!==0||L!==0)return{forward:I=>{let _=I[0]*c+m,A=I[1]*c,F=Math.cos(A),P=Math.cos(_)*F,D=Math.sin(_)*F,C=Math.sin(A),d=C*S+P*w;return[Math.atan2(D*R-d*O,P*S-C*w)/c,Math.asin(d*R+D*O)/c]},inverse:I=>{let _=I[0]*c,A=I[1]*c,F=Math.cos(A),P=Math.cos(_)*F,D=Math.sin(_)*F,C=Math.sin(A),d=C*R-D*O;return[(Math.atan2(D*R+C*O,P*S+d*w)-m)/c,Math.asin(d*S-P*w)/c]}}}forward(x){return x}inverse(x){return x}cutOnAntimeridian(x,m){let E,L=[],S=[x];for(let w=0,R=x.length;w<R;++w){let O=x[w],I=x[w-1];if(!w){if(!m)continue;I=x[x.length-1]}let _=I[0],A=O[0];if((_<-90||_>90)&&(A<-90||A>90)&&_>0!=A>0){let F=a((180-(_+360)%360)/((A+360)%360-(_+360)%360),0,1),P=I[1]+F*(O[1]-I[1]);L.push({i:w,lat:P,direction:_<0?1:-1,previousLonLat:I,lonLat:O})}}if(L.length)if(m){L.length%2==1&&(E=L.slice().sort((R,O)=>Math.abs(O.lat)-Math.abs(R.lat))[0],h(L,E));let w=L.length-2;for(;w>=0;){let R=L[w].i,O=f(180+1e-6*L[w].direction),I=f(180-1e-6*L[w].direction),_=x.splice(R,L[w+1].i-R,...b.geodesic([O,L[w].lat],[O,L[w+1].lat],!0));_.push(...b.geodesic([I,L[w+1].lat],[I,L[w].lat],!0)),S.push(_),w-=2}if(E)for(let R=0;R<S.length;R++){let{direction:O,lat:I}=E,_=S[R],A=_.indexOf(E.lonLat);if(A>-1){let F=(I<0?-1:1)*this.maxLatitude,P=f(180+1e-6*O),D=f(180-1e-6*O),C=b.geodesic([P,I],[P,F],!0);for(let d=P+120*O;d>-180&&d<180;d+=120*O)C.push([d,F]);C.push(...b.geodesic([D,F],[D,E.lat],!0)),_.splice(A,0,...C);break}}}else{let w=L.length;for(;w--;){let R=L[w].i,O=x.splice(R,x.length,[f(180+1e-6*L[w].direction),L[w].lat]);O.unshift([f(180-1e-6*L[w].direction),L[w].lat]),S.push(O)}}return S}path(x){let m,{bounds:E,def:L,rotator:S}=this,w=[],R=x.type==="Polygon"||x.type==="MultiPolygon",O=this.hasGeoProjection,I=!L||L.antimeridianCutting!==!1,_=I?S:void 0,A=I&&L||this;E&&(m=[[E.x1,E.y1],[E.x2,E.y1],[E.x2,E.y2],[E.x1,E.y2]]);let F=P=>{let D=P.map(d=>{if(I){_&&(d=_.forward(d));let g=d[0];1e-6>Math.abs(g-180)&&(g=g<180?179.999999:180.000001),d=[g,d[1]]}return d}),C=[D];O&&(b.insertGeodesics(D),I&&(C=this.cutOnAntimeridian(D,R))),C.forEach(d=>{let g,y;if(d.length<2)return;let M=!1,k=!1,T=X=>{M?w.push(["L",X[0],X[1]]):(w.push(["M",X[0],X[1]]),M=!0)},z=!1,N=!1,G=d.map(X=>{let j=A.forward(X);return j.outside?z=!0:N=!0,j[1]===1/0?j[1]=1e10:j[1]===-1/0&&(j[1]=-1e10),j});if(I){if(R&&G.push(G[0]),z){if(!N)return;if(m){if(R)G=l(G,m);else if(E){n(G,m).forEach(X=>{M=!1,X.forEach(T)});return}}}G.forEach(T)}else for(let X=0;X<G.length;X++){let j=d[X],B=G[X];B.outside?k=!0:(R&&!g&&(g=j,d.push(j),G.push(B)),k&&y&&(R&&O?b.geodesic(y,j).forEach(W=>T(A.forward(W))):M=!1),T(B),y=j,k=!1)}})};return x.type==="LineString"?F(x.coordinates):x.type==="MultiLineString"?x.coordinates.forEach(P=>F(P)):x.type==="Polygon"?(x.coordinates.forEach(P=>F(P)),w.length&&w.push(["Z"])):x.type==="MultiPolygon"&&(x.coordinates.forEach(P=>{P.forEach(D=>F(D))}),w.length&&w.push(["Z"])),w}}return b.registry=s,b}),i(t,"Maps/MapView.js",[t["Core/Globals.js"],t["Maps/MapViewDefaults.js"],t["Maps/GeoJSONComposition.js"],t["Maps/MapUtilities.js"],t["Maps/Projection.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{composed:h}=e,{topo2geo:c}=r,{boundsFromPath:f,pointInPolygon:u}=n,{addEvent:p,clamp:b,crisp:v,fireEvent:x,isArray:m,isNumber:E,isObject:L,isString:S,merge:w,pick:R,pushUnique:O,relativeLength:I}=a,_={};function A(C,d){let{width:g,height:y}=d;return Math.log(400.979322/Math.max((C.x2-C.x1)/(g/256),(C.y2-C.y1)/(y/256)))/Math.log(2)}function F(C){C.seriesOptions.mapData&&this.mapView?.recommendMapView(this,[this.options.chart.map,C.seriesOptions.mapData],this.options.drilldown?.mapZooming)}class P{static compose(d){O(h,"MapView")&&(_=d.maps,p(d,"afterInit",function(){this.mapView=new P(this,this.options.mapView)},{order:0}),p(d,"addSeriesAsDrilldown",F),p(d,"afterDrillUp",F))}static compositeBounds(d){if(d.length)return d.slice(1).reduce((g,y)=>(g.x1=Math.min(g.x1,y.x1),g.y1=Math.min(g.y1,y.y1),g.x2=Math.max(g.x2,y.x2),g.y2=Math.max(g.y2,y.y2),g),w(d[0]))}static mergeInsets(d,g){let y=k=>{let T={};return k.forEach((z,N)=>{T[z&&z.id||`i${N}`]=z}),T},M=w(y(d),y(g));return Object.keys(M).map(k=>M[k])}constructor(d,g){this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],this.recommendedMapView={},this instanceof D||this.recommendMapView(d,[d.options.chart.map,...(d.options.series||[]).map(T=>T.mapData)]),this.userOptions=g||{};let y=w(s,this.recommendedMapView,g),M=this.recommendedMapView?.insets,k=g&&g.insets;M&&k&&(y.insets=P.mergeInsets(M,k)),this.chart=d,this.center=y.center,this.options=y,this.projection=new l(y.projection),this.playingField=d.plotBox,this.zoom=y.zoom||0,this.minZoom=y.minZoom,this.createInsets(),this.eventsToUnbind.push(p(d,"afterSetChartSize",()=>{this.playingField=this.getField(),(this.minZoom===void 0||this.minZoom===this.zoom)&&(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&E(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&w(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){let d=this.options,g=d.insets;g&&g.forEach(y=>{let M=new D(this,w(d.insetOptions,y));this.insets.push(M)})}fitToBounds(d,g,y=!0,M){let k=d||this.getProjectedBounds();if(k){let T=R(g,d?0:this.options.padding),z=this.getField(!1),N=m(T)?T:[T,T,T,T];this.padding=[I(N[0],z.height),I(N[1],z.width),I(N[2],z.height),I(N[3],z.width)],this.playingField=this.getField();let G=A(k,this.playingField);d||(this.minZoom=G);let X=this.projection.inverse([(k.x2+k.x1)/2,(k.y2+k.y1)/2]);this.setView(X,G,y,M)}}getField(d=!0){let g=d?this.padding:[0,0,0,0];return{x:g[3],y:g[0],width:this.chart.plotWidth-g[1]-g[3],height:this.chart.plotHeight-g[0]-g[2]}}getGeoMap(d){if(S(d))return _[d]&&_[d].type==="Topology"?c(_[d]):_[d];if(L(d,!0)){if(d.type==="FeatureCollection")return d;if(d.type==="Topology")return c(d)}}getMapBBox(){let d=this.getProjectedBounds(),g=this.getScale();if(d){let y=this.padding,M=this.projectedUnitsToPixels({x:d.x1,y:d.y2});return{width:(d.x2-d.x1)*g+y[1]+y[3],height:(d.y2-d.y1)*g+y[0]+y[2],x:M.x-y[3],y:M.y-y[0]}}}getProjectedBounds(){let d=this.projection,g=this.chart.series.reduce((M,k)=>{let T=k.getProjectedBounds&&k.getProjectedBounds();return T&&k.options.affectsMapView!==!1&&M.push(T),M},[]),y=this.options.fitToGeometry;if(y){if(!this.fitToGeometryCache)if(y.type==="MultiPoint"){let M=y.coordinates.map(z=>d.forward(z)),k=M.map(z=>z[0]),T=M.map(z=>z[1]);this.fitToGeometryCache={x1:Math.min.apply(0,k),x2:Math.max.apply(0,k),y1:Math.min.apply(0,T),y2:Math.max.apply(0,T)}}else this.fitToGeometryCache=f(d.path(y));return this.fitToGeometryCache}return this.projection.bounds||P.compositeBounds(g)}getScale(){return 256/400.979322*Math.pow(2,this.zoom)}getSVGTransform(){let{x:d,y:g,width:y,height:M}=this.playingField,k=this.projection.forward(this.center),T=this.projection.hasCoordinates?-1:1,z=this.getScale(),N=z*T,G=d+y/2-k[0]*z,X=g+M/2-k[1]*N;return{scaleX:z,scaleY:N,translateX:G,translateY:X}}lonLatToPixels(d){let g=this.lonLatToProjectedUnits(d);if(g)return this.projectedUnitsToPixels(g)}lonLatToProjectedUnits(d){let g=this.chart,y=g.mapTransforms;if(y){for(let k in y)if(Object.hasOwnProperty.call(y,k)&&y[k].hitZone){let T=g.transformFromLatLon(d,y[k]);if(T&&u(T,y[k].hitZone.coordinates[0]))return T}return g.transformFromLatLon(d,y.default)}for(let k of this.insets)if(k.options.geoBounds&&u({x:d.lon,y:d.lat},k.options.geoBounds.coordinates[0])){let T=k.projection.forward([d.lon,d.lat]),z=k.projectedUnitsToPixels({x:T[0],y:T[1]});return this.pixelsToProjectedUnits(z)}let M=this.projection.forward([d.lon,d.lat]);if(!M.outside)return{x:M[0],y:M[1]}}projectedUnitsToLonLat(d){let g=this.chart,y=g.mapTransforms;if(y){for(let T in y)if(Object.hasOwnProperty.call(y,T)&&y[T].hitZone&&u(d,y[T].hitZone.coordinates[0]))return g.transformToLatLon(d,y[T]);return g.transformToLatLon(d,y.default)}let M=this.projectedUnitsToPixels(d);for(let T of this.insets)if(T.hitZone&&u(M,T.hitZone.coordinates[0])){let z=T.pixelsToProjectedUnits(M),N=T.projection.inverse([z.x,z.y]);return{lon:N[0],lat:N[1]}}let k=this.projection.inverse([d.x,d.y]);return{lon:k[0],lat:k[1]}}recommendMapView(d,g,y=!1){this.recommendedMapView={};let M=g.map(z=>this.getGeoMap(z)),k=[];M.forEach(z=>{if(z&&(Object.keys(this.recommendedMapView).length||(this.recommendedMapView=z["hc-recommended-mapview"]||{}),z.bbox)){let[N,G,X,j]=z.bbox;k.push({x1:N,y1:G,x2:X,y2:j})}});let T=k.length&&P.compositeBounds(k);x(this,"onRecommendMapView",{geoBounds:T,chart:d},function(){if(T&&this.recommendedMapView){if(!this.recommendedMapView.projection){let{x1:z,y1:N,x2:G,y2:X}=T;this.recommendedMapView.projection=G-z>180&&X-N>90?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[N,X],rotation:[-(z+G)/2]}}this.recommendedMapView.insets||(this.recommendedMapView.insets=void 0)}}),this.geoMap=M[0],y&&d.hasRendered&&!d.userOptions.mapView?.projection&&this.recommendedMapView&&this.update(this.recommendedMapView)}redraw(d){this.chart.series.forEach(g=>{g.useMapGeometry&&(g.isDirty=!0)}),this.chart.redraw(d)}setView(d,g,y=!0,M){d&&(this.center=d),typeof g=="number"&&(typeof this.minZoom=="number"&&(g=Math.max(g,this.minZoom)),typeof this.options.maxZoom=="number"&&(g=Math.min(g,this.options.maxZoom)),E(g)&&(this.zoom=g));let k=this.getProjectedBounds();if(k){let T=this.projection.forward(this.center),{x:z,y:N,width:G,height:X}=this.playingField,j=this.getScale(),B=this.projectedUnitsToPixels({x:k.x1,y:k.y1}),W=this.projectedUnitsToPixels({x:k.x2,y:k.y2}),V=[(k.x1+k.x2)/2,(k.y1+k.y2)/2];if(!this.chart.series.some(U=>U.isDrilling)){let U=B.x,q=W.y,H=W.x,Y=B.y;H-U<G?T[0]=V[0]:U<z&&H<z+G?T[0]+=Math.max(U-z,H-G-z)/j:H>z+G&&U>z&&(T[0]+=Math.min(H-G-z,U-z)/j),Y-q<X?T[1]=V[1]:q<N&&Y<N+X?T[1]-=Math.max(q-N,Y-X-N)/j:Y>N+X&&q>N&&(T[1]-=Math.min(Y-X-N,q-N)/j),this.center=this.projection.inverse(T)}this.insets.forEach(U=>{U.options.field&&(U.hitZone=U.getHitZone(),U.playingField=U.getField())}),this.render()}x(this,"afterSetView"),y&&this.redraw(M)}projectedUnitsToPixels(d){let g=this.getScale(),y=this.projection.forward(this.center),M=this.playingField,k=M.x+M.width/2,T=M.y+M.height/2;return{x:k-g*(y[0]-d.x),y:T+g*(y[1]-d.y)}}pixelsToLonLat(d){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(d))}pixelsToProjectedUnits(d){let{x:g,y}=d,M=this.getScale(),k=this.projection.forward(this.center),T=this.playingField,z=T.x+T.width/2,N=T.y+T.height/2;return{x:k[0]+(g-z)/M,y:k[1]-(y-N)/M}}setUpEvents(){let d,g,y,{chart:M}=this,k=T=>{let{lastTouches:z,pinchDown:N}=M.pointer,G=this.projection,X=T.touches,{mouseDownX:j,mouseDownY:B}=M,W=0;if(N?.length===1?(j=N[0].chartX,B=N[0].chartY):N?.length===2&&(j=(N[0].chartX+N[1].chartX)/2,B=(N[0].chartY+N[1].chartY)/2),X?.length===2&&z&&(W=Math.log(Math.sqrt(Math.pow(z[0].chartX-z[1].chartX,2)+Math.pow(z[0].chartY-z[1].chartY,2))/Math.sqrt(Math.pow(X[0].chartX-X[1].chartX,2)+Math.pow(X[0].chartY-X[1].chartY,2)))/Math.log(.5)),E(j)&&E(B)){let V=`${j},${B}`,{chartX:U,chartY:q}=T.originalEvent;X?.length===2&&(U=(X[0].chartX+X[1].chartX)/2,q=(X[0].chartY+X[1].chartY)/2),V!==g&&(g=V,d=this.projection.forward(this.center),y=(this.projection.options.rotation||[0,0]).slice());let H=G.def&&G.def.bounds,Y=H&&A(H,this.playingField)||-1/0;if(G.options.name==="Orthographic"&&2>(X?.length||0)&&(this.minZoom||1/0)<1.3*Y){let Z=440/(this.getScale()*Math.min(M.plotWidth,M.plotHeight));if(y){let K=(j-U)*Z-y[0],J=b(-y[1]-(B-q)*Z,-80,80),tt=this.zoom;this.update({projection:{rotation:[-K,-J]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=tt,M.redraw(!1)}}else if(E(U)&&E(q)){let Z=this.getScale(),K=this.projection.hasCoordinates?1:-1,J=this.projection.inverse([d[0]+(j-U)/Z,d[1]-(B-q)/Z*K]);isNaN(J[0]+J[1])||this.zoomBy(W,J,void 0,!1)}T.preventDefault()}};p(M,"pan",k),p(M,"touchpan",k),p(M,"selection",T=>{if(T.resetSelection)this.zoomBy();else{let z=T.x-M.plotLeft,N=T.y-M.plotTop,{y:G,x:X}=this.pixelsToProjectedUnits({x:z,y:N}),{y:j,x:B}=this.pixelsToProjectedUnits({x:z+T.width,y:N+T.height});this.fitToBounds({x1:X,y1:G,x2:B,y2:j},void 0,!0,!T.originalEvent.touches&&void 0),/^touch/.test(T.originalEvent.type)||M.showResetZoom(),T.preventDefault()}})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(d,g=!0,y){let M=d.projection,k=M&&l.toString(M)!==l.toString(this.options.projection),T=!1;w(!0,this.userOptions,d),w(!0,this.options,d),"insets"in d&&(this.insets.forEach(z=>z.destroy()),this.insets.length=0,T=!0),(k||"fitToGeometry"in d)&&delete this.fitToGeometryCache,(k||T)&&(this.chart.series.forEach(z=>{let N=z.transformGroups;if(z.clearBounds&&z.clearBounds(),z.isDirty=!0,z.isDirtyData=!0,T&&N)for(;N.length>1;){let G=N.pop();G&&G.destroy()}}),k&&(this.projection=new l(this.options.projection)),T&&this.createInsets(),!d.center&&Object.hasOwnProperty.call(d,"zoom")&&!E(d.zoom)&&this.fitToBounds(void 0,void 0,!1)),d.center||E(d.zoom)?this.setView(this.options.center,d.zoom,!1):"fitToGeometry"in d&&this.fitToBounds(void 0,void 0,!1),g&&this.chart.redraw(y)}zoomBy(d,g,y,M){let k=this.chart,T=this.projection.forward(this.center);if(typeof d=="number"){let z,N,G,X=this.zoom+d;if(y){let[j,B]=y,W=this.getScale(),V=j-k.plotLeft-k.plotWidth/2,U=B-k.plotTop-k.plotHeight/2;N=T[0]+V/W,G=T[1]+U/W}if(typeof N=="number"&&typeof G=="number"){let j=1-Math.pow(2,this.zoom)/Math.pow(2,X),B=T[0]-N,W=T[1]-G;T[0]-=B*j,T[1]+=W*j,z=this.projection.inverse(T)}this.setView(g||z,X,void 0,M)}else this.fitToBounds(void 0,void 0,void 0,M)}}class D extends P{constructor(d,g){if(super(d.chart,g),this.id=g.id,this.mapView=d,this.options=w({center:[0,0]},d.options.insetOptions,g),this.allBounds=[],this.options.geoBounds){let y=d.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=f(y),this.geoBoundsProjectedPolygon=y.map(M=>[M[1]||0,M[2]||0])}}getField(d=!0){let g=this.hitZone;if(g){let y=d?this.padding:[0,0,0,0],M=g.coordinates[0],k=M.map(j=>j[0]),T=M.map(j=>j[1]),z=Math.min.apply(0,k)+y[3],N=Math.max.apply(0,k)-y[1],G=Math.min.apply(0,T)+y[0],X=Math.max.apply(0,T)-y[2];if(E(z)&&E(G))return{x:z,y:G,width:N-z,height:X-G}}return super.getField.call(this,d)}getHitZone(){let{chart:d,mapView:g,options:y}=this,{coordinates:M}=y.field||{};if(M){let k=M[0];if(y.units==="percent"){let T=y.relativeTo==="mapBoundingBox"&&g.getMapBBox()||w(d.plotBox,{x:0,y:0});k=k.map(z=>[I(`${z[0]}%`,T.width,T.x),I(`${z[1]}%`,T.height,T.y)])}return{type:"Polygon",coordinates:[k]}}}getProjectedBounds(){return P.compositeBounds(this.allBounds)}isInside(d){let{geoBoundsProjectedBox:g,geoBoundsProjectedPolygon:y}=this;return!!(g&&d.x>=g.x1&&d.x<=g.x2&&d.y>=g.y1&&d.y<=g.y2&&y&&u(d,y))}render(){let{chart:d,mapView:g,options:y}=this,M=y.borderPath||y.field;if(M&&g.group){let k=!0;this.border||(this.border=d.renderer.path().addClass("highcharts-mapview-inset-border").add(g.group),k=!1),d.styledMode||this.border.attr({stroke:y.borderColor,"stroke-width":y.borderWidth});let T=this.border.strokeWidth(),z=y.relativeTo==="mapBoundingBox"&&g.getMapBBox()||g.playingField,N=(M.coordinates||[]).reduce((G,X)=>X.reduce((j,B,W)=>{let[V,U]=B;return y.units==="percent"&&(V=d.plotLeft+I(`${V}%`,z.width,z.x),U=d.plotTop+I(`${U}%`,z.height,z.y)),V=v(V,T),U=v(U,T),j.push(W===0?["M",V,U]:["L",V,U]),j},G),[]);this.border[k?"animate":"attr"]({d:N})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(d=>d())}setUpEvents(){}}return P}),i(t,"Series/Map/MapSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/ColorMapComposition.js"],t["Series/CenteredUtilities.js"],t["Core/Globals.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Series/Map/MapSeriesDefaults.js"],t["Maps/MapView.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c,f,u){let{animObject:p,stop:b}=e,{noop:v}=n,{splitPath:x}=l,{column:m,scatter:E}=f.seriesTypes,{extend:L,find:S,fireEvent:w,getNestedProperty:R,isArray:O,defined:I,isNumber:_,isObject:A,merge:F,objectEach:P,pick:D,splat:C}=u;class d extends E{constructor(){super(...arguments),this.processedData=[]}animate(y){let{chart:M,group:k}=this,T=p(this.options.animation);y?k.attr({translateX:M.plotLeft+M.plotWidth/2,translateY:M.plotTop+M.plotHeight/2,scaleX:.001,scaleY:.001}):k.animate({translateX:M.plotLeft,translateY:M.plotTop,scaleX:1,scaleY:1},T)}clearBounds(){this.points.forEach(y=>{delete y.bounds,delete y.insetIndex,delete y.projectedPath}),delete this.bounds}doFullTranslate(){return!!(this.isDirtyData||this.chart.isResizing||!this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}drawPoints(){let y=this,{chart:M,group:k,transformGroups:T=[]}=this,{mapView:z,renderer:N}=M;if(z){this.transformGroups=T,T[0]||(T[0]=N.g().add(k));for(let G=0,X=z.insets.length;G<X;++G)T[G+1]||T.push(N.g().add(k));this.doFullTranslate()&&(this.points.forEach(G=>{let{graphic:X}=G;G.group=T[typeof G.insetIndex=="number"?G.insetIndex+1:0],X&&X.parentGroup!==G.group&&X.add(G.group)}),m.prototype.drawPoints.apply(this),this.points.forEach(G=>{let X=G.graphic;if(X){let j=X.animate,B="";G.name&&(B+="highcharts-name-"+G.name.replace(/ /g,"-").toLowerCase()),G.properties&&G.properties["hc-key"]&&(B+=" highcharts-key-"+G.properties["hc-key"].toString().toLowerCase()),B&&X.addClass(B),M.styledMode&&X.css(this.pointAttribs(G,G.selected&&"select"||void 0)),X.attr({visibility:!G.visible&&(G.visible||G.isNull)?"hidden":"inherit"}),X.animate=function(W,V,U){let q=_(W["stroke-width"])&&!_(X["stroke-width"]),H=_(X["stroke-width"])&&!_(W["stroke-width"]);if(q||H){let Y=D(y.getStrokeWidth(y.options),1)/(M.mapView&&M.mapView.getScale()||1);q&&(X["stroke-width"]=Y),H&&(W["stroke-width"]=Y)}return j.call(X,W,V,H?function(){X.element.removeAttribute("stroke-width"),delete X["stroke-width"],U&&U.apply(this,arguments)}:U)}}})),T.forEach((G,X)=>{let j=(X===0?z:z.insets[X-1]).getSVGTransform(),B=D(this.getStrokeWidth(this.options),1),W=j.scaleX,V=j.scaleY>0?1:-1,U=q=>{(y.points||[]).forEach(H=>{let Y,Z=H.graphic;Z&&Z["stroke-width"]&&(Y=this.getStrokeWidth(H.options))&&Z.attr({"stroke-width":Y/q})})};if(N.globalAnimation&&M.hasRendered&&z.allowTransformAnimation){let q=Number(G.attr("translateX")),H=Number(G.attr("translateY")),Y=Number(G.attr("scaleX")),Z=(tt,$)=>{let Q=Y+(W-Y)*$.pos;G.attr({translateX:q+(j.translateX-q)*$.pos,translateY:H+(j.translateY-H)*$.pos,scaleX:Q,scaleY:Q*V,"stroke-width":B/Q}),U(Q)},K=F(p(N.globalAnimation)),J=K.step;K.step=function(){J&&J.apply(this,arguments),Z.apply(this,arguments)},G.attr({animator:0}).animate({animator:1},K,(function(){typeof N.globalAnimation!="boolean"&&N.globalAnimation.complete&&N.globalAnimation.complete({applyDrilldown:!0}),w(this,"mapZoomComplete")}).bind(this))}else b(G),G.attr(F(j,{"stroke-width":B/W})),U(W)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){let{insets:y,projection:M}=this.chart.mapView,k=[];(this.points||[]).forEach(T=>{if(T.path||T.geometry){if(typeof T.path=="string"?T.path=x(T.path):O(T.path)&&T.path[0]==="M"&&(T.path=this.chart.renderer.pathToSegments(T.path)),!T.bounds){let z=T.getProjectedBounds(M);if(z){T.labelrank=D(T.labelrank,(z.x2-z.x1)*(z.y2-z.y1));let{midX:N,midY:G}=z;if(y&&_(N)&&_(G)){let X=S(y,j=>j.isInside({x:N,y:G}));X&&(delete T.projectedPath,(z=T.getProjectedBounds(X.projection))&&X.allBounds.push(z),T.insetIndex=y.indexOf(X))}T.bounds=z}}T.bounds&&T.insetIndex===void 0&&k.push(T.bounds)}}),this.bounds=c.compositeBounds(k)}return this.bounds}getStrokeWidth(y){let M=this.pointAttrToOptions;return y[M&&M["stroke-width"]||"borderWidth"]}hasData(){return!!this.processedXData.length}pointAttribs(y,M){let{mapView:k,styledMode:T}=y.series.chart,z=T?this.colorAttribs(y):m.prototype.pointAttribs.call(this,y,M),N=this.getStrokeWidth(y.options);if(M){let X=F(this.options.states&&this.options.states[M],y.options.states&&y.options.states[M]||{}),j=this.getStrokeWidth(X);I(j)&&(N=j),z.stroke=X.borderColor??y.color}N&&k&&(N/=k.getScale());let G=this.getStrokeWidth(this.options);return z.dashstyle&&k&&_(G)&&(N=G/k.getScale()),y.visible||(z.fill=this.options.nullColor),I(N)?z["stroke-width"]=N:delete z["stroke-width"],z["stroke-linecap"]=z["stroke-linejoin"]=this.options.linecap,z}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(y,M=!0,k,T){delete this.bounds,super.setData(y,!1,void 0,T),this.processData(),this.generatePoints(),M&&this.chart.redraw(k)}processData(){let y,M,k,T=this.options,z=T.data,N=this.chart,G=N.options.chart,X=this.joinBy,j=T.keys||this.pointArrayMap,B=[],W={},V=this.chart.mapView,U=V&&(A(T.mapData,!0)?V.getGeoMap(T.mapData):V.geoMap),q=N.mapTransforms=G.mapTransforms||U&&U["hc-transform"]||N.mapTransforms;q&&P(q,Y=>{Y.rotation&&(Y.cosAngle=Math.cos(Y.rotation),Y.sinAngle=Math.sin(Y.rotation))}),O(T.mapData)?k=T.mapData:U&&U.type==="FeatureCollection"&&(this.mapTitle=U.title,k=n.geojson(U,this.type,this)),this.processedData=[];let H=this.processedData;if(z){let Y;for(let Z=0,K=z.length;Z<K;++Z){if(_(Y=z[Z]))H[Z]={value:Y};else if(O(Y)){let J=0;H[Z]={},!T.keys&&Y.length>j.length&&typeof Y[0]=="string"&&(H[Z]["hc-key"]=Y[0],++J);for(let tt=0;tt<j.length;++tt,++J)j[tt]&&Y[J]!==void 0&&(j[tt].indexOf(".")>0?a.prototype.setNestedProperty(H[Z],Y[J],j[tt]):H[Z][j[tt]]=Y[J])}else H[Z]=z[Z];X&&X[0]==="_i"&&(H[Z]._i=Z)}}if(k){this.mapData=k,this.mapMap={};for(let Y=0;Y<k.length;Y++)M=(y=k[Y]).properties,y._i=Y,X[0]&&M&&M[X[0]]&&(y[X[0]]=M[X[0]]),W[y[X[0]]]=y;if(this.mapMap=W,X[1]){let Y=X[1];H.forEach(Z=>{let K=R(Y,Z);W[K]&&B.push(W[K])})}if(T.allAreas){if(X[1]){let Z=X[1];H.forEach(K=>{B.push(R(Z,K))})}let Y="|"+B.map(function(Z){return Z&&Z[X[0]]}).join("|")+"|";k.forEach(Z=>{X[0]&&Y.indexOf("|"+Z[X[0]]+"|")!==-1||H.push(F(Z,{value:null}))})}}this.processedXData=Array(H.length)}setOptions(y){let M=super.setOptions(y),k=M.joinBy;return M.joinBy===null&&(k="_i"),(k=this.joinBy=C(k))[1]||(k[1]=k[0]),M}translate(){let y=this.doFullTranslate(),M=this.chart.mapView,k=M&&M.projection;if(this.chart.hasRendered&&(this.isDirtyData||!this.hasRendered)&&(this.processData(),this.generatePoints(),delete this.bounds,!M||M.userOptions.center||_(M.userOptions.zoom)||M.zoom!==M.minZoom?this.getProjectedBounds():M.fitToBounds(void 0,void 0,!1)),M){let T=M.getSVGTransform();this.points.forEach(z=>{let N=_(z.insetIndex)&&M.insets[z.insetIndex].getSVGTransform()||T;N&&z.bounds&&_(z.bounds.midX)&&_(z.bounds.midY)&&(z.plotX=z.bounds.midX*N.scaleX+N.translateX,z.plotY=z.bounds.midY*N.scaleY+N.translateY),y&&(z.shapeType="path",z.shapeArgs={d:a.getProjectedPath(z,k)}),z.hiddenInDataClass||(z.projectedPath&&!z.projectedPath.length?z.setVisible(!1):z.visible||z.setVisible(!0))})}w(this,"afterTranslate")}update(y){y.mapData&&this.chart.mapView?.recommendMapView(this.chart,[this.chart.options.chart.map,...(this.chart.options.series||[]).map((M,k)=>k===this._i?y.mapData:M.mapData)],!0),super.update.apply(this,arguments)}}return d.defaultOptions=F(E.defaultOptions,h),L(d.prototype,{type:"map",axisTypes:s.seriesMembers.axisTypes,colorAttribs:s.seriesMembers.colorAttribs,colorKey:s.seriesMembers.colorKey,directTouch:!0,drawDataLabels:v,drawGraph:v,forceDL:!0,getCenter:r.getCenter,getExtremesFromAll:!0,getSymbol:v,isCartesian:!1,parallelArrays:s.seriesMembers.parallelArrays,pointArrayMap:s.seriesMembers.pointArrayMap,pointClass:a,preserveAspectRatio:!0,searchPoint:v,trackerGroups:s.seriesMembers.trackerGroups,useMapGeometry:!0}),s.compose(d),f.registerSeriesType("map",d),d}),i(t,"Series/MapLine/MapLineSeriesDefaults.js",[],function(){return{lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"}}),i(t,"Series/MapLine/MapLineSeries.js",[t["Series/MapLine/MapLineSeriesDefaults.js"],t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{extend:l,merge:a}=n;class h extends s{pointAttribs(f,u){let p=super.pointAttribs(f,u);return p.fill=this.options.fillColor,p}}return h.defaultOptions=a(s.defaultOptions,e),l(h.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),r.registerSeriesType("mapline",h),h}),i(t,"Series/MapPoint/MapPointPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s){let{scatter:r}=e.seriesTypes,{isNumber:n}=s;class l extends r.prototype.pointClass{isValid(){return!!(this.options.geometry||n(this.x)&&n(this.y)||n(this.options.lon)&&n(this.options.lat))}}return l}),i(t,"Series/MapPoint/MapPointSeriesDefaults.js",[],function(){return{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"}}),i(t,"Series/MapPoint/MapPointSeries.js",[t["Core/Globals.js"],t["Series/MapPoint/MapPointPoint.js"],t["Series/MapPoint/MapPointSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{noop:h}=e,{map:c,scatter:f}=n.seriesTypes,{extend:u,fireEvent:p,isNumber:b,merge:v}=a;class x extends f{constructor(){super(...arguments),this.clearBounds=c.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}projectPoint(E){let L=this.chart.mapView;if(L){let{geometry:S,lon:w,lat:R}=E,O=S&&S.type==="Point"&&S.coordinates;if(b(w)&&b(R)&&(O=[w,R]),O)return L.lonLatToProjectedUnits({lon:O[0],lat:O[1]})}}translate(){let E=this.chart.mapView;if(this.processedXData||this.processData(),this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),E){let L=E.getSVGTransform(),{hasCoordinates:S}=E.projection;this.points.forEach(w=>{let R,{x:O,y:I}=w,_=b(w.insetIndex)&&E.insets[w.insetIndex].getSVGTransform()||L,A=this.projectPoint(w.options)||w.properties&&this.projectPoint(w.properties);if(A?(O=A.x,I=A.y):w.bounds&&(O=w.bounds.midX,I=w.bounds.midY,_&&b(O)&&b(I)&&(w.plotX=O*_.scaleX+_.translateX,w.plotY=I*_.scaleY+_.translateY,R=!0)),b(O)&&b(I)){if(!R){let F=E.projectedUnitsToPixels({x:O,y:I});w.plotX=F.x,w.plotY=S?F.y:this.chart.plotHeight-F.y}}else w.y=w.plotX=w.plotY=void 0;w.isInside=this.isPointInside(w),w.zone=this.zones.length?w.getZone():void 0})}p(this,"afterTranslate")}}return x.defaultOptions=v(f.defaultOptions,r),l.prototype.symbols.mapmarker=(m,E,L,S,w)=>{let R,O,I=w&&w.context==="legend";I?(R=m+L/2,O=E+S):w&&typeof w.anchorX=="number"&&typeof w.anchorY=="number"?(R=w.anchorX,O=w.anchorY):(R=m+L/2,O=E+S/2,E-=S);let _=I?S/3:S/2;return[["M",R,O],["C",R,O,R-_,E+1.5*_,R-_,E+_],["A",_,_,1,1,1,R+_,E+_],["C",R+_,E+1.5*_,R,O,R,O],["Z"]]},u(x.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:s,searchPoint:h,useMapGeometry:!0}),n.registerSeriesType("mappoint",x),x}),i(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),i(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{parse:l}=e,{noop:a}=r,{arrayMax:h,arrayMin:c,isNumber:f,merge:u,pick:p,stableSort:b}=n;return class{constructor(v,x){this.setState=a,this.init(v,x)}init(v,x){this.options=v,this.visible=!0,this.chart=x.chart,this.legend=x}addToLegend(v){v.splice(this.options.legendIndex,0,this)}drawLegendSymbol(v){let x,m=p(v.options.itemDistance,20),E=this.legendItem||{},L=this.options,S=L.ranges,w=L.connectorDistance;if(!S||!S.length||!f(S[0].value)){v.options.bubbleLegend.autoRanges=!0;return}b(S,function(_,A){return A.value-_.value}),this.ranges=S,this.setOptions(),this.render();let R=this.getMaxLabelSize(),O=this.ranges[0].radius,I=2*O;x=(x=w-O+R.width)>0?x:0,this.maxLabel=R,this.movementX=L.labels.align==="left"?x:0,E.labelWidth=I+x+m,E.labelHeight=I+R.height/2}setOptions(){let v=this.ranges,x=this.options,m=this.chart.series[x.seriesIndex],E=this.legend.baseline,L={zIndex:x.zIndex,"stroke-width":x.borderWidth},S={zIndex:x.zIndex,"stroke-width":x.connectorWidth},w={align:this.legend.options.rtl||x.labels.align==="left"?"right":"left",zIndex:x.zIndex},R=m.options.marker.fillOpacity,O=this.chart.styledMode;v.forEach(function(I,_){O||(L.stroke=p(I.borderColor,x.borderColor,m.color),L.fill=p(I.color,x.color,R!==1?l(m.color).setOpacity(R).get("rgba"):m.color),S.stroke=p(I.connectorColor,x.connectorColor,m.color)),v[_].radius=this.getRangeRadius(I.value),v[_]=u(v[_],{center:v[0].radius-v[_].radius+E}),O||u(!0,v[_],{bubbleAttribs:u(L),connectorAttribs:u(S),labelAttribs:w})},this)}getRangeRadius(v){let x=this.options,m=this.options.seriesIndex,E=this.chart.series[m],L=x.ranges[0].value,S=x.ranges[x.ranges.length-1].value,w=x.minSize,R=x.maxSize;return E.getRadius.call(this,S,L,w,R,v)}render(){let v=this.legendItem||{},x=this.chart.renderer,m=this.options.zThreshold;for(let E of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),v.symbol=x.g("bubble-legend"),v.label=x.g("bubble-legend-item").css(this.legend.itemStyle||{}),v.symbol.translateX=0,v.symbol.translateY=0,v.symbol.add(v.label),v.label.add(v.group),this.ranges))E.value>=m&&this.renderRange(E);this.hideOverlappingLabels()}renderRange(v){let x=this.ranges[0],m=this.legend,E=this.options,L=E.labels,S=this.chart,w=S.series[E.seriesIndex],R=S.renderer,O=this.symbols,I=O.labels,_=v.center,A=Math.abs(v.radius),F=E.connectorDistance||0,P=L.align,D=m.options.rtl,C=E.borderWidth,d=E.connectorWidth,g=x.radius||0,y=_-A-C/2+d/2,M=(y%1?1:.5)-(d%2?0:.5),k=R.styledMode,T=D||P==="left"?-F:F;P==="center"&&(T=0,E.connectorDistance=0,v.labelAttribs.align="center"),O.bubbleItems.push(R.circle(g,_+M,A).attr(k?{}:v.bubbleAttribs).addClass((k?"highcharts-color-"+w.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(E.className||"")).add(this.legendItem.symbol)),O.connectors.push(R.path(R.crispLine([["M",g,y],["L",g+T,y]],E.connectorWidth)).attr(k?{}:v.connectorAttribs).addClass((k?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(E.connectorClassName||"")).add(this.legendItem.symbol));let z=R.text(this.formatLabel(v)).attr(k?{}:v.labelAttribs).css(k?{}:L.style).addClass("highcharts-bubble-legend-labels "+(E.labels.className||"")).add(this.legendItem.symbol),N={x:g+T+E.labels.x,y:y+E.labels.y+.4*z.getBBox().height};z.attr(N),I.push(z),z.placed=!0,z.alignAttr=N}getMaxLabelSize(){let v,x;return this.symbols.labels.forEach(function(m){x=m.getBBox(!0),v=v?x.width>v.width?x:v:x}),v||{}}formatLabel(v){let x=this.options,m=x.labels.formatter,E=x.labels.format,{numberFormatter:L}=this.chart;return E?s.format(E,v):m?m.call(v):L(v.value,1)}hideOverlappingLabels(){let v=this.chart,x=this.options.labels.allowOverlap,m=this.symbols;!x&&m&&(v.hideOverlappingLabels(m.labels),m.labels.forEach(function(E,L){E.newOpacity?E.newOpacity!==E.oldOpacity&&m.connectors[L].show():m.connectors[L].hide()}))}getRanges(){let v=this.legend.bubbleLegend,x=v.chart.series,m=v.options.ranges,E,L,S=Number.MAX_VALUE,w=-Number.MAX_VALUE;return x.forEach(function(R){R.isBubble&&!R.ignoreSeries&&(L=R.zData.filter(f)).length&&(S=p(R.options.zMin,Math.min(S,Math.max(c(L),R.options.displayNegative===!1?R.options.zThreshold:-Number.MAX_VALUE))),w=p(R.options.zMax,Math.max(w,h(L))))}),E=S===w?[{value:w}]:[{value:S},{value:(S+w)/2},{value:w,autoRanges:!0}],m.length&&m[0].radius&&E.reverse(),E.forEach(function(R,O){m&&m[O]&&(E[O]=u(m[O],R))}),E}predictBubbleSizes(){let v=this.chart,x=v.legend.options,m=x.floating,E=x.layout==="horizontal",L=E?v.legend.lastLineHeight:0,S=v.plotSizeX,w=v.plotSizeY,R=v.series[this.options.seriesIndex],O=R.getPxExtremes(),I=Math.ceil(O.minPxSize),_=Math.ceil(O.maxPxSize),A,F=R.options.maxSize;return m||!/%$/.test(F)?A=_:(A=(Math.min(w,S)+L)*(F=parseFloat(F))/100/(F/100+1),(E&&w-A>=S||!E&&S-A>=w)&&(A=_)),[I,Math.ceil(A)]}updateRanges(v,x){let m=this.legend.options.bubbleLegend;m.minSize=v,m.maxSize=x,m.ranges=this.getRanges()}correctSizes(){let v=this.legend,x=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(x.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,x.maxPxSize),v.render())}}}),i(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r,n,l){let{setOptions:a}=r,{composed:h}=n,{addEvent:c,objectEach:f,pushUnique:u,wrap:p}=l;function b(S,w,R){let O,I,_,A=this.legend,F=v(this)>=0;A&&A.options.enabled&&A.bubbleLegend&&A.options.bubbleLegend.autoRanges&&F?(O=A.bubbleLegend.options,I=A.bubbleLegend.predictBubbleSizes(),A.bubbleLegend.updateRanges(I[0],I[1]),O.placed||(A.group.placed=!1,A.allItems.forEach(P=>{(_=P.legendItem||{}).group&&(_.group.translateY=void 0)})),A.render(),O.placed||(this.getMargins(),this.axes.forEach(function(P){P.visible&&P.render(),O.placed||(P.setScale(),P.updateNames(),f(P.ticks,function(D){D.isNew=!0,D.isNewLabel=!0}))}),this.getMargins()),O.placed=!0,S.call(this,w,R),A.bubbleLegend.correctSizes(),L(A,x(A))):(S.call(this,w,R),A&&A.options.enabled&&A.bubbleLegend&&(A.render(),L(A,x(A))))}function v(S){let w=S.series,R=0;for(;R<w.length;){if(w[R]&&w[R].isBubble&&w[R].visible&&w[R].zData.length)return R;R++}return-1}function x(S){let w=S.allItems,R=[],O=w.length,I,_,A,F=0,P=0;for(F=0;F<O;F++)if(_=w[F].legendItem||{},A=(w[F+1]||{}).legendItem||{},_.labelHeight&&(w[F].itemHeight=_.labelHeight),w[F]===w[O-1]||_.y!==A.y){for(R.push({height:0}),I=R[R.length-1];P<=F;P++)w[P].itemHeight>I.height&&(I.height=w[P].itemHeight);I.step=F}return R}function m(S){let w=this.bubbleLegend,R=this.options,O=R.bubbleLegend,I=v(this.chart);w&&w.ranges&&w.ranges.length&&(O.ranges.length&&(O.autoRanges=!!O.ranges[0].autoRanges),this.destroyItem(w)),I>=0&&R.enabled&&O.enabled&&(O.seriesIndex=I,this.bubbleLegend=new s(O,this),this.bubbleLegend.addToLegend(S.allItems))}function E(S){let w;if(S.defaultPrevented)return!1;let R=this.chart,O=this.visible,I=this.chart.legend;I&&I.bubbleLegend&&(this.visible=!O,this.ignoreSeries=O,w=v(R)>=0,I.bubbleLegend.visible!==w&&(I.update({bubbleLegend:{enabled:w}}),I.bubbleLegend.visible=w),this.visible=O)}function L(S,w){let R=S.allItems,O=S.options.rtl,I,_,A,F,P=0;R.forEach((D,C)=>{(F=D.legendItem||{}).group&&(I=F.group.translateX||0,_=F.y||0,((A=D.movementX)||O&&D.ranges)&&(A=O?I-D.options.maxSize/2:I+A,F.group.attr({translateX:A})),C>w[P].step&&P++,F.group.attr({translateY:Math.round(_+w[P].height/2)}),F.y=_+w[P].height/2)})}return{compose:function(S,w,R){u(h,"Series.BubbleLegend")&&(a({legend:{bubbleLegend:e}}),p(S.prototype,"drawChartBox",b),c(w,"afterGetAllItems",m),c(R,"legendItemClick",E))}}}),i(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{seriesTypes:{scatter:{prototype:{pointClass:n}}}}=s,{extend:l}=r;class a extends n{haloPath(c){return e.prototype.haloPath.call(this,c===0?0:(this.marker&&this.marker.radius||0)+c)}}return l(a.prototype,{ttBelow:!1}),a}),i(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{parse:h}=r,{composed:c,noop:f}=n,{series:u,seriesTypes:{column:{prototype:p},scatter:b}}=l,{addEvent:v,arrayMax:x,arrayMin:m,clamp:E,extend:L,isNumber:S,merge:w,pick:R,pushUnique:O}=a;function I(){let A=this.len,{coll:F,isXAxis:P,min:D}=this,C=P?"xData":"yData",d=(this.max||0)-(D||0),g=0,y=A,M=A/d,k;(F==="xAxis"||F==="yAxis")&&(this.series.forEach(T=>{if(T.bubblePadding&&T.reserveSpace()){this.allowZoomOutside=!0,k=!0;let z=T[C];if(P&&((T.onPoint||T).getRadii(0,0,T),T.onPoint&&(T.radii=T.onPoint.radii)),d>0){let N=z.length;for(;N--;)if(S(z[N])&&this.dataMin<=z[N]&&z[N]<=this.max){let G=T.radii&&T.radii[N]||0;g=Math.min((z[N]-D)*M-G,g),y=Math.max((z[N]-D)*M+G,y)}}}}),k&&d>0&&!this.logarithmic&&(y-=A,M*=(A+Math.max(0,g)-Math.min(y,A))/A,[["min","userMin",g],["max","userMax",y]].forEach(T=>{R(this.options[T[0]],this[T[1]])===void 0&&(this[T[0]]+=T[2]/M)})))}class _ extends b{static compose(F,P,D,C){e.compose(P,D,C),O(c,"Series.Bubble")&&v(F,"foundExtremes",I)}animate(F){!F&&this.points.length<this.options.animationLimit&&this.points.forEach(function(P){let{graphic:D,plotX:C=0,plotY:d=0}=P;D&&D.width&&(this.hasRendered||D.attr({x:C,y:d,width:1,height:1}),D.animate(this.markerAttribs(P),this.options.animation))},this)}getRadii(){let F=this.zData,P=this.yData,D=[],C,d,g,y=this.chart.bubbleZExtremes,{minPxSize:M,maxPxSize:k}=this.getPxExtremes();if(!y){let T,z=Number.MAX_VALUE,N=-Number.MAX_VALUE;this.chart.series.forEach(G=>{if(G.bubblePadding&&G.reserveSpace()){let X=(G.onPoint||G).getZExtremes();X&&(z=Math.min(R(z,X.zMin),X.zMin),N=Math.max(R(N,X.zMax),X.zMax),T=!0)}}),T?(y={zMin:z,zMax:N},this.chart.bubbleZExtremes=y):y={zMin:0,zMax:0}}for(d=0,C=F.length;d<C;d++)g=F[d],D.push(this.getRadius(y.zMin,y.zMax,M,k,g,P&&P[d]));this.radii=D}getRadius(F,P,D,C,d,g){let y=this.options,M=y.sizeBy!=="width",k=y.zThreshold,T=P-F,z=.5;if(g===null||d===null)return null;if(S(d)){if(y.sizeByAbsoluteValue&&(d=Math.abs(d-k),P=T=Math.max(P-k,Math.abs(F-k)),F=0),d<F)return D/2-1;T>0&&(z=(d-F)/T)}return M&&z>=0&&(z=Math.sqrt(z)),Math.ceil(D+z*(C-D))/2}hasData(){return!!this.processedXData.length}markerAttribs(F,P){let D=super.markerAttribs(F,P),{height:C=0,width:d=0}=D;return this.chart.inverted?L(D,{x:(F.plotX||0)-d/2,y:(F.plotY||0)-C/2}):D}pointAttribs(F,P){let D=this.options.marker.fillOpacity,C=u.prototype.pointAttribs.call(this,F,P);return D!==1&&(C.fill=h(C.fill).setOpacity(D).get("rgba")),C}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:F,options:P,radii:D}=this,{minPxSize:C}=this.getPxExtremes(),d=F.length;for(;d--;){let g=F[d],y=D?D[d]:0;this.zoneAxis==="z"&&(g.negative=(g.z||0)<(P.zThreshold||0)),S(y)&&y>=C/2?(g.marker=L(g.marker,{radius:y,width:2*y,height:2*y}),g.dlBox={x:g.plotX-y,y:g.plotY-y,width:2*y,height:2*y}):(g.shapeArgs=g.plotY=g.dlBox=void 0,g.isInside=!1)}}getPxExtremes(){let F=Math.min(this.chart.plotWidth,this.chart.plotHeight),P=d=>{let g;return typeof d=="string"&&(g=/%$/.test(d),d=parseInt(d,10)),g?F*d/100:d},D=P(R(this.options.minSize,8)),C=Math.max(P(R(this.options.maxSize,"20%")),D);return{minPxSize:D,maxPxSize:C}}getZExtremes(){let F=this.options,P=(this.zData||[]).filter(S);if(P.length){let D=R(F.zMin,E(m(P),F.displayNegative===!1?F.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),C=R(F.zMax,x(P));if(S(D)&&S(C))return{zMin:D,zMax:C}}}}return _.defaultOptions=w(b.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:A}=this.series.chart,{z:F}=this.point;return S(F)?A(F,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),L(_.prototype,{alignDataLabel:p.alignDataLabel,applyZones:f,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:s,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),v(_,"updatedData",A=>{delete A.target.chart.bubbleZExtremes}),v(_,"remove",A=>{delete A.target.chart.bubbleZExtremes}),l.registerSeriesType("bubble",_),_}),i(t,"Series/MapBubble/MapBubblePoint.js",[t["Series/Bubble/BubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{seriesTypes:{map:{prototype:{pointClass:{prototype:n}}}}}=s,{extend:l}=r;class a extends e{isValid(){return typeof this.z=="number"}}return l(a.prototype,{applyOptions:n.applyOptions,getProjectedBounds:n.getProjectedBounds}),a}),i(t,"Series/MapBubble/MapBubbleSeries.js",[t["Series/Bubble/BubbleSeries.js"],t["Series/MapBubble/MapBubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{seriesTypes:{map:{prototype:l},mappoint:{prototype:a}}}=r,{extend:h,merge:c}=n;class f extends e{constructor(){super(...arguments),this.clearBounds=l.clearBounds}searchPoint(p,b){return this.searchKDTree({plotX:p.chartX-this.chart.plotLeft,plotY:p.chartY-this.chart.plotTop},b,p)}translate(){a.translate.call(this),this.getRadii(),this.translateBubble()}updateParallelArrays(p,b,v){super.updateParallelArrays.call(this,p,b,v);let x=this.processedXData,m=this.xData;x&&m&&(x.length=m.length)}}return f.defaultOptions=c(e.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),h(f.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:l.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:s,processData:l.processData,projectPoint:a.projectPoint,kdAxisArray:["plotX","plotY"],setData:l.setData,setOptions:l.setOptions,updateData:l.updateData,useMapGeometry:!0,xyFromShape:!0}),r.registerSeriesType("mapbubble",f),f}),i(t,"Series/Heatmap/HeatmapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s){let{scatter:{prototype:{pointClass:r}}}=e.seriesTypes,{clamp:n,defined:l,extend:a,pick:h}=s;class c extends r{applyOptions(u,p){return(this.isNull||this.value===null)&&delete this.color,super.applyOptions(u,p),this.formatPrefix=this.isNull||this.value===null?"null":"point",this}getCellAttributes(){let u=this.series,p=u.options,b=(p.colsize||1)/2,v=(p.rowsize||1)/2,x=u.xAxis,m=u.yAxis,E=this.options.marker||u.options.marker,L=u.pointPlacementToXValue(),S=h(this.pointPadding,p.pointPadding,0),w={x1:n(Math.round(x.len-x.translate(this.x-b,!1,!0,!1,!0,-L)),-x.len,2*x.len),x2:n(Math.round(x.len-x.translate(this.x+b,!1,!0,!1,!0,-L)),-x.len,2*x.len),y1:n(Math.round(m.translate(this.y-v,!1,!0,!1,!0)),-m.len,2*m.len),y2:n(Math.round(m.translate(this.y+v,!1,!0,!1,!0)),-m.len,2*m.len)};for(let R of[["width","x"],["height","y"]]){let O=R[0],I=R[1],_=I+"1",A=I+"2",F=Math.abs(w[_]-w[A]),P=E&&E.lineWidth||0,D=Math.abs(w[_]+w[A])/2,C=E&&E[O];if(l(C)&&C<F){let d=C/2+P/2;w[_]=D-d,w[A]=D+d}S&&((I==="x"&&x.reversed||I==="y"&&!m.reversed)&&(_=A,A=I+"1"),w[_]+=S,w[A]-=S)}return w}haloPath(u){if(!u)return[];let{x:p=0,y:b=0,width:v=0,height:x=0}=this.shapeArgs||{};return[["M",p-u,b-u],["L",p-u,b+x+u],["L",p+v+u,b+x+u],["L",p+v+u,b-u],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}return a(c.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),c}),i(t,"Series/Heatmap/HeatmapSeriesDefaults.js",[t["Core/Utilities.js"]],function(e){let{isNumber:s}=e;return{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:n}=this.point;return s(n)?r(n,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}}),i(t,"Series/InterpolationUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){let{doc:r}=e,{defined:n,pick:l}=s;return{colorFromPoint:function(a,h){let c=h.series.colorAxis;if(c){let f=c.toColor(a||0,h).split(")")[0].split("(")[1].split(",").map(u=>l(parseFloat(u),parseInt(u,10)));return f[3]=255*l(f[3],1),n(a)&&h.visible||(f[3]=0),f}return[0,0,0,0]},getContext:function(a){let{canvas:h,context:c}=a;return h&&c?(c.clearRect(0,0,h.width,h.height),c):(a.canvas=r.createElement("canvas"),a.context=a.canvas.getContext("2d",{willReadFrequently:!0})||void 0,a.context)}}}),i(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Series/Heatmap/HeatmapSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"],t["Series/InterpolationUtilities.js"]],function(e,s,r,n,l,a,h,c){let{series:f,seriesTypes:{column:u,scatter:p}}=l,{prototype:{symbols:b}}=a,{addEvent:v,extend:x,fireEvent:m,isNumber:E,merge:L,pick:S}=h,{colorFromPoint:w,getContext:R}=c;class O extends p{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let _=this,A=_.options,F=A.interpolation,P=A.marker||{};if(F){let{image:D,chart:C,xAxis:d,yAxis:g}=_,{reversed:y=!1,len:M}=d,{reversed:k=!1,len:T}=g,z={width:M,height:T};if(!D||_.isDirtyData||_.isDirtyCanvas){let N=R(_),{canvas:G,options:{colsize:X=1,rowsize:j=1},points:B,points:{length:W}}=_,V=C.colorAxis&&C.colorAxis[0];if(G&&N&&V){let{min:U,max:q}=d.getExtremes(),{min:H,max:Y}=g.getExtremes(),Z=q-U,K=Y-H,J=Math.round(Z/X/8*8),tt=Math.round(K/j/8*8),[$,Q]=[[J,J/Z,y,"ceil"],[tt,tt/K,!k,"floor"]].map(([ot,at,ct,ht])=>ct?lt=>Math[ht](ot-at*lt):lt=>Math[ht](at*lt)),et=G.width=J+1,it=et*(G.height=tt+1),st=(W-1)/it,rt=new Uint8ClampedArray(4*it),nt=(ot,at)=>4*Math.ceil(et*Q(at-H)+$(ot-U));_.buildKDTree();for(let ot=0;ot<it;ot++){let at=B[Math.ceil(st*ot)],{x:ct,y:ht}=at;rt.set(w(at.value,at),nt(ct,ht))}N.putImageData(new ImageData(rt,et),0,0),D?D.attr(ns(Se({},z),{href:G.toDataURL("image/png",1)})):(_.directTouch=!1,_.image=C.renderer.image(G.toDataURL("image/png",1)).attr(z).add(_.group))}_.isDirtyCanvas=!1}else(D.width!==M||D.height!==T)&&D.attr(z)}else(P.enabled||_._hasPointMarkers)&&(f.prototype.drawPoints.call(_),_.points.forEach(D=>{D.graphic&&(D.graphic[_.chart.styledMode?"css":"animate"](_.colorAttribs(D)),D.value===null&&D.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:_,dataMax:A}=f.prototype.getExtremes.call(this,this.valueData);return E(_)&&(this.valueMin=_),E(A)&&(this.valueMax=A),f.prototype.getExtremes.call(this)}getValidPoints(_,A){return f.prototype.getValidPoints.call(this,_,A,!0)}hasData(){return!!this.processedXData.length}init(){super.init.apply(this,arguments);let _=this.options;_.pointRange=S(_.pointRange,_.colsize||1),this.yAxis.axisPointRange=_.rowsize||1,b.ellipse=b.circle,_.marker&&E(_.borderRadius)&&(_.marker.r=_.borderRadius)}markerAttribs(_,A){let F=_.shapeArgs||{};if(_.hasImage)return{x:_.plotX,y:_.plotY};if(A&&A!=="normal"){let P=_.options.marker||{},D=this.options.marker||{},C=D.states&&D.states[A]||{},d=P.states&&P.states[A]||{},g=(d.width||C.width||F.width||0)+(d.widthPlus||C.widthPlus||0),y=(d.height||C.height||F.height||0)+(d.heightPlus||C.heightPlus||0);return{x:(F.x||0)+((F.width||0)-g)/2,y:(F.y||0)+((F.height||0)-y)/2,width:g,height:y}}return F}pointAttribs(_,A){let F=f.prototype.pointAttribs.call(this,_,A),P=this.options||{},D=this.chart.options.plotOptions||{},C=D.series||{},d=D.heatmap||{},g=_&&_.options.borderColor||P.borderColor||d.borderColor||C.borderColor,y=_&&_.options.borderWidth||P.borderWidth||d.borderWidth||C.borderWidth||F["stroke-width"];if(F.stroke=_&&_.marker&&_.marker.lineColor||P.marker&&P.marker.lineColor||g||this.color,F["stroke-width"]=y,A&&A!=="normal"){let M=L(P.states&&P.states[A],P.marker&&P.marker.states&&P.marker.states[A],_&&_.options.states&&_.options.states[A]||{});F.fill=M.color||e.parse(F.fill).brighten(M.brightness||0).get(),F.stroke=M.lineColor||F.stroke}return F}translate(){let{borderRadius:_,marker:A}=this.options,F=A&&A.symbol||"rect",P=b[F]?F:"rect",D=["circle","square"].indexOf(P)!==-1;for(let C of(this.generatePoints(),this.points)){let d=C.getCellAttributes(),g=Math.min(d.x1,d.x2),y=Math.min(d.y1,d.y2),M=Math.max(Math.abs(d.x2-d.x1),0),k=Math.max(Math.abs(d.y2-d.y1),0);if(C.hasImage=(C.marker&&C.marker.symbol||F||"").indexOf("url")===0,D){let T=Math.abs(M-k);g=Math.min(d.x1,d.x2)+(M<k?0:T/2),y=Math.min(d.y1,d.y2)+(M<k?T/2:0),M=k=Math.min(M,k)}C.hasImage&&(C.marker={width:M,height:k}),C.plotX=C.clientX=(d.x1+d.x2)/2,C.plotY=(d.y1+d.y2)/2,C.shapeType="path",C.shapeArgs=L(!0,{x:g,y,width:M,height:k},{d:b[P](g,y,M,k,{r:E(_)?_:0})})}m(this,"afterTranslate")}}return O.defaultOptions=L(p.defaultOptions,n),v(O,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),x(O.prototype,{axisTypes:s.seriesMembers.axisTypes,colorKey:s.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:s.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:r,specialGroup:"group",trackerGroups:s.seriesMembers.trackerGroups,alignDataLabel:u.prototype.alignDataLabel,colorAttribs:s.seriesMembers.colorAttribs,getSymbol:f.prototype.getSymbol}),s.compose(O),l.registerSeriesType("heatmap",O),O}),i(t,"masters/modules/map.src.js",[t["Core/Globals.js"],t["Maps/MapNavigation.js"],t["Series/ColorMapComposition.js"],t["Series/MapBubble/MapBubbleSeries.js"],t["Maps/GeoJSONComposition.js"],t["Core/Chart/MapChart.js"],t["Maps/MapView.js"],t["Maps/Projection.js"]],function(e,s,r,n,l,a,h,c){return e.ColorMapComposition=r,e.MapChart=e.MapChart||a,e.MapNavigation=e.MapNavigation||s,e.MapView=e.MapView||h,e.Projection=e.Projection||c,e.mapChart=e.Map=e.MapChart.mapChart,e.maps=e.MapChart.maps,e.geojson=l.geojson,e.topo2geo=l.topo2geo,l.compose(e.Chart),n.compose(e.Axis,e.Chart,e.Legend,e.Series),s.compose(a,e.Pointer,e.SVGRenderer),h.compose(a),e})})});var Hu=oi((iA,lo)=>{"use strict";(function(o){typeof lo=="object"&&lo.exports?(o.default=o,lo.exports=o):typeof define=="function"&&define.amd?define("highcharts/highcharts-more",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function i(e,s,r,n){e.hasOwnProperty(s)||(e[s]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:e[s]}})))}i(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(e){let{addEvent:s,correctFloat:r,defined:n,pick:l}=e;function a(p){let b,v=this;return p&&v.pane.forEach(x=>{h(p.chartX-v.plotLeft,p.chartY-v.plotTop,x.center)&&(b=x)}),b}function h(p,b,v,x,m){let E=!0,L=v[0],S=v[1];if(n(x)&&n(m)){let w=Math.atan2(r(b-S,8),r(p-L,8));m!==x&&(E=x>m?w>=x&&w<=Math.PI||w<=m&&w>=-Math.PI:w>=x&&w<=r(m,8))}return Math.sqrt(Math.pow(p-L,2)+Math.pow(b-S,2))<=Math.ceil(v[2]/2)&&E}function c(p){this.polar&&(p.options.inverted&&([p.x,p.y]=[p.y,p.x]),p.isInsidePlot=this.pane.some(b=>h(p.x,p.y,b.center,b.axis&&b.axis.normalizedStartAngleRad,b.axis&&b.axis.normalizedEndAngleRad)))}function f(p){let b=this.chart;p.hoverPoint&&p.hoverPoint.plotX&&p.hoverPoint.plotY&&b.hoverPane&&!h(p.hoverPoint.plotX,p.hoverPoint.plotY,b.hoverPane.center)&&(p.hoverPoint=void 0)}function u(p){let b=this.chart;b.polar?(b.hoverPane=b.getHoverPane(p),p.filter=function(v){return v.visible&&!(!p.shared&&v.directTouch)&&l(v.options.enableMouseTracking,!0)&&(!b.hoverPane||v.xAxis.pane===b.hoverPane)}):b.hoverPane=void 0}return{compose:function(p,b){let v=p.prototype;v.getHoverPane||(v.collectionsWithUpdate.push("pane"),v.getHoverPane=a,s(p,"afterIsInsidePlot",c),s(b,"afterGetHoverData",f),s(b,"beforeGetHoverData",u))}}}),i(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),i(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{extend:l,merge:a,splat:h}=n;class c{constructor(u,p){this.coll="pane",this.init(u,p)}init(u,p){this.chart=p,this.background=[],p.pane.push(this),this.setOptions(u)}setOptions(u){this.options=u=a(r.pane,this.chart.angular?{background:{}}:void 0,u)}render(){let u=this.options,p=this.chart.renderer;this.group||(this.group=p.g("pane-group").attr({zIndex:u.zIndex||0}).add()),this.updateCenter();let b=this.options.background;if(b){let v=Math.max((b=h(b)).length,this.background.length||0);for(let x=0;x<v;x++)b[x]&&this.axis?this.renderBackground(a(r.background,b[x]),x):this.background[x]&&(this.background[x]=this.background[x].destroy(),this.background.splice(x,1))}}renderBackground(u,p){let b={class:"highcharts-pane "+(u.className||"")},v="animate";this.chart.styledMode||l(b,{fill:u.backgroundColor,stroke:u.borderColor,"stroke-width":u.borderWidth}),this.background[p]||(this.background[p]=this.chart.renderer.path().add(this.group),v="attr"),this.background[p][v]({d:this.axis.getPlotBandPath(u.from,u.to,u)}).attr(b)}updateCenter(u){this.center=(u||this.axis||{}).center=e.getCenter.call(this)}update(u,p){a(!0,this.options,u),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(b){b.pane===this&&(b.pane=null,b.update({},p))},this)}}return c.compose=s.compose,c}),i(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s){let{area:{prototype:{pointClass:r,pointClass:{prototype:n}}}}=e.seriesTypes,{defined:l,isNumber:a}=s;return class extends r{setState(){let h=this.state,c=this.series,f=c.chart.polar;l(this.plotHigh)||(this.plotHigh=c.yAxis.toPixels(this.high,!0)),l(this.plotLow)||(this.plotLow=this.plotY=c.yAxis.toPixels(this.low,!0)),c.lowerStateMarkerGraphic=c.stateMarkerGraphic,c.stateMarkerGraphic=c.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,f&&a(this.plotHighX)&&(this.plotX=this.plotHighX),n.setState.apply(this,arguments),this.state=h,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],f&&a(this.plotLowX)&&(this.plotX=this.plotLowX),c.upperStateMarkerGraphic=c.stateMarkerGraphic,c.stateMarkerGraphic=c.lowerStateMarkerGraphic,c.lowerStateMarkerGraphic=void 0;let u=c.modifyMarkerSettings();n.setState.apply(this,arguments),c.restoreMarkerSettings(u)}haloPath(){let h=this.series.chart.polar,c=[];return this.plotY=this.plotLow,h&&a(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(c=n.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,h&&a(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(c=c.concat(n.haloPath.apply(this,arguments))),c}isValid(){return a(this.low)&&a(this.high)}}}),i(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{noop:l}=s,{area:a,area:{prototype:h},column:{prototype:c}}=r.seriesTypes,{addEvent:f,defined:u,extend:p,isArray:b,isNumber:v,pick:x,merge:m}=n;class E extends a{toYData(S){return[S.low,S.high]}highToXY(S){let w=this.chart,R=this.xAxis.postTranslate(S.rectPlotX||0,this.yAxis.len-(S.plotHigh||0));S.plotHighX=R.x-w.plotLeft,S.plotHigh=R.y-w.plotTop,S.plotLowX=S.plotX}getGraphPath(S){let w=[],R=[],O=h.getGraphPath,I=this.options,_=this.chart.polar,A=_&&I.connectEnds!==!1,F=I.connectNulls,P,D,C,d=I.step;for(P=(S=S||this.points).length;P--;){D=S[P];let T=_?{plotX:D.rectPlotX,plotY:D.yBottom,doCurve:!1}:{plotX:D.plotX,plotY:D.plotY,doCurve:!1};D.isNull||A||F||S[P+1]&&!S[P+1].isNull||R.push(T),C={polarPlotY:D.polarPlotY,rectPlotX:D.rectPlotX,yBottom:D.yBottom,plotX:x(D.plotHighX,D.plotX),plotY:D.plotHigh,isNull:D.isNull},R.push(C),w.push(C),D.isNull||A||F||S[P-1]&&!S[P-1].isNull||R.push(T)}let g=O.call(this,S);d&&(d===!0&&(d="left"),I.step={left:"right",center:"center",right:"left"}[d]);let y=O.call(this,w),M=O.call(this,R);I.step=d;let k=[].concat(g,y);return!this.chart.polar&&M[0]&&M[0][0]==="M"&&(M[0]=["L",M[0][1],M[0][2]]),this.graphPath=k,this.areaPath=g.concat(M),k.isArea=!0,k.xMap=g.xMap,this.areaPath.xMap=g.xMap,k}drawDataLabels(){let S,w,R,O,I,_=this.points,A=_.length,F=[],P=this.options.dataLabels,D=this.chart.inverted;if(P){if(b(P)?(O=P[0]||{enabled:!1},I=P[1]||{enabled:!1}):((O=p({},P)).x=P.xHigh,O.y=P.yHigh,(I=p({},P)).x=P.xLow,I.y=P.yLow),O.enabled||this.hasDataLabels?.()){for(S=A;S--;)if(w=_[S]){let{plotHigh:C=0,plotLow:d=0}=w;R=O.inside?C<d:C>d,w.y=w.high,w._plotY=w.plotY,w.plotY=C,F[S]=w.dataLabel,w.dataLabel=w.dataLabelUpper,w.below=R,D?O.align||(O.align=R?"right":"left"):O.verticalAlign||(O.verticalAlign=R?"top":"bottom")}for(this.options.dataLabels=O,h.drawDataLabels&&h.drawDataLabels.apply(this,arguments),S=A;S--;)(w=_[S])&&(w.dataLabelUpper=w.dataLabel,w.dataLabel=F[S],delete w.dataLabels,w.y=w.low,w.plotY=w._plotY)}if(I.enabled||this.hasDataLabels?.()){for(S=A;S--;)if(w=_[S]){let{plotHigh:C=0,plotLow:d=0}=w;R=I.inside?C<d:C>d,w.below=!R,D?I.align||(I.align=R?"left":"right"):I.verticalAlign||(I.verticalAlign=R?"bottom":"top")}this.options.dataLabels=I,h.drawDataLabels&&h.drawDataLabels.apply(this,arguments)}if(O.enabled)for(S=A;S--;)(w=_[S])&&(w.dataLabels=[w.dataLabelUpper,w.dataLabel].filter(function(C){return!!C}));this.options.dataLabels=P}}alignDataLabel(){c.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let S={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:w,lowMarker:R}}=this;this.options.marker=m(w,R),R.symbol&&(this.symbol=R.symbol)}return S}restoreMarkerSettings(S){this.options.marker=S.marker,this.symbol=S.symbol}drawPoints(){let S,w,R=this.points.length,O=this.modifyMarkerSettings();for(h.drawPoints.apply(this,arguments),this.restoreMarkerSettings(O),S=0;S<R;)(w=this.points[S]).graphics=w.graphics||[],w.origProps={plotY:w.plotY,plotX:w.plotX,isInside:w.isInside,negative:w.negative,zone:w.zone,y:w.y},(w.graphic||w.graphics[0])&&(w.graphics[0]=w.graphic),w.graphic=w.graphics[1],w.plotY=w.plotHigh,u(w.plotHighX)&&(w.plotX=w.plotHighX),w.y=x(w.high,w.origProps.y),w.negative=w.y<(this.options.threshold||0),this.zones.length&&(w.zone=w.getZone()),this.chart.polar||(w.isInside=w.isTopInside=w.plotY!==void 0&&w.plotY>=0&&w.plotY<=this.yAxis.len&&w.plotX>=0&&w.plotX<=this.xAxis.len),S++;for(h.drawPoints.apply(this,arguments),S=0;S<R;)(w=this.points[S]).graphics=w.graphics||[],(w.graphic||w.graphics[1])&&(w.graphics[1]=w.graphic),w.graphic=w.graphics[0],w.origProps&&(p(w,w.origProps),delete w.origProps),S++}hasMarkerChanged(S,w){let R=S.lowMarker,O=w.lowMarker||{};return R&&(R.enabled===!1||O.symbol!==R.symbol||O.height!==R.height||O.width!==R.width)||super.hasMarkerChanged(S,w)}}return E.defaultOptions=m(a.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),f(E,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(L=>{let S=L.high,w=L.plotY;L.isNull?L.plotY=void 0:(L.plotLow=w,L.plotHigh=v(S)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(S):S,!1,!0,void 0,!0):void 0,this.dataModify&&(L.yBottom=L.plotHigh))})},{order:0}),f(E,"afterTranslate",function(){this.points.forEach(L=>{if(this.chart.polar)this.highToXY(L),L.plotLow=L.plotY,L.tooltipPos=[((L.plotHighX||0)+(L.plotLowX||0))/2,((L.plotHigh||0)+(L.plotLow||0))/2];else{let S=L.pos(!1,L.plotLow),w=L.pos(!1,L.plotHigh);S&&w&&(S[0]=(S[0]+w[0])/2,S[1]=(S[1]+w[1])/2),L.tooltipPos=S}})},{order:3}),p(E.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:e,pointValKey:"low",setStackedPoints:l}),r.registerSeriesType("arearange",E),E}),i(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{spline:{prototype:n}}=s.seriesTypes,{merge:l,extend:a}=r;class h extends e{}return h.defaultOptions=l(e.defaultOptions),a(h.prototype,{getPointSpline:n.getPointSpline}),s.registerSeriesType("areasplinerange",h),h}),i(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),i(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l){let{noop:a}=r,{crisp:h,extend:c,merge:f,pick:u}=l;class p extends s{pointAttribs(){return{}}translate(){let v=this.yAxis,x=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(m){x.forEach(function(E){m[E]!==null&&(m[E+"Plot"]=v.translate(m[E],0,1,0,1))}),m.plotHigh=m.highPlot})}drawPoints(){let v,x,m,E,L,S,w,R,O,I,_,A,F,P=this.points,D=this.options,C=this.chart,d=C.renderer,g=this.doQuartiles!==!1,y=this.options.whiskerLength;for(let M of P){let k=(R=M.graphic)?"animate":"attr",T=M.shapeArgs,z={},N={},G={},X={},j=M.color||this.color;if(M.plotY!==void 0){let B;O=T.width,_=(I=T.x)+O,A=O/2,v=g?M.q1Plot:M.lowPlot,x=g?M.q3Plot:M.lowPlot,m=M.highPlot,E=M.lowPlot,R||(M.graphic=R=d.g("point").add(this.group),M.stem=d.path().addClass("highcharts-boxplot-stem").add(R),y&&(M.whiskers=d.path().addClass("highcharts-boxplot-whisker").add(R)),g&&(M.box=d.path(w).addClass("highcharts-boxplot-box").add(R)),M.medianShape=d.path(S).addClass("highcharts-boxplot-median").add(R)),C.styledMode||(N.stroke=M.stemColor||D.stemColor||j,N["stroke-width"]=u(M.stemWidth,D.stemWidth,D.lineWidth),N.dashstyle=M.stemDashStyle||D.stemDashStyle||D.dashStyle,M.stem.attr(N),y&&(G.stroke=M.whiskerColor||D.whiskerColor||j,G["stroke-width"]=u(M.whiskerWidth,D.whiskerWidth,D.lineWidth),G.dashstyle=M.whiskerDashStyle||D.whiskerDashStyle||D.dashStyle,M.whiskers.attr(G)),g&&(z.fill=M.fillColor||D.fillColor||j,z.stroke=D.lineColor||j,z["stroke-width"]=D.lineWidth||0,z.dashstyle=M.boxDashStyle||D.boxDashStyle||D.dashStyle,M.box.attr(z)),X.stroke=M.medianColor||D.medianColor||j,X["stroke-width"]=u(M.medianWidth,D.medianWidth,D.lineWidth),X.dashstyle=M.medianDashStyle||D.medianDashStyle||D.dashStyle,M.medianShape.attr(X));let W=h(M.plotX||0,M.stem.strokeWidth());if(B=[["M",W,x],["L",W,m],["M",W,v],["L",W,E]],M.stem[k]({d:B}),g){let V=M.box.strokeWidth();v=h(v,V),x=h(x,V),B=[["M",I=h(I,V),x],["L",I,v],["L",_=h(_,V),v],["L",_,x],["L",I,x],["Z"]],M.box[k]({d:B})}if(y){let V=M.whiskers.strokeWidth();m=h(M.highPlot,V),E=h(M.lowPlot,V),B=[["M",h(W-(F=typeof y=="string"&&/%$/.test(y)?A*parseFloat(y)/100:Number(y)/2)),m],["L",h(W+F),m],["M",h(W-F),E],["L",h(W+F),E]],M.whiskers[k]({d:B})}B=[["M",I,L=h(M.medianPlot,M.medianShape.strokeWidth())],["L",_,L]],M.medianShape[k]({d:B})}}}toYData(v){return[v.low,v.q1,v.median,v.q3,v.high]}}return p.defaultOptions=f(s.defaultOptions,e),c(p.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:a,setStackedPoints:a}),n.registerSeriesType("boxplot",p),p}),i(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),i(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{parse:l}=e,{noop:a}=r,{arrayMax:h,arrayMin:c,isNumber:f,merge:u,pick:p,stableSort:b}=n;return class{constructor(v,x){this.setState=a,this.init(v,x)}init(v,x){this.options=v,this.visible=!0,this.chart=x.chart,this.legend=x}addToLegend(v){v.splice(this.options.legendIndex,0,this)}drawLegendSymbol(v){let x,m=p(v.options.itemDistance,20),E=this.legendItem||{},L=this.options,S=L.ranges,w=L.connectorDistance;if(!S||!S.length||!f(S[0].value)){v.options.bubbleLegend.autoRanges=!0;return}b(S,function(_,A){return A.value-_.value}),this.ranges=S,this.setOptions(),this.render();let R=this.getMaxLabelSize(),O=this.ranges[0].radius,I=2*O;x=(x=w-O+R.width)>0?x:0,this.maxLabel=R,this.movementX=L.labels.align==="left"?x:0,E.labelWidth=I+x+m,E.labelHeight=I+R.height/2}setOptions(){let v=this.ranges,x=this.options,m=this.chart.series[x.seriesIndex],E=this.legend.baseline,L={zIndex:x.zIndex,"stroke-width":x.borderWidth},S={zIndex:x.zIndex,"stroke-width":x.connectorWidth},w={align:this.legend.options.rtl||x.labels.align==="left"?"right":"left",zIndex:x.zIndex},R=m.options.marker.fillOpacity,O=this.chart.styledMode;v.forEach(function(I,_){O||(L.stroke=p(I.borderColor,x.borderColor,m.color),L.fill=p(I.color,x.color,R!==1?l(m.color).setOpacity(R).get("rgba"):m.color),S.stroke=p(I.connectorColor,x.connectorColor,m.color)),v[_].radius=this.getRangeRadius(I.value),v[_]=u(v[_],{center:v[0].radius-v[_].radius+E}),O||u(!0,v[_],{bubbleAttribs:u(L),connectorAttribs:u(S),labelAttribs:w})},this)}getRangeRadius(v){let x=this.options,m=this.options.seriesIndex,E=this.chart.series[m],L=x.ranges[0].value,S=x.ranges[x.ranges.length-1].value,w=x.minSize,R=x.maxSize;return E.getRadius.call(this,S,L,w,R,v)}render(){let v=this.legendItem||{},x=this.chart.renderer,m=this.options.zThreshold;for(let E of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),v.symbol=x.g("bubble-legend"),v.label=x.g("bubble-legend-item").css(this.legend.itemStyle||{}),v.symbol.translateX=0,v.symbol.translateY=0,v.symbol.add(v.label),v.label.add(v.group),this.ranges))E.value>=m&&this.renderRange(E);this.hideOverlappingLabels()}renderRange(v){let x=this.ranges[0],m=this.legend,E=this.options,L=E.labels,S=this.chart,w=S.series[E.seriesIndex],R=S.renderer,O=this.symbols,I=O.labels,_=v.center,A=Math.abs(v.radius),F=E.connectorDistance||0,P=L.align,D=m.options.rtl,C=E.borderWidth,d=E.connectorWidth,g=x.radius||0,y=_-A-C/2+d/2,M=(y%1?1:.5)-(d%2?0:.5),k=R.styledMode,T=D||P==="left"?-F:F;P==="center"&&(T=0,E.connectorDistance=0,v.labelAttribs.align="center"),O.bubbleItems.push(R.circle(g,_+M,A).attr(k?{}:v.bubbleAttribs).addClass((k?"highcharts-color-"+w.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(E.className||"")).add(this.legendItem.symbol)),O.connectors.push(R.path(R.crispLine([["M",g,y],["L",g+T,y]],E.connectorWidth)).attr(k?{}:v.connectorAttribs).addClass((k?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(E.connectorClassName||"")).add(this.legendItem.symbol));let z=R.text(this.formatLabel(v)).attr(k?{}:v.labelAttribs).css(k?{}:L.style).addClass("highcharts-bubble-legend-labels "+(E.labels.className||"")).add(this.legendItem.symbol),N={x:g+T+E.labels.x,y:y+E.labels.y+.4*z.getBBox().height};z.attr(N),I.push(z),z.placed=!0,z.alignAttr=N}getMaxLabelSize(){let v,x;return this.symbols.labels.forEach(function(m){x=m.getBBox(!0),v=v?x.width>v.width?x:v:x}),v||{}}formatLabel(v){let x=this.options,m=x.labels.formatter,E=x.labels.format,{numberFormatter:L}=this.chart;return E?s.format(E,v):m?m.call(v):L(v.value,1)}hideOverlappingLabels(){let v=this.chart,x=this.options.labels.allowOverlap,m=this.symbols;!x&&m&&(v.hideOverlappingLabels(m.labels),m.labels.forEach(function(E,L){E.newOpacity?E.newOpacity!==E.oldOpacity&&m.connectors[L].show():m.connectors[L].hide()}))}getRanges(){let v=this.legend.bubbleLegend,x=v.chart.series,m=v.options.ranges,E,L,S=Number.MAX_VALUE,w=-Number.MAX_VALUE;return x.forEach(function(R){R.isBubble&&!R.ignoreSeries&&(L=R.zData.filter(f)).length&&(S=p(R.options.zMin,Math.min(S,Math.max(c(L),R.options.displayNegative===!1?R.options.zThreshold:-Number.MAX_VALUE))),w=p(R.options.zMax,Math.max(w,h(L))))}),E=S===w?[{value:w}]:[{value:S},{value:(S+w)/2},{value:w,autoRanges:!0}],m.length&&m[0].radius&&E.reverse(),E.forEach(function(R,O){m&&m[O]&&(E[O]=u(m[O],R))}),E}predictBubbleSizes(){let v=this.chart,x=v.legend.options,m=x.floating,E=x.layout==="horizontal",L=E?v.legend.lastLineHeight:0,S=v.plotSizeX,w=v.plotSizeY,R=v.series[this.options.seriesIndex],O=R.getPxExtremes(),I=Math.ceil(O.minPxSize),_=Math.ceil(O.maxPxSize),A,F=R.options.maxSize;return m||!/%$/.test(F)?A=_:(A=(Math.min(w,S)+L)*(F=parseFloat(F))/100/(F/100+1),(E&&w-A>=S||!E&&S-A>=w)&&(A=_)),[I,Math.ceil(A)]}updateRanges(v,x){let m=this.legend.options.bubbleLegend;m.minSize=v,m.maxSize=x,m.ranges=this.getRanges()}correctSizes(){let v=this.legend,x=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(x.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,x.maxPxSize),v.render())}}}),i(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r,n,l){let{setOptions:a}=r,{composed:h}=n,{addEvent:c,objectEach:f,pushUnique:u,wrap:p}=l;function b(S,w,R){let O,I,_,A=this.legend,F=v(this)>=0;A&&A.options.enabled&&A.bubbleLegend&&A.options.bubbleLegend.autoRanges&&F?(O=A.bubbleLegend.options,I=A.bubbleLegend.predictBubbleSizes(),A.bubbleLegend.updateRanges(I[0],I[1]),O.placed||(A.group.placed=!1,A.allItems.forEach(P=>{(_=P.legendItem||{}).group&&(_.group.translateY=void 0)})),A.render(),O.placed||(this.getMargins(),this.axes.forEach(function(P){P.visible&&P.render(),O.placed||(P.setScale(),P.updateNames(),f(P.ticks,function(D){D.isNew=!0,D.isNewLabel=!0}))}),this.getMargins()),O.placed=!0,S.call(this,w,R),A.bubbleLegend.correctSizes(),L(A,x(A))):(S.call(this,w,R),A&&A.options.enabled&&A.bubbleLegend&&(A.render(),L(A,x(A))))}function v(S){let w=S.series,R=0;for(;R<w.length;){if(w[R]&&w[R].isBubble&&w[R].visible&&w[R].zData.length)return R;R++}return-1}function x(S){let w=S.allItems,R=[],O=w.length,I,_,A,F=0,P=0;for(F=0;F<O;F++)if(_=w[F].legendItem||{},A=(w[F+1]||{}).legendItem||{},_.labelHeight&&(w[F].itemHeight=_.labelHeight),w[F]===w[O-1]||_.y!==A.y){for(R.push({height:0}),I=R[R.length-1];P<=F;P++)w[P].itemHeight>I.height&&(I.height=w[P].itemHeight);I.step=F}return R}function m(S){let w=this.bubbleLegend,R=this.options,O=R.bubbleLegend,I=v(this.chart);w&&w.ranges&&w.ranges.length&&(O.ranges.length&&(O.autoRanges=!!O.ranges[0].autoRanges),this.destroyItem(w)),I>=0&&R.enabled&&O.enabled&&(O.seriesIndex=I,this.bubbleLegend=new s(O,this),this.bubbleLegend.addToLegend(S.allItems))}function E(S){let w;if(S.defaultPrevented)return!1;let R=this.chart,O=this.visible,I=this.chart.legend;I&&I.bubbleLegend&&(this.visible=!O,this.ignoreSeries=O,w=v(R)>=0,I.bubbleLegend.visible!==w&&(I.update({bubbleLegend:{enabled:w}}),I.bubbleLegend.visible=w),this.visible=O)}function L(S,w){let R=S.allItems,O=S.options.rtl,I,_,A,F,P=0;R.forEach((D,C)=>{(F=D.legendItem||{}).group&&(I=F.group.translateX||0,_=F.y||0,((A=D.movementX)||O&&D.ranges)&&(A=O?I-D.options.maxSize/2:I+A,F.group.attr({translateX:A})),C>w[P].step&&P++,F.group.attr({translateY:Math.round(_+w[P].height/2)}),F.y=_+w[P].height/2)})}return{compose:function(S,w,R){u(h,"Series.BubbleLegend")&&(a({legend:{bubbleLegend:e}}),p(S.prototype,"drawChartBox",b),c(w,"afterGetAllItems",m),c(R,"legendItemClick",E))}}}),i(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{seriesTypes:{scatter:{prototype:{pointClass:n}}}}=s,{extend:l}=r;class a extends n{haloPath(c){return e.prototype.haloPath.call(this,c===0?0:(this.marker&&this.marker.radius||0)+c)}}return l(a.prototype,{ttBelow:!1}),a}),i(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{parse:h}=r,{composed:c,noop:f}=n,{series:u,seriesTypes:{column:{prototype:p},scatter:b}}=l,{addEvent:v,arrayMax:x,arrayMin:m,clamp:E,extend:L,isNumber:S,merge:w,pick:R,pushUnique:O}=a;function I(){let A=this.len,{coll:F,isXAxis:P,min:D}=this,C=P?"xData":"yData",d=(this.max||0)-(D||0),g=0,y=A,M=A/d,k;(F==="xAxis"||F==="yAxis")&&(this.series.forEach(T=>{if(T.bubblePadding&&T.reserveSpace()){this.allowZoomOutside=!0,k=!0;let z=T[C];if(P&&((T.onPoint||T).getRadii(0,0,T),T.onPoint&&(T.radii=T.onPoint.radii)),d>0){let N=z.length;for(;N--;)if(S(z[N])&&this.dataMin<=z[N]&&z[N]<=this.max){let G=T.radii&&T.radii[N]||0;g=Math.min((z[N]-D)*M-G,g),y=Math.max((z[N]-D)*M+G,y)}}}}),k&&d>0&&!this.logarithmic&&(y-=A,M*=(A+Math.max(0,g)-Math.min(y,A))/A,[["min","userMin",g],["max","userMax",y]].forEach(T=>{R(this.options[T[0]],this[T[1]])===void 0&&(this[T[0]]+=T[2]/M)})))}class _ extends b{static compose(F,P,D,C){e.compose(P,D,C),O(c,"Series.Bubble")&&v(F,"foundExtremes",I)}animate(F){!F&&this.points.length<this.options.animationLimit&&this.points.forEach(function(P){let{graphic:D,plotX:C=0,plotY:d=0}=P;D&&D.width&&(this.hasRendered||D.attr({x:C,y:d,width:1,height:1}),D.animate(this.markerAttribs(P),this.options.animation))},this)}getRadii(){let F=this.zData,P=this.yData,D=[],C,d,g,y=this.chart.bubbleZExtremes,{minPxSize:M,maxPxSize:k}=this.getPxExtremes();if(!y){let T,z=Number.MAX_VALUE,N=-Number.MAX_VALUE;this.chart.series.forEach(G=>{if(G.bubblePadding&&G.reserveSpace()){let X=(G.onPoint||G).getZExtremes();X&&(z=Math.min(R(z,X.zMin),X.zMin),N=Math.max(R(N,X.zMax),X.zMax),T=!0)}}),T?(y={zMin:z,zMax:N},this.chart.bubbleZExtremes=y):y={zMin:0,zMax:0}}for(d=0,C=F.length;d<C;d++)g=F[d],D.push(this.getRadius(y.zMin,y.zMax,M,k,g,P&&P[d]));this.radii=D}getRadius(F,P,D,C,d,g){let y=this.options,M=y.sizeBy!=="width",k=y.zThreshold,T=P-F,z=.5;if(g===null||d===null)return null;if(S(d)){if(y.sizeByAbsoluteValue&&(d=Math.abs(d-k),P=T=Math.max(P-k,Math.abs(F-k)),F=0),d<F)return D/2-1;T>0&&(z=(d-F)/T)}return M&&z>=0&&(z=Math.sqrt(z)),Math.ceil(D+z*(C-D))/2}hasData(){return!!this.processedXData.length}markerAttribs(F,P){let D=super.markerAttribs(F,P),{height:C=0,width:d=0}=D;return this.chart.inverted?L(D,{x:(F.plotX||0)-d/2,y:(F.plotY||0)-C/2}):D}pointAttribs(F,P){let D=this.options.marker.fillOpacity,C=u.prototype.pointAttribs.call(this,F,P);return D!==1&&(C.fill=h(C.fill).setOpacity(D).get("rgba")),C}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:F,options:P,radii:D}=this,{minPxSize:C}=this.getPxExtremes(),d=F.length;for(;d--;){let g=F[d],y=D?D[d]:0;this.zoneAxis==="z"&&(g.negative=(g.z||0)<(P.zThreshold||0)),S(y)&&y>=C/2?(g.marker=L(g.marker,{radius:y,width:2*y,height:2*y}),g.dlBox={x:g.plotX-y,y:g.plotY-y,width:2*y,height:2*y}):(g.shapeArgs=g.plotY=g.dlBox=void 0,g.isInside=!1)}}getPxExtremes(){let F=Math.min(this.chart.plotWidth,this.chart.plotHeight),P=d=>{let g;return typeof d=="string"&&(g=/%$/.test(d),d=parseInt(d,10)),g?F*d/100:d},D=P(R(this.options.minSize,8)),C=Math.max(P(R(this.options.maxSize,"20%")),D);return{minPxSize:D,maxPxSize:C}}getZExtremes(){let F=this.options,P=(this.zData||[]).filter(S);if(P.length){let D=R(F.zMin,E(m(P),F.displayNegative===!1?F.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),C=R(F.zMax,x(P));if(S(D)&&S(C))return{zMin:D,zMax:C}}}}return _.defaultOptions=w(b.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:A}=this.series.chart,{z:F}=this.point;return S(F)?A(F,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),L(_.prototype,{alignDataLabel:p.alignDataLabel,applyZones:f,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:s,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),v(_,"updatedData",A=>{delete A.target.chart.bubbleZExtremes}),v(_,"remove",A=>{delete A.target.chart.bubbleZExtremes}),l.registerSeriesType("bubble",_),_}),i(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s){let{seriesTypes:{column:{prototype:{pointClass:{prototype:r}}},arearange:{prototype:{pointClass:n}}}}=e,{extend:l,isNumber:a}=s;class h extends n{isValid(){return a(this.low)}}return l(h.prototype,{setState:r.setState}),h}),i(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{noop:l}=s,{seriesTypes:{arearange:a,column:h,column:{prototype:c}}}=r,{addEvent:f,clamp:u,extend:p,isNumber:b,merge:v,pick:x}=n;class m extends a{setOptions(){return v(!0,arguments[0],{stacking:void 0}),a.prototype.setOptions.apply(this,arguments)}translate(){return c.translate.apply(this)}pointAttribs(){return c.pointAttribs.apply(this,arguments)}translate3dPoints(){return c.translate3dPoints.apply(this,arguments)}translate3dShapes(){return c.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let L,S,w,R,O=this.yAxis,I=this.xAxis,_=I.startAngleRad,A=this.chart,F=this.xAxis.isRadial,P=Math.max(A.chartWidth,A.chartHeight)+999;this.points.forEach(D=>{let C=D.shapeArgs||{},d=this.options.minPointLength,g=D.plotY,y=O.translate(D.high,0,1,0,1);if(b(y)&&b(g))if(D.plotHigh=u(y,-P,P),D.plotLow=u(g,-P,P),R=D.plotHigh,Math.abs(L=x(D.rectPlotY,D.plotY)-D.plotHigh)<d?(S=d-L,L+=S,R-=S/2):L<0&&(L*=-1,R-=L),F&&this.polar)w=D.barX+_,D.shapeType="arc",D.shapeArgs=this.polar.arc(R+L,R,w,w+D.pointWidth);else{C.height=L,C.y=R;let{x:M=0,width:k=0}=C;D.shapeArgs=v(D.shapeArgs,this.crispCol(M,R,k,L)),D.tooltipPos=A.inverted?[O.len+O.pos-A.plotLeft-R-L/2,I.len+I.pos-A.plotTop-M-k/2,L]:[I.left-A.plotLeft+M+k/2,O.pos-A.plotTop+R+L/2,L]}})}}return m.defaultOptions=v(h.defaultOptions,a.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),f(m,"afterColumnTranslate",function(){m.prototype.afterColumnTranslate.apply(this)},{order:5}),p(m.prototype,{directTouch:!0,pointClass:e,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:c.adjustForMissingColumns,animate:c.animate,crispCol:c.crispCol,drawGraph:l,drawPoints:c.drawPoints,getSymbol:l,drawTracker:c.drawTracker,getColumnMetrics:c.getColumnMetrics}),r.registerSeriesType("columnrange",m),m}),i(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),i(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{column:n}=s.seriesTypes,{clamp:l,merge:a,pick:h}=r;class c extends n{translate(){let u=this.chart,p=this.options,b=this.dense=this.closestPointRange*this.xAxis.transA<2,v=this.borderWidth=h(p.borderWidth,b?0:1),x=this.yAxis,m=p.threshold,E=h(p.minPointLength,5),L=this.getColumnMetrics(),S=L.width,w=this.pointXOffset=L.offset,R=this.translatedThreshold=x.getThreshold(m),O=this.barW=Math.max(S,1+2*v);for(let I of(u.inverted&&(R-=.5),p.pointPadding&&(O=Math.ceil(O)),super.translate(),this.points)){let _=h(I.yBottom,R),A=999+Math.abs(_),F=l(I.plotY,-A,x.len+A),P=O/2,D=Math.min(F,_),C=Math.max(F,_)-D,d=I.plotX+w,g,y,M,k,T,z,N,G,X,j,B;p.centerInCategory&&(d=this.adjustForMissingColumns(d,S,I,L)),I.barX=d,I.pointWidth=S,I.tooltipPos=u.inverted?[x.len+x.pos-u.plotLeft-F,this.xAxis.len-d-P,C]:[d+P,F+x.pos-u.plotTop,C],g=m+(I.total||I.y),p.stacking==="percent"&&(g=m+(I.y<0)?-100:100);let W=x.toPixels(g,!0);M=(y=u.plotHeight-W-(u.plotHeight-R))?P*(D-W)/y:0,k=y?P*(D+C-W)/y:0,z=d-M+P,N=d+M+P,G=d+k+P,X=d-k+P,j=D-E,B=D+C,I.y<0&&(j=D,B=D+C+E),u.inverted&&(T=x.width-D,y=W-(x.width-R),M=P*(W-T)/y,k=P*(W-(T-C))/y,N=(z=d+P+M)-2*M,G=d-k+P,X=d+k+P,j=D,B=D+C-E,I.y<0&&(B=D+C+E)),I.shapeType="path",I.shapeArgs={x:z,y:j,width:N-z,height:C,d:[["M",z,j],["L",N,j],["L",G,B],["L",X,B],["Z"]]}}}}return c.defaultOptions=a(n.defaultOptions,e),s.registerSeriesType("columnpyramid",c),c}),i(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),i(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l){let{arearange:a}=n.seriesTypes,{addEvent:h,merge:c,extend:f}=l;class u extends e{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||s.prototype.getColumnMetrics.call(this)}drawDataLabels(){let b=this.pointValKey;if(a)for(let v of(a.prototype.drawDataLabels.call(this),this.points))v.y=v[b]}toYData(b){return[b.low,b.high]}}return u.defaultOptions=c(e.defaultOptions,r),h(u,"afterTranslate",function(){for(let p of this.points)p.plotLow=p.plotY},{order:0}),f(u.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),n.registerSeriesType("errorbar",u),u}),i(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(e){let{series:{prototype:{pointClass:s}}}=e;return class extends s{setState(r){this.state=r}}}),i(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{noop:l}=s,{series:a,seriesTypes:{column:h}}=r,{clamp:c,isNumber:f,extend:u,merge:p,pick:b,pInt:v,defined:x}=n;class m extends a{translate(){let L=this.yAxis,S=this.options,w=L.center;this.generatePoints(),this.points.forEach(R=>{let O=p(S.dial,R.dial),I=v(O.radius)*w[2]/200,_=v(O.baseLength)*I/100,A=v(O.rearLength)*I/100,F=O.baseWidth,P=O.topWidth,D=S.overshoot,C=L.startAngleRad+L.translate(R.y,void 0,void 0,void 0,!0);(f(D)||S.wrap===!1)&&(D=f(D)?D/180*Math.PI:0,C=c(C,L.startAngleRad-D,L.endAngleRad+D)),C=180*C/Math.PI,R.shapeType="path";let d=O.path||[["M",-A,-F/2],["L",_,-F/2],["L",I,-P/2],["L",I,P/2],["L",_,F/2],["L",-A,F/2],["Z"]];R.shapeArgs={d,translateX:w[0],translateY:w[1],rotation:C},R.plotX=w[0],R.plotY=w[1],x(R.y)&&L.max-L.min&&(R.percentage=(R.y-L.min)/(L.max-L.min)*100)})}drawPoints(){let L=this,S=L.chart,w=L.yAxis.center,R=L.pivot,O=L.options,I=O.pivot,_=S.renderer;L.points.forEach(A=>{let F=A.graphic,P=A.shapeArgs,D=P.d,C=p(O.dial,A.dial);F?(F.animate(P),P.d=D):A.graphic=_[A.shapeType](P).addClass("highcharts-dial").add(L.group),S.styledMode||A.graphic[F?"animate":"attr"]({stroke:C.borderColor,"stroke-width":C.borderWidth,fill:C.backgroundColor})}),R?R.animate({translateX:w[0],translateY:w[1]}):I&&(L.pivot=_.circle(0,0,I.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(w[0],w[1]).add(L.group),S.styledMode||L.pivot.attr({fill:I.backgroundColor,stroke:I.borderColor,"stroke-width":I.borderWidth}))}animate(L){let S=this;L||S.points.forEach(w=>{let R=w.graphic;R&&(R.attr({rotation:180*S.yAxis.startAngleRad/Math.PI}),R.animate({rotation:w.shapeArgs.rotation},S.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),a.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(L,S){a.prototype.setData.call(this,L,!1),this.processData(),this.generatePoints(),b(S,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return m.defaultOptions=p(a.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),u(m.prototype,{angular:!0,directTouch:!0,drawGraph:l,drawTracker:h.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:e,trackerGroups:["group","dataLabelsGroup"]}),r.registerSeriesType("gauge",m),m}),i(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){let{composed:r}=e,{addEvent:n,pushUnique:l}=s;function a(){let h,c,f,u=this;u.container&&(h=n(u.container,"mousedown",p=>{let b=u.hoverPoint;b&&b.series&&b.series.hasDraggableNodes&&b.series.options.draggable&&(b.series.onMouseDown(b,p),c=n(u.container,"mousemove",v=>b&&b.series&&b.series.onMouseMove(b,v)),f=n(u.container.ownerDocument,"mouseup",v=>(c(),f(),b&&b.series&&b.series.onMouseUp(b,v))))})),n(u,"destroy",function(){h()})}return{compose:function(h){l(r,"DragNodes")&&n(h,"load",a)},onMouseDown:function(h,c){let f=this.chart.pointer?.normalize(c)||c;h.fixedPosition={chartX:f.chartX,chartY:f.chartY,plotX:h.plotX,plotY:h.plotY},h.inDragMode=!0},onMouseMove:function(h,c){if(h.fixedPosition&&h.inDragMode){let f,u,p=this.chart,b=p.pointer?.normalize(c)||c,v=h.fixedPosition.chartX-b.chartX,x=h.fixedPosition.chartY-b.chartY,m=p.graphLayoutsLookup;(Math.abs(v)>5||Math.abs(x)>5)&&(f=h.fixedPosition.plotX-v,u=h.fixedPosition.plotY-x,p.isInsidePlot(f,u)&&(h.plotX=f,h.plotY=u,h.hasDragged=!0,this.redrawHalo(h),m.forEach(E=>{E.restartSimulation()})))}},onMouseUp:function(h){h.fixedPosition&&(h.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),h.inDragMode=h.hasDragged=!1,this.options.fixedDraggable||delete h.fixedPosition)},redrawHalo:function(h){h&&this.halo&&this.halo.attr({d:h.haloPath(this.options.states.hover.halo.size)})}}}),i(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r){let{setAnimation:n}=e,{composed:l}=s,{addEvent:a,pushUnique:h}=r;function c(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(b=>{b.updateSimulation()}),this.redraw())}function f(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(b=>{b.updateSimulation(!1)}),this.redraw())}function u(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(b=>{b.stop()})}function p(){let b,v=!1,x=m=>{m.maxIterations--&&isFinite(m.temperature)&&!m.isStable()&&!m.enableSimulation&&(m.beforeStep&&m.beforeStep(),m.step(),b=!1,v=!0)};if(this.graphLayoutsLookup){for(n(!1,this),this.graphLayoutsLookup.forEach(m=>m.start());!b;)b=!0,this.graphLayoutsLookup.forEach(x);v&&this.series.forEach(m=>{m&&m.layout&&m.render()})}}return{compose:function(b){h(l,"GraphLayout")&&(a(b,"afterPrint",c),a(b,"beforePrint",f),a(b,"predraw",u),a(b,"render",p))},integrations:{},layouts:{}}}),i(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(e,s,r){let{seriesTypes:{bubble:{prototype:{pointClass:n}}}}=r;return class extends n{destroy(){return this.series.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),s.prototype.destroy.apply(this,arguments)}firePointEvent(){let l=this.series.options;if(this.isParentNode&&l.parentNode){let a=l.allowPointSelect;l.allowPointSelect=l.parentNode.allowPointSelect,s.prototype.firePointEvent.apply(this,arguments),l.allowPointSelect=a}else s.prototype.firePointEvent.apply(this,arguments)}select(){let l=this.series.chart;this.isParentNode?(l.getSelectedPoints=l.getSelectedParentNodes,s.prototype.select.apply(this,arguments),l.getSelectedPoints=e.prototype.getSelectedPoints):s.prototype.select.apply(this,arguments)}}}),i(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(e){let{isNumber:s}=e;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:n}=this.point;return s(n)?r(n,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),i(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(e,s,r){let n=e.getMass(),l=-r.x*s*this.diffTemperature,a=-r.y*s*this.diffTemperature;e.fromNode.fixedPosition||(e.fromNode.plotX-=l*n.fromNode/e.fromNode.degree,e.fromNode.plotY-=a*n.fromNode/e.fromNode.degree),e.toNode.fixedPosition||(e.toNode.plotX+=l*n.toNode/e.toNode.degree,e.toNode.plotY+=a*n.toNode/e.toNode.degree)},attractiveForceFunction:function(e,s){return(s-e)/e},barycenter:function(){let e=this.options.gravitationalConstant||0,s=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*e,r=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*e;this.nodes.forEach(function(n){n.fixedPosition||(n.plotX-=s/n.mass/n.degree,n.plotY-=r/n.mass/n.degree)})},getK:function(e){return Math.pow(e.box.width*e.box.height/e.nodes.length,.5)},integrate:function(e,s){let r=-e.options.friction,n=e.options.maxSpeed,l=s.prevX,a=s.prevY,h=(s.plotX+s.dispX-l)*r,c=(s.plotY+s.dispY-a)*r,f=Math.abs,u=f(h)/(h||1),p=f(c)/(c||1),b=u*Math.min(n,Math.abs(h)),v=p*Math.min(n,Math.abs(c));s.prevX=s.plotX+s.dispX,s.prevY=s.plotY+s.dispY,s.plotX+=b,s.plotY+=v,s.temperature=e.vectorLength({x:b,y:v})},repulsive:function(e,s,r){let n=s*this.diffTemperature/e.mass/e.degree;e.fixedPosition||(e.plotX+=r.x*n,e.plotY+=r.y*n)},repulsiveForceFunction:function(e,s){return(s-e)/e*(s>e?1:0)}}}),i(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(e,s){let{noop:r}=e;return{barycenter:function(){let n,l,a=this.options.gravitationalConstant,h=this.box,c=this.nodes;for(let f of c)this.options.splitSeries&&!f.isParentNode?(n=f.series.parentNode.plotX,l=f.series.parentNode.plotY):(n=h.width/2,l=h.height/2),f.fixedPosition||(f.plotX-=(f.plotX-n)*a/(f.mass*Math.sqrt(c.length)),f.plotY-=(f.plotY-l)*a/(f.mass*Math.sqrt(c.length)))},getK:r,integrate:s.integrate,repulsive:function(n,l,a,h){let c=l*this.diffTemperature/n.mass/n.degree,f=a.x*c,u=a.y*c;n.fixedPosition||(n.plotX+=f,n.plotY+=u),h.fixedPosition||(h.plotX-=f,h.plotY-=u)},repulsiveForceFunction:function(n,l,a,h){return Math.min(n,(a.marker.radius+h.marker.radius)/2)}}}),i(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(e,s,r,n){let l=e.getMass(),a=r.x/n*s,h=r.y/n*s;e.fromNode.fixedPosition||(e.fromNode.dispX-=a*l.fromNode/e.fromNode.degree,e.fromNode.dispY-=h*l.fromNode/e.fromNode.degree),e.toNode.fixedPosition||(e.toNode.dispX+=a*l.toNode/e.toNode.degree,e.toNode.dispY+=h*l.toNode/e.toNode.degree)},attractiveForceFunction:function(e,s){return e*e/s},barycenter:function(){let e=this.options.gravitationalConstant,s=this.barycenter.xFactor,r=this.barycenter.yFactor;this.nodes.forEach(function(n){if(!n.fixedPosition){let l=n.getDegree(),a=l*(1+l/2);n.dispX+=(s-n.plotX)*e*a/n.degree,n.dispY+=(r-n.plotY)*e*a/n.degree}})},getK:function(e){return Math.pow(e.box.width*e.box.height/e.nodes.length,.3)},integrate:function(e,s){s.dispX+=s.dispX*e.options.friction,s.dispY+=s.dispY*e.options.friction;let r=s.temperature=e.vectorLength({x:s.dispX,y:s.dispY});r!==0&&(s.plotX+=s.dispX/r*Math.min(Math.abs(s.dispX),e.temperature),s.plotY+=s.dispY/r*Math.min(Math.abs(s.dispY),e.temperature))},repulsive:function(e,s,r,n){e.dispX+=r.x/n*s/e.degree,e.dispY+=r.y/n*s/e.degree},repulsiveForceFunction:function(e,s){return s*s/e}}}),i(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class e{constructor(r){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=r,this.boxSize=Math.min(r.width,r.height)}divideBox(){let r=this.box.width/2,n=this.box.height/2;this.nodes[0]=new e({left:this.box.left,top:this.box.top,width:r,height:n}),this.nodes[1]=new e({left:this.box.left+r,top:this.box.top,width:r,height:n}),this.nodes[2]=new e({left:this.box.left+r,top:this.box.top+n,width:r,height:n}),this.nodes[3]=new e({left:this.box.left,top:this.box.top+n,width:r,height:n})}getBoxPosition(r){let n=r.plotX<this.box.left+this.box.width/2,l=r.plotY<this.box.top+this.box.height/2;return n?l?0:3:l?1:2}insert(r,n){let l;this.isInternal?this.nodes[this.getBoxPosition(r)].insert(r,n-1):(this.isEmpty=!1,this.body?n?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,n-1),this.body=!0),this.nodes[this.getBoxPosition(r)].insert(r,n-1)):((l=new e({top:r.plotX||NaN,left:r.plotY||NaN,width:.1,height:.1})).body=r,l.isInternal=!1,this.nodes.push(l)):(this.isInternal=!1,this.body=r))}updateMassAndCenter(){let r=0,n=0,l=0;if(this.isInternal){for(let a of this.nodes)a.isEmpty||(r+=a.mass,n+=a.plotX*a.mass,l+=a.plotY*a.mass);n/=r,l/=r}else this.body&&(r=this.body.mass,n=this.body.plotX,l=this.body.plotY);this.mass=r,this.plotX=n,this.plotY=l}}return e}),i(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(e){return class{constructor(s,r,n,l){this.box={left:s,top:r,width:n,height:l},this.maxDepth=25,this.root=new e(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(s){s.updateMassAndCenter()})}insertNodes(s){for(let r of s)this.root.insert(r,this.maxDepth)}visitNodeRecursive(s,r,n){let l;if(s||(s=this.root),s===this.root&&r&&(l=r(s)),l!==!1){for(let a of s.nodes){if(a.isInternal){if(r&&(l=r(a)),l===!1)continue;this.visitNodeRecursive(a,r,n)}else a.body&&r&&r(a.body);n&&n(a)}s===this.root&&n&&n(s)}}}}),i(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(e,s,r,n,l,a){let{win:h}=s,{clamp:c,defined:f,isFunction:u,fireEvent:p,pick:b}=l;class v{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(m){r.compose(m),r.integrations.euler=e,r.integrations.verlet=a,r.layouts["reingold-fruchterman"]=v}init(m){this.options=m,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=r.integrations[m.integration],this.enableSimulation=m.enableSimulation,this.attractiveForce=b(m.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=b(m.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=m.approximation}updateSimulation(m){this.enableSimulation=b(m,this.options.enableSimulation)}start(){let m=this.series,E=this.options;this.currentStep=0,this.forces=m[0]&&m[0].forces||[],this.chart=m[0]&&m[0].chart,this.initialRendering&&(this.initPositions(),m.forEach(function(L){L.finishedAnimating=!0,L.render()})),this.setK(),this.resetSimulation(E),this.enableSimulation&&this.step()}step(){let m=this.series;for(let E of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[E+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let E of m)E.chart&&E.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&h.cancelAnimationFrame(this.simulation),this.simulation=h.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(E=>{p(E,"afterSimulation")}))}}stop(){this.simulation&&h.cancelAnimationFrame(this.simulation)}setArea(m,E,L,S){this.box={left:m,top:E,width:L,height:S}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(m,E){for(let L of m)E.indexOf(L)===-1&&E.push(L)}removeElementFromCollection(m,E){let L=E.indexOf(m);L!==-1&&E.splice(L,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(m){this.maxIterations=b(m,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(m){this.initialRendering=m}createQuadTree(){this.quadTree=new n(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let m=this.options.initialPositions;if(u(m))for(let E of(m.call(this),this.nodes))f(E.prevX)||(E.prevX=E.plotX),f(E.prevY)||(E.prevY=E.plotY),E.dispX=0,E.dispY=0;else m==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let m,E=this.box,L=this.nodes,S=2*Math.PI/(L.length+1),w=L.filter(function(A){return A.linksTo.length===0}),R={},O=this.options.initialPositionRadius,I=A=>{for(let F of A.linksFrom||[])R[F.toNode.id]||(R[F.toNode.id]=!0,_.push(F.toNode),I(F.toNode))},_=[];for(let A of w)_.push(A),I(A);if(_.length)for(let A of L)_.indexOf(A)===-1&&_.push(A);else _=L;for(let A=0,F=_.length;A<F;++A)(m=_[A]).plotX=m.prevX=b(m.plotX,E.width/2+O*Math.cos(A*S)),m.plotY=m.prevY=b(m.plotY,E.height/2+O*Math.sin(A*S)),m.dispX=0,m.dispY=0}setRandomPositions(){let m,E=this.box,L=this.nodes,S=L.length+1,w=R=>{let O=R*R/Math.PI;return O-Math.floor(O)};for(let R=0,O=L.length;R<O;++R)(m=L[R]).plotX=m.prevX=b(m.plotX,E.width*w(R)),m.plotY=m.prevY=b(m.plotY,E.height*w(S+R)),m.dispX=0,m.dispY=0}force(m,...E){this.integration[m].apply(this,E)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let m=0,E=0,L=0;for(let S of this.nodes)E+=S.plotX*S.mass,L+=S.plotY*S.mass,m+=S.mass;return this.barycenter={x:E,y:L,xFactor:E/m,yFactor:L/m},this.barycenter}barnesHutApproximation(m,E){let L,S,w=this.getDistXY(m,E),R=this.vectorLength(w);return m!==E&&R!==0&&(E.isInternal?E.boxSize/R<this.options.theta&&R!==0?(S=this.repulsiveForce(R,this.k),this.force("repulsive",m,S*E.mass,w,R),L=!1):L=!0:(S=this.repulsiveForce(R,this.k),this.force("repulsive",m,S*E.mass,w,R))),L}repulsiveForces(){if(this.approximation==="barnes-hut")for(let m of this.nodes)this.quadTree.visitNodeRecursive(null,E=>this.barnesHutApproximation(m,E));else{let m,E,L;for(let S of this.nodes)for(let w of this.nodes)S===w||S.fixedPosition||(L=this.getDistXY(S,w),(E=this.vectorLength(L))!==0&&(m=this.repulsiveForce(E,this.k),this.force("repulsive",S,m*w.mass,L,E)))}}attractiveForces(){let m,E,L;for(let S of this.links)S.fromNode&&S.toNode&&(m=this.getDistXY(S.fromNode,S.toNode),(E=this.vectorLength(m))!==0&&(L=this.attractiveForce(E,this.k),this.force("attractive",S,L,m,E)))}applyLimits(){for(let m of this.nodes)m.fixedPosition||(this.integration.integrate(this,m),this.applyLimitBox(m,this.box),m.dispX=0,m.dispY=0)}applyLimitBox(m,E){let L=m.radius;m.plotX=c(m.plotX,E.left+L,E.width-L),m.plotY=c(m.plotY,E.top+L,E.height-L)}coolDown(m,E,L){return m-E*L}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let m=0;for(let E of this.nodes)m+=E.temperature;return m}vectorLength(m){return Math.sqrt(m.x*m.x+m.y*m.y)}getDistR(m,E){let L=this.getDistXY(m,E);return this.vectorLength(L)}getDistXY(m,E){let L=m.plotX-E.plotX,S=m.plotY-E.plotY;return{x:L,y:S,absX:Math.abs(L),absY:Math.abs(S)}}}return v}),i(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{addEvent:l,pick:a}=n;function h(){let u=this.series,p=[];return u.forEach(b=>{b.parentNode&&b.parentNode.selected&&p.push(b.parentNode)}),p}function c(){this.allDataPoints&&delete this.allDataPoints}class f extends r{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(p){r.compose(p),e.integrations.packedbubble=s,e.layouts.packedbubble=f;let b=p.prototype;b.getSelectedParentNodes||(l(p,"beforeRedraw",c),b.getSelectedParentNodes=h)}beforeStep(){this.options.marker&&this.series.forEach(p=>{p&&p.calculateParentRadius()})}isStable(){let p=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&p<1e-5||this.temperature<=0}setCircularPositions(){let p=this.box,b=this.nodes,v=2*Math.PI/(b.length+1),x=this.options.initialPositionRadius,m,E,L=0;for(let S of b)this.options.splitSeries&&!S.isParentNode?(m=S.series.parentNode.plotX,E=S.series.parentNode.plotY):(m=p.width/2,E=p.height/2),S.plotX=S.prevX=a(S.plotX,m+x*Math.cos(S.index||L*v)),S.plotY=S.prevY=a(S.plotY,E+x*Math.sin(S.index||L*v)),S.dispX=0,S.dispY=0,L++}repulsiveForces(){let p,b,v,x=this,m=x.options.bubblePadding,E=x.nodes;E.forEach(L=>{L.degree=L.mass,L.neighbours=0,E.forEach(S=>{p=0,L!==S&&!L.fixedPosition&&(x.options.seriesInteraction||L.series===S.series)&&(v=x.getDistXY(L,S),(b=x.vectorLength(v)-(L.marker.radius+S.marker.radius+m))<0&&(L.degree+=.01,L.neighbours++,p=x.repulsiveForce(-b/Math.sqrt(L.neighbours),x.k,L,S)),x.force("repulsive",L,p*S.mass,v,S,b))})})}applyLimitBox(p,b){let v,x;this.options.splitSeries&&!p.isParentNode&&this.options.parentNodeLimit&&(v=this.getDistXY(p,p.series.parentNode),(x=p.series.parentNodeRadius-p.marker.radius-this.vectorLength(v))<0&&x>-2*p.marker.radius&&(p.plotX-=.01*v.x,p.plotY-=.01*v.y)),super.applyLimitBox(p,b)}}return e.layouts.packedbubble=f,f}),i(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(e,s){let{merge:r,syncTimeout:n}=e,{animObject:l}=s;return{initDataLabels:function(){let a=this.options.dataLabels;if(!this.dataLabelsGroup){let h=this.initDataLabelsGroup();return!this.chart.styledMode&&a?.style&&h.css(a.style),h.attr({opacity:0}),this.visible&&h.show(),h}return this.dataLabelsGroup.attr(r({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){let a=this.options.dataLabels;a?.defer&&this.options.layoutAlgorithm?.enableSimulation?n(()=>{this.deferDataLabels=!1},a?l(a.animation).defer:0):this.deferDataLabels=!1}}}),i(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c,f,u){let{parse:p}=e,{noop:b}=n,{series:{prototype:v},seriesTypes:{bubble:x}}=c,{initDataLabels:m,initDataLabelsDefer:E}=f,{addEvent:L,clamp:S,defined:w,extend:R,fireEvent:O,isArray:I,isNumber:_,merge:A,pick:F}=u;class P extends x{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(C,d,g,y){x.compose(C,d,g,y),s.compose(d),h.compose(d)}accumulateAllPoints(){let C,d=this.chart,g=[];for(let y of d.series)if(y.is("packedbubble")&&y.reserveSpace()){C=y.yData||[];for(let M=0;M<C.length;M++)g.push([null,null,C[M],y.index,M,{id:M,marker:{radius:0}}])}return g}addLayout(){let C=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},d=C.type||"packedbubble",g=this.chart.options.chart,y=this.chart.graphLayoutsStorage,M=this.chart.graphLayoutsLookup,k;y||(this.chart.graphLayoutsStorage=y={},this.chart.graphLayoutsLookup=M=[]),(k=y[d])||(C.enableSimulation=w(g.forExport)?!g.forExport:C.enableSimulation,y[d]=k=new r.layouts[d],k.init(C),M.splice(k.index,0,k)),this.layout=k,this.points.forEach(T=>{T.mass=2,T.degree=1,T.collisionNmb=1}),k.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),k.addElementsToCollection([this],k.series),k.addElementsToCollection(this.points,k.nodes)}addSeriesLayout(){let C=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},d=C.type||"packedbubble",g=this.chart.graphLayoutsStorage,y=this.chart.graphLayoutsLookup,M=A(C,C.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),k=g[d+"-series"];k||(g[d+"-series"]=k=new r.layouts[d],k.init(M),y.splice(k.index,0,k)),this.parentNodeLayout=k,this.createParentNodes()}calculateParentRadius(){let C=this.seriesBox();this.parentNodeRadius=S(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,C?Math.max(Math.sqrt(Math.pow(C.width,2)+Math.pow(C.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let C=this.chart.series,d=this.options.zMin,g=this.options.zMax,y=1/0,M=-1/0;return d&&g?[d,g]:(C.forEach(k=>{k.yData.forEach(T=>{w(T)&&(T>M&&(M=T),T<y&&(y=T))})}),[d=F(d,y),g=F(g,M)])}checkOverlap(C,d){let g=C[0]-d[0],y=C[1]-d[1];return Math.sqrt(g*g+y*y)-Math.abs(C[2]+d[2])<-.001}createParentNodes(){let C=this.pointClass,d=this.chart,g=this.parentNodeLayout,y=this.layout.options,M,k=this.parentNode,T={radius:this.parentNodeRadius,lineColor:this.color,fillColor:p(this.color).brighten(.4).get()};y.parentNodeOptions&&(T=A(y.parentNodeOptions.marker||{},T)),this.parentNodeMass=0,this.points.forEach(z=>{this.parentNodeMass+=Math.PI*Math.pow(z.marker.radius,2)}),this.calculateParentRadius(),g.nodes.forEach(z=>{z.seriesIndex===this.index&&(M=!0)}),g.setArea(0,0,d.plotWidth,d.plotHeight),M||(k||(k=new C(this,{mass:this.parentNodeRadius/2,marker:T,dataLabels:{inside:!1},states:{normal:{marker:T},hover:{marker:T}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(k.plotX=this.parentNode.plotX,k.plotY=this.parentNode.plotY),this.parentNode=k,g.addElementsToCollection([this],g.series),g.addElementsToCollection([k],g.nodes))}deferLayout(){let C=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),C.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(C=>{C.removeElementFromCollection(this,C.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),v.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(v.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",v.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){if(!this.layout||!this.layout.options.splitSeries)return;let C=this.chart,d=this.layout.options.parentNodeOptions.marker,g={fill:d.fillColor||p(this.color).brighten(.4).get(),opacity:d.fillOpacity,stroke:d.lineColor||this.color,"stroke-width":F(d.lineWidth,this.options.lineWidth)},y={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,C.seriesGroup),this.group?.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&w(this.parentNode.plotX)&&w(this.parentNode.plotY)&&w(this.parentNodeRadius)&&(y=A({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},g),this.parentNode.graphic||(this.graph=this.parentNode.graphic=C.renderer.symbol(g.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(y))}drawTracker(){let C,d=this.parentNode;super.drawTracker(),d&&(C=I(d.dataLabels)?d.dataLabels:d.dataLabel?[d.dataLabel]:[],d.graphic&&(d.graphic.element.point=d),C.forEach(g=>{(g.div||g.element).point=d}))}getPointRadius(){let C,d,g,y,M=this.chart,k=M.plotWidth,T=M.plotHeight,z=this.options,N=z.useSimulation,G=Math.min(k,T),X={},j=[],B=M.allDataPoints||[],W=B.length;["minSize","maxSize"].forEach(U=>{let q=parseInt(z[U],10),H=/%$/.test(z[U]);X[U]=H?G*q/100:q*Math.sqrt(W)}),M.minRadius=C=X.minSize/Math.sqrt(W),M.maxRadius=d=X.maxSize/Math.sqrt(W);let V=N?this.calculateZExtremes():[C,d];B.forEach((U,q)=>{g=N?S(U[2],V[0],V[1]):U[2],(y=this.getRadius(V[0],V[1],C,d,g))===0&&(y=null),B[q][2]=y,j.push(y)}),this.radii=j}init(){return v.init.apply(this,arguments),E.call(this),this.eventsToUnbind.push(L(this,"updatedData",function(){this.chart.series.forEach(C=>{C.type===this.type&&(C.isDirty=!0)},this)})),this}onMouseUp(C){if(C.fixedPosition&&!C.removed){let d,g=this.layout,y=this.parentNodeLayout;y&&g.options.dragBetweenSeries&&y.nodes.forEach(M=>{C&&C.marker&&M!==C.series.parentNode&&(d=g.getDistXY(C,M),g.vectorLength(d)-M.marker.radius-C.marker.radius<0&&(M.series.addPoint(A(C.options,{plotX:C.plotX,plotY:C.plotY}),!1),g.removeElementFromCollection(C,g.nodes),C.remove()))}),s.onMouseUp.apply(this,arguments)}}placeBubbles(C){let d=this.checkOverlap,g=this.positionBubble,y=[],M=1,k=0,T=0,z,N=[],G,X=C.sort((j,B)=>B[2]-j[2]);if(X.length){if(y.push([[0,0,X[0][2],X[0][3],X[0][4]]]),X.length>1)for(y.push([[0,0-X[1][2]-X[0][2],X[1][2],X[1][3],X[1][4]]]),G=2;G<X.length;G++)X[G][2]=X[G][2]||1,d(z=g(y[M][k],y[M-1][T],X[G]),y[M][0])?(y.push([]),T=0,y[M+1].push(g(y[M][k],y[M][0],X[G])),M++,k=0):M>1&&y[M-1][T+1]&&d(z,y[M-1][T+1])?(T++,y[M].push(g(y[M][k],y[M-1][T],X[G])),k++):(k++,y[M].push(z));this.chart.stages=y,this.chart.rawPositions=[].concat.apply([],y),this.resizeRadius(),N=this.chart.rawPositions}return N}pointAttribs(C,d){let g=this.options,y=C&&C.isParentNode,M=g.marker;y&&g.layoutAlgorithm&&g.layoutAlgorithm.parentNodeOptions&&(M=g.layoutAlgorithm.parentNodeOptions.marker);let k=M.fillOpacity,T=v.pointAttribs.call(this,C,d);return k!==1&&(T["fill-opacity"]=k),T}positionBubble(C,d,g){let y=Math.pow,M=(0,Math.sqrt)(y(C[0]-d[0],2)+y(C[1]-d[1],2)),k=(0,Math.acos)((y(M,2)+y(g[2]+d[2],2)-y(g[2]+C[2],2))/(2*(g[2]+d[2])*M)),T=(0,Math.asin)((0,Math.abs)(C[0]-d[0])/M),z=(C[1]-d[1]<0?0:Math.PI)+k+T*((C[0]-d[0])*(C[1]-d[1])<0?1:-1);return[d[0]+(d[2]+g[2])*Math.sin(z),d[1]-(d[2]+g[2])*Math.cos(z),g[2],g[3],g[4]]}render(){let C=[];v.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(d=>{I(d.dataLabels)&&d.dataLabels.forEach(g=>{C.push(g)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(C))}resizeRadius(){let C,d,g,y,M,k=this.chart,T=k.rawPositions,z=Math.min,N=Math.max,G=k.plotLeft,X=k.plotTop,j=k.plotHeight,B=k.plotWidth;for(let q of(C=g=Number.POSITIVE_INFINITY,d=y=Number.NEGATIVE_INFINITY,T))M=q[2],C=z(C,q[0]-M),d=N(d,q[0]+M),g=z(g,q[1]-M),y=N(y,q[1]+M);let W=[d-C,y-g],V=[(B-G)/W[0],(j-X)/W[1]],U=z.apply([],V);if(Math.abs(U-1)>1e-10){for(let q of T)q[2]*=U;this.placeBubbles(T)}else k.diffY=j/2+X-g-(y-g)/2,k.diffX=B/2+G-C-(d-C)/2}seriesBox(){let C,d=this.chart,g=this.data,y=Math.max,M=Math.min,k=[d.plotLeft,d.plotLeft+d.plotWidth,d.plotTop,d.plotTop+d.plotHeight];return g.forEach(T=>{w(T.plotX)&&w(T.plotY)&&T.marker.radius&&(C=T.marker.radius,k[0]=M(k[0],T.plotX-C),k[1]=y(k[1],T.plotX+C),k[2]=M(k[2],T.plotY-C),k[3]=y(k[3],T.plotY+C))}),_(k.width/k.height)?k:null}setVisible(){let C=this;v.setVisible.apply(C,arguments),C.parentNodeLayout&&C.graph?C.visible?(C.graph.show(),C.parentNode.dataLabel&&C.parentNode.dataLabel.show()):(C.graph.hide(),C.parentNodeLayout.removeElementFromCollection(C.parentNode,C.parentNodeLayout.nodes),C.parentNode.dataLabel&&C.parentNode.dataLabel.hide()):C.layout&&(C.visible?C.layout.addElementsToCollection(C.points,C.layout.nodes):C.points.forEach(d=>{C.layout.removeElementFromCollection(d,C.layout.nodes)}))}translate(){let C,d,g,y=this.chart,M=this.data,k=this.index,T=this.options.useSimulation;for(let z of(this.processedXData=this.xData,this.generatePoints(),w(y.allDataPoints)||(y.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),T?g=y.allDataPoints:(g=this.placeBubbles(y.allDataPoints),this.options.draggable=!1),g))z[3]===k&&(C=M[z[4]],d=F(z[2],void 0),T||(C.plotX=z[0]-y.plotLeft+y.diffX,C.plotY=z[1]-y.plotTop+y.diffY),_(d)&&(C.marker=R(C.marker,{radius:d,width:2*d,height:2*d}),C.radius=d));T&&this.deferLayout(),O(this,"afterTranslate")}}return P.defaultOptions=A(x.defaultOptions,a),R(P.prototype,{pointClass:l,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:m,alignDataLabel:v.alignDataLabel,indexateNodes:b,onMouseDown:s.onMouseDown,onMouseMove:s.onMouseMove,redrawHalo:s.redrawHalo,searchPoint:b}),c.registerSeriesType("packedbubble",P),P}),i(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),i(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{noop:l}=e,{area:a,line:h,scatter:c}=r.seriesTypes,{extend:f,merge:u}=n;class p extends c{getGraphPath(){let v=h.prototype.getGraphPath.call(this),x=v.length+1;for(;x--;)(x===v.length||v[x][0]==="M")&&x>0&&v.splice(x,0,["Z"]);return this.areaPath=v,v}drawGraph(){this.options.fillColor=this.color,a.prototype.drawGraph.call(this)}}return p.defaultOptions=u(c.defaultOptions,s),f(p.prototype,{type:"polygon",drawTracker:h.prototype.drawTracker,setStackedPoints:l}),r.registerSeriesType("polygon",p),p}),i(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),i(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r,n){var l;let{defaultOptions:a}=s,{composed:h,noop:c}=r,{addEvent:f,correctFloat:u,defined:p,extend:b,fireEvent:v,isObject:x,merge:m,pick:E,pushUnique:L,relativeLength:S,wrap:w}=n;return function(R){function O(){this.autoConnect=this.isCircular&&E(this.userMax,this.options.max)===void 0&&u(this.endAngleRad-this.startAngleRad)===u(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function I(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(Y=>this.ticks[Y]&&this.ticks[Y].label).filter(Y=>!!Y)}}function _(){return c}function A(Y,Z,K){let J=this.pane.center,tt=Y.value,$,Q,et;return this.isCircular?(p(tt)?Y.point&&(Y.point.shapeArgs||{}).start&&(tt=this.chart.inverted?this.translate(Y.point.rectPlotY,!0):Y.point.x):(Q=Y.chartX||0,et=Y.chartY||0,tt=this.translate(Math.atan2(et-K,Q-Z)-this.startAngleRad,!0)),Q=($=this.getPosition(tt)).x,et=$.y):(p(tt)||(Q=Y.chartX,et=Y.chartY),p(Q)&&p(et)&&(K=J[1]+this.chart.plotTop,tt=this.translate(Math.min(Math.sqrt(Math.pow(Q-Z,2)+Math.pow(et-K,2)),J[2]/2)-J[3]/2,!0))),[tt,Q||0,et||0]}function F(Y,Z,K){let J=this.pane.center,tt=this.chart,$=this.left||0,Q=this.top||0,et,it=E(Z,J[2]/2-this.offset),st;return K===void 0&&(K=this.horiz?0:this.center&&-this.center[3]/2),K&&(it+=K),this.isCircular||Z!==void 0?((st=this.chart.renderer.symbols.arc($+J[0],Q+J[1],it,it,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[$+J[0]],st.yBounds=[Q+J[1]-it]):(et=this.postTranslate(this.angleRad,it),st=[["M",this.center[0]+tt.plotLeft,this.center[1]+tt.plotTop],["L",et.x,et.y]]),st}function P(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function D(Y,Z,K){let J=this.chart,tt=Pt=>{if(typeof Pt=="string"){let jt=parseInt(Pt,10);return nt.test(Pt)&&(jt=jt*et/100),jt}return Pt},$=this.center,Q=this.startAngleRad,et=$[2]/2,it=Math.min(this.offset,0),st=this.left||0,rt=this.top||0,nt=/%$/,ot=this.isCircular,at,ct,ht,lt,yt,Et,dt=E(tt(K.outerRadius),et),St=tt(K.innerRadius),mt=E(tt(K.thickness),10);if(this.options.gridLineInterpolation==="polygon")Et=this.getPlotLinePath({value:Y}).concat(this.getPlotLinePath({value:Z,reverse:!0}));else{Y=Math.max(Y,this.min),Z=Math.min(Z,this.max);let Pt=this.translate(Y),jt=this.translate(Z);ot||(dt=Pt||0,St=jt||0),K.shape!=="circle"&&ot?(at=Q+(Pt||0),ct=Q+(jt||0)):(at=-Math.PI/2,ct=1.5*Math.PI,yt=!0),dt-=it,mt-=it,Et=J.renderer.symbols.arc(st+$[0],rt+$[1],dt,dt,{start:Math.min(at,ct),end:Math.max(at,ct),innerR:E(St,dt-mt),open:yt,borderRadius:K.borderRadius}),ot&&(ht=(ct+at)/2,lt=st+$[0]+$[2]/2*Math.cos(ht),Et.xBounds=ht>-Math.PI/2&&ht<Math.PI/2?[lt,J.plotWidth]:[0,lt],Et.yBounds=[rt+$[1]+$[2]/2*Math.sin(ht)],Et.yBounds[0]+=ht>-Math.PI&&ht<0||ht>Math.PI?-10:10)}return Et}function C(Y){let Z=this.pane.center,K=this.chart,J=K.inverted,tt=Y.reverse,$=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Q=$.innerRadius||"0%",et=$.outerRadius||"100%",it=Z[0]+K.plotLeft,st=Z[1]+K.plotTop,rt=this.height,nt=Y.isCrosshair,ot=Z[3]/2,at=Y.value,ct,ht,lt,yt,Et,dt,St,mt,Pt,jt=this.getPosition(at),me=jt.x,se=jt.y;if(nt&&(at=(mt=this.getCrosshairPosition(Y,it,st))[0],me=mt[1],se=mt[2]),this.isCircular)ht=Math.sqrt(Math.pow(me-it,2)+Math.pow(se-st,2)),lt=typeof Q=="string"?S(Q,1):Q/ht,yt=typeof et=="string"?S(et,1):et/ht,Z&&ot&&(lt<(ct=ot/ht)&&(lt=ct),yt<ct&&(yt=ct)),Pt=[["M",it+lt*(me-it),st-lt*(st-se)],["L",me-(1-yt)*(me-it),se+(1-yt)*(st-se)]];else if((at=this.translate(at))&&(at<0||at>rt)&&(at=0),this.options.gridLineInterpolation==="circle")Pt=this.getLinePath(0,at,ot);else if(Pt=[],K[J?"yAxis":"xAxis"].forEach(Ie=>{Ie.pane===this.pane&&(Et=Ie)}),Et){St=Et.tickPositions,Et.autoConnect&&(St=St.concat([St[0]])),tt&&(St=St.slice().reverse()),at&&(at+=ot);for(let Ie=0;Ie<St.length;Ie++)dt=Et.getPosition(St[Ie],at),Pt.push(Ie?["L",dt.x,dt.y]:["M",dt.x,dt.y])}return Pt}function d(Y,Z){let K=this.translate(Y);return this.postTranslate(this.isCircular?K:this.angleRad,E(this.isCircular?Z:K<0?0:K,this.center[2]/2)-this.offset)}function g(){let Y=this.center,Z=this.chart,K=this.options.title;return{x:Z.plotLeft+Y[0]+(K.x||0),y:Z.plotTop+Y[1]-{high:.5,middle:.25,low:0}[K.align]*Y[2]+(K.y||0)}}function y(Y){Y.beforeSetTickPositions=O,Y.createLabelCollector=I,Y.getCrosshairPosition=A,Y.getLinePath=F,Y.getOffset=P,Y.getPlotBandPath=D,Y.getPlotLinePath=C,Y.getPosition=d,Y.getTitlePosition=g,Y.postTranslate=B,Y.setAxisSize=V,Y.setAxisTranslation=U,Y.setOptions=q}function M(){let Y=this.chart,Z=this.options,K=Y.angular&&this.isXAxis,J=this.pane,tt=J&&J.options;if(!K&&J&&(Y.angular||Y.polar)){let $=2*Math.PI,Q=(E(tt.startAngle,0)-90)*Math.PI/180,et=(E(tt.endAngle,E(tt.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(Z.angle||0)*Math.PI/180,this.startAngleRad=Q,this.endAngleRad=et,this.offset=Z.offset||0;let it=(Q%$+$)%$,st=(et%$+$)%$;it>Math.PI&&(it-=$),st>Math.PI&&(st-=$),this.normalizedStartAngleRad=it,this.normalizedEndAngleRad=st}}function k(Y){this.isRadial&&(Y.align=void 0,Y.preventDefault())}function T(){if(this.chart&&this.chart.labelCollectors){let Y=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;Y>=0&&this.chart.labelCollectors.splice(Y,1)}}function z(Y){let Z,K=this.chart,J=K.angular,tt=K.polar,$=this.isXAxis,Q=this.coll,et=Y.userOptions.pane||0,it=this.pane=K.pane&&K.pane[et];if(Q==="colorAxis"){this.isRadial=!1;return}J?(J&&$?(this.isHidden=!0,this.createLabelCollector=_,this.getOffset=c,this.redraw=W,this.render=W,this.setScale=c,this.setCategories=c,this.setTitle=c):y(this),Z=!$):tt&&(y(this),Z=this.horiz),J||tt?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&K.labelCollectors.push(this.labelCollector)):this.isRadial=!1,it&&Z&&(it.axis=this),this.isCircular=Z}function N(){this.isRadial&&this.beforeSetTickPositions()}function G(Y){let Z=this.label;if(!Z)return;let K=this.axis,J=Z.getBBox(),tt=K.options.labels,$=(K.translate(this.pos)+K.startAngleRad+Math.PI/2)/Math.PI*180%360,Q=Math.round($),et=p(tt.y)?0:-(.3*J.height),it=tt.y,st,rt=20,nt=tt.align,ot="end",at=Q<0?Q+360:Q,ct=at,ht=0,lt=0;K.isRadial&&(st=K.getPosition(this.pos,K.center[2]/2+S(E(tt.distance,-25),K.center[2]/2,-K.center[2]/2)),tt.rotation==="auto"?Z.attr({rotation:$}):p(it)||(it=K.chart.renderer.fontMetrics(Z).b-J.height/2),p(nt)||(K.isCircular?(J.width>K.len*K.tickInterval/(K.max-K.min)&&(rt=0),nt=$>rt&&$<180-rt?"left":$>180+rt&&$<360-rt?"right":"center"):nt="center",Z.attr({align:nt})),nt==="auto"&&K.tickPositions.length===2&&K.isCircular&&(at>90&&at<180?at=180-at:at>270&&at<=360&&(at=540-at),ct>180&&ct<=360&&(ct=360-ct),(K.pane.options.startAngle===Q||K.pane.options.startAngle===Q+360||K.pane.options.startAngle===Q-360)&&(ot="start"),nt=Q>=-90&&Q<=90||Q>=-360&&Q<=-270||Q>=270&&Q<=360?ot==="start"?"right":"left":ot==="start"?"left":"right",ct>70&&ct<110&&(nt="center"),at<15||at>=180&&at<195?ht=.3*J.height:at>=15&&at<=35?ht=ot==="start"?0:.75*J.height:at>=195&&at<=215?ht=ot==="start"?.75*J.height:0:at>35&&at<=90?ht=ot==="start"?-(.25*J.height):J.height:at>215&&at<=270&&(ht=ot==="start"?J.height:-(.25*J.height)),ct<15?lt=ot==="start"?-(.15*J.height):.15*J.height:ct>165&&ct<=180&&(lt=ot==="start"?.15*J.height:-(.15*J.height)),Z.attr({align:nt}),Z.translate(lt,ht+et)),Y.pos.x=st.x+(tt.x||0),Y.pos.y=st.y+(it||0))}function X(Y){this.axis.getPosition&&b(Y.pos,this.axis.getPosition(this.pos))}function j({options:Y}){Y.xAxis&&m(!0,R.radialDefaultOptions.circular,Y.xAxis),Y.yAxis&&m(!0,R.radialDefaultOptions.radialGauge,Y.yAxis)}function B(Y,Z){let K=this.chart,J=this.center;return Y=this.startAngleRad+Y,{x:K.plotLeft+J[0]+Math.cos(Y)*Z,y:K.plotTop+J[1]+Math.sin(Y)*Z}}function W(){this.isDirty=!1}function V(){let Y,Z;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),Y=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(Z=this.postTranslate(this.angleRad,Y[3]/2),Y[0]=Z.x-this.chart.plotLeft,Y[1]=Z.y-this.chart.plotTop),this.len=this.width=this.height=(Y[2]-Y[3])*E(this.sector,1)/2)}function U(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function q(Y){let{coll:Z}=this,{angular:K,inverted:J,polar:tt}=this.chart,$={};K?this.isXAxis||($=m(a.yAxis,R.radialDefaultOptions.radialGauge)):tt&&($=this.horiz?m(a.xAxis,R.radialDefaultOptions.circular):m(Z==="xAxis"?a.xAxis:a.yAxis,R.radialDefaultOptions.radial)),J&&Z==="yAxis"&&($.stackLabels=x(a.yAxis,!0)?a.yAxis.stackLabels:{},$.reversedStacks=!0);let Q=this.options=m($,Y);Q.plotBands||(Q.plotBands=[]),v(this,"afterSetOptions")}function H(Y,Z,K,J,tt,$,Q){let et,it=this.axis;return it.isRadial?["M",Z,K,"L",(et=it.getPosition(this.pos,it.center[2]/2+J)).x,et.y]:Y.call(this,Z,K,J,tt,$,Q)}R.radialDefaultOptions=m(e),R.compose=function(Y,Z){return L(h,"Axis.Radial")&&(f(Y,"afterInit",M),f(Y,"autoLabelAlign",k),f(Y,"destroy",T),f(Y,"init",z),f(Y,"initialAxisTranslation",N),f(Z,"afterGetLabelPosition",G),f(Z,"afterGetPosition",X),f(r,"setOptions",j),w(Z.prototype,"getMarkPath",H)),Y}}(l||(l={})),l}),i(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{animObject:h}=e,{composed:c}=s,{addEvent:f,defined:u,find:p,isNumber:b,merge:v,pick:x,pushUnique:m,relativeLength:E,splat:L,uniqueKey:S,wrap:w}=a;function R(){(this.pane||[]).forEach(j=>{j.render()})}function O(j){let B=j.args[0].xAxis,W=j.args[0].yAxis,V=j.args[0].chart;B&&W&&(W.gridLineInterpolation==="polygon"?(B.startOnTick=!0,B.endOnTick=!0):B.gridLineInterpolation==="polygon"&&V.inverted&&(W.startOnTick=!0,W.endOnTick=!0))}function I(){this.pane||(this.pane=[]),this.options.pane=L(this.options.pane),this.options.pane.forEach(j=>{new n(j,this)},this)}function _(j){let B=j.args.marker,W=this.chart.xAxis[0],V=this.chart.yAxis[0],U=this.chart.inverted,q=U?V:W,H=U?W:V;if(this.chart.polar){j.preventDefault();let Y=(B.attr?B.attr("start"):B.start)-q.startAngleRad,Z=B.attr?B.attr("r"):B.r,K=(B.attr?B.attr("end"):B.end)-q.startAngleRad,J=B.attr?B.attr("innerR"):B.innerR;j.result.x=Y+q.pos,j.result.width=K-Y,j.result.y=H.len+H.pos-Z,j.result.height=Z-J}}function A(j){let B=this.chart;if(B.polar&&B.hoverPane&&B.hoverPane.axis){j.preventDefault();let W=B.hoverPane.center,V=B.mouseDownX||0,U=B.mouseDownY||0,q=j.args.chartY,H=j.args.chartX,Y=2*Math.PI,Z=B.hoverPane.axis.startAngleRad,K=B.hoverPane.axis.endAngleRad,J=B.inverted?B.xAxis[0]:B.yAxis[0],tt={},$="arc";if(tt.x=W[0]+B.plotLeft,tt.y=W[1]+B.plotTop,this.zoomHor){let Q=Z>0?K-Z:Math.abs(Z)+Math.abs(K),et=Math.atan2(U-B.plotTop-W[1],V-B.plotLeft-W[0])-Z,it=Math.atan2(q-B.plotTop-W[1],H-B.plotLeft-W[0])-Z;tt.r=W[2]/2,tt.innerR=W[3]/2,et<=0&&(et+=Y),it<=0&&(it+=Y),it<et&&(it=[et,et=it][0]),Q<Y&&Z+it>K+(Y-Q)/2&&(it=et,et=Z<=0?Z:0);let st=tt.start=Math.max(et+Z,Z),rt=tt.end=Math.min(it+Z,K);if(J.options.gridLineInterpolation==="polygon"){let nt=B.hoverPane.axis,ot=st-nt.startAngleRad+nt.pos,at=J.getPlotLinePath({value:J.max}),ct=nt.toValue(ot),ht=nt.toValue(ot+(rt-st));if(ct<nt.getExtremes().min){let{min:lt,max:yt}=nt.getExtremes();ct=yt-(lt-ct)}if(ht<nt.getExtremes().min){let{min:lt,max:yt}=nt.getExtremes();ht=yt-(lt-ht)}ht<ct&&(ht=[ct,ct=ht][0]),(at=C(at,ct,ht,nt)).push(["L",W[0]+B.plotLeft,B.plotTop+W[1]]),tt.d=at,$="path"}}if(this.zoomVert){let Q=B.inverted?B.xAxis[0]:B.yAxis[0],et=Math.sqrt(Math.pow(V-B.plotLeft-W[0],2)+Math.pow(U-B.plotTop-W[1],2)),it=Math.sqrt(Math.pow(H-B.plotLeft-W[0],2)+Math.pow(q-B.plotTop-W[1],2));if(it<et&&(et=[it,it=et][0]),it>W[2]/2&&(it=W[2]/2),et<W[3]/2&&(et=W[3]/2),this.zoomHor||(tt.start=Z,tt.end=K),tt.r=it,tt.innerR=et,Q.options.gridLineInterpolation==="polygon"){let st=Q.toValue(Q.len+Q.pos-et),rt=Q.toValue(Q.len+Q.pos-it),nt=Q.getPlotLinePath({value:rt}).concat(Q.getPlotLinePath({value:st,reverse:!0}));tt.d=nt,$="path"}}if(this.zoomHor&&this.zoomVert&&J.options.gridLineInterpolation==="polygon"){let Q=B.hoverPane.axis,et=tt.start||0,it=tt.end||0,st=et-Q.startAngleRad+Q.pos,rt=Q.toValue(st),nt=Q.toValue(st+(it-et));if(tt.d instanceof Array){let ot=tt.d.slice(0,tt.d.length/2),at=tt.d.slice(tt.d.length/2,tt.d.length);at=[...at].reverse();let ct=B.hoverPane.axis;ot=C(ot,rt,nt,ct),(at=C(at,rt,nt,ct))&&(at[0][0]="L"),at=[...at].reverse(),tt.d=ot.concat(at),$="path"}}j.attrs=tt,j.shapeType=$}}function F(){let j=this.chart;j.polar&&(this.polar=new X(this),j.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function P(){if(this.chart.polar&&this.xAxis){let{xAxis:j,yAxis:B}=this,W=this.chart;this.kdByAngle=W.tooltip&&W.tooltip.shared,this.kdByAngle||W.inverted?this.searchPoint=D:this.options.findNearestPointBy="xy";let V=this.points,U=V.length;for(;U--;)this.is("column")||this.is("columnrange")||this.polar.toXY(V[U]),W.hasParallelCoordinates||this.yAxis.reversed||(x(V[U].y,Number.MIN_VALUE)<B.min||V[U].x<j.min||V[U].x>j.max?(V[U].isNull=!0,V[U].plotY=NaN):V[U].isNull=V[U].isValid&&!V[U].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(f(this,"afterRender",function(){let q;W.polar&&this.options.clip!==!1&&(q=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:q[0],y:q[1],r:q[2]/2,innerR:q[3]/2}):this.clipCircle=function(H,Y,Z,K,J){let tt=S(),$=H.createElement("clipPath").attr({id:tt}).add(H.defs),Q=J?H.arc(Y,Z,K,J,0,2*Math.PI).add($):H.circle(Y,Z,K).add($);return Q.id=tt,Q.clipPath=$,Q}(W.renderer,q[0],q[1],q[2]/2,q[3]/2),this.group.clip(this.clipCircle),this.setClip=s.noop)})))}}function D(j){let B=this.chart,W=this.xAxis,V=this.yAxis,U=W.pane&&W.pane.center,q=j.chartX-(U&&U[0]||0)-B.plotLeft,H=j.chartY-(U&&U[1]||0)-B.plotTop,Y=B.inverted?{clientX:j.chartX-V.pos,plotY:j.chartY-W.pos}:{clientX:180+-180/Math.PI*Math.atan2(q,H)};return this.searchKDTree(Y)}function C(j,B,W,V){let U=V.tickInterval,q=V.tickPositions,H=p(q,Z=>Z>=W),Y=p([...q].reverse(),Z=>Z<=B);return u(H)||(H=q[q.length-1]),u(Y)||(Y=q[0],H+=U,j[0][0]="L",j.unshift(j[j.length-3])),(j=j.slice(q.indexOf(Y),q.indexOf(H)+1))[0][0]="M",j}function d(j,B){return p(this.pane||[],W=>W.options.id===B)||j.call(this,B)}function g(j,B,W,V,U,q){let H,Y,Z,K=this.chart,J=x(V.inside,!!this.options.stacking);if(K.polar){if(H=B.rectPlotX/Math.PI*180,K.inverted)this.forceDL=K.isInsidePlot(B.plotX,B.plotY),J&&B.shapeArgs?(Y=B.shapeArgs,U=v(U,{x:(Z=this.yAxis.postTranslate(((Y.start||0)+(Y.end||0))/2-this.xAxis.startAngleRad,B.barX+B.pointWidth/2)).x-K.plotLeft,y:Z.y-K.plotTop})):B.tooltipPos&&(U=v(U,{x:B.tooltipPos[0],y:B.tooltipPos[1]})),V.align=x(V.align,"center"),V.verticalAlign=x(V.verticalAlign,"middle");else{var tt;let $,Q;(tt=V).align===null&&($=H>20&&H<160?"left":H>200&&H<340?"right":"center",tt.align=$),tt.verticalAlign===null&&(Q=H<45||H>315?"bottom":H>135&&H<225?"top":"middle",tt.verticalAlign=Q),V=tt}r.prototype.alignDataLabel.call(this,B,W,V,U,q),this.isRadialBar&&B.shapeArgs&&B.shapeArgs.start===B.shapeArgs.end?W.hide():W.show()}else j.call(this,B,W,V,U,q)}function y(){let j=this.options,B=j.stacking,W=this.chart,V=this.xAxis,U=this.yAxis,q=U.reversed,H=U.center,Y=V.startAngleRad,Z=V.endAngleRad-Y,K=j.threshold,J=0,tt,$,Q,et,it,st=0,rt=0,nt,ot,at,ct,ht,lt,yt,Et;if(V.isRadial)for(Q=(tt=this.points).length,et=U.translate(U.min),it=U.translate(U.max),K=j.threshold||0,W.inverted&&b(K)&&u(J=U.translate(K))&&(J<0?J=0:J>Z&&(J=Z),this.translatedThreshold=J+Y);Q--;){if(lt=($=tt[Q]).barX,ot=$.x,at=$.y,$.shapeType="arc",W.inverted){$.plotY=U.translate(at),B&&U.stacking?(ht=U.stacking.stacks[(at<0?"-":"")+this.stackKey],this.visible&&ht&&ht[ot]&&!$.isNull&&(ct=ht[ot].points[this.getStackIndicator(void 0,ot,this.index).key],st=U.translate(ct[0]),rt=U.translate(ct[1]),u(st)&&(st=a.clamp(st,0,Z)))):(st=J,rt=$.plotY),st>rt&&(rt=[st,st=rt][0]),q?rt>et?rt=et:st<it?st=it:(st>et||rt<it)&&(st=rt=Z):st<et?st=et:rt>it?rt=it:(rt<et||st>it)&&(st=rt=0),U.min>U.max&&(st=rt=q?Z:0),st+=Y,rt+=Y,H&&($.barX=lt+=H[3]/2),yt=Math.max(lt,0),Et=Math.max(lt+$.pointWidth,0);let dt=j.borderRadius,St=E((typeof dt=="object"?dt.radius:dt)||0,Et-yt);$.shapeArgs={x:H[0],y:H[1],r:Et,innerR:yt,start:st,end:rt,borderRadius:St},$.opacity=st===rt?0:void 0,$.plotY=(u(this.translatedThreshold)&&(st<this.translatedThreshold?st:rt))-Y}else st=lt+Y,$.shapeArgs=this.polar.arc($.yBottom,$.plotY,st,st+$.pointWidth),$.shapeArgs.borderRadius=0;this.polar.toXY($),W.inverted?(nt=U.postTranslate($.rectPlotY,lt+$.pointWidth/2),$.tooltipPos=[nt.x-W.plotLeft,nt.y-W.plotTop]):$.tooltipPos=[$.plotX,$.plotY],H&&($.ttBelow=$.plotY>H[1])}}function M(j,B){let W,V,U=this;if(this.chart.polar){B=B||this.points;for(let H=0;H<B.length;H++)if(!B[H].isNull){W=H;break}this.options.connectEnds!==!1&&W!==void 0&&(this.connectEnds=!0,B.splice(B.length,0,B[W]),V=!0),B.forEach(H=>{H.polarPlotY===void 0&&U.polar.toXY(H)})}let q=j.apply(this,[].slice.call(arguments,1));return V&&B.pop(),q}function k(j,B){let W=this.chart,V={xAxis:[],yAxis:[]};return W.polar?W.axes.forEach(U=>{if(U.coll==="colorAxis")return;let q=U.isXAxis,H=U.center,Y=B.chartX-H[0]-W.plotLeft,Z=B.chartY-H[1]-W.plotTop;V[q?"xAxis":"yAxis"].push({axis:U,value:U.translate(q?Math.PI-Math.atan2(Y,Z):Math.sqrt(Math.pow(Y,2)+Math.pow(Z,2)),!0)})}):V=j.call(this,B),V}function T(j,B){this.chart.polar||j.call(this,B)}function z(j,B){let W=this,V=this.chart,U=this.group,q=this.markerGroup,H=this.xAxis&&this.xAxis.center,Y=V.plotLeft,Z=V.plotTop,K=this.options.animation,J,tt,$,Q,et,it;V.polar?W.isRadialBar?B||(W.startAngleRad=x(W.translatedThreshold,W.xAxis.startAngleRad),s.seriesTypes.pie.prototype.animate.call(W,B)):(K=h(K),W.is("column")?B||(tt=H[3]/2,W.points.forEach(st=>{$=st.graphic,et=(Q=st.shapeArgs)&&Q.r,it=Q&&Q.innerR,$&&Q&&($.attr({r:tt,innerR:tt}),$.animate({r:et,innerR:it},W.options.animation))})):B?(J={translateX:H[0]+Y,translateY:H[1]+Z,scaleX:.001,scaleY:.001},U.attr(J),q&&q.attr(J)):(J={translateX:Y,translateY:Z,scaleX:1,scaleY:1},U.animate(J,K),q&&q.animate(J,K))):j.call(this,B)}function N(j,B,W,V){let U,q;if(this.chart.polar)if(V){let H=(q=function Z(K,J,tt,$){let Q,et,it,st,rt,nt,ot=$?1:0,at=(Q=J>=0&&J<=K.length-1?J:J<0?K.length-1+J:0)-1<0?K.length-(1+ot):Q-1,ct=Q+1>K.length-1?ot:Q+1,ht=K[at],lt=K[ct],yt=ht.plotX,Et=ht.plotY,dt=lt.plotX,St=lt.plotY,mt=K[Q].plotX,Pt=K[Q].plotY;et=(1.5*mt+yt)/2.5,it=(1.5*Pt+Et)/2.5,st=(1.5*mt+dt)/2.5,rt=(1.5*Pt+St)/2.5;let jt=Math.sqrt(Math.pow(et-mt,2)+Math.pow(it-Pt,2)),me=Math.sqrt(Math.pow(st-mt,2)+Math.pow(rt-Pt,2)),se=Math.atan2(it-Pt,et-mt);nt=Math.PI/2+(se+Math.atan2(rt-Pt,st-mt))/2,Math.abs(se-nt)>Math.PI/2&&(nt-=Math.PI),et=mt+Math.cos(nt)*jt,it=Pt+Math.sin(nt)*jt;let Ie={rightContX:st=mt+Math.cos(Math.PI+nt)*me,rightContY:rt=Pt+Math.sin(Math.PI+nt)*me,leftContX:et,leftContY:it,plotX:mt,plotY:Pt};return tt&&(Ie.prevPointCont=Z(K,at,!1,$)),Ie}(B,V,!0,this.connectEnds)).prevPointCont&&q.prevPointCont.rightContX,Y=q.prevPointCont&&q.prevPointCont.rightContY;U=["C",b(H)?H:q.plotX,b(Y)?Y:q.plotY,b(q.leftContX)?q.leftContX:q.plotX,b(q.leftContY)?q.leftContY:q.plotY,q.plotX,q.plotY]}else U=["M",W.plotX,W.plotY];else U=j.call(this,B,W,V);return U}function G(j,B,W=this.plotY){if(!this.destroyed){let{plotX:V,series:U}=this,{chart:q}=U;return q.polar&&b(V)&&b(W)?[V+(B?q.plotLeft:0),W+(B?q.plotTop:0)]:j.call(this,B,W)}}class X{static compose(B,W,V,U,q,H,Y,Z,K,J){if(n.compose(W,V),l.compose(B,q),m(c,"Polar")){let tt=W.prototype,$=H.prototype,Q=V.prototype,et=U.prototype;if(f(W,"afterDrawChartBox",R),f(W,"getAxes",I),f(W,"init",O),w(tt,"get",d),w(Q,"getCoordinates",k),w(Q,"pinch",T),f(V,"getSelectionMarkerAttrs",A),f(V,"getSelectionBox",_),f(U,"afterInit",F),f(U,"afterTranslate",P,{order:2}),f(U,"afterColumnTranslate",y,{order:4}),w(et,"animate",z),w($,"pos",G),Z){let it=Z.prototype;w(it,"alignDataLabel",g),w(it,"animate",z)}if(K&&w(K.prototype,"getGraphPath",M),J){let it=J.prototype;w(it,"getPointSpline",N),Y&&(Y.prototype.getPointSpline=it.getPointSpline)}}}constructor(B){this.series=B}arc(B,W,V,U){let q=this.series,H=q.xAxis.center,Y=q.yAxis.len,Z=H[3]/2,K=Y-W+Z,J=Y-x(B,Y)+Z;return q.yAxis.reversed&&(K<0&&(K=Z),J<0&&(J=Z)),{x:H[0],y:H[1],r:K,innerR:J,start:V,end:U}}toXY(B){let W=this.series,V=W.chart,U=W.xAxis,q=W.yAxis,H=B.plotX,Y=V.inverted,Z=B.y,K=B.plotY,J=Y?H:q.len-K,tt;if(Y&&W&&!W.isRadialBar&&(B.plotY=K=b(Z)?q.translate(Z):0),B.rectPlotX=H,B.rectPlotY=K,q.center&&(J+=q.center[3]/2),b(K)){let $=Y?q.postTranslate(K,J):U.postTranslate(H,J);B.plotX=B.polarPlotX=$.x-V.plotLeft,B.plotY=B.polarPlotY=$.y-V.plotTop}W.kdByAngle?((tt=(H/Math.PI*180+U.pane.options.startAngle)%360)<0&&(tt+=360),B.clientX=tt):B.clientX=B.plotX}}return X}),i(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(e,s,r){var n;let{composed:l}=e,{addEvent:a,objectEach:h,pushUnique:c}=r;return function(f){function u(){let m=this.waterfall.stacks;m&&(m.changed=!1,delete m.alreadyChanged)}function p(){let m=this.options.stackLabels;m&&m.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function b(){this.waterfall||(this.waterfall=new x(this))}function v(){let m=this.axes;for(let E of this.series)if(E.options.stacking){for(let L of m)L.isXAxis||(L.waterfall.stacks.changed=!0);break}}f.compose=function(m,E){c(l,"Axis.Waterfall")&&(a(m,"init",b),a(m,"afterBuildStacks",u),a(m,"afterRender",p),a(E,"beforeRedraw",v))};class x{constructor(E){this.axis=E,this.stacks={changed:!1}}renderStackTotals(){let E=this.axis,L=E.waterfall.stacks,S=E.stacking&&E.stacking.stackTotalGroup,w=new s(E,E.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=w,S&&h(L,R=>{h(R,(O,I)=>{w.total=O.stackTotal,w.x=+I,O.label&&(w.label=O.label),s.prototype.render.call(w,S),O.label=w.label,delete w.label})}),w.total=null}}f.Composition=x}(n||(n={})),n}),i(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(e,s,r){let{isNumber:n}=r;class l extends e.prototype.pointClass{getClassName(){let h=s.prototype.getClassName.call(this);return this.isSum?h+=" highcharts-sum":this.isIntermediateSum&&(h+=" highcharts-intermediate-sum"),h}isValid(){return n(this.y)||this.isSum||!!this.isIntermediateSum}}return l}),i(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),i(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(e,s,r,n,l){let{column:a,line:h}=e.seriesTypes,{addEvent:c,arrayMax:f,arrayMin:u,correctFloat:p,crisp:b,extend:v,isNumber:x,merge:m,objectEach:E,pick:L}=s;function S(R,O){return Object.hasOwnProperty.call(R,O)}class w extends a{generatePoints(){a.prototype.generatePoints.apply(this);for(let O=0,I=this.points.length;O<I;O++){let _=this.points[O],A=this.processedYData[O];x(A)&&(_.isIntermediateSum||_.isSum)&&(_.y=p(A))}}processData(O){let I,_,A,F,P,D,C=this.options,d=this.yData,g=C.data,y=d.length,M=C.threshold||0;A=_=F=P=0;for(let k=0;k<y;k++)D=d[k],I=g&&g[k]?g[k]:{},D==="sum"||I.isSum?d[k]=p(A):D==="intermediateSum"||I.isIntermediateSum?(d[k]=p(_),_=0):(A+=D,_+=D),F=Math.min(A,F),P=Math.max(A,P);super.processData.call(this,O),C.stacking||(this.dataMin=F+M,this.dataMax=P)}toYData(O){return O.isSum?"sum":O.isIntermediateSum?"intermediateSum":O.y}updateParallelArrays(O,I){super.updateParallelArrays.call(this,O,I),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(O,I){let _=this.options.upColor;_&&!O.options.color&&x(O.y)&&(O.color=O.y>0?_:void 0);let A=a.prototype.pointAttribs.call(this,O,I);return delete A.dashstyle,A}getGraphPath(){return[["M",0,0]]}getCrispPath(){let O=this.data.filter(d=>x(d.y)),I=this.yAxis,_=O.length,A=this.graph?.strokeWidth()||0,F=this.xAxis.reversed,P=this.yAxis.reversed,D=this.options.stacking,C=[];for(let d=1;d<_;d++){if(!(this.options.connectNulls||x(this.data[O[d].index-1].y)))continue;let g=O[d].box,y=O[d-1],M=y.y||0,k=O[d-1].box;if(!g||!k)continue;let T=I.waterfall.stacks[this.stackKey],z=M>0?-k.height:0;if(T&&k&&g){let N,G=T[d-1];if(D){let X=G.connectorThreshold;N=b(I.translate(X,!1,!0,!1,!0)+(P?z:0),A)}else N=b(k.y+(y.minPointLengthOffset||0),A);C.push(["M",(k.x||0)+(F?0:k.width||0),N],["L",(g.x||0)+(F&&g.width||0),N])}if(k&&C.length&&(!D&&M<0&&!P||M>0&&P)){let N=C[C.length-2];N&&typeof N[2]=="number"&&(N[2]+=k.height||0);let G=C[C.length-1];G&&typeof G[2]=="number"&&(G[2]+=k.height||0)}}return C}drawGraph(){h.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(O){let I=this.options,_=O.waterfall?.stacks,A=I.threshold||0,F=this.stackKey,P=this.xData,D=P.length,C=A,d=C,g,y=0,M=0,k=0,T,z,N,G,X,j,B,W,V=(U,q,H,Y)=>{if(g){if(T)for(;H<T;H++)g.stackState[H]+=Y;else g.stackState[0]=U,T=g.stackState.length;g.stackState.push(g.stackState[T-1]+q)}};if(O.stacking&&_&&this.reserveSpace()){W=_.changed,(B=_.alreadyChanged)&&0>B.indexOf(F)&&(W=!0),_[F]||(_[F]={});let U=_[F];if(U)for(let q=0;q<D;q++)(!U[j=P[q]]||W)&&(U[j]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:W&&U[j]?U[j].label:void 0}),g=U[j],(X=this.yData[q])>=0?g.posTotal+=X:g.negTotal+=X,G=I.data[q],z=g.absolutePos=g.posTotal,N=g.absoluteNeg=g.negTotal,g.stackTotal=z+N,T=g.stackState.length,G&&G.isIntermediateSum?(V(k,M,0,k),k=M,M=A,C^=d,d^=C,C^=d):G&&G.isSum?(V(A,y,T,0),C=A):(V(C,X,0,y),G&&(y+=X,M+=X)),g.stateIndex++,g.threshold=C,C+=g.stackTotal;_.changed=!1,_.alreadyChanged||(_.alreadyChanged=[]),_.alreadyChanged.push(F)}}getExtremes(){let O,I,_,A=this.options.stacking;return A?(O=this.yAxis.waterfall.stacks,I=this.stackedYNeg=[],_=this.stackedYPos=[],A==="overlap"?E(O[this.stackKey],function(F){I.push(u(F.stackState)),_.push(f(F.stackState))}):E(O[this.stackKey],function(F){I.push(F.negTotal+F.threshold),_.push(F.posTotal+F.threshold)}),{dataMin:u(I),dataMax:f(_)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return w.defaultOptions=m(a.defaultOptions,l),w.compose=r.compose,v(w.prototype,{pointValKey:"y",showLine:!0,pointClass:n}),c(w,"afterColumnTranslate",function(){let{options:R,points:O,yAxis:I}=this,_=L(R.minPointLength,5),A=_/2,F=R.threshold||0,P=R.stacking,D=I.waterfall.stacks[this.stackKey],C=F,d=F,g,y,M,k;for(let T=0;T<O.length;T++){let z=O[T],N=this.processedYData[T],G=v({x:0,y:0,width:0,height:0},z.shapeArgs||{});z.box=G;let X=[0,N],j=z.y||0;if(P){if(D){let V=D[T];P==="overlap"?(y=V.stackState[V.stateIndex--],g=j>=0?y:y-j,S(V,"absolutePos")&&delete V.absolutePos,S(V,"absoluteNeg")&&delete V.absoluteNeg):(j>=0?(y=V.threshold+V.posTotal,V.posTotal-=j,g=y):(y=V.threshold+V.negTotal,V.negTotal-=j,g=y-j),!V.posTotal&&x(V.absolutePos)&&S(V,"absolutePos")&&(V.posTotal=V.absolutePos,delete V.absolutePos),!V.negTotal&&x(V.absoluteNeg)&&S(V,"absoluteNeg")&&(V.negTotal=V.absoluteNeg,delete V.absoluteNeg)),z.isSum||(V.connectorThreshold=V.threshold+V.stackTotal),I.reversed?(M=j>=0?g-j:g+j,k=g):(M=g,k=g-j),z.below=M<=F,G.y=I.translate(M,!1,!0,!1,!0),G.height=Math.abs(G.y-I.translate(k,!1,!0,!1,!0));let U=I.waterfall.dummyStackItem;U&&(U.x=T,U.label=D[T].label,U.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[T],this.stackedYPos[T],void 0,this.xAxis))}}else g=Math.max(d,d+j)+X[0],G.y=I.translate(g,!1,!0,!1,!0),z.isSum?(G.y=I.translate(X[1],!1,!0,!1,!0),G.height=Math.min(I.translate(X[0],!1,!0,!1,!0),I.len)-G.y,z.below=X[1]<=F):z.isIntermediateSum?(j>=0?(M=X[1]+C,k=C):(M=C,k=X[1]+C),I.reversed&&(M^=k,k^=M,M^=k),G.y=I.translate(M,!1,!0,!1,!0),G.height=Math.abs(G.y-Math.min(I.translate(k,!1,!0,!1,!0),I.len)),C+=X[1],z.below=M<=F):(G.height=N>0?I.translate(d,!1,!0,!1,!0)-G.y:I.translate(d,!1,!0,!1,!0)-I.translate(d-N,!1,!0,!1,!0),d+=N,z.below=d<F),G.height<0&&(G.y+=G.height,G.height*=-1);z.plotY=G.y,z.yBottom=G.y+G.height,G.height<=_&&!z.isNull?(G.height=_,G.y-=A,z.yBottom=G.y+G.height,z.plotY=G.y,j<0?z.minPointLengthOffset=-A:z.minPointLengthOffset=A):(z.isNull&&(G.width=0),z.minPointLengthOffset=0);let B=z.plotY+(z.negative?G.height:0);z.below&&(z.plotY+=G.height),z.tooltipPos&&(this.chart.inverted?z.tooltipPos[0]=I.len-B:z.tooltipPos[1]=B),z.isInside=this.isPointInside(z);let W=b(z.yBottom,this.borderWidth);G.y=b(G.y,this.borderWidth),G.height=W-G.y,m(!0,z.shapeArgs,G)}},{order:2}),e.registerSeriesType("waterfall",w),w}),i(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(e,s,r,n,l,a,h,c){return e.RadialAxis=h,n.compose(e.Axis,e.Chart,e.Legend,e.Series),l.compose(e.Axis,e.Chart,e.Legend,e.Series),r.compose(e.Chart,e.Pointer),a.compose(e.Axis,e.Chart,e.Pointer,e.Series,e.Tick,e.Point,s.seriesTypes.areasplinerange,s.seriesTypes.column,s.seriesTypes.line,s.seriesTypes.spline),c.compose(e.Axis,e.Chart),e})})});var Zu=oi((lA,ho)=>{"use strict";(function(o){typeof ho=="object"&&ho.exports?(o.default=o,ho.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/treemap",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function i(e,s,r,n){e.hasOwnProperty(s)||(e[s]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:e[s]}})))}i(t,"Extensions/Breadcrumbs/BreadcrumbsDefaults.js",[],function(){return{lang:{mainBreadcrumb:"Main"},options:{buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#334eff"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",style:{color:"#666666",fontSize:"0.8em"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7}}}),i(t,"Extensions/Breadcrumbs/Breadcrumbs.js",[t["Extensions/Breadcrumbs/BreadcrumbsDefaults.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{format:l}=s,{composed:a}=r,{addEvent:h,defined:c,extend:f,fireEvent:u,isString:p,merge:b,objectEach:v,pick:x,pushUnique:m}=n;function E(){if(this.breadcrumbs){let I=this.resetZoomButton&&this.resetZoomButton.getBBox(),_=this.breadcrumbs.options;I&&_.position.align==="right"&&_.relativeTo==="plotBox"&&this.breadcrumbs.alignBreadcrumbsGroup(-I.width-_.buttonSpacing)}}function L(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}function S(){let I=this.breadcrumbs;if(I&&!I.options.floating&&I.level){let _=I.options,A=_.buttonTheme,F=(A.height||0)+2*(A.padding||0)+_.buttonSpacing,P=_.position.verticalAlign;P==="bottom"?(this.marginBottom=(this.marginBottom||0)+F,I.yOffset=F):P!=="middle"?(this.plotTop+=F,I.yOffset=-F):I.yOffset=void 0}}function w(){this.breadcrumbs&&this.breadcrumbs.redraw()}function R(I){I.resetSelection===!0&&this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()}class O{static compose(_,A){m(a,"Breadcrumbs")&&(h(_,"destroy",L),h(_,"afterShowResetZoom",E),h(_,"getMargins",S),h(_,"redraw",w),h(_,"selection",R),f(A.lang,e.lang))}constructor(_,A){this.elementList={},this.isDirty=!0,this.level=0,this.list=[];let F=b(_.options.drilldown&&_.options.drilldown.drillUpButton,O.defaultOptions,_.options.navigation&&_.options.navigation.breadcrumbs,A);this.chart=_,this.options=F||{}}updateProperties(_){this.setList(_),this.setLevel(),this.isDirty=!0}setList(_){this.list=_}setLevel(){this.level=this.list.length&&this.list.length-1}getLevel(){return this.level}getButtonText(_){let A=this.chart,F=this.options,P=A.options.lang,D=x(F.format,F.showFullPath?"{level.name}":"\u2190 {level.name}"),C=P&&x(P.drillUpText,P.mainBreadcrumb),d=F.formatter&&F.formatter(_)||l(D,{level:_.levelOptions},A)||"";return(p(d)&&!d.length||d==="\u2190 ")&&c(C)&&(d=F.showFullPath?C:"\u2190 "+C),d}redraw(){this.isDirty&&this.render(),this.group&&this.group.align(),this.isDirty=!1}render(){let _=this.chart,A=this.options;!this.group&&A&&(this.group=_.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:A.zIndex}).add()),A.showFullPath?this.renderFullPathButtons():this.renderSingleButton(),this.alignBreadcrumbsGroup()}renderFullPathButtons(){this.destroySingleButton(),this.resetElementListState(),this.updateListElements(),this.destroyListElements()}renderSingleButton(){let _=this.chart,A=this.list,F=this.options.buttonSpacing;this.destroyListElements();let P=this.group?this.group.getBBox().width:F,D=A[A.length-2];!_.drillUpButton&&this.level>0?_.drillUpButton=this.renderButton(D,P,F):_.drillUpButton&&(this.level>0?this.updateSingleButton():this.destroySingleButton())}alignBreadcrumbsGroup(_){if(this.group){let A=this.options,F=A.buttonTheme,P=A.position,D=A.relativeTo==="chart"||A.relativeTo==="spacingBox"?void 0:"plotBox",C=this.group.getBBox(),d=2*(F.padding||0)+A.buttonSpacing;P.width=C.width+d,P.height=C.height+d;let g=b(P);_&&(g.x+=_),this.options.rtl&&(g.x+=P.width),g.y=x(g.y,this.yOffset,0),this.group.align(g,!0,D)}}renderButton(_,A,F){let P=this,D=this.chart,C=P.options,d=b(C.buttonTheme),g=D.renderer.button(P.getButtonText(_),A,F,function(y){let M,k=C.events&&C.events.click;k&&(M=k.call(P,y,_)),M!==!1&&(C.showFullPath?y.newLevel=_.level:y.newLevel=P.level-1,u(P,"up",y))},d).addClass("highcharts-breadcrumbs-button").add(P.group);return D.styledMode||g.attr(C.style),g}renderSeparator(_,A){let F=this.chart,P=this.options.separator,D=F.renderer.label(P.text,_,A,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group);return F.styledMode||D.css(P.style),D}update(_){b(!0,this.options,_),this.destroy(),this.isDirty=!0}updateSingleButton(){let _=this.chart,A=this.list[this.level-1];_.drillUpButton&&_.drillUpButton.attr({text:this.getButtonText(A)})}destroy(){this.destroySingleButton(),this.destroyListElements(!0),this.group&&this.group.destroy(),this.group=void 0}destroyListElements(_){let A=this.elementList;v(A,(F,P)=>{(_||!A[P].updated)&&((F=A[P]).button&&F.button.destroy(),F.separator&&F.separator.destroy(),delete F.button,delete F.separator,delete A[P])}),_&&(this.elementList={})}destroySingleButton(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)}resetElementListState(){v(this.elementList,_=>{_.updated=!1})}updateListElements(){let _=this.elementList,A=this.options.buttonSpacing,F=this.list,P=this.options.rtl,D=P?-1:1,C=function(k,T){return D*k.getBBox().width+D*T},d=function(k,T,z){k.translate(T-k.getBBox().width,z)},g=this.group?C(this.group,A):A,y,M;for(let k=0,T=F.length;k<T;++k){let z,N,G=k===T-1;_[(M=F[k]).level]?(z=(y=_[M.level]).button,y.separator||G?y.separator&&G&&(y.separator.destroy(),delete y.separator):(g+=D*A,y.separator=this.renderSeparator(g,A),P&&d(y.separator,g,A),g+=C(y.separator,A)),_[M.level].updated=!0):(z=this.renderButton(M,g,A),P&&d(z,g,A),g+=C(z,A),G||(N=this.renderSeparator(g,A),P&&d(N,g,A),g+=C(N,A)),_[M.level]={button:z,separator:N,updated:!0}),z&&z.setState(G?2:0)}}}return O.defaultOptions=e.options,O}),i(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(e,s,r){var n;let{column:{prototype:l}}=e.seriesTypes,{addEvent:a,defined:h}=r;return function(c){function f(u){let p=this.series,b=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new s(b,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),u?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${b.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(u){let p={};return h(u.color)&&(!u.state||u.state==="normal")&&(p[this.colorProp||"fill"]=u.color),p},pointAttribs:l.pointAttribs},c.compose=function(u){return a(u.prototype.pointClass,"afterSetState",f),u}}(n||(n={})),n}),i(t,"Series/Treemap/TreemapAlgorithmGroup.js",[],function(){return class{constructor(e,s,r,n){this.height=e,this.width=s,this.plot=n,this.direction=r,this.startDirection=r,this.total=0,this.nW=0,this.lW=0,this.nH=0,this.lH=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(l,a){return Math.max(l/a,a/l)}}}addElement(e){this.lP.total=this.elArr[this.elArr.length-1],this.total=this.total+e,this.direction===0?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)}reset(){this.nW=0,this.lW=0,this.elArr=[],this.total=0}}}),i(t,"Series/Treemap/TreemapNode.js",[],function(){return class{constructor(){this.childrenTotal=0,this.visible=!1}init(e,s,r,n,l,a,h){return this.id=e,this.i=s,this.children=r,this.height=n,this.level=l,this.series=a,this.parent=h,this}}}),i(t,"Series/DrawPointUtilities.js",[],function(){return{draw:function(e,s){let{animatableAttribs:r,onComplete:n,css:l,renderer:a}=s,h=e.series&&e.series.chart.hasRendered?void 0:e.series&&e.series.options.animation,c=e.graphic;if(s.attribs=ns(Se({},s.attribs),{class:e.getClassName()}),e.shouldDraw())c||(c=s.shapeType==="text"?a.text():s.shapeType==="image"?a.image(s.imageUrl||"").attr(s.shapeArgs||{}):a[s.shapeType](s.shapeArgs||{}),e.graphic=c,c.add(s.group)),l&&c.css(l),c.attr(s.attribs).animate(r,!s.isNew&&h,n);else if(c){let f=()=>{e.graphic=c=c&&c.destroy(),typeof n=="function"&&n()};Object.keys(r).length?c.animate(r,void 0,()=>f()):f()}}}}),i(t,"Series/Treemap/TreemapPoint.js",[t["Series/DrawPointUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{pie:{prototype:{pointClass:n}},scatter:{prototype:{pointClass:l}}}=s.seriesTypes,{extend:a,isNumber:h,pick:c}=r;class f extends l{constructor(){super(...arguments),this.shapeType="rect"}draw(p){e.draw(this,p)}getClassName(){let p=this.series,b=p.options,v=super.getClassName();return this.node.level<=p.nodeMap[p.rootNode].level?v+=" highcharts-above-level":this.node.isLeaf||c(b.interactByLeaf,!b.allowTraversingTree)?this.node.isLeaf||(v+=" highcharts-internal-node"):v+=" highcharts-internal-node-interactive",v}isValid(){return!!(this.id||h(this.value))}setState(p){super.setState.apply(this,arguments),this.graphic&&this.graphic.attr({zIndex:p==="hover"?1:0})}shouldDraw(){return h(this.plotY)&&this.y!==null}}return a(f.prototype,{setVisible:n.prototype.setVisible}),f}),i(t,"Series/Treemap/TreemapSeriesDefaults.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s){let{isString:r}=s;return{allowTraversingTree:!1,animationLimit:250,borderRadius:0,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{defer:!1,enabled:!0,formatter:function(){let n=this&&this.point?this.point:{};return r(n.name)?n.name:""},inside:!0,verticalAlign:"middle"},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:"#999999",brightness:e.seriesTypes.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}},legendSymbol:"rectangle"}}),i(t,"Series/Treemap/TreemapUtilities.js",[],function(){var e;return(e||(e={})).recursive=function s(r,n,l){let a=n.call(l||this,r);a!==!1&&s(a,n,l)},e}),i(t,"Series/TreeUtilities.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,s){let{extend:r,isArray:n,isNumber:l,isObject:a,merge:h,pick:c,relativeLength:f}=s;return{getColor:function(u,p){let b,v,x,m,E,L,S=p.index,w=p.mapOptionsToLevel,R=p.parentColor,O=p.parentColorIndex,I=p.series,_=p.colors,A=p.siblings,F=I.points,P=I.chart.options.chart;return u&&(b=F[u.i],v=w[u.level]||{},b&&v.colorByPoint&&(m=b.index%(_?_.length:P.colorCount),x=_&&_[m]),I.chart.styledMode||(E=c(b&&b.options.color,v&&v.color,x,R&&(D=>{let C=v&&v.colorVariation;return C&&C.key==="brightness"&&S&&A?e.parse(D).brighten(C.to*(S/A)).get():D})(R),I.color)),L=c(b&&b.options.colorIndex,v&&v.colorIndex,m,O,p.colorIndex)),{color:E,colorIndex:L}},getLevelOptions:function(u){let p,b,v,x,m,E,L={};if(a(u))for(x=l(u.from)?u.from:1,E=u.levels,b={},p=a(u.defaults)?u.defaults:{},n(E)&&(b=E.reduce((S,w)=>{let R,O,I;return a(w)&&l(w.level)&&(O=c((I=h({},w)).levelIsConstant,p.levelIsConstant),delete I.levelIsConstant,delete I.level,a(S[R=w.level+(O?0:x-1)])?h(!0,S[R],I):S[R]=I),S},{})),m=l(u.to)?u.to:1,v=0;v<=m;v++)L[v]=h({},p,a(b[v])?b[v]:{});return L},getNodeWidth:function(u,p){let{chart:b,options:v}=u,{nodeDistance:x=0,nodeWidth:m=0}=v,{plotSizeX:E=1}=b;if(m==="auto"){if(typeof x=="string"&&/%$/.test(x))return E/(p+parseFloat(x)/100*(p-1));let L=Number(x);return(E+L)/(p||1)-L}return f(m,E)},setTreeValues:function u(p,b){let v=b.before,x=b.idRoot,m=b.mapIdToNode[x],E=b.levelIsConstant!==!1,L=b.points[p.i],S=L&&L.options||{},w=[],R=0;p.levelDynamic=p.level-(E?0:m.level),p.name=c(L&&L.name,""),p.visible=x===p.id||b.visible===!0,typeof v=="function"&&(p=v(p,b)),p.children.forEach((I,_)=>{let A=r({},b);r(A,{index:_,siblings:p.children.length,visible:p.visible}),I=u(I,A),w.push(I),I.visible&&(R+=I.val)});let O=c(S.value,R);return p.visible=O>=0&&(R>0||p.visible),p.children=w,p.childrenTotal=R,p.isLeaf=p.visible&&!R,p.val=O,p},updateRootId:function(u){let p,b;return a(u)&&(b=a(u.options)?u.options:{},p=c(u.rootNode,b.rootId,""),a(u.userOptions)&&(u.userOptions.rootId=p),u.rootNode=p),p}}}),i(t,"Series/Treemap/TreemapSeries.js",[t["Extensions/Breadcrumbs/Breadcrumbs.js"],t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Treemap/TreemapAlgorithmGroup.js"],t["Series/Treemap/TreemapNode.js"],t["Series/Treemap/TreemapPoint.js"],t["Series/Treemap/TreemapSeriesDefaults.js"],t["Series/Treemap/TreemapUtilities.js"],t["Series/TreeUtilities.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c,f,u,p,b){let{parse:v}=s,{composed:x,noop:m}=n,{column:E,scatter:L}=l.seriesTypes,{getColor:S,getLevelOptions:w,updateRootId:R}=p,{addEvent:O,correctFloat:I,crisp:_,defined:A,error:F,extend:P,fireEvent:D,isArray:C,isObject:d,isString:g,merge:y,pick:M,pushUnique:k,stableSort:T}=b,z=!1;function N(){let X,j=this.xAxis,B=this.yAxis;j&&B&&(this.is("treemap")?(X={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,minPadding:0,max:100,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]},P(B.options,X),P(j.options,X),z=!0):z&&(B.setOptions(B.userOptions),j.setOptions(j.userOptions),z=!1))}class G extends L{static compose(j){k(x,"TreemapSeries")&&O(j,"afterBindAxes",N)}algorithmCalcPoints(j,B,W,V){let U=W.plot,q=W.elArr.length-1,H,Y,Z,K,J=W.lW,tt=W.lH,$,Q=0;for(let et of(B?(J=W.nW,tt=W.nH):$=W.elArr[q],W.elArr))(B||Q<q)&&(W.direction===0?(H=U.x,Y=U.y,K=et/(Z=J)):(H=U.x,Y=U.y,Z=et/(K=tt)),V.push({x:H,y:Y,width:Z,height:I(K)}),W.direction===0?U.y=U.y+K:U.x=U.x+Z),Q+=1;W.reset(),W.direction===0?W.width=W.width-J:W.height=W.height-tt,U.y=U.parent.y+(U.parent.height-W.height),U.x=U.parent.x+(U.parent.width-W.width),j&&(W.direction=1-W.direction),B||W.addElement($)}algorithmFill(j,B,W){let V=[],U,q=B.direction,H=B.x,Y=B.y,Z=B.width,K=B.height,J,tt,$,Q;for(let et of W)U=B.width*B.height*(et.val/B.val),J=H,tt=Y,q===0?(Z-=$=U/(Q=K),H+=$):(K-=Q=U/($=Z),Y+=Q),V.push({x:J,y:tt,width:$,height:Q}),j&&(q=1-q);return V}algorithmLowAspectRatio(j,B,W){let V=[],U={x:B.x,y:B.y,parent:B},q=B.direction,H=W.length-1,Y=new a(B.height,B.width,q,U),Z,K=0;for(let J of W)Z=B.width*B.height*(J.val/B.val),Y.addElement(Z),Y.lP.nR>Y.lP.lR&&this.algorithmCalcPoints(j,!1,Y,V,U),K===H&&this.algorithmCalcPoints(j,!0,Y,V,U),++K;return V}alignDataLabel(j,B,W){let V=W.style;V&&!A(V.textOverflow)&&B.text&&B.getBBox().width>(B.text.textWidth||0)&&B.css({textOverflow:"ellipsis",width:V.width+="px"}),E.prototype.alignDataLabel.apply(this,arguments),j.dataLabel&&j.dataLabel.attr({zIndex:(j.node.zIndex||0)+1})}calculateChildrenAreas(j,B){let W=this.options,V=this.mapOptionsToLevel[j.level+1],U=M(this[V&&V.layoutAlgorithm]&&V.layoutAlgorithm,W.layoutAlgorithm),q=W.alternateStartingDirection,H=j.children.filter(K=>!K.ignore),Y=[];V&&V.layoutStartingDirection&&(B.direction=V.layoutStartingDirection==="vertical"?0:1),Y=this[U](B,H);let Z=-1;for(let K of H){let J=Y[++Z];K.values=y(J,{val:K.childrenTotal,direction:q?1-B.direction:B.direction}),K.pointValues=y(J,{x:J.x/this.axisRatio,y:100-J.y-J.height,width:J.width/this.axisRatio}),K.children.length&&this.calculateChildrenAreas(K,K.values)}}createList(j){let B=this.chart,W=B.breadcrumbs,V=[];if(W){let U=0;V.push({level:U,levelOptions:B.series[0]});let q=j.target.nodeMap[j.newRootId],H=[];for(;q.parent||q.parent==="";)H.push(q),q=j.target.nodeMap[q.parent];for(let Y of H.reverse())V.push({level:++U,levelOptions:Y});V.length<=1&&(V.length=0)}return V}drawDataLabels(){let j,B,W=this.mapOptionsToLevel;for(let V of this.points.filter(function(U){return U.node.visible}))B=W[V.node.level],j={style:{}},V.node.isLeaf||(j.enabled=!1),B&&B.dataLabels&&(j=y(j,B.dataLabels),this.hasDataLabels=()=>!0),V.shapeArgs&&(j.style.width=V.shapeArgs.width,V.dataLabel&&V.dataLabel.css({width:V.shapeArgs.width+"px"})),V.dlOptions=y(j,V.options.dataLabels);super.drawDataLabels()}drawPoints(j=this.points){let B=this.chart,W=B.renderer,V=B.styledMode,U=this.options,q=V?{}:U.shadow,H=U.borderRadius,Y=B.pointCount<U.animationLimit,Z=U.allowTraversingTree;for(let K of j){let J=K.node.levelDynamic,tt={},$={},Q={},et="level-group-"+K.node.level,it=!!K.graphic,st=Y&&it,rt=K.shapeArgs;K.shouldDraw()&&(K.isInside=!0,H&&($.r=H),y(!0,st?tt:$,it?rt:{},V?{}:this.pointAttribs(K,K.selected?"select":void 0)),this.colorAttribs&&V&&P(Q,this.colorAttribs(K)),this[et]||(this[et]=W.g(et).attr({zIndex:1e3-(J||0)}).add(this.group),this[et].survive=!0)),K.draw({animatableAttribs:tt,attribs:$,css:Q,group:this[et],imageUrl:K.imageUrl,renderer:W,shadow:q,shapeArgs:rt,shapeType:K.shapeType}),Z&&K.graphic&&(K.drillId=U.interactByLeaf?this.drillToByLeaf(K):this.drillToByGroup(K))}}drillToByGroup(j){let B=!1;return j.node.isLeaf||j.node.level-this.nodeMap[this.rootNode].level!=1||(B=j.id),B}drillToByLeaf(j){let B=!1,W;if(j.node.parent!==this.rootNode&&j.node.isLeaf)for(W=j.node;!B;)(W=this.nodeMap[W.parent]).parent===this.rootNode&&(B=W.id);return B}drillToNode(j,B){F(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"}),this.setRootNode(j,B)}drillUp(){let j=this.nodeMap[this.rootNode];j&&g(j.parent)&&this.setRootNode(j.parent,!0,{trigger:"traverseUpButton"})}getExtremes(){let{dataMin:j,dataMax:B}=super.getExtremes(this.colorValueData);return this.valueMin=j,this.valueMax=B,super.getExtremes()}getListOfParents(j,B){let W=C(j)?j:[],V=C(B)?B:[],U=W.reduce(function(q,H,Y){let Z=M(H.parent,"");return q[Z]===void 0&&(q[Z]=[]),q[Z].push(Y),q},{"":[]});for(let q of Object.keys(U)){let H=U[q];if(q!==""&&V.indexOf(q)===-1){for(let Y of H)U[""].push(Y);delete U[q]}}return U}getTree(){let j=this.data.map(function(W){return W.id}),B=this.getListOfParents(this.data,j);return this.nodeMap={},this.nodeList=[],this.buildTree("",-1,0,B)}buildTree(j,B,W,V,U){let q=[],H=this.points[B],Y=0,Z;for(let J of V[j]||[])Y=Math.max((Z=this.buildTree(this.points[J].id,J,W+1,V,j)).height+1,Y),q.push(Z);let K=new this.NodeClass().init(j,B,q,Y,W,this,U);for(let J of q)J.parentNode=K;return this.nodeMap[K.id]=K,this.nodeList.push(K),H&&(H.node=K,K.point=H),K}hasData(){return!!this.processedXData.length}init(j,B){let W=this,V=y(B.drillUpButton,B.breadcrumbs),U=O(W,"setOptions",q=>{let H=q.userOptions;A(H.allowDrillToNode)&&!A(H.allowTraversingTree)&&(H.allowTraversingTree=H.allowDrillToNode,delete H.allowDrillToNode),A(H.drillUpButton)&&!A(H.traverseUpButton)&&(H.traverseUpButton=H.drillUpButton,delete H.drillUpButton)});super.init(j,B),delete W.opacity,W.eventsToUnbind.push(U),W.options.allowTraversingTree&&(W.eventsToUnbind.push(O(W,"click",W.onClickDrillToNode)),W.eventsToUnbind.push(O(W,"setRootNode",function(q){let H=W.chart;H.breadcrumbs&&H.breadcrumbs.updateProperties(W.createList(q))})),W.eventsToUnbind.push(O(W,"update",function(q,H){let Y=this.chart.breadcrumbs;Y&&q.options.breadcrumbs&&Y.update(q.options.breadcrumbs)})),W.eventsToUnbind.push(O(W,"destroy",function(q){let H=this.chart;H.breadcrumbs&&!q.keepEventsForUpdate&&(H.breadcrumbs.destroy(),H.breadcrumbs=void 0)}))),j.breadcrumbs||(j.breadcrumbs=new e(j,V)),W.eventsToUnbind.push(O(j.breadcrumbs,"up",function(q){let H=this.level-q.newLevel;for(let Y=0;Y<H;Y++)W.drillUp()}))}onClickDrillToNode(j){let B=j.point,W=B&&B.drillId;g(W)&&(B.setState(""),this.setRootNode(W,!0,{trigger:"click"}))}pointAttribs(j,B){let W,V=d(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},U=j&&V[j.node.level]||{},q=this.options,H=B&&q.states&&q.states[B]||{},Y=j&&j.getClassName()||"",Z={stroke:j&&j.borderColor||U.borderColor||H.borderColor||q.borderColor,"stroke-width":M(j&&j.borderWidth,U.borderWidth,H.borderWidth,q.borderWidth),dashstyle:j&&j.borderDashStyle||U.borderDashStyle||H.borderDashStyle||q.borderDashStyle,fill:j&&j.color||this.color};return Y.indexOf("highcharts-above-level")!==-1?(Z.fill="none",Z["stroke-width"]=0):Y.indexOf("highcharts-internal-node-interactive")!==-1?(W=M(H.opacity,q.opacity),Z.fill=v(Z.fill).setOpacity(W).get(),Z.cursor="pointer"):Y.indexOf("highcharts-internal-node")!==-1?Z.fill="none":B&&(Z.fill=v(Z.fill).brighten(H.brightness).get()),Z}setColorRecursive(j,B,W,V,U){let q=this&&this.chart,H=q&&q.options&&q.options.colors;if(j){let Y=S(j,{colors:H,index:V,mapOptionsToLevel:this.mapOptionsToLevel,parentColor:B,parentColorIndex:W,series:this,siblings:U}),Z=this.points[j.i];Z&&(Z.color=Y.color,Z.colorIndex=Y.colorIndex);let K=-1;for(let J of j.children||[])this.setColorRecursive(J,Y.color,Y.colorIndex,++K,j.children.length)}}setPointValues(){let j=this,{points:B,xAxis:W,yAxis:V}=j,U=j.chart.styledMode,q=H=>U?0:j.pointAttribs(H)["stroke-width"]||0;for(let H of B){let{pointValues:Y,visible:Z}=H.node;if(Y&&Z){let{height:K,width:J,x:tt,y:$}=Y,Q=q(H),et=_(W.toPixels(tt,!0),Q,!0),it=_(W.toPixels(tt+J,!0),Q,!0),st=_(V.toPixels($,!0),Q,!0),rt=_(V.toPixels($+K,!0),Q,!0),nt={x:Math.min(et,it),y:Math.min(st,rt),width:Math.abs(it-et),height:Math.abs(rt-st)};H.plotX=nt.x+nt.width/2,H.plotY=nt.y+nt.height/2,H.shapeArgs=nt}else delete H.plotX,delete H.plotY}}setRootNode(j,B,W){D(this,"setRootNode",P({newRootId:j,previousRootId:this.rootNode,redraw:M(B,!0),series:this},W),function(V){let U=V.series;U.idPreviousRoot=V.previousRootId,U.rootNode=V.newRootId,U.isDirty=!0,V.redraw&&U.chart.redraw()})}setState(j){this.options.inactiveOtherPoints=!0,super.setState(j,!1),this.options.inactiveOtherPoints=!1}setTreeValues(j){let B=this.options,W=this.rootNode,V=this.nodeMap[W],U=typeof B.levelIsConstant!="boolean"||B.levelIsConstant,q=[],H=this.points[j.i],Y=0;for(let K of j.children)K=this.setTreeValues(K),q.push(K),K.ignore||(Y+=K.val);T(q,(K,J)=>(K.sortIndex||0)-(J.sortIndex||0));let Z=M(H&&H.options.value,Y);return H&&(H.value=Z),P(j,{children:q,childrenTotal:Y,ignore:!(M(H&&H.visible,!0)&&Z>0),isLeaf:j.visible&&!Y,levelDynamic:j.level-(U?0:V.level),name:M(H&&H.name,""),sortIndex:M(H&&H.sortIndex,-Z),val:Z}),j}sliceAndDice(j,B){return this.algorithmFill(!0,j,B)}squarified(j,B){return this.algorithmLowAspectRatio(!0,j,B)}strip(j,B){return this.algorithmLowAspectRatio(!1,j,B)}stripes(j,B){return this.algorithmFill(!1,j,B)}translate(){let j=this,B=j.options,W=R(j),V,U,q,H;super.translate();let Y=j.tree=j.getTree();V=j.nodeMap[W],W===""||V&&V.children.length||(j.setRootNode("",!1),W=j.rootNode,V=j.nodeMap[W]),j.mapOptionsToLevel=w({from:V.level+1,levels:B.levels,to:Y.height,defaults:{levelIsConstant:j.options.levelIsConstant,colorByPoint:B.colorByPoint}}),u.recursive(j.nodeMap[j.rootNode],Z=>{let K=Z.parent,J=!1;return Z.visible=!0,(K||K==="")&&(J=j.nodeMap[K]),J}),u.recursive(j.nodeMap[j.rootNode].children,Z=>{let K=!1;for(let J of Z)J.visible=!0,J.children.length&&(K=(K||[]).concat(J.children));return K}),j.setTreeValues(Y),j.axisRatio=j.xAxis.len/j.yAxis.len,j.nodeMap[""].pointValues=U={x:0,y:0,width:100,height:100},j.nodeMap[""].values=q=y(U,{width:U.width*j.axisRatio,direction:B.layoutStartingDirection==="vertical"?0:1,val:Y.val}),j.calculateChildrenAreas(Y,q),j.colorAxis||B.colorByPoint||j.setColorRecursive(j.tree),B.allowTraversingTree&&(H=V.pointValues,j.xAxis.setExtremes(H.x,H.x+H.width,!1),j.yAxis.setExtremes(H.y,H.y+H.height,!1),j.xAxis.setScale(),j.yAxis.setScale()),j.setPointValues()}}return G.defaultOptions=y(L.defaultOptions,f),P(G.prototype,{buildKDTree:m,colorAttribs:r.seriesMembers.colorAttribs,colorKey:"colorValue",directTouch:!0,getExtremesFromAll:!0,getSymbol:m,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value"],pointClass:c,NodeClass:h,trackerGroups:["group","dataLabelsGroup"],utils:u}),r.compose(G),l.registerSeriesType("treemap",G),G}),i(t,"masters/modules/treemap.src.js",[t["Core/Globals.js"],t["Extensions/Breadcrumbs/Breadcrumbs.js"],t["Series/Treemap/TreemapSeries.js"]],function(e,s,r){return e.Breadcrumbs=e.Breadcrumbs||s,e.Breadcrumbs.compose(e.Chart,e.defaultOptions),r.compose(e.Series),e})})});var Ku=oi((uA,co)=>{"use strict";(function(o){typeof co=="object"&&co.exports?(o.default=o,co.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/heatmap",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function i(e,s,r,n){e.hasOwnProperty(s)||(e[s]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:e[s]}})))}i(t,"Core/Axis/Color/ColorAxisComposition.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,s){var r;let{parse:n}=e,{addEvent:l,extend:a,merge:h,pick:c,splat:f}=s;return function(u){let p;function b(){let{userOptions:I}=this;this.colorAxis=[],I.colorAxis&&(I.colorAxis=f(I.colorAxis),I.colorAxis.map(_=>new p(this,_)))}function v(I){let _=this.chart.colorAxis||[],A=C=>{let d=I.allItems.indexOf(C);d!==-1&&(this.destroyItem(I.allItems[d]),I.allItems.splice(d,1))},F=[],P,D;for(_.forEach(function(C){(P=C.options)&&P.showInLegend&&(P.dataClasses&&P.visible?F=F.concat(C.getDataClassLegendSymbols()):P.visible&&F.push(C),C.series.forEach(function(d){(!d.options.showInLegend||P.dataClasses)&&(d.options.legendType==="point"?d.points.forEach(function(g){A(g)}):A(d))}))}),D=F.length;D--;)I.allItems.unshift(F[D])}function x(I){I.visible&&I.item.legendColor&&I.item.legendItem.symbol.attr({fill:I.item.legendColor})}function m(I){this.chart.colorAxis?.forEach(_=>{_.update({},I.redraw)})}function E(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function L(){let I=this.axisTypes;I?I.indexOf("colorAxis")===-1&&I.push("colorAxis"):this.axisTypes=["colorAxis"]}function S(I){let _=this,A=I?"show":"hide";_.visible=_.options.visible=!!I,["graphic","dataLabel"].forEach(function(F){_[F]&&_[F][A]()}),this.series.buildKDTree()}function w(){let I=this,_=this.data.length?this.data:this.points,A=this.options.nullColor,F=this.colorAxis,P=this.colorKey;_.forEach(D=>{let C=D.getNestedProperty(P),d=D.options.color||(D.isNull||D.value===null?A:F&&C!==void 0?F.toColor(C,D):D.color||I.color);d&&D.color!==d&&(D.color=d,I.options.legendType==="point"&&D.legendItem&&D.legendItem.label&&I.chart.legend.colorizeItem(D,D.visible))})}function R(){this.elem.attr("fill",n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}function O(){this.elem.attr("stroke",n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}u.compose=function(I,_,A,F,P){let D=_.prototype,C=A.prototype,d=P.prototype;D.collectionsWithUpdate.includes("colorAxis")||(p=I,D.collectionsWithUpdate.push("colorAxis"),D.collectionsWithInit.colorAxis=[D.addColorAxis],l(_,"afterGetAxes",b),function(g){let y=g.prototype.createAxis;g.prototype.createAxis=function(M,k){if(M!=="colorAxis")return y.apply(this,arguments);let T=new p(this,h(k.axis,{index:this[M].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(z=>{z.series=[]}),this.series.forEach(z=>{z.bindAxes(),z.isDirtyData=!0}),c(k.redraw,!0)&&this.redraw(k.animation),T}}(_),C.fillSetter=R,C.strokeSetter=O,l(F,"afterGetAllItems",v),l(F,"afterColorizeItem",x),l(F,"afterUpdate",m),a(d,{optionalAxis:"colorAxis",translateColors:w}),a(d.pointClass.prototype,{setVisible:S}),l(P,"afterTranslate",E,{order:1}),l(P,"bindAxes",L))},u.pointSetVisible=S}(r||(r={})),r}),i(t,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0}}),i(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,s){var r,n;let{parse:l}=e,{merge:a}=s;return(n=r||(r={})).initDataClasses=function(h){let c=this.chart,f=this.legendItem=this.legendItem||{},u=this.options,p=h.dataClasses||[],b,v,x=c.options.chart.colorCount,m=0,E;this.dataClasses=v=[],f.labels=[];for(let L=0,S=p.length;L<S;++L)b=a(b=p[L]),v.push(b),(c.styledMode||!b.color)&&(u.dataClassColor==="category"?(c.styledMode||(x=(E=c.options.colors||[]).length,b.color=E[m]),b.colorIndex=m,++m===x&&(m=0)):b.color=l(u.minColor).tweenTo(l(u.maxColor),S<2?.5:L/(S-1)))},n.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let f=0,u=c.length;f<u;++f)c[f].color=l(c[f][1])},n.normalizedValue=function(h){let c=this.max||0,f=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-f||1)},n.toColor=function(h,c){let f,u,p,b,v,x,m=this.dataClasses,E=this.stops;if(m){for(x=m.length;x--;)if(u=(v=m[x]).from,p=v.to,(u===void 0||h>=u)&&(p===void 0||h<=p)){b=v.color,c&&(c.dataClass=x,c.colorIndex=v.colorIndex);break}}else{for(f=this.normalizedValue(h),x=E.length;x--&&!(f>E[x][0]););u=E[x]||E[x+1],f=1-((p=E[x+1]||u)[0]-f)/(p[0]-u[0]||1),b=u.color.tweenTo(p.color,f)}return b},r}),i(t,"Core/Axis/Color/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Axis/Color/ColorAxisComposition.js"],t["Core/Axis/Color/ColorAxisDefaults.js"],t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Defaults.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c){let{defaultOptions:f}=l,{series:u}=h,{defined:p,extend:b,fireEvent:v,isArray:x,isNumber:m,merge:E,pick:L,relativeLength:S}=c;f.colorAxis=E(f.xAxis,r);class w extends e{static compose(O,I,_,A){s.compose(w,O,I,_,A)}constructor(O,I){super(O,I),this.coll="colorAxis",this.visible=!0,this.init(O,I)}init(O,I){let _=O.options.legend||{},A=I.layout?I.layout!=="vertical":_.layout!=="vertical";this.side=I.side||A?2:1,this.reversed=I.reversed||!A,this.opposite=!A,super.init(O,I,"colorAxis"),this.userOptions=I,x(O.userOptions.colorAxis)&&(O.userOptions.colorAxis[this.index]=I),I.dataClasses&&this.initDataClasses(I),this.initStops(),this.horiz=A,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(O){let I=E(f.colorAxis,O,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&O.visible!==!1});super.setOptions(I),this.options.crosshair=this.options.marker}setAxisSize(){let O=this.chart,I=this.legendItem?.symbol,{width:_,height:A}=this.getSize();I&&(this.left=+I.attr("x"),this.top=+I.attr("y"),this.width=_=+I.attr("width"),this.height=A=+I.attr("height"),this.right=O.chartWidth-this.left-_,this.bottom=O.chartHeight-this.top-A,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?_:A)||w.defaultLegendLength}getOffset(){let O=this.legendItem?.group,I=this.chart.axisOffset[this.side];if(O){this.axisParent=O,super.getOffset();let _=this.chart.legend;_.allItems.forEach(function(A){A instanceof w&&A.drawLegendSymbol(_,A)}),_.render(),this.chart.getMargins(!0),this.chart.series.some(A=>A.isDrilling)||(this.isDirty=!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=I}}setLegendColor(){let O=this.horiz,I=this.reversed,_=I?1:0,A=I?0:1,F=O?[_,0,A,0]:[0,A,0,_];this.legendColor={linearGradient:{x1:F[0],y1:F[1],x2:F[2],y2:F[3]},stops:this.stops}}drawLegendSymbol(O,I){let _=I.legendItem||{},A=O.padding,F=O.options,P=this.options.labels,D=L(F.itemDistance,10),C=this.horiz,{width:d,height:g}=this.getSize(),y=L(F.labelPadding,C?16:30);this.setLegendColor(),_.symbol||(_.symbol=this.chart.renderer.symbol("roundedRect").attr({r:F.symbolRadius??3,zIndex:1}).add(_.group)),_.symbol.attr({x:0,y:(O.baseline||0)-11,width:d,height:g}),_.labelWidth=d+A+(C?D:L(P.x,P.distance)+(this.maxLabelLength||0)),_.labelHeight=g+A+(C?y:0)}setState(O){this.series.forEach(function(I){I.setState(O)})}setVisible(){}getSeriesExtremes(){let O=this.series,I,_,A,F,P,D,C=O.length,d,g;for(this.dataMin=1/0,this.dataMax=-1/0;C--;){if(_=(D=O[C]).colorKey=L(D.options.colorKey,D.colorKey,D.pointValKey,D.zoneAxis,"y"),F=D.pointArrayMap,P=D[_+"Min"]&&D[_+"Max"],D[_+"Data"])I=D[_+"Data"];else if(F){if(I=[],A=F.indexOf(_),d=D.yData,A>=0&&d)for(g=0;g<d.length;g++)I.push(L(d[g][A],d[g]))}else I=D.yData;if(P)D.minColorValue=D[_+"Min"],D.maxColorValue=D[_+"Max"];else{let y=u.prototype.getExtremes.call(D,I);D.minColorValue=y.dataMin,D.maxColorValue=y.dataMax}p(D.minColorValue)&&p(D.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,D.minColorValue),this.dataMax=Math.max(this.dataMax,D.maxColorValue)),P||u.prototype.applyExtremes.call(D)}}drawCrosshair(O,I){let _,A=this.legendItem||{},F=I&&I.plotX,P=I&&I.plotY,D=this.pos,C=this.len;I&&((_=this.toPixels(I.getNestedProperty(I.series.colorKey)))<D?_=D-2:_>D+C&&(_=D+C+2),I.plotX=_,I.plotY=this.len-_,super.drawCrosshair(O,I),I.plotX=F,I.plotY=P,this.cross&&!this.cross.addedToColorAxis&&A.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(A.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||typeof this.crosshair!="object"||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(O){let I=this.left,_=O.translatedValue,A=this.top;return m(_)?this.horiz?[["M",_-4,A-6],["L",_+4,A-6],["L",_,A],["Z"]]:[["M",I,_],["L",I-6,_+6],["L",I-6,_-6],["Z"]]:super.getPlotLinePath(O)}update(O,I){let _=this.chart.legend;this.series.forEach(A=>{A.isDirtyData=!0}),(O.dataClasses&&_.allItems||this.dataClasses)&&this.destroyItems(),super.update(O,I),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),_.colorizeItem(this,!0))}destroyItems(){let O=this.chart,I=this.legendItem||{};if(I.label)O.legend.destroyItem(this);else if(I.labels)for(let _ of I.labels)O.legend.destroyItem(_);O.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(O){this.destroyItems(),super.remove(O)}getDataClassLegendSymbols(){let O,I=this,_=I.chart,A=I.legendItem&&I.legendItem.labels||[],F=_.options.legend,P=L(F.valueDecimals,-1),D=L(F.valueSuffix,""),C=d=>I.series.reduce((g,y)=>(g.push(...y.points.filter(M=>M.dataClass===d)),g),[]);return A.length||I.dataClasses.forEach((d,g)=>{let y=d.from,M=d.to,{numberFormatter:k}=_,T=!0;O="",y===void 0?O="< ":M===void 0&&(O="> "),y!==void 0&&(O+=k(y,P)+D),y!==void 0&&M!==void 0&&(O+=" - "),M!==void 0&&(O+=k(M,P)+D),A.push(b({chart:_,name:O,options:{},drawLegendSymbol:a.rectangle,visible:!0,isDataClass:!0,setState:z=>{for(let N of C(g))N.setState(z)},setVisible:function(){this.visible=T=I.visible=!T;let z=[];for(let N of C(g))N.setVisible(T),N.hiddenInDataClass=!T,z.indexOf(N.series)===-1&&z.push(N.series);_.legend.colorizeItem(this,T),z.forEach(N=>{v(N,"afterDataClassLegendClick")})}},d))}),A}getSize(){let{chart:O,horiz:I}=this,{height:_,width:A}=this.options,{legend:F}=O.options;return{width:L(p(A)?S(A,O.chartWidth):void 0,F?.symbolWidth,I?w.defaultLegendLength:12),height:L(p(_)?S(_,O.chartHeight):void 0,F?.symbolHeight,I?12:w.defaultLegendLength)}}}return w.defaultLegendLength=200,w.keepProps=["legendItem"],b(w.prototype,n),Array.prototype.push.apply(e.keepProps,w.keepProps),w}),i(t,"masters/modules/coloraxis.src.js",[t["Core/Globals.js"],t["Core/Axis/Color/ColorAxis.js"]],function(e,s){return e.ColorAxis=e.ColorAxis||s,e.ColorAxis.compose(e.Chart,e.Fx,e.Legend,e.Series),e}),i(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(e,s,r){var n;let{column:{prototype:l}}=e.seriesTypes,{addEvent:a,defined:h}=r;return function(c){function f(u){let p=this.series,b=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new s(b,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),u?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${b.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(u){let p={};return h(u.color)&&(!u.state||u.state==="normal")&&(p[this.colorProp||"fill"]=u.color),p},pointAttribs:l.pointAttribs},c.compose=function(u){return a(u.prototype.pointClass,"afterSetState",f),u}}(n||(n={})),n}),i(t,"Series/Heatmap/HeatmapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s){let{scatter:{prototype:{pointClass:r}}}=e.seriesTypes,{clamp:n,defined:l,extend:a,pick:h}=s;class c extends r{applyOptions(u,p){return(this.isNull||this.value===null)&&delete this.color,super.applyOptions(u,p),this.formatPrefix=this.isNull||this.value===null?"null":"point",this}getCellAttributes(){let u=this.series,p=u.options,b=(p.colsize||1)/2,v=(p.rowsize||1)/2,x=u.xAxis,m=u.yAxis,E=this.options.marker||u.options.marker,L=u.pointPlacementToXValue(),S=h(this.pointPadding,p.pointPadding,0),w={x1:n(Math.round(x.len-x.translate(this.x-b,!1,!0,!1,!0,-L)),-x.len,2*x.len),x2:n(Math.round(x.len-x.translate(this.x+b,!1,!0,!1,!0,-L)),-x.len,2*x.len),y1:n(Math.round(m.translate(this.y-v,!1,!0,!1,!0)),-m.len,2*m.len),y2:n(Math.round(m.translate(this.y+v,!1,!0,!1,!0)),-m.len,2*m.len)};for(let R of[["width","x"],["height","y"]]){let O=R[0],I=R[1],_=I+"1",A=I+"2",F=Math.abs(w[_]-w[A]),P=E&&E.lineWidth||0,D=Math.abs(w[_]+w[A])/2,C=E&&E[O];if(l(C)&&C<F){let d=C/2+P/2;w[_]=D-d,w[A]=D+d}S&&((I==="x"&&x.reversed||I==="y"&&!m.reversed)&&(_=A,A=I+"1"),w[_]+=S,w[A]-=S)}return w}haloPath(u){if(!u)return[];let{x:p=0,y:b=0,width:v=0,height:x=0}=this.shapeArgs||{};return[["M",p-u,b-u],["L",p-u,b+x+u],["L",p+v+u,b+x+u],["L",p+v+u,b-u],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}return a(c.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),c}),i(t,"Series/Heatmap/HeatmapSeriesDefaults.js",[t["Core/Utilities.js"]],function(e){let{isNumber:s}=e;return{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:n}=this.point;return s(n)?r(n,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}}),i(t,"Series/InterpolationUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){let{doc:r}=e,{defined:n,pick:l}=s;return{colorFromPoint:function(a,h){let c=h.series.colorAxis;if(c){let f=c.toColor(a||0,h).split(")")[0].split("(")[1].split(",").map(u=>l(parseFloat(u),parseInt(u,10)));return f[3]=255*l(f[3],1),n(a)&&h.visible||(f[3]=0),f}return[0,0,0,0]},getContext:function(a){let{canvas:h,context:c}=a;return h&&c?(c.clearRect(0,0,h.width,h.height),c):(a.canvas=r.createElement("canvas"),a.context=a.canvas.getContext("2d",{willReadFrequently:!0})||void 0,a.context)}}}),i(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Series/Heatmap/HeatmapSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"],t["Series/InterpolationUtilities.js"]],function(e,s,r,n,l,a,h,c){let{series:f,seriesTypes:{column:u,scatter:p}}=l,{prototype:{symbols:b}}=a,{addEvent:v,extend:x,fireEvent:m,isNumber:E,merge:L,pick:S}=h,{colorFromPoint:w,getContext:R}=c;class O extends p{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let _=this,A=_.options,F=A.interpolation,P=A.marker||{};if(F){let{image:D,chart:C,xAxis:d,yAxis:g}=_,{reversed:y=!1,len:M}=d,{reversed:k=!1,len:T}=g,z={width:M,height:T};if(!D||_.isDirtyData||_.isDirtyCanvas){let N=R(_),{canvas:G,options:{colsize:X=1,rowsize:j=1},points:B,points:{length:W}}=_,V=C.colorAxis&&C.colorAxis[0];if(G&&N&&V){let{min:U,max:q}=d.getExtremes(),{min:H,max:Y}=g.getExtremes(),Z=q-U,K=Y-H,J=Math.round(Z/X/8*8),tt=Math.round(K/j/8*8),[$,Q]=[[J,J/Z,y,"ceil"],[tt,tt/K,!k,"floor"]].map(([ot,at,ct,ht])=>ct?lt=>Math[ht](ot-at*lt):lt=>Math[ht](at*lt)),et=G.width=J+1,it=et*(G.height=tt+1),st=(W-1)/it,rt=new Uint8ClampedArray(4*it),nt=(ot,at)=>4*Math.ceil(et*Q(at-H)+$(ot-U));_.buildKDTree();for(let ot=0;ot<it;ot++){let at=B[Math.ceil(st*ot)],{x:ct,y:ht}=at;rt.set(w(at.value,at),nt(ct,ht))}N.putImageData(new ImageData(rt,et),0,0),D?D.attr(ns(Se({},z),{href:G.toDataURL("image/png",1)})):(_.directTouch=!1,_.image=C.renderer.image(G.toDataURL("image/png",1)).attr(z).add(_.group))}_.isDirtyCanvas=!1}else(D.width!==M||D.height!==T)&&D.attr(z)}else(P.enabled||_._hasPointMarkers)&&(f.prototype.drawPoints.call(_),_.points.forEach(D=>{D.graphic&&(D.graphic[_.chart.styledMode?"css":"animate"](_.colorAttribs(D)),D.value===null&&D.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:_,dataMax:A}=f.prototype.getExtremes.call(this,this.valueData);return E(_)&&(this.valueMin=_),E(A)&&(this.valueMax=A),f.prototype.getExtremes.call(this)}getValidPoints(_,A){return f.prototype.getValidPoints.call(this,_,A,!0)}hasData(){return!!this.processedXData.length}init(){super.init.apply(this,arguments);let _=this.options;_.pointRange=S(_.pointRange,_.colsize||1),this.yAxis.axisPointRange=_.rowsize||1,b.ellipse=b.circle,_.marker&&E(_.borderRadius)&&(_.marker.r=_.borderRadius)}markerAttribs(_,A){let F=_.shapeArgs||{};if(_.hasImage)return{x:_.plotX,y:_.plotY};if(A&&A!=="normal"){let P=_.options.marker||{},D=this.options.marker||{},C=D.states&&D.states[A]||{},d=P.states&&P.states[A]||{},g=(d.width||C.width||F.width||0)+(d.widthPlus||C.widthPlus||0),y=(d.height||C.height||F.height||0)+(d.heightPlus||C.heightPlus||0);return{x:(F.x||0)+((F.width||0)-g)/2,y:(F.y||0)+((F.height||0)-y)/2,width:g,height:y}}return F}pointAttribs(_,A){let F=f.prototype.pointAttribs.call(this,_,A),P=this.options||{},D=this.chart.options.plotOptions||{},C=D.series||{},d=D.heatmap||{},g=_&&_.options.borderColor||P.borderColor||d.borderColor||C.borderColor,y=_&&_.options.borderWidth||P.borderWidth||d.borderWidth||C.borderWidth||F["stroke-width"];if(F.stroke=_&&_.marker&&_.marker.lineColor||P.marker&&P.marker.lineColor||g||this.color,F["stroke-width"]=y,A&&A!=="normal"){let M=L(P.states&&P.states[A],P.marker&&P.marker.states&&P.marker.states[A],_&&_.options.states&&_.options.states[A]||{});F.fill=M.color||e.parse(F.fill).brighten(M.brightness||0).get(),F.stroke=M.lineColor||F.stroke}return F}translate(){let{borderRadius:_,marker:A}=this.options,F=A&&A.symbol||"rect",P=b[F]?F:"rect",D=["circle","square"].indexOf(P)!==-1;for(let C of(this.generatePoints(),this.points)){let d=C.getCellAttributes(),g=Math.min(d.x1,d.x2),y=Math.min(d.y1,d.y2),M=Math.max(Math.abs(d.x2-d.x1),0),k=Math.max(Math.abs(d.y2-d.y1),0);if(C.hasImage=(C.marker&&C.marker.symbol||F||"").indexOf("url")===0,D){let T=Math.abs(M-k);g=Math.min(d.x1,d.x2)+(M<k?0:T/2),y=Math.min(d.y1,d.y2)+(M<k?T/2:0),M=k=Math.min(M,k)}C.hasImage&&(C.marker={width:M,height:k}),C.plotX=C.clientX=(d.x1+d.x2)/2,C.plotY=(d.y1+d.y2)/2,C.shapeType="path",C.shapeArgs=L(!0,{x:g,y,width:M,height:k},{d:b[P](g,y,M,k,{r:E(_)?_:0})})}m(this,"afterTranslate")}}return O.defaultOptions=L(p.defaultOptions,n),v(O,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),x(O.prototype,{axisTypes:s.seriesMembers.axisTypes,colorKey:s.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:s.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:r,specialGroup:"group",trackerGroups:s.seriesMembers.trackerGroups,alignDataLabel:u.prototype.alignDataLabel,colorAttribs:s.seriesMembers.colorAttribs,getSymbol:f.prototype.getSymbol}),s.compose(O),l.registerSeriesType("heatmap",O),O}),i(t,"masters/modules/heatmap.src.js",[t["Core/Globals.js"]],function(e){return e})})});var qu=oi((fA,uo)=>{"use strict";(function(o){typeof uo=="object"&&uo.exports?(o.default=o,uo.exports=o):typeof define=="function"&&define.amd?define("highcharts/highcharts-3d",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function i(e,s,r,n){e.hasOwnProperty(s)||(e[s]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:e[s]}})))}i(t,"Core/Math3D.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){let{deg2rad:r}=e,{pick:n}=s;function l(c,f,u,p){let b=f.options.chart.options3d,v=n(p,!!u&&f.inverted),x={x:f.plotWidth/2,y:f.plotHeight/2,z:b.depth/2,vd:n(b.depth,1)*n(b.viewDistance,0)},m=f.scale3d||1,E=r*b.beta*(v?-1:1),L=r*b.alpha*(v?-1:1),S={cosA:Math.cos(L),cosB:Math.cos(-E),sinA:Math.sin(L),sinB:Math.sin(-E)};return u||(x.x+=f.plotLeft,x.y+=f.plotTop),c.map(function(w){var R,O,I;let _=(R=(v?w.y:w.x)-x.x,O=(v?w.x:w.y)-x.y,I=(w.z||0)-x.z,{x:S.cosB*R-S.sinB*I,y:-S.sinA*S.sinB*R+S.cosA*O-S.cosB*S.sinA*I,z:S.cosA*S.sinB*R+S.sinA*O+S.cosA*S.cosB*I}),A=a(_,x,x.vd);return A.x=A.x*m+x.x,A.y=A.y*m+x.y,A.z=_.z*m+x.z,{x:v?A.y:A.x,y:v?A.x:A.y,z:A.z}})}function a(c,f,u){let p=u>0&&u<Number.POSITIVE_INFINITY?u/(c.z+f.z+u):1;return{x:c.x*p,y:c.y*p}}function h(c){let f=0,u,p;for(u=0;u<c.length;u++)p=(u+1)%c.length,f+=c[u].x*c[p].y-c[p].x*c[u].y;return f/2}return{perspective:l,perspective3D:a,pointCameraDistance:function(c,f){let u=f.options.chart.options3d,p={x:f.plotWidth/2,y:f.plotHeight/2,z:n(u.depth,1)*n(u.viewDistance,0)+u.depth};return Math.sqrt(Math.pow(p.x-n(c.plotX,c.x),2)+Math.pow(p.y-n(c.plotY,c.y),2)+Math.pow(p.z-n(c.plotZ,c.z),2))},shapeArea:h,shapeArea3D:function(c,f,u){return h(l(c,f,u))}}}),i(t,"Core/Chart/Chart3D.js",[t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Math3D.js"],t["Core/Utilities.js"]],function(e,s,r,n){var l;let{parse:a}=e,{defaultOptions:h}=s,{perspective:c,shapeArea3D:f}=r,{addEvent:u,isArray:p,merge:b,pick:v,wrap:x}=n;return function(m){function E(C){this.is3d()&&C.options.type==="scatter"&&(C.options.type="scatter3d")}function L(){if(this.chart3d&&this.is3d()){let C=this.renderer,d=this.options.chart.options3d,g=this.chart3d.get3dFrame(),y=this.plotLeft,M=this.plotLeft+this.plotWidth,k=this.plotTop,T=this.plotTop+this.plotHeight,z=d.depth,N=y-(g.left.visible?g.left.size:0),G=M+(g.right.visible?g.right.size:0),X=k-(g.top.visible?g.top.size:0),j=T+(g.bottom.visible?g.bottom.size:0),B=0-(g.front.visible?g.front.size:0),W=z+(g.back.visible?g.back.size:0),V=this.hasRendered?"animate":"attr";this.chart3d.frame3d=g,this.frameShapes||(this.frameShapes={bottom:C.polyhedron().add(),top:C.polyhedron().add(),left:C.polyhedron().add(),right:C.polyhedron().add(),back:C.polyhedron().add(),front:C.polyhedron().add()}),this.frameShapes.bottom[V]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:g.bottom.frontFacing?-1e3:1e3,faces:[{fill:a(g.bottom.color).brighten(.1).get(),vertexes:[{x:N,y:j,z:B},{x:G,y:j,z:B},{x:G,y:j,z:W},{x:N,y:j,z:W}],enabled:g.bottom.visible},{fill:a(g.bottom.color).brighten(.1).get(),vertexes:[{x:y,y:T,z},{x:M,y:T,z},{x:M,y:T,z:0},{x:y,y:T,z:0}],enabled:g.bottom.visible},{fill:a(g.bottom.color).brighten(-.1).get(),vertexes:[{x:N,y:j,z:B},{x:N,y:j,z:W},{x:y,y:T,z},{x:y,y:T,z:0}],enabled:g.bottom.visible&&!g.left.visible},{fill:a(g.bottom.color).brighten(-.1).get(),vertexes:[{x:G,y:j,z:W},{x:G,y:j,z:B},{x:M,y:T,z:0},{x:M,y:T,z}],enabled:g.bottom.visible&&!g.right.visible},{fill:a(g.bottom.color).get(),vertexes:[{x:G,y:j,z:B},{x:N,y:j,z:B},{x:y,y:T,z:0},{x:M,y:T,z:0}],enabled:g.bottom.visible&&!g.front.visible},{fill:a(g.bottom.color).get(),vertexes:[{x:N,y:j,z:W},{x:G,y:j,z:W},{x:M,y:T,z},{x:y,y:T,z}],enabled:g.bottom.visible&&!g.back.visible}]}),this.frameShapes.top[V]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:g.top.frontFacing?-1e3:1e3,faces:[{fill:a(g.top.color).brighten(.1).get(),vertexes:[{x:N,y:X,z:W},{x:G,y:X,z:W},{x:G,y:X,z:B},{x:N,y:X,z:B}],enabled:g.top.visible},{fill:a(g.top.color).brighten(.1).get(),vertexes:[{x:y,y:k,z:0},{x:M,y:k,z:0},{x:M,y:k,z},{x:y,y:k,z}],enabled:g.top.visible},{fill:a(g.top.color).brighten(-.1).get(),vertexes:[{x:N,y:X,z:W},{x:N,y:X,z:B},{x:y,y:k,z:0},{x:y,y:k,z}],enabled:g.top.visible&&!g.left.visible},{fill:a(g.top.color).brighten(-.1).get(),vertexes:[{x:G,y:X,z:B},{x:G,y:X,z:W},{x:M,y:k,z},{x:M,y:k,z:0}],enabled:g.top.visible&&!g.right.visible},{fill:a(g.top.color).get(),vertexes:[{x:N,y:X,z:B},{x:G,y:X,z:B},{x:M,y:k,z:0},{x:y,y:k,z:0}],enabled:g.top.visible&&!g.front.visible},{fill:a(g.top.color).get(),vertexes:[{x:G,y:X,z:W},{x:N,y:X,z:W},{x:y,y:k,z},{x:M,y:k,z}],enabled:g.top.visible&&!g.back.visible}]}),this.frameShapes.left[V]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:g.left.frontFacing?-1e3:1e3,faces:[{fill:a(g.left.color).brighten(.1).get(),vertexes:[{x:N,y:j,z:B},{x:y,y:T,z:0},{x:y,y:T,z},{x:N,y:j,z:W}],enabled:g.left.visible&&!g.bottom.visible},{fill:a(g.left.color).brighten(.1).get(),vertexes:[{x:N,y:X,z:W},{x:y,y:k,z},{x:y,y:k,z:0},{x:N,y:X,z:B}],enabled:g.left.visible&&!g.top.visible},{fill:a(g.left.color).brighten(-.1).get(),vertexes:[{x:N,y:j,z:W},{x:N,y:X,z:W},{x:N,y:X,z:B},{x:N,y:j,z:B}],enabled:g.left.visible},{fill:a(g.left.color).brighten(-.1).get(),vertexes:[{x:y,y:k,z},{x:y,y:T,z},{x:y,y:T,z:0},{x:y,y:k,z:0}],enabled:g.left.visible},{fill:a(g.left.color).get(),vertexes:[{x:N,y:j,z:B},{x:N,y:X,z:B},{x:y,y:k,z:0},{x:y,y:T,z:0}],enabled:g.left.visible&&!g.front.visible},{fill:a(g.left.color).get(),vertexes:[{x:N,y:X,z:W},{x:N,y:j,z:W},{x:y,y:T,z},{x:y,y:k,z}],enabled:g.left.visible&&!g.back.visible}]}),this.frameShapes.right[V]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:g.right.frontFacing?-1e3:1e3,faces:[{fill:a(g.right.color).brighten(.1).get(),vertexes:[{x:G,y:j,z:W},{x:M,y:T,z},{x:M,y:T,z:0},{x:G,y:j,z:B}],enabled:g.right.visible&&!g.bottom.visible},{fill:a(g.right.color).brighten(.1).get(),vertexes:[{x:G,y:X,z:B},{x:M,y:k,z:0},{x:M,y:k,z},{x:G,y:X,z:W}],enabled:g.right.visible&&!g.top.visible},{fill:a(g.right.color).brighten(-.1).get(),vertexes:[{x:M,y:k,z:0},{x:M,y:T,z:0},{x:M,y:T,z},{x:M,y:k,z}],enabled:g.right.visible},{fill:a(g.right.color).brighten(-.1).get(),vertexes:[{x:G,y:j,z:B},{x:G,y:X,z:B},{x:G,y:X,z:W},{x:G,y:j,z:W}],enabled:g.right.visible},{fill:a(g.right.color).get(),vertexes:[{x:G,y:X,z:B},{x:G,y:j,z:B},{x:M,y:T,z:0},{x:M,y:k,z:0}],enabled:g.right.visible&&!g.front.visible},{fill:a(g.right.color).get(),vertexes:[{x:G,y:j,z:W},{x:G,y:X,z:W},{x:M,y:k,z},{x:M,y:T,z}],enabled:g.right.visible&&!g.back.visible}]}),this.frameShapes.back[V]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:g.back.frontFacing?-1e3:1e3,faces:[{fill:a(g.back.color).brighten(.1).get(),vertexes:[{x:G,y:j,z:W},{x:N,y:j,z:W},{x:y,y:T,z},{x:M,y:T,z}],enabled:g.back.visible&&!g.bottom.visible},{fill:a(g.back.color).brighten(.1).get(),vertexes:[{x:N,y:X,z:W},{x:G,y:X,z:W},{x:M,y:k,z},{x:y,y:k,z}],enabled:g.back.visible&&!g.top.visible},{fill:a(g.back.color).brighten(-.1).get(),vertexes:[{x:N,y:j,z:W},{x:N,y:X,z:W},{x:y,y:k,z},{x:y,y:T,z}],enabled:g.back.visible&&!g.left.visible},{fill:a(g.back.color).brighten(-.1).get(),vertexes:[{x:G,y:X,z:W},{x:G,y:j,z:W},{x:M,y:T,z},{x:M,y:k,z}],enabled:g.back.visible&&!g.right.visible},{fill:a(g.back.color).get(),vertexes:[{x:y,y:k,z},{x:M,y:k,z},{x:M,y:T,z},{x:y,y:T,z}],enabled:g.back.visible},{fill:a(g.back.color).get(),vertexes:[{x:N,y:j,z:W},{x:G,y:j,z:W},{x:G,y:X,z:W},{x:N,y:X,z:W}],enabled:g.back.visible}]}),this.frameShapes.front[V]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:g.front.frontFacing?-1e3:1e3,faces:[{fill:a(g.front.color).brighten(.1).get(),vertexes:[{x:N,y:j,z:B},{x:G,y:j,z:B},{x:M,y:T,z:0},{x:y,y:T,z:0}],enabled:g.front.visible&&!g.bottom.visible},{fill:a(g.front.color).brighten(.1).get(),vertexes:[{x:G,y:X,z:B},{x:N,y:X,z:B},{x:y,y:k,z:0},{x:M,y:k,z:0}],enabled:g.front.visible&&!g.top.visible},{fill:a(g.front.color).brighten(-.1).get(),vertexes:[{x:N,y:X,z:B},{x:N,y:j,z:B},{x:y,y:T,z:0},{x:y,y:k,z:0}],enabled:g.front.visible&&!g.left.visible},{fill:a(g.front.color).brighten(-.1).get(),vertexes:[{x:G,y:j,z:B},{x:G,y:X,z:B},{x:M,y:k,z:0},{x:M,y:T,z:0}],enabled:g.front.visible&&!g.right.visible},{fill:a(g.front.color).get(),vertexes:[{x:M,y:k,z:0},{x:y,y:k,z:0},{x:y,y:T,z:0},{x:M,y:T,z:0}],enabled:g.front.visible},{fill:a(g.front.color).get(),vertexes:[{x:G,y:j,z:B},{x:N,y:j,z:B},{x:N,y:X,z:B},{x:G,y:X,z:B}],enabled:g.front.visible}]})}}function S(){this.styledMode&&[{name:"darker",slope:.6},{name:"brighter",slope:1.4}].forEach(function(C){this.renderer.definition({tagName:"filter",attributes:{id:"highcharts-"+C.name},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",attributes:{type:"linear",slope:C.slope}},{tagName:"feFuncG",attributes:{type:"linear",slope:C.slope}},{tagName:"feFuncB",attributes:{type:"linear",slope:C.slope}}]}]})},this)}function w(){let C=this.options;this.is3d()&&(C.series||[]).forEach(function(d){(d.type||C.chart.type||C.chart.defaultSeriesType)==="scatter"&&(d.type="scatter3d")})}function R(){let C=this.options.chart.options3d;if(this.chart3d&&this.is3d()){C&&(C.alpha=C.alpha%360+(C.alpha>=0?0:360),C.beta=C.beta%360+(C.beta>=0?0:360));let d=this.inverted,g=this.clipBox,y=this.margin;g[d?"y":"x"]=-(y[3]||0),g[d?"x":"y"]=-(y[0]||0),g[d?"height":"width"]=this.chartWidth+(y[3]||0)+(y[1]||0),g[d?"width":"height"]=this.chartHeight+(y[0]||0)+(y[2]||0),this.scale3d=1,C.fitToPlot===!0&&(this.scale3d=this.chart3d.getScale(C.depth)),this.chart3d.frame3d=this.chart3d.get3dFrame()}}function O(){this.is3d()&&(this.isDirtyBox=!0)}function I(){this.chart3d&&this.is3d()&&(this.chart3d.frame3d=this.chart3d.get3dFrame())}function _(){this.chart3d||(this.chart3d=new D(this))}function A(C){return this.is3d()||C.apply(this,[].slice.call(arguments,1))}function F(C){let d,g=this.series.length;if(this.is3d())for(;g--;)(d=this.series[g]).translate(),d.render();else C.call(this)}function P(C){C.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}m.defaultOptions={chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:null,frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}},m.compose=function(C,d){let g=C.prototype,y=d.prototype;g.is3d=function(){return!!this.options.chart.options3d?.enabled},g.propsRequireDirtyBox.push("chart.options3d"),g.propsRequireUpdateSeries.push("chart.options3d"),y.matrixSetter=function(){let M;if(this.pos<1&&(p(this.start)||p(this.end))){let k=this.start||[1,0,0,1,0,0],T=this.end||[1,0,0,1,0,0];M=[];for(let z=0;z<6;z++)M.push(this.pos*T[z]+(1-this.pos)*k[z])}else M=this.end;this.elem.attr(this.prop,M,null,!0)},b(!0,h,m.defaultOptions),u(C,"init",_),u(C,"addSeries",E),u(C,"afterDrawChartBox",L),u(C,"afterGetContainer",S),u(C,"afterInit",w),u(C,"afterSetChartSize",R),u(C,"beforeRedraw",O),u(C,"beforeRender",I),x(g,"isInsidePlot",A),x(g,"renderSeries",F),x(g,"setClassName",P)};class D{constructor(d){this.chart=d}get3dFrame(){let d=this.chart,g=d.options.chart.options3d,y=g.frame,M=d.plotLeft,k=d.plotLeft+d.plotWidth,T=d.plotTop,z=d.plotTop+d.plotHeight,N=g.depth,G=function(tt){let $=f(tt,d);return $>.5?1:$<-.5?-1:0},X=G([{x:M,y:z,z:N},{x:k,y:z,z:N},{x:k,y:z,z:0},{x:M,y:z,z:0}]),j=G([{x:M,y:T,z:0},{x:k,y:T,z:0},{x:k,y:T,z:N},{x:M,y:T,z:N}]),B=G([{x:M,y:T,z:0},{x:M,y:T,z:N},{x:M,y:z,z:N},{x:M,y:z,z:0}]),W=G([{x:k,y:T,z:N},{x:k,y:T,z:0},{x:k,y:z,z:0},{x:k,y:z,z:N}]),V=G([{x:M,y:z,z:0},{x:k,y:z,z:0},{x:k,y:T,z:0},{x:M,y:T,z:0}]),U=G([{x:M,y:T,z:N},{x:k,y:T,z:N},{x:k,y:z,z:N},{x:M,y:z,z:N}]),q=!1,H=!1,Y=!1,Z=!1;[].concat(d.xAxis,d.yAxis,d.zAxis).forEach(function(tt){tt&&(tt.horiz?tt.opposite?H=!0:q=!0:tt.opposite?Z=!0:Y=!0)});let K=function(tt,$,Q){let et=["size","color","visible"],it={};for(let rt=0;rt<et.length;rt++){let nt=et[rt];for(let ot=0;ot<tt.length;ot++)if(typeof tt[ot]=="object"){let at=tt[ot][nt];if(at!=null){it[nt]=at;break}}}let st=Q;return it.visible===!0||it.visible===!1?st=it.visible:it.visible==="auto"&&(st=$>0),{size:v(it.size,1),color:v(it.color,"none"),frontFacing:$>0,visible:st}},J={axes:{},bottom:K([y.bottom,y.top,y],X,q),top:K([y.top,y.bottom,y],j,H),left:K([y.left,y.right,y.side,y],B,Y),right:K([y.right,y.left,y.side,y],W,Z),back:K([y.back,y.front,y],U,!0),front:K([y.front,y.back,y],V,!1)};if(g.axisLabelPosition==="auto"){let tt=function(nt,ot){return nt.visible!==ot.visible||nt.visible&&ot.visible&&nt.frontFacing!==ot.frontFacing},$=[];tt(J.left,J.front)&&$.push({y:(T+z)/2,x:M,z:0,xDir:{x:1,y:0,z:0}}),tt(J.left,J.back)&&$.push({y:(T+z)/2,x:M,z:N,xDir:{x:0,y:0,z:-1}}),tt(J.right,J.front)&&$.push({y:(T+z)/2,x:k,z:0,xDir:{x:0,y:0,z:1}}),tt(J.right,J.back)&&$.push({y:(T+z)/2,x:k,z:N,xDir:{x:-1,y:0,z:0}});let Q=[];tt(J.bottom,J.front)&&Q.push({x:(M+k)/2,y:z,z:0,xDir:{x:1,y:0,z:0}}),tt(J.bottom,J.back)&&Q.push({x:(M+k)/2,y:z,z:N,xDir:{x:-1,y:0,z:0}});let et=[];tt(J.top,J.front)&&et.push({x:(M+k)/2,y:T,z:0,xDir:{x:1,y:0,z:0}}),tt(J.top,J.back)&&et.push({x:(M+k)/2,y:T,z:N,xDir:{x:-1,y:0,z:0}});let it=[];tt(J.bottom,J.left)&&it.push({z:(0+N)/2,y:z,x:M,xDir:{x:0,y:0,z:-1}}),tt(J.bottom,J.right)&&it.push({z:(0+N)/2,y:z,x:k,xDir:{x:0,y:0,z:1}});let st=[];tt(J.top,J.left)&&st.push({z:(0+N)/2,y:T,x:M,xDir:{x:0,y:0,z:-1}}),tt(J.top,J.right)&&st.push({z:(0+N)/2,y:T,x:k,xDir:{x:0,y:0,z:1}});let rt=function(nt,ot,at){if(nt.length===0)return null;if(nt.length===1)return nt[0];let ct=c(nt,d,!1),ht=0;for(let lt=1;lt<ct.length;lt++)(at*ct[lt][ot]>at*ct[ht][ot]||at*ct[lt][ot]==at*ct[ht][ot]&&ct[lt].z<ct[ht].z)&&(ht=lt);return nt[ht]};J.axes={y:{left:rt($,"x",-1),right:rt($,"x",1)},x:{top:rt(et,"y",-1),bottom:rt(Q,"y",1)},z:{top:rt(st,"y",-1),bottom:rt(it,"y",1)}}}else J.axes={y:{left:{x:M,z:0,xDir:{x:1,y:0,z:0}},right:{x:k,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:T,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:z,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:Y?k:M,y:T,xDir:Y?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:Y?k:M,y:z,xDir:Y?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}};return J}getScale(d){let g=this.chart,y=g.plotLeft,M=g.plotWidth+y,k=g.plotTop,T=g.plotHeight+k,z=y+g.plotWidth/2,N=k+g.plotHeight/2,G={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE},X,j=1;return X=[{x:y,y:k,z:0},{x:y,y:k,z:d}],[0,1].forEach(function(B){X.push({x:M,y:X[B].y,z:X[B].z})}),[0,1,2,3].forEach(function(B){X.push({x:X[B].x,y:T,z:X[B].z})}),(X=c(X,g,!1)).forEach(function(B){G.minX=Math.min(G.minX,B.x),G.maxX=Math.max(G.maxX,B.x),G.minY=Math.min(G.minY,B.y),G.maxY=Math.max(G.maxY,B.y)}),y>G.minX&&(j=Math.min(j,1-Math.abs((y+z)/(G.minX+z))%1)),M<G.maxX&&(j=Math.min(j,(M-z)/(G.maxX-z))),k>G.minY&&(j=G.minY<0?Math.min(j,(k+N)/(-G.minY+k+N)):Math.min(j,1-(k+N)/(G.minY+N)%1)),T<G.maxY&&(j=Math.min(j,Math.abs((T-N)/(G.maxY-N)))),j}}m.Additions=D}(l||(l={})),l}),i(t,"Series/Area3D/Area3DSeries.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{composed:l}=e,{perspective:a}=s,{line:{prototype:h}}=r.seriesTypes,{pushUnique:c,wrap:f}=n;function u(p){let b=p.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d())return b;let v=h.getGraphPath,x=this.options,m=Math.round(this.yAxis.getThreshold(x.threshold)),E=[];if(this.rawPointsX)for(let w=0;w<this.points.length;w++)E.push({x:this.rawPointsX[w],y:x.stacking?this.points[w].yBottom:m,z:this.zPadding});let L=this.chart.options.chart.options3d;E=a(E,this.chart,!0).map(w=>({plotX:w.x,plotY:w.y,plotZ:w.z})),this.group&&L&&L.depth&&L.beta&&(this.markerGroup&&(this.markerGroup.add(this.group),this.markerGroup.attr({translateX:0,translateY:0})),this.group.attr({zIndex:Math.max(1,L.beta>270||L.beta<90?L.depth-Math.round(this.zPadding||0):Math.round(this.zPadding||0))})),E.reversed=!0;let S=v.call(this,E,!0,!0);if(S[0]&&S[0][0]==="M"&&(S[0]=["L",S[0][1],S[0][2]]),this.areaPath){let w=this.areaPath.splice(0,this.areaPath.length/2).concat(S);w.xMap=this.areaPath.xMap,this.areaPath=w}return this.graphPath=b,b}return{compose:function(p){c(l,"Area3DSeries")&&f(p.prototype,"getGraphPath",u)}}}),i(t,"Core/Axis/Axis3DDefaults.js",[],function(){return{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}}),i(t,"Core/Axis/Tick3DComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){let{composed:r}=e,{addEvent:n,extend:l,pushUnique:a,wrap:h}=s;function c(u){let p=this.axis.axis3D;p&&l(u.pos,p.fix3dPosition(u.pos))}function f(u){let p=this.axis.axis3D,b=u.apply(this,[].slice.call(arguments,1));if(p){let v=b[0],x=b[1];if(v[0]==="M"&&x[0]==="L"){let m=[p.fix3dPosition({x:v[1],y:v[2],z:0}),p.fix3dPosition({x:x[1],y:x[2],z:0})];return this.axis.chart.renderer.toLineSegments(m)}}return b}return{compose:function(u){a(r,"Axis.Tick3D")&&(n(u,"afterGetLabelPosition",c),h(u.prototype,"getMarkPath",f))}}}),i(t,"Core/Axis/Axis3DComposition.js",[t["Core/Axis/Axis3DDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Axis/Tick3DComposition.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{defaultOptions:h}=s,{deg2rad:c}=r,{perspective:f,perspective3D:u,shapeArea:p}=n,{addEvent:b,merge:v,pick:x,wrap:m}=a;function E(){let F=this.chart,P=this.options;F.is3d&&F.is3d()&&this.coll!=="colorAxis"&&(P.tickWidth=x(P.tickWidth,0),P.gridLineWidth=x(P.gridLineWidth,1))}function L(F){this.chart.is3d()&&this.coll!=="colorAxis"&&F.point&&(F.point.crosshairPos=this.isXAxis?F.point.axisXpos:this.len-F.point.axisYpos)}function S(){this.axis3D||(this.axis3D=new A(this))}function w(F){return this.chart.is3d()&&this.coll!=="colorAxis"?[]:F.apply(this,[].slice.call(arguments,1))}function R(F){if(!this.chart.is3d()||this.coll==="colorAxis")return F.apply(this,[].slice.call(arguments,1));let P=arguments,D=P[1],C=P[2],d=[],g=this.getPlotLinePath({value:D}),y=this.getPlotLinePath({value:C});if(g&&y)for(let M=0;M<g.length;M+=2){let k=g[M],T=g[M+1],z=y[M],N=y[M+1];k[0]==="M"&&T[0]==="L"&&z[0]==="M"&&N[0]==="L"&&d.push(k,T,N,["L",z[1],z[2]],["Z"])}return d}function O(F){let P=this.axis3D,D=this.chart,C=F.apply(this,[].slice.call(arguments,1));if(this.coll==="colorAxis"||!D.chart3d||!D.is3d()||C===null)return C;let d=D.options.chart.options3d,g=this.isZAxis?D.plotWidth:d.depth,y=D.chart3d.frame3d,M=C[0],k=C[1],T,z=[];return M[0]==="M"&&k[0]==="L"&&(T=[P.swapZ({x:M[1],y:M[2],z:0}),P.swapZ({x:M[1],y:M[2],z:g}),P.swapZ({x:k[1],y:k[2],z:0}),P.swapZ({x:k[1],y:k[2],z:g})],this.horiz?(this.isZAxis?(y.left.visible&&z.push(T[0],T[2]),y.right.visible&&z.push(T[1],T[3])):(y.front.visible&&z.push(T[0],T[2]),y.back.visible&&z.push(T[1],T[3])),y.top.visible&&z.push(T[0],T[1]),y.bottom.visible&&z.push(T[2],T[3])):(y.front.visible&&z.push(T[0],T[2]),y.back.visible&&z.push(T[1],T[3]),y.left.visible&&z.push(T[0],T[1]),y.right.visible&&z.push(T[2],T[3])),z=f(z,this.chart,!1)),D.renderer.toLineSegments(z)}function I(F,P){let{chart:D,gridGroup:C,tickPositions:d,ticks:g}=this;if(this.categories&&D.frameShapes&&D.is3d()&&C&&P&&P.label){let y,M,k,T=C.element.childNodes[0].getBBox(),z=D.frameShapes.left.getBBox(),N=D.options.chart.options3d,G={x:D.plotWidth/2,y:D.plotHeight/2,z:N.depth/2,vd:x(N.depth,1)*x(N.viewDistance,0)},X=d.indexOf(P.pos),j=g[d[X-1]],B=g[d[X+1]];return j?.label?.xy&&(M=u({x:j.label.xy.x,y:j.label.xy.y,z:null},G,G.vd)),B&&B.label&&B.label.xy&&(k=u({x:B.label.xy.x,y:B.label.xy.y,z:null},G,G.vd)),y=u(y={x:P.label.xy.x,y:P.label.xy.y,z:null},G,G.vd),Math.abs(M?y.x-M.x:k?k.x-y.x:T.x-z.x)}return F.apply(this,[].slice.call(arguments,1))}function _(F){let P=F.apply(this,[].slice.call(arguments,1));return this.axis3D?this.axis3D.fix3dPosition(P,!0):P}class A{static compose(P,D){if(l.compose(D),!P.keepProps.includes("axis3D")){v(!0,h.xAxis,e),P.keepProps.push("axis3D"),b(P,"init",S),b(P,"afterSetOptions",E),b(P,"drawCrosshair",L);let C=P.prototype;m(C,"getLinePath",w),m(C,"getPlotBandPath",R),m(C,"getPlotLinePath",O),m(C,"getSlotWidth",I),m(C,"getTitlePosition",_)}}constructor(P){this.axis=P}fix3dPosition(P,D){let C=this.axis,d=C.chart;if(C.coll==="colorAxis"||!d.chart3d||!d.is3d())return P;let g=c*d.options.chart.options3d.alpha,y=c*d.options.chart.options3d.beta,M=x(D&&C.options.title.position3d,C.options.labels.position3d),k=x(D&&C.options.title.skew3d,C.options.labels.skew3d),T=d.chart3d.frame3d,z=d.plotLeft,N=d.plotWidth+z,G=d.plotTop,X=d.plotHeight+G,j=0,B=0,W,V={x:0,y:1,z:0},U=!1;if(P=C.axis3D.swapZ({x:P.x,y:P.y,z:0}),C.isZAxis)if(C.opposite){if(T.axes.z.top===null)return{};B=P.y-G,P.x=T.axes.z.top.x,P.y=T.axes.z.top.y,W=T.axes.z.top.xDir,U=!T.top.frontFacing}else{if(T.axes.z.bottom===null)return{};B=P.y-X,P.x=T.axes.z.bottom.x,P.y=T.axes.z.bottom.y,W=T.axes.z.bottom.xDir,U=!T.bottom.frontFacing}else if(C.horiz)if(C.opposite){if(T.axes.x.top===null)return{};B=P.y-G,P.y=T.axes.x.top.y,P.z=T.axes.x.top.z,W=T.axes.x.top.xDir,U=!T.top.frontFacing}else{if(T.axes.x.bottom===null)return{};B=P.y-X,P.y=T.axes.x.bottom.y,P.z=T.axes.x.bottom.z,W=T.axes.x.bottom.xDir,U=!T.bottom.frontFacing}else if(C.opposite){if(T.axes.y.right===null)return{};j=P.x-N,P.x=T.axes.y.right.x,P.z=T.axes.y.right.z,W={x:(W=T.axes.y.right.xDir).z,y:W.y,z:-W.x}}else{if(T.axes.y.left===null)return{};j=P.x-z,P.x=T.axes.y.left.x,P.z=T.axes.y.left.z,W=T.axes.y.left.xDir}if(M!=="chart")if(M==="flap")if(C.horiz){let H=Math.sin(g);C.opposite&&(H=-H),U&&(H=-H),V={x:W.z*H,y:Math.cos(g),z:-W.x*H}}else W={x:Math.cos(y),y:0,z:Math.sin(y)};else if(M==="ortho")if(C.horiz){let H=Math.cos(g),Y={x:Math.sin(y)*H,y:-Math.sin(g),z:-H*Math.cos(y)},Z=1/Math.sqrt((V={x:W.y*Y.z-W.z*Y.y,y:W.z*Y.x-W.x*Y.z,z:W.x*Y.y-W.y*Y.x}).x*V.x+V.y*V.y+V.z*V.z);U&&(Z=-Z),V={x:Z*V.x,y:Z*V.y,z:Z*V.z}}else W={x:Math.cos(y),y:0,z:Math.sin(y)};else C.horiz?V={x:Math.sin(y)*Math.sin(g),y:Math.cos(g),z:-Math.cos(y)*Math.sin(g)}:W={x:Math.cos(y),y:0,z:Math.sin(y)};P.x+=j*W.x+B*V.x,P.y+=j*W.y+B*V.y,P.z+=j*W.z+B*V.z;let q=f([P],C.chart)[0];if(k){0>p(f([P,{x:P.x+W.x,y:P.y+W.y,z:P.z+W.z},{x:P.x+V.x,y:P.y+V.y,z:P.z+V.z}],C.chart))&&(W={x:-W.x,y:-W.y,z:-W.z});let H=f([{x:P.x,y:P.y,z:P.z},{x:P.x+W.x,y:P.y+W.y,z:P.z+W.z},{x:P.x+V.x,y:P.y+V.y,z:P.z+V.z}],C.chart);q.matrix=[H[1].x-H[0].x,H[1].y-H[0].y,H[2].x-H[0].x,H[2].y-H[0].y,q.x,q.y],q.matrix[4]-=q.x*q.matrix[0]+q.y*q.matrix[2],q.matrix[5]-=q.x*q.matrix[1]+q.y*q.matrix[3]}return q}swapZ(P,D){let C=this.axis;if(C.isZAxis){let d=D?0:C.chart.plotLeft;return{x:d+P.z,y:P.y,z:P.x-d}}return P}}return A}),i(t,"Core/Series/Series3D.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{composed:l}=e,{perspective:a}=s,{addEvent:h,extend:c,isNumber:f,merge:u,pick:p,pushUnique:b}=n;class v extends r{static compose(m){b(l,"Core.Series3D")&&(h(m,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),c(m.prototype,{translate3dPoints:v.prototype.translate3dPoints}))}translate3dPoints(){let m,E,L=this,S=L.options,w=L.chart,R=p(L.zAxis,w.options.zAxis[0]),O=[],I=[],_=S.stacking?f(S.stack)?S.stack:0:L.index||0;L.zPadding=_*(S.depth||0+(S.groupZPadding||1)),L.data.forEach(F=>{R&&R.translate?(E=R.logarithmic&&R.val2lin?R.val2lin(F.z):F.z,F.plotZ=R.translate(E),F.isInside=!!F.isInside&&E>=R.min&&E<=R.max):F.plotZ=L.zPadding,F.axisXpos=F.plotX,F.axisYpos=F.plotY,F.axisZpos=F.plotZ,O.push({x:F.plotX,y:F.plotY,z:F.plotZ}),I.push(F.plotX||0)}),L.rawPointsX=I;let A=a(O,w,!0);L.data.forEach((F,P)=>{m=A[P],F.plotX=m.x,F.plotY=m.y,F.plotZ=m.z})}}return v.defaultOptions=u(r.defaultOptions),v}),i(t,"Core/Renderer/SVG/SVGElement3D.js",[t["Core/Color/Color.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{parse:n}=e,{Element:l}=s.getRendererType().prototype,{defined:a,pick:h}=r;class c extends l{constructor(){super(...arguments),this.parts=["front","top","side"],this.pathType="cuboid"}initArgs(u){let p=this.renderer,b=p[this.pathType+"Path"](u),v=b.zIndexes;for(let x of this.parts){let m={class:"highcharts-3d-"+x,zIndex:v[x]||0};p.styledMode&&(x==="top"?m.filter="url(#highcharts-brighter)":x==="side"&&(m.filter="url(#highcharts-darker)")),this[x]=p.path(b[x]).attr(m).add(this)}this.attr({"stroke-linejoin":"round",zIndex:v.group}),this.forcedSides=b.forcedSides}singleSetterForParts(u,p,b,v,x,m){let E={},L=[null,null,v||"attr",x,m],S=b&&b.zIndexes;if(b){for(let w of(S&&S.group&&this.attr({zIndex:S.group}),Object.keys(b)))E[w]={},E[w][u]=b[w],S&&(E[w].zIndex=b.zIndexes[w]||0);L[1]=E}else E[u]=p,L[0]=E;return this.processParts.apply(this,L)}processParts(u,p,b,v,x){for(let m of this.parts)p&&(u=h(p[m],!1)),u!==!1&&this[m][b](u,v,x);return this}destroy(){return this.processParts(null,null,"destroy"),super.destroy()}attr(u,p,b,v){if(typeof u=="string"&&p!==void 0){let x=u;(u={})[x]=p}return u.shapeArgs||a(u.x)?this.singleSetterForParts("d",null,this.renderer[this.pathType+"Path"](u.shapeArgs||u)):super.attr(u,void 0,b,v)}animate(u,p,b){if(a(u.x)&&a(u.y)){let v=this.renderer[this.pathType+"Path"](u),x=v.forcedSides;this.singleSetterForParts("d",null,v,"animate",p,b),this.attr({zIndex:v.zIndexes.group}),x===this.forcedSides||(this.forcedSides=x,this.renderer.styledMode||this.fillSetter(this.fill))}else super.animate(u,p,b);return this}fillSetter(u){return this.forcedSides=this.forcedSides||[],this.singleSetterForParts("fill",null,{front:u,top:n(u).brighten(this.forcedSides.indexOf("top")>=0?0:.1).get(),side:n(u).brighten(this.forcedSides.indexOf("side")>=0?0:-.1).get()}),this.color=this.fill=u,this}}return c.types={base:c,cuboid:c},c}),i(t,"Core/Renderer/SVG/SVGRenderer3D.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Renderer/SVG/SVGElement3D.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){var h;let{animObject:c}=e,{parse:f}=s,{charts:u,deg2rad:p}=r,{perspective:b,shapeArea:v}=n,{defined:x,extend:m,merge:E,pick:L}=a,S=Math.cos,w=Math.sin,R=Math.PI,O=4*(Math.sqrt(2)-1)/3/(R/2);function I(_,A,F,P,D,C,d,g){let y=C-D,M=[];return C>D&&C-D>Math.PI/2+1e-4?M=(M=M.concat(I(_,A,F,P,D,D+Math.PI/2,d,g))).concat(I(_,A,F,P,D+Math.PI/2,C,d,g)):C<D&&D-C>Math.PI/2+1e-4?M=(M=M.concat(I(_,A,F,P,D,D-Math.PI/2,d,g))).concat(I(_,A,F,P,D-Math.PI/2,C,d,g)):[["C",_+F*Math.cos(D)-F*O*y*Math.sin(D)+d,A+P*Math.sin(D)+P*O*y*Math.cos(D)+g,_+F*Math.cos(C)+F*O*y*Math.sin(C)+d,A+P*Math.sin(C)-P*O*y*Math.cos(C)+g,_+F*Math.cos(C)+d,A+P*Math.sin(C)+g]]}return function(_){function A(k,T){let z=[];for(let N of k)z.push(["L",N.x,N.y]);return k.length&&(z[0][0]="M",T&&z.push(["Z"])),z}function F(k){let T=[],z=!0;for(let N of k)T.push(z?["M",N.x,N.y]:["L",N.x,N.y]),z=!z;return T}function P(k){let T=this,z=T.Element.prototype,N=T.createElement("path");return N.vertexes=[],N.insidePlotArea=!1,N.enabled=!0,N.attr=function(G){if(typeof G=="object"&&(x(G.enabled)||x(G.vertexes)||x(G.insidePlotArea))){this.enabled=L(G.enabled,this.enabled),this.vertexes=L(G.vertexes,this.vertexes),this.insidePlotArea=L(G.insidePlotArea,this.insidePlotArea),delete G.enabled,delete G.vertexes,delete G.insidePlotArea;let X=u[T.chartIndex],j=b(this.vertexes,X,this.insidePlotArea),B=T.toLinePath(j,!0),W=v(j);G.d=B,G.visibility=this.enabled&&W>0?"inherit":"hidden"}return z.attr.apply(this,arguments)},N.animate=function(G){if(typeof G=="object"&&(x(G.enabled)||x(G.vertexes)||x(G.insidePlotArea))){this.enabled=L(G.enabled,this.enabled),this.vertexes=L(G.vertexes,this.vertexes),this.insidePlotArea=L(G.insidePlotArea,this.insidePlotArea),delete G.enabled,delete G.vertexes,delete G.insidePlotArea;let X=u[T.chartIndex],j=b(this.vertexes,X,this.insidePlotArea),B=T.toLinePath(j,!0),W=v(j),V=this.enabled&&W>0?"visible":"hidden";G.d=B,this.attr("visibility",V)}return z.animate.apply(this,arguments)},N.attr(k)}function D(k){let T=this,z=T.Element.prototype,N=T.g(),G=N.destroy;return this.styledMode||N.attr({"stroke-linejoin":"round"}),N.faces=[],N.destroy=function(){for(let X=0;X<N.faces.length;X++)N.faces[X].destroy();return G.call(this)},N.attr=function(X,j,B,W){if(typeof X=="object"&&x(X.faces)){for(;N.faces.length>X.faces.length;)N.faces.pop().destroy();for(;N.faces.length<X.faces.length;)N.faces.push(T.face3d().add(N));for(let V=0;V<X.faces.length;V++)T.styledMode&&delete X.faces[V].fill,N.faces[V].attr(X.faces[V],null,B,W);delete X.faces}return z.attr.apply(this,arguments)},N.animate=function(X,j,B){if(X&&X.faces){for(;N.faces.length>X.faces.length;)N.faces.pop().destroy();for(;N.faces.length<X.faces.length;)N.faces.push(T.face3d().add(N));for(let W=0;W<X.faces.length;W++)N.faces[W].animate(X.faces[W],j,B);delete X.faces}return z.animate.apply(this,arguments)},N.attr(k)}function C(k,T){let z=new l.types[k](this,"g");return z.initArgs(T),z}function d(k){return this.element3d("cuboid",k)}function g(k){let T=k.x||0,z=k.y||0,N=k.z||0,G=k.height||0,X=k.width||0,j=k.depth||0,B=u[this.chartIndex],W=B.options.chart.options3d.alpha,V=[],U,q=0,H=[{x:T,y:z,z:N},{x:T+X,y:z,z:N},{x:T+X,y:z+G,z:N},{x:T,y:z+G,z:N},{x:T,y:z+G,z:N+j},{x:T+X,y:z+G,z:N+j},{x:T+X,y:z,z:N+j},{x:T,y:z,z:N+j}];H=b(H,B,k.insidePlotArea);let Y=st=>G===0&&st>1&&st<6?{x:H[st].x,y:H[st].y+10,z:H[st].z}:H[0].x===H[7].x&&st>=4?{x:H[st].x+10,y:H[st].y,z:H[st].z}:j===0&&st<2||st>5?{x:H[st].x,y:H[st].y,z:H[st].z+10}:H[st],Z=st=>H[st],K=(st,rt,nt)=>{let ot=st.map(Z),at=rt.map(Z),ct=st.map(Y),ht=rt.map(Y),lt=[[],-1];return 0>v(ot)?lt=[ot,0]:0>v(at)?lt=[at,1]:nt&&(V.push(nt),lt=0>v(ct)?[ot,0]:0>v(ht)?[at,1]:[ot,0]),lt},J=(U=K([3,2,1,0],[7,6,5,4],"front"))[0],tt=U[1],$=(U=K([1,6,7,0],[4,5,2,3],"top"))[0],Q=U[1],et=(U=K([1,2,5,6],[0,7,4,3],"side"))[0],it=U[1];return it===1?q+=1e6*(B.plotWidth-T):it||(q+=1e6*T),q+=10*(!Q||W>=0&&W<=180||W<360&&W>357.5?B.plotHeight-z:10+z),tt===1?q+=100*N:tt||(q+=100*(1e3-N)),{front:this.toLinePath(J,!0),top:this.toLinePath($,!0),side:this.toLinePath(et,!0),zIndexes:{group:Math.round(q)},forcedSides:V,isFront:tt,isTop:Q}}function y(k){let T=this.g(),z=this.Element.prototype,N=["x","y","r","innerR","start","end","depth"];function G(X){let j={},B=!1,W;for(W in X=E(X))N.indexOf(W)!==-1&&(j[W]=X[W],delete X[W],B=!0);return!!B&&[j,X]}for(let X of((k=E(k)).alpha=(k.alpha||0)*p,k.beta=(k.beta||0)*p,T.top=this.path(),T.side1=this.path(),T.side2=this.path(),T.inn=this.path(),T.out=this.path(),T.onAdd=function(){let j=T.parentGroup,B=T.attr("class");for(let W of(T.top.add(T),["out","inn","side1","side2"]))T[W].attr({class:B+" highcharts-3d-side"}).add(j)},["addClass","removeClass"]))T[X]=function(){let j=arguments;for(let B of["top","out","inn","side1","side2"])T[B][X].apply(T[B],j)};for(let X of(T.setPaths=function(j){let B=T.renderer.arc3dPath(j),W=100*B.zTop;T.attribs=j,T.top.attr({d:B.top,zIndex:B.zTop}),T.inn.attr({d:B.inn,zIndex:B.zInn}),T.out.attr({d:B.out,zIndex:B.zOut}),T.side1.attr({d:B.side1,zIndex:B.zSide1}),T.side2.attr({d:B.side2,zIndex:B.zSide2}),T.zIndex=W,T.attr({zIndex:W}),j.center&&(T.top.setRadialReference(j.center),delete j.center)},T.setPaths(k),T.fillSetter=function(j){let B=f(j).brighten(-.1).get();return this.fill=j,this.side1.attr({fill:B}),this.side2.attr({fill:B}),this.inn.attr({fill:B}),this.out.attr({fill:B}),this.top.attr({fill:j}),this},["opacity","translateX","translateY","visibility"]))T[X+"Setter"]=function(j,B){for(let W of(T[B]=j,["out","inn","side1","side2","top"]))T[W].attr(B,j)};return T.attr=function(X){let j,B;return typeof X=="object"&&(B=G(X))&&(j=B[0],arguments[0]=B[1],m(T.attribs,j),T.setPaths(T.attribs)),z.attr.apply(T,arguments)},T.animate=function(X,j,B){let W,V,U=this.attribs,q="data-"+Math.random().toString(26).substring(2,9);delete X.center,delete X.z,delete X.alpha,delete X.beta;let H=c(L(j,this.renderer.globalAnimation));return H.duration&&(W=G(X),T[q]=0,X[q]=1,T[q+"Setter"]=r.noop,W&&(V=W[0],H.step=function(Y,Z){let K=J=>U[J]+(L(V[J],U[J])-U[J])*Z.pos;Z.prop===q&&Z.elem.setPaths(E(U,{x:K("x"),y:K("y"),r:K("r"),innerR:K("innerR"),start:K("start"),end:K("end"),depth:K("depth")}))}),j=H),z.animate.call(this,X,j,B)},T.destroy=function(){return this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),z.destroy.call(this)},T.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},T.show=function(X){this.top.show(X),this.out.show(X),this.inn.show(X),this.side1.show(X),this.side2.show(X)},T}function M(k){let T=k.x||0,z=k.y||0,N=k.start||0,G=(k.end||0)-1e-5,X=k.r||0,j=k.innerR||0,B=k.depth||0,W=k.alpha||0,V=k.beta||0,U=Math.cos(N),q=Math.sin(N),H=Math.cos(G),Y=Math.sin(G),Z=X*Math.cos(V),K=X*Math.cos(W),J=j*Math.cos(V),tt=j*Math.cos(W),$=B*Math.sin(V),Q=B*Math.sin(W),et=[["M",T+Z*U,z+K*q]];(et=et.concat(I(T,z,Z,K,N,G,0,0))).push(["L",T+J*H,z+tt*Y]),(et=et.concat(I(T,z,J,tt,G,N,0,0))).push(["Z"]);let it=V>0?Math.PI/2:0,st=W>0?0:Math.PI/2,rt=N>-it?N:G>-it?-it:N,nt=G<R-st?G:N<R-st?R-st:G,ot=2*R-st,at=[["M",T+Z*S(rt),z+K*w(rt)]];at=at.concat(I(T,z,Z,K,rt,nt,0,0)),G>ot&&N<ot?(at.push(["L",T+Z*S(nt)+$,z+K*w(nt)+Q]),(at=at.concat(I(T,z,Z,K,nt,ot,$,Q))).push(["L",T+Z*S(ot),z+K*w(ot)]),(at=at.concat(I(T,z,Z,K,ot,G,0,0))).push(["L",T+Z*S(G)+$,z+K*w(G)+Q]),(at=at.concat(I(T,z,Z,K,G,ot,$,Q))).push(["L",T+Z*S(ot),z+K*w(ot)]),at=at.concat(I(T,z,Z,K,ot,nt,0,0))):G>R-st&&N<R-st&&(at.push(["L",T+Z*Math.cos(nt)+$,z+K*Math.sin(nt)+Q]),(at=at.concat(I(T,z,Z,K,nt,G,$,Q))).push(["L",T+Z*Math.cos(G),z+K*Math.sin(G)]),at=at.concat(I(T,z,Z,K,G,nt,0,0))),at.push(["L",T+Z*Math.cos(nt)+$,z+K*Math.sin(nt)+Q]),(at=at.concat(I(T,z,Z,K,nt,rt,$,Q))).push(["Z"]);let ct=[["M",T+J*U,z+tt*q]];(ct=ct.concat(I(T,z,J,tt,N,G,0,0))).push(["L",T+J*Math.cos(G)+$,z+tt*Math.sin(G)+Q]),(ct=ct.concat(I(T,z,J,tt,G,N,$,Q))).push(["Z"]);let ht=[["M",T+Z*U,z+K*q],["L",T+Z*U+$,z+K*q+Q],["L",T+J*U+$,z+tt*q+Q],["L",T+J*U,z+tt*q],["Z"]],lt=[["M",T+Z*H,z+K*Y],["L",T+Z*H+$,z+K*Y+Q],["L",T+J*H+$,z+tt*Y+Q],["L",T+J*H,z+tt*Y],["Z"]],yt=Math.atan2(Q,-$),Et=Math.abs(G+yt),dt=Math.abs(N+yt),St=Math.abs((N+G)/2+yt);function mt(se){return(se%=2*Math.PI)>Math.PI&&(se=2*Math.PI-se),se}Et=mt(Et),dt=mt(dt);let Pt=1e5*(St=mt(St)),jt=1e5*dt,me=1e5*Et;return{top:et,zTop:1e5*Math.PI+1,out:at,zOut:Math.max(Pt,jt,me),inn:ct,zInn:Math.max(Pt,jt,me),side1:ht,zSide1:.99*me,side2:lt,zSide2:.99*jt}}_.compose=function(k){let T=k.prototype;T.element3d||m(T,{Element3D:l,arc3d:y,arc3dPath:M,cuboid:d,cuboidPath:g,element3d:C,face3d:P,polyhedron:D,toLinePath:A,toLineSegments:F})}}(h||(h={})),h}),i(t,"Core/Axis/ZAxis.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(e,s,r){let{defaultOptions:n}=s,{addEvent:l,merge:a,pick:h,splat:c}=r;function f(b){return new p(this,b)}function u(){let b=this.options.zAxis=c(this.options.zAxis||{});this.is3d()&&(this.zAxis=[],b.forEach(v=>{this.addZAxis(v).setScale()}))}class p extends e{constructor(){super(...arguments),this.isZAxis=!0}static compose(v){let x=v.prototype;x.addZAxis||(n.zAxis=a(n.xAxis,{offset:0,lineWidth:0}),x.addZAxis=f,x.collectionsWithInit.zAxis=[x.addZAxis],x.collectionsWithUpdate.push("zAxis"),l(v,"afterGetAxes",u))}init(v,x){this.isZAxis=!0,super.init(v,x,"zAxis")}getSeriesExtremes(){this.hasVisibleSeries=!1,this.dataMin=this.dataMax=this.ignoreMinPadding=this.ignoreMaxPadding=void 0,this.stacking&&this.stacking.buildStacks(),this.series.forEach(v=>{if(v.reserveSpace()){let x=v.options.threshold;this.hasVisibleSeries=!0,this.positiveValuesOnly&&x<=0&&(x=void 0);let m=v.zData;m.length&&(this.dataMin=Math.min(h(this.dataMin,m[0]),Math.min.apply(null,m)),this.dataMax=Math.max(h(this.dataMax,m[0]),Math.max.apply(null,m)))}})}setAxisSize(){let v=this.chart;super.setAxisSize(),this.width=this.len=v.options.chart.options3d&&v.options.chart.options3d.depth||0,this.right=v.chartWidth-this.width-this.left}}return p}),i(t,"Series/Column3D/Column3DComposition.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Utilities.js"]],function(e,s,r){let{composed:n}=e,{perspective:l}=s,{addEvent:a,extend:h,pick:c,pushUnique:f,wrap:u}=r;function p(){let _=this.chart,A=this.options,F=A.depth,P=(A.stacking?A.stack||0:this.index)*(F+(A.groupZPadding||1)),D=this.borderWidth%2?.5:0,C;for(let d of(_.inverted&&!this.yAxis.reversed&&(D*=-1),A.grouping!==!1&&(P=0),P+=A.groupZPadding||1,this.points))if(d.outside3dPlot=null,d.y!==null){let g,y=h({x:0,y:0,width:0,height:0},d.shapeArgs||{}),M=[["x","width"],["y","height"]],k=d.tooltipPos;for(let T of M)if((g=y[T[0]]-D)<0&&(y[T[1]]+=y[T[0]]+D,y[T[0]]=-D,g=0),g+y[T[1]]>this[T[0]+"Axis"].len&&y[T[1]]!==0&&(y[T[1]]=this[T[0]+"Axis"].len-y[T[0]]),y[T[1]]!==0&&(y[T[0]]>=this[T[0]+"Axis"].len||y[T[0]]+y[T[1]]<=D)){for(let z in y)y[z]=z==="y"?-9999:0;d.outside3dPlot=!0}if(d.shapeType==="roundedRect"&&(d.shapeType="cuboid"),d.shapeArgs=h(y,{z:P,depth:F,insidePlotArea:!0}),C={x:y.x+y.width/2,y:y.y,z:P+F/2},_.inverted&&(C.x=y.height,C.y=d.clientX||0),d.axisXpos=C.x,d.axisYpos=C.y,d.axisZpos=C.z,d.plot3d=l([C],_,!0,!1)[0],k){let T=l([{x:k[0],y:k[1],z:P+F/2}],_,!0,!1)[0];d.tooltipPos=[T.x,T.y]}}this.z=P}function b(){if(this.chart.is3d()){let _=this.options,A=_.grouping,F=_.stacking,P=this.yAxis.options.reversedStacks,D=0;if(!(A!==void 0&&!A)){let C,d=function(y,M){let k=y.series,T={totalStacks:0},z,N=1;return k.forEach(function(G){T[z=c(G.options.stack,M?0:k.length-1-G.index)]?T[z].series.push(G):(T[z]={series:[G],position:N},N++)}),T.totalStacks=N+1,T}(this.chart,F),g=_.stack||0;for(C=0;C<d[g].series.length&&d[g].series[C]!==this;C++);D=10*(d.totalStacks-d[g].position)+(P?C:-C),this.xAxis.reversed||(D=10*d.totalStacks-D)}_.depth=_.depth||25,this.z=this.z||0,_.zIndex=D}}function v(_,...A){return this.series.chart.is3d()?this.graphic&&this.graphic.element.nodeName!=="g":_.apply(this,A)}function x(_){if(this.chart.is3d()){let A=arguments,F=A[1],P=this.yAxis,D=this.yAxis.reversed;if(F)for(let C of this.points)C.y===null||(C.height=C.shapeArgs.height,C.shapey=C.shapeArgs.y,C.shapeArgs.height=1,D||(C.stackY?C.shapeArgs.y=C.plotY+P.translate(C.stackY):C.shapeArgs.y=C.plotY+(C.negative?-C.height:C.height)));else{for(let C of this.points)C.y!==null&&(C.shapeArgs.height=C.height,C.shapeArgs.y=C.shapey,C.graphic&&C.graphic[C.outside3dPlot?"attr":"animate"](C.shapeArgs,this.options.animation));this.drawDataLabels()}}else _.apply(this,[].slice.call(arguments,1))}function m(_,A,F,P,D,C){return A!=="dataLabelsGroup"&&A!=="markerGroup"&&this.chart.is3d()&&(this[A]&&delete this[A],C&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(C)),this[A]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[A].survive=!0,A==="group"&&(arguments[3]="visible"))),_.apply(this,Array.prototype.slice.call(arguments,1))}function E(_){let A=_.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(A.stroke=this.options.edgeColor||A.fill,A["stroke-width"]=c(this.options.edgeWidth,1)),A}function L(_,A,F){let P=this.chart.is3d&&this.chart.is3d();P&&(this.options.inactiveOtherPoints=!0),_.call(this,A,F),P&&(this.options.inactiveOtherPoints=!1)}function S(_,A){if(this.chart.is3d())for(let F of this.points)F.visible=F.options.visible=A=A===void 0?!c(this.visible,F.visible):A,this.options.data[this.data.indexOf(F)]=F.options,F.graphic&&F.graphic.attr({visibility:A?"visible":"hidden"});_.apply(this,Array.prototype.slice.call(arguments,1))}function w(_){_.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}function R(_,A,F,P,D){let C=this.chart;if(P.outside3dPlot=A.outside3dPlot,C.is3d()&&this.is("column")){let d=this.options,g=c(P.inside,!!this.options.stacking),y=C.options.chart.options3d,M=A.pointWidth/2||0,k={x:D.x+M,y:D.y,z:this.z+d.depth/2};C.inverted&&(g&&(D.width=0,k.x+=A.shapeArgs.height/2),y.alpha>=90&&y.alpha<=270&&(k.y+=A.shapeArgs.width)),k=l([k],C,!0,!1)[0],D.x=k.x-M,D.y=A.outside3dPlot?-9e9:k.y}_.apply(this,[].slice.call(arguments,1))}function O(_){return!arguments[2].outside3dPlot&&_.apply(this,[].slice.call(arguments,1))}function I(_,A){let F=_.apply(this,[].slice.call(arguments,1)),P=this.axis.chart,{width:D}=A;if(P.is3d()&&this.base){let C=+this.base.split(",")[0],d=P.series[C],g=P.options.chart.options3d;if(d&&d.type==="column"){let y={x:F.x+(P.inverted?F.height:D/2),y:F.y,z:d.options.depth/2};P.inverted&&(F.width=0,g.alpha>=90&&g.alpha<=270&&(y.y+=D)),y=l([y],P,!0,!1)[0],F.x=y.x-D/2,F.y=y.y}}return F}return{compose:function(_,A){if(f(n,"Column3D")){let F=_.prototype,P=A.prototype,{column:D,columnRange:C}=_.types;if(u(F,"alignDataLabel",R),u(F,"justifyDataLabel",O),u(P,"getStackBox",I),D){let d=D.prototype,g=d.pointClass.prototype;d.translate3dPoints=()=>{},d.translate3dShapes=p,a(d,"afterInit",b),u(g,"hasNewShapeType",v),u(d,"animate",x),u(d,"plotGroup",m),u(d,"pointAttribs",E),u(d,"setState",L),u(d,"setVisible",S),u(d,"translate",w)}if(C){let d=C.prototype;u(d.pointClass.prototype,"hasNewShapeType",v),u(d,"plotGroup",m),u(d,"pointAttribs",E),u(d,"setState",L),u(d,"setVisible",S)}}}}}),i(t,"Series/Pie3D/Pie3DPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(e){let{pie:{prototype:{pointClass:s}}}=e.seriesTypes;return class extends s{haloPath(){return this.series?.chart.is3d()?[]:super.haloPath.apply(this,arguments)}}}),i(t,"Series/Pie3D/Pie3DSeries.js",[t["Core/Globals.js"],t["Series/Pie3D/Pie3DPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{composed:l,deg2rad:a}=e,{pie:h}=r.seriesTypes,{extend:c,pick:f,pushUnique:u}=n;class p extends h{static compose(v){u(l,"Pie3D")&&(v.types.pie=p)}addPoint(){super.addPoint.apply(this,arguments),this.chart.is3d()&&this.update(this.userOptions,!0)}animate(v){if(this.chart.is3d()){let x=this.center,m=this.group,E=this.markerGroup,L=this.options.animation,S;L===!0&&(L={}),v?(m.oldtranslateX=f(m.oldtranslateX,m.translateX),m.oldtranslateY=f(m.oldtranslateY,m.translateY),S={translateX:x[0],translateY:x[1],scaleX:.001,scaleY:.001},m.attr(S),E&&(E.attrSetters=m.attrSetters,E.attr(S))):(S={translateX:m.oldtranslateX,translateY:m.oldtranslateY,scaleX:1,scaleY:1},m.animate(S,L),E&&E.animate(S,L))}else super.animate.apply(this,arguments)}getDataLabelPosition(v,x){let m=super.getDataLabelPosition(v,x);if(this.chart.is3d()){let E=this.chart.options.chart.options3d,L=v.shapeArgs,S=L.r,w=(L.alpha||E?.alpha)*a,R=(L.beta||E?.beta)*a,O=(L.start+L.end)/2,I=m.connectorPosition,_=-S*(1-Math.cos(w))*Math.sin(O),A=S*(Math.cos(R)-1)*Math.cos(O);for(let F of[m?.natural,I.breakAt,I.touchingSliceAt])F.x+=A,F.y+=_}return m}pointAttribs(v){let x=super.pointAttribs.apply(this,arguments),m=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(x.stroke=m.edgeColor||v.color||this.color,x["stroke-width"]=f(m.edgeWidth,1)),x}translate(){if(super.translate.apply(this,arguments),!this.chart.is3d())return;let v=this.options,x=v.depth||0,m=this.chart.options.chart.options3d,E=m.alpha,L=m.beta,S=v.stacking?(v.stack||0)*x:this._i*x;for(let w of(S+=x/2,v.grouping!==!1&&(S=0),this.points)){let R=w.shapeArgs;w.shapeType="arc3d",R.z=S,R.depth=.75*x,R.alpha=E,R.beta=L,R.center=this.center;let O=(R.end+R.start)/2;w.slicedTranslation={translateX:Math.round(Math.cos(O)*v.slicedOffset*Math.cos(E*a)),translateY:Math.round(Math.sin(O)*v.slicedOffset*Math.cos(E*a))}}}drawTracker(){if(super.drawTracker.apply(this,arguments),this.chart.is3d()){for(let v of this.points)if(v.graphic)for(let x of["out","inn","side1","side2"])v.graphic&&(v.graphic[x].element.point=v)}}}return c(p.prototype,{pointClass:s}),p}),i(t,"Series/Scatter3D/Scatter3DPoint.js",[t["Series/Scatter/ScatterSeries.js"],t["Core/Utilities.js"]],function(e,s){let{pointClass:r}=e.prototype,{defined:n}=s;return class extends r{applyOptions(){return super.applyOptions.apply(this,arguments),n(this.z)||(this.z=0),this}}}),i(t,"Series/Scatter3D/Scatter3DSeriesDefaults.js",[],function(){return{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}}}),i(t,"Series/Scatter3D/Scatter3DSeries.js",[t["Core/Math3D.js"],t["Series/Scatter3D/Scatter3DPoint.js"],t["Series/Scatter3D/Scatter3DSeriesDefaults.js"],t["Series/Scatter/ScatterSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{pointCameraDistance:h}=e,{extend:c,merge:f}=a;class u extends n{pointAttribs(b){let v=super.pointAttribs.apply(this,arguments);return this.chart.is3d()&&b&&(v.zIndex=h(b,this.chart)),v}}return u.defaultOptions=f(n.defaultOptions,r),c(u.prototype,{axisTypes:["xAxis","yAxis","zAxis"],directTouch:!0,parallelArrays:["x","y","z"],pointArrayMap:["x","y","z"],pointClass:s}),l.registerSeriesType("scatter3d",u),u}),i(t,"masters/highcharts-3d.src.js",[t["Core/Globals.js"],t["Core/Chart/Chart3D.js"],t["Series/Area3D/Area3DSeries.js"],t["Core/Axis/Axis3DComposition.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series3D.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Renderer/SVG/SVGRenderer3D.js"],t["Core/Axis/ZAxis.js"],t["Series/Column3D/Column3DComposition.js"],t["Series/Pie3D/Pie3DSeries.js"]],function(e,s,r,n,l,a,h,c,f,u,p){return r.compose(e.seriesTypes.area),n.compose(e.Axis,e.Tick),s.compose(e.Chart,e.Fx),u.compose(e.Series,h),p.compose(e.Series),a.compose(e.Series),c.compose(l.getRendererType()),f.compose(e.Chart),e})})});var $u=oi((xA,po)=>{"use strict";(function(o){typeof po=="object"&&po.exports?(o.default=o,po.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/exporting",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function i(e,s,r,n){e.hasOwnProperty(s)||(e[s]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:e[s]}})))}i(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var e;return function(s){s.compose=function(n){return n.navigation||(n.navigation=new r(n)),n};class r{constructor(l){this.updates=[],this.chart=l}addUpdate(l){this.chart.navigation.updates.push(l)}update(l,a){this.updates.forEach(h=>{h.call(this.chart,l,a)})}}s.Additions=r}(e||(e={})),e}),i(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(e){let{isTouchDevice:s}=e;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:s?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),i(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var e;return function(s){let r=[];function n(a,h,c,f){return[["M",a,h+2.5],["L",a+c,h+2.5],["M",a,h+f/2+.5],["L",a+c,h+f/2+.5],["M",a,h+f-1.5],["L",a+c,h+f-1.5]]}function l(a,h,c,f){let u=f/3-2;return[].concat(this.circle(c-u,h,u,u),this.circle(c-u,h+u+4,u,u),this.circle(c-u,h+2*(u+4),u,u))}s.compose=function(a){if(r.indexOf(a)===-1){r.push(a);let h=a.prototype.symbols;h.menu=n,h.menuball=l.bind(h)}}}(e||(e={})),e}),i(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r){let{composed:n}=s,{addEvent:l,fireEvent:a,pushUnique:h}=r;function c(){this.fullscreen=new f(this)}class f{static compose(p){h(n,"Fullscreen")&&l(p,"beforeRender",c)}constructor(p){this.chart=p,this.isOpen=!1;let b=p.renderTo;!this.browserProps&&(typeof b.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:b.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:b.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:b.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let p=this,b=p.chart,v=b.options.chart;a(b,"fullscreenClose",null,function(){p.isOpen&&p.browserProps&&b.container.ownerDocument instanceof Document&&b.container.ownerDocument[p.browserProps.exitFullscreen](),p.unbindFullscreenEvent&&(p.unbindFullscreenEvent=p.unbindFullscreenEvent()),b.setSize(p.origWidth,p.origHeight,!1),p.origWidth=void 0,p.origHeight=void 0,v.width=p.origWidthOption,v.height=p.origHeightOption,p.origWidthOption=void 0,p.origHeightOption=void 0,p.isOpen=!1,p.setButtonText()})}open(){let p=this,b=p.chart,v=b.options.chart;a(b,"fullscreenOpen",null,function(){if(v&&(p.origWidthOption=v.width,p.origHeightOption=v.height),p.origWidth=b.chartWidth,p.origHeight=b.chartHeight,p.browserProps){let x=l(b.container.ownerDocument,p.browserProps.fullscreenChange,function(){p.isOpen?(p.isOpen=!1,p.close()):(b.setSize(null,null,!1),p.isOpen=!0,p.setButtonText())}),m=l(b,"destroy",x);p.unbindFullscreenEvent=()=>{x(),m()};let E=b.renderTo[p.browserProps.requestFullscreen]();E&&E.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let p=this.chart,b=p.exportDivElements,v=p.options.exporting,x=v&&v.buttons&&v.buttons.contextButton.menuItems,m=p.options.lang;if(v&&v.menuItemDefinitions&&m&&m.exitFullscreen&&m.viewFullscreen&&x&&b){let E=b[x.indexOf("viewFullscreen")];E&&e.setElementHTML(E,this.isOpen?m.exitFullscreen:v.menuItemDefinitions.viewFullscreen.text||m.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return f}),i(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){let{win:r}=e,{discardElement:n,objectEach:l}=s,a={ajax:function(h){let c={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},f=new XMLHttpRequest;function u(p,b){h.error&&h.error(p,b)}if(!h.url)return!1;f.open((h.type||"get").toUpperCase(),h.url,!0),h.headers&&h.headers["Content-Type"]||f.setRequestHeader("Content-Type",c[h.dataType||"json"]||c.text),l(h.headers,function(p,b){f.setRequestHeader(b,p)}),h.responseType&&(f.responseType=h.responseType),f.onreadystatechange=function(){let p;if(f.readyState===4){if(f.status===200){if(h.responseType!=="blob"&&(p=f.responseText,h.dataType==="json"))try{p=JSON.parse(p)}catch(b){if(b instanceof Error)return u(f,b)}return h.success&&h.success(p,f)}u(f,f.responseText)}},h.data&&typeof h.data!="string"&&(h.data=JSON.stringify(h.data)),f.send(h.data)},getJSON:function(h,c){a.ajax({url:h,success:c,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(h,c,f){let u=new r.FormData;l(c,function(v,x){u.append(x,v)}),u.append("b64","true");let{filename:p,type:b}=c;return r.fetch(h,Se({method:"POST",body:u},f)).then(v=>{v.ok&&v.text().then(x=>{let m=document.createElement("a");m.href=`data:${b};base64,${x}`,m.download=p,m.click(),n(m)})})}};return a}),i(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c,f,u){var p;let{defaultOptions:b}=n,{doc:v,SVG_NS:x,win:m}=c,{addEvent:E,css:L,createElement:S,discardElement:w,extend:R,find:O,fireEvent:I,isObject:_,merge:A,objectEach:F,pick:P,removeEvent:D,uniqueKey:C}=u;return function(d){let g,y=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^[0-9]+$/],M=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];d.inlineAllowlist=[];let k=["clipPath","defs","desc"];function T($){let Q,et,it=this,st=it.renderer,rt=A(it.options.navigation.buttonOptions,$),nt=rt.onclick,ot=rt.menuItems,at=rt.symbolSize||12;if(it.btnCount||(it.btnCount=0),it.exportDivElements||(it.exportDivElements=[],it.exportSVGElements=[]),rt.enabled===!1||!rt.theme)return;let ct=it.styledMode?{}:rt.theme;nt?et=function(lt){lt&&lt.stopPropagation(),nt.call(it,lt)}:ot&&(et=function(lt){lt&&lt.stopPropagation(),it.contextMenu(ht.menuClassName,ot,ht.translateX||0,ht.translateY||0,ht.width||0,ht.height||0,ht),ht.setState(2)}),rt.text&&rt.symbol?ct.paddingLeft=P(ct.paddingLeft,30):rt.text||R(ct,{width:rt.width,height:rt.height,padding:0});let ht=st.button(rt.text,0,0,et,ct,void 0,void 0,void 0,void 0,rt.useHTML).addClass($.className).attr({title:P(it.options.lang[rt._titleKey||rt.titleKey],"")});ht.menuClassName=$.menuClassName||"highcharts-menu-"+it.btnCount++,rt.symbol&&(Q=st.symbol(rt.symbol,Math.round((rt.symbolX||0)-at/2),Math.round((rt.symbolY||0)-at/2),at,at,{width:at,height:at}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(ht),it.styledMode||Q.attr({stroke:rt.symbolStroke,fill:rt.symbolFill,"stroke-width":rt.symbolStrokeWidth||1})),ht.add(it.exportingGroup).align(R(rt,{width:ht.width,x:P(rt.x,it.buttonOffset)}),!0,"spacingBox"),it.buttonOffset+=((ht.width||0)+rt.buttonSpacing)*(rt.align==="right"?-1:1),it.exportSVGElements.push(ht,Q)}function z(){if(!this.printReverseInfo)return;let{childNodes:$,origDisplay:Q,resetParams:et}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call($,function(it,st){it.nodeType===1&&(it.style.display=Q[st]||"")}),this.isPrinting=!1,et&&this.setSize.apply(this,et),delete this.printReverseInfo,g=void 0,I(this,"afterPrint")}function N(){let $=v.body,Q=this.options.exporting.printMaxWidth,et={childNodes:$.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,this.pointer?.reset(void 0,0),I(this,"beforePrint"),Q&&this.chartWidth>Q&&(et.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Q,void 0,!1)),[].forEach.call(et.childNodes,function(it,st){it.nodeType===1&&(et.origDisplay[st]=it.style.display,it.style.display="none")}),this.moveContainers($),this.printReverseInfo=et}function G($){$.renderExporting(),E($,"redraw",$.renderExporting),E($,"destroy",$.destroyExport)}function X($,Q,et,it,st,rt,nt){let ot=this,at=ot.options.navigation,ct=ot.chartWidth,ht=ot.chartHeight,lt="cache-"+$,yt=Math.max(st,rt),Et,dt=ot[lt];dt||(ot.exportContextMenu=ot[lt]=dt=S("div",{className:$},Se({position:"absolute",zIndex:1e3,padding:yt+"px",pointerEvents:"auto"},ot.renderer.style),ot.scrollablePlotArea?.fixedDiv||ot.container),Et=S("ul",{className:"highcharts-menu"},ot.styledMode?{}:{listStyle:"none",margin:0,padding:0},dt),ot.styledMode||L(Et,R({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},at.menuStyle)),dt.hideMenu=function(){L(dt,{display:"none"}),nt&&nt.setState(0),ot.openMenu=!1,L(ot.renderTo,{overflow:"hidden"}),L(ot.container,{overflow:"hidden"}),u.clearTimeout(dt.hideTimer),I(ot,"exportMenuHidden")},ot.exportEvents.push(E(dt,"mouseleave",function(){dt.hideTimer=m.setTimeout(dt.hideMenu,500)}),E(dt,"mouseenter",function(){u.clearTimeout(dt.hideTimer)}),E(v,"mouseup",function(mt){ot.pointer?.inClass(mt.target,$)||dt.hideMenu()}),E(dt,"click",function(){ot.openMenu&&dt.hideMenu()})),Q.forEach(function(mt){if(typeof mt=="string"&&(mt=ot.options.exporting.menuItemDefinitions[mt]),_(mt,!0)){let Pt;mt.separator?Pt=S("hr",void 0,void 0,Et):(mt.textKey==="viewData"&&ot.isDataTableVisible&&(mt.textKey="hideData"),Pt=S("li",{className:"highcharts-menu-item",onclick:function(jt){jt&&jt.stopPropagation(),dt.hideMenu(),typeof mt!="string"&&mt.onclick&&mt.onclick.apply(ot,arguments)}},void 0,Et),e.setElementHTML(Pt,mt.text||ot.options.lang[mt.textKey]),ot.styledMode||(Pt.onmouseover=function(){L(this,at.menuItemHoverStyle)},Pt.onmouseout=function(){L(this,at.menuItemStyle)},L(Pt,R({cursor:"pointer"},at.menuItemStyle||{})))),ot.exportDivElements.push(Pt)}}),ot.exportDivElements.push(Et,dt),ot.exportMenuWidth=dt.offsetWidth,ot.exportMenuHeight=dt.offsetHeight);let St={display:"block"};et+(ot.exportMenuWidth||0)>ct?St.right=ct-et-st-yt+"px":St.left=et-yt+"px",it+rt+(ot.exportMenuHeight||0)>ht&&nt.alignOptions?.verticalAlign!=="top"?St.bottom=ht-it-yt+"px":St.top=it+rt-yt+"px",L(dt,St),L(ot.renderTo,{overflow:""}),L(ot.container,{overflow:""}),ot.openMenu=!0,I(ot,"exportMenuShown")}function j($){let Q,et=$?$.target:this,it=et.exportSVGElements,st=et.exportDivElements,rt=et.exportEvents;it&&(it.forEach((nt,ot)=>{nt&&(nt.onclick=nt.ontouchstart=null,et[Q="cache-"+nt.menuClassName]&&delete et[Q],it[ot]=nt.destroy())}),it.length=0),et.exportingGroup&&(et.exportingGroup.destroy(),delete et.exportingGroup),st&&(st.forEach(function(nt,ot){nt&&(u.clearTimeout(nt.hideTimer),D(nt,"mouseleave"),st[ot]=nt.onmouseout=nt.onmouseover=nt.ontouchstart=nt.onclick=null,w(nt))}),st.length=0),rt&&(rt.forEach(function(nt){nt()}),rt.length=0)}function B($,Q){let et=this.getSVGForExport($,Q);$=A(this.options.exporting,$),f.post($.url,{filename:$.filename?$.filename.replace(/\//g,"-"):this.getFilename(),type:$.type,width:$.width,scale:$.scale,svg:et},$.fetchOptions)}function W(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function V(){let $=this.userOptions.title&&this.userOptions.title.text,Q=this.options.exporting.filename;return Q?Q.replace(/\//g,"-"):(typeof $=="string"&&(Q=$.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Q||Q.length<5)&&(Q="chart"),Q)}function U($){let Q,et,it=A(this.options,$);it.plotOptions=A(this.userOptions.plotOptions,$&&$.plotOptions),it.time=A(this.userOptions.time,$&&$.time);let st=S("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},v.body),rt=this.renderTo.style.width,nt=this.renderTo.style.height,ot=it.exporting.sourceWidth||it.chart.width||/px$/.test(rt)&&parseInt(rt,10)||(it.isGantt?800:600),at=it.exporting.sourceHeight||it.chart.height||/px$/.test(nt)&&parseInt(nt,10)||400;R(it.chart,{animation:!1,renderTo:st,forExport:!0,renderer:"SVGRenderer",width:ot,height:at}),it.exporting.enabled=!1,delete it.data,it.series=[],this.series.forEach(function(lt){(et=A(lt.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:lt.visible})).isInternal||it.series.push(et)});let ct={};this.axes.forEach(function(lt){lt.userOptions.internalKey||(lt.userOptions.internalKey=C()),lt.options.isInternal||(ct[lt.coll]||(ct[lt.coll]=!0,it[lt.coll]=[]),it[lt.coll].push(A(lt.userOptions,{visible:lt.visible})))}),it.colorAxis=this.userOptions.colorAxis;let ht=new this.constructor(it,this.callback);return $&&["xAxis","yAxis","series"].forEach(function(lt){let yt={};$[lt]&&(yt[lt]=$[lt],ht.update(yt))}),this.axes.forEach(function(lt){let yt=O(ht.axes,function(mt){return mt.options.internalKey===lt.userOptions.internalKey}),Et=lt.getExtremes(),dt=Et.userMin,St=Et.userMax;yt&&(dt!==void 0&&dt!==yt.min||St!==void 0&&St!==yt.max)&&yt.setExtremes(dt,St,!0,!1)}),Q=ht.getChartHTML(),I(this,"getSVG",{chartCopy:ht}),Q=this.sanitizeSVG(Q,it),it=null,ht.destroy(),w(st),Q}function q($,Q){let et=this.options.exporting;return this.getSVG(A({chart:{borderRadius:0}},et.chartOptions,Q,{exporting:{sourceWidth:$&&$.sourceWidth||et.sourceWidth,sourceHeight:$&&$.sourceHeight||et.sourceHeight}}))}function H(){let $,Q=d.inlineAllowlist,et={},it=v.createElement("iframe");L(it,{width:"1px",height:"1px",visibility:"hidden"}),v.body.appendChild(it);let st=it.contentWindow&&it.contentWindow.document;st&&st.body.appendChild(st.createElementNS(x,"svg")),function rt(nt){let ot,at,ct,ht,lt,yt,Et={};if(st&&nt.nodeType===1&&k.indexOf(nt.nodeName)===-1){if(ot=m.getComputedStyle(nt,null),at=nt.nodeName==="svg"?{}:m.getComputedStyle(nt.parentNode,null),!et[nt.nodeName]){$=st.getElementsByTagName("svg")[0],ct=st.createElementNS(nt.namespaceURI,nt.nodeName),$.appendChild(ct);let dt=m.getComputedStyle(ct,null),St={};for(let mt in dt)mt.length<1e3&&typeof dt[mt]=="string"&&!/^[0-9]+$/.test(mt)&&(St[mt]=dt[mt]);et[nt.nodeName]=St,nt.nodeName==="text"&&delete et.text.fill,$.removeChild(ct)}for(let dt in ot)(c.isFirefox||c.isMS||c.isSafari||Object.hasOwnProperty.call(ot,dt))&&function(St,mt){if(ht=lt=!1,Q.length){for(yt=Q.length;yt--&&!lt;)lt=Q[yt].test(mt);ht=!lt}for(mt==="transform"&&St==="none"&&(ht=!0),yt=y.length;yt--&&!ht;){if(mt.length>1e3)throw Error("Input too long");ht=y[yt].test(mt)||typeof St=="function"}!ht&&(at[mt]!==St||nt.nodeName==="svg")&&et[nt.nodeName][mt]!==St&&(M&&M.indexOf(mt)===-1?Et[mt]=St:St&&nt.setAttribute(mt.replace(/([A-Z])/g,function(Pt,jt){return"-"+jt.toLowerCase()}),St))}(ot[dt],dt);if(L(nt,Et),nt.nodeName==="svg"&&nt.setAttribute("stroke-width","1px"),nt.nodeName==="text")return;[].forEach.call(nt.children||nt.childNodes,rt)}}(this.container.querySelector("svg")),$.parentNode.removeChild($),it.parentNode.removeChild(it)}function Y($){let{scrollablePlotArea:Q}=this;(Q?[Q.fixedDiv,Q.scrollingContainer]:[this.container]).forEach(function(et){$.appendChild(et)})}function Z(){let $=this,Q=(et,it,st)=>{$.isDirtyExporting=!0,A(!0,$.options[et],it),P(st,!0)&&$.redraw()};$.exporting={update:function(et,it){Q("exporting",et,it)}},r.compose($).navigation.addUpdate((et,it)=>{Q("navigation",et,it)})}function K(){let $=this;$.isPrinting||(g=$,c.isSafari||$.beforePrint(),setTimeout(()=>{m.focus(),m.print(),c.isSafari||setTimeout(()=>{$.afterPrint()},1e3)},1))}function J(){let $=this,Q=$.options.exporting,et=Q.buttons,it=$.isDirtyExporting||!$.exportSVGElements;$.buttonOffset=0,$.isDirtyExporting&&$.destroyExport(),it&&Q.enabled!==!1&&($.exportEvents=[],$.exportingGroup=$.exportingGroup||$.renderer.g("exporting-group").attr({zIndex:3}).add(),F(et,function(st){$.addButton(st)}),$.isDirtyExporting=!1)}function tt($,Q){let et=$.indexOf("</svg>")+6,it=$.substr(et);return $=$.substr(0,et),Q&&Q.exporting&&Q.exporting.allowHTML&&it&&(it='<foreignObject x="0" y="0" width="'+Q.chart.width+'" height="'+Q.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+it.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",$=$.replace("</svg>",it+"</svg>")),$=$.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (|NS[0-9]+\:)href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xA0").replace(/&shy;/g,"\xAD")}d.compose=function($,Q){a.compose(Q),h.compose($);let et=$.prototype;et.exportChart||(et.afterPrint=z,et.exportChart=B,et.inlineStyles=H,et.print=K,et.sanitizeSVG=tt,et.getChartHTML=W,et.getSVG=U,et.getSVGForExport=q,et.getFilename=V,et.moveContainers=Y,et.beforePrint=N,et.contextMenu=X,et.addButton=T,et.destroyExport=j,et.renderExporting=J,et.callbacks.push(G),E($,"init",Z),c.isSafari&&m.matchMedia("print").addListener(function(it){g&&(it.matches?g.beforePrint():g.afterPrint())}),b.exporting=A(l.exporting,b.exporting),b.lang=A(l.lang,b.lang),b.navigation=A(l.navigation,b.navigation))}}(p||(p={})),p}),i(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(e,s,r){return e.HttpUtilities=e.HttpUtilities||r,e.ajax=e.HttpUtilities.ajax,e.getJSON=e.HttpUtilities.getJSON,e.post=e.HttpUtilities.post,s.compose(e.Chart,e.Renderer),e})})});var Ju=oi((bA,fo)=>{"use strict";(function(o){typeof fo=="object"&&fo.exports?(o.default=o,fo.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/stock",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function i(e,s,r,n){e.hasOwnProperty(s)||(e[s]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:e[s]}})))}i(t,"Series/DataModifyComposition.js",[t["Core/Axis/Axis.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,s,r,n){var l;let{tooltipFormatter:a}=s.prototype,{addEvent:h,arrayMax:c,arrayMin:f,correctFloat:u,defined:p,isArray:b,isNumber:v,isString:x,pick:m}=n;return function(E){function L(D,C,d){!this.isXAxis&&(this.series.forEach(function(g){D==="compare"&&typeof C!="boolean"?g.setCompare(C,!1):D!=="cumulative"||x(C)||g.setCumulative(C,!1)}),m(d,!0)&&this.chart.redraw())}function S(D){let C=this,{numberFormatter:d}=C.series.chart,g=function(y){D=D.replace("{point."+y+"}",(C[y]>0&&y==="change"?"+":"")+d(C[y],m(C.series.tooltipOptions.changeDecimals,2)))};return p(C.change)&&g("change"),p(C.cumulativeSum)&&g("cumulativeSum"),a.apply(this,[D])}function w(){let D,C=this.options.compare;(C==="percent"||C==="value"||this.options.cumulative)&&(D=new P(this),C==="percent"||C==="value"?D.initCompare(C):D.initCumulative()),this.dataModify=D}function R(D){let C=D.dataExtremes,d=C.activeYData;if(this.dataModify&&C){let g;this.options.compare?g=[this.dataModify.modifyValue(C.dataMin),this.dataModify.modifyValue(C.dataMax)]:this.options.cumulative&&b(d)&&d.length>=2&&(g=P.getCumulativeExtremes(d)),g&&(C.dataMin=f(g),C.dataMax=c(g))}}function O(D,C){this.options.compare=this.userOptions.compare=D,this.update({},m(C,!0)),this.dataModify&&(D==="value"||D==="percent")?this.dataModify.initCompare(D):this.points.forEach(d=>{delete d.change})}function I(){if(this.xAxis&&this.processedYData&&this.dataModify){let D=this.processedXData,C=this.processedYData,d=C.length,g=this.options.compareStart===!0?0:1,y=-1,M;for(this.pointArrayMap&&(y=this.pointArrayMap.indexOf(this.options.pointValKey||this.pointValKey||"y")),M=0;M<d-g;M++){let k=C[M]&&y>-1?C[M][y]:C[M];if(v(k)&&k!==0&&D[M+g]>=(this.xAxis.min||0)){this.dataModify.compareValue=k;break}}}}function _(D,C){this.setModifier("compare",D,C)}function A(D,C){D=m(D,!1),this.options.cumulative=this.userOptions.cumulative=D,this.update({},m(C,!0)),this.dataModify?this.dataModify.initCumulative():this.points.forEach(d=>{delete d.cumulativeSum})}function F(D,C){this.setModifier("cumulative",D,C)}E.compose=function(D,C,d){let g=C.prototype,y=d.prototype,M=D.prototype;return M.setCompare||(M.setCompare=O,M.setCumulative=A,h(D,"afterInit",w),h(D,"afterGetExtremes",R),h(D,"afterProcessData",I)),g.setCompare||(g.setCompare=_,g.setModifier=L,g.setCumulative=F,y.tooltipFormatter=S),D};class P{constructor(C){this.series=C}modifyValue(){return 0}static getCumulativeExtremes(C){let d=1/0,g=-1/0;return C.reduce((y,M)=>{let k=y+M;return d=Math.min(d,k,y),g=Math.max(g,k,y),k}),[d,g]}initCompare(C){this.modifyValue=function(d,g){d===null&&(d=0);let y=this.compareValue;if(d!==void 0&&y!==void 0){if(C==="value"?d-=y:d=d/y*100-(this.series.options.compareBase===100?0:100),g!==void 0){let M=this.series.points[g];M&&(M.change=d)}return d}return 0}}initCumulative(){this.modifyValue=function(C,d){if(C===null&&(C=0),C!==void 0&&d!==void 0){let g=d>0?this.series.points[d-1]:null;g&&g.cumulativeSum&&(C=u(g.cumulativeSum+C));let y=this.series.points[d],M=y.series.options.cumulativeStart,k=y.x<=this.series.xAxis.max&&y.x>=this.series.xAxis.min;return y&&(!M||k?y.cumulativeSum=C:y.cumulativeSum=void 0),C}return 0}}}E.Additions=P}(l||(l={})),l}),i(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){let r,{isTouchDevice:n}=e,{addEvent:l,merge:a,pick:h}=s,c=[];function f(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function u(){let E,L,S,w=this.legend,R=this.navigator;if(R){E=w&&w.options,L=R.xAxis,S=R.yAxis;let{scrollbarHeight:O,scrollButtonSize:I}=R;this.inverted?(R.left=R.opposite?this.chartWidth-O-R.height:this.spacing[3]+O,R.top=this.plotTop+I):(R.left=h(L.left,this.plotLeft+I),R.top=R.navigatorOptions.top||this.chartHeight-R.height-O-(this.scrollbar?.options.margin||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(E&&E.verticalAlign==="bottom"&&E.layout!=="proximate"&&E.enabled&&!E.floating?w.legendHeight+h(E.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),L&&S&&(this.inverted?L.options.left=S.options.left=R.left:L.options.top=S.options.top=R.top,L.setAxisSize(),S.setAxisSize())}}function p(E){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new r(this),h(E.redraw,!0)&&this.redraw(E.animation))}function b(){let E=this.options;(E.navigator.enabled||E.scrollbar.enabled)&&(this.scroller=this.navigator=new r(this))}function v(){let E=this.options,L=E.navigator,S=E.rangeSelector;if((L&&L.enabled||S&&S.enabled)&&(!n&&this.zooming.type==="x"||n&&this.zooming.pinchType==="x"))return!1}function x(E){let L=E.navigator;if(L&&E.xAxis[0]){let S=E.xAxis[0].getExtremes();L.render(S.min,S.max)}}function m(E){let L=E.options.navigator||{},S=E.options.scrollbar||{};!this.navigator&&!this.scroller&&(L.enabled||S.enabled)&&(a(!0,this.options.navigator,L),a(!0,this.options.scrollbar,S),delete E.options.navigator,delete E.options.scrollbar)}return{compose:function(E,L){if(s.pushUnique(c,E)){let S=E.prototype;r=L,S.callbacks.push(x),l(E,"afterAddSeries",f),l(E,"afterSetChartSize",u),l(E,"afterUpdate",p),l(E,"beforeRender",b),l(E,"beforeShowResetZoom",v),l(E,"update",m)}}}}),i(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){let{isTouchDevice:r}=e,{addEvent:n,correctFloat:l,defined:a,isNumber:h,pick:c}=s;function f(){this.navigatorAxis||(this.navigatorAxis=new p(this))}function u(b){let v,x=this.chart,m=x.options,E=m.navigator,L=this.navigatorAxis,S=x.zooming.pinchType,w=m.rangeSelector,R=x.zooming.type;if(this.isXAxis&&(E?.enabled||w?.enabled)){if(R==="y"&&b.trigger==="zoom")v=!1;else if((b.trigger==="zoom"&&R==="xy"||r&&S==="xy")&&this.options.range){let O=L.previousZoom;a(b.min)?L.previousZoom=[this.min,this.max]:O&&(b.min=O[0],b.max=O[1],L.previousZoom=void 0)}}v!==void 0&&b.preventDefault()}class p{static compose(v){v.keepProps.includes("navigatorAxis")||(v.keepProps.push("navigatorAxis"),n(v,"init",f),n(v,"setExtremes",u))}constructor(v){this.axis=v}destroy(){this.axis=void 0}toFixedRange(v,x,m,E){let L=this.axis,S=(L.pointRange||0)/2,w=c(m,L.translate(v,!0,!L.horiz)),R=c(E,L.translate(x,!0,!L.horiz));return a(m)||(w=l(w+S)),a(E)||(R=l(R-S)),h(w)&&h(R)||(w=R=void 0),{min:w,max:R}}}return p}),i(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(e,s){let{parse:r}=e,{seriesTypes:n}=s;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:r("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:n.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),i(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(e,s){let{relativeLength:r}=s;return{"navigator-handle":function(n,l,a,h,c={}){let f=c.width?c.width/2:a,u=r(c.borderRadius||0,Math.min(2*f,h));return[["M",-1.5,(h=c.height||h)/2-3.5],["L",-1.5,h/2+4.5],["M",.5,h/2-3.5],["L",.5,h/2+4.5],...e.rect(-f-1,.5,2*f+1,h,{r:u})]}}}),i(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(e){let{defined:s}=e;return{setFixedRange:function(r){let n=this.xAxis[0];s(n.dataMax)&&s(n.dataMin)&&r?this.fixedRange=Math.min(r,n.dataMax-n.dataMin):this.fixedRange=r}}}),i(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c){let{setOptions:f}=e,{composed:u}=s,{getRendererType:p}=a,{setFixedRange:b}=h,{addEvent:v,extend:x,pushUnique:m}=c;function E(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(L,S,w){r.compose(S),m(u,"Navigator")&&(L.prototype.setFixedRange=b,x(p().prototype.symbols,l),v(w,"afterUpdate",E),f({navigator:n}))}}}),i(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s){var r;let{composed:n}=e,{addEvent:l,defined:a,pick:h,pushUnique:c}=s;return function(f){let u;function p(m){let E=h(m.options&&m.options.min,m.min),L=h(m.options&&m.options.max,m.max);return{axisMin:E,axisMax:L,scrollMin:a(m.dataMin)?Math.min(E,m.min,m.dataMin,h(m.threshold,1/0)):E,scrollMax:a(m.dataMax)?Math.max(L,m.max,m.dataMax,h(m.threshold,-1/0)):L}}function b(){let m=this.scrollbar,E=m&&!m.options.opposite,L=this.horiz?2:E?3:1;m&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[L]+=m.size+(m.options.margin||0))}function v(){let m=this;m.options&&m.options.scrollbar&&m.options.scrollbar.enabled&&(m.options.scrollbar.vertical=!m.horiz,m.options.startOnTick=m.options.endOnTick=!1,m.scrollbar=new u(m.chart.renderer,m.options.scrollbar,m.chart),l(m.scrollbar,"changed",function(E){let L,S,{axisMin:w,axisMax:R,scrollMin:O,scrollMax:I}=p(m),_=I-O;if(a(w)&&a(R))if(m.horiz&&!m.reversed||!m.horiz&&m.reversed?(L=O+_*this.to,S=O+_*this.from):(L=O+_*(1-this.from),S=O+_*(1-this.to)),this.shouldUpdateExtremes(E.DOMType)){let A=E.DOMType!=="mousemove"&&E.DOMType!=="touchmove"&&void 0;m.setExtremes(S,L,!0,A,E)}else this.setRange(this.from,this.to)}))}function x(){let m,E,L,{scrollMin:S,scrollMax:w}=p(this),R=this.scrollbar,O=this.axisTitleMargin+(this.titleOffset||0),I=this.chart.scrollbarsOffsets,_=this.options.margin||0;if(R&&I){if(this.horiz)this.opposite||(I[1]+=O),R.position(this.left,this.top+this.height+2+I[1]-(this.opposite?_:0),this.width,this.height),this.opposite||(I[1]+=_),m=1;else{let A;this.opposite&&(I[0]+=O),A=R.options.opposite?this.left+this.width+2+I[0]-(this.opposite?0:_):this.opposite?0:_,R.position(A,this.top,this.width,this.height),this.opposite&&(I[0]+=_),m=0}I[m]+=R.size+(R.options.margin||0),isNaN(S)||isNaN(w)||!a(this.min)||!a(this.max)||this.min===this.max?R.setRange(0,1):(E=(this.min-S)/(w-S),L=(this.max-S)/(w-S),this.horiz&&!this.reversed||!this.horiz&&this.reversed?R.setRange(E,L):R.setRange(1-L,1-E))}}f.compose=function(m,E){c(n,"Axis.Scrollbar")&&(u=E,l(m,"afterGetOffset",b),l(m,"afterInit",v),l(m,"afterRender",x))}}(r||(r={})),r}),i(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),i(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(e,s,r,n,l){let{defaultOptions:a}=e,{addEvent:h,correctFloat:c,crisp:f,defined:u,destroyObjectProperties:p,fireEvent:b,merge:v,pick:x,removeEvent:m}=l;class E{static compose(S){r.compose(S,E)}static swapXY(S,w){return w&&S.forEach(R=>{let O,I=R.length;for(let _=0;_<I;_+=2)typeof(O=R[_+1])=="number"&&(R[_+1]=R[_+2],R[_+2]=O)}),S}constructor(S,w,R){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(S,w,R)}addEvents(){let S=this.options.inverted?[1,0]:[0,1],w=this.scrollbarButtons,R=this.scrollbarGroup.element,O=this.track.element,I=this.mouseDownHandler.bind(this),_=this.mouseMoveHandler.bind(this),A=this.mouseUpHandler.bind(this),F=[[w[S[0]].element,"click",this.buttonToMinClick.bind(this)],[w[S[1]].element,"click",this.buttonToMaxClick.bind(this)],[O,"click",this.trackClick.bind(this)],[R,"mousedown",I],[R.ownerDocument,"mousemove",_],[R.ownerDocument,"mouseup",A],[R,"touchstart",I],[R.ownerDocument,"touchmove",_],[R.ownerDocument,"touchend",A]];F.forEach(function(P){h.apply(null,P)}),this._events=F}buttonToMaxClick(S){let w=(this.to-this.from)*x(this.options.step,.2);this.updatePosition(this.from+w,this.to+w),b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:S})}buttonToMinClick(S){let w=c(this.to-this.from)*x(this.options.step,.2);this.updatePosition(c(this.from-w),c(this.to-w)),b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:S})}cursorToScrollbarPosition(S){let w=this.options,R=w.minWidth>this.calculatedWidth?w.minWidth:0;return{chartX:(S.chartX-this.x-this.xOffset)/(this.barWidth-R),chartY:(S.chartY-this.y-this.yOffset)/(this.barWidth-R)}}destroy(){let S=this,w=S.chart.scroller;S.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(R){S[R]&&S[R].destroy&&(S[R]=S[R].destroy())}),w&&S===w.scrollbar&&(w.scrollbar=null,p(w.scrollbarButtons))}drawScrollbarButton(S){let w=this.renderer,R=this.scrollbarButtons,O=this.options,I=this.size,_=w.g().add(this.group);if(R.push(_),O.buttonsEnabled){let A=w.rect().addClass("highcharts-scrollbar-button").add(_);this.chart.styledMode||A.attr({stroke:O.buttonBorderColor,"stroke-width":O.buttonBorderWidth,fill:O.buttonBackgroundColor}),A.attr(A.crisp({x:-.5,y:-.5,width:I,height:I,r:O.buttonBorderRadius},A.strokeWidth()));let F=w.path(E.swapXY([["M",I/2+(S?-1:1),I/2-3],["L",I/2+(S?-1:1),I/2+3],["L",I/2+(S?2:-2),I/2]],O.vertical)).addClass("highcharts-scrollbar-arrow").add(R[S]);this.chart.styledMode||F.attr({fill:O.buttonArrowColor})}}init(S,w,R){this.scrollbarButtons=[],this.renderer=S,this.userOptions=w,this.options=v(n,a.scrollbar,w),this.options.margin=x(this.options.margin,10),this.chart=R,this.size=x(this.options.size,this.options.height),w.enabled&&(this.render(),this.addEvents())}mouseDownHandler(S){let w=this.chart.pointer?.normalize(S)||S,R=this.cursorToScrollbarPosition(w);this.chartX=R.chartX,this.chartY=R.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(S){let w,R=this.chart.pointer?.normalize(S)||S,O=this.options.vertical?"chartY":"chartX",I=this.initPositions||[];this.grabbedCenter&&(!S.touches||S.touches[0][O]!==0)&&(w=this.cursorToScrollbarPosition(R)[O]-this[O],this.hasDragged=!0,this.updatePosition(I[0]+w,I[1]+w),this.hasDragged&&b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:S.type,DOMEvent:S}))}mouseUpHandler(S){this.hasDragged&&b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:S.type,DOMEvent:S}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(S,w,R,O){let{buttonsEnabled:I,margin:_=0,vertical:A}=this.options,F=this.rendered?"animate":"attr",P=O,D=0;this.group.show(),this.x=S,this.y=w+this.trackBorderWidth,this.width=R,this.height=O,this.xOffset=P,this.yOffset=D,A?(this.width=this.yOffset=R=D=this.size,this.xOffset=P=0,this.yOffset=D=I?this.size:0,this.barWidth=O-(I?2*R:0),this.x=S+=_):(this.height=O=this.size,this.xOffset=P=I?this.size:0,this.barWidth=R-(I?2*O:0),this.y=this.y+_),this.group[F]({translateX:S,translateY:this.y}),this.track[F]({width:R,height:O}),this.scrollbarButtons[1][F]({translateX:A?0:R-P,translateY:A?O-D:0})}removeEvents(){this._events.forEach(function(S){m.apply(null,S)}),this._events.length=0}render(){let S=this.renderer,w=this.options,R=this.size,O=this.chart.styledMode,I=S.g("scrollbar").attr({zIndex:w.zIndex}).hide().add();this.group=I,this.track=S.rect().addClass("highcharts-scrollbar-track").attr({r:w.trackBorderRadius||0,height:R,width:R}).add(I),O||this.track.attr({fill:w.trackBackgroundColor,stroke:w.trackBorderColor,"stroke-width":w.trackBorderWidth});let _=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-f(0,_),y:-f(0,_)}),this.scrollbarGroup=S.g().add(I),this.scrollbar=S.rect().addClass("highcharts-scrollbar-thumb").attr({height:R-_,width:R-_,r:w.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=S.path(E.swapXY([["M",-3,R/4],["L",-3,2*R/3],["M",0,R/4],["L",0,2*R/3],["M",3,R/4],["L",3,2*R/3]],w.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),O||(this.scrollbar.attr({fill:w.barBackgroundColor,stroke:w.barBorderColor,"stroke-width":w.barBorderWidth}),this.scrollbarRifles.attr({stroke:w.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-f(0,this.scrollbarStrokeWidth),-f(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(S,w){let R,O,I=this.options,_=I.vertical,A=I.minWidth,F=this.barWidth,P=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!u(F))return;let D=F*Math.min(w,1);R=Math.ceil(F*(S=Math.max(S,0))),this.calculatedWidth=O=c(D-R),O<A&&(R=(F-A+O)*S,O=A);let C=Math.floor(R+this.xOffset+this.yOffset),d=O/2-.5;this.from=S,this.to=w,_?(this.scrollbarGroup[P]({translateY:C}),this.scrollbar[P]({height:O}),this.scrollbarRifles[P]({translateY:d}),this.scrollbarTop=C,this.scrollbarLeft=0):(this.scrollbarGroup[P]({translateX:C}),this.scrollbar[P]({width:O}),this.scrollbarRifles[P]({translateX:d}),this.scrollbarLeft=C,this.scrollbarTop=0),O<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),I.showFull===!1&&(S<=0&&w>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(S){return x(this.options.liveRedraw,s.svg&&!s.isTouchDevice&&!this.chart.boosted)||S==="mouseup"||S==="touchend"||!u(S)}trackClick(S){let w=this.chart.pointer?.normalize(S)||S,R=this.to-this.from,O=this.y+this.scrollbarTop,I=this.x+this.scrollbarLeft;this.options.vertical&&w.chartY>O||!this.options.vertical&&w.chartX>I?this.updatePosition(this.from+R,this.to+R):this.updatePosition(this.from-R,this.to-R),b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:S})}update(S){this.destroy(),this.init(this.chart.renderer,v(!0,this.options,S),this.chart)}updatePosition(S,w){w>1&&(S=c(1-c(w-S)),w=1),S<0&&(w=c(w-S),S=0),this.from=S,this.to=w}}return E.defaultOptions=n,a.scrollbar=v(!0,E.defaultOptions,a.scrollbar),E}),i(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c){let{defaultOptions:f}=r,{isTouchDevice:u}=n,{addEvent:p,clamp:b,correctFloat:v,defined:x,destroyObjectProperties:m,erase:E,extend:L,find:S,fireEvent:w,isArray:R,isNumber:O,merge:I,pick:_,removeEvent:A,splat:F}=c;function P(C,...d){let g=[].filter.call(d,O);if(g.length)return Math[C].apply(0,g)}class D{static compose(d,g,y){s.compose(d,D),a.compose(d,g,y)}constructor(d){this.scrollbarHeight=0,this.init(d)}drawHandle(d,g,y,M){let k=this.navigatorOptions.handles.height;this.handles[g][M](y?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(d,10)+.5-k)}:{translateX:Math.round(this.left+parseInt(d,10)),translateY:Math.round(this.top+this.height/2-k/2-1)})}drawOutline(d,g,y,M){let k=this.navigatorOptions.maskInside,T=this.outline.strokeWidth(),z=T/2,N=T%2/2,G=this.scrollButtonSize,X=this.size,j=this.top,B=this.height,W=j-z,V=j+B,U=this.left,q,H;y?(q=j+g+N,g=j+d+N,H=[["M",U+B,j-G-N],["L",U+B,q],["L",U,q],["M",U,g],["L",U+B,g],["L",U+B,j+X+G]],k&&H.push(["M",U+B,q-z],["L",U+B,g+z])):(U-=G,d+=U+G-N,g+=U+G-N,H=[["M",U,W],["L",d,W],["L",d,V],["M",g,V],["L",g,W],["L",U+X+2*G,j+z]],k&&H.push(["M",d-z,W],["L",g+z,W])),this.outline[M]({d:H})}drawMasks(d,g,y,M){let k,T,z,N,G=this.left,X=this.top,j=this.height;y?(z=[G,G,G],N=[X,X+d,X+g],T=[j,j,j],k=[d,g-d,this.size-g]):(z=[G,G+d,G+g],N=[X,X,X],T=[d,g-d,this.size-g],k=[j,j,j]),this.shades.forEach((B,W)=>{B[M]({x:z[W],y:N[W],width:T[W],height:k[W]})})}renderElements(){let d=this,g=d.navigatorOptions,y=g.maskInside,M=d.chart,k=M.inverted,T=M.renderer,z={cursor:k?"ns-resize":"ew-resize"},N=d.navigatorGroup=T.g("navigator").attr({zIndex:8,visibility:"hidden"}).add();if([!y,y,!y].forEach((G,X)=>{let j=T.rect().addClass("highcharts-navigator-mask"+(X===1?"-inside":"-outside")).add(N);M.styledMode||(j.attr({fill:G?g.maskFill:"rgba(0,0,0,0)"}),X===1&&j.css(z)),d.shades[X]=j}),d.outline=T.path().addClass("highcharts-navigator-outline").add(N),M.styledMode||d.outline.attr({"stroke-width":g.outlineWidth,stroke:g.outlineColor}),g.handles&&g.handles.enabled){let G=g.handles,{height:X,width:j}=G;[0,1].forEach(B=>{d.handles[B]=T.symbol(G.symbols[B],-j/2-1,0,j,X,G),M.inverted&&d.handles[B].attr({rotation:90,rotationOriginX:Math.floor(-j/2),rotationOriginY:(X+j)/2}),d.handles[B].attr({zIndex:7-B}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][B]).add(N),M.styledMode||d.handles[B].attr({fill:G.backgroundColor,stroke:G.borderColor,"stroke-width":G.lineWidth}).css(z)})}}update(d){(this.series||[]).forEach(g=>{g.baseSeries&&delete g.baseSeries.navigatorSeries}),this.destroy(),I(!0,this.chart.options.navigator,d),this.init(this.chart)}render(d,g,y,M){let k=this.chart,T=this.xAxis,z=T.pointRange||0,N=T.navigatorAxis.fake?k.xAxis[0]:T,G=this.navigatorEnabled,X=this.rendered,j=k.inverted,B=k.xAxis[0].minRange,W=k.xAxis[0].options.maxRange,V=this.scrollButtonSize,U,q,H,Y=this.scrollbarHeight,Z,K;if(this.hasDragged&&!x(y))return;if(d=v(d-z/2),g=v(g+z/2),!O(d)||!O(g)){if(!X)return;y=0,M=_(T.width,N.width)}this.left=_(T.left,k.plotLeft+V+(j?k.plotWidth:0));let J=this.size=Z=_(T.len,(j?k.plotHeight:k.plotWidth)-2*V);U=j?Y:Z+2*V,y=_(y,T.toPixels(d,!0)),M=_(M,T.toPixels(g,!0)),O(y)&&Math.abs(y)!==1/0||(y=0,M=U);let tt=T.toValue(y,!0),$=T.toValue(M,!0),Q=Math.abs(v($-tt));Q<B?this.grabbedLeft?y=T.toPixels($-B-z,!0):this.grabbedRight&&(M=T.toPixels(tt+B+z,!0)):x(W)&&v(Q-z)>W&&(this.grabbedLeft?y=T.toPixels($-W-z,!0):this.grabbedRight&&(M=T.toPixels(tt+W+z,!0))),this.zoomedMax=b(Math.max(y,M),0,J),this.zoomedMin=b(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(y,M),0,J),this.range=this.zoomedMax-this.zoomedMin,J=Math.round(this.zoomedMax);let et=Math.round(this.zoomedMin);G&&(this.navigatorGroup.attr({visibility:"inherit"}),K=X&&!this.hasDragged?"animate":"attr",this.drawMasks(et,J,j,K),this.drawOutline(et,J,j,K),this.navigatorOptions.handles.enabled&&(this.drawHandle(et,0,j,K),this.drawHandle(J,1,j,K))),this.scrollbar&&(j?(H=this.top-V,q=this.left-Y+(G||!N.opposite?0:(N.titleOffset||0)+N.axisTitleMargin),Y=Z+2*V):(H=this.top+(G?this.height:-Y),q=this.left-V),this.scrollbar.position(q,H,U,Y),this.scrollbar.setRange(this.zoomedMin/(Z||1),this.zoomedMax/(Z||1))),this.rendered=!0,w(this,"afterRender")}addMouseEvents(){let d=this,g=d.chart,y=g.container,M=[],k,T;d.mouseMoveHandler=k=function(z){d.onMouseMove(z)},d.mouseUpHandler=T=function(z){d.onMouseUp(z)},(M=d.getPartsEvents("mousedown")).push(p(g.renderTo,"mousemove",k),p(y.ownerDocument,"mouseup",T),p(g.renderTo,"touchmove",k),p(y.ownerDocument,"touchend",T)),M.concat(d.getPartsEvents("touchstart")),d.eventsToUnbind=M,d.series&&d.series[0]&&M.push(p(d.series[0].xAxis,"foundExtremes",function(){g.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(d){let g=this,y=[];return["shades","handles"].forEach(function(M){g[M].forEach(function(k,T){y.push(p(k.element,d,function(z){g[M+"Mousedown"](z,T)}))})}),y}shadesMousedown(d,g){d=this.chart.pointer?.normalize(d)||d;let y=this.chart,M=this.xAxis,k=this.zoomedMin,T=this.size,z=this.range,N=this.left,G=d.chartX,X,j,B,W;y.inverted&&(G=d.chartY,N=this.top),g===1?(this.grabbedCenter=G,this.fixedWidth=z,this.dragOffset=G-k):(W=G-N-z/2,g===0?W=Math.max(0,W):g===2&&W+z>=T&&(W=T-z,this.reversedExtremes?(W-=z,j=this.getUnionExtremes().dataMin):X=this.getUnionExtremes().dataMax),W!==k&&(this.fixedWidth=z,x((B=M.navigatorAxis.toFixedRange(W,W+z,j,X)).min)&&w(this,"setRange",{min:Math.min(B.min,B.max),max:Math.max(B.min,B.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(d,g){d=this.chart.pointer?.normalize(d)||d;let y=this.chart,M=y.xAxis[0],k=this.reversedExtremes;g===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=k?M.min:M.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=k?M.max:M.min),y.setFixedRange(void 0)}onMouseMove(d){let g=this,y=g.chart,M=g.navigatorSize,k=g.range,T=g.dragOffset,z=y.inverted,N=g.left,G;(!d.touches||d.touches[0].pageX!==0)&&(G=(d=y.pointer?.normalize(d)||d).chartX,z&&(N=g.top,G=d.chartY),g.grabbedLeft?(g.hasDragged=!0,g.render(0,0,G-N,g.otherHandlePos)):g.grabbedRight?(g.hasDragged=!0,g.render(0,0,g.otherHandlePos,G-N)):g.grabbedCenter&&(g.hasDragged=!0,G<T?G=T:G>M+T-k&&(G=M+T-k),g.render(0,0,G-T,G-T+k)),g.hasDragged&&g.scrollbar&&_(g.scrollbar.options.liveRedraw,!u&&!this.chart.boosted)&&(d.DOMType=d.type,setTimeout(function(){g.onMouseUp(d)},0)))}onMouseUp(d){let g,y,M,k,T,z,N=this.chart,G=this.xAxis,X=this.scrollbar,j=d.DOMEvent||d,B=N.inverted,W=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!X||!X.hasDragged)||d.trigger==="scrollbar")&&(M=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?k=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(T=this.fixedExtreme),this.zoomedMax===this.size&&(T=this.reversedExtremes?M.dataMin:M.dataMax),this.zoomedMin===0&&(k=this.reversedExtremes?M.dataMax:M.dataMin),x((z=G.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,k,T)).min)&&w(this,"setRange",{min:Math.min(z.min,z.max),max:Math.max(z.min,z.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:j}})),d.DOMType!=="mousemove"&&d.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&O(this.zoomedMin)&&O(this.zoomedMax)&&(y=Math.round(this.zoomedMin),g=Math.round(this.zoomedMax),this.shades&&this.drawMasks(y,g,B,W),this.outline&&this.drawOutline(y,g,B,W),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(y,0,B,W),this.drawHandle(g,1,B,W)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(d){d()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let d=this.baseSeries||[];this.navigatorEnabled&&d[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&d.forEach(function(g){A(g,"updatedData",this.updatedDataHandler)},this),d[0].xAxis&&A(d[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}init(d){let g=d.options,y=g.navigator||{},M=y.enabled,k=g.scrollbar||{},T=k.enabled,z=M&&y.height||0,N=T&&k.height||0,G=k.buttonsEnabled&&N||0;this.handles=[],this.shades=[],this.chart=d,this.setBaseSeries(),this.height=z,this.scrollbarHeight=N,this.scrollButtonSize=G,this.scrollbarEnabled=T,this.navigatorEnabled=M,this.navigatorOptions=y,this.scrollbarOptions=k,this.opposite=_(y.opposite,!!(!M&&d.inverted));let X=this,j=X.baseSeries,B=d.xAxis.length,W=d.yAxis.length,V=j&&j[0]&&j[0].xAxis||d.xAxis[0]||{options:{}};if(d.isDirtyBox=!0,X.navigatorEnabled?(X.xAxis=new e(d,I({breaks:V.options.breaks,ordinal:V.options.ordinal,overscroll:V.options.overscroll},y.xAxis,{type:"datetime",index:B,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},d.inverted?{offsets:[G,0,-G,0],width:z}:{offsets:[0,-G,0,G],height:z}),"xAxis"),X.yAxis=new e(d,I(y.yAxis,{alignTicks:!1,offset:0,index:W,isInternal:!0,reversed:_(y.yAxis&&y.yAxis.reversed,d.yAxis[0]&&d.yAxis[0].reversed,!1),zoomEnabled:!1},d.inverted?{width:z}:{height:z}),"yAxis"),j||y.series.data?X.updateNavigatorSeries(!1):d.series.length===0&&(X.unbindRedraw=p(d,"beforeRedraw",function(){d.series.length>0&&!X.series&&(X.setBaseSeries(),X.unbindRedraw())})),X.reversedExtremes=d.inverted&&!X.xAxis.reversed||!d.inverted&&X.xAxis.reversed,X.renderElements(),X.addMouseEvents()):(X.xAxis={chart:d,navigatorAxis:{fake:!0},translate:function(U,q){let H=d.xAxis[0],Y=H.getExtremes(),Z=H.len-2*G,K=P("min",H.options.min,Y.dataMin),J=P("max",H.options.max,Y.dataMax)-K;return q?U*J/Z+K:Z*(U-K)/J},toPixels:function(U){return this.translate(U)},toValue:function(U){return this.translate(U,!0)}},X.xAxis.navigatorAxis.axis=X.xAxis,X.xAxis.navigatorAxis.toFixedRange=l.prototype.toFixedRange.bind(X.xAxis.navigatorAxis)),d.options.scrollbar.enabled){let U=I(d.options.scrollbar,{vertical:d.inverted});!O(U.margin)&&X.navigatorEnabled&&(U.margin=d.inverted?-3:3),d.scrollbar=X.scrollbar=new h(d.renderer,U,d),p(X.scrollbar,"changed",function(q){let H=X.size,Y=H*this.to,Z=H*this.from;X.hasDragged=X.scrollbar.hasDragged,X.render(0,0,Z,Y),this.shouldUpdateExtremes(q.DOMType)&&setTimeout(function(){X.onMouseUp(q)})})}X.addBaseSeriesEvents(),X.addChartEvents()}getUnionExtremes(d){let g,y=this.chart.xAxis[0],M=this.xAxis,k=M.options,T=y.options;return d&&y.dataMin===null||(g={dataMin:_(k&&k.min,P("min",T.min,y.dataMin,M.dataMin,M.min)),dataMax:_(k&&k.max,P("max",T.max,y.dataMax,M.dataMax,M.max))}),g}setBaseSeries(d,g){let y=this.chart,M=this.baseSeries=[];d=d||y.options&&y.options.navigator.baseSeries||(y.series.length?S(y.series,k=>!k.options.isInternal).index:0),(y.series||[]).forEach((k,T)=>{!k.options.isInternal&&(k.options.showInNavigator||(T===d||k.options.id===d)&&k.options.showInNavigator!==!1)&&M.push(k)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,g)}updateNavigatorSeries(d,g){let y=this,M=y.chart,k=y.baseSeries,T={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:this.navigatorOptions.xAxis?.id,yAxis:this.navigatorOptions.yAxis?.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},z=y.series=(y.series||[]).filter(B=>{let W=B.baseSeries;return!(0>k.indexOf(W))||(W&&(A(W,"updatedData",y.updatedDataHandler),delete W.navigatorSeries),B.chart&&B.destroy(),!1)}),N,G,X=y.navigatorOptions.series,j;k&&k.length&&k.forEach(B=>{let W=B.navigatorSeries,V=L({color:B.color,visible:B.visible},R(X)?f.navigator.series:X);if(W&&y.navigatorOptions.adaptToUpdatedData===!1)return;T.name="Navigator "+k.length,j=(N=B.options||{}).navigatorOptions||{},V.dataLabels=F(V.dataLabels),(G=I(N,T,V,j)).pointRange=_(V.pointRange,j.pointRange,f.plotOptions[G.type||"line"].pointRange);let U=j.data||V.data;y.hasNavigatorData=y.hasNavigatorData||!!U,G.data=U||N.data&&N.data.slice(0),W&&W.options?W.update(G,g):(B.navigatorSeries=M.initSeries(G),M.setSortedData(),B.navigatorSeries.baseSeries=B,z.push(B.navigatorSeries))}),(X.data&&!(k&&k.length)||R(X))&&(y.hasNavigatorData=!1,(X=F(X)).forEach((B,W)=>{T.name="Navigator "+(z.length+1),(G=I(f.navigator.series,{color:M.series[W]&&!M.series[W].options.isInternal&&M.series[W].color||M.options.colors[W]||M.options.colors[0]},T,B)).data=B.data,G.data&&(y.hasNavigatorData=!0,z.push(M.initSeries(G)))})),d&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let d=this,g=d.baseSeries||[];g[0]&&g[0].xAxis&&g[0].eventsToUnbind.push(p(g[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),g.forEach(y=>{y.eventsToUnbind.push(p(y,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),y.eventsToUnbind.push(p(y,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&y.xAxis&&y.eventsToUnbind.push(p(y,"updatedData",this.updatedDataHandler)),y.eventsToUnbind.push(p(y,"remove",function(){this.navigatorSeries&&(E(d.series,this.navigatorSeries),x(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(d){return this.baseSeries.reduce(function(g,y){return Math.min(g,y.xData&&y.xData.length?y.xData[0]:g)},d)}modifyNavigatorAxisExtremes(){let d=this.xAxis;if(d.getExtremes!==void 0){let g=this.getUnionExtremes(!0);g&&(g.dataMin!==d.min||g.dataMax!==d.max)&&(d.min=g.dataMin,d.max=g.dataMax)}}modifyBaseAxisExtremes(){let d,g,y=this.chart.navigator,M=this.getExtremes(),k=M.min,T=M.max,z=M.dataMin,N=M.dataMax,G=T-k,X=y.stickToMin,j=y.stickToMax,B=_(this.ordinal?.convertOverscroll(this.options.overscroll),0),W=y.series&&y.series[0],V=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(X&&(d=(g=z)+G),j&&(d=N+B,X||(g=Math.max(z,d-G,y.getBaseSeriesMin(W&&W.xData?W.xData[0]:-Number.MAX_VALUE)))),V&&(X||j)&&O(g)&&(this.min=this.userMin=g,this.max=this.userMax=d)),y.stickToMin=y.stickToMax=null}updatedDataHandler(){let d=this.chart.navigator,g=this.navigatorSeries,y=d.reversedExtremes?Math.round(d.zoomedMin)===0:Math.round(d.zoomedMax)>=Math.round(d.size);d.stickToMax=_(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,y),d.stickToMin=d.shouldStickToMin(this,d),g&&!d.hasNavigatorData&&(g.options.pointStart=this.xData[0],g.setData(this.options.data,!1,null,!1))}shouldStickToMin(d,g){let y=g.getBaseSeriesMin(d.xData[0]),M=d.xAxis,k=M.max,T=M.min,z=M.options.range;return!!(O(k)&&O(T))&&(z&&k-y>0?k-y<z:T<=y)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(p(this.chart,"redraw",function(){let d=this.navigator,g=d&&(d.baseSeries&&d.baseSeries[0]&&d.baseSeries[0].xAxis||this.xAxis[0]);g&&d.render(g.min,g.max)}),p(this.chart,"getMargins",function(){let d=this.navigator,g=d.opposite?"plotTop":"marginBottom";this.inverted&&(g=d.opposite?"marginRight":"plotLeft"),this[g]=(this[g]||0)+(d.navigatorEnabled||!this.inverted?d.height+d.scrollbarHeight:0)+d.navigatorOptions.margin}),p(D,"setRange",function(d){this.chart.xAxis[0].setExtremes(d.min,d.max,d.redraw,d.animation,d.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(E(this.chart.xAxis,this.xAxis),E(this.chart.axes,this.xAxis)),this.yAxis&&(E(this.chart.yAxis,this.yAxis),E(this.chart.axes,this.yAxis)),(this.series||[]).forEach(d=>{d.destroy&&d.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(d=>{this[d]&&this[d].destroy&&this[d].destroy(),this[d]=null}),[this.handles].forEach(d=>{m(d)})}}return D}),i(t,"Core/Axis/OrdinalAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,s,r,n){var l;let{addEvent:a,correctFloat:h,css:c,defined:f,error:u,isNumber:p,pick:b,timeUnits:v,isString:x}=n;return function(m){function E(C,d,g,y,M=[],k=0,T){let z={},N=this.options.tickPixelInterval,G=this.chart.time,X=[],j,B,W,V,U,q=0,H=[],Y=-Number.MAX_VALUE;if(!this.options.ordinal&&!this.options.breaks||!M||M.length<3||d===void 0)return G.getTimeTicks.apply(G,arguments);let Z=M.length;for(j=0;j<Z;j++){if(U=j&&M[j-1]>g,M[j]<d&&(q=j),j===Z-1||M[j+1]-M[j]>5*k||U){if(M[j]>Y){for(B=G.getTimeTicks(C,M[q],M[j],y);B.length&&B[0]<=Y;)B.shift();B.length&&(Y=B[B.length-1]),X.push(H.length),H=H.concat(B)}q=j+1}if(U)break}if(B){if(V=B.info,T&&V.unitRange<=v.hour){for(q=1,j=H.length-1;q<j;q++)G.dateFormat("%d",H[q])!==G.dateFormat("%d",H[q-1])&&(z[H[q]]="day",W=!0);W&&(z[H[0]]="day"),V.higherRanks=z}V.segmentStarts=X,H.info=V}else u(12,!1,this.chart);if(T&&f(N)){let K=H.length,J=[],tt=[],$,Q,et,it,st,rt=K;for(;rt--;)Q=this.translate(H[rt]),et&&(tt[rt]=et-Q),J[rt]=et=Q;for(tt.sort((nt,ot)=>nt-ot),(it=tt[Math.floor(tt.length/2)])<.6*N&&(it=null),rt=H[K-1]>g?K-1:K,et=void 0;rt--;)st=Math.abs(et-(Q=J[rt])),et&&st<.8*N&&(it===null||st<.8*it)?(z[H[rt]]&&!z[H[rt+1]]?($=rt+1,et=Q):$=rt,H.splice($,1)):et=Q}return H}function L(C){let d=this.ordinal.positions;if(!d)return C;let g=d.length-1,y;return C<0?C=d[0]:C>g?C=d[g]:(g=Math.floor(C),y=C-g),y!==void 0&&d[g]!==void 0?d[g]+(y?y*(d[g+1]-d[g]):0):C}function S(C){let d=this.ordinal,g=this.old?this.old.min:this.min,y=this.old?this.old.transA:this.transA,M=d.getExtendedPositions();if(M&&M.length){let k=h((C-g)*y+this.minPixelPadding),T=h(d.getIndexOfPoint(k,M)),z=h(T%1);if(T>=0&&T<=M.length-1){let N=M[Math.floor(T)],G=M[Math.ceil(T)];return M[Math.floor(T)]+z*(G-N)}}return C}function w(C,d){let g=m.Additions.findIndexOf(C,d,!0);if(C[g]===d)return g;let y=(d-C[g])/(C[g+1]-C[g]);return g+y}function R(){this.ordinal||(this.ordinal=new m.Additions(this))}function O(){let{eventArgs:C,options:d}=this;if(this.isXAxis&&f(d.overscroll)&&d.overscroll!==0&&p(this.max)&&p(this.min)&&(this.options.ordinal&&!this.ordinal.originalOrdinalRange&&this.ordinal.getExtendedPositions(!1),this.max===this.dataMax&&(C?.trigger!=="pan"||this.isInternal)&&C?.trigger!=="navigator")){let g=this.ordinal.convertOverscroll(d.overscroll);this.max+=g,!this.isInternal&&f(this.userMin)&&C?.trigger!=="mousewheel"&&(this.min+=g)}}function I(){this.horiz&&!this.isDirty&&(this.isDirty=this.isOrdinal&&this.chart.navigator&&!this.chart.navigator.adaptToUpdatedData)}function _(){this.ordinal&&(this.ordinal.beforeSetTickPositions(),this.tickInterval=this.ordinal.postProcessTickInterval(this.tickInterval))}function A(C){let d=this.xAxis[0],g=d.ordinal.convertOverscroll(d.options.overscroll),y=C.originalEvent.chartX,M=this.options.chart.panning,k=!1;if(M&&M.type!=="y"&&d.options.ordinal&&d.series.length){let T,z,N=this.mouseDownX,G=d.getExtremes(),X=G.dataMin,j=G.dataMax,B=G.min,W=G.max,V=this.hoverPoints,U=d.closestPointRange||d.ordinal&&d.ordinal.overscrollPointsRange,q=Math.round((N-y)/(d.translationSlope*(d.ordinal.slope||U))),H=d.ordinal.getExtendedPositions(),Y={ordinal:{positions:H,extendedOrdinalPositions:H}},Z=d.index2val,K=d.val2lin;if(B<=X&&q<0||W+g>=j&&q>0)return;Y.ordinal.positions?Math.abs(q)>1&&(V&&V.forEach(function(J){J.setState()}),j>(z=Y.ordinal.positions)[z.length-1]&&z.push(j),this.setFixedRange(W-B),(T=d.navigatorAxis.toFixedRange(void 0,void 0,Z.apply(Y,[K.apply(Y,[B,!0])+q]),Z.apply(Y,[K.apply(Y,[W,!0])+q]))).min>=Math.min(G.dataMin,B)&&T.max<=Math.max(j,W)+g&&d.setExtremes(T.min,T.max,!0,!1,{trigger:"pan"}),this.mouseDownX=y,c(this.container,{cursor:"move"})):k=!0}else k=!0;k||M&&/y/.test(M.type)?g&&(d.max=d.dataMax+g):C.preventDefault()}function F(){let C=this.xAxis;C&&C.options.ordinal&&(delete C.ordinal.index,delete C.ordinal.originalOrdinalRange)}function P(C,d){let g,y=this.ordinal,M=y.positions,k=y.slope,T;if(!M)return C;let z=M.length;if(M[0]<=C&&M[z-1]>=C)g=w(M,C);else{if(!((T=y.getExtendedPositions&&y.getExtendedPositions())&&T.length))return C;let N=T.length;k||(k=(T[N-1]-T[0])/N);let G=w(T,M[0]);if(C>=T[0]&&C<=T[N-1])g=w(T,C)-G;else{if(!d)return C;g=C<T[0]?-G-(T[0]-C)/k:(C-T[N-1])/k+N-G}}return d?g:k*(g||0)+y.offset}m.compose=function(C,d,g){let y=C.prototype;return y.ordinal2lin||(y.getTimeTicks=E,y.index2val=L,y.lin2val=S,y.val2lin=P,y.ordinal2lin=y.val2lin,a(C,"afterInit",R),a(C,"foundExtremes",O),a(C,"afterSetScale",I),a(C,"initialAxisTranslation",_),a(g,"pan",A),a(d,"updatedData",F)),C};class D{constructor(d){this.index={},this.axis=d}beforeSetTickPositions(){let d=this.axis,g=d.ordinal,y=d.getExtremes(),M=y.min,k=y.max,T=d.brokenAxis?.hasBreaks,z=d.options.ordinal,N,G,X,j,B,W,V,U=[],q=Number.MAX_VALUE,H=!1,Y=!1,Z=!1;if(z||T){let K=0;if(d.series.forEach(function(J,tt){if(G=[],tt>0&&J.options.id!=="highcharts-navigator-series"&&J.processedXData.length>1&&(Y=K!==J.processedXData[1]-J.processedXData[0]),K=J.processedXData[1]-J.processedXData[0],J.boosted&&(Z=J.boosted),J.reserveSpace()&&(J.takeOrdinalPosition!==!1||T)&&(N=(U=U.concat(J.processedXData)).length,U.sort(function($,Q){return $-Q}),q=Math.min(q,b(J.closestPointRange,q)),N)){for(tt=0;tt<N-1;)U[tt]!==U[tt+1]&&G.push(U[tt+1]),tt++;G[0]!==U[0]&&G.unshift(U[0]),U=G}}),d.ordinal.originalOrdinalRange||(d.ordinal.originalOrdinalRange=(U.length-1)*q),Y&&Z&&(U.pop(),U.shift()),(N=U.length)>2){for(X=U[1]-U[0],V=N-1;V--&&!H;)U[V+1]-U[V]!==X&&(H=!0);!d.options.keepOrdinalPadding&&(U[0]-M>X||k-U[U.length-1]>X)&&(H=!0)}else d.options.overscroll&&(N===2?q=U[1]-U[0]:N===1?(q=d.ordinal.convertOverscroll(d.options.overscroll),U=[U[0],U[0]+q]):q=g.overscrollPointsRange);H||d.forceOrdinal?(d.options.overscroll&&(g.overscrollPointsRange=q,U=U.concat(g.getOverscrollPositions())),g.positions=U,j=d.ordinal2lin(Math.max(M,U[0]),!0),B=Math.max(d.ordinal2lin(Math.min(k,U[U.length-1]),!0),1),g.slope=W=(k-M)/(B-j),g.offset=M-j*W):(g.overscrollPointsRange=b(d.closestPointRange,g.overscrollPointsRange),g.positions=d.ordinal.slope=g.offset=void 0)}d.isOrdinal=z&&H,g.groupIntervalFactor=null}static findIndexOf(d,g,y){let M=0,k=d.length-1,T;for(;M<k;)d[T=Math.ceil((M+k)/2)]<=g?M=T:k=T-1;return d[M]===g||y?M:-1}getExtendedPositions(d=!0){let g=this,y=g.axis,M=y.constructor.prototype,k=y.chart,T=y.series[0]?.currentDataGrouping,z=T?T.count+T.unitName:"raw",N=d?y.ordinal.convertOverscroll(y.options.overscroll):0,G=y.getExtremes(),X,j,B=g.index;return B||(B=g.index={}),B[z]||((X={series:[],chart:k,forceOrdinal:!1,getExtremes:function(){return{min:G.dataMin,max:G.dataMax+N}},applyGrouping:M.applyGrouping,getGroupPixelWidth:M.getGroupPixelWidth,getTimeTicks:M.getTimeTicks,options:{ordinal:!0},ordinal:{getGroupIntervalFactor:this.getGroupIntervalFactor},ordinal2lin:M.ordinal2lin,getIndexOfPoint:M.getIndexOfPoint,val2lin:M.val2lin}).ordinal.axis=X,y.series.forEach(function(W){j={xAxis:X,xData:W.xData.slice(),chart:k,groupPixelWidth:W.groupPixelWidth,destroyGroupedData:s.noop,getProcessedData:r.prototype.getProcessedData,applyGrouping:r.prototype.applyGrouping,reserveSpace:r.prototype.reserveSpace,visible:W.visible},d&&(j.xData=j.xData.concat(g.getOverscrollPositions())),j.options={dataGrouping:T?{firstAnchor:W.options.dataGrouping?.firstAnchor,anchor:W.options.dataGrouping?.anchor,lastAnchor:W.options.dataGrouping?.firstAnchor,enabled:!0,forced:!0,approximation:"open",units:[[T.unitName,[T.count]]]}:{enabled:!1}},X.series.push(j),W.processData.apply(j)}),X.applyGrouping({hasExtremesChanged:!0}),j?.closestPointRange!==j?.basePointRange&&j.currentDataGrouping&&(X.forceOrdinal=!0),y.ordinal.beforeSetTickPositions.apply({axis:X}),!y.ordinal.originalOrdinalRange&&X.ordinal.originalOrdinalRange&&(y.ordinal.originalOrdinalRange=X.ordinal.originalOrdinalRange),B[z]=X.ordinal.positions),B[z]}getGroupIntervalFactor(d,g,y){let M=y.processedXData,k=M.length,T=[],z,N,G=this.groupIntervalFactor;if(!G){for(N=0;N<k-1;N++)T[N]=M[N+1]-M[N];T.sort(function(X,j){return X-j}),z=T[Math.floor(k/2)],d=Math.max(d,M[0]),g=Math.min(g,M[k-1]),this.groupIntervalFactor=G=k*z/(g-d)}return G}getIndexOfPoint(d,g){let y,M=this.axis,k=0,T=function(G){let{min:X,max:j}=M;return!!(f(X)&&f(j))&&G.points.some(B=>B.x>=X&&B.x<=j)};M.series.forEach(G=>{let X=G.points?.[0];f(X?.plotX)&&(X.plotX<y||!f(y))&&T(G)&&(y=X.plotX,k=X.x)}),y??(y=M.minPixelPadding);let z=M.translationSlope*(this.slope||M.closestPointRange||this.overscrollPointsRange),N=h((d-y)/z);return D.findIndexOf(g,k,!0)+N}getOverscrollPositions(){let d=this.axis,g=this.convertOverscroll(d.options.overscroll),y=this.overscrollPointsRange,M=[],k=d.dataMax;if(f(y))for(;k<=d.dataMax+g;)M.push(k+=y);return M}postProcessTickInterval(d){let g=this.axis,y=this.slope;return y?g.options.breaks?g.closestPointRange||d:d/(y/g.closestPointRange):d}convertOverscroll(d=0){let g=this,y=g.axis,M=function(k){return b(g.originalOrdinalRange,f(y.dataMax)&&f(y.dataMin)?y.dataMax-y.dataMin:0)*k};if(x(d)){let k=parseInt(d,10);if(/%$/.test(d))return M(k/100);if(/px/.test(d)){let T=Math.min(k,.9*y.len)/y.len;return M(T/(1-T))}return 0}return d}}m.Additions=D}(l||(l={})),l}),i(t,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%e %b %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#334eff",cursor:"pointer",fontSize:"0.8em"},labelStyle:{color:"#666666",fontSize:"0.8em"}}}}),i(t,"Stock/RangeSelector/RangeSelectorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Core/Utilities.js"]],function(e,s,r,n){let l,{defaultOptions:a}=e,{composed:h}=s,{addEvent:c,defined:f,extend:u,isNumber:p,merge:b,pick:v,pushUnique:x}=n,m=[];function E(){let _,A,F=this.range,P=F.type,D=this.max,C=this.chart.time,d=function(y,M){let k=P==="year"?"FullYear":"Month",T=new C.Date(y),z=C.get(k,T);return C.set(k,T,z+M),z===C.get(k,T)&&C.set("Date",T,0),T.getTime()-y};p(F)?(_=D-F,A=F):F&&(_=D+d(D,-(F.count||1)),this.chart&&this.chart.setFixedRange(D-_));let g=v(this.dataMin,Number.MIN_VALUE);return p(_)||(_=g),_<=g&&(_=g,A===void 0&&(A=d(_,F.count)),this.newMax=Math.min(_+A,v(this.dataMax,Number.MAX_VALUE))),p(D)?!p(F)&&F&&F._offsetMin&&(_+=F._offsetMin):_=void 0,_}function L(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new l(this))}function S(){let _=this.rangeSelector;if(_){p(_.deferredYTDClick)&&(_.clickButton(_.deferredYTDClick),delete _.deferredYTDClick);let A=_.options.verticalAlign;_.options.floating||(A==="bottom"?this.extraBottomMargin=!0:A==="middle"||(this.extraTopMargin=!0))}}function w(){let _,A=this.rangeSelector;if(!A)return;let F=this.xAxis[0].getExtremes(),P=this.legend,D=A&&A.options.verticalAlign;p(F.min)&&A.render(F.min,F.max),P.display&&D==="top"&&D===P.options.verticalAlign&&(_=b(this.spacingBox),P.options.layout==="vertical"?_.y=this.plotTop:_.y+=A.getHeight(),P.group.placed=!1,P.align(_))}function R(){for(let _=0,A=m.length;_<A;++_){let F=m[_];if(F[0]===this){F[1].forEach(P=>P()),m.splice(_,1);return}}}function O(){let _=this.rangeSelector;if(_){let A=_.getHeight();this.extraTopMargin&&(this.plotTop+=A),this.extraBottomMargin&&(this.marginBottom+=A)}}function I(_){let A=_.options.rangeSelector,F=this.extraBottomMargin,P=this.extraTopMargin,D=this.rangeSelector;if(A&&A.enabled&&!f(D)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=D=new l(this)),this.extraBottomMargin=!1,this.extraTopMargin=!1,D){let C=A&&A.verticalAlign||D.options&&D.options.verticalAlign;D.options.floating||(C==="bottom"?this.extraBottomMargin=!0:C==="middle"||(this.extraTopMargin=!0)),(this.extraBottomMargin!==F||this.extraTopMargin!==P)&&(this.isDirtyBox=!0)}}return{compose:function(_,A,F){if(l=F,x(h,"RangeSelector")){let P=A.prototype;_.prototype.minFromRange=E,c(A,"afterGetContainer",L),c(A,"beforeRender",S),c(A,"destroy",R),c(A,"getMargins",O),c(A,"redraw",w),c(A,"update",I),P.callbacks.push(w),u(a,{rangeSelector:r.rangeSelector}),u(a.lang,r.lang)}}}}),i(t,"Stock/RangeSelector/RangeSelector.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Stock/RangeSelector/RangeSelectorComposition.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"],t["Core/Axis/OrdinalAxis.js"]],function(e,s,r,n,l,a,h){let{defaultOptions:c}=s,{addEvent:f,createElement:u,css:p,defined:b,destroyObjectProperties:v,discardElement:x,extend:m,fireEvent:E,isNumber:L,merge:S,objectEach:w,pad:R,pick:O,pInt:I,splat:_}=a;class A{static compose(P,D){n.compose(P,D,A)}constructor(P){this.buttonOptions=A.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.init(P)}clickButton(P,D){let C=this.chart,d=this.buttonOptions[P],g=C.xAxis[0],y=C.scroller&&C.scroller.getUnionExtremes()||g||{},M=d.type,k=d.dataGrouping,T=y.dataMin,z=y.dataMax,N,G=g&&Math.round(Math.min(g.max,O(z,g.max))),X,j=d._range,B,W,V,U=!0;if(T!==null&&z!==null){if(this.setSelected(P),k&&(this.forcedDataGrouping=!0,e.prototype.setDataGrouping.call(g||{chart:this.chart},k,!1),this.frozenStates=d.preserveDataGrouping),M==="month"||M==="year")g?(W={range:d,max:G,chart:C,dataMin:T,dataMax:z},N=g.minFromRange.call(W),L(W.newMax)&&(G=W.newMax),U=!1):j=d;else if(j)G=Math.min((N=Math.max(G-j,T))+j,z),U=!1;else if(M==="ytd")if(g)(z===void 0||T===void 0)&&(T=Number.MAX_VALUE,z=Number.MIN_VALUE,C.series.forEach(q=>{let H=q.xData;H&&(T=Math.min(H[0],T),z=Math.max(H[H.length-1],z))}),D=!1),N=B=(V=this.getYTDExtremes(z,T,C.time.useUTC)).min,G=V.max;else{this.deferredYTDClick=P;return}else M==="all"&&g&&(C.navigator&&C.navigator.baseSeries[0]&&(C.navigator.baseSeries[0].xAxis.options.range=void 0),N=T,G=z);if(U&&d._offsetMin&&b(N)&&(N+=d._offsetMin),d._offsetMax&&b(G)&&(G+=d._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=P+1),g)g.setExtremes(N,G,O(D,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:d}),C.setFixedRange(d._range);else{X=_(C.options.xAxis)[0];let q=f(C,"afterGetAxes",function(){let H=C.xAxis[0];H.range=H.options.range=j,H.min=H.options.min=B});f(C,"load",function(){let H=C.xAxis[0];C.setFixedRange(d._range),H.options.range=X.range,H.options.min=X.min,q()})}E(this,"afterBtnClick")}}setSelected(P){this.selected=this.options.selected=P}init(P){let D=this,C=P.options.rangeSelector,d=C.buttons||D.defaultButtons.slice(),g=C.selected,y=function(){let M=D.minInput,k=D.maxInput;M&&M.blur&&E(M,"blur"),k&&k.blur&&E(k,"blur")};D.chart=P,D.options=C,D.buttons=[],D.buttonOptions=d,this.eventsToUnbind=[],this.eventsToUnbind.push(f(P.container,"mousedown",y)),this.eventsToUnbind.push(f(P,"resize",y)),d.forEach(D.computeButtonRange),g!==void 0&&d[g]&&this.clickButton(g,!1),this.eventsToUnbind.push(f(P,"load",function(){P.xAxis&&P.xAxis[0]&&f(P.xAxis[0],"setExtremes",function(M){L(this.max)&&L(this.min)&&this.max-this.min!==P.fixedRange&&M.trigger!=="rangeSelectorButton"&&M.trigger!=="updatedData"&&D.forcedDataGrouping&&!D.frozenStates&&this.setDataGrouping(!1,!1)})})),this.createElements()}updateButtonStates(){let P=this,D=this.chart,C=this.dropdown,d=this.dropdownLabel,g=D.xAxis[0],y=Math.round(g.max-g.min),M=!g.hasVisibleSeries,k=24*36e5,T=D.scroller&&D.scroller.getUnionExtremes()||g,z=T.dataMin,N=T.dataMax,G=P.getYTDExtremes(N,z,D.time.useUTC),X=G.min,j=G.max,B=P.selected,W=P.options.allButtonsEnabled,V=Array(P.buttonOptions.length).fill(0),U=L(B),q=P.buttons,H=!1,Y=null;P.buttonOptions.forEach((Z,K)=>{let J=Z._range,tt=Z.type,$=Z.count||1,Q=Z._offsetMax-Z._offsetMin,et=K===B,it=J>N-z,st=J<g.minRange,rt=!1,nt=J===y;if(et&&it&&(H=!0),g.isOrdinal&&g.ordinal?.positions&&J&&y<J){let ct=g.ordinal.positions,ht=h.Additions.findIndexOf(ct,g.min,!0),lt=Math.min(h.Additions.findIndexOf(ct,g.max,!0)+1,ct.length-1);ct[lt]-ct[ht]>J&&(nt=!0)}else(tt==="month"||tt==="year")&&y+36e5>={month:28,year:365}[tt]*k*$-Q&&y-36e5<={month:31,year:366}[tt]*k*$+Q?nt=!0:tt==="ytd"?(nt=j-X+Q===y,rt=!et):tt==="all"&&(nt=g.max-g.min>=N-z);let ot=!W&&!(H&&tt==="all")&&(it||st||M),at=H&&tt==="all"||!rt&&nt||et&&P.frozenStates;ot?V[K]=3:at&&(!U||K===B)&&(Y=K)}),Y!==null?(V[Y]=2,P.setSelected(Y)):(P.setSelected(),d&&(d.setState(0),d.attr({text:(c.lang.rangeSelectorZoom||"")+" \u25BE"})));for(let Z=0;Z<V.length;Z++){let K=V[Z],J=q[Z];if(J.state!==K&&(J.setState(K),C)){C.options[Z+1].disabled=K===3,K===2&&(d&&(d.setState(2),d.attr({text:P.buttonOptions[Z].text+" \u25BE"})),C.selectedIndex=Z+1);let tt=d.getBBox();p(C,{width:`${tt.width}px`,height:`${tt.height}px`})}}}computeButtonRange(P){let D=P.type,C=P.count||1,d={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};d[D]?P._range=d[D]*C:(D==="month"||D==="year")&&(P._range=24*{month:30,year:365}[D]*36e5*C),P._offsetMin=O(P.offsetMin,0),P._offsetMax=O(P.offsetMax,0),P._range+=P._offsetMax-P._offsetMin}getInputValue(P){let D=P==="min"?this.minInput:this.maxInput,C=this.chart.options.rangeSelector,d=this.chart.time;return D?(D.type==="text"&&C.inputDateParser||this.defaultInputDateParser)(D.value,d.useUTC,d):0}setInputValue(P,D){let C=this.options,d=this.chart.time,g=P==="min"?this.minInput:this.maxInput,y=P==="min"?this.minDateBox:this.maxDateBox;if(g){let M=g.getAttribute("data-hc-time"),k=b(M)?Number(M):void 0;if(b(D)){let T=k;b(T)&&g.setAttribute("data-hc-time-previous",T),g.setAttribute("data-hc-time",D),k=D}g.value=d.dateFormat(this.inputTypeFormats[g.type]||C.inputEditDateFormat,k),y&&y.attr({text:d.dateFormat(C.inputDateFormat,k)})}}setInputExtremes(P,D,C){let d=P==="min"?this.minInput:this.maxInput;if(d){let g=this.inputTypeFormats[d.type],y=this.chart.time;if(g){let M=y.dateFormat(g,D);d.min!==M&&(d.min=M);let k=y.dateFormat(g,C);d.max!==k&&(d.max=k)}}}showInput(P){let D=P==="min"?this.minDateBox:this.maxDateBox,C=P==="min"?this.minInput:this.maxInput;if(C&&D&&this.inputGroup){let d=C.type==="text",{translateX:g=0,translateY:y=0}=this.inputGroup,{x:M=0,width:k=0,height:T=0}=D,{inputBoxWidth:z}=this.options;p(C,{width:d?k+(z?-2:20)+"px":"auto",height:T-2+"px",border:"2px solid silver"}),d&&z?p(C,{left:g+M+"px",top:y+"px"}):p(C,{left:Math.min(Math.round(M+g-(C.offsetWidth-k)/2),this.chart.chartWidth-C.offsetWidth)+"px",top:y-(C.offsetHeight-T)/2+"px"})}}hideInput(P){let D=P==="min"?this.minInput:this.maxInput;D&&p(D,{top:"-9999em",border:0,width:"1px",height:"1px"})}defaultInputDateParser(P,D,C){let d=P.split("/").join("-").split(" ").join("T");if(d.indexOf("T")===-1&&(d+="T00:00"),D)d+="Z";else{let y;if(r.isSafari&&!((y=d).length>6&&(y.lastIndexOf("-")===y.length-6||y.lastIndexOf("+")===y.length-6))){let M=new Date(d).getTimezoneOffset()/60;d+=M<=0?`+${R(-M)}:00`:`-${R(M)}:00`}}let g=Date.parse(d);if(!L(g)){let y=P.split("-");g=Date.UTC(I(y[0]),I(y[1])-1,I(y[2]))}return C&&D&&L(g)&&(g+=C.getTimezoneOffset(g)),g}drawInput(P){let{chart:D,div:C,inputGroup:d}=this,g=this,y=D.renderer.style||{},M=D.renderer,k=D.options.rangeSelector,T=c.lang,z=P==="min";function N(V){let{maxInput:U,minInput:q}=g,H=D.xAxis[0],Y=D.scroller?.getUnionExtremes()||H,Z=Y.dataMin,K=Y.dataMax,J=D.xAxis[0].getExtremes()[V],tt=g.getInputValue(V);L(tt)&&tt!==J&&(z&&U&&L(Z)?tt>Number(U.getAttribute("data-hc-time"))?tt=void 0:tt<Z&&(tt=Z):q&&L(K)&&(tt<Number(q.getAttribute("data-hc-time"))?tt=void 0:tt>K&&(tt=K)),tt!==void 0&&H.setExtremes(z?tt:H.min,z?H.max:tt,void 0,void 0,{trigger:"rangeSelectorInput"}))}let G=T[z?"rangeSelectorFrom":"rangeSelectorTo"]||"",X=M.label(G,0).addClass("highcharts-range-label").attr({padding:G?2:0,height:G?k.inputBoxHeight:0}).add(d),j=M.label("",0).addClass("highcharts-range-input").attr({padding:2,width:k.inputBoxWidth,height:k.inputBoxHeight,"text-align":"center"}).on("click",function(){g.showInput(P),g[P+"Input"].focus()});D.styledMode||j.attr({stroke:k.inputBoxBorderColor,"stroke-width":1}),j.add(d);let B=u("input",{name:P,className:"highcharts-range-selector"},void 0,C);B.setAttribute("type",function(V){if(V.indexOf("%L")!==-1)return"text";let U=["a","A","d","e","w","b","B","m","o","y","Y"].some(H=>V.indexOf("%"+H)!==-1),q=["H","k","I","l","M","S"].some(H=>V.indexOf("%"+H)!==-1);return U&&q?"datetime-local":U?"date":q?"time":"text"}(k.inputDateFormat||"%e %b %Y")),D.styledMode||(X.css(S(y,k.labelStyle)),j.css(S({color:"#333333"},y,k.inputStyle)),p(B,m({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:y.fontSize,fontFamily:y.fontFamily,top:"-9999em"},k.inputStyle))),B.onfocus=()=>{g.showInput(P)},B.onblur=()=>{B===r.doc.activeElement&&N(P),g.hideInput(P),g.setInputValue(P),B.blur()};let W=!1;return B.onchange=()=>{W||(N(P),g.hideInput(P),B.blur())},B.onkeypress=V=>{V.keyCode===13&&N(P)},B.onkeydown=V=>{W=!0,(V.key==="ArrowUp"||V.key==="ArrowDown"||V.key==="Tab")&&N(P)},B.onkeyup=()=>{W=!1},{dateBox:j,input:B,label:X}}getPosition(){let P=this.chart,D=P.options.rangeSelector,C=D.verticalAlign==="top"?P.plotTop-P.axisOffset[0]:0;return{buttonTop:C+D.buttonPosition.y,inputTop:C+D.inputPosition.y-10}}getYTDExtremes(P,D,C){let d=this.chart.time,g=new d.Date(P),y=d.get("FullYear",g),M=C?d.Date.UTC(y,0,1):+new d.Date(y,0,1),k=g.getTime();return{max:Math.min(P||k,k),min:Math.max(D,M)}}createElements(){let P=this.chart,D=P.renderer,C=P.container,d=P.options,g=d.rangeSelector,y=g.inputEnabled,M=O(d.chart.style?.zIndex,0)+1;if(g.enabled!==!1&&(this.group=D.g("range-selector-group").attr({zIndex:7}).add(),this.div=u("div",void 0,{position:"relative",height:0,zIndex:M}),this.buttonOptions.length&&this.renderButtons(),C.parentNode&&C.parentNode.insertBefore(this.div,C),y)){this.inputGroup=D.g("input-group").add(this.group);let k=this.drawInput("min");this.minDateBox=k.dateBox,this.minLabel=k.label,this.minInput=k.input;let T=this.drawInput("max");this.maxDateBox=T.dateBox,this.maxLabel=T.label,this.maxInput=T.input}}render(P,D){let C=this.chart,d=C.options.rangeSelector,g=d.inputEnabled;if(d.enabled!==!1){if(g){this.setInputValue("min",P),this.setInputValue("max",D);let y=C.scroller&&C.scroller.getUnionExtremes()||C.xAxis[0]||{};if(b(y.dataMin)&&b(y.dataMax)){let M=C.xAxis[0].minRange||0;this.setInputExtremes("min",y.dataMin,Math.min(y.dataMax,this.getInputValue("max"))-M),this.setInputExtremes("max",Math.max(y.dataMin,this.getInputValue("min"))+M,y.dataMax)}if(this.inputGroup){let M=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(k=>{if(k){let{width:T}=k.getBBox();T&&(k.attr({x:M}),M+=T+d.inputSpacing)}})}}this.alignElements(),this.updateButtonStates()}}renderButtons(){let{buttons:P,chart:D,options:C}=this,d=c.lang,g=D.renderer,y=S(C.buttonTheme),M=y&&y.states,k=y.width||28;delete y.width,delete y.states,this.buttonGroup=g.g("range-selector-buttons").add(this.group);let T=this.dropdown=u("select",void 0,{position:"absolute",padding:0,border:0,cursor:"pointer",opacity:1e-4},this.div),z=D.userOptions.rangeSelector?.buttonTheme;this.dropdownLabel=g.button("",0,0,()=>{},S(y,{"stroke-width":O(y["stroke-width"],0),width:"auto",paddingLeft:O(C.buttonTheme.paddingLeft,z?.padding,8),paddingRight:O(C.buttonTheme.paddingRight,z?.padding,8)}),M&&M.hover,M&&M.select,M&&M.disabled).hide().add(this.group),f(T,"touchstart",()=>{T.style.fontSize="16px"});let N=r.isMS?"mouseover":"mouseenter",G=r.isMS?"mouseout":"mouseleave";f(T,N,()=>{E(this.dropdownLabel.element,N)}),f(T,G,()=>{E(this.dropdownLabel.element,G)}),f(T,"change",()=>{E(this.buttons[T.selectedIndex-1].element,"click")}),this.zoomText=g.label(d.rangeSelectorZoom||"",0).attr({padding:C.buttonTheme.padding,height:C.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(C.labelStyle),y["stroke-width"]=O(y["stroke-width"],0)),u("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,T),this.buttonOptions.forEach((X,j)=>{u("option",{textContent:X.title||X.text},void 0,T),P[j]=g.button(X.text,0,0,B=>{let W,V=X.events&&X.events.click;V&&(W=V.call(X,B)),W!==!1&&this.clickButton(j),this.isActive=!0},y,M&&M.hover,M&&M.select,M&&M.disabled).attr({"text-align":"center",width:k}).add(this.buttonGroup),X.title&&P[j].attr("title",X.title)})}alignElements(){let{buttonGroup:P,buttons:D,chart:C,group:d,inputGroup:g,options:y,zoomText:M}=this,k=C.options,T=k.exporting&&k.exporting.enabled!==!1&&k.navigation&&k.navigation.buttonOptions,{buttonPosition:z,inputPosition:N,verticalAlign:G}=y,X=(B,W)=>T&&this.titleCollision(C)&&G==="top"&&W.align==="right"&&W.y-B.getBBox().height-12<(T.y||0)+(T.height||0)+C.spacing[0]?-40:0,j=C.plotLeft;if(d&&z&&N){let B=z.x-C.spacing[3];if(P){if(this.positionButtons(),!this.initialButtonGroupWidth){let J=0;M&&(J+=M.getBBox().width+5),D.forEach((tt,$)=>{J+=tt.width||0,$!==D.length-1&&(J+=y.buttonSpacing)}),this.initialButtonGroupWidth=J}j-=C.spacing[3];let K=X(P,z);this.alignButtonGroup(K),this.buttonGroup?.translateY&&this.dropdownLabel.attr({y:this.buttonGroup.translateY}),d.placed=P.placed=C.hasLoaded}let W=0;g&&(W=X(g,N),N.align==="left"?B=j:N.align==="right"&&(B=-Math.max(C.axisOffset[1],-W)),g.align({y:N.y,width:g.getBBox().width,align:N.align,x:N.x+B-2},!0,C.spacingBox),g.placed=C.hasLoaded),this.handleCollision(W),d.align({verticalAlign:G},!0,C.spacingBox);let V=d.alignAttr.translateY,U=d.getBBox().height+20,q=0;if(G==="bottom"){let K=C.legend&&C.legend.options;q=V-(U=U+(K&&K.verticalAlign==="bottom"&&K.enabled&&!K.floating?C.legend.legendHeight+O(K.margin,10):0)-20)-(y.floating?0:y.y)-(C.titleOffset?C.titleOffset[2]:0)-10}G==="top"?(y.floating&&(q=0),C.titleOffset&&C.titleOffset[0]&&(q=C.titleOffset[0]),q+=C.margin[0]-C.spacing[0]||0):G==="middle"&&(N.y===z.y?q=V:(N.y||z.y)&&(N.y<0||z.y<0?q-=Math.min(N.y,z.y):q=V-U)),d.translate(y.x,y.y+Math.floor(q));let{minInput:H,maxInput:Y,dropdown:Z}=this;y.inputEnabled&&H&&Y&&(H.style.marginTop=d.translateY+"px",Y.style.marginTop=d.translateY+"px"),Z&&(Z.style.marginTop=d.translateY+"px")}}alignButtonGroup(P,D){let{chart:C,options:d,buttonGroup:g}=this,{buttonPosition:y}=d,M=C.plotLeft-C.spacing[3],k=y.x-C.spacing[3];y.align==="right"?k+=P-M:y.align==="center"&&(k-=M/2),g&&g.align({y:y.y,width:O(D,this.initialButtonGroupWidth),align:y.align,x:k},!0,C.spacingBox)}positionButtons(){let{buttons:P,chart:D,options:C,zoomText:d}=this,g=D.hasLoaded?"animate":"attr",{buttonPosition:y}=C,M=D.plotLeft,k=M;d&&d.visibility!=="hidden"&&(d[g]({x:O(M+y.x,M)}),k+=y.x+d.getBBox().width+5);for(let T=0,z=this.buttonOptions.length;T<z;++T)P[T].visibility!=="hidden"?(P[T][g]({x:k}),k+=(P[T].width||0)+C.buttonSpacing):P[T][g]({x:M})}handleCollision(P){let{chart:D,buttonGroup:C,inputGroup:d}=this,{buttonPosition:g,dropdown:y,inputPosition:M}=this.options,k=()=>{let N=0;return this.buttons.forEach(G=>{let X=G.getBBox();X.width>N&&(N=X.width)}),N},T=N=>{if(d?.alignOptions&&C){let G=d.alignAttr.translateX+d.alignOptions.x-P+d.getBBox().x+2,X=d.alignOptions.width||0,j=C.alignAttr.translateX+C.getBBox().x;return j+N>G&&G+X>j&&g.y<M.y+d.getBBox().height}return!1},z=()=>{d&&C&&d.attr({translateX:d.alignAttr.translateX+(D.axisOffset[1]>=-P?0:-P),translateY:d.alignAttr.translateY+C.getBBox().height+10})};if(C){if(y==="always"){this.collapseButtons(),T(k())&&z();return}y==="never"&&this.expandButtons()}d&&C?M.align===g.align||T(this.initialButtonGroupWidth+20)?y==="responsive"?(this.collapseButtons(),T(k())&&z()):z():y==="responsive"&&this.expandButtons():C&&y==="responsive"&&(this.initialButtonGroupWidth>D.plotWidth?this.collapseButtons():this.expandButtons())}collapseButtons(){let{buttons:P,zoomText:D}=this;this.isCollapsed!==!0&&(this.isCollapsed=!0,D.hide(),P.forEach(C=>void C.hide()),this.showDropdown())}expandButtons(){let{buttons:P,zoomText:D}=this;this.isCollapsed!==!1&&(this.isCollapsed=!1,this.hideDropdown(),D.show(),P.forEach(C=>void C.show()),this.positionButtons())}showDropdown(){let{buttonGroup:P,chart:D,dropdownLabel:C,dropdown:d}=this;if(P&&d){let{translateX:g=0,translateY:y=0}=P,M=D.plotLeft+g;C.attr({x:M,y}).show(),p(d,{left:M+"px",top:y+"px",visibility:"inherit"}),this.hasVisibleDropdown=!0}}hideDropdown(){let{dropdown:P}=this;P&&(this.dropdownLabel.hide(),p(P,{visibility:"hidden",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)}getHeight(){let P=this.options,D=this.group,C=P.inputPosition,d=P.buttonPosition,g=P.y,y=d.y,M=C.y,k=0;return P.height?P.height:(this.alignElements(),k=D?D.getBBox(!0).height+13+g:0,(M<0&&y<0||M>0&&y>0)&&(k+=Math.abs(Math.min(M,y))),k)}titleCollision(P){return!(P.options.title.text||P.options.subtitle.text)}update(P,D=!0){let C=this.chart;S(!0,C.options.rangeSelector,P),this.destroy(),this.init(C),D&&this.render()}destroy(){let P=this,D=P.minInput,C=P.maxInput;P.eventsToUnbind&&(P.eventsToUnbind.forEach(d=>d()),P.eventsToUnbind=void 0),v(P.buttons),D&&(D.onfocus=D.onblur=D.onchange=null),C&&(C.onfocus=C.onblur=C.onchange=null),w(P,function(d,g){d&&g!=="chart"&&(d instanceof l?d.destroy():d instanceof window.HTMLElement&&x(d)),d!==A.prototype[g]&&(P[g]=null)},this)}}return m(A.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),A}),i(t,"Core/Chart/StockChart.js",[t["Core/Chart/Chart.js"],t["Core/Templating.js"],t["Core/Defaults.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c){let{format:f}=s,{getOptions:u}=r,{setFixedRange:p}=h,{addEvent:b,clamp:v,crisp:x,defined:m,extend:E,find:L,isNumber:S,isString:w,merge:R,pick:O,splat:I}=c;function _(P,D,C){return P==="xAxis"?{minPadding:0,maxPadding:0,overscroll:0,ordinal:!0}:P==="yAxis"?{labels:{y:-2},opposite:C.opposite??D.opposite??!0,showLastLabel:!!(D.categories||D.type==="category"),title:{text:C.title?.text!=="Values"?C.title?.text:null}}:{}}function A(P,D){if(P==="xAxis"){let C=O(D.navigator&&D.navigator.enabled,n.enabled,!0),d={type:"datetime",categories:void 0};return C&&(d.startOnTick=!1,d.endOnTick=!1),d}return{}}class F extends e{init(D,C){let d=u(),g=D.xAxis,y=D.yAxis,M=O(D.navigator&&D.navigator.enabled,n.enabled,!0);D.xAxis=D.yAxis=void 0;let k=R({chart:{panning:{enabled:!0,type:"x"},zooming:{pinchType:"x",mouseWheel:{type:"x"}}},navigator:{enabled:M},scrollbar:{enabled:O(a.enabled,!0)},rangeSelector:{enabled:O(l.rangeSelector.enabled,!0)},title:{text:null},tooltip:{split:O(d.tooltip&&d.tooltip.split,!0),crosshairs:!0},legend:{enabled:!1}},D,{isStock:!0});D.xAxis=g,D.yAxis=y,k.xAxis=I(D.xAxis||{}).map(T=>R(_("xAxis",T,d.xAxis),T,A("xAxis",D))),k.yAxis=I(D.yAxis||{}).map(T=>R(_("yAxis",T,d.yAxis),T)),super.init(k,C)}createAxis(D,C){return C.axis=R(_(D,C.axis,u()[D]),C.axis,A(D,this.userOptions)),super.createAxis(D,C)}}return b(e,"update",function(P){let D=P.options;"scrollbar"in D&&this.navigator&&(R(!0,this.options.scrollbar,D.scrollbar),this.navigator.update({}),delete D.scrollbar)}),function(P){function D(z){if(!this.crosshair||!this.crosshair.label||!this.crosshair.label.enabled||!this.cross||!S(this.min)||!S(this.max))return;let N=this.chart,G=this.logarithmic,X=this.crosshair.label,j=this.horiz,B=this.opposite,W=this.left,V=this.top,U=this.width,q=this.options.tickPosition==="inside",H=this.crosshair.snap!==!1,Y=z.e||this.cross&&this.cross.e,Z=z.point,K=this.crossLabel,J,tt,$=X.format,Q="",et,it=0,st=this.min,rt=this.max;G&&(st=G.lin2log(this.min),rt=G.lin2log(this.max));let nt=j?"center":B?this.labelAlign==="right"?"right":"left":this.labelAlign==="left"?"left":"center";K||(K=this.crossLabel=N.renderer.label("",0,void 0,X.shape||"callout").addClass("highcharts-crosshair-label highcharts-color-"+(Z&&Z.series?Z.series.colorIndex:this.series[0]&&this.series[0].colorIndex)).attr({align:X.align||nt,padding:O(X.padding,8),r:O(X.borderRadius,3),zIndex:2}).add(this.labelGroup),N.styledMode||K.attr({fill:X.backgroundColor||Z&&Z.series&&Z.series.color||"#666666",stroke:X.borderColor||"","stroke-width":X.borderWidth||0}).css(E({color:"#ffffff",fontWeight:"normal",fontSize:"0.7em",textAlign:"center"},X.style||{}))),j?(J=H?(Z.plotX||0)+W:Y.chartX,tt=V+(B?0:this.height)):(J=W+this.offset+(B?U:0),tt=H?(Z.plotY||0)+V:Y.chartY),$||X.formatter||(this.dateTime&&(Q="%b %d, %Y"),$="{value"+(Q?":"+Q:"")+"}");let ot=H?this.isXAxis?Z.x:Z.y:this.toValue(j?Y.chartX:Y.chartY),at=Z&&Z.series?Z.series.isPointInside(Z):S(ot)&&ot>st&&ot<rt,ct="";$?ct=f($,{value:ot},N):X.formatter&&S(ot)&&(ct=X.formatter.call(this,ot)),K.attr({text:ct,x:J,y:tt,visibility:at?"inherit":"hidden"});let ht=K.getBBox();!S(K.x)||j||B||(J=K.x-ht.width/2),S(K.y)&&(j?(q&&!B||!q&&B)&&(tt=K.y-ht.height):tt=K.y-ht.height/2),et=j?{left:W,right:W+this.width}:{left:this.labelAlign==="left"?W:0,right:this.labelAlign==="right"?W+this.width:N.chartWidth};let lt=K.translateX||0;lt<et.left&&(it=et.left-lt),lt+ht.width>=et.right&&(it=-(lt+ht.width-et.right)),K.attr({x:J+it,y:tt,anchorX:j?J:this.opposite?0:N.chartWidth,anchorY:j?this.opposite?N.chartHeight:0:tt+ht.height/2})}function C(){this.crossLabel&&(this.crossLabel=this.crossLabel.hide())}function d(z){let N=this.chart,G=this.options,X=N._labelPanes=N._labelPanes||{},j=G.labels;if(N.options.isStock&&this.coll==="yAxis"){let B=G.top+","+G.height;!X[B]&&j.enabled&&(j.distance===15&&this.side===1&&(j.distance=0),j.align===void 0&&(j.align="right"),X[B]=this,z.align="right",z.preventDefault())}}function g(){let z=this.chart,N=this.options&&this.options.top+","+this.options.height;N&&z._labelPanes&&z._labelPanes[N]===this&&delete z._labelPanes[N]}function y(z){let N=this,G=N.isLinked&&!N.series&&N.linkedParent?N.linkedParent.series:N.series,X=N.chart,j=X.renderer,B=N.left,W=N.top,V=[],U=z.translatedValue,q=z.value,H=z.force,Y,Z,K,J,tt=[],$,Q;if(X.options.isStock&&z.acrossPanes!==!1&&N.coll==="xAxis"||N.coll==="yAxis"){for(let et of(z.preventDefault(),tt=(it=>{let st=it==="xAxis"?"yAxis":"xAxis",rt=N.options[st];return S(rt)?[X[st][rt]]:w(rt)?[X.get(rt)]:G.map(nt=>nt[st])})(N.coll),N.isXAxis?X.yAxis:X.xAxis))if(!m(et.options.id)||et.options.id.indexOf("navigator")===-1){let it=et.isXAxis?"yAxis":"xAxis";N===(m(et.options[it])?X[it][et.options[it]]:X[it][0])&&tt.push(et)}for(let et of($=tt.length?[]:[N.isXAxis?X.yAxis[0]:X.xAxis[0]],tt))$.indexOf(et)!==-1||L($,it=>it.pos===et.pos&&it.len===et.len)||$.push(et);if(S(Q=O(U,N.translate(q||0,void 0,void 0,z.old))))if(N.horiz)for(let et of $){let it;J=(Z=et.pos)+et.len,Y=K=Math.round(Q+N.transB),H!=="pass"&&(Y<B||Y>B+N.width)&&(H?Y=K=v(Y,B,B+N.width):it=!0),it||V.push(["M",Y,Z],["L",K,J])}else for(let et of $){let it;K=(Y=et.pos)+et.len,Z=J=Math.round(W+N.height-Q),H!=="pass"&&(Z<W||Z>W+N.height)&&(H?Z=J=v(Z,W,W+N.height):it=!0),it||V.push(["M",Y,Z],["L",K,J])}z.path=V.length>0?j.crispPolyLine(V,z.lineWidth||1):void 0}}function M(z){if(this.chart.options.isStock){let N;this.is("column")||this.is("columnrange")?N={borderWidth:0,shadow:!1}:this.is("scatter")||this.is("sma")||(N={marker:{enabled:!1,radius:2}}),N&&(z.plotOptions[this.type]=R(z.plotOptions[this.type],N))}}function k(){let z=this.chart,N=this.options.dataGrouping;return this.allowDG!==!1&&N&&O(N.enabled,z.options.isStock)}function T(z,N){for(let G=0;G<z.length;G+=2){let X=z[G],j=z[G+1];m(X[1])&&X[1]===j[1]&&(X[1]=j[1]=x(X[1],N)),m(X[2])&&X[2]===j[2]&&(X[2]=j[2]=x(X[2],N))}return z}P.compose=function(z,N,G,X){let j=G.prototype;j.forceCropping||(b(N,"afterDrawCrosshair",D),b(N,"afterHideCrosshair",C),b(N,"autoLabelAlign",d),b(N,"destroy",g),b(N,"getPlotLinePath",y),z.prototype.setFixedRange=p,j.forceCropping=k,b(G,"setOptions",M),X.prototype.crispPolyLine=T)},P.stockChart=function(z,N,G){return new P(z,N,G)}}(F||(F={})),F}),i(t,"Series/HLC/HLCPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(e){let{column:{prototype:{pointClass:s}}}=e.seriesTypes;return class extends s{}}),i(t,"Series/HLC/HLCSeriesDefaults.js",[],function(){return{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b> {series.name}</b><br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0}}),i(t,"Series/HLC/HLCSeries.js",[t["Series/HLC/HLCPoint.js"],t["Series/HLC/HLCSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n){let{column:l}=r.seriesTypes,{crisp:a,extend:h,merge:c}=n;class f extends l{extendStem(p,b,v){let x=p[0],m=p[1];typeof x[2]=="number"&&(x[2]=Math.max(v+b,x[2])),typeof m[2]=="number"&&(m[2]=Math.min(v-b,m[2]))}getPointPath(p,b){let v=b.strokeWidth(),x=p.series,m=a(p.plotX||0,v),E=Math.round(p.shapeArgs.width/2),L=[["M",m,Math.round(p.yBottom)],["L",m,Math.round(p.plotHigh)]];if(p.close!==null){let S=a(p.plotClose,v);L.push(["M",m,S],["L",m+E,S]),x.extendStem(L,v/2,S)}return L}drawSinglePoint(p){let b=p.series,v=b.chart,x,m=p.graphic;p.plotY!==void 0&&(m||(p.graphic=m=v.renderer.path().add(b.group)),v.styledMode||m.attr(b.pointAttribs(p,p.selected&&"select")),x=b.getPointPath(p,m),m[m?"animate":"attr"]({d:x}).addClass(p.getClassName(),!0))}drawPoints(){this.points.forEach(this.drawSinglePoint)}init(){super.init.apply(this,arguments),this.options.stacking=void 0}pointAttribs(p,b){let v=super.pointAttribs.call(this,p,b);return delete v.fill,v}toYData(p){return[p.high,p.low,p.close]}translate(){let p=this,b=p.yAxis,v=this.pointArrayMap&&this.pointArrayMap.slice()||[],x=v.map(m=>`plot${m.charAt(0).toUpperCase()+m.slice(1)}`);x.push("yBottom"),v.push("low"),super.translate.apply(p),p.points.forEach(function(m){v.forEach(function(E,L){let S=m[E];S!==null&&(p.dataModify&&(S=p.dataModify.modifyValue(S)),m[x[L]]=b.toPixels(S,!0))}),m.tooltipPos[1]=m.plotHigh+b.pos-p.chart.plotTop})}}return f.defaultOptions=c(l.defaultOptions,s),h(f.prototype,{pointClass:e,animate:null,directTouch:!1,pointArrayMap:["high","low","close"],pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointValKey:"close"}),r.registerSeriesType("hlc",f),f}),i(t,"Series/OHLC/OHLCPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(e){let{seriesTypes:{hlc:s}}=e;class r extends s.prototype.pointClass{getClassName(){return super.getClassName.call(this)+(this.open<this.close?" highcharts-point-up":" highcharts-point-down")}resolveUpColor(){this.open<this.close&&!this.options.color&&this.series.options.upColor&&(this.color=this.series.options.upColor)}resolveColor(){super.resolveColor(),this.series.is("heikinashi")||this.resolveUpColor()}getZone(){let l=super.getZone();return this.resolveUpColor(),l}applyOptions(){return super.applyOptions.apply(this,arguments),this.resolveColor&&this.resolveColor(),this}}return r}),i(t,"Series/OHLC/OHLCSeriesDefaults.js",[],function(){return{tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'}}}),i(t,"Series/OHLC/OHLCSeries.js",[t["Core/Globals.js"],t["Series/OHLC/OHLCPoint.js"],t["Series/OHLC/OHLCSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l){let{composed:a}=e,{hlc:h}=n.seriesTypes,{addEvent:c,crisp:f,extend:u,merge:p,pushUnique:b}=l;function v(E){let L=E.options,S=L.dataGrouping;S&&L.useOhlcData&&L.id!=="highcharts-navigator-series"&&(S.approximation="ohlc")}function x(E){let L=E.options;L.useOhlcData&&L.id!=="highcharts-navigator-series"&&u(this,{pointValKey:m.prototype.pointValKey,pointArrayMap:m.prototype.pointArrayMap,toYData:m.prototype.toYData})}class m extends h{static compose(L,...S){b(a,"OHLCSeries")&&(c(L,"afterSetOptions",v),c(L,"init",x))}getPointPath(L,S){let w=super.getPointPath(L,S),R=S.strokeWidth(),O=f(L.plotX||0,R),I=Math.round(L.shapeArgs.width/2);if(L.open!==null){let _=f(L.plotOpen,R);w.push(["M",O,_],["L",O-I,_]),super.extendStem(w,R/2,_)}return w}pointAttribs(L,S){let w=super.pointAttribs.call(this,L,S),R=this.options;return delete w.fill,!L.options.color&&R.upColor&&L.open<L.close&&(w.stroke=R.upColor),w}toYData(L){return[L.open,L.high,L.low,L.close]}}return m.defaultOptions=p(h.defaultOptions,r),u(m.prototype,{pointClass:s,pointArrayMap:["open","high","low","close"]}),n.registerSeriesType("ohlc",m),m}),i(t,"Series/Candlestick/CandlestickSeriesDefaults.js",[],function(){return{states:{hover:{lineWidth:2}},threshold:null,lineColor:"#000000",lineWidth:1,upColor:"#ffffff",stickyTracking:!0}}),i(t,"Series/Candlestick/CandlestickSeries.js",[t["Series/Candlestick/CandlestickSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r){let{column:n,ohlc:l}=s.seriesTypes,{crisp:a,merge:h}=r;class c extends l{pointAttribs(u,p){let b=n.prototype.pointAttribs.call(this,u,p),v=this.options,x=u.open<u.close,m=v.lineColor||this.color,E=u.color||this.color;if(b["stroke-width"]=v.lineWidth,b.fill=u.options.color||x&&v.upColor||E,b.stroke=u.options.lineColor||x&&v.upLineColor||m,p){let L=v.states[p];b.fill=L.color||b.fill,b.stroke=L.lineColor||b.stroke,b["stroke-width"]=L.lineWidth||b["stroke-width"]}return b}drawPoints(){let u=this.points,p=this.chart,b=this.yAxis.reversed;for(let v of u){let x=v.graphic,m,E,L,S,w,R,O,I,_,A=!x;if(v.plotY!==void 0){x||(v.graphic=x=p.renderer.path().add(this.group)),this.chart.styledMode||x.attr(this.pointAttribs(v,v.selected&&"select")).shadow(this.options.shadow);let F=x.strokeWidth();O=a(v.plotX||0,F),L=Math.min(m=v.plotOpen,E=v.plotClose),S=Math.max(m,E),_=Math.round(v.shapeArgs.width/2),w=b?S!==v.yBottom:Math.round(L)!==Math.round(v.plotHigh||0),R=b?Math.round(L)!==Math.round(v.plotHigh||0):S!==v.yBottom,L=a(L,F),S=a(S,F),(I=[]).push(["M",O-_,S],["L",O-_,L],["L",O+_,L],["L",O+_,S],["Z"],["M",O,L],["L",O,w?Math.round(b?v.yBottom:v.plotHigh):L],["M",O,S],["L",O,R?Math.round(b?v.plotHigh:v.yBottom):S]),x[A?"attr":"animate"]({d:I}).addClass(v.getClassName(),!0)}}}}return c.defaultOptions=h(l.defaultOptions,{tooltip:l.defaultOptions.tooltip},e),s.registerSeriesType("candlestick",c),c}),i(t,"Series/Flags/FlagsPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s){let{column:{prototype:{pointClass:r}}}=e.seriesTypes,{isNumber:n}=s;return class extends r{constructor(){super(...arguments),this.ttBelow=!1}isValid(){return n(this.y)||this.y===void 0}hasNewShapeType(){let l=this.options.shape||this.series.options.shape;return this.graphic&&l&&l!==this.graphic.symbolKey}}}),i(t,"Series/Flags/FlagsSeriesDefaults.js",[],function(){return{borderRadius:0,pointRange:0,allowOverlapX:!1,shape:"flag",stackDistance:12,textAlign:"center",tooltip:{pointFormat:"{point.text}"},threshold:null,y:-30,fillColor:"#ffffff",lineWidth:1,states:{hover:{lineColor:"#000000",fillColor:"#ccd3ff"}},style:{fontSize:"0.7em",fontWeight:"bold"}}}),i(t,"Series/Flags/FlagsSymbols.js",[t["Core/Renderer/RendererRegistry.js"]],function(e){var s;return function(r){let n=[];function l(h,c,f,u,p){let b=p&&p.anchorX||h,v=p&&p.anchorY||c,x=this.circle(b-1,v-1,2,2);return x.push(["M",b,v],["L",h,c+u],["L",h,c],["L",h+f,c],["L",h+f,c+u],["L",h,c+u],["Z"]),x}function a(h,c){h[c+"pin"]=function(f,u,p,b,v){let x,m=v&&v.anchorX,E=v&&v.anchorY;if(c==="circle"&&b>p&&(f-=Math.round((b-p)/2),p=b),x=h[c](f,u,p,b,v),m&&E){let L=m;if(c==="circle")L=f+p/2;else{let w=x[0],R=x[1];w[0]==="M"&&R[0]==="L"&&(L=(w[1]+R[1])/2)}let S=u>E?u:u+b;x.push(["M",L,S],["L",m,E]),x=x.concat(h.circle(m-1,E-1,2,2))}return x}}r.compose=function(h){if(n.indexOf(h)===-1){n.push(h);let f=h.prototype.symbols;f.flag=l,a(f,"circle"),a(f,"square")}let c=e.getRendererType();n.indexOf(c)&&n.push(c)}}(s||(s={})),s}),i(t,"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,s,r,n){var l;let{composed:a}=s,{prototype:h}=e,{prototype:c}=r,{defined:f,pushUnique:u,stableSort:p}=n;return function(b){function v(m){return c.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,m)}function x(){h.translate.apply(this);let m=this,E=m.options,L=m.chart,S=m.points,w=E.onSeries,R=w&&L.get(w),O=R&&R.options.step,I=R&&R.points,_=L.inverted,A=m.xAxis,F=m.yAxis,P=S.length-1,D,C,d=E.onKey||"y",g=I&&I.length,y=0,M,k,T,z,N;if(R&&R.visible&&g){for(y=(R.pointXOffset||0)+(R.barW||0)/2,z=R.currentDataGrouping,k=I[g-1].x+(z?z.totalRange:0),p(S,(G,X)=>G.x-X.x),d="plot"+d[0].toUpperCase()+d.substr(1);g--&&S[P];)if(M=I[g],(D=S[P]).y=M.y,M.x<=D.x&&M[d]!==void 0){if(D.x<=k&&(D.plotY=M[d],M.x<D.x&&!O&&(T=I[g+1])&&T[d]!==void 0))if(f(D.plotX)&&R.is("spline")){let G=[M.plotX||0,M.plotY||0],X=[T.plotX||0,T.plotY||0],j=M.controlPoints?.high||G,B=T.controlPoints?.low||X,W=(H,Y)=>Math.pow(1-H,3)*G[Y]+3*(1-H)*(1-H)*H*j[Y]+3*(1-H)*H*H*B[Y]+H*H*H*X[Y],V=0,U=1,q;for(let H=0;H<100;H++){let Y=(V+U)/2,Z=W(Y,0);if(Z===null)break;if(.25>Math.abs(Z-D.plotX)){q=Y;break}Z<D.plotX?V=Y:U=Y}f(q)&&(D.plotY=W(q,1),D.y=F.toValue(D.plotY,!0))}else N=(D.x-M.x)/(T.x-M.x),D.plotY+=N*(T[d]-M[d]),D.y+=N*(T.y-M.y);if(P--,g++,P<0)break}}S.forEach((G,X)=>{let j;G.plotX+=y,(G.plotY===void 0||_)&&(G.plotX>=0&&G.plotX<=A.len?_?(G.plotY=A.translate(G.x,0,1,0,1),G.plotX=f(G.y)?F.translate(G.y,0,0,0,1):0):G.plotY=(A.opposite?0:m.yAxis.len)+A.offset:G.shapeArgs={}),(C=S[X-1])&&C.plotX===G.plotX&&(C.stackIndex===void 0&&(C.stackIndex=0),j=C.stackIndex+1),G.stackIndex=j}),this.onSeries=R}b.compose=function(m){if(u(a,"OnSeries")){let E=m.prototype;E.getPlotBox=v,E.translate=x}return m},b.getPlotBox=v,b.translate=x}(l||(l={})),l}),i(t,"Series/Flags/FlagsSeries.js",[t["Series/Flags/FlagsPoint.js"],t["Series/Flags/FlagsSeriesDefaults.js"],t["Series/Flags/FlagsSymbols.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a,h,c,f){let{noop:u}=n,{distribute:p}=a,{series:b,seriesTypes:{column:v}}=h,{addEvent:x,defined:m,extend:E,isNumber:L,merge:S,objectEach:w,wrap:R}=f;class O extends v{animate(_){_&&this.setClip()}drawPoints(){let _,A,F,P,D,C,d,g,y,M,k,T=this.points,z=this.chart,N=z.renderer,G=z.inverted,X=this.options,j=X.y,B=this.yAxis,W={},V=[],U=L(X.borderRadius)?X.borderRadius:0;for(P=T.length;P--;)D=T[P],M=(G?D.plotY:D.plotX)>this.xAxis.len,_=D.plotX,d=D.stackIndex,F=D.options.shape||X.shape,(A=D.plotY)!==void 0&&(A=D.plotY+j-(d!==void 0&&d*X.stackDistance)),D.anchorX=d?void 0:D.plotX,g=d?void 0:D.plotY,k=F!=="flag",C=D.graphic,A!==void 0&&_>=0&&!M?(C&&D.hasNewShapeType()&&(C=C.destroy()),C||(C=D.graphic=N.label("",0,void 0,F,void 0,void 0,X.useHTML).addClass("highcharts-point").add(this.markerGroup),D.graphic.div&&(D.graphic.div.point=D),C.isNew=!0),C.attr({align:k?"center":"left",width:X.width,height:X.height,"text-align":X.textAlign,r:U}),z.styledMode||C.attr(this.pointAttribs(D)).css(S(X.style,D.style)).shadow(X.shadow),_>0&&(_-=C.strokeWidth()%2),y={y:A,anchorY:g},X.allowOverlapX&&(y.x=_,y.anchorX=D.anchorX),C.attr({text:D.options.title??X.title??"A"})[C.isNew?"attr":"animate"](y),X.allowOverlapX||(W[D.plotX]?W[D.plotX].size=Math.max(W[D.plotX].size,C.width||0):W[D.plotX]={align:k?.5:0,size:C.width||0,target:_,anchorX:_}),D.tooltipPos=[_,A+B.pos-z.plotTop]):C&&(D.graphic=C.destroy());if(!X.allowOverlapX){let q=100;for(let H of(w(W,function(Y){Y.plotX=Y.anchorX,V.push(Y),q=Math.max(Y.size,q)}),p(V,G?B.len:this.xAxis.len,q),T)){let Y=H.plotX,Z=H.graphic,K=Z&&W[Y];K&&Z&&(m(K.pos)?Z[Z.isNew?"attr":"animate"]({x:K.pos+(K.align||0)*K.size,anchorX:H.anchorX}).show().isNew=!1:Z.hide().isNew=!0)}}X.useHTML&&this.markerGroup&&R(this.markerGroup,"on",function(q){return c.prototype.on.apply(q.apply(this,[].slice.call(arguments,1)),[].slice.call(arguments,1))})}drawTracker(){let _=this.points;for(let A of(super.drawTracker(),_)){let F=A.graphic;F&&(A.unbindMouseOver&&A.unbindMouseOver(),A.unbindMouseOver=x(F.element,"mouseover",function(){for(let P of(A.stackIndex>0&&!A.raised&&(A._y=F.y,F.attr({y:A._y-8}),A.raised=!0),_))P!==A&&P.raised&&P.graphic&&(P.graphic.attr({y:P._y}),P.raised=!1)}))}}pointAttribs(_,A){let F=this.options,P=_&&_.color||this.color,D=F.lineColor,C=_&&_.lineWidth,d=_&&_.fillColor||F.fillColor;return A&&(d=F.states[A].fillColor,D=F.states[A].lineColor,C=F.states[A].lineWidth),{fill:d||P,stroke:D||P,"stroke-width":C||F.lineWidth||0}}setClip(){b.prototype.setClip.apply(this,arguments),this.options.clip!==!1&&this.sharedClipKey&&this.markerGroup&&this.markerGroup.clip(this.chart.sharedClips[this.sharedClipKey])}}return O.compose=r.compose,O.defaultOptions=S(v.defaultOptions,s),l.compose(O),E(O.prototype,{allowDG:!1,forceCrop:!0,invertible:!1,noSharedTooltip:!0,pointClass:e,sorted:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],buildKDTree:u,init:b.prototype.init}),h.registerSeriesType("flags",O),O}),i(t,"Core/Axis/BrokenAxis.js",[t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(e,s){var r;let{addEvent:n,find:l,fireEvent:a,isArray:h,isNumber:c,pick:f}=s;return function(u){function p(){this.brokenAxis!==void 0&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function b(){this.brokenAxis?.hasBreaks&&(this.options.ordinal=!1)}function v(){let R=this.brokenAxis;if(R?.hasBreaks){let O=this.tickPositions,I=this.tickPositions.info,_=[];for(let A=0;A<O.length;A++)R.isInAnyBreak(O[A])||_.push(O[A]);this.tickPositions=_,this.tickPositions.info=I}}function x(){this.brokenAxis||(this.brokenAxis=new w(this))}function m(){let{isDirty:R,options:{connectNulls:O},points:I,xAxis:_,yAxis:A}=this;if(R){let F=I.length;for(;F--;){let P=I[F],D=!(P.y===null&&O===!1)&&(_?.brokenAxis?.isInAnyBreak(P.x,!0)||A?.brokenAxis?.isInAnyBreak(P.y,!0));P.visible=!D&&P.options.visible!==!1}}}function E(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,f(this.pointArrayMap,["y"]))}function L(R,O){let I,_,A,F=this,P=F.points;if(R?.brokenAxis?.hasBreaks){let D=R.brokenAxis;O.forEach(function(C){I=D?.breakArray||[],_=R.isXAxis?R.min:f(F.options.threshold,R.min);let d=R?.options?.breaks?.filter(function(g){let y=!0;for(let M=0;M<I.length;M++){let k=I[M];if(k.from===g.from&&k.to===g.to){y=!1;break}}return y});P.forEach(function(g){A=f(g["stack"+C.toUpperCase()],g[C]),I.forEach(function(y){if(c(_)&&c(A)){let M="";_<y.from&&A>y.to||_>y.from&&A<y.from?M="pointBreak":(_<y.from&&A>y.from&&A<y.to||_>y.from&&A>y.to&&A<y.from)&&(M="pointInBreak"),M&&a(R,M,{point:g,brk:y})}}),d?.forEach(function(y){a(R,"pointOutsideOfBreak",{point:g,brk:y})})})})}}function S(){let R=this.currentDataGrouping,O=R?.gapSize,I=this.points.slice(),_=this.yAxis,A=this.options.gapSize,F=I.length-1;if(A&&F>0){let P,D;for(this.options.gapUnit!=="value"&&(A*=this.basePointRange),O&&O>A&&O>=this.basePointRange&&(A=O);F--;)if(D&&D.visible!==!1||(D=I[F+1]),P=I[F],D.visible!==!1&&P.visible!==!1){if(D.x-P.x>A){let C=(P.x+D.x)/2;I.splice(F+1,0,{isNull:!0,x:C}),_.stacking&&this.options.stacking&&((_.stacking.stacks[this.stackKey][C]=new e(_,_.options.stackLabels,!1,C,this.stack)).total=0)}D=P}}return this.getGraphPath(I)}u.compose=function(R,O){if(!R.keepProps.includes("brokenAxis")){R.keepProps.push("brokenAxis"),n(R,"init",x),n(R,"afterInit",p),n(R,"afterSetTickPositions",v),n(R,"afterSetOptions",b);let I=O.prototype;I.drawBreaks=L,I.gappedPath=S,n(O,"afterGeneratePoints",m),n(O,"afterRender",E)}return R};class w{static isInBreak(O,I){let _=O.repeat||1/0,A=O.from,F=O.to-O.from,P=I>=A?(I-A)%_:_-(A-I)%_;return O.inclusive?P<=F:P<F&&P!==0}static lin2Val(O){let I=this.brokenAxis,_=I&&I.breakArray;if(!_||!c(O))return O;let A=O,F,P;for(P=0;P<_.length&&!((F=_[P]).from>=A);P++)(F.to<A||w.isInBreak(F,A))&&(A+=F.len);return A}static val2Lin(O){let I=this.brokenAxis,_=I&&I.breakArray;if(!_||!c(O))return O;let A=O,F,P;for(P=0;P<_.length;P++)if((F=_[P]).to<=O)A-=F.len;else{if(F.from>=O)break;if(w.isInBreak(F,O)){A-=O-F.from;break}}return A}constructor(O){this.hasBreaks=!1,this.axis=O}findBreakAt(O,I){return l(I,function(_){return _.from<O&&O<_.to})}isInAnyBreak(O,I){let _=this.axis,A=_.options.breaks||[],F=A.length,P,D,C;if(F&&c(O)){for(;F--;)w.isInBreak(A[F],O)&&(P=!0,D||(D=f(A[F].showPoints,!_.isXAxis)));C=P&&I?P&&!D:P}return C}setBreaks(O,I){let _=this,A=_.axis,F=h(O)&&!!O.length&&!!Object.keys(O[0]).length;A.isDirty=_.hasBreaks!==F,_.hasBreaks=F,O!==A.options.breaks&&(A.options.breaks=A.userOptions.breaks=O),A.forceRedraw=!0,A.series.forEach(function(P){P.isDirty=!0}),F||A.val2lin!==w.val2Lin||(delete A.val2lin,delete A.lin2val),F&&(A.userOptions.ordinal=!1,A.lin2val=w.lin2Val,A.val2lin=w.val2Lin,A.setExtremes=function(P,D,C,d,g){if(_.hasBreaks){let y,M=this.options.breaks||[];for(;y=_.findBreakAt(P,M);)P=y.to;for(;y=_.findBreakAt(D,M);)D=y.from;D<P&&(D=P)}A.constructor.prototype.setExtremes.call(this,P,D,C,d,g)},A.setAxisTranslation=function(){if(A.constructor.prototype.setAxisTranslation.call(this),_.unitLength=void 0,_.hasBreaks){let P=A.options.breaks||[],D=[],C=[],d=f(A.pointRangePadding,0),g=0,y,M,k=A.userMin||A.min,T=A.userMax||A.max,z,N;P.forEach(function(G){M=G.repeat||1/0,c(k)&&c(T)&&(w.isInBreak(G,k)&&(k+=G.to%M-k%M),w.isInBreak(G,T)&&(T-=T%M-G.from%M))}),P.forEach(function(G){if(z=G.from,M=G.repeat||1/0,c(k)&&c(T)){for(;z-M>k;)z-=M;for(;z<k;)z+=M;for(N=z;N<T;N+=M)D.push({value:N,move:"in"}),D.push({value:N+G.to-G.from,move:"out",size:G.breakSize})}}),D.sort(function(G,X){return G.value===X.value?(G.move==="in"?0:1)-(X.move==="in"?0:1):G.value-X.value}),y=0,z=k,D.forEach(function(G){(y+=G.move==="in"?1:-1)===1&&G.move==="in"&&(z=G.value),y===0&&c(z)&&(C.push({from:z,to:G.value,len:G.value-z-(G.size||0)}),g+=G.value-z-(G.size||0))}),_.breakArray=C,c(k)&&c(T)&&c(A.min)&&(_.unitLength=T-k-g+d,a(A,"afterBreaks"),A.staticScale?A.transA=A.staticScale:_.unitLength&&(A.transA*=(T-A.min+d)/_.unitLength),d&&(A.minPixelPadding=A.transA*(A.minPointOffset||0)),A.min=k,A.max=T)}}),f(I,!0)&&A.chart.redraw()}}u.Additions=w}(r||(r={})),r}),i(t,"masters/modules/broken-axis.src.js",[t["Core/Globals.js"],t["Core/Axis/BrokenAxis.js"]],function(e,s){return e.BrokenAxis=e.BrokenAxis||s,e.BrokenAxis.compose(e.Axis,e.Series),e}),i(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),i(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(e,s){let{arrayMax:r,arrayMin:n,correctFloat:l,extend:a,isNumber:h}=s;function c(p){let b=p.length,v=f(p);return h(v)&&b&&(v=l(v/b)),v}function f(p){let b=p.length,v;if(!b&&p.hasNulls)v=null;else if(b)for(v=0;b--;)v+=p[b];return v}let u={average:c,averages:function(){let p=[];return[].forEach.call(arguments,function(b){p.push(c(b))}),p[0]===void 0?void 0:p},close:function(p){return p.length?p[p.length-1]:p.hasNulls?null:void 0},high:function(p){return p.length?r(p):p.hasNulls?null:void 0},hlc:function(p,b,v){if(p=e.high(p),b=e.low(b),v=e.close(v),h(p)||h(b)||h(v))return[p,b,v]},low:function(p){return p.length?n(p):p.hasNulls?null:void 0},ohlc:function(p,b,v,x){if(p=e.open(p),b=e.high(b),v=e.low(v),x=e.close(x),h(p)||h(b)||h(v)||h(x))return[p,b,v,x]},open:function(p){return p.length?p[0]:p.hasNulls?null:void 0},range:function(p,b){return p=e.low(p),b=e.high(b),h(p)||h(b)?[p,b]:p===null&&b===null?null:void 0},sum:f};return a(e,u),u}),i(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),i(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(e,s){let r,{addEvent:n,extend:l,merge:a,pick:h}=s;function c(b){let v=this,x=v.series;x.forEach(function(m){m.groupPixelWidth=void 0}),x.forEach(function(m){m.groupPixelWidth=v.getGroupPixelWidth&&v.getGroupPixelWidth(),m.groupPixelWidth&&(m.hasProcessed=!0),m.applyGrouping(!!b.hasExtremesChanged)})}function f(){let b=this.series,v=b.length,x=0,m=!1,E,L;for(;v--;)(L=b[v].options.dataGrouping)&&(x=Math.max(x,h(L.groupPixelWidth,e.common.groupPixelWidth)),E=(b[v].processedXData||b[v].data).length,(b[v].groupPixelWidth||E>this.chart.plotSizeX/x||E&&L.forced)&&(m=!0));return m?x:0}function u(){this.series.forEach(function(b){b.hasProcessed=!1})}function p(b,v){let x;if(v=h(v,!0),b||(b={forced:!1,units:null}),this instanceof r)for(x=this.series.length;x--;)this.series[x].update({dataGrouping:b},!1);else this.chart.options.series.forEach(function(m){m.dataGrouping=typeof b=="boolean"?b:a(b,m.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),v&&this.chart.redraw()}return{compose:function(b){r=b;let v=b.prototype;v.applyGrouping||(n(b,"afterSetScale",u),n(b,"postProcessData",c),l(v,{applyGrouping:c,getGroupPixelWidth:f,setDataGrouping:p}))}}}),i(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{series:{prototype:h}}=l,{addEvent:c,defined:f,error:u,extend:p,isNumber:b,merge:v,pick:x}=a,m=h.generatePoints;function E(I){var _;let A,F,P=this.chart,D=this.options.dataGrouping,C=this.allowDG!==!1&&D&&x(D.enabled,P.options.isStock),d=this.reserveSpace(),g=this.currentDataGrouping,y,M,k=!1;C&&!this.requireSorting&&(this.requireSorting=k=!0);let T=!!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!I)||!C;if(k&&(this.requireSorting=!1),T)return;this.destroyGroupedData();let z=D.groupAll?this.xData:this.processedXData,N=D.groupAll?this.yData:this.processedYData,G=P.plotSizeX,X=this.xAxis,j=X.options.ordinal,B=this.groupPixelWidth;if(B&&z&&z.length&&G){F=!0,this.isDirty=!0,this.points=null;let W=X.getExtremes(),V=W.min,U=W.max,q=j&&X.ordinal&&X.ordinal.getGroupIntervalFactor(V,U,this)||1,H=B*(U-V)/G*q,Y=X.getTimeTicks(r.Additions.prototype.normalizeTimeTickInterval(H,D.units||s.units),Math.min(V,z[0]),Math.max(U,z[z.length-1]),X.options.startOfWeek,z,this.closestPointRange),Z=h.groupData.apply(this,[z,N,Y,D.approximation]),K=Z.groupedXData,J=Z.groupedYData,tt=0;for(D&&D.smoothed&&K.length&&(D.firstAnchor="firstPoint",D.anchor="middle",D.lastAnchor="lastPoint",u(32,!1,P,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),A=1;A<Y.length;A++)Y.info.segmentStarts&&Y.info.segmentStarts.indexOf(A)!==-1||(tt=Math.max(Y[A]-Y[A-1],tt));(y=Y.info).gapSize=tt,this.closestPointRange=Y.info.totalRange,this.groupMap=Z.groupMap,this.currentDataGrouping=y,function($,Q,et){let it=$.options.dataGrouping,st=$.currentDataGrouping&&$.currentDataGrouping.gapSize;if(!(it&&$.xData&&st&&$.groupMap))return;let rt=Q.length-1,nt=it.anchor,ot=it.firstAnchor,at=it.lastAnchor,ct=Q.length-1,ht=0;if(ot&&$.xData[0]>=Q[0]){let lt;ht++;let yt=$.groupMap[0].start,Et=$.groupMap[0].length;b(yt)&&b(Et)&&(lt=yt+(Et-1)),Q[0]={start:Q[0],middle:Q[0]+.5*st,end:Q[0]+st,firstPoint:$.xData[0],lastPoint:lt&&$.xData[lt]}[ot]}if(rt>0&&at&&st&&Q[rt]>=et-st){ct--;let lt=$.groupMap[$.groupMap.length-1].start;Q[rt]={start:Q[rt],middle:Q[rt]+.5*st,end:Q[rt]+st,firstPoint:lt&&$.xData[lt],lastPoint:$.xData[$.xData.length-1]}[at]}if(nt&&nt!=="start"){let lt=st*{middle:.5,end:1}[nt];for(;ct>=ht;)Q[ct]+=lt,ct--}}(this,K,U),d&&(f((_=K)[0])&&b(X.min)&&b(X.dataMin)&&_[0]<X.min&&((!f(X.options.min)&&X.min<=X.dataMin||X.min===X.dataMin)&&(X.min=Math.min(_[0],X.min)),X.dataMin=Math.min(_[0],X.dataMin)),f(_[_.length-1])&&b(X.max)&&b(X.dataMax)&&_[_.length-1]>X.max&&((!f(X.options.max)&&b(X.dataMax)&&X.max>=X.dataMax||X.max===X.dataMax)&&(X.max=Math.max(_[_.length-1],X.max)),X.dataMax=Math.max(_[_.length-1],X.dataMax))),D.groupAll&&(this.allGroupedData=J,K=(M=this.cropData(K,J,X.min,X.max)).xData,J=M.yData,this.cropStart=M.start),this.processedXData=K,this.processedYData=J}else this.groupMap=null,this.currentDataGrouping=void 0;this.hasGroupedData=F,this.preventGraphAnimation=(g&&g.totalRange)!==(y&&y.totalRange)}function L(){this.groupedData&&(this.groupedData.forEach(function(I,_){I&&(this.groupedData[_]=I.destroy?I.destroy():null)},this),this.groupedData.length=0,delete this.allGroupedData)}function S(){m.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function w(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")||this.options.cumulative?"sum":"average"}function R(I,_,A,F){let P=this,D=P.data,C=P.options&&P.options.data,d=[],g=[],y=[],M=I.length,k=!!_,T=[],z=P.pointArrayMap,N=z&&z.length,G=["x"].concat(z||["y"]),X=this.options.dataGrouping&&this.options.dataGrouping.groupAll,j,B,W,V=0,U=0,q=typeof F=="function"?F:F&&e[F]?e[F]:e[P.getDGApproximation&&P.getDGApproximation()||"average"];if(N){let Y=z.length;for(;Y--;)T.push([])}else T.push([]);let H=N||1;for(let Y=0;Y<=M;Y++)if(!(I[Y]<A[0])){for(;A[V+1]!==void 0&&I[Y]>=A[V+1]||Y===M;){j=A[V],P.dataGroupInfo={start:X?U:P.cropStart+U,length:T[0].length,groupStart:j},W=q.apply(P,T),P.pointClass&&!f(P.dataGroupInfo.options)&&(P.dataGroupInfo.options=v(P.pointClass.prototype.optionsToObject.call({series:P},P.options.data[P.cropStart+U])),G.forEach(function(Z){delete P.dataGroupInfo.options[Z]})),W!==void 0&&(d.push(j),g.push(W),y.push(P.dataGroupInfo)),U=Y;for(let Z=0;Z<H;Z++)T[Z].length=0,T[Z].hasNulls=!1;if(V+=1,Y===M)break}if(Y===M)break;if(z){let Z,K=P.options.dataGrouping&&P.options.dataGrouping.groupAll?Y:P.cropStart+Y,J=D&&D[K]||P.pointClass.prototype.applyOptions.apply({series:P},[C[K]]);for(let tt=0;tt<N;tt++)b(Z=J[z[tt]])?T[tt].push(Z):Z===null&&(T[tt].hasNulls=!0)}else b(B=k?_[Y]:null)?T[0].push(B):B===null&&(T[0].hasNulls=!0)}return{groupedXData:d,groupedYData:g,groupMap:y}}function O(I){let _=I.options,A=this.type,F=this.chart.options.plotOptions,P=this.useCommonDataGrouping&&s.common,D=s.seriesSpecific,C=n.defaultOptions.plotOptions[A].dataGrouping;if(F&&(D[A]||P)){let d=this.chart.rangeSelector;C||(C=v(s.common,D[A])),_.dataGrouping=v(P,C,F.series&&F.series.dataGrouping,F[A].dataGrouping,this.userOptions.dataGrouping,!_.isInternal&&d&&b(d.selected)&&d.buttonOptions[d.selected].dataGrouping)}}return{compose:function(I){let _=I.prototype;_.applyGrouping||(c(I.prototype.pointClass,"update",function(){if(this.dataGroup)return u(24,!1,this.series.chart),!1}),c(I,"afterSetOptions",O),c(I,"destroy",L),p(_,{applyGrouping:E,destroyGroupedData:L,generatePoints:S,getDGApproximation:w,groupData:R}))},groupData:R}}),i(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,s,r,n,l,a){let{format:h}=n,{composed:c}=l,{addEvent:f,extend:u,isNumber:p,pick:b,pushUnique:v}=a;function x(m){let E=this.chart,L=E.time,S=m.labelConfig,w=S.series,R=S.point,O=w.options,I=w.tooltipOptions,_=O.dataGrouping,A=w.xAxis,F=I.xDateFormat,P,D,C,d,g,y=I[m.isFooter?"footerFormat":"headerFormat"];if(A&&A.options.type==="datetime"&&_&&p(S.key)){D=w.currentDataGrouping,C=_.dateTimeLabelFormats||s.common.dateTimeLabelFormats,D?(d=C[D.unitName],D.count===1?F=d[0]:(F=d[1],P=d[2])):!F&&C&&A.dateTime&&(F=A.dateTime.getXDateFormat(S.x,I.dateTimeLabelFormats));let M=b(w.groupMap?.[R.index].groupStart,S.key),k=M+D?.totalRange-1;g=L.dateFormat(F,M),P&&(g+=L.dateFormat(P,k)),w.chart.styledMode&&(y=this.styledModeFormat(y)),m.text=h(y,{point:u(S.point,{key:g}),series:w},E),m.preventDefault()}}return{compose:function(m,E,L){e.compose(m),r.compose(E),L&&v(c,"DataGrouping")&&f(L,"headerFormatter",x)},groupData:r.groupData}}),i(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(e,s,r,n){return e.dataGrouping=e.dataGrouping||{},e.dataGrouping.approximationDefaults=e.dataGrouping.approximationDefaults||s,e.dataGrouping.approximations=e.dataGrouping.approximations||r,n.compose(e.Axis,e.Series,e.Tooltip),e}),i(t,"Extensions/Annotations/NavigationBindingsUtilities.js",[t["Core/Utilities.js"]],function(e){let{defined:s,isNumber:r,pick:n}=e,l={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};return{annotationsFieldsTypes:l,getAssignedAxis:function(a){return a.filter(h=>{let c=h.axis.getExtremes(),f=c.min,u=c.max,p=n(h.axis.minPointOffset,0);return r(f)&&r(u)&&h.value>=f-p&&h.value<=u+p&&!h.axis.options.isInternal})[0]},getFieldType:function(a,h){let c=l[a],f=typeof h;return s(c)&&(f=c),{string:"text",number:"number",boolean:"checkbox"}[f]}}}),i(t,"Extensions/MouseWheelZoom/MouseWheelZoom.js",[t["Core/Utilities.js"],t["Extensions/Annotations/NavigationBindingsUtilities.js"]],function(e,s){let r,{addEvent:n,isObject:l,pick:a,defined:h,merge:c}=e,{getAssignedAxis:f}=s,u=[],p={enabled:!0,sensitivity:1.1},b=m=>(l(m)||(m={enabled:m??!0}),c(p,m)),v=function(m,E,L,S,w,R,O){let I=a(O.type,m.zooming.type,""),_=[];I==="x"?_=L:I==="y"?_=S:I==="xy"&&(_=m.axes);let A=m.transform({axes:_,to:{x:w-5,y:R-5,width:10,height:10},from:{x:w-5*E,y:R-5*E,width:10*E,height:10*E},trigger:"mousewheel"});return A&&(h(r)&&clearTimeout(r),r=setTimeout(()=>{m.pointer?.drop()},400)),A};function x(){let m=b(this.zooming.mouseWheel);m.enabled&&n(this.container,"wheel",E=>{E=this.pointer?.normalize(E)||E;let{pointer:L}=this,S=L&&!L.inClass(E.target,"highcharts-no-mousewheel");if(this.isInsidePlot(E.chartX-this.plotLeft,E.chartY-this.plotTop)&&S){let w=m.sensitivity||1.1,R=E.detail||(E.deltaY||0)/120,O=f(L.getCoordinates(E).xAxis),I=f(L.getCoordinates(E).yAxis);v(this,Math.pow(w,R),O?[O.axis]:this.xAxis,I?[I.axis]:this.yAxis,E.chartX,E.chartY,m)&&E.preventDefault?.()}})}return{compose:function(m){u.indexOf(m)===-1&&(u.push(m),n(m,"afterGetContainer",x))}}}),i(t,"masters/modules/mouse-wheel-zoom.src.js",[t["Core/Globals.js"],t["Extensions/MouseWheelZoom/MouseWheelZoom.js"]],function(e,s){return e.MouseWheelZoom=e.MouseWheelZoom||s,e.MouseWheelZoom.compose(e.Chart),e}),i(t,"masters/modules/stock.src.js",[t["Core/Globals.js"],t["Series/DataModifyComposition.js"],t["Stock/Navigator/Navigator.js"],t["Core/Axis/OrdinalAxis.js"],t["Stock/RangeSelector/RangeSelector.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Chart/StockChart.js"],t["Series/OHLC/OHLCSeries.js"],t["Series/Flags/FlagsSeries.js"]],function(e,s,r,n,l,a,h,c,f){return e.Navigator=e.Navigator||r,e.OrdinalAxis=e.OrdinalAxis||n,e.RangeSelector=e.RangeSelector||l,e.Scrollbar=e.Scrollbar||a,e.stockChart=e.stockChart||h.stockChart,e.StockChart=e.StockChart||e.stockChart,e.extend(e.StockChart,h),s.compose(e.Series,e.Axis,e.Point),f.compose(e.Renderer),c.compose(e.Series),e.Navigator.compose(e.Chart,e.Axis,e.Series),e.OrdinalAxis.compose(e.Axis,e.Series,e.Chart),e.RangeSelector.compose(e.Axis,e.Chart),e.Scrollbar.compose(e.Axis),e.StockChart.compose(e.Chart,e.Axis,e.Series,e.SVGRenderer),e})})});var Qu=oi((_A,go)=>{"use strict";(function(o){typeof go=="object"&&go.exports?(o.default=o,go.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/solid-gauge",["highcharts","highcharts/highcharts-more"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function i(e,s,r,n){e.hasOwnProperty(s)||(e[s]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:e[s]}})))}i(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,s){var r,n;let{parse:l}=e,{merge:a}=s;return(n=r||(r={})).initDataClasses=function(h){let c=this.chart,f=this.legendItem=this.legendItem||{},u=this.options,p=h.dataClasses||[],b,v,x=c.options.chart.colorCount,m=0,E;this.dataClasses=v=[],f.labels=[];for(let L=0,S=p.length;L<S;++L)b=a(b=p[L]),v.push(b),(c.styledMode||!b.color)&&(u.dataClassColor==="category"?(c.styledMode||(x=(E=c.options.colors||[]).length,b.color=E[m]),b.colorIndex=m,++m===x&&(m=0)):b.color=l(u.minColor).tweenTo(l(u.maxColor),S<2?.5:L/(S-1)))},n.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let f=0,u=c.length;f<u;++f)c[f].color=l(c[f][1])},n.normalizedValue=function(h){let c=this.max||0,f=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-f||1)},n.toColor=function(h,c){let f,u,p,b,v,x,m=this.dataClasses,E=this.stops;if(m){for(x=m.length;x--;)if(u=(v=m[x]).from,p=v.to,(u===void 0||h>=u)&&(p===void 0||h<=p)){b=v.color,c&&(c.dataClass=x,c.colorIndex=v.colorIndex);break}}else{for(f=this.normalizedValue(h),x=E.length;x--&&!(f>E[x][0]););u=E[x]||E[x+1],f=1-((p=E[x+1]||u)[0]-f)/(p[0]-u[0]||1),b=u.color.tweenTo(p.color,f)}return b},r}),i(t,"Core/Axis/SolidGaugeAxis.js",[t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Utilities.js"]],function(e,s){let{extend:r}=s;return{init:function(n){r(n,e)}}}),i(t,"Series/SolidGauge/SolidGaugeSeriesDefaults.js",[],function(){return{colorByPoint:!0,dataLabels:{y:0}}}),i(t,"Series/SolidGauge/SolidGaugeSeries.js",[t["Extensions/BorderRadius.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/SolidGaugeAxis.js"],t["Series/SolidGauge/SolidGaugeSeriesDefaults.js"],t["Core/Utilities.js"]],function(e,s,r,n,l){let{gauge:a,pie:h}=s.seriesTypes,{clamp:c,extend:f,isNumber:u,merge:p,pick:b,pInt:v}=l;class x extends a{translate(){let E=this.yAxis;r.init(E),!E.dataClasses&&E.options.dataClasses&&E.initDataClasses(E.options),E.initStops(),a.prototype.translate.call(this)}drawPoints(){let E,L=this.yAxis,S=L.center,w=this.options,R=this.chart.renderer,O=w.overshoot,I=w.rounded&&w.borderRadius===void 0,_=u(O)?O/180*Math.PI:0;for(let A of(u(w.threshold)&&(E=L.startAngleRad+L.translate(w.threshold,void 0,void 0,void 0,!0)),this.thresholdAngleRad=b(E,L.startAngleRad),this.points))if(!A.isNull){let F=v(b(A.options.radius,w.radius,100))*S[2]/200,P=v(b(A.options.innerRadius,w.innerRadius,60))*S[2]/200,D=Math.min(L.startAngleRad,L.endAngleRad),C=Math.max(L.startAngleRad,L.endAngleRad),d=A.graphic,g=L.startAngleRad+L.translate(A.y,void 0,void 0,void 0,!0),y,M,k=L.toColor(A.y,A);k==="none"&&(k=A.color||this.color||"none"),k!=="none"&&(A.color=k),g=c(g,D-_,C+_),w.wrap===!1&&(g=c(g,D,C));let T=I?(F-P)/2/F:0,z=Math.min(g,this.thresholdAngleRad)-T,N=Math.max(g,this.thresholdAngleRad)+T;N-z>2*Math.PI&&(N=z+2*Math.PI);let G=I?"50%":0;w.borderRadius&&(G=e.optionsToObject(w.borderRadius).radius),A.shapeArgs=y={x:S[0],y:S[1],r:F,innerR:P,start:z,end:N,borderRadius:G},A.startR=F,d?(M=y.d,d.animate(f({fill:k},y)),M&&(y.d=M)):A.graphic=d=R.arc(y).attr({fill:k,"sweep-flag":0}).add(this.group),this.chart.styledMode||(w.linecap!=="square"&&d.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),d.attr({stroke:w.borderColor||"none","stroke-width":w.borderWidth||0})),d&&d.addClass(A.getClassName(),!0)}}animate(E){E||(this.startAngleRad=this.thresholdAngleRad,h.prototype.animate.call(this,E))}}return x.defaultOptions=p(a.defaultOptions,n),s.registerSeriesType("solidgauge",x),x}),i(t,"masters/modules/solid-gauge.src.js",[t["Core/Globals.js"]],function(e){return e})})});var _o=Jt(Ms());var Yh="Oxygen",Uh="mdx2json.emptyportlet",Hh="DSW.Addons.";var ue=(()=>{let t=class t{constructor(){this.model={},this.el=Qt(Dh),this.cd=Qt(Rh),this.ds=Qt(Nh),this.ss=Qt(Bh),this.bs=Qt(Gh),this.us=Qt(jh),this.i18n=Qt(zh),this.route=Qt(Fh),this.fs=Qt(Wh),this.dbs=Qt(Xh),this.isSpinner=!0,this.drills=[],this.drillFilterWidgets=[],this.customDataSource="",this.preventColFilteringBasedOnDataProperties=!1,this.drillFilter="",this.drillFilterDrills=[],this.customColSpec="",this.customRowSpec="",this.linkedMdx="",this.canDoDrillthrough=!1,this.firstRun=!0,this.baseType="",this.hasDatasourceChooser=!1,this.oneItemDrillApplied=!1}get inline(){return this.widget.inline}ngOnInit(){this.baseType=this.widget?.type,this.override=this.getOverride(),this.extendPropsWithOverrides(),this.loadWidgetSettings(),this.initializeDrills(),this.initializeTile(),this.initializeActionAndPvItems(),this.initializeDataSourceChooser(),this.initializeDrillthrough(),this.initializeLiveDataUpdate(),this.subscribe(),this.initializeLinkedWidgets(),this.initializeDependants(),this.initializeDrillFilter(),this.initializeChoseDataSource(),this.initializeInputControls(),this.initializeActions(),this.requestPivotData(),this.initializeDataRequest()}ngOnDestroy(){clearInterval(this.liveUpdateInterval),this.subDrilldown?.unsubscribe(),this.subDrillthrough?.unsubscribe(),this.subLinkedMdx?.unsubscribe(),this.subRefreshDependants?.unsubscribe(),this.subDrillFilter?.unsubscribe(),this.subDrillFilterAll?.unsubscribe(),this.subPivotVar?.unsubscribe(),this.subPivotVarAll?.unsubscribe(),this.subDataSourceChange?.unsubscribe(),this.subColSpec?.unsubscribe(),this.subColSpecAll?.unsubscribe(),this.subChartType?.unsubscribe()}getDataProp(e){if(this.widget.dataProperties)return this.widget.dataProperties.find(s=>s.name===e)}getDataPropByDataValue(e){if(!this.widget.dataProperties||!e)return;let s=e.split("/");return this.widget.dataProperties.find(r=>{let n=r.dataValue?.toString().split("/");return s.some(l=>n.includes(l))})}getDataPropValue(e){let s=this.getDataProp(e);if(s&&s.dataValue!==null&&s.dataValue!==void 0)return s.dataValue.toString()}initializeActions(){if(!this.widget.controls||this.widget.controls.length===0)return;let e=["chooserowspec","setrowspec","choosedatasource","choosecharttype","applyfilter","setfilter","refresh","reloaddashboard","showlisting","showgeolisting","showbreakdown","setdatasource","applyvariable","setrowcount","setrowsort","setcolumncount","setcolumnsort","choosecolumnspec"],s=this.widget.controls.filter(r=>e.indexOf(r.action.toLowerCase())===-1&&r.type!=="hidden");s.length!==0&&(this.widget.acItems=s)}initializeChoseDataSource(){return Ft(this,null,function*(){if(!this.widget)return;let e=n=>n.action==="chooseDataSource"||n.action==="chooseRowSpec"||n.action==="setRowSpec"||n.action==="chooseColumnSpec",s=this.widget.type===Uh;if(!s&&(!this.widget.controls||this.widget.controls.length===0))return;let r=[];if(this.widget.controls&&(r=this.widget.controls.filter(e).filter(n=>n.location!=="dashboard")),s){let n=this.dbs.getWidgets();for(let l=0;l<n.length;l++)n[l].controls&&(r=r.concat(n[l].controls.filter(e).filter(a=>a.location==="dashboard")))}if(r.length!==0){this.hasDatasourceChooser=!0,this.widget.dsItems=[];for(let n=0;n<r.length;n++){let l=r[n].valueList,a=r[n].displayList,h={},c=r[n].targetProperty;if(c)c.toLowerCase().slice(-9)===".termlist"&&(c=c.slice(0,-9)),c.toLowerCase().slice(-5)===".term"&&(c=c.slice(0,-5));else{if(!l||!a)continue;{h={};let p=l.split(",");a.split(",").forEach((b,v)=>{h[b]=p[v]})}}let f={action:r[n].action,label:r[n].label||this.i18n.get("dataSource"),dsSelected:r[n].value,control:r[n],labels:[],values:[],field:"select"};this.widget.dsItems.push(f);let u=null;if(c?u=yield this.ds.getTermList(c):u=h,u&&typeof u=="object"){for(let b in u)u[b]===this.widget.dataSource&&(this.widget.dsSelected=b);f.labels=[],f.values=[],(f.control?.action==="chooseRowSpec"||f.control?.action==="setRowSpec")&&(f.labels.push(""),f.values.push(""));for(let b in u)f.labels.push(b),f.values.push(u[b]);let p=-1;this.customDataSource?p=f.values.findIndex(b=>b===this.customDataSource):p=f.values.findIndex(b=>b.split("/").pop()===f.dsSelected),p===-1?f.dsSelected=f.labels[0]:f.dsSelected=f.labels[p],this.parent?.filters.detectChanges()}}}})}onVariableChange(e){let s=e.target;this.bs.broadcast(`updatePivotVar:${s}`)}onPivotVarChanged(){this.requestData()}getColumnIndexByName(e,s){return e.Cols[0].tuples.findIndex(r=>r.caption.toLowerCase()===s.toLowerCase())}getDataByColumnName(e,s,r,n=""){if(!e||!e.Data||!e.Cols||!e.Cols[0]||!e.Cols[0].tuples)return;let l=e.Cols[0].tuples.filter(f=>f.caption.toLowerCase()===s.toLowerCase());if(l.length===0)return;let a=e.Cols[0].tuples.indexOf(l[0]),h=e.Cols[0].tuples[a].originalIndex;h!==void 0&&(a=h);let c=e.Data[r+a];return n&&(c=this.formatNumber(c,n)),c}initializeDrillFilter(){let e=this.fs.getClickFilterTarget(this.widget.name);e?.length&&(this.drillFilterWidgets=e)}resetClickFilter(){if(this.widget.clickFilterActive=!1,!(!this.drillFilterWidgets||!this.drillFilterWidgets.length))for(let e=0;e<this.drillFilterWidgets.length;e++){if(!this.drillFilterWidgets[e])continue;this.drillFilterWidgets[e].split(",").forEach(r=>{this.bs.broadcast("drillFilter:"+r,{path:"",drills:[]})})}}doDrillFilter(e,s=[]){if(!this.drillFilterWidgets||!this.drillFilterWidgets.length)return;let r=s.slice();e||r.pop(),this.widget.clickFilterActive=!!e;for(let n=0;n<this.drillFilterWidgets.length;n++){if(!this.drillFilterWidgets[n])continue;this.drillFilterWidgets[n].split(",").forEach(a=>{this.bs.broadcast("drillFilter:"+a,{path:e,drills:r})})}this.parent?.header?.cd.detectChanges()}onDrillFilter(e,s){this.drillFilter=e,this.drillFilterDrills=s,this.requestData()}actionNavigate(e,s=!1){let r=e.targetProperty,n=r.toUpperCase().indexOf("DASHBOARD=");if(n!==-1){let l=r.substring(n+10,r.length);l.indexOf("?")===-1&&(l=l.replace("&","?"));let a=location.href;a.indexOf("#")!==-1?r=a.split("#")[0]+"#/"+Ss+"/"+l:r+="#/"+Ss+"/"+l}if(r=r.replace("$$$FILTERS",this.fs.getFiltersUrlString(this.widget.name)),this.lpt&&this.lpt.getSelectedRows().length){let l=this.lpt.dataController.getData(),a=l.dataArray[(this.lpt.getSelectedRows()[0]-1)*l.columnProps.length],h=r.toLowerCase().indexOf("$$$currvalue");h!==-1&&(r=r.substring(0,h)+a+r.substring(h+12,r.length))}if(this.lpt&&this.lpt.getSelectedRows().length){let l=this.lpt.dataController.getData(),a=this.lpt.getSelectedRows(),h=[];for(let f=0;f<a.length;f++){let u=l.dataArray[(a[f]-1)*l.columnProps.length];h.push(u)}let c=r.toLowerCase().indexOf("$$$valuelist");c!==-1&&(r=r.substring(0,c)+h.join(",")+r.substring(c+12,r.length))}s?window.open(r,"_blank"):window.location.href=r}performAction(e){let s=e.action.toLowerCase();s==="viewdashboard"?this.navigateDashboard(e.targetProperty):s==="navigate"?this.actionNavigate(e):s==="newwindow"?this.actionNavigate(e,!0):s==="setColumnSpec"?(this.customColSpec=e.targetProperty,this.requestData()):this.ds.execAction(e.action,this.widget.cube?this.widget.cube:this.widget.dataSource.replace(".kpi","")).then(()=>this.requestData())}getDrillTitle(e){if(!e)return this.widget.baseTitle||"";let s=e.path.split(".");return s.pop(),(this.widget.baseTitle?this.widget.baseTitle+" - ":"")+(e.name?s[s.length-1]+" - ":"")+(e.name||e.category)}isEmptyData(e){return!e||!e.Cols||!e.Cols[1]||!e.Cols[1]||!e.Cols[1].tuples||e.Cols[1].tuples.length===0||!e.Data||e.Data.length===0||e.Data[0]==="@NOPROPERTY"}doDrillUp(){this.widget.isDrillthrough?(this.restoreWidgetType(),this.widget.isDrillthrough=!1,this.widget.backButton=!!this.drills?.length,this.parent.header?.cd.detectChanges()):this.doDrillOnly()}restoreWidgetType(){delete this.widget.pivotMdx,delete this.widget.pivotData,this.widget?.oldType&&(this.widget.type=this.widget.oldType,this.parent?.updateComponent())}changeWidgetType(e){this.widget.oldType=this.widget.type,this.widget.type=e,this.parent?.updateComponent()}getDrillthroughMdx(e){let s=e.toLowerCase(),r="select non empty",n=s.lastIndexOf(r);n===-1&&(r="select",n=s.lastIndexOf(r));let l=s.lastIndexOf("from");if(n===-1){console.warn("Can't find 'select' in MDX during calculation drillthrough mdx");return}if(l===-1){console.warn("Can't find 'from' in MDX during calculation drillthrough mdx");return}let a="";if(this.pivotData?.listingRows){let c=parseInt(this.pivotData.listingRows,10);c&&(a=` MAXROWS ${c} `)}let h=this.widget.controls.find(c=>c.action==="showListing");if(h){let c=h.targetPropertyDisplay;if(c)return"DRILLTHROUGH "+a+e.substring(0,n+r.length)+" "+e.substring(l,e.length)+` %LISTING [${c}]`}return"DRILLTHROUGH "+a+e.substring(0,n+r.length)+" "+e.substring(l,e.length)}doDrill(e,s,r,n,l=!1,a,h){return new Promise((c,f)=>{this.clearError(),l||this.doDrillFilter(e,this.drills);let u=this.drills.slice();e?this.drills.push({path:e,name:s||"",category:r}):this.drills.pop();let p=this.getMDX();this.drills=u,this.showLoading();let b=()=>{if(n){n();return}if(!this.canDoDrillthrough)return;let v=this.getDrillthroughMdx(p)||"";this.ds.execMDX(v).then(x=>{!x||!x.children||x.children.length===0||(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.pivotData=x,this._currentData=x,this.displayAsPivot(v))}).catch(x=>{h&&h(x)})};this.showLoading(),this.ds.execMDX(p).catch(v=>{l?h&&h(v):b()}).then(v=>{if(v){if(this.chartConfig&&(this.chartConfig.loading=!1),this.isEmptyData(v)&&e){b();return}this.isEmptyData(v)||(e?this.drills.push({path:e,name:s||"",category:r}):this.drills.pop(),this.widget.backButton=this.drills.length!==0,this.widget.title=this.getDrillTitle(this.drills[this.drills.length-1]),this.broadcastDependents(p),this.retrieveData(v),this.updateLocationDrillParameters(),this.parent?.header?.cd.detectChanges(),this._currentData=v,a&&a())}}).finally(()=>{this.hideLoading(),c()})})}doDrillthrough(e,s,r,n,l=!1,a,h){return new Promise((c,f)=>{if(!this.canDoDrillthrough){c();return}if(this.clearError(),this.widget.kpitype&&s){this.doKPIDrillthrough(s);return}let u=this.drills.slice();e?Array.isArray(e)?e.forEach(v=>{this.drills.push({path:v,name:s||"",category:r})}):this.drills.push({path:e,name:s||"",category:r}):this.drills.pop();let p=this.getMDX();this.drills=u,this.showLoading();let b=this.getDrillthroughMdx(p)||"";this.ds.execMDX(b).then(v=>{!v||!v.children||v.children.length===0||(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.pivotData=v,this.displayAsPivot(b))}).catch(v=>{h&&h(v)}).finally(()=>{this.hideLoading()})})}doDrillOnly(e,s,r,n,l=!1,a,h){return new Promise((c,f)=>{this.clearError();let u=this.drills.slice();e?this.drills.push({path:e,name:s||"",category:r}):this.drills.pop();let p=this.getMDX();this.drills=u,this.showLoading(),this.ds.execMDX(p).catch(b=>{h&&h(b)}).then(b=>{b&&(this.chartConfig&&(this.chartConfig.loading=!1),!this.isEmptyData(b)&&(this._currentData=b,e?this.drills.push({path:e,name:s||"",category:r}):this.drills.pop(),this.widget.backButton=this.drills.length!==0,this.widget.title=this.getDrillTitle(this.drills[this.drills.length-1]),this.broadcastDependents(p),this.retrieveData(b),this.updateLocationDrillParameters(),this.parent?.header?.cd.detectChanges(),a&&a()))}).finally(()=>{this.hideLoading(),c()})})}checkForAutoDrill(e){return Ft(this,null,function*(){let s=!1;return e?.Cols[1]?.tuples?.length===1&&(this.oneItemDrillApplied=!0,yield this.doDrill(e.Cols[1].tuples[0].path,e.Cols[1].tuples[0].caption,void 0,void 0,!0,()=>{this.widget.backButton=!1,this.parent?.header?.cd.detectChanges(),s=!0},()=>{this.oneItemDrillApplied=!1})),s})}showLoading(){this.isSpinner||(this.isSpinner=!0,this.parent.cd.detectChanges(),this.cd.detectChanges())}hideLoading(){this.isSpinner&&(this.isSpinner=!1,this.parent.cd.detectChanges(),this.cd.detectChanges())}applyDrill(e){let s=this.route.snapshot.queryParamMap.get("filter");s&&(e=e+" %FILTER "+s);let r=this.drills;if(r.length===0&&(r=this.drillFilterDrills),r.length===0)return e;let n=[];this.pivotData&&this.pivotData.rowAxisOptions&&this.pivotData.rowAxisOptions.drilldownSpec&&(n=this.pivotData.rowAxisOptions.drilldownSpec.split("^"));for(let f=0;f<r.length;f++)r[f].path&&(e+=" %FILTER "+r[f].path);let l=n[r.length-1],a=l||r[r.length-1].path,h=e.match(/ON 0,(.*)ON 1/),c="";if(h&&h.length===2){let f=h[1],u=f.match(/ORDER\((.*?)\,/);if(u&&u[0]&&(c=u[0]),c)e=e.replace(c,"ORDER("+a+".children,");else{let p=f.indexOf("NON EMPTY")!==-1;e=e.replace(f,(p?"NON EMPTY ":" ")+a+" ")}}if((!l&&n.length!==0||n.length===0)&&!e.match(/\{.*\} ON 1/)){if(e.indexOf(".Members ON 1 FROM")===-1)c||(e=e.replace(" ON 1 FROM"," .children ON 1 FROM"));else{let u=e.indexOf("["),p=".Members ON 1 FROM",b=e.indexOf(p);e=e.substr(0,u)+a+".children ON 1 FROM"+e.substr(b+p.length)}return e}return this.drillFilter&&(e=e+" %FILTER "+this.drillFilter),e}changeDataSource(e,s){if(s&&s?.control?.target!==""){let r=s?.control?.target.split(",")??[];for(let n=0;n<r.length;n++)this.bs.broadcast("changeDataSource:"+r[n],e);return}e?this.customDataSource=e:this.customDataSource="",this.requestPivotData(),this.updateDatasourceParameterInURL()}onColSpecChanged(e){this.customColSpec=e,this.requestData()}changeRowSpec(e,s=!0){e?this.customRowSpec=e:this.customRowSpec="",s&&this.requestData()}changeColumnSpec(e,s){let r="";e&&(r=e.replace(/\\/g,""));let n=s.control?.target;this.bs.broadcast("setColSpec:"+n,r)}onDataSourceChange(e){let s="",r=e.dsSelected;if(r){let n=e.labels?.indexOf(r.toString())??-1;n!==-1&&(s=e?.values?.[n]||"")}switch(e.action){case"chooseDataSource":this.changeDataSource(s,e);break;case"chooseRowSpec":case"setRowSpec":this.changeRowSpec(s,e.action!=="setRowSpec");break;case"chooseColumnSpec":this.changeColumnSpec(s,e);break}}onRefreshDependents(){this.broadcastDependents()}onSetLinkedMdx(e){this.widget.linkedMdx=e,this.linkedMdx=e,this.requestData()}isLinked(){return!!this.widget?.dataLink}hasDependents(){return!!this.widget?.dependents?.length}requestPivotData(){let e=this.customDataSource||this.widget.dataSource;this.widget.kpitype||e&&this.ds.getPivotData(e).then(s=>this._retriveDataSource(s)).catch(s=>{this.showError(s.error?.Error||s.message)})}convertKPIToMDXData(e,s=!1){let r=e,n=e.Result,l={Info:{cubeName:r.Info.KpiName},Cols:[],Data:[]},a=[];for(let c=0;c<n.Properties.length;c++)a.push({caption:n.Properties[c].caption||n.Properties[c].name,dimension:n.Properties[c].name});l.Cols.push({tuples:a});let h=[];for(let c=0;c<n.Series.length;c++){for(let u=0;u<n.Properties.length;u++)l.Data.push(n.Series[c][n.Properties[u].name]);let f=n.Series[c]["%series"]||n.Series[c].seriesName;h.push({title:f,caption:f})}return l.Cols.push({tuples:h}),s||this.removeColsThatNotExistInDataProperties(l),l}retrieveData(e){if(this.hideLoading(),e.Error){this.showError(e.Error);return}}_retriveKPI(e,s=!1){if(this){if(this._kpiData=e,this.lpt){this.lpt.dataController.setData(this.lpt.dataSource._convert(this.convertKPIToMDXData(e,s)));return}this.retrieveData(this.convertKPIToMDXData(e,s))}}_retriveDataSource(e){this&&(this.pivotData=e,this.customDataSource&&(this.widget.mdx=e.mdx,this.requestData()))}onResize(){}requestData(){if(!this.widget.isSupported)return;if(this.oneItemDrillApplied&&(this.drills=[],this.oneItemDrillApplied=!1,this.widget.backButton=!1,this.widget.title=this.getDrillTitle(),this.parent?.header?.cd.detectChanges()),this.widget.kpitype){this._requestKPIData();return}let e=this.getMDX();if(!e){this.isSpinner=!1;return}this.clearError(),setTimeout(()=>this.broadcastDependents(),0),e.indexOf("$")!==-1&&!this.pivotVariables&&this.ds.getPivotVariables(this.widget.cube).then(s=>{this.pivotVariables=s}).catch(s=>{this.showError(s.message)}),this.showLoading(),this.ds.execMDX(e).then(s=>{this.removeColsThatNotExistInDataProperties(s),this._currentData=s,this.retrieveData(s)}).catch(s=>this._onRequestError(s)).finally(()=>{this.hideLoading()})}broadcastDependents(e){if(this.hasDependents())for(let s=0;s<this.widget.dependents.length;s++)this.bs.broadcast("setLinkedMDX:"+this.widget.dependents[s],e||this.getMDX())}_onRequestError(e,s){this.chartConfig&&(this.chartConfig.loading=!1);let r=this.i18n.get("errWidgetRequest");switch(s){case 401:case 403:r=this.i18n.get("errUnauth");break;case 404:r=this.i18n.get("errNotFound");break}this.showError(r)}clearError(){this.parent&&this.parent.clearError()}showError(e){this.parent&&this.parent.showError(e)}checkColSpec(e){if(this.customColSpec){let s="SELECT NON EMPTY",r=e.lastIndexOf(s);if(r===-1&&(s="SELECT",r=e.lastIndexOf(s)),r===-1)return e;let n=e.lastIndexOf("ON 0");return n===-1||n<r||(e=e.replace(e.substring(r,n),s+" "+this.customColSpec+" ")),e}return e}replaceMDXVariables(e,s){if(e.indexOf("$")===-1)return e;let r=s.filter(n=>n.action==="applyVariable");if(this.widget.shared){let n=this.route.snapshot.queryParamMap.get("variables");n&&n.split("~").forEach(a=>{let h=a.split("."),c=h[0],f=h[1],u=r.findIndex(p=>p.targetProperty==="$variable."+c);u!==-1?r[u].value=f:r.push({targetProperty:"$variable."+c,value:f})})}if(!r.length)return e;for(let n=0;n<r.length;n++){let l=r[n];if(l.value==="")continue;let a=l.targetProperty.toLowerCase(),h;for(;(h=e.toLowerCase().indexOf(a))!==-1;)e=e.substr(0,h)+l.value+e.substr(h+a.length,e.length)}return e}addQueryFilters(e){let s=this.route.snapshot.queryParamMap.get("SETTINGS");if(!s)return e;let r=s.split(";"),n="",l="";for(let a=0;a<r.length;a++){let h=r[a].split(":");if(h[0].toLowerCase()==="target"){n=h[1];continue}h[0].toLowerCase()==="filter"&&(l=h.slice(1).join(":"))}if(n&&(this.widget.name===n||n==="*"||n.split(",").indexOf(this.widget.name)!==-1)&&l){let a=l.split("~");for(let h=0;h<a.length;h++){let c=a[h],f=c.indexOf("%NOT")!==-1;if(c.indexOf("{")!==-1){let u=c.substring(0,c.indexOf("{")).replace("%NOT ",""),p=c.match(/\{([^)]+)\}/)?.[1].split(",");e+=" %FILTER %OR({",e+=p?.map(b=>u+b+(f?".%NOT":"")).join(",")||"",e+="})"}else e+=" %FILTER "+c}}return e}dateToHorolog(e){let s=new Date("12/31/1840Z"),n=this.us.toDate(e).getTime()-s.getTime();return Math.ceil(n/(1e3*3600*24)).toString()}getMDX(){let e=!1;if(this.widget.kpitype)return"";let s=this.fs.getWidgetFilters(this.widget.name);if(this.isLinked()){let l=this.replaceMDXVariables(this.linkedMdx||this.widget.linkedMdx||"",s);return l=this.checkColSpec(l),this.applyDrill(l)}if(this.drillFilter){let l=this.drillFilter.indexOf("&");l!==-1&&s.push({targetProperty:this.drillFilter.substring(0,l-1),value:"&"+this.drillFilter.substring(l+1,this.drillFilter.length)})}for(let l=0;l<s.length;l++){let a=s[l];if(a.value!==""||a.isInterval){e=!0;break}}let r=this.replaceMDXVariables(this.widget.mdx,s);if(!r)return this.widget.edKey||this.showError("Widget without MDX"),"";if(this.customRowSpec){let l=r.indexOf("ON 0"),a=r.indexOf("ON 1");l!==-1&&(r=r.slice(0,l)+"ON 0, NON EMPTY "+this.customRowSpec+" ON 1 "+r.slice(a+4))}if(r=this.applyRowCount(r),r=this.checkColSpec(r),r=this.addQueryFilters(r),!e||this.widget.tile)return this.applyDrill(r);let n="";for(let l=0;l<s.length;l++){let a=s[l];if(!a.isInterval)continue;let h=a.targetProperty,c=a.values[a.fromIdx].path,f=a.values[a.toIdx].path;a.isDate&&(c=this.dateToHorolog(c.replace("&[","").replace("]","")),f=this.dateToHorolog(f.replace("&[","").replace("]","")),c=`&[${c}]`,f=`&[${f}]`),r+=" %FILTER %OR("+h+"."+c+":"+f+")"}for(let l=0;l<s.length;l++){let a=s[l];if(a.action!=="applyVariable"&&a.value!==""&&!a.isInterval){let h="{";a.isExclude&&(h="(");let c=a.value.toString().split("|"),f=a.targetProperty;a.isExclude?r+=" %FILTER "+h:r+=" %FILTER %OR("+h;for(let u=0;u<c.length;u++){let p=c[u];a.isDate&&(p=this.dateToHorolog(p.replace("&[","").replace("]","")),p=`&[${p}]`),a.isExclude?r+=f+"."+p+".%NOT,":r+=f+"."+p+","}h="}",a.isExclude&&(h=")"),r=r.substr(0,r.length-1)+" "+h,a.isExclude||(r+=")")}}if(n){let l=r.toUpperCase(),a=l.indexOf("WHERE");a===-1?(a=l.indexOf("%FILTER"),a===-1?r+=" WHERE "+n:r=r.slice(0,a)+" WHERE "+n+" "+r.slice(a)):r=r.slice(0,a)+" "+n+" AND "+r.slice(a)}return this.applyDrill(r)}onHeaderButton(e){e.name==="expand"&&(this.widget.isExpanded=e.state,this.widget.dragEnabled=this.widget.isExpanded,setTimeout(()=>{this.onResize()},0))}displayAsPivot(e){this.widget.type==="pivot"?(this.widget.isDrillthrough=!1,this.restoreWidgetType()):(this.widget.pivotMdx=e||this.getMDX(),this.changeWidgetType("pivot")),this.parent?.cd&&this.parent.cd.detectChanges()}formatNumber(e,s=""){let r="";if(e==null&&(e=""),s?r=(0,_o.default)(e).format(s.replace(/;/g,""))||"":r=e.toString(),this.dataInfo){let n=this.dataInfo.numericGroupSeparator,l=this.dataInfo.numericGroupSize||3;if(n){let a=r.split(".");a[0]=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),r=a.join(".")}this.dataInfo.decimalSeparator&&(r=r.replace(/\./g,this.dataInfo.decimalSeparator))}return r}getDrillsAsParameter(){let e=this.drills;return e?.length?encodeURIComponent(e.map(s=>s.path).join("~")):""}getFormat(e,s,r){let n="";return this.widget?.format&&(n=this.widget.format),s.Cols[0].tuples[e].format&&(n=s.Cols[0].tuples[e].format),r?.format&&(n=r?.format),n}getDataValue(e,s,r){let n=s.Data[e],l=this.getFormat(e,s,r);return l&&(n=(0,_o.default)(n).format(l)),n}_requestKPIData(e,s=!1){let r=this.customDataSource||this.widget.dataSource;if(!r)return;let n=this.fs.getWidgetFilters(this.widget.name)?.filter(a=>!!a.value).map(a=>a.value.toString().split("|").map(c=>({name:a.targetProperty,value:c,exclude:!!a.isExclude}))).flat();e&&n.push(...e);let l=!!e||s;return this.showLoading(),this.ds.getKPIData(r,n,l).then(a=>this._retriveKPI(a,l)).finally(()=>{this.hideLoading()})}removeColsThatNotExistInDataProperties(e){if(this.widget.type==="map"||this.preventColFilteringBasedOnDataProperties||!this.widget.dataProperties?.length||!e?.Cols[0]?.tuples?.length)return;let s=[],r=e.Cols[0]?.tuples?.length||0;r&&(e.Cols[0].tuples=e?.Cols[0]?.tuples.filter((n,l)=>{let a=n.dimension.toString().split("/"),h=this.widget.dataProperties.some(c=>c.dataValue.toString().split("/").some(u=>a.includes(u)));return h||s.push(l),h}),e.Data=e.Data?.filter((n,l)=>!s.some(a=>l%r===a)))}subscribe(){this.subDrillFilter=this.bs.subscribe("drillFilter:"+this.widget.name,({path:e,drills:s})=>{this.onDrillFilter(e,s)}),this.subDrillFilterAll=this.bs.subscribe("drillFilter:*",({path:e,drills:s})=>{this.onDrillFilter(e,s)}),this.subDrilldown=this.bs.subscribe("drilldown:"+this.widget.name,({path:e,title:s})=>{this.doDrillOnly(e,s,s)}),this.subDrillthrough=this.bs.subscribe("drillthrough:"+this.widget.name,({path:e,title:s})=>{this.doDrillthrough(e,s,s)}),this.subPivotVar=this.bs.subscribe("updatePivotVar:"+this.widget.name,e=>this.onPivotVarChanged()),this.subPivotVarAll=this.bs.subscribe("updatePivotVar:*",e=>this.onPivotVarChanged()),this.subColSpec=this.bs.subscribe("setColSpec:"+this.widget.name,e=>this.onColSpecChanged(e)),this.subColSpecAll=this.bs.subscribe("setColSpec:*",e=>this.onColSpecChanged(e)),this.subDataSourceChange=this.bs.subscribe("changeDataSource:"+this.widget.name,e=>this.changeDataSource(e)),this.subChartType=this.bs.subscribe("setWidgetType:"+this.widget.name,e=>{this.changeWidgetType(e)})}getOverride(){let e=this.baseType;return e==="lineChartMarkers"&&(e="lineChart"),e==="regular"&&(e="scoreCard"),this.widget?.overrides?.find(s=>s._type===e)}updateLocationDrillParameters(){if(!this.widget?.shared)return;let e=location.hash,s=this.getDrillsAsParameter();this.ds.router.navigate([],{relativeTo:this.route,queryParams:{drilldown:s},queryParamsHandling:"merge"});let r={type:"drill",index:this.route.snapshot.queryParamMap.get("widget"),widget:this.widget,drills:this.drills};window.parent&&window.parent.postMessage(r,"*");try{window.parent.dsw?.onDrill&&window.parent.dsw.onDrill(r)}catch(n){console.error(n)}}updateDatasourceParameterInURL(){if(!this.widget?.shared)return;this.ds.router.navigate([],{relativeTo:this.route,queryParams:{datasource:this.customDataSource},queryParamsHandling:"merge"});let e={type:"datasource",index:this.route.snapshot.queryParamMap.get("widget"),widget:this.widget,datasource:this.customDataSource};window.parent&&window.parent.postMessage(e,"*");try{window.parent.dsw?.onDataSource&&window.parent.dsw.onDataSource(e)}catch(s){console.error(s)}}navigateDashboard(e){this.ds.router.navigateByUrl(Ss+"/"+e)}initializeInputControls(){let e="setRowCount";this.widget.controls.filter(r=>e.includes(r.action)).forEach(r=>{this.widget.dsItems.push({action:r.action,label:r.label||"Row count",field:"input",type:"number",_value:r.value||void 0})})}applyRowCount(e){let s=this.widget.dsItems.find(h=>h.action==="setRowCount");if(!s||!s._value)return e;let r=/(HEAD\(.*),(.*)(\))/i;if(e.match(r))return e.replace(r,`$1,${s._value}$3`);let l=e.match(/ON 0,(.*)ON 1/)?.[1];if(!l)return e;l=l.replace("NON EMPTY","");let a=" HEAD("+l.trim()+`, ${s._value}) `;return e.replace(l,a)}extendPropsWithOverrides(){this.override&&this.override.columns?.forEach((e,s)=>{let r=this.widget.dataProperties[s];r&&(e.showAs&&(r.showAs=e.showAs),e.format&&(r.format=e.format),e.display&&(r.display=e.display),e.label&&(r.label=e.label),e.summary&&(r.summary=e.summary),e.rangeLower&&(r.rangeLower=e.rangeLower),e.rangeUpper&&(r.rangeUpper=e.rangeUpper),e.targetValue&&(r.targetValue=e.targetValue),e.thresholdLower&&(r.thresholdLower=e.thresholdLower),e.thresholdUpper&&(r.thresholdUpper=e.thresholdUpper))})}initializeDataSourceChooser(){this.widget.dsItems=[],this.widget.dsLabel="",this.widget.dsSelected="",this.widget&&this.widget.dataSource&&(this.widget.dsSelected=this.us.removeExt(this.widget.dataSource.split("/").pop()))}initializeLiveDataUpdate(){if(!(this.widget&&this.widget.controls))return;let e=this.widget.controls.filter(r=>r.action==="setColumnSpec");e.length!==0&&(this.customColSpec=e[0].targetProperty);let s=this.widget.controls.filter(r=>r.action==="refresh"&&parseInt(r.timeout,10)>0);s.length!==0&&(this.liveUpdateInterval=setInterval(()=>this.requestData(),parseInt(s[0].timeout,10)*1e3))}initializeLinkedWidgets(){if(this.isLinked())if(this.widget.shared||this.widget.inline||this.widget.edKey){let s=this.dbs.getAllWidgets().find(r=>r.name===this.widget.dataLink);s&&(this.linkedMdx=s.mdx)}else this.subLinkedMdx=this.bs.subscribe("setLinkedMDX:"+this.widget.name,e=>this.onSetLinkedMdx(e))}loadWidgetSettings(){let e=this.ss.getAppSettings(),s=e.theme||"";this.widgetsSettings=this.ss.getWidgetsSettings(this.widget.dashboard)||{},this.tc=e?.themeColors?.[s];let r=this.widgetsSettings?.[this.widget.name]?.themeColors?.[s];r&&(this.tc=r)}initializeDrills(){this.widget?.drills&&(this.drills=this.widget.drills)}initializeTile(){this.tile&&(this.widget={},this.us.mergeRecursive(this.widget,this.tile))}initializeActionAndPvItems(){this.widget.acItems=[],this.widget.pvItems=[]}initializeDrillthrough(){this.widget.controls&&this.widget.controls.length&&(this.canDoDrillthrough=!0)}initializeDependants(){this.hasDependents()&&(this.subRefreshDependants=this.bs.subscribe("widget:"+this.widget.name+":refreshDependents",e=>this.onRefreshDependents()))}initializeDataRequest(){this.widget.initialData||(this.widget?.properties?.chartToggle==="table"&&this.widget.type!=="pivot"&&!this.widget.oldType?this.requestData():this.customDataSource||this.requestData())}doKPIDrillthrough(e){if(!this._kpiData)return;let s=this._kpiData.Result.Series.find(a=>a.seriesName===e);if(!s)return;let r=this._kpiData.Result.Properties.map(a=>({name:a.name,value:s[a.name],path:""})),n=this._kpiData.Result.Properties.map(a=>({name:a.name,value:s.seriesName,path:""})),l=this._requestKPIData([...r,...n]);l&&l.then(a=>{this._kpiData&&(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.initialData=this.convertKPIToMDXData(this._kpiData,!0),this.changeWidgetType("pivot"),setTimeout(()=>{delete this.widget.initialData}))})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=bt({type:t,selectors:[["ng-component"]],hostVars:2,hostBindings:function(s,r){s&2&&Ze("inline",r.inline)},inputs:{model:"model",parent:"parent",widget:"widget"},standalone:!0,features:[vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var Mp=["images"];function Ep(o,t){if(o&1){let i=Ih();Dt(0,"div",2),kh("click",function(){let s=Eh(i).$implicit,r=Bt();return Ph(r.onClick(s))}),Th(),Dt(1,"svg",3,0)(3,"text"),re(4),Dt(5,"tspan",4),re(6),It(),Dt(7,"tspan",5),re(8),It()()(),Ah(),Dt(9,"label"),re(10),It()()}if(o&2){let i=t.$implicit,e=Bt();Ze("clickable",e.canDrillthrough),Lt(3),Oe("fill",i.valueColor),Lt(),ws("",i.value," "),Lt(2),Fe(i.deltaNeg),Lt(2),Fe(i.delta),Lt(2),Fe(i.label)}}var Zh=(()=>{let t=class t extends ue{constructor(){super(...arguments),this.images=[],this.widget={},this.textData=[]}get flexDirection(){let e=this.el?.nativeElement;if(e)return e.offsetWidth>e.offsetHeight?"row":"column"}get canDrillthrough(){return this.canDoDrillthrough}ngOnInit(){this.textData=[],super.ngOnInit()}ngAfterViewInit(){}findDataPropByName(e){if(this.widget.dataProperties){for(let s=0;s<this.widget.dataProperties.length;s++)if(this.widget.dataProperties[s].dataValue===e)return this.widget.dataProperties[s]}}adjustSize(){this.images.forEach(e=>{let s=e.nativeElement,n=s.firstChild.getBBox();s.setAttribute("viewBox",[n.x,n.y,n.width,n.height].join(" "))})}retrieveData(e){if(this.textData=[],this.hideLoading(),e)for(let s=0;s<e.Cols[0].tuples.length;s++){let r=null;if(this.widget.dataProperties&&(r=this.getDataPropByDataValue(e.Cols[0].tuples[s].dimension)??null),!r)continue;let n=this.getDataValue(s,e,r),l="var(--cl-text-widget-font)";if(this.widget.tile){let c=document.querySelector("."+de.const.fontColors[this.widget.tile.fontColor]);c&&(l=window.getComputedStyle(c).getPropertyValue("color"))}let a=e.Cols[0].tuples[s].caption,h=this.findDataPropByName(e.Cols[0].tuples[s]?.caption);if(h&&(h.label==="$auto"?a=h.dataValue||a:a=h.label||a),a.substr(0,5).toLowerCase()==="delta"){let c=parseInt(a.substring(5,a.length),10)-1;!isNaN(c)&&this.textData[c]&&n.toString()!=="0"&&(n.toString()[0]!=="-"?this.textData[c].delta="+"+n.toString():this.textData[c].deltaNeg=n.toString())}else{let c=l;if(h){let f=parseFloat(h.thresholdLower.toString()),u=parseFloat(h.thresholdUpper.toString()),p=h.override;if(p.normalStyle){let b=this.getCss(p.normalStyle);b.fill&&(c=b.fill)}if(f!==void 0&&!isNaN(f)&&this.getNumber(n)<f){let b=this.widget.properties?.lowRangeColor;p.lowStyle&&(b=this.getCss(p.lowStyle).fill),b&&(c=b)}if(u!==void 0&&!isNaN(u)&&this.getNumber(n)>u){let b=this.widget.properties?.highRangeColor;p.highStyle&&(b=this.getCss(p.highStyle).fill),b&&(c=b)}}this.textData.push({label:a,value:n,color:l,valueColor:c,dimension:e.Cols[0].tuples[s].dimension})}}this.cd.detectChanges(),setTimeout(()=>this.adjustSize())}onClick(e){this.doDrillthrough("",e.label)}getCss(e){let s={};return e.split(";").filter(r=>r).forEach(r=>{let n=r.split(":");s[n[0]]=n[1]}),s}getNumber(e){return typeof e=="string"?parseFloat(e.replace(/,/g,"").replace(/ /g,"")):e}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-wtext"]],viewQuery:function(s,r){if(s&1&&wi(Mp,5),s&2){let n;Si(n=Mi())&&(r.images=n)}},hostVars:2,hostBindings:function(s,r){s&2&&Oe("flex-direction",r.flexDirection)},inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[["images",""],[1,"item2",3,"clickable"],[1,"item2",3,"click"],[1,"text-widget"],[2,"font-size","4px","fill","red"],[2,"font-size","4px","fill","green"]],template:function(s,r){s&1&&he(0,Ep,11,8,"div",1,le),s&2&&ce(r.textData)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-display:row;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial}.inline[_nghost-%COMP%]   label[_ngcontent-%COMP%]{background-color:transparent;background-image:none}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:0}label[_ngcontent-%COMP%]{display:block;flex-shrink:0;height:16px;background-image:linear-gradient(to bottom,#f5f5f5 0,#e8e8e8);width:100%;text-align:center;font-family:monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item2[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 100%;justify-content:center;align-items:center;margin:10px;background-color:#fafafa;padding:10px;min-height:0;min-width:0}.item2.clickable[_ngcontent-%COMP%]{cursor:pointer}.item2[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{height:auto;background:transparent;color:gray;font-size:19px}.item2[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{height:50%;width:100%;display:block}.text-widget[_ngcontent-%COMP%]{height:100%}"]});let o=t;return o})();var wo=(()=>{let t=class t extends ue{constructor(){super(),this.widget={},this.isSpinner=!1,this._oldMdx=""}ngAfterViewInit(){this.createPivotTable()}ngOnDestroy(){super.ngOnDestroy()}createPivotTable(){let e=this,s={initialData:this.widget.pivotData,container:this.el.nativeElement,pivotProperties:{},enableListingSelect:!1,enableSearch:!1,dataSource:{pivot:this.widget.dataSource,MDX2JSONSource:this.ds.url.substring(0,this.ds.url.length-1),basicMDX:this.widget.pivotMdx||this.getMDX(),namespace:Ss,sendCookies:!0},triggers:{drillDown:r=>this.onDrillDown(r),rowClick:(r,n,l)=>e.drillFilterWidgets?.length?(e.doDrillFilter(l.source.path,e.drills),e.parent?.header?.cd.detectChanges(),!1):!this.widget.kpitype,back:r=>this.onDrillDown(r),cellDrillThrough:(...r)=>this.onDrillThrough(...r),responseHandler:r=>{r.status!==200&&this.showError(r.xhr.responseText)}},loadingMessageHTML:'<img src="assets/img/spinner.svg">',columnResizeAnimation:!0,locale:this.i18n.current,hideButtons:!0,formatNumbers:"#,###.##",controls:this.widget.controls};if(delete this.widget.pivotMdx,this.lpt=new LightPivotTable(s),this.widget.edKey&&this.lpt?.pivotView.displayMessage(""),this.lpt&&this.widget.initialData){let r=this.widget.initialData;setTimeout(()=>{this.lpt?.dataController.setData(this.lpt.dataSource._convert(r))})}}doDrillUp(){this.widget.isDrillthrough&&this.restoreWidgetType?(this.widget.isDrillthrough=!1,this.restoreWidgetType(),this.widget.kpitype&&this.requestData()):this.lpt?.CONTROLS.back(),this.widget.backButton=this.lpt?.DRILL_LEVEL!==0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges()}onDrillThrough(...e){if(!this.canDoDrillthrough)return!1;if(this.widget.kpitype){let{cellData:s,x:r,y:n}=e[0],{info:l,dimensions:a}=e[1];if(!a[0])return;let h=a[0][r-l.leftHeaderColumnsNumber]?.dimension||"",c=a[0][0]?.dimension||"",f=a[1][n-l.topHeaderRowsNumber]?.title||"";if(!h||!c)return;let u=[{name:h,value:s.value,path:""},{name:c,value:f,path:""}];return this._requestKPIData(u)?.then(()=>{this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges()}),!1}return this._oldMdx=this.lpt?.getActualMDX()||"",this.widget.backButton=!0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges(),!0}onDrillDown(e){e.path?(this.doDrillFilter(e.path,this.drills),this.drills.push({path:e.path,name:"",category:""}),this.widget.backButton=!0):(this.drills.pop(),this.doDrillFilter(e.path,this.drills)),this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges(),this.broadcastDependents(e.mdx)}requestData(){let e=this.customDataSource||this.widget.dataSource;if(this.widget.kpitype){this._requestKPIData();return}if(this.lpt){let s=this.getMDX();if(this.lpt.isListing()&&(delete this.lpt.CONFIG.initialData,s.toLowerCase().substr(0,12)!=="drillthrough"&&(s=this.getDrillthroughMdx(s)||"")),s==="")return;this.drillFilter&&(s=s+" %FILTER "+this.drillFilter),this.broadcastDependents(),this.clearError(),this.lpt.changeBasicMDX(s)}}onResize(){this.lpt&&setTimeout(()=>this.lpt?.updateSizes(),100)}print(){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=bt({type:t,selectors:[["dsw-pivot"]],inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},styles:["[_nghost-%COMP%]{height:100%}"]});let o=t;return o})();var So=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var te=So;var Ke={PROPERTYCHANGE:"propertychange"};var Mo=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},Es=Mo;function Kh(o,t,i){let e,s;i=i||qe;let r=0,n=o.length,l=!1;for(;r<n;)e=r+(n-r>>1),s=+i(o[e],t),s<0?r=e+1:(n=e,l=!s);return l?r:~r}function qe(o,t){return o>t?1:o<t?-1:0}function Ps(o,t,i){if(o[0]<=t)return 0;let e=o.length;if(t<=o[e-1])return e-1;if(typeof i=="function"){for(let s=1;s<e;++s){let r=o[s];if(r===t)return s;if(r<t)return i(t,o[s-1],r)>0?s-1:s}return e-1}if(i>0){for(let s=1;s<e;++s)if(o[s]<t)return s-1;return e-1}if(i<0){for(let s=1;s<e;++s)if(o[s]<=t)return s;return e-1}for(let s=1;s<e;++s){if(o[s]==t)return s;if(o[s]<t)return o[s-1]-t<t-o[s]?s-1:s}return e-1}function qh(o,t,i){for(;t<i;){let e=o[t];o[t]=o[i],o[i]=e,++t,--i}}function xe(o,t){let i=Array.isArray(t)?t:[t],e=i.length;for(let s=0;s<e;s++)o[o.length]=i[s]}function pe(o,t){let i=o.length;if(i!==t.length)return!1;for(let e=0;e<i;e++)if(o[e]!==t[e])return!1;return!0}function $h(o,t,i){let e=t||qe;return o.every(function(s,r){if(r===0)return!0;let n=e(o[r-1],s);return!(n>0||i&&n===0)})}function Ei(){return!0}function Pi(){return!1}function $e(){}function Jh(o){let t=!1,i,e,s;return function(){let r=Array.prototype.slice.call(arguments);return(!t||this!==s||!pe(r,e))&&(t=!0,s=this,e=r,i=o.apply(this,arguments)),i}}function ai(o){for(let t in o)delete o[t]}function Je(o){let t;for(t in o)return!1;return!t}var Eo=class extends Es{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,i){if(!t||!i)return;let e=this.listeners_||(this.listeners_={}),s=e[t]||(e[t]=[]);s.includes(i)||s.push(i)}dispatchEvent(t){let i=typeof t=="string",e=i?t:t.type,s=this.listeners_&&this.listeners_[e];if(!s)return;let r=i?new te(t):t;r.target||(r.target=this.eventTarget_||this);let n=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});e in n||(n[e]=0,l[e]=0),++n[e];let a;for(let h=0,c=s.length;h<c;++h)if("handleEvent"in s[h]?a=s[h].handleEvent(r):a=s[h].call(this,r),a===!1||r.propagationStopped){a=!1;break}if(--n[e]===0){let h=l[e];for(delete l[e];h--;)this.removeEventListener(e,$e);delete n[e]}return a}disposeInternal(){this.listeners_&&ai(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,i){let e=this.listeners_&&this.listeners_[t];if(e){let s=e.indexOf(i);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(e[s]=$e,++this.pendingRemovals_[t]):(e.splice(s,1),e.length===0&&delete this.listeners_[t]))}}},Gi=Eo;var ut={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function wt(o,t,i,e,s){if(e&&e!==o&&(i=i.bind(e)),s){let n=i;i=function(){o.removeEventListener(t,i),n.apply(this,arguments)}}let r={target:o,type:t,listener:i};return o.addEventListener(t,i),r}function Ts(o,t,i,e){return wt(o,t,i,e,!0)}function Tt(o){o&&o.target&&(o.target.removeEventListener(o.type,o.listener),ai(o))}var As=class extends Gi{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ut.CHANGE)}getRevision(){return this.revision_}onInternal(t,i){if(Array.isArray(t)){let e=t.length,s=new Array(e);for(let r=0;r<e;++r)s[r]=wt(this,t[r],i);return s}return wt(this,t,i)}onceInternal(t,i){let e;if(Array.isArray(t)){let s=t.length;e=new Array(s);for(let r=0;r<s;++r)e[r]=Ts(this,t[r],i)}else e=Ts(this,t,i);return i.ol_key=e,e}unInternal(t,i){let e=i.ol_key;if(e)Pp(e);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],i);else this.removeEventListener(t,i)}};As.prototype.on;As.prototype.once;As.prototype.un;function Pp(o){if(Array.isArray(o))for(let t=0,i=o.length;t<i;++t)Tt(o[t]);else Tt(o)}var Jr=As;function ft(){throw new Error("Unimplemented abstract method.")}var Tp=0;function Mt(o){return o.ol_uid||(o.ol_uid=String(++Tp))}var Qr=class extends te{constructor(t,i,e){super(t),this.key=i,this.oldValue=e}},Po=class extends Jr{constructor(t){super(),this.on,this.once,this.un,Mt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,i){let e;e=`change:${t}`,this.hasListener(e)&&this.dispatchEvent(new Qr(e,t,i)),e=Ke.PROPERTYCHANGE,this.hasListener(e)&&this.dispatchEvent(new Qr(e,t,i))}addChangeListener(t,i){this.addEventListener(`change:${t}`,i)}removeChangeListener(t,i){this.removeEventListener(`change:${t}`,i)}set(t,i,e){let s=this.values_||(this.values_={});if(e)s[t]=i;else{let r=s[t];s[t]=i,r!==i&&this.notify(t,r)}}setProperties(t,i){for(let e in t)this.set(e,t[e],i)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,i){if(this.values_&&t in this.values_){let e=this.values_[t];delete this.values_[t],Je(this.values_)&&(this.values_=null),i||this.notify(t,e)}}},Zt=Po;var Ap={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"},To=class extends Error{constructor(t){let i=Ap[t];super(i),this.code=t,this.name="AssertionError",this.message=i}},tn=To;var ee={ADD:"add",REMOVE:"remove"};var Qh={LENGTH:"length"},Ds=class extends te{constructor(t,i,e){super(t),this.element=i,this.index=e}},Ao=class extends Zt{constructor(t,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(let e=0,s=this.array_.length;e<s;++e)this.assertUnique_(this.array_[e],e);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let i=0,e=t.length;i<e;++i)this.push(t[i]);return this}forEach(t){let i=this.array_;for(let e=0,s=i.length;e<s;++e)t(i[e],e,i)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Qh.LENGTH)}insertAt(t,i){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new Ds(ee.ADD,i,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);let i=this.getLength();return this.insertAt(i,t),this.getLength()}remove(t){let i=this.array_;for(let e=0,s=i.length;e<s;++e)if(i[e]===t)return this.removeAt(e)}removeAt(t){if(t<0||t>=this.getLength())return;let i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ds(ee.REMOVE,i,t)),i}setAt(t,i){let e=this.getLength();if(t>=e){this.insertAt(t,i);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i,t);let s=this.array_[t];this.array_[t]=i,this.dispatchEvent(new Ds(ee.REMOVE,s,t)),this.dispatchEvent(new Ds(ee.ADD,i,t))}updateLength_(){this.set(Qh.LENGTH,this.array_.length)}assertUnique_(t,i){for(let e=0,s=this.array_.length;e<s;++e)if(this.array_[e]===t&&e!==i)throw new tn(58)}},ne=Ao;var Xi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",tc=Xi.includes("firefox"),Dp=Xi.includes("safari")&&!Xi.includes("chrom"),vm=Dp&&(Xi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Xi)),ec=Xi.includes("webkit")&&!Xi.includes("edge"),Do=Xi.includes("macintosh"),en=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ls=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ic=typeof Image<"u"&&Image.prototype.decode,sn=function(){let o=!1;try{let t=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return o}();function gt(o,t){if(!o)throw new tn(t)}var Em=new Array(6);function fe(){return[1,0,0,1,0,0]}function Lp(o,t,i,e,s,r,n){return o[0]=t,o[1]=i,o[2]=e,o[3]=s,o[4]=r,o[5]=n,o}function rc(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o}function Vt(o,t){let i=t[0],e=t[1];return t[0]=o[0]*i+o[2]*e+o[4],t[1]=o[1]*i+o[3]*e+o[5],t}function nc(o,t,i){return Lp(o,t,0,0,i,0,0)}function ye(o,t,i,e,s,r,n,l){let a=Math.sin(r),h=Math.cos(r);return o[0]=e*h,o[1]=s*a,o[2]=-e*a,o[3]=s*h,o[4]=n*e*h-l*e*a+t,o[5]=n*s*a+l*s*h+i,o}function Is(o,t){let i=Ip(t);gt(i!==0,32);let e=t[0],s=t[1],r=t[2],n=t[3],l=t[4],a=t[5];return o[0]=n/i,o[1]=-s/i,o[2]=-r/i,o[3]=e/i,o[4]=(r*a-n*l)/i,o[5]=-(e*a-s*l)/i,o}function Ip(o){return o[0]*o[3]-o[1]*o[2]}var sc;function rn(o){let t="matrix("+o.join(", ")+")";if(Ls)return t;let i=sc||(sc=document.createElement("div"));return i.style.transform=t,i.style.transform}var Kt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Lo(o){let t=Ut();for(let i=0,e=o.length;i<e;++i)os(t,o[i]);return t}function kp(o,t,i){let e=Math.min.apply(null,o),s=Math.min.apply(null,t),r=Math.max.apply(null,o),n=Math.max.apply(null,t);return ze(e,s,r,n,i)}function ks(o,t,i){return i?(i[0]=o[0]-t,i[1]=o[1]-t,i[2]=o[2]+t,i[3]=o[3]+t,i):[o[0]-t,o[1]-t,o[2]+t,o[3]+t]}function on(o,t){return t?(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t):o.slice()}function Me(o,t,i){let e,s;return t<o[0]?e=o[0]-t:o[2]<t?e=t-o[2]:e=0,i<o[1]?s=o[1]-i:o[3]<i?s=i-o[3]:s=0,e*e+s*s}function Wi(o,t){return nr(o,t[0],t[1])}function Ti(o,t){return o[0]<=t[0]&&t[2]<=o[2]&&o[1]<=t[1]&&t[3]<=o[3]}function nr(o,t,i){return o[0]<=t&&t<=o[2]&&o[1]<=i&&i<=o[3]}function nn(o,t){let i=o[0],e=o[1],s=o[2],r=o[3],n=t[0],l=t[1],a=Kt.UNKNOWN;return n<i?a=a|Kt.LEFT:n>s&&(a=a|Kt.RIGHT),l<e?a=a|Kt.BELOW:l>r&&(a=a|Kt.ABOVE),a===Kt.UNKNOWN&&(a=Kt.INTERSECTING),a}function Ut(){return[1/0,1/0,-1/0,-1/0]}function ze(o,t,i,e,s){return s?(s[0]=o,s[1]=t,s[2]=i,s[3]=e,s):[o,t,i,e]}function Ai(o){return ze(1/0,1/0,-1/0,-1/0,o)}function oc(o,t){let i=o[0],e=o[1];return ze(i,e,i,e,t)}function an(o,t,i,e,s){let r=Ai(s);return Io(r,o,t,i,e)}function Di(o,t){return o[0]==t[0]&&o[2]==t[2]&&o[1]==t[1]&&o[3]==t[3]}function ln(o,t){return t[0]<o[0]&&(o[0]=t[0]),t[2]>o[2]&&(o[2]=t[2]),t[1]<o[1]&&(o[1]=t[1]),t[3]>o[3]&&(o[3]=t[3]),o}function os(o,t){t[0]<o[0]&&(o[0]=t[0]),t[0]>o[2]&&(o[2]=t[0]),t[1]<o[1]&&(o[1]=t[1]),t[1]>o[3]&&(o[3]=t[1])}function Io(o,t,i,e,s){for(;i<e;i+=s)Rp(o,t[i],t[i+1]);return o}function Rp(o,t,i){o[0]=Math.min(o[0],t),o[1]=Math.min(o[1],i),o[2]=Math.max(o[2],t),o[3]=Math.max(o[3],i)}function hn(o,t){let i;return i=t(Rs(o)),i||(i=t(Os(o)),i)||(i=t(Fs(o)),i)||(i=t(Xe(o)),i)?i:!1}function or(o){let t=0;return Yi(o)||(t=At(o)*ge(o)),t}function Rs(o){return[o[0],o[1]]}function Os(o){return[o[2],o[1]]}function Ge(o){return[(o[0]+o[2])/2,(o[1]+o[3])/2]}function ac(o,t){let i;return t==="bottom-left"?i=Rs(o):t==="bottom-right"?i=Os(o):t==="top-left"?i=Xe(o):t==="top-right"?i=Fs(o):gt(!1,13),i}function ar(o,t,i,e,s){let[r,n,l,a,h,c,f,u]=cn(o,t,i,e);return ze(Math.min(r,l,h,f),Math.min(n,a,c,u),Math.max(r,l,h,f),Math.max(n,a,c,u),s)}function cn(o,t,i,e){let s=t*e[0]/2,r=t*e[1]/2,n=Math.cos(i),l=Math.sin(i),a=s*n,h=s*l,c=r*n,f=r*l,u=o[0],p=o[1];return[u-a+f,p-h-c,u-a-f,p-h+c,u+a-f,p+h+c,u+a+f,p+h-c,u-a+f,p-h-c]}function ge(o){return o[3]-o[1]}function Vi(o,t,i){let e=i||Ut();return Yt(o,t)?(o[0]>t[0]?e[0]=o[0]:e[0]=t[0],o[1]>t[1]?e[1]=o[1]:e[1]=t[1],o[2]<t[2]?e[2]=o[2]:e[2]=t[2],o[3]<t[3]?e[3]=o[3]:e[3]=t[3]):Ai(e),e}function Xe(o){return[o[0],o[3]]}function Fs(o){return[o[2],o[3]]}function At(o){return o[2]-o[0]}function Yt(o,t){return o[0]<=t[2]&&o[2]>=t[0]&&o[1]<=t[3]&&o[3]>=t[1]}function Yi(o){return o[2]<o[0]||o[3]<o[1]}function lc(o,t){return t?(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t):o}function hc(o,t,i){let e=!1,s=nn(o,t),r=nn(o,i);if(s===Kt.INTERSECTING||r===Kt.INTERSECTING)e=!0;else{let n=o[0],l=o[1],a=o[2],h=o[3],c=t[0],f=t[1],u=i[0],p=i[1],b=(p-f)/(u-c),v,x;r&Kt.ABOVE&&!(s&Kt.ABOVE)&&(v=u-(p-h)/b,e=v>=n&&v<=a),!e&&r&Kt.RIGHT&&!(s&Kt.RIGHT)&&(x=p-(u-a)*b,e=x>=l&&x<=h),!e&&r&Kt.BELOW&&!(s&Kt.BELOW)&&(v=u-(p-l)/b,e=v>=n&&v<=a),!e&&r&Kt.LEFT&&!(s&Kt.LEFT)&&(x=p-(u-n)*b,e=x>=l&&x<=h)}return e}function cc(o,t,i,e){if(Yi(o))return Ai(i);let s=[];if(e>1){let l=o[2]-o[0],a=o[3]-o[1];for(let h=0;h<e;++h)s.push(o[0]+l*h/e,o[1],o[2],o[1]+a*h/e,o[2]-l*h/e,o[3],o[0],o[3]-a*h/e)}else s=[o[0],o[1],o[2],o[1],o[2],o[3],o[0],o[3]];t(s,s,2);let r=[],n=[];for(let l=0,a=s.length;l<a;l+=2)r.push(s[l]),n.push(s[l+1]);return kp(r,n,i)}function ko(o,t){let i=t.getExtent(),e=Ge(o);if(t.canWrapX()&&(e[0]<i[0]||e[0]>=i[2])){let s=At(i),n=Math.floor((e[0]-i[0])/s)*s;o[0]-=n,o[2]-=n}return o}function dc(o,t){if(t.canWrapX()){let i=t.getExtent();if(!isFinite(o[0])||!isFinite(o[2]))return[[i[0],o[1],i[2],o[3]]];ko(o,t);let e=At(i);if(At(o)>e)return[[i[0],o[1],i[2],o[3]]];if(o[0]<i[0])return[[o[0]+e,o[1],i[2],o[3]],[i[0],o[1],o[2],o[3]]];if(o[2]>i[2])return[[o[0],o[1],i[2],o[3]],[i[0],o[1],o[2]-e,o[3]]]}return[o]}function Rt(o,t,i){return Math.min(Math.max(o,t),i)}function uc(o,t,i,e,s,r){let n=s-i,l=r-e;if(n!==0||l!==0){let a=((o-i)*n+(t-e)*l)/(n*n+l*l);a>1?(i=s,e=r):a>0&&(i+=n*a,e+=l*a)}return Qe(o,t,i,e)}function Qe(o,t,i,e){let s=i-o,r=e-t;return s*s+r*r}function pc(o){let t=o.length;for(let e=0;e<t;e++){let s=e,r=Math.abs(o[e][e]);for(let l=e+1;l<t;l++){let a=Math.abs(o[l][e]);a>r&&(r=a,s=l)}if(r===0)return null;let n=o[s];o[s]=o[e],o[e]=n;for(let l=e+1;l<t;l++){let a=-o[l][e]/o[e][e];for(let h=e;h<t+1;h++)e==h?o[l][h]=0:o[l][h]+=a*o[e][h]}}let i=new Array(t);for(let e=t-1;e>=0;e--){i[e]=o[e][t]/o[e][e];for(let s=e-1;s>=0;s--)o[s][t]-=o[s][e]*i[e]}return i}function zs(o){return o*Math.PI/180}function Li(o,t){let i=o%t;return i*t<0?i+t:i}function oe(o,t,i){return o+i*(t-o)}function dn(o,t){let i=Math.pow(10,t);return Math.round(o*i)/i}function lr(o,t){return Math.floor(dn(o,t))}function hr(o,t){return Math.ceil(dn(o,t))}var Op=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Fp=/^([a-z]*)$|^hsla?\(.*\)$/i;function un(o){return typeof o=="string"?o:Ro(o)}function zp(o){let t=document.createElement("div");if(t.style.color=o,t.style.color!==""){document.body.appendChild(t);let i=getComputedStyle(t).color;return document.body.removeChild(t),i}return""}var Np=function(){let t={},i=0;return function(e){let s;if(t.hasOwnProperty(e))s=t[e];else{if(i>=1024){let r=0;for(let n in t)r++&3||(delete t[n],--i)}s=jp(e),t[e]=s,++i}return s}}();function as(o){return Array.isArray(o)?o:Np(o)}function jp(o){let t,i,e,s,r;if(Fp.exec(o)&&(o=zp(o)),Op.exec(o)){let n=o.length-1,l;n<=4?l=1:l=2;let a=n===4||n===8;t=parseInt(o.substr(1+0*l,l),16),i=parseInt(o.substr(1+1*l,l),16),e=parseInt(o.substr(1+2*l,l),16),a?s=parseInt(o.substr(1+3*l,l),16):s=255,l==1&&(t=(t<<4)+t,i=(i<<4)+i,e=(e<<4)+e,a&&(s=(s<<4)+s)),r=[t,i,e,s/255]}else o.startsWith("rgba(")?(r=o.slice(5,-1).split(",").map(Number),fc(r)):o.startsWith("rgb(")?(r=o.slice(4,-1).split(",").map(Number),r.push(1),fc(r)):gt(!1,14);return r}function fc(o){return o[0]=Rt(o[0]+.5|0,0,255),o[1]=Rt(o[1]+.5|0,0,255),o[2]=Rt(o[2]+.5|0,0,255),o[3]=Rt(o[3],0,1),o}function Ro(o){let t=o[0];t!=(t|0)&&(t=t+.5|0);let i=o[1];i!=(i|0)&&(i=i+.5|0);let e=o[2];e!=(e|0)&&(e=e+.5|0);let s=o[3]===void 0?1:Math.round(o[3]*100)/100;return"rgba("+t+","+i+","+e+","+s+")"}var Oo=class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(let i in this.cache_){let e=this.cache_[i];!(t++&3)&&!e.hasListener()&&(delete this.cache_[i],--this.cacheSize_)}}}get(t,i,e){let s=gc(t,i,e);return s in this.cache_?this.cache_[s]:null}set(t,i,e,s){let r=gc(t,i,e);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};function gc(o,t,i){let e=i?un(i):"null";return t+":"+o+":"+e}var Ns=new Oo;var kt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var Fo=class extends Zt{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;let i=Object.assign({},t);typeof t.properties=="object"&&(delete i.properties,Object.assign(i,t.properties)),i[kt.OPACITY]=t.opacity!==void 0?t.opacity:1,gt(typeof i[kt.OPACITY]=="number",64),i[kt.VISIBLE]=t.visible!==void 0?t.visible:!0,i[kt.Z_INDEX]=t.zIndex,i[kt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[kt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[kt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[kt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){let i=this.state_||{layer:this,managed:t===void 0?!0:t},e=this.getZIndex();return i.opacity=Rt(Math.round(this.getOpacity()*100)/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=e===void 0&&!i.managed?1/0:e,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(t){return ft()}getLayerStatesArray(t){return ft()}getExtent(){return this.get(kt.EXTENT)}getMaxResolution(){return this.get(kt.MAX_RESOLUTION)}getMinResolution(){return this.get(kt.MIN_RESOLUTION)}getMinZoom(){return this.get(kt.MIN_ZOOM)}getMaxZoom(){return this.get(kt.MAX_ZOOM)}getOpacity(){return this.get(kt.OPACITY)}getSourceState(){return ft()}getVisible(){return this.get(kt.VISIBLE)}getZIndex(){return this.get(kt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(kt.EXTENT,t)}setMaxResolution(t){this.set(kt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(kt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(kt.MAX_ZOOM,t)}setMinZoom(t){this.set(kt.MIN_ZOOM,t)}setOpacity(t){gt(typeof t=="number",64),this.set(kt.OPACITY,t)}setVisible(t){this.set(kt.VISIBLE,t)}setZIndex(t){this.set(kt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},pn=Fo;var be={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var qt={ANIMATING:0,INTERACTING:1};var We={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var ti={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var zo=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ti[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},fn=zo;var cr=6378137,js=Math.PI*cr,Bp=[-js,-js,js,js],Gp=[-180,-85,180,85],gn=cr*Math.log(Math.tan(Math.PI/2)),Ui=class extends fn{constructor(t){super({code:t,units:"m",extent:Bp,global:!0,worldExtent:Gp,getPointResolution:function(i,e){return i/Math.cosh(e[1]/cr)}})}},No=[new Ui("EPSG:3857"),new Ui("EPSG:102100"),new Ui("EPSG:102113"),new Ui("EPSG:900913"),new Ui("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ui("http://www.opengis.net/gml/srs/epsg.xml#3857")];function mc(o,t,i){let e=o.length;i=i>1?i:2,t===void 0&&(i>2?t=o.slice():t=new Array(e));for(let s=0;s<e;s+=i){t[s]=js*o[s]/180;let r=cr*Math.log(Math.tan(Math.PI*(+o[s+1]+90)/360));r>gn?r=gn:r<-gn&&(r=-gn),t[s+1]=r}return t}function xc(o,t,i){let e=o.length;i=i>1?i:2,t===void 0&&(i>2?t=o.slice():t=new Array(e));for(let s=0;s<e;s+=i)t[s]=180*o[s]/js,t[s+1]=360*Math.atan(Math.exp(o[s+1]/cr))/Math.PI-90;return t}var Xp=6378137,yc=[-180,-90,180,90],Wp=Math.PI*Xp/180,Ii=class extends fn{constructor(t,i){super({code:t,units:"degrees",extent:yc,axisOrientation:i,global:!0,metersPerUnit:Wp,worldExtent:yc})}},jo=[new Ii("CRS:84"),new Ii("EPSG:4326","neu"),new Ii("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ii("urn:ogc:def:crs:OGC:2:84"),new Ii("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ii("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ii("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var Bo={};function bc(o){return Bo[o]||Bo[o.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function vc(o,t){Bo[o]=t}var Bs={};function dr(o,t,i){let e=o.getCode(),s=t.getCode();e in Bs||(Bs[e]={}),Bs[e][s]=i}function Cc(o,t){let i;return o in Bs&&t in Bs[o]&&(i=Bs[o][t]),i}function _c(o,t){return o[0]+=+t[0],o[1]+=+t[1],o}function ls(o,t){let i=!0;for(let e=o.length-1;e>=0;--e)if(o[e]!=t[e]){i=!1;break}return i}function Gs(o,t){let i=Math.cos(t),e=Math.sin(t),s=o[0]*i-o[1]*e,r=o[1]*i+o[0]*e;return o[0]=s,o[1]=r,o}function wc(o,t){return o[0]*=t,o[1]*=t,o}function mn(o,t){if(t.canWrapX()){let i=At(t.getExtent()),e=Sc(o,t,i);e&&(o[0]-=e*i)}return o}function Sc(o,t,i){let e=t.getExtent(),s=0;return t.canWrapX()&&(o[0]<e[0]||o[0]>e[2])&&(i=i||At(e),s=Math.floor((o[0]-e[0])/i)),s}var Vp=63710088e-1;function Go(o,t,i){i=i||Vp;let e=zs(o[1]),s=zs(t[1]),r=(s-e)/2,n=zs(t[0]-o[0])/2,l=Math.sin(r)*Math.sin(r)+Math.sin(n)*Math.sin(n)*Math.cos(e)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}var Mc={info:1,warn:2,error:3,none:4},Yp=Mc.info;function xn(...o){Yp>Mc.warn||console.warn(...o)}var Xo=!0;function Pc(o){Xo=!(o===void 0?!0:o)}function Wo(o,t){if(t!==void 0){for(let i=0,e=o.length;i<e;++i)t[i]=o[i];t=t}else t=o.slice();return t}function Tc(o,t){if(t!==void 0&&o!==t){for(let i=0,e=o.length;i<e;++i)t[i]=o[i];o=t}return o}function Up(o){vc(o.getCode(),o),dr(o,o,Wo)}function Hp(o){o.forEach(Up)}function zt(o){return typeof o=="string"?bc(o):o||null}function Vo(o,t,i,e){o=zt(o);let s,r=o.getPointResolutionFunc();if(r){if(s=r(t,i),e&&e!==o.getUnits()){let n=o.getMetersPerUnit();n&&(s=s*n/ti[e])}}else{let n=o.getUnits();if(n=="degrees"&&!e||e=="degrees")s=t;else{let l=ur(o,zt("EPSG:4326"));if(l===Tc&&n!=="degrees")s=t*o.getMetersPerUnit();else{let h=[i[0]-t/2,i[1],i[0]+t/2,i[1],i[0],i[1]-t/2,i[0],i[1]+t/2];h=l(h,h,2);let c=Go(h.slice(0,2),h.slice(2,4)),f=Go(h.slice(4,6),h.slice(6,8));s=(c+f)/2}let a=e?ti[e]:o.getMetersPerUnit();a!==void 0&&(s/=a)}}return s}function Ec(o){Hp(o),o.forEach(function(t){o.forEach(function(i){t!==i&&dr(t,i,Wo)})})}function Zp(o,t,i,e){o.forEach(function(s){t.forEach(function(r){dr(s,r,i),dr(r,s,e)})})}function yn(o,t){return o?typeof o=="string"?zt(o):o:zt(t)}function li(o,t){if(o===t)return!0;let i=o.getUnits()===t.getUnits();return(o.getCode()===t.getCode()||ur(o,t)===Wo)&&i}function ur(o,t){let i=o.getCode(),e=t.getCode(),s=Cc(i,e);return s||(s=Tc),s}function hs(o,t){let i=zt(o),e=zt(t);return ur(i,e)}function Hi(o,t,i){return hs(t,i)(o,void 0,o.length)}function Yo(o,t,i,e){let s=hs(t,i);return cc(o,s,void 0,e)}var ei=null;function bn(){return ei}function pr(o,t){return ei?Hi(o,t,ei):o}function ii(o,t){return ei?Hi(o,ei,t):(Xo&&!ls(o,[0,0])&&o[0]>=-180&&o[0]<=180&&o[1]>=-90&&o[1]<=90&&(Xo=!1,xn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),o)}function Xs(o,t){return ei?Yo(o,t,ei):o}function si(o,t){return ei?Yo(o,ei,t):o}function Ac(o,t){if(!ei)return o;let i=zt(t).getUnits(),e=ei.getUnits();return i&&e?o*ti[i]/ti[e]:o}function Kp(){Ec(No),Ec(jo),Zp(jo,No,mc,xc)}Kp();function Uo(o,t,i){return function(e,s,r,n,l){if(!e)return;if(!s&&!t)return e;let a=t?0:r[0]*s,h=t?0:r[1]*s,c=l?l[0]:0,f=l?l[1]:0,u=o[0]+a/2+c,p=o[2]-a/2+c,b=o[1]+h/2+f,v=o[3]-h/2+f;u>p&&(u=(p+u)/2,p=u),b>v&&(b=(v+b)/2,v=b);let x=Rt(e[0],u,p),m=Rt(e[1],b,v);if(n&&i&&s){let E=30*s;x+=-E*Math.log(1+Math.max(0,u-e[0])/E)+E*Math.log(1+Math.max(0,e[0]-p)/E),m+=-E*Math.log(1+Math.max(0,b-e[1])/E)+E*Math.log(1+Math.max(0,e[1]-v)/E)}return[x,m]}}function Dc(o){return o}function Ho(o,t,i,e){let s=At(t)/i[0],r=ge(t)/i[1];return e?Math.min(o,Math.max(s,r)):Math.min(o,Math.min(s,r))}function Zo(o,t,i){let e=Math.min(o,t),s=50;return e*=Math.log(1+s*Math.max(0,o/t-1))/s+1,i&&(e=Math.max(e,i),e/=Math.log(1+s*Math.max(0,i/o-1))/s+1),Rt(e,i/2,t*2)}function Lc(o,t,i,e){return t=t!==void 0?t:!0,function(s,r,n,l){if(s!==void 0){let a=o[0],h=o[o.length-1],c=i?Ho(a,i,n,e):a;if(l)return t?Zo(s,c,h):Rt(s,h,c);let f=Math.min(c,s),u=Math.floor(Ps(o,f,r));return o[u]>c&&u<o.length-1?o[u+1]:o[u]}}}function Ic(o,t,i,e,s,r){return e=e!==void 0?e:!0,i=i!==void 0?i:0,function(n,l,a,h){if(n!==void 0){let c=s?Ho(t,s,a,r):t;if(h)return e?Zo(n,c,i):Rt(n,i,c);let f=1e-9,u=Math.ceil(Math.log(t/c)/Math.log(o)-f),p=-l*(.5-f)+.5,b=Math.min(c,n),v=Math.floor(Math.log(t/b)/Math.log(o)+p),x=Math.max(u,v),m=t/Math.pow(o,x);return Rt(m,i,c)}}}function Ko(o,t,i,e,s){return i=i!==void 0?i:!0,function(r,n,l,a){if(r!==void 0){let h=e?Ho(o,e,l,s):o;return!i||!a?Rt(r,t,h):Zo(r,h,t)}}}function Ws(o){if(o!==void 0)return 0}function qo(o){if(o!==void 0)return o}function kc(o){let t=2*Math.PI/o;return function(i,e){if(e)return i;if(i!==void 0)return i=Math.floor(i/t+.5)*t,i}}function Rc(o){return o=o||zs(5),function(t,i){if(i)return t;if(t!==void 0)return Math.abs(t)<=o?0:t}}function $o(o){return Math.pow(o,3)}function Ve(o){return 1-$o(1-o)}function Oc(o){return 3*o*o-2*o*o*o}function Fc(o){return o}function Ye(o,t,i,e,s,r){r=r||[];let n=0;for(let l=t;l<i;l+=e){let a=o[l],h=o[l+1];r[n++]=s[0]*a+s[2]*h+s[4],r[n++]=s[1]*a+s[3]*h+s[5]}return r&&r.length!=n&&(r.length=n),r}function vn(o,t,i,e,s,r,n){n=n||[];let l=Math.cos(s),a=Math.sin(s),h=r[0],c=r[1],f=0;for(let u=t;u<i;u+=e){let p=o[u]-h,b=o[u+1]-c;n[f++]=h+p*l-b*a,n[f++]=c+p*a+b*l;for(let v=u+2;v<u+e;++v)n[f++]=o[v]}return n&&n.length!=f&&(n.length=f),n}function zc(o,t,i,e,s,r,n,l){l=l||[];let a=n[0],h=n[1],c=0;for(let f=t;f<i;f+=e){let u=o[f]-a,p=o[f+1]-h;l[c++]=a+s*u,l[c++]=h+r*p;for(let b=f+2;b<f+e;++b)l[c++]=o[b]}return l&&l.length!=c&&(l.length=c),l}function Nc(o,t,i,e,s,r,n){n=n||[];let l=0;for(let a=t;a<i;a+=e){n[l++]=o[a]+s,n[l++]=o[a+1]+r;for(let h=a+2;h<a+e;++h)n[l++]=o[h]}return n&&n.length!=l&&(n.length=l),n}var jc=fe(),Jo=class extends Zt{constructor(){super(),this.extent_=Ut(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Jh(function(t,i,e){if(!e)return this.getSimplifiedGeometry(i);let s=this.clone();return s.applyTransform(e),s.getSimplifiedGeometry(i)})}simplifyTransformed(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)}clone(){return ft()}closestPointXY(t,i,e,s){return ft()}containsXY(t,i){let e=this.getClosestPoint([t,i]);return e[0]===t&&e[1]===i}getClosestPoint(t,i){return i=i||[NaN,NaN],this.closestPointXY(t[0],t[1],i,1/0),i}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return ft()}getExtent(t){if(this.extentRevision_!=this.getRevision()){let i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Ai(i),this.extentRevision_=this.getRevision()}return lc(this.extent_,t)}rotate(t,i){ft()}scale(t,i,e){ft()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return ft()}getType(){return ft()}applyTransform(t){ft()}intersectsExtent(t){return ft()}translate(t,i){ft()}transform(t,i){let e=zt(t),s=e.getUnits()=="tile-pixels"?function(r,n,l){let a=e.getExtent(),h=e.getWorldExtent(),c=ge(h)/ge(a);return ye(jc,h[0],h[3],c,-c,0,0,0),Ye(r,0,r.length,l,jc,n),hs(e,i)(r,n,l)}:hs(e,i);return this.applyTransform(s),this}},Cn=Jo;var Qo=class extends Cn{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return an(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return ft()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,i){this.stride=Bc(t),this.layout=t,this.flatCoordinates=i}setCoordinates(t,i){ft()}setLayout(t,i,e){let s;if(t)s=Bc(t);else{for(let r=0;r<e;++r){if(i.length===0){this.layout="XY",this.stride=2;return}i=i[0]}s=i.length,t=qp(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,i){let e=this.getFlatCoordinates();if(e){let s=this.getStride();vn(e,0,e.length,s,t,i,e),this.changed()}}scale(t,i,e){i===void 0&&(i=t),e||(e=Ge(this.getExtent()));let s=this.getFlatCoordinates();if(s){let r=this.getStride();zc(s,0,s.length,r,t,i,e,s),this.changed()}}translate(t,i){let e=this.getFlatCoordinates();if(e){let s=this.getStride();Nc(e,0,e.length,s,t,i,e),this.changed()}}};function qp(o){let t;return o==2?t="XY":o==3?t="XYZ":o==4&&(t="XYZM"),t}function Bc(o){let t;return o=="XY"?t=2:o=="XYZ"||o=="XYM"?t=3:o=="XYZM"&&(t=4),t}function Gc(o,t,i){let e=o.getFlatCoordinates();if(!e)return null;let s=o.getStride();return Ye(e,0,e.length,s,t,i)}var Ee=Qo;function Xc(o,t,i,e,s,r,n){let l=o[t],a=o[t+1],h=o[i]-l,c=o[i+1]-a,f;if(h===0&&c===0)f=t;else{let u=((s-l)*h+(r-a)*c)/(h*h+c*c);if(u>1)f=i;else if(u>0){for(let p=0;p<e;++p)n[p]=oe(o[t+p],o[i+p],u);n.length=e;return}else f=t}for(let u=0;u<e;++u)n[u]=o[f+u];n.length=e}function fr(o,t,i,e,s){let r=o[t],n=o[t+1];for(t+=e;t<i;t+=e){let l=o[t],a=o[t+1],h=Qe(r,n,l,a);h>s&&(s=h),r=l,n=a}return s}function gr(o,t,i,e,s){for(let r=0,n=i.length;r<n;++r){let l=i[r];s=fr(o,t,l,e,s),t=l}return s}function Wc(o,t,i,e,s){for(let r=0,n=i.length;r<n;++r){let l=i[r];s=gr(o,t,l,e,s),t=l[l.length-1]}return s}function mr(o,t,i,e,s,r,n,l,a,h,c){if(t==i)return h;let f,u;if(s===0){if(u=Qe(n,l,o[t],o[t+1]),u<h){for(f=0;f<e;++f)a[f]=o[t+f];return a.length=e,u}return h}c=c||[NaN,NaN];let p=t+e;for(;p<i;)if(Xc(o,p-e,p,e,n,l,c),u=Qe(n,l,c[0],c[1]),u<h){for(h=u,f=0;f<e;++f)a[f]=c[f];a.length=e,p+=e}else p+=e*Math.max((Math.sqrt(u)-Math.sqrt(h))/s|0,1);if(r&&(Xc(o,i-e,t,e,n,l,c),u=Qe(n,l,c[0],c[1]),u<h)){for(h=u,f=0;f<e;++f)a[f]=c[f];a.length=e}return h}function xr(o,t,i,e,s,r,n,l,a,h,c){c=c||[NaN,NaN];for(let f=0,u=i.length;f<u;++f){let p=i[f];h=mr(o,t,p,e,s,r,n,l,a,h,c),t=p}return h}function Vc(o,t,i,e,s,r,n,l,a,h,c){c=c||[NaN,NaN];for(let f=0,u=i.length;f<u;++f){let p=i[f];h=xr(o,t,p,e,s,r,n,l,a,h,c),t=p[p.length-1]}return h}function Yc(o,t,i,e){for(let s=0,r=i.length;s<r;++s)o[t++]=i[s];return t}function cs(o,t,i,e){for(let s=0,r=i.length;s<r;++s){let n=i[s];for(let l=0;l<e;++l)o[t++]=n[l]}return t}function yr(o,t,i,e,s){s=s||[];let r=0;for(let n=0,l=i.length;n<l;++n){let a=cs(o,t,i[n],e);s[r++]=a,t=a}return s.length=r,s}function Uc(o,t,i,e,s){s=s||[];let r=0;for(let n=0,l=i.length;n<l;++n){let a=yr(o,t,i[n],e,s[r]);a.length===0&&(a[0]=t),s[r++]=a,t=a[a.length-1]}return s.length=r,s}function br(o,t,i,e,s,r,n){let l=(i-t)/e;if(l<3){for(;t<i;t+=e)r[n++]=o[t],r[n++]=o[t+1];return n}let a=new Array(l);a[0]=1,a[l-1]=1;let h=[t,i-e],c=0;for(;h.length>0;){let f=h.pop(),u=h.pop(),p=0,b=o[u],v=o[u+1],x=o[f],m=o[f+1];for(let E=u+e;E<f;E+=e){let L=o[E],S=o[E+1],w=uc(L,S,b,v,x,m);w>p&&(c=E,p=w)}p>s&&(a[(c-t)/e]=1,u+e<c&&h.push(u,c),c+e<f&&h.push(c,f))}for(let f=0;f<l;++f)a[f]&&(r[n++]=o[t+f*e],r[n++]=o[t+f*e+1]);return n}function Hc(o,t,i,e,s,r,n,l){for(let a=0,h=i.length;a<h;++a){let c=i[a];n=br(o,t,c,e,s,r,n),l.push(n),t=c}return n}function Zi(o,t){return t*Math.round(o/t)}function $p(o,t,i,e,s,r,n){if(t==i)return n;let l=Zi(o[t],s),a=Zi(o[t+1],s);t+=e,r[n++]=l,r[n++]=a;let h,c;do if(h=Zi(o[t],s),c=Zi(o[t+1],s),t+=e,t==i)return r[n++]=h,r[n++]=c,n;while(h==l&&c==a);for(;t<i;){let f=Zi(o[t],s),u=Zi(o[t+1],s);if(t+=e,f==h&&u==c)continue;let p=h-l,b=c-a,v=f-l,x=u-a;if(p*x==b*v&&(p<0&&v<p||p==v||p>0&&v>p)&&(b<0&&x<b||b==x||b>0&&x>b)){h=f,c=u;continue}r[n++]=h,r[n++]=c,l=h,a=c,h=f,c=u}return r[n++]=h,r[n++]=c,n}function ta(o,t,i,e,s,r,n,l){for(let a=0,h=i.length;a<h;++a){let c=i[a];n=$p(o,t,c,e,s,r,n),l.push(n),t=c}return n}function Zc(o,t,i,e,s,r,n,l){for(let a=0,h=i.length;a<h;++a){let c=i[a],f=[];n=ta(o,t,c,e,s,r,n,f),l.push(f),t=c[c.length-1]}return n}function Ue(o,t,i,e,s){s=s!==void 0?s:[];let r=0;for(let n=t;n<i;n+=e)s[r++]=o.slice(n,n+e);return s.length=r,s}function Ki(o,t,i,e,s){s=s!==void 0?s:[];let r=0;for(let n=0,l=i.length;n<l;++n){let a=i[n];s[r++]=Ue(o,t,a,e,s[r]),t=a}return s.length=r,s}function vr(o,t,i,e,s){s=s!==void 0?s:[];let r=0;for(let n=0,l=i.length;n<l;++n){let a=i[n];s[r++]=a.length===1&&a[0]===t?[]:Ki(o,t,a,e,s[r]),t=a[a.length-1]}return s.length=r,s}function ea(o,t,i,e){let s=0,r=o[i-e],n=o[i-e+1];for(;t<i;t+=e){let l=o[t],a=o[t+1];s+=n*l-r*a,r=l,n=a}return s/2}function ia(o,t,i,e){let s=0;for(let r=0,n=i.length;r<n;++r){let l=i[r];s+=ea(o,t,l,e),t=l}return s}function Kc(o,t,i,e){let s=0;for(let r=0,n=i.length;r<n;++r){let l=i[r];s+=ia(o,t,l,e),t=l[l.length-1]}return s}var sa=class o extends Ee{constructor(t,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}clone(){return new o(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,e,s){return s<Me(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,e,s))}getArea(){return ea(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let i=[];return i.length=br(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new o(i,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cs(this.flatCoordinates,0,t,this.stride),this.changed()}},ra=sa;var na=class o extends Ee{constructor(t,i){super(),this.setCoordinates(t,i)}clone(){let t=new o(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,e,s){let r=this.flatCoordinates,n=Qe(t,i,r[0],r[1]);if(n<s){let l=this.stride;for(let a=0;a<l;++a)e[a]=r[a];return e.length=l,n}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return oc(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return nr(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yc(this.flatCoordinates,0,t,this.stride),this.changed()}},Pe=na;function qc(o,t,i,e,s){return!hn(s,function(n){return!qi(o,t,i,e,n[0],n[1])})}function qi(o,t,i,e,s,r){let n=0,l=o[i-e],a=o[i-e+1];for(;t<i;t+=e){let h=o[t],c=o[t+1];a<=r?c>r&&(h-l)*(r-a)-(s-l)*(c-a)>0&&n++:c<=r&&(h-l)*(r-a)-(s-l)*(c-a)<0&&n--,l=h,a=c}return n!==0}function Cr(o,t,i,e,s,r){if(i.length===0||!qi(o,t,i[0],e,s,r))return!1;for(let n=1,l=i.length;n<l;++n)if(qi(o,i[n-1],i[n],e,s,r))return!1;return!0}function $c(o,t,i,e,s,r){if(i.length===0)return!1;for(let n=0,l=i.length;n<l;++n){let a=i[n];if(Cr(o,t,a,e,s,r))return!0;t=a[a.length-1]}return!1}function oa(o,t,i,e,s,r,n){let l,a,h,c,f,u,p,b=s[r+1],v=[];for(let E=0,L=i.length;E<L;++E){let S=i[E];for(c=o[S-e],u=o[S-e+1],l=t;l<S;l+=e)f=o[l],p=o[l+1],(b<=u&&p<=b||u<=b&&b<=p)&&(h=(b-u)/(p-u)*(f-c)+c,v.push(h)),c=f,u=p}let x=NaN,m=-1/0;for(v.sort(qe),c=v[0],l=1,a=v.length;l<a;++l){f=v[l];let E=Math.abs(f-c);E>m&&(h=(c+f)/2,Cr(o,t,i,e,h,b)&&(x=h,m=E)),c=f}return isNaN(x)&&(x=s[r]),n?(n.push(x,b,m),n):[x,b,m]}function Jc(o,t,i,e,s){let r=[];for(let n=0,l=i.length;n<l;++n){let a=i[n];r=oa(o,t,a,e,s,2*n,r),t=a[a.length-1]}return r}function _n(o,t,i,e,s){let r;for(t+=e;t<i;t+=e)if(r=s(o.slice(t-e,t),o.slice(t,t+e)),r)return r;return!1}function _r(o,t,i,e,s){let r=Io(Ut(),o,t,i,e);return Yt(s,r)?Ti(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:_n(o,t,i,e,function(n,l){return hc(s,n,l)}):!1}function Qc(o,t,i,e,s){for(let r=0,n=i.length;r<n;++r){if(_r(o,t,i[r],e,s))return!0;t=i[r]}return!1}function aa(o,t,i,e,s){return!!(_r(o,t,i,e,s)||qi(o,t,i,e,s[0],s[1])||qi(o,t,i,e,s[0],s[3])||qi(o,t,i,e,s[2],s[1])||qi(o,t,i,e,s[2],s[3]))}function la(o,t,i,e,s){if(!aa(o,t,i[0],e,s))return!1;if(i.length===1)return!0;for(let r=1,n=i.length;r<n;++r)if(qc(o,i[r-1],i[r],e,s)&&!_r(o,i[r-1],i[r],e,s))return!1;return!0}function td(o,t,i,e,s){for(let r=0,n=i.length;r<n;++r){let l=i[r];if(la(o,t,l,e,s))return!0;t=l[l.length-1]}return!1}function ed(o,t,i,e){for(;t<i-e;){for(let s=0;s<e;++s){let r=o[t+s];o[t+s]=o[i-e+s],o[i-e+s]=r}t+=e,i-=e}}function id(o,t,i,e){let s=0,r=o[i-e],n=o[i-e+1];for(;t<i;t+=e){let l=o[t],a=o[t+1];s+=(l-r)*(a+n),r=l,n=a}return s===0?void 0:s>0}function ha(o,t,i,e,s){s=s!==void 0?s:!1;for(let r=0,n=i.length;r<n;++r){let l=i[r],a=id(o,t,l,e);if(r===0){if(s&&a||!s&&!a)return!1}else if(s&&!a||!s&&a)return!1;t=l}return!0}function sd(o,t,i,e,s){for(let r=0,n=i.length;r<n;++r){let l=i[r];if(!ha(o,t,l,e,s))return!1;l.length&&(t=l[l.length-1])}return!0}function wn(o,t,i,e,s){s=s!==void 0?s:!1;for(let r=0,n=i.length;r<n;++r){let l=i[r],a=id(o,t,l,e);(r===0?s&&a||!s&&!a:s&&!a||!s&&a)&&ed(o,t,l,e),t=l}return t}function ca(o,t,i,e,s){for(let r=0,n=i.length;r<n;++r)t=wn(o,t,i[r],e,s);return t}var Sn=class o extends Ee{constructor(t,i,e){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&e?(this.setFlatCoordinates(i,t),this.ends_=e):this.setCoordinates(t,i)}appendLinearRing(t){this.flatCoordinates?xe(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new o(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,e,s){return s<Me(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gr(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xr(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,e,s))}containsXY(t,i){return Cr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)}getArea(){return ia(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),wn(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,Ki(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let t=Ge(this.getExtent());this.flatInteriorPoint_=oa(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Pe(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new ra(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){let t=this.layout,i=this.flatCoordinates,e=this.ends_,s=[],r=0;for(let n=0,l=e.length;n<l;++n){let a=e[n],h=new ra(i.slice(r,a),t);s.push(h),r=a}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;ha(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=wn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let i=[],e=[];return i.length=ta(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,e),new o(i,"XY",e)}getType(){return"Polygon"}intersectsExtent(t){return la(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let e=yr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=e.length===0?0:e[e.length-1],this.changed()}},hi=Sn;function da(o){if(Yi(o))throw new Error("Cannot create polygon from empty extent");let t=o[0],i=o[1],e=o[2],s=o[3],r=[t,i,t,s,e,s,e,i,t,i];return new Sn(r,"XY",[r.length])}var ua=0,fa=class extends Zt{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=yn(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Pc(),t.center&&(t.center=ii(t.center,this.projection_)),t.extent&&(t.extent=si(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){let i=Object.assign({},t);for(let l in We)delete i[l];this.setProperties(i,!0);let e=Qp(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=e.minZoom;let s=Jp(t),r=e.constraint,n=tf(t);this.constraints_={center:s,resolution:r,rotation:n},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let i=this.padding_;this.padding_=t;let e=this.getCenterInternal();if(e){let s=t||[0,0,0,0];i=i||[0,0,0,0];let r=this.getResolution(),n=r/2*(s[3]-i[3]+i[1]-s[1]),l=r/2*(s[0]-i[0]+i[2]-s[2]);this.setCenterInternal([e[0]+n,e[1]-l])}}getUpdatedOptions_(t){let i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Object.assign({},i,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let i=new Array(arguments.length);for(let e=0;e<i.length;++e){let s=arguments[e];s.center&&(s=Object.assign({},s),s.center=ii(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=ii(s.anchor,this.getProjection())),i[e]=s}this.animateInternal.apply(this,i)}animateInternal(t){let i=arguments.length,e;i>1&&typeof arguments[i-1]=="function"&&(e=arguments[i-1],--i);let s=0;for(;s<i&&!this.isDef();++s){let c=arguments[s];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(s===i){e&&Mn(e,!0);return}let r=Date.now(),n=this.targetCenter_.slice(),l=this.targetResolution_,a=this.targetRotation_,h=[];for(;s<i;++s){let c=arguments[s],f={start:r,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||Oc,callback:e};if(c.center&&(f.sourceCenter=n,f.targetCenter=c.center.slice(),n=f.targetCenter),c.zoom!==void 0?(f.sourceResolution=l,f.targetResolution=this.getResolutionForZoom(c.zoom),l=f.targetResolution):c.resolution&&(f.sourceResolution=l,f.targetResolution=c.resolution,l=f.targetResolution),c.rotation!==void 0){f.sourceRotation=a;let u=Li(c.rotation-a+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=a+u,a=f.targetRotation}ef(f)?f.complete=!0:r+=f.duration,h.push(f)}this.animations_.push(h),this.setHint(qt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[qt.ANIMATING]>0}getInteracting(){return this.hints_[qt.INTERACTING]>0}cancelAnimations(){this.setHint(qt.ANIMATING,-this.hints_[qt.ANIMATING]);let t;for(let i=0,e=this.animations_.length;i<e;++i){let s=this.animations_[i];if(s[0].callback&&Mn(s[0].callback,!1),!t)for(let r=0,n=s.length;r<n;++r){let l=s[r];if(!l.complete){t=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let t=Date.now(),i=!1;for(let e=this.animations_.length-1;e>=0;--e){let s=this.animations_[e],r=!0;for(let n=0,l=s.length;n<l;++n){let a=s[n];if(a.complete)continue;let h=t-a.start,c=a.duration>0?h/a.duration:1;c>=1?(a.complete=!0,c=1):r=!1;let f=a.easing(c);if(a.sourceCenter){let u=a.sourceCenter[0],p=a.sourceCenter[1],b=a.targetCenter[0],v=a.targetCenter[1];this.nextCenter_=a.targetCenter;let x=u+f*(b-u),m=p+f*(v-p);this.targetCenter_=[x,m]}if(a.sourceResolution&&a.targetResolution){let u=f===1?a.targetResolution:a.sourceResolution+f*(a.targetResolution-a.sourceResolution);if(a.anchor){let p=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(u,0,p,!0);this.targetCenter_=this.calculateCenterZoom(b,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=u,this.applyTargetState_(!0)}if(a.sourceRotation!==void 0&&a.targetRotation!==void 0){let u=f===1?Li(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+f*(a.targetRotation-a.sourceRotation);if(a.anchor){let p=this.constraints_.rotation(u,!0);this.targetCenter_=this.calculateCenterRotate(p,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=u}if(this.applyTargetState_(!0),i=!0,!a.complete)break}if(r){this.animations_[e]=null,this.setHint(qt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let n=s[0].callback;n&&Mn(n,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,i){let e,s=this.getCenterInternal();return s!==void 0&&(e=[s[0]-i[0],s[1]-i[1]],Gs(e,t-this.getRotation()),_c(e,i)),e}calculateCenterZoom(t,i){let e,s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){let n=i[0]-t*(i[0]-s[0])/r,l=i[1]-t*(i[1]-s[1])/r;e=[n,l]}return e}getViewportSize_(t){let i=this.viewportSize_;if(t){let e=i[0],s=i[1];return[Math.abs(e*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(e*Math.sin(t))+Math.abs(s*Math.cos(t))]}return i}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let t=this.getCenterInternal();return t&&pr(t,this.getProjection())}getCenterInternal(){return this.get(We.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){let i=this.calculateExtentInternal(t);return Xs(i,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();let i=this.getCenterInternal();gt(i,1);let e=this.getResolution();gt(e!==void 0,2);let s=this.getRotation();return gt(s!==void 0,3),ar(i,e,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(We.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,i){return this.getResolutionForExtentInternal(si(t,this.getProjection()),i)}getResolutionForExtentInternal(t,i){i=i||this.getViewportSizeMinusPadding_();let e=At(t)/i[0],s=ge(t)/i[1];return Math.max(e,s)}getResolutionForValueFunction(t){t=t||2;let i=this.getConstrainedResolution(this.maxResolution_),e=this.minResolution_,s=Math.log(i/e)/Math.log(t);return function(r){return i/Math.pow(t,r*s)}}getRotation(){return this.get(We.ROTATION)}getValueForResolutionFunction(t){let i=Math.log(t||2),e=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(e/s)/i;return function(n){return Math.log(e/n)/i/r}}getViewportSizeMinusPadding_(t){let i=this.getViewportSize_(t),e=this.padding_;return e&&(i=[i[0]-e[1]-e[3],i[1]-e[0]-e[2]]),i}getState(){let t=this.getProjection(),i=this.getResolution(),e=this.getRotation(),s=this.getCenterInternal(),r=this.padding_;if(r){let n=this.getViewportSizeMinusPadding_();s=pa(s,this.getViewportSize_(),[n[0]/2+r[3],n[1]/2+r[0]],i,e)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:e,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t,i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t}getZoomForResolution(t){let i=this.minZoom_||0,e,s;if(this.resolutions_){let r=Ps(this.resolutions_,t,1);i=r,e=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=e/this.resolutions_[r+1]}else e=this.maxResolution_,s=this.zoomFactor_;return i+Math.log(e/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let i=Rt(Math.floor(t),0,this.resolutions_.length-2),e=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(e,Rt(t-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,i){let e;if(gt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){gt(!Yi(t),25);let s=si(t,this.getProjection());e=da(s)}else if(t.getType()==="Circle"){let s=si(t.getExtent(),this.getProjection());e=da(s),e.rotate(this.getRotation(),Ge(s))}else{let s=bn();s?e=t.clone().transform(s,this.getProjection()):e=t}this.fitInternal(e,i)}rotatedExtentForGeometry(t){let i=this.getRotation(),e=Math.cos(i),s=Math.sin(-i),r=t.getFlatCoordinates(),n=t.getStride(),l=1/0,a=1/0,h=-1/0,c=-1/0;for(let f=0,u=r.length;f<u;f+=n){let p=r[f]*e-r[f+1]*s,b=r[f]*s+r[f+1]*e;l=Math.min(l,p),a=Math.min(a,b),h=Math.max(h,p),c=Math.max(c,b)}return[l,a,h,c]}fitInternal(t,i){i=i||{};let e=i.size;e||(e=this.getViewportSizeMinusPadding_());let s=i.padding!==void 0?i.padding:[0,0,0,0],r=i.nearest!==void 0?i.nearest:!1,n;i.minResolution!==void 0?n=i.minResolution:i.maxZoom!==void 0?n=this.getResolutionForZoom(i.maxZoom):n=0;let l=this.rotatedExtentForGeometry(t),a=this.getResolutionForExtentInternal(l,[e[0]-s[1]-s[3],e[1]-s[0]-s[2]]);a=isNaN(a)?n:Math.max(a,n),a=this.getConstrainedResolution(a,r?0:1);let h=this.getRotation(),c=Math.sin(h),f=Math.cos(h),u=Ge(l);u[0]+=(s[1]-s[3])/2*a,u[1]+=(s[0]-s[2])/2*a;let p=u[0]*f-u[1]*c,b=u[1]*f+u[0]*c,v=this.getConstrainedCenter([p,b],a),x=i.callback?i.callback:$e;i.duration!==void 0?this.animateInternal({resolution:a,center:v,duration:i.duration,easing:i.easing},x):(this.targetResolution_=a,this.targetCenter_=v,this.applyTargetState_(!1,!0),Mn(x,!0))}centerOn(t,i,e){this.centerOnInternal(ii(t,this.getProjection()),i,e)}centerOnInternal(t,i,e){this.setCenterInternal(pa(t,i,e,this.getResolution(),this.getRotation()))}calculateCenterShift(t,i,e,s){let r,n=this.padding_;if(n&&t){let l=this.getViewportSizeMinusPadding_(-e),a=pa(t,s,[l[0]/2+n[3],l[1]/2+n[0]],i,e);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){let i=pr(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])}adjustCenterInternal(t){let i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])}adjustResolution(t,i){i=i&&ii(i,this.getProjection()),this.adjustResolutionInternal(t,i)}adjustResolutionInternal(t,i){let e=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,e);i&&(this.targetCenter_=this.calculateCenterZoom(r,i)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)}adjustRotation(t,i){i&&(i=ii(i,this.getProjection())),this.adjustRotationInternal(t,i)}adjustRotationInternal(t,i){let e=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,e);i&&(this.targetCenter_=this.calculateCenterRotate(s,i)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&ii(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,i){let e=this.getAnimating()||this.getInteracting()||i,s=this.constraints_.rotation(this.targetRotation_,e),r=this.getViewportSize_(s),n=this.constraints_.resolution(this.targetResolution_,0,r,e),l=this.constraints_.center(this.targetCenter_,n,r,e,this.calculateCenterShift(this.targetCenter_,n,s,r));this.get(We.ROTATION)!==s&&this.set(We.ROTATION,s),this.get(We.RESOLUTION)!==n&&(this.set(We.RESOLUTION,n),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(We.CENTER)||!ls(this.get(We.CENTER),l))&&this.set(We.CENTER,l),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,i,e){t=t!==void 0?t:200;let s=i||0,r=this.constraints_.rotation(this.targetRotation_),n=this.getViewportSize_(r),l=this.constraints_.resolution(this.targetResolution_,s,n),a=this.constraints_.center(this.targetCenter_,l,n,!1,this.calculateCenterShift(this.targetCenter_,l,r,n));if(t===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=r,this.targetCenter_=a,this.applyTargetState_();return}e=e||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==r||!this.getCenterInternal()||!ls(this.getCenterInternal(),a))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:l,duration:t,easing:Ve,anchor:e}))}beginInteraction(){this.resolveConstraints(0),this.setHint(qt.INTERACTING,1)}endInteraction(t,i,e){e=e&&ii(e,this.getProjection()),this.endInteractionInternal(t,i,e)}endInteractionInternal(t,i,e){this.getInteracting()&&(this.setHint(qt.INTERACTING,-1),this.resolveConstraints(t,i,e))}getConstrainedCenter(t,i){let e=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),e)}getConstrainedZoom(t,i){let e=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(e,i))}getConstrainedResolution(t,i){i=i||0;let e=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,e)}};function Mn(o,t){setTimeout(function(){o(t)},0)}function Jp(o){if(o.extent!==void 0){let i=o.smoothExtentConstraint!==void 0?o.smoothExtentConstraint:!0;return Uo(o.extent,o.constrainOnlyCenter,i)}let t=yn(o.projection,"EPSG:3857");if(o.multiWorld!==!0&&t.isGlobal()){let i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Uo(i,!1,!1)}return Dc}function Qp(o){let t,i,e,n=o.minZoom!==void 0?o.minZoom:ua,l=o.maxZoom!==void 0?o.maxZoom:28,a=o.zoomFactor!==void 0?o.zoomFactor:2,h=o.multiWorld!==void 0?o.multiWorld:!1,c=o.smoothResolutionConstraint!==void 0?o.smoothResolutionConstraint:!0,f=o.showFullExtent!==void 0?o.showFullExtent:!1,u=yn(o.projection,"EPSG:3857"),p=u.getExtent(),b=o.constrainOnlyCenter,v=o.extent;if(!h&&!v&&u.isGlobal()&&(b=!1,v=p),o.resolutions!==void 0){let x=o.resolutions;i=x[n],e=x[l]!==void 0?x[l]:x[x.length-1],o.constrainResolution?t=Lc(x,c,!b&&v,f):t=Ko(i,e,c,!b&&v,f)}else{let m=(p?Math.max(At(p),ge(p)):360*ti.degrees/u.getMetersPerUnit())/256/Math.pow(2,ua),E=m/Math.pow(2,28-ua);i=o.maxResolution,i!==void 0?n=0:i=m/Math.pow(a,n),e=o.minResolution,e===void 0&&(o.maxZoom!==void 0?o.maxResolution!==void 0?e=i/Math.pow(a,l):e=m/Math.pow(a,l):e=E),l=n+Math.floor(Math.log(i/e)/Math.log(a)),e=i/Math.pow(a,l-n),o.constrainResolution?t=Ic(a,i,e,c,!b&&v,f):t=Ko(i,e,c,!b&&v,f)}return{constraint:t,maxResolution:i,minResolution:e,minZoom:n,zoomFactor:a}}function tf(o){if(o.enableRotation!==void 0?o.enableRotation:!0){let i=o.constrainRotation;return i===void 0||i===!0?Rc():i===!1?qo:typeof i=="number"?kc(i):qo}return Ws}function ef(o){return!(o.sourceCenter&&o.targetCenter&&!ls(o.sourceCenter,o.targetCenter)||o.sourceResolution!==o.targetResolution||o.sourceRotation!==o.targetRotation)}function pa(o,t,i,e,s){let r=Math.cos(-s),n=Math.sin(-s),l=o[0]*r-o[1]*n,a=o[1]*r+o[0]*n;l+=(t[0]/2-i[0])*e,a+=(i[1]-t[1]/2)*e,n=-n;let h=l*r-a*n,c=a*r+l*n;return[h,c]}var ve=fa;var ga=class extends pn{constructor(t){let i=Object.assign({},t);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(kt.SOURCE,this.handleSourcePropertyChange_);let e=t.source?t.source:null;this.setSource(e)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(kt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Tt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let t=this.getSource();t&&(this.sourceChangeKey_=wt(t,ut.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let i,e=this.getMapInternal();!t&&e&&(t=e.getView()),t instanceof ve?i={viewState:t.getState(),extent:t.calculateExtent()}:i=t,!i.layerStatesArray&&e&&(i.layerStatesArray=e.getLayerGroup().getLayerStatesArray());let s;i.layerStatesArray?s=i.layerStatesArray.find(n=>n.layer===this):s=this.getLayerState();let r=this.getExtent();return wr(s,i.viewState)&&(!r||Yt(r,i.extent))}getAttributions(t){if(!this.isVisible(t))return[];let i,e=this.getSource();if(e&&(i=e.getAttributions()),!i)return[];let s=t instanceof ve?t.getViewStateAndExtent():t,r=i(s);return Array.isArray(r)||(r=[r]),r}render(t,i){let e=this.getRenderer();return e.prepareFrame(t)?(this.rendered=!0,e.renderFrame(t,i)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(kt.MAP,t)}getMapInternal(){return this.get(kt.MAP)}setMap(t){this.mapPrecomposeKey_&&(Tt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Tt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=wt(t,be.PRECOMPOSE,function(i){let s=i.frameState.layerStatesArray,r=this.getLayerState(!1);gt(!s.some(function(n){return n.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=wt(this,ut.CHANGE,t.render,t),this.changed())}setSource(t){this.set(kt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function wr(o,t){if(!o.visible)return!1;let i=t.resolution;if(i<o.minResolution||i>=o.maxResolution)return!1;let e=t.zoom;return e>o.minZoom&&e<=o.maxZoom}var ds=ga;var ma=class extends Es{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,i){ft()}calculateMatrices2D(t){let i=t.viewState,e=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;ye(e,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),Is(s,e)}forEachFeatureAtCoordinate(t,i,e,s,r,n,l,a){let h,c=i.viewState;function f(S,w,R,O){return r.call(n,w,S?R:null,O)}let u=c.projection,p=mn(t.slice(),u),b=[[0,0]];if(u.canWrapX()&&s){let S=u.getExtent(),w=At(S);b.push([-w,0],[w,0])}let v=i.layerStatesArray,x=v.length,m=[],E=[];for(let S=0;S<b.length;S++)for(let w=x-1;w>=0;--w){let R=v[w],O=R.layer;if(O.hasRenderer()&&wr(R,c)&&l.call(a,O)){let I=O.getRenderer(),_=O.getSource();if(I&&_){let A=_.getWrapX()?p:t,F=f.bind(null,R.managed);E[0]=A[0]+b[S][0],E[1]=A[1]+b[S][1],h=I.forEachFeatureAtCoordinate(E,i,e,F,m)}if(h)return h}}if(m.length===0)return;let L=1/m.length;return m.forEach((S,w)=>S.distanceSq+=w*L),m.sort((S,w)=>S.distanceSq-w.distanceSq),m.some(S=>h=S.callback(S.feature,S.layer,S.geometry)),h}hasFeatureAtCoordinate(t,i,e,s,r,n){return this.forEachFeatureAtCoordinate(t,i,e,s,Ei,this,r,n)!==void 0}getMap(){return this.map_}renderFrame(t){ft()}flushDeclutterItems(t){}scheduleExpireIconCache(t){Ns.canExpireCache()&&t.postRenderFunctions.push(sf)}};function sf(o,t){Ns.expire()}var nd=ma;var xa=class extends te{constructor(t,i,e,s){super(t),this.inversePixelTransform=i,this.frameState=e,this.context=s}},En=xa;var Sr="ol-hidden";var $i="ol-unselectable";var Vs="ol-control",ya="ol-collapsed",rf=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),od=["style","variant","weight","size","lineHeight","family"],ba=function(o){let t=o.match(rf);if(!t)return null;let i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let e=0,s=od.length;e<s;++e){let r=t[e+1];r!==void 0&&(i[od[e]]=r)}return i.families=i.family.split(/,\s?/),i};function Xt(o,t,i,e){let s;return i&&i.length?s=i.shift():Ls?s=new OffscreenCanvas(o||300,t||300):s=document.createElement("canvas"),o&&(s.width=o),t&&(s.height=t),s.getContext("2d",e)}function us(o){let t=o.canvas;t.width=1,t.height=1,o.clearRect(0,0,1,1)}function va(o,t){let i=t.parentNode;i&&i.replaceChild(o,t)}function Mr(o){return o&&o.parentNode?o.parentNode.removeChild(o):null}function ad(o){for(;o.lastChild;)o.removeChild(o.lastChild)}function ld(o,t){let i=o.childNodes;for(let e=0;;++e){let s=i[e],r=t[e];if(!s&&!r)break;if(s!==r){if(!s){o.appendChild(r);continue}if(!r){o.removeChild(s),--e;continue}o.insertBefore(r,s)}}}var Tn="10px sans-serif",$t="#000",ps="round",Te=[],Ae=0,di="round",ki=10,Ri="#000",Ji="center",fs="middle",Oi=[0,0,0,0],Fi=1,ci=new Zt,Ys=null,Ca,_a={},hd=function(){let t="32px ",i=["monospace","serif"],e=i.length,s="wmytzilWMYTZIL@#/&?$%10\uF013",r,n;function l(h,c,f){let u=!0;for(let p=0;p<e;++p){let b=i[p];if(n=Pn(h+" "+c+" "+t+b,s),f!=b){let v=Pn(h+" "+c+" "+t+f+","+b,s);u=u&&v!=n}}return!!u}function a(){let h=!0,c=ci.getKeys();for(let f=0,u=c.length;f<u;++f){let p=c[f];ci.get(p)<100&&(l.apply(this,p.split(`
`))?(ai(_a),Ys=null,Ca=void 0,ci.set(p,100)):(ci.set(p,ci.get(p)+1,!0),h=!1))}h&&(clearInterval(r),r=void 0)}return function(h){let c=ba(h);if(!c)return;let f=c.families;for(let u=0,p=f.length;u<p;++u){let b=f[u],v=c.style+`
`+c.weight+`
`+b;ci.get(v)===void 0&&(ci.set(v,100,!0),l(c.style,c.weight,b)||(ci.set(v,0,!0),r===void 0&&(r=setInterval(a,32))))}}}(),nf=function(){let o;return function(t){let i=_a[t];if(i==null){if(Ls){let e=ba(t),s=cd(t,"\u017Dg");i=(isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else o||(o=document.createElement("div"),o.innerHTML="M",o.style.minHeight="0",o.style.maxHeight="none",o.style.height="auto",o.style.padding="0",o.style.border="none",o.style.position="absolute",o.style.display="block",o.style.left="-99999px"),o.style.font=t,document.body.appendChild(o),i=o.offsetHeight,document.body.removeChild(o);_a[t]=i}return i}}();function cd(o,t){return Ys||(Ys=Xt(1,1)),o!=Ca&&(Ys.font=o,Ca=Ys.font),Ys.measureText(t)}function Pn(o,t){return cd(o,t).width}function wa(o,t,i){if(t in i)return i[t];let e=t.split(`
`).reduce((s,r)=>Math.max(s,Pn(o,r)),0);return i[t]=e,e}function dd(o,t){let i=[],e=[],s=[],r=0,n=0,l=0,a=0;for(let h=0,c=t.length;h<=c;h+=2){let f=t[h];if(f===`
`||h===c){r=Math.max(r,n),s.push(n),n=0,l+=a;continue}let u=t[h+1]||o.font,p=Pn(u,f);i.push(p),n+=p;let b=nf(u);e.push(b),a=Math.max(a,b)}return{width:r,height:l,widths:i,heights:e,lineWidths:s}}function ud(o,t,i,e,s,r,n,l,a,h,c){o.save(),i!==1&&(o.globalAlpha*=i),t&&o.setTransform.apply(o,t),e.contextInstructions?(o.translate(a,h),o.scale(c[0],c[1]),of(e,o)):c[0]<0||c[1]<0?(o.translate(a,h),o.scale(c[0],c[1]),o.drawImage(e,s,r,n,l,0,0,n,l)):o.drawImage(e,s,r,n,l,a,h,n*c[0],l*c[1]),o.restore()}function of(o,t){let i=o.contextInstructions;for(let e=0,s=i.length;e<s;e+=2)Array.isArray(i[e+1])?t[i[e]].apply(t,i[e+1]):t[i[e]]=i[e+1]}var Sa=class extends nd{constructor(t){super(t),this.fontChangeListenerKey_=wt(ci,Ke.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");let i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=$i+" ol-layers";let e=t.getViewport();e.insertBefore(this.element_,e.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,i){let e=this.getMap();if(e.hasListener(t)){let s=new En(t,void 0,i);e.dispatchEvent(s)}}disposeInternal(){Tt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(be.PRECOMPOSE,t);let i=t.layerStatesArray.sort(function(n,l){return n.zIndex-l.zIndex}),e=t.viewState;this.children_.length=0;let s=this.declutterLayers_;s.length=0;let r=null;for(let n=0,l=i.length;n<l;++n){let a=i[n];t.layerIndex=n;let h=a.layer,c=h.getSourceState();if(!wr(a,e)||c!="ready"&&c!="undefined"){h.unrender();continue}let f=h.render(t,r);f&&(f!==r&&(this.children_.push(f),r=f),"getDeclutter"in h&&s.push(h))}this.flushDeclutterItems(t),ld(this.element_,this.children_),this.dispatchRenderEvent(be.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){let i=this.declutterLayers_;for(let e=i.length-1;e>=0;--e)i[e].renderDeclutter(t);i.length=0}},pd=Sa;var ri=class extends te{constructor(t,i){super(t),this.layer=i}},Ma={LAYERS:"layers"},Ea=class o extends pn{constructor(t){t=t||{};let i=Object.assign({},t);delete i.layers;let e=t.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ma.LAYERS,this.handleLayersChanged_),e?Array.isArray(e)?e=new ne(e.slice(),{unique:!0}):gt(typeof e.getArray=="function",43):e=new ne(void 0,{unique:!0}),this.setLayers(e)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Tt),this.layersListenerKeys_.length=0;let t=this.getLayers();this.layersListenerKeys_.push(wt(t,ee.ADD,this.handleLayersAdd_,this),wt(t,ee.REMOVE,this.handleLayersRemove_,this));for(let e in this.listenerKeys_)this.listenerKeys_[e].forEach(Tt);ai(this.listenerKeys_);let i=t.getArray();for(let e=0,s=i.length;e<s;e++){let r=i[e];this.registerLayerListeners_(r),this.dispatchEvent(new ri("addlayer",r))}this.changed()}registerLayerListeners_(t){let i=[wt(t,Ke.PROPERTYCHANGE,this.handleLayerChange_,this),wt(t,ut.CHANGE,this.handleLayerChange_,this)];t instanceof o&&i.push(wt(t,"addlayer",this.handleLayerGroupAdd_,this),wt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Mt(t)]=i}handleLayerGroupAdd_(t){this.dispatchEvent(new ri("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new ri("removelayer",t.layer))}handleLayersAdd_(t){let i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new ri("addlayer",i)),this.changed()}handleLayersRemove_(t){let i=t.element,e=Mt(i);this.listenerKeys_[e].forEach(Tt),delete this.listenerKeys_[e],this.dispatchEvent(new ri("removelayer",i)),this.changed()}getLayers(){return this.get(Ma.LAYERS)}setLayers(t){let i=this.getLayers();if(i){let e=i.getArray();for(let s=0,r=e.length;s<r;++s)this.dispatchEvent(new ri("removelayer",e[s]))}this.set(Ma.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(i){i.getLayersArray(t)}),t}getLayerStatesArray(t){let i=t!==void 0?t:[],e=i.length;this.getLayers().forEach(function(n){n.getLayerStatesArray(i)});let s=this.getLayerState(),r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let n=e,l=i.length;n<l;n++){let a=i[n];a.opacity*=s.opacity,a.visible=a.visible&&s.visible,a.maxResolution=Math.min(a.maxResolution,s.maxResolution),a.minResolution=Math.max(a.minResolution,s.minResolution),a.minZoom=Math.max(a.minZoom,s.minZoom),a.maxZoom=Math.min(a.maxZoom,s.maxZoom),s.extent!==void 0&&(a.extent!==void 0?a.extent=Vi(a.extent,s.extent):a.extent=s.extent),a.zIndex===void 0&&(a.zIndex=r)}return i}getSourceState(){return"ready"}},Er=Ea;var Pa=class extends te{constructor(t,i,e){super(t),this.map=i,this.frameState=e!==void 0?e:null}},Qi=Pa;var Ta=class extends Qi{constructor(t,i,e,s,r,n){super(t,i,r),this.originalEvent=e,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=n}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},ui=Ta;var Nt={SINGLECLICK:"singleclick",CLICK:ut.CLICK,DBLCLICK:ut.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Pr={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Aa=class extends Gi{constructor(t,i){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;let e=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=e,this.pointerdownListenerKey_=wt(e,Pr.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=wt(e,Pr.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ut.TOUCHMOVE,this.boundHandleTouchMove_,sn?{passive:!1}:!1)}emulateClick_(t){let i=new ui(Nt.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new ui(Nt.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let e=new ui(Nt.SINGLECLICK,this.map_,t);this.dispatchEvent(e)},250)}updateActivePointers_(t){let i=t,e=i.pointerId;if(i.type==Nt.POINTERUP||i.type==Nt.POINTERCANCEL){delete this.trackedTouches_[e];for(let s in this.trackedTouches_)if(this.trackedTouches_[s].target!==i.target){delete this.trackedTouches_[s];break}}else(i.type==Nt.POINTERDOWN||i.type==Nt.POINTERMOVE)&&(this.trackedTouches_[e]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);let i=new ui(Nt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Tt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);let i=new ui(Nt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){let e=this.map_.getOwnerDocument();this.dragListenerKeys_.push(wt(e,Nt.POINTERMOVE,this.handlePointerMove_,this),wt(e,Nt.POINTERUP,this.handlePointerUp_,this),wt(this.element_,Nt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==e&&this.dragListenerKeys_.push(wt(this.element_.getRootNode(),Nt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;let i=new ui(Nt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;let i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new ui(Nt.POINTERMOVE,this.map_,t,i))}handleTouchMove_(t){let i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Tt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ut.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Tt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Tt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},fd=Aa;var pi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var ae={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var Tr=1/0,Da=class{constructor(t,i){this.priorityFunction_=t,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ai(this.queuedElements_)}dequeue(){let t=this.elements_,i=this.priorities_,e=t[0];t.length==1?(t.length=0,i.length=0):(t[0]=t.pop(),i[0]=i.pop(),this.siftUp_(0));let s=this.keyFunction_(e);return delete this.queuedElements_[s],e}enqueue(t){gt(!(this.keyFunction_(t)in this.queuedElements_),31);let i=this.priorityFunction_(t);return i!=Tr?(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){let i=this.elements_,e=this.priorities_,s=i.length,r=i[t],n=e[t],l=t;for(;t<s>>1;){let a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),c=h<s&&e[h]<e[a]?h:a;i[t]=i[c],e[t]=e[c],t=c}i[t]=r,e[t]=n,this.siftDown_(l,t)}siftDown_(t,i){let e=this.elements_,s=this.priorities_,r=e[i],n=s[i];for(;i>t;){let l=this.getParentIndex_(i);if(s[l]>n)e[i]=e[l],s[i]=s[l],i=l;else break}e[i]=r,s[i]=n}reprioritize(){let t=this.priorityFunction_,i=this.elements_,e=this.priorities_,s=0,r=i.length,n,l,a;for(l=0;l<r;++l)n=i[l],a=t(n),a==Tr?delete this.queuedElements_[this.keyFunction_(n)]:(e[s]=a,i[s++]=n);i.length=s,e.length=s,this.heapify_()}},gd=Da;var pt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var La=class extends gd{constructor(t,i){super(function(e){return t.apply(null,e)},function(e){return e[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){let i=super.enqueue(t);return i&&t[0].addEventListener(ut.CHANGE,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){let i=t.target,e=i.getState();if(e===pt.LOADED||e===pt.ERROR||e===pt.EMPTY){e!==pt.ERROR&&i.removeEventListener(ut.CHANGE,this.boundHandleTileChange_);let s=i.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,i){let e=0,s,r,n;for(;this.tilesLoading_<t&&e<i&&this.getCount()>0;)r=this.dequeue()[0],n=r.getKey(),s=r.getState(),s===pt.IDLE&&!(n in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++e,r.load())}},md=La;function xd(o,t,i,e,s){if(!o||!(i in o.wantedTiles))return Tr;if(!o.wantedTiles[i][t.getKey()])return Tr;let r=o.viewState.center,n=e[0]-r[0],l=e[1]-r[1];return 65536*Math.log(s)+Math.sqrt(n*n+l*l)/s}var Ia=class extends Zt{constructor(t){super();let i=t.element;i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Mr(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Mr(this.element);for(let i=0,e=this.listenerKeys.length;i<e;++i)Tt(this.listenerKeys[i]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==$e&&this.listenerKeys.push(wt(t,pi.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}},Us=Ia;var ka=class extends Us{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let i=t.className!==void 0?t.className:"ol-attribution",e=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:i+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",n=t.collapseClassName!==void 0?t.collapseClassName:i+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=n):this.collapseLabel_=r;let l=t.label!==void 0?t.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=s):this.label_=l;let a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=e,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(ut.CLICK,this.handleClick_.bind(this),!1);let h=i+" "+$i+" "+Vs+(this.collapsed_&&this.collapsible_?" "+ya:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){let i=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),e=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(e),i}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let i=this.collectSourceAttributions_(t),e=i.length>0;if(this.renderedVisible_!=e&&(this.element.style.display=e?"":"none",this.renderedVisible_=e),!pe(i,this.renderedAttributions_)){ad(this.ulElement_);for(let s=0,r=i.length;s<r;++s){let n=document.createElement("li");n.innerHTML=i[s],this.ulElement_.appendChild(n)}this.renderedAttributions_=i}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ya),this.collapsed_?va(this.collapseLabel_,this.label_):va(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},yd=ka;var Ra=class extends Us{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});let i=t.className!==void 0?t.className:"ol-rotate",e=t.label!==void 0?t.label:"\u21E7",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof e=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=e):(this.label_=e,this.label_.classList.add(s));let r=t.tipLabel?t.tipLabel:"Reset rotation",n=document.createElement("button");n.className=i+"-reset",n.setAttribute("type","button"),n.title=r,n.appendChild(this.label_),n.addEventListener(ut.CLICK,this.handleClick_.bind(this),!1);let l=i+" "+$i+" "+Vs,a=this.element;a.className=l,a.appendChild(n),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Sr)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let i=this.getMap().getView();if(!i)return;let e=i.getRotation();e!==void 0&&(this.duration_>0&&e%(2*Math.PI)!==0?i.animate({rotation:0,duration:this.duration_,easing:Ve}):i.setRotation(0))}render(t){let i=t.frameState;if(!i)return;let e=i.viewState.rotation;if(e!=this.rotation_){let s="rotate("+e+"rad)";if(this.autoHide_){let r=this.element.classList.contains(Sr);!r&&e===0?this.element.classList.add(Sr):r&&e!==0&&this.element.classList.remove(Sr)}this.label_.style.transform=s}this.rotation_=e}},bd=Ra;var Oa=class extends Us{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});let i=t.className!==void 0?t.className:"ol-zoom",e=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:i+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:i+"-out",n=t.zoomInLabel!==void 0?t.zoomInLabel:"+",l=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",a=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=a,c.appendChild(typeof n=="string"?document.createTextNode(n):n),c.addEventListener(ut.CLICK,this.handleClick_.bind(this,e),!1);let f=document.createElement("button");f.className=r,f.setAttribute("type","button"),f.title=h,f.appendChild(typeof l=="string"?document.createTextNode(l):l),f.addEventListener(ut.CLICK,this.handleClick_.bind(this,-e),!1);let u=i+" "+$i+" "+Vs,p=this.element;p.className=u,p.appendChild(c),p.appendChild(f),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,i){i.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){let e=this.getMap().getView();if(!e)return;let s=e.getZoom();if(s!==void 0){let r=e.getConstrainedZoom(s+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:r,duration:this.duration_,easing:Ve})):e.setZoom(r)}}},vd=Oa;function gs(o){o=o||{};let t=new ne;return(o.zoom!==void 0?o.zoom:!0)&&t.push(new vd(o.zoomOptions)),(o.rotate!==void 0?o.rotate:!0)&&t.push(new bd(o.rotateOptions)),(o.attribution!==void 0?o.attribution:!0)&&t.push(new yd(o.attributionOptions)),t}var Fa={ACTIVE:"active"};var za=class extends Zt{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Fa.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Fa.ACTIVE,t)}setMap(t){this.map_=t}};function Cd(o,t,i){let e=o.getCenterInternal();if(e){let s=[e[0]+t[0],e[1]+t[1]];o.animateInternal({duration:i!==void 0?i:250,easing:Fc,center:o.getConstrainedCenter(s)})}}function Hs(o,t,i,e){let s=o.getZoom();if(s===void 0)return;let r=o.getConstrainedZoom(s+t),n=o.getResolutionForZoom(r);o.getAnimating()&&o.cancelAnimations(),o.animate({resolution:n,anchor:i,duration:e!==void 0?e:250,easing:Ve})}var fi=za;var Na=class extends fi{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let i=!1;if(t.type==Nt.DBLCLICK){let e=t.originalEvent,s=t.map,r=t.coordinate,n=e.shiftKey?-this.delta_:this.delta_,l=s.getView();Hs(l,n,r,this.duration_),e.preventDefault(),i=!0}return!i}},_d=Na;var ja=class extends fi{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Nt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Nt.POINTERUP){let e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==Nt.POINTERDOWN){let e=this.handleDownEvent(t);this.handlingDownUpSequence=e,i=this.stopDown(e)}else t.type==Nt.POINTERMOVE&&this.handleMoveEvent(t);return!i}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Zs(o){let t=o.length,i=0,e=0;for(let s=0;s<t;s++)i+=o[s].clientX,e+=o[s].clientY;return{clientX:i/t,clientY:e/t}}var gi=ja;function Ar(o){let t=arguments;return function(i){let e=!0;for(let s=0,r=t.length;s<r&&(e=e&&t[s](i),!!e);++s);return e}}var wd=function(o){let t=o.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},af=function(o){let t=o.map.getTargetElement(),i=o.map.getOwnerDocument().activeElement;return t.contains(i)},An=function(o){return o.map.getTargetElement().hasAttribute("tabindex")?af(o):!0},Sd=Ei;var Dn=function(o){let t=o.originalEvent;return t.button==0&&!(ec&&Do&&t.ctrlKey)};var Ln=function(o){let t=o.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Md=function(o){let t=o.originalEvent;return Do?t.metaKey:t.ctrlKey},Ed=function(o){let t=o.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},In=function(o){let t=o.originalEvent,i=t.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!t.target.isContentEditable},kn=function(o){let t=o.originalEvent;return gt(t!==void 0,56),t.pointerType=="mouse"};var Pd=function(o){let t=o.originalEvent;return gt(t!==void 0,56),t.isPrimary&&t.button===0};var Ba=class extends gi{constructor(t){super({stopDown:Pi}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let i=t.condition?t.condition:Ar(Ln,Pd);this.condition_=t.onFocusOnly?Ar(An,i):i,this.noKinetic_=!1}handleDragEvent(t){let i=t.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());let e=this.targetPointers,s=i.getEventPixel(Zs(e));if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){let r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],l=t.map.getView();wc(r,l.getResolution()),Gs(r,l.getRotation()),l.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){let i=t.map,e=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),n=e.getCenterInternal(),l=i.getPixelFromCoordinateInternal(n),a=i.getCoordinateFromPixelInternal([l[0]-s*Math.cos(r),l[1]-s*Math.sin(r)]);e.animateInternal({center:e.getConstrainedCenter(a),duration:500,easing:Ve})}return this.panning_&&(this.panning_=!1,e.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){let e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Td=Ba;var Ga=class extends gi{constructor(t){t=t||{},super({stopDown:Pi}),this.condition_=t.condition?t.condition:wd,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!kn(t))return;let i=t.map,e=i.getView();if(e.getConstraints().rotation===Ws)return;let s=i.getSize(),r=t.pixel,n=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){let l=n-this.lastAngle_;e.adjustRotationInternal(-l)}this.lastAngle_=n}handleUpEvent(t){return kn(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return kn(t)&&Dn(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},Ad=Ga;var Xa=class extends Es{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let t=this.startPixel_,i=this.endPixel_,e="px",s=this.element_.style;s.left=Math.min(t[0],i[0])+e,s.top=Math.min(t[1],i[1])+e,s.width=Math.abs(i[0]-t[0])+e,s.height=Math.abs(i[1]-t[1])+e}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){let t=this.startPixel_,i=this.endPixel_,s=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new hi([s])}getGeometry(){return this.geometry_}},Dd=Xa;var Rn={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},Dr=class extends te{constructor(t,i,e){super(t),this.coordinate=i,this.mapBrowserEvent=e}},Wa=class extends gi{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Dd(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Dn,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,i,e){let s=e[0]-i[0],r=e[1]-i[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Dr(Rn.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);let i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new Dr(i?Rn.BOXEND:Rn.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Dr(Rn.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}},Ld=Wa;var Va=class extends Ld{constructor(t){t=t||{};let i=t.condition?t.condition:Ed;super({condition:i,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){let e=this.getMap().getView(),s=this.getGeometry();if(this.out_){let r=e.rotatedExtentForGeometry(s),n=e.getResolutionForExtentInternal(r),l=e.getResolution()/n;s=s.clone(),s.scale(l*l)}e.fitInternal(s,{duration:this.duration_,easing:Ve})}},Id=Va;var ts={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var Ya=class extends fi{constructor(t){super(),t=t||{},this.defaultCondition_=function(i){return Ln(i)&&In(i)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let i=!1;if(t.type==ut.KEYDOWN){let e=t.originalEvent,s=e.key;if(this.condition_(t)&&(s==ts.DOWN||s==ts.LEFT||s==ts.RIGHT||s==ts.UP)){let n=t.map.getView(),l=n.getResolution()*this.pixelDelta_,a=0,h=0;s==ts.DOWN?h=-l:s==ts.LEFT?a=-l:s==ts.RIGHT?a=l:h=l;let c=[a,h];Gs(c,n.getRotation()),Cd(n,c,this.duration_),e.preventDefault(),i=!0}}return!i}},kd=Ya;var Ua=class extends fi{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(i){return!Md(i)&&In(i)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let i=!1;if(t.type==ut.KEYDOWN||t.type==ut.KEYPRESS){let e=t.originalEvent,s=e.key;if(this.condition_(t)&&(s==="+"||s==="-")){let r=t.map,n=s==="+"?this.delta_:-this.delta_,l=r.getView();Hs(l,n,void 0,this.duration_),e.preventDefault(),i=!0}}return!i}},Rd=Ua;var Ha=class{constructor(t,i,e){this.decay_=t,this.minVelocity_=i,this.delay_=e,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,i){this.points_.push(t,i,Date.now())}end(){if(this.points_.length<6)return!1;let t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;let e=i-3;for(;e>0&&this.points_[e+2]>t;)e-=3;let s=this.points_[i+2]-this.points_[e+2];if(s<1e3/60)return!1;let r=this.points_[i]-this.points_[e],n=this.points_[i+1]-this.points_[e+1];return this.angle_=Math.atan2(n,r),this.initialVelocity_=Math.sqrt(r*r+n*n)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},Od=Ha;var Za=class extends fi{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;let i=t.condition?t.condition:Sd;this.condition_=t.onFocusOnly?Ar(An,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==ut.WHEEL)return!0;let e=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==ut.WHEEL&&(r=s.deltaY,tc&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=en),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;let n=Date.now();this.startTime_===void 0&&(this.startTime_=n),(!this.mode_||n-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");let l=e.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=n,!1;this.totalDelta_+=r;let a=Math.max(this.timeout_-(n-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),a),!1}handleWheelZoom_(t){let i=t.getView();i.getAnimating()&&i.cancelAnimations();let e=-Rt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(e=e?e>0?1:-1:0),Hs(i,e,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},Fd=Za;var Ka=class extends gi{constructor(t){t=t||{};let i=t;i.stopDown||(i.stopDown=Pi),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let i=0,e=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-e.clientY,s.clientX-e.clientX);if(this.lastAngle_!==void 0){let a=r-this.lastAngle_;this.rotationDelta_+=a,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=a}this.lastAngle_=r;let n=t.map,l=n.getView();l.getConstraints().rotation!==Ws&&(this.anchor_=n.getCoordinateFromPixelInternal(n.getEventPixel(Zs(this.targetPointers))),this.rotating_&&(n.render(),l.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){let i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}},zd=Ka;var qa=class extends gi{constructor(t){t=t||{};let i=t;i.stopDown||(i.stopDown=Pi),super(i),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let i=1,e=this.targetPointers[0],s=this.targetPointers[1],r=e.clientX-s.clientX,n=e.clientY-s.clientY,l=Math.sqrt(r*r+n*n);this.lastDistance_!==void 0&&(i=this.lastDistance_/l),this.lastDistance_=l;let a=t.map,h=a.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Zs(this.targetPointers))),a.render(),h.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){let e=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){let i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}},Nd=qa;function jd(o){o=o||{};let t=new ne,i=new Od(-.005,.05,100);return(o.altShiftDragRotate!==void 0?o.altShiftDragRotate:!0)&&t.push(new Ad),(o.doubleClickZoom!==void 0?o.doubleClickZoom:!0)&&t.push(new _d({delta:o.zoomDelta,duration:o.zoomDuration})),(o.dragPan!==void 0?o.dragPan:!0)&&t.push(new Td({onFocusOnly:o.onFocusOnly,kinetic:i})),(o.pinchRotate!==void 0?o.pinchRotate:!0)&&t.push(new zd),(o.pinchZoom!==void 0?o.pinchZoom:!0)&&t.push(new Nd({duration:o.zoomDuration})),(o.keyboard!==void 0?o.keyboard:!0)&&(t.push(new kd),t.push(new Rd({delta:o.zoomDelta,duration:o.zoomDuration}))),(o.mouseWheelZoom!==void 0?o.mouseWheelZoom:!0)&&t.push(new Fd({onFocusOnly:o.onFocusOnly,duration:o.zoomDuration})),(o.shiftDragZoom!==void 0?o.shiftDragZoom:!0)&&t.push(new Id({duration:o.zoomDuration})),t}function $a(o){return o[0]>0&&o[1]>0}function Bd(o,t,i){return i===void 0&&(i=[0,0]),i[0]=o[0]*t+.5|0,i[1]=o[1]*t+.5|0,i}function ie(o,t){return Array.isArray(o)?o:(t===void 0?t=[o,o]:(t[0]=o,t[1]=o),t)}function Gd(o){if(o instanceof ds){o.setMapInternal(null);return}o instanceof Er&&o.getLayers().forEach(Gd)}function Xd(o,t){if(o instanceof ds){o.setMapInternal(t);return}if(o instanceof Er){let i=o.getLayers().getArray();for(let e=0,s=i.length;e<s;++e)Xd(i[e],t)}}var Ja=class extends Zt{constructor(t){super(),t=t||{},this.on,this.once,this.un;let i=lf(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:en,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=fe(),this.pixelToCoordinateTransform_=fe(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=i.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=i.controls||gs(),this.interactions=i.interactions||jd({onFocusOnly:!0}),this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new md(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ae.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ae.VIEW,this.handleViewChanged_),this.addChangeListener(ae.SIZE,this.handleSizeChanged_),this.addChangeListener(ae.TARGET,this.handleTargetChanged_),this.setProperties(i.values);let e=this;t.view&&!(t.view instanceof ve)&&t.view.then(function(s){e.setView(new ve(s))}),this.controls.addEventListener(ee.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(ee.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(ee.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(ee.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(ee.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(ee.REMOVE,s=>{let r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Xd(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){let i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,i,e){if(!this.frameState_||!this.renderer_)return;let s=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};let r=e.hitTolerance!==void 0?e.hitTolerance:0,n=e.layerFilter!==void 0?e.layerFilter:Ei,l=e.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,l,i,null,n,null)}getFeaturesAtPixel(t,i){let e=[];return this.forEachFeatureAtPixel(t,function(s){e.push(s)},i),e}getAllLayers(){let t=[];function i(e){e.forEach(function(s){s instanceof Er?i(s.getLayers()):t.push(s)})}return i(this.getLayers()),t}hasFeatureAtPixel(t,i){if(!this.frameState_||!this.renderer_)return!1;let e=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};let s=i.layerFilter!==void 0?i.layerFilter:Ei,r=i.hitTolerance!==void 0?i.hitTolerance:0,n=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(e,this.frameState_,r,n,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){let e=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=e.width/s[0],n=e.height/s[1],l="changedTouches"in t?t.changedTouches[0]:t;return[(l.clientX-e.left)/r,(l.clientY-e.top)/n]}getTarget(){return this.get(ae.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return pr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){let i=this.frameState_;return i?Vt(i.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){let i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ae.LAYERGROUP)}setLayers(t){let i=this.getLayerGroup();if(t instanceof ne){i.setLayers(t);return}let e=i.getLayers();e.clear(),e.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let t=this.getLayerGroup().getLayerStatesArray();for(let i=0,e=t.length;i<e;++i){let s=t[i];if(!s.visible)continue;let r=s.layer.getRenderer();if(r&&!r.ready)return!0;let n=s.layer.getSource();if(n&&n.loading)return!0}return!1}getPixelFromCoordinate(t){let i=ii(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)}getPixelFromCoordinateInternal(t){let i=this.frameState_;return i?Vt(i.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ae.SIZE)}getView(){return this.get(ae.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,i,e,s){return xd(this.frameState_,t,i,e,s)}handleBrowserEvent(t,i){i=i||t.type;let e=new ui(i,this,t);this.handleMapBrowserEvent(e)}handleMapBrowserEvent(t){if(!this.frameState_)return;let i=t.originalEvent,e=i.type;if(e===Pr.POINTERDOWN||e===ut.WHEEL||e===ut.KEYDOWN){let s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,n=i.target;if(this.overlayContainerStopEvent_.contains(n)||!(r===s?s.documentElement:r).contains(n))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){let s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){let n=s[r];if(n.getMap()!==this||!n.getActive()||!this.getTargetElement())continue;if(!n.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){let t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){let n=t.viewHints;if(n[qt.ANIMATING]||n[qt.INTERACTING]){let l=Date.now()-t.time>8;s=l?0:8,r=l?0:2}}i.getTilesLoading()<s&&(i.reprioritize(),i.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(be.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(be.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Qi(pi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Qi(pi.LOADSTART,this,t))));let e=this.postRenderFunctions_;for(let s=0,r=e.length;s<r;++s)e[s](this,t);e.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,s=this.targetChangeHandlerKeys_.length;e<s;++e)Tt(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ut.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ut.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Mr(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);let e=this.targetElement_.getRootNode();e instanceof ShadowRoot&&this.resizeObserver_.unobserve(e.host),this.setSize(void 0)}let t=this.getTarget(),i=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=i,!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new pd(this)),this.mapBrowserEventHandler_=new fd(this,this.moveTolerance_);for(let r in Nt)this.mapBrowserEventHandler_.addEventListener(Nt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ut.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ut.WHEEL,this.boundHandleBrowserEvent_,sn?{passive:!1}:!1);let e=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[wt(e,ut.KEYDOWN,this.handleBrowserEvent,this),wt(e,ut.KEYPRESS,this.handleBrowserEvent,this)];let s=i.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(i)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Tt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Tt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=wt(t,Ke.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=wt(t,ut.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Tt),this.layerGroupPropertyListenerKeys_=null);let t=this.getLayerGroup();t&&(this.handleLayerAdd_(new ri("addlayer",t)),this.layerGroupPropertyListenerKeys_=[wt(t,Ke.PROPERTYCHANGE,this.render,this),wt(t,ut.CHANGE,this.render,this),wt(t,"addlayer",this.handleLayerAdd_,this),wt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let t=this.getLayerGroup().getLayerStatesArray();for(let i=0,e=t.length;i<e;++i){let s=t[i].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){let t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Gd(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){let i=this.getSize(),e=this.getView(),s=this.frameState_,r=null;if(i!==void 0&&$a(i)&&e&&e.isDef()){let n=e.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=e.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ar(l.center,l.resolution,l.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:l,viewHints:n,wantedTiles:{},mapId:Mt(this),renderTargets:{}},l.nextCenter&&l.nextResolution){let a=isNaN(l.nextRotation)?l.rotation:l.nextRotation;r.nextExtent=ar(l.nextCenter,l.nextResolution,a,i)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Yi(this.previousExtent_)&&!Di(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Qi(pi.MOVESTART,this,s)),this.previousExtent_=Ai(this.previousExtent_)),this.previousExtent_&&!r.viewHints[qt.ANIMATING]&&!r.viewHints[qt.INTERACTING]&&!Di(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Qi(pi.MOVEEND,this,r)),on(r.extent,this.previousExtent_))),this.dispatchEvent(new Qi(pi.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(pi.LOADSTART)||this.hasListener(pi.LOADEND)||this.hasListener(be.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){let i=this.getLayerGroup();i&&this.handleLayerRemove_(new ri("removelayer",i)),this.set(ae.LAYERGROUP,t)}setSize(t){this.set(ae.SIZE,t)}setTarget(t){this.set(ae.TARGET,t)}setView(t){if(!t||t instanceof ve){this.set(ae.VIEW,t);return}this.set(ae.VIEW,new ve);let i=this;t.then(function(e){i.setView(new ve(e))})}updateSize(){let t=this.getTargetElement(),i;if(t){let s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),n=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(n)&&(i=[r,n],!$a(i)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&xn("No map visible because the map container's width or height are 0."))}let e=this.getSize();i&&(!e||!pe(i,e))&&(this.setSize(i),this.updateViewportSize_())}updateViewportSize_(){let t=this.getView();if(t){let i,e=getComputedStyle(this.viewport_);e.width&&e.height&&(i=[parseInt(e.width,10),parseInt(e.height,10)]),t.setViewportSize(i)}}};function lf(o){let t=null;o.keyboardEventTarget!==void 0&&(t=typeof o.keyboardEventTarget=="string"?document.getElementById(o.keyboardEventTarget):o.keyboardEventTarget);let i={},e=o.layers&&typeof o.layers.getLayers=="function"?o.layers:new Er({layers:o.layers});i[ae.LAYERGROUP]=e,i[ae.TARGET]=o.target,i[ae.VIEW]=o.view instanceof ve?o.view:new ve;let s;o.controls!==void 0&&(Array.isArray(o.controls)?s=new ne(o.controls.slice()):(gt(typeof o.controls.getArray=="function",47),s=o.controls));let r;o.interactions!==void 0&&(Array.isArray(o.interactions)?r=new ne(o.interactions.slice()):(gt(typeof o.interactions.getArray=="function",48),r=o.interactions));let n;return o.overlays!==void 0?Array.isArray(o.overlays)?n=new ne(o.overlays.slice()):(gt(typeof o.overlays.getArray=="function",49),n=o.overlays):n=new ne,{controls:s,interactions:r,keyboardEventTarget:t,overlays:n,values:i}}var On=Ja;var Qa=class{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let i=this.oldest_;for(;i;)t(i.value_,i.key_,this),i=i.newer}get(t,i){let e=this.entries_[t];return gt(e!==void 0,15),e===this.newest_||(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e),e.value_}remove(t){let i=this.entries_[t];return gt(i!==void 0,15),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[t],--this.count_,i.value_}getCount(){return this.count_}getKeys(){let t=new Array(this.count_),i=0,e;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){let t=new Array(this.count_),i=0,e;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){let t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,i){this.get(t),this.entries_[t].value_=i}set(t,i){gt(!(t in this.entries_),16);let e={key_:t,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=e:this.oldest_=e,this.newest_=e,this.entries_[t]=e,++this.count_}setSize(t){this.highWaterMark=t}},Wd=Qa;var tl=class extends Gi{constructor(t,i,e){super(),e=e||{},this.tileCoord=t,this.state=i,this.interimTile=null,this.key="",this.transition_=e.transition===void 0?250:e.transition,this.transitionStarts_={},this.interpolate=!!e.interpolate}changed(){this.dispatchEvent(ut.CHANGE)}release(){this.state===pt.ERROR&&this.setState(pt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==pt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,i=this;do{if(t.getState()==pt.LOADED){t.interimTile=null;break}else t.getState()==pt.LOADING?i=t:t.getState()==pt.IDLE?i.interimTile=t.interimTile:i=t;t=i.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==pt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){ft()}getAlpha(t,i){if(!this.transition_)return 1;let e=this.transitionStarts_[t];if(!e)e=i,this.transitionStarts_[t]=e;else if(e===-1)return 1;let s=i-e+1e3/60;return s>=this.transition_?1:$o(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}},Fn=tl;var Ot={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function zn(o,t,i){let e=o,s=!0,r=!1,n=!1,l=[Ts(e,ut.LOAD,function(){n=!0,r||t()})];return e.src&&ic?(r=!0,e.decode().then(function(){s&&t()}).catch(function(a){s&&(n?t():i())})):l.push(Ts(e,ut.ERROR,i)),function(){s=!1,l.forEach(Tt)}}var el=class extends Fn{constructor(t,i,e,s,r,n){super(t,i,n),this.crossOrigin_=s,this.src_=e,this.key=e,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=pt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=pt.ERROR,this.unlistenImage_(),this.image_=hf(),this.changed()}handleImageLoad_(){let t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=pt.LOADED:this.state=pt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==pt.ERROR&&(this.state=pt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==pt.IDLE&&(this.state=pt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=zn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function hf(){let o=Xt(1,1);return o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,1,1),o.canvas}var Nn=el;var cf=10,Vd=.25,il=class{constructor(t,i,e,s,r,n){this.sourceProj_=t,this.targetProj_=i;let l={},a=hs(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){let L=E[0]+"/"+E[1];return l[L]||(l[L]=a(E)),l[L]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&At(s)>=At(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?At(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?At(this.targetProj_.getExtent()):null;let h=Xe(e),c=Fs(e),f=Os(e),u=Rs(e),p=this.transformInv_(h),b=this.transformInv_(c),v=this.transformInv_(f),x=this.transformInv_(u),m=cf+(n?Math.max(0,Math.ceil(Math.log2(or(e)/(n*n*256*256)))):0);if(this.addQuad_(h,c,f,u,p,b,v,x,m),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(L,S,w){E=Math.min(E,L.source[0][0],L.source[1][0],L.source[2][0])}),this.triangles_.forEach(L=>{if(Math.max(L.source[0][0],L.source[1][0],L.source[2][0])-E>this.sourceWorldWidth_/2){let S=[[L.source[0][0],L.source[0][1]],[L.source[1][0],L.source[1][1]],[L.source[2][0],L.source[2][1]]];S[0][0]-E>this.sourceWorldWidth_/2&&(S[0][0]-=this.sourceWorldWidth_),S[1][0]-E>this.sourceWorldWidth_/2&&(S[1][0]-=this.sourceWorldWidth_),S[2][0]-E>this.sourceWorldWidth_/2&&(S[2][0]-=this.sourceWorldWidth_);let w=Math.min(S[0][0],S[1][0],S[2][0]);Math.max(S[0][0],S[1][0],S[2][0])-w<this.sourceWorldWidth_/2&&(L.source=S)}})}l={}}addTriangle_(t,i,e,s,r,n){this.triangles_.push({source:[s,r,n],target:[t,i,e]})}addQuad_(t,i,e,s,r,n,l,a,h){let c=Lo([r,n,l,a]),f=this.sourceWorldWidth_?At(c)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&f>.5&&f<1,b=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let x=Lo([t,i,e,s]);b=At(x)/this.targetWorldWidth_>Vd||b}!p&&this.sourceProj_.isGlobal()&&f&&(b=f>Vd||b)}if(!b&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Yt(c,this.maxSourceExtent_))return;let v=0;if(!b&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(n[0])||!isFinite(n[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1]))){if(h>0)b=!0;else if(v=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(n[0])||!isFinite(n[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(a[0])||!isFinite(a[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(h>0){if(!b){let x=[(t[0]+e[0])/2,(t[1]+e[1])/2],m=this.transformInv_(x),E;p?E=(Li(r[0],u)+Li(l[0],u))/2-Li(m[0],u):E=(r[0]+l[0])/2-m[0];let L=(r[1]+l[1])/2-m[1];b=E*E+L*L>this.errorThresholdSquared_}if(b){if(Math.abs(t[0]-e[0])<=Math.abs(t[1]-e[1])){let x=[(i[0]+e[0])/2,(i[1]+e[1])/2],m=this.transformInv_(x),E=[(s[0]+t[0])/2,(s[1]+t[1])/2],L=this.transformInv_(E);this.addQuad_(t,i,x,E,r,n,m,L,h-1),this.addQuad_(E,x,e,s,L,m,l,a,h-1)}else{let x=[(t[0]+i[0])/2,(t[1]+i[1])/2],m=this.transformInv_(x),E=[(e[0]+s[0])/2,(e[1]+s[1])/2],L=this.transformInv_(E);this.addQuad_(t,x,E,s,r,m,L,a,h-1),this.addQuad_(x,i,e,E,m,n,l,L,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}v&11||this.addTriangle_(t,e,s,r,l,a),v&14||this.addTriangle_(t,e,i,r,l,n),v&&(v&13||this.addTriangle_(i,s,t,n,a,r),v&7||this.addTriangle_(i,s,e,n,a,l))}calculateSourceExtent(){let t=Ut();return this.triangles_.forEach(function(i,e,s){let r=i.source;os(t,r[0]),os(t,r[1]),os(t,r[2])}),t}getTriangles(){return this.triangles_}},Yd=il;var sl,ms=[];function Ud(o,t,i,e,s){o.beginPath(),o.moveTo(0,0),o.lineTo(t,i),o.lineTo(e,s),o.closePath(),o.save(),o.clip(),o.fillRect(0,0,Math.max(t,e)+1,Math.max(i,s)),o.restore()}function rl(o,t){return Math.abs(o[t*4]-210)>2||Math.abs(o[t*4+3]-.75*255)>2}function df(){if(sl===void 0){let o=Xt(6,6,ms);o.globalCompositeOperation="lighter",o.fillStyle="rgba(210, 0, 0, 0.75)",Ud(o,4,5,4,0),Ud(o,4,5,0,5);let t=o.getImageData(0,0,3,3).data;sl=rl(t,0)||rl(t,4)||rl(t,8),us(o),ms.push(o.canvas)}return sl}function Hd(o,t,i,e){let s=Hi(i,t,o),r=Vo(t,e,i),n=t.getMetersPerUnit();n!==void 0&&(r*=n);let l=o.getMetersPerUnit();l!==void 0&&(r/=l);let a=o.getExtent();if(!a||Wi(a,s)){let h=Vo(o,r,s)/r;isFinite(h)&&h>0&&(r/=h)}return r}function Zd(o,t,i,e){let s=Ge(i),r=Hd(o,t,s,e);return(!isFinite(r)||r<=0)&&hn(i,function(n){return r=Hd(o,t,n,e),isFinite(r)&&r>0}),r}function Kd(o,t,i,e,s,r,n,l,a,h,c,f){let u=Xt(Math.round(i*o),Math.round(i*t),ms);if(f||(u.imageSmoothingEnabled=!1),a.length===0)return u.canvas;u.scale(i,i);function p(S){return Math.round(S*i)/i}u.globalCompositeOperation="lighter";let b=Ut();a.forEach(function(S,w,R){ln(b,S.extent)});let v=At(b),x=ge(b),m=Xt(Math.round(i*v/e),Math.round(i*x/e),ms);f||(m.imageSmoothingEnabled=!1);let E=i/e;a.forEach(function(S,w,R){let O=S.extent[0]-b[0],I=-(S.extent[3]-b[3]),_=At(S.extent),A=ge(S.extent);S.image.width>0&&S.image.height>0&&m.drawImage(S.image,h,h,S.image.width-2*h,S.image.height-2*h,O*E,I*E,_*E,A*E)});let L=Xe(n);return l.getTriangles().forEach(function(S,w,R){let O=S.source,I=S.target,_=O[0][0],A=O[0][1],F=O[1][0],P=O[1][1],D=O[2][0],C=O[2][1],d=p((I[0][0]-L[0])/r),g=p(-(I[0][1]-L[1])/r),y=p((I[1][0]-L[0])/r),M=p(-(I[1][1]-L[1])/r),k=p((I[2][0]-L[0])/r),T=p(-(I[2][1]-L[1])/r),z=_,N=A;_=0,A=0,F-=z,P-=N,D-=z,C-=N;let G=[[F,P,0,0,y-d],[D,C,0,0,k-d],[0,0,F,P,M-g],[0,0,D,C,T-g]],X=pc(G);if(X){if(u.save(),u.beginPath(),df()||!f){u.moveTo(y,M);let j=4,B=d-y,W=g-M;for(let V=0;V<j;V++)u.lineTo(y+p((V+1)*B/j),M+p(V*W/(j-1))),V!=j-1&&u.lineTo(y+p((V+1)*B/j),M+p((V+1)*W/(j-1)));u.lineTo(k,T)}else u.moveTo(y,M),u.lineTo(d,g),u.lineTo(k,T);u.clip(),u.transform(X[0],X[2],X[1],X[3],d,g),u.translate(b[0]-z,b[3]-N),u.scale(e/i,-e/i),u.drawImage(m.canvas,0,0),u.restore()}}),us(m),ms.push(m.canvas),c&&(u.save(),u.globalCompositeOperation="source-over",u.strokeStyle="black",u.lineWidth=1,l.getTriangles().forEach(function(S,w,R){let O=S.target,I=(O[0][0]-L[0])/r,_=-(O[0][1]-L[1])/r,A=(O[1][0]-L[0])/r,F=-(O[1][1]-L[1])/r,P=(O[2][0]-L[0])/r,D=-(O[2][1]-L[1])/r;u.beginPath(),u.moveTo(A,F),u.lineTo(I,_),u.lineTo(P,D),u.closePath(),u.stroke()}),u.restore()),u.canvas}var nl=class extends Fn{constructor(t,i,e,s,r,n,l,a,h,c,f,u){super(r,pt.IDLE,{interpolate:!!u}),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=l,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=s,this.wrappedTileCoord_=n||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let p=s.getTileCoordExtent(this.wrappedTileCoord_),b=this.targetTileGrid_.getExtent(),v=this.sourceTileGrid_.getExtent(),x=b?Vi(p,b):p;if(or(x)===0){this.state=pt.EMPTY;return}let m=t.getExtent();m&&(v?v=Vi(v,m):v=m);let E=s.getResolution(this.wrappedTileCoord_[0]),L=Zd(t,e,x,E);if(!isFinite(L)||L<=0){this.state=pt.EMPTY;return}let S=c!==void 0?c:.5;if(this.triangulation_=new Yd(t,e,x,v,L*S,E),this.triangulation_.getTriangles().length===0){this.state=pt.EMPTY;return}this.sourceZ_=i.getZForResolution(L);let w=this.triangulation_.calculateSourceExtent();if(v&&(t.canWrapX()?(w[1]=Rt(w[1],v[1],v[3]),w[3]=Rt(w[3],v[1],v[3])):w=Vi(w,v)),!or(w))this.state=pt.EMPTY;else{let R=i.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let O=R.minX;O<=R.maxX;O++)for(let I=R.minY;I<=R.maxY;I++){let _=h(this.sourceZ_,O,I,l);_&&this.sourceTiles_.push(_)}this.sourceTiles_.length===0&&(this.state=pt.EMPTY)}}getImage(){return this.canvas_}reproject_(){let t=[];if(this.sourceTiles_.forEach(i=>{i&&i.getState()==pt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(i.tileCoord),image:i.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=pt.ERROR;else{let i=this.wrappedTileCoord_[0],e=this.targetTileGrid_.getTileSize(i),s=typeof e=="number"?e:e[0],r=typeof e=="number"?e:e[1],n=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Kd(s,r,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),n,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=pt.LOADED}this.changed()}load(){if(this.state==pt.IDLE){this.state=pt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(i=>{let e=i.getState();if(e==pt.IDLE||e==pt.LOADING){t++;let s=wt(i,ut.CHANGE,function(r){let n=i.getState();(n==pt.LOADED||n==pt.ERROR||n==pt.EMPTY)&&(Tt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,e,s){i.getState()==pt.IDLE&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Tt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(us(this.canvas_.getContext("2d")),ms.push(this.canvas_),this.canvas_=null),super.release()}},Lr=nl;function ol(o,t,i,e){return e!==void 0?(e[0]=o,e[1]=t,e[2]=i,e):[o,t,i]}function xs(o,t,i){return o+"/"+t+"/"+i}function jn(o){return xs(o[0],o[1],o[2])}function qd(o){return o.split("/").map(Number)}function $d(o){return(o[1]<<o[0])+o[2]}function Jd(o,t){let i=o[0],e=o[1],s=o[2];if(t.getMinZoom()>i||i>t.getMaxZoom())return!1;let r=t.getFullTileRange(i);return r?r.containsXY(e,s):!0}var al=class extends Wd{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let t=this.peekFirstKey(),e=qd(t)[0];this.forEach(s=>{s.tileCoord[0]!==e&&(this.remove(jn(s.tileCoord)),s.release())})}},Bn=al;var Gn={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var ll=class extends Zt{constructor(t){super(),this.projection=zt(t.projection),this.attributions_=Qd(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;let i=this;this.viewPromise_=new Promise(function(e,s){i.viewResolver=e,i.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Qd(t),this.changed()}setState(t){this.state_=t,this.changed()}};function Qd(o){return o?Array.isArray(o)?function(t){return o}:typeof o=="function"?o:function(t){return[o]}:null}var Xn=ll;var Wn=class{constructor(t,i,e,s){this.minX=t,this.maxX=i,this.minY=e,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}};function ys(o,t,i,e,s){return s!==void 0?(s.minX=o,s.maxX=t,s.minY=i,s.maxY=e,s):new Wn(o,t,i,e)}var Vn=Wn;var Ks=[0,0,0],es=5,hl=class{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,gt($h(this.resolutions_,function(s,r){return r-s},!0),17);let i;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!i)i=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==i){i=void 0;break}}this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,gt(this.origins_.length==this.resolutions_.length,20));let e=t.extent;e!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Xe(e)),gt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,gt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:256,gt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=e!==void 0?e:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(s,r){let n=new Vn(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(e){let l=this.getTileRangeForExtentAndZ(e,r);n.minX=Math.max(l.minX,n.minX),n.maxX=Math.min(l.maxX,n.maxX),n.minY=Math.max(l.minY,n.minY),n.maxY=Math.min(l.maxY,n.maxY)}return n},this):e&&this.calculateTileRanges_(e)}forEachTileCoord(t,i,e){let s=this.getTileRangeForExtentAndZ(t,i);for(let r=s.minX,n=s.maxX;r<=n;++r)for(let l=s.minY,a=s.maxY;l<=a;++l)e([i,r,l])}forEachTileCoordParentTileRange(t,i,e,s){let r,n,l,a=null,h=t[0]-1;for(this.zoomFactor_===2?(n=t[1],l=t[2]):a=this.getTileCoordExtent(t,s);h>=this.minZoom;){if(this.zoomFactor_===2?(n=Math.floor(n/2),l=Math.floor(l/2),r=ys(n,n,l,l,e)):r=this.getTileRangeForExtentAndZ(a,h,e),i(h,r))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,i,e){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){let r=t[1]*2,n=t[2]*2;return ys(r,r+1,n,n+1,i)}let s=this.getTileCoordExtent(t,e||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,i)}return null}getTileRangeForTileCoordAndZ(t,i,e){if(i>this.maxZoom||i<this.minZoom)return null;let s=t[0],r=t[1],n=t[2];if(i===s)return ys(r,n,r,n,e);if(this.zoomFactor_){let a=Math.pow(this.zoomFactor_,i-s),h=Math.floor(r*a),c=Math.floor(n*a);if(i<s)return ys(h,h,c,c,e);let f=Math.floor(a*(r+1))-1,u=Math.floor(a*(n+1))-1;return ys(h,f,c,u,e)}let l=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,i,e)}getTileRangeForExtentAndZ(t,i,e){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,Ks);let s=Ks[1],r=Ks[2];this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,Ks);let n=Ks[1],l=Ks[2];return ys(s,n,r,l,e)}getTileCoordCenter(t){let i=this.getOrigin(t[0]),e=this.getResolution(t[0]),s=ie(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*s[0]*e,i[1]-(t[2]+.5)*s[1]*e]}getTileCoordExtent(t,i){let e=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=ie(this.getTileSize(t[0]),this.tmpSize_),n=e[0]+t[1]*r[0]*s,l=e[1]-(t[2]+1)*r[1]*s,a=n+r[0]*s,h=l+r[1]*s;return ze(n,l,a,h,i)}getTileCoordForCoordAndResolution(t,i,e){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,e)}getTileCoordForXYAndResolution_(t,i,e,s,r){let n=this.getZForResolution(e),l=e/this.getResolution(n),a=this.getOrigin(n),h=ie(this.getTileSize(n),this.tmpSize_),c=l*(t-a[0])/e/h[0],f=l*(a[1]-i)/e/h[1];return s?(c=hr(c,es)-1,f=hr(f,es)-1):(c=lr(c,es),f=lr(f,es)),ol(n,c,f,r)}getTileCoordForXYAndZ_(t,i,e,s,r){let n=this.getOrigin(e),l=this.getResolution(e),a=ie(this.getTileSize(e),this.tmpSize_),h=(t-n[0])/l/a[0],c=(n[1]-i)/l/a[1];return s?(h=hr(h,es)-1,c=hr(c,es)-1):(h=lr(h,es),c=lr(c,es)),ol(e,h,c,r)}getTileCoordForCoordAndZ(t,i,e){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,e)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,i){let e=Ps(this.resolutions_,t,i||0);return Rt(e,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,i){return aa(i,0,i.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){let i=this.resolutions_.length,e=new Array(i);for(let s=this.minZoom;s<i;++s)e[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=e}},cl=hl;function Yn(o){let t=o.getDefaultTileGrid();return t||(t=pf(o),o.setDefaultTileGrid(t)),t}function tu(o,t,i){let e=t[0],s=o.getTileCoordCenter(t),r=Un(i);if(!Wi(r,s)){let n=At(r),l=Math.ceil((r[0]-s[0])/n);return s[0]+=n*l,o.getTileCoordForCoordAndZ(s,e)}return t}function uf(o,t,i,e){e=e!==void 0?e:"top-left";let s=iu(o,t,i);return new cl({extent:o,origin:ac(o,e),resolutions:s,tileSize:i})}function eu(o){let t=o||{},i=t.extent||zt("EPSG:3857").getExtent(),e={extent:i,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:iu(i,t.maxZoom,t.tileSize,t.maxResolution)};return new cl(e)}function iu(o,t,i,e){t=t!==void 0?t:42,i=ie(i!==void 0?i:256);let s=ge(o),r=At(o);e=e>0?e:Math.max(r/i[0],s/i[1]);let n=t+1,l=new Array(n);for(let a=0;a<n;++a)l[a]=e/Math.pow(2,a);return l}function pf(o,t,i,e){let s=Un(o);return uf(s,t,i,e)}function Un(o){o=zt(o);let t=o.getExtent();if(!t){let i=180*ti.degrees/o.getMetersPerUnit();t=ze(-i,-i,i,i)}return t}var dl=class extends Xn{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;let i=[256,256];this.tileGrid&&ie(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tileCache=new Bn(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,i){let e=this.getTileCacheForProjection(t);e&&e.expireCache(i)}forEachLoadedTile(t,i,e,s){let r=this.getTileCacheForProjection(t);if(!r)return!1;let n=!0,l,a,h;for(let c=e.minX;c<=e.maxX;++c)for(let f=e.minY;f<=e.maxY;++f)a=xs(i,c,f),h=!1,r.containsKey(a)&&(l=r.get(a),h=l.getState()===pt.LOADED,h&&(h=s(l)!==!1)),h||(n=!1);return n}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){let i=t?this.getTileGridForProjection(t):this.tileGrid;return i?i.getResolutions():null}getTile(t,i,e,s,r){return ft()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Yn(t)}getTileCacheForProjection(t){let i=this.getProjection();return gt(i===null||li(i,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,i,e){let s=this.getTileGridForProjection(e),r=this.getTilePixelRatio(i),n=ie(s.getTileSize(t),this.tmpSize);return r==1?n:Bd(n,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,i){i=i!==void 0?i:this.getProjection();let e=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=tu(e,t,i)),Jd(t,e)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,i){let e=this.getTileCacheForProjection(i);t>e.highWaterMark&&(e.highWaterMark=t)}useTile(t,i,e,s){}},Hn=class extends te{constructor(t,i){super(t),this.tile=i}},su=dl;function ff(o,t){let i=/\{z\}/g,e=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(n,l,a){if(n)return o.replace(i,n[0].toString()).replace(e,n[1].toString()).replace(s,n[2].toString()).replace(r,function(){let h=n[0],c=t.getFullTileRange(h);return gt(c,55),(c.getHeight()-n[2]-1).toString()})}}function ru(o,t){let i=o.length,e=new Array(i);for(let s=0;s<i;++s)e[s]=ff(o[s],t);return gf(e)}function gf(o){return o.length===1?o[0]:function(t,i,e){if(!t)return;let s=$d(t),r=Li(s,o.length);return o[r](t,i,e)}}function nu(o){let t=[],i=/\{([a-z])-([a-z])\}/.exec(o);if(i){let e=i[1].charCodeAt(0),s=i[2].charCodeAt(0),r;for(r=e;r<=s;++r)t.push(o.replace(i[0],String.fromCharCode(r)));return t}if(i=/\{(\d+)-(\d+)\}/.exec(o),i){let e=parseInt(i[2],10);for(let s=parseInt(i[1],10);s<=e;s++)t.push(o.replace(i[0],s.toString()));return t}return t.push(o),t}var ul=class o extends su{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===o.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){let i=t.target,e=Mt(i),s=i.getState(),r;s==pt.LOADING?(this.tileLoadingKeys_[e]=!0,r=Gn.TILELOADSTART):e in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[e],r=s==pt.ERROR?Gn.TILELOADERROR:s==pt.LOADED?Gn.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new Hn(r,i))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,i){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof i<"u"?this.setKey(i):this.changed()}setUrl(t){let i=nu(t);this.urls=i,this.setUrls(i)}setUrls(t){this.urls=t;let i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(ru(t,this.tileGrid),i):this.setKey(i)}tileUrlFunction(t,i,e){}useTile(t,i,e){let s=xs(t,i,e);this.tileCache.containsKey(s)&&this.tileCache.get(s)}},ou=ul;var pl=class extends ou{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:mf,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Nn,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,i){let e=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==e?i:{});for(let s in this.tileCacheForProjection){let r=this.tileCacheForProjection[s];r.expireCache(r==e?i:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!li(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!li(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){let i=this.getProjection();if(this.tileGrid&&(!i||li(i,t)))return this.tileGrid;let e=Mt(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=Yn(t)),this.tileGridForProjection[e]}getTileCacheForProjection(t){let i=this.getProjection();if(!i||li(i,t))return this.tileCache;let e=Mt(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new Bn(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}createTile_(t,i,e,s,r,n){let l=[t,i,e],a=this.getTileCoordForTileUrlFunction(l,r),h=a?this.tileUrlFunction(a,s,r):void 0,c=new this.tileClass(l,h!==void 0?pt.IDLE:pt.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=n,c.addEventListener(ut.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,i,e,s,r){let n=this.getProjection();if(!n||!r||li(n,r))return this.getTileInternal(t,i,e,s,n||r);let l=this.getTileCacheForProjection(r),a=[t,i,e],h,c=jn(a);l.containsKey(c)&&(h=l.get(c));let f=this.getKey();if(h&&h.key==f)return h;let u=this.getTileGridForProjection(n),p=this.getTileGridForProjection(r),b=this.getTileCoordForTileUrlFunction(a,r),v=new Lr(n,u,r,p,a,b,this.getTilePixelRatio(s),this.getGutter(),(x,m,E,L)=>this.getTileInternal(x,m,E,L,n),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return v.key=f,h?(v.interimTile=h,v.refreshInterimChain(),l.replace(c,v)):l.set(c,v),v}getTileInternal(t,i,e,s,r){let n=null,l=xs(t,i,e),a=this.getKey();if(!this.tileCache.containsKey(l))n=this.createTile_(t,i,e,s,r,a),this.tileCache.set(l,n);else if(n=this.tileCache.get(l),n.key!=a){let h=n;n=this.createTile_(t,i,e,s,r,a),h.getState()==pt.IDLE?n.interimTile=h.interimTile:n.interimTile=h,n.refreshInterimChain(),this.tileCache.replace(l,n)}return n}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(let i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}}setTileGridForProjection(t,i){let e=zt(t);if(e){let s=Mt(e);s in this.tileGridForProjection||(this.tileGridForProjection[s]=i)}}clear(){super.clear();for(let t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};function mf(o,t){o.getImage().src=t}var au=pl;var fl=class extends au{constructor(t){t=t||{};let i=t.projection!==void 0?t.projection:"EPSG:3857",e=t.tileGrid!==void 0?t.tileGrid:eu({extent:Un(i),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:e,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}},lu=fl;var gl=class o extends Zt{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){let i=t;this.setGeometry(i)}else{let i=t;this.setProperties(i)}}clone(){let t=new o(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let i=this.getGeometry();i&&t.setGeometry(i.clone());let e=this.getStyle();return e&&t.setStyle(e),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Tt(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=wt(t,ut.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?xf(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function xf(o){if(typeof o=="function")return o;let t;return Array.isArray(o)?t=o:(gt(typeof o.getZIndex=="function",41),t=[o]),function(){return t}}var bs=gl;var hu=Jt(yl(),1);var bl=class{constructor(t){this.rbush_=new hu.default(t),this.items_={}}insert(t,i){let e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};this.rbush_.insert(e),this.items_[Mt(i)]=e}load(t,i){let e=new Array(i.length);for(let s=0,r=i.length;s<r;s++){let n=t[s],l=i[s],a={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:l};e[s]=a,this.items_[Mt(l)]=a}this.rbush_.load(e)}remove(t){let i=Mt(t),e=this.items_[i];return delete this.items_[i],this.rbush_.remove(e)!==null}update(t,i){let e=this.items_[Mt(i)],s=[e.minX,e.minY,e.maxX,e.maxY];Di(s,t)||(this.remove(i),this.insert(t,i))}getAll(){return this.rbush_.all().map(function(i){return i.value})}getInExtent(t){let i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(i).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,i){return this.forEach_(this.getInExtent(t),i)}forEach_(t,i){let e;for(let s=0,r=t.length;s<r;s++)if(e=i(t[s]),e)return e;return e}isEmpty(){return Je(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let i=this.rbush_.toJSON();return ze(i.minX,i.minY,i.maxX,i.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(let i in t.items_)this.items_[i]=t.items_[i]}},vl=bl;var He={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function cu(o,t){return[[-1/0,-1/0,1/0,1/0]]}var yf=!1;function bf(o,t,i,e,s,r,n){let l=new XMLHttpRequest;l.open("GET",typeof o=="function"?o(i,e,s):o,!0),t.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=yf,l.onload=function(a){if(!l.status||l.status>=200&&l.status<300){let h=t.getType(),c;h=="json"||h=="text"?c=l.responseText:h=="xml"?(c=l.responseXML,c||(c=new DOMParser().parseFromString(l.responseText,"application/xml"))):h=="arraybuffer"&&(c=l.response),c?r(t.readFeatures(c,{extent:i,featureProjection:s}),t.readProjection(c)):n()}else n()},l.onerror=n,l.send()}function Cl(o,t){return function(i,e,s,r,n){let l=this;bf(o,t,i,e,s,function(a,h){l.addFeatures(a),r!==void 0&&r(a)},n||$e)}}var mi=class extends te{constructor(t,i,e){super(t),this.feature=i,this.features=e}},_l=class extends Xn{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=$e,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(gt(this.format_,7),this.loader_=Cl(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:cu;let i=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=i?new vl:null,this.loadedExtentsRtree_=new vl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let e,s;Array.isArray(t.features)?s=t.features:t.features&&(e=t.features,s=e.getArray()),!i&&e===void 0&&(e=new ne(s)),s!==void 0&&this.addFeaturesInternal(s),e!==void 0&&this.bindFeaturesCollection_(e)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let i=Mt(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);let e=t.getGeometry();if(e){let s=e.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new mi(He.ADDFEATURE,t))}setupChangeEvents_(t,i){this.featureChangeKeys_[t]=[wt(i,ut.CHANGE,this.handleFeatureChange_,this),wt(i,Ke.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,i){let e=!0,s=i.getId();return s!==void 0&&(s.toString()in this.idIndex_?e=!1:this.idIndex_[s.toString()]=i),e&&(gt(!(t in this.uidIndex_),30),this.uidIndex_[t]=i),e}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let i=[],e=[],s=[];for(let r=0,n=t.length;r<n;r++){let l=t[r],a=Mt(l);this.addToIndex_(a,l)&&e.push(l)}for(let r=0,n=e.length;r<n;r++){let l=e[r],a=Mt(l);this.setupChangeEvents_(a,l);let h=l.getGeometry();if(h){let c=h.getExtent();i.push(c),s.push(l)}else this.nullGeometryFeatures_[a]=l}if(this.featuresRtree_&&this.featuresRtree_.load(i,s),this.hasListener(He.ADDFEATURE))for(let r=0,n=e.length;r<n;r++)this.dispatchEvent(new mi(He.ADDFEATURE,e[r]))}bindFeaturesCollection_(t){let i=!1;this.addEventListener(He.ADDFEATURE,function(e){i||(i=!0,t.push(e.feature),i=!1)}),this.addEventListener(He.REMOVEFEATURE,function(e){i||(i=!0,t.remove(e.feature),i=!1)}),t.addEventListener(ee.ADD,e=>{i||(i=!0,this.addFeature(e.element),i=!1)}),t.addEventListener(ee.REMOVE,e=>{i||(i=!0,this.removeFeature(e.element),i=!1)}),this.featuresCollection_=t}clear(t){if(t){for(let e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(Tt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let e=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(e);for(let s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let i=new mi(He.CLEAR);this.dispatchEvent(i),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,i){let e=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(e,function(s){if(s.getGeometry().intersectsCoordinate(t))return i(s)})}forEachFeatureInExtent(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureIntersectingExtent(t,i){return this.forEachFeatureInExtent(t,function(e){if(e.getGeometry().intersectsExtent(t)){let r=i(e);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Je(this.nullGeometryFeatures_)||xe(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let i=[];return this.forEachFeatureAtCoordinateDirect(t,function(e){i.push(e)}),i}getFeaturesInExtent(t,i){if(this.featuresRtree_){if(!(i&&i.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);let s=dc(t,i);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,i){let e=t[0],s=t[1],r=null,n=[NaN,NaN],l=1/0,a=[-1/0,-1/0,1/0,1/0];return i=i||Ei,this.featuresRtree_.forEachInExtent(a,function(h){if(i(h)){let c=h.getGeometry(),f=l;if(l=c.closestPointXY(e,s,n,l),l<f){r=h;let u=Math.sqrt(l);a[0]=e-u,a[1]=s-u,a[2]=e+u,a[3]=s+u}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let i=this.idIndex_[t.toString()];return i!==void 0?i:null}getFeatureByUid(t){let i=this.uidIndex_[t];return i!==void 0?i:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let i=t.target,e=Mt(i),s=i.getGeometry();if(!s)e in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[e]=i);else{let n=s.getExtent();e in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[e],this.featuresRtree_&&this.featuresRtree_.insert(n,i)):this.featuresRtree_&&this.featuresRtree_.update(n,i)}let r=i.getId();if(r!==void 0){let n=r.toString();this.idIndex_[n]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[n]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[e]=i;this.changed(),this.dispatchEvent(new mi(He.CHANGEFEATURE,i))}hasFeature(t){let i=t.getId();return i!==void 0?i in this.idIndex_:Mt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Je(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,i,e){let s=this.loadedExtentsRtree_,r=this.strategy_(t,i,e);for(let n=0,l=r.length;n<l;++n){let a=r[n];s.forEachInExtent(a,function(c){return Ti(c.extent,a)})||(++this.loadingExtentsCount_,this.dispatchEvent(new mi(He.FEATURESLOADSTART)),this.loader_.call(this,a,i,e,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new mi(He.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new mi(He.FEATURESLOADERROR))}),s.insert(a,{extent:a.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let i=this.loadedExtentsRtree_,e;i.forEachInExtent(t,function(s){if(Di(s.extent,t))return e=s,!0}),e&&i.remove(e)}removeFeature(t){if(!t)return;let i=Mt(t);i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let i=Mt(t),e=this.featureChangeKeys_[i];if(!e)return;e.forEach(Tt),delete this.featureChangeKeys_[i];let s=t.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[i],this.dispatchEvent(new mi(He.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let i=!1;for(let e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e],i=!0;break}return i}setLoader(t){this.loader_=t}setUrl(t){gt(this.format_,7),this.url_=t,this.setLoader(Cl(t,this.format_))}},xi=_l;var vf='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',wl=class extends lu{constructor(t){t=t||{};let i;t.attributions!==void 0?i=t.attributions:i=[vf];let e=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:i,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:e,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}},Ir=wl;var Sl=class extends Jr{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return ft()}getData(t){return null}prepareFrame(t){return ft()}renderFrame(t,i){return ft()}loadedTileCallback(t,i,e){t[i]||(t[i]={}),t[i][e.tileCoord.toString()]=e}createLoadedTileFinder(t,i,e){return(s,r)=>{let n=this.loadedTileCallback.bind(this,e,s);return t.forEachLoadedTile(i,s,r,n)}}forEachFeatureAtCoordinate(t,i,e,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){let i=t.target;(i.getState()===Ot.LOADED||i.getState()===Ot.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let i=t.getState();return i!=Ot.LOADED&&i!=Ot.ERROR&&t.addEventListener(ut.CHANGE,this.boundHandleImageChange_),i==Ot.IDLE&&(t.load(),i=t.getState()),i==Ot.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},du=Sl;var El=[],qs=null;function Cf(){qs=Xt(1,1,void 0,{willReadFrequently:!0})}var Ml=class extends du{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=fe(),this.pixelTransform=fe(),this.inversePixelTransform=fe(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,i,e){qs||Cf(),qs.clearRect(0,0,1,1);let s;try{qs.drawImage(t,i,e,1,1,0,0,1,1),s=qs.getImageData(0,0,1,1).data}catch{return qs=null,null}return s}getBackground(t){let e=this.getLayer().getBackground();return typeof e=="function"&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,i,e){let s=this.getLayer().getClassName(),r,n;if(t&&t.className===s&&(!e||t&&t.style.backgroundColor&&pe(as(t.style.backgroundColor),as(e)))){let l=t.firstElementChild;l instanceof HTMLCanvasElement&&(n=l.getContext("2d"))}if(n&&n.canvas.style.transform===i?(this.container=t,this.context=n,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let l=r.style;l.position="absolute",l.width="100%",l.height="100%",n=Xt();let a=n.canvas;r.appendChild(a),l=a.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=r,this.context=n}!this.containerReused&&e&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=e)}clipUnrotated(t,i,e){let s=Xe(e),r=Fs(e),n=Os(e),l=Rs(e);Vt(i.coordinateToPixelTransform,s),Vt(i.coordinateToPixelTransform,r),Vt(i.coordinateToPixelTransform,n),Vt(i.coordinateToPixelTransform,l);let a=this.inversePixelTransform;Vt(a,s),Vt(a,r),Vt(a,n),Vt(a,l),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()}dispatchRenderEvent_(t,i,e){let s=this.getLayer();if(s.hasListener(t)){let r=new En(t,this.inversePixelTransform,e,i);s.dispatchEvent(r)}}preRender(t,i){this.frameState=i,this.dispatchRenderEvent_(be.PRERENDER,t,i)}postRender(t,i){this.dispatchRenderEvent_(be.POSTRENDER,t,i)}getRenderTransform(t,i,e,s,r,n,l){let a=r/2,h=n/2,c=s/i,f=-c,u=-t[0]+l,p=-t[1];return ye(this.tempTransform,a,h,c,f,-e,u,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}},Zn=Ml;var kr={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Pl=class extends ds{constructor(t){t=t||{};let i=Object.assign({},t);delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(kr.PRELOAD)}setPreload(t){this.set(kr.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(kr.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(kr.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}},uu=Pl;var Tl=class extends Zn{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ut(),this.tmpTileRange_=new Vn(0,0,0,0)}isDrawableTile(t){let i=this.getLayer(),e=t.getState(),s=i.getUseInterimTilesOnError();return e==pt.LOADED||e==pt.EMPTY||e==pt.ERROR&&!s}getTile(t,i,e,s){let r=s.pixelRatio,n=s.viewState.projection,l=this.getLayer(),h=l.getSource().getTile(t,i,e,r,n);return h.getState()==pt.ERROR&&l.getUseInterimTilesOnError()&&l.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(h)||(h=h.getInterimTile()),h}getData(t){let i=this.frameState;if(!i)return null;let e=this.getLayer(),s=Vt(i.pixelToCoordinateTransform,t.slice()),r=e.getExtent();if(r&&!Wi(r,s))return null;let n=i.pixelRatio,l=i.viewState.projection,a=i.viewState,h=e.getRenderSource(),c=h.getTileGridForProjection(a.projection),f=h.getTilePixelRatio(i.pixelRatio);for(let u=c.getZForResolution(a.resolution);u>=c.getMinZoom();--u){let p=c.getTileCoordForCoordAndZ(s,u),b=h.getTile(u,p[1],p[2],n,l);if(!(b instanceof Nn||b instanceof Lr)||b instanceof Lr&&b.getState()===pt.EMPTY)return null;if(b.getState()!==pt.LOADED)continue;let v=c.getOrigin(u),x=ie(c.getTileSize(u)),m=c.getResolution(u),E=Math.floor(f*((s[0]-v[0])/m-p[1]*x[0])),L=Math.floor(f*((v[1]-s[1])/m-p[2]*x[1])),S=Math.round(f*h.getGutterForProjection(a.projection));return this.getImageData(b.getImage(),E+S,L+S)}return null}loadedTileCallback(t,i,e){return this.isDrawableTile(e)?super.loadedTileCallback(t,i,e):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,i){let e=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,n=s.resolution,l=s.center,a=s.rotation,h=t.pixelRatio,c=this.getLayer(),f=c.getSource(),u=f.getRevision(),p=f.getTileGridForProjection(r),b=p.getZForResolution(n,f.zDirection),v=p.getResolution(b),x=t.extent,m=t.viewState.resolution,E=f.getTilePixelRatio(h),L=Math.round(At(x)/m*h),S=Math.round(ge(x)/m*h),w=e.extent&&si(e.extent,r);w&&(x=Vi(x,si(e.extent,r)));let R=v*L/2/E,O=v*S/2/E,I=[l[0]-R,l[1]-O,l[0]+R,l[1]+O],_=p.getTileRangeForExtentAndZ(x,b),A={};A[b]={};let F=this.createLoadedTileFinder(f,r,A),P=this.tmpExtent,D=this.tmpTileRange_;this.newTiles_=!1;let C=a?cn(s.center,m,a,t.size):void 0;for(let G=_.minX;G<=_.maxX;++G)for(let X=_.minY;X<=_.maxY;++X){if(a&&!p.tileCoordIntersectsViewport([b,G,X],C))continue;let j=this.getTile(b,G,X,t);if(this.isDrawableTile(j)){let V=Mt(this);if(j.getState()==pt.LOADED){A[b][j.tileCoord.toString()]=j;let U=j.inTransition(V);U&&e.opacity!==1&&(j.endTransition(V),U=!1),!this.newTiles_&&(U||!this.renderedTiles.includes(j))&&(this.newTiles_=!0)}if(j.getAlpha(V,t.time)===1)continue}let B=p.getTileCoordChildTileRange(j.tileCoord,D,P),W=!1;B&&(W=F(b+1,B)),W||p.forEachTileCoordParentTileRange(j.tileCoord,F,D,P)}let d=v/n*h/E;ye(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,a,-L/2,-S/2);let g=rn(this.pixelTransform);this.useContainer(i,g,this.getBackground(t));let y=this.context,M=y.canvas;Is(this.inversePixelTransform,this.pixelTransform),ye(this.tempTransform,L/2,S/2,d,d,0,-L/2,-S/2),M.width!=L||M.height!=S?(M.width=L,M.height=S):this.containerReused||y.clearRect(0,0,L,S),w&&this.clipUnrotated(y,t,w),f.getInterpolate()||(y.imageSmoothingEnabled=!1),this.preRender(y,t),this.renderedTiles.length=0;let k=Object.keys(A).map(Number);k.sort(qe);let T,z,N;e.opacity===1&&(!this.containerReused||f.getOpaque(t.viewState.projection))?k=k.reverse():(T=[],z=[]);for(let G=k.length-1;G>=0;--G){let X=k[G],j=f.getTilePixelSize(X,h,r),W=p.getResolution(X)/v,V=j[0]*W*d,U=j[1]*W*d,q=p.getTileCoordForCoordAndZ(Xe(I),X),H=p.getTileCoordExtent(q),Y=Vt(this.tempTransform,[E*(H[0]-I[0])/v,E*(I[3]-H[3])/v]),Z=E*f.getGutterForProjection(r),K=A[X];for(let J in K){let tt=K[J],$=tt.tileCoord,Q=q[1]-$[1],et=Math.round(Y[0]-(Q-1)*V),it=q[2]-$[2],st=Math.round(Y[1]-(it-1)*U),rt=Math.round(Y[0]-Q*V),nt=Math.round(Y[1]-it*U),ot=et-rt,at=st-nt,ct=b===X,ht=ct&&tt.getAlpha(Mt(this),t.time)!==1,lt=!1;if(!ht)if(T){N=[rt,nt,rt+ot,nt,rt+ot,nt+at,rt,nt+at];for(let yt=0,Et=T.length;yt<Et;++yt)if(b!==X&&X<z[yt]){let dt=T[yt];Yt([rt,nt,rt+ot,nt+at],[dt[0],dt[3],dt[4],dt[7]])&&(lt||(y.save(),lt=!0),y.beginPath(),y.moveTo(N[0],N[1]),y.lineTo(N[2],N[3]),y.lineTo(N[4],N[5]),y.lineTo(N[6],N[7]),y.moveTo(dt[6],dt[7]),y.lineTo(dt[4],dt[5]),y.lineTo(dt[2],dt[3]),y.lineTo(dt[0],dt[1]),y.clip())}T.push(N),z.push(X)}else y.clearRect(rt,nt,ot,at);this.drawTileImage(tt,t,rt,nt,ot,at,Z,ct),T&&!ht?(lt&&y.restore(),this.renderedTiles.unshift(tt)):this.renderedTiles.push(tt),this.updateUsedTiles(t.usedTiles,f,tt)}}return this.renderedRevision=u,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Di(this.renderedExtent_,I),this.renderedExtent_=I,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(t,f,p,h,r,x,b,c.getPreload()),this.scheduleExpireCache(t,f),this.postRender(y,t),e.extent&&y.restore(),y.imageSmoothingEnabled=!0,g!==M.style.transform&&(M.style.transform=g),this.container}drawTileImage(t,i,e,s,r,n,l,a){let h=this.getTileImage(t);if(!h)return;let c=Mt(this),f=i.layerStatesArray[i.layerIndex],u=f.opacity*(a?t.getAlpha(c,i.time):1),p=u!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(h,l,l,h.width-2*l,h.height-2*l,e,s,r,n),p&&this.context.restore(),u!==f.opacity?i.animate=!0:a&&t.endTransition(c)}getImage(){let t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,i){if(i.canExpireCache()){let e=(function(s,r,n){let l=Mt(s);l in n.usedTiles&&s.expireCache(n.viewState.projection,n.usedTiles[l])}).bind(null,i);t.postRenderFunctions.push(e)}}updateUsedTiles(t,i,e){let s=Mt(i);s in t||(t[s]={}),t[s][e.getKey()]=!0}manageTilePyramid(t,i,e,s,r,n,l,a,h){let c=Mt(i);c in t.wantedTiles||(t.wantedTiles[c]={});let f=t.wantedTiles[c],u=t.tileQueue,p=e.getMinZoom(),b=t.viewState.rotation,v=b?cn(t.viewState.center,t.viewState.resolution,b,t.size):void 0,x=0,m,E,L,S,w,R;for(R=p;R<=l;++R)for(E=e.getTileRangeForExtentAndZ(n,R,E),L=e.getResolution(R),S=E.minX;S<=E.maxX;++S)for(w=E.minY;w<=E.maxY;++w)b&&!e.tileCoordIntersectsViewport([R,S,w],v)||(l-R<=a?(++x,m=i.getTile(R,S,w,s,r),m.getState()==pt.IDLE&&(f[m.getKey()]=!0,u.isKeyQueued(m.getKey())||u.enqueue([m,c,e.getTileCoordCenter(m.tileCoord),L])),h!==void 0&&h(m)):i.useTile(R,S,w,r));i.updateCacheSize(x,r)}},pu=Tl;var Al=class extends uu{constructor(t){super(t)}createRenderer(){return new pu(this)}},Rr=Al;var Dl=class o{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){let t=this.getColor();return new o({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}},Ce=Dl;function qn(o,t,i,e,s,r,n){let l,a,h=(i-t)/e;if(h===1)l=t;else if(h===2)l=t,a=s;else if(h!==0){let c=o[t],f=o[t+1],u=0,p=[0];for(let x=t+e;x<i;x+=e){let m=o[x],E=o[x+1];u+=Math.sqrt((m-c)*(m-c)+(E-f)*(E-f)),p.push(u),c=m,f=E}let b=s*u,v=Kh(p,b);v<0?(a=(b-p[-v-2])/(p[-v-1]-p[-v-2]),l=t+(-v-2)*e):l=t+v*e}n=n>1?n:2,r=r||new Array(n);for(let c=0;c<n;++c)r[c]=l===void 0?NaN:a===void 0?o[l+c]:oe(o[l+c],o[l+e+c],a);return r}function Kn(o,t,i,e,s,r){if(i==t)return null;let n;if(s<o[t+e-1])return r?(n=o.slice(t,t+e),n[e-1]=s,n):null;if(o[i-1]<s)return r?(n=o.slice(i-e,i),n[e-1]=s,n):null;if(s==o[t+e-1])return o.slice(t,t+e);let l=t/e,a=i/e;for(;l<a;){let u=l+a>>1;s<o[(u+1)*e-1]?a=u:l=u+1}let h=o[l*e-1];if(s==h)return o.slice((l-1)*e,(l-1)*e+e);let c=o[(l+1)*e-1],f=(s-h)/(c-h);n=[];for(let u=0;u<e-1;++u)n.push(oe(o[(l-1)*e+u],o[l*e+u],f));return n.push(s),n}function fu(o,t,i,e,s,r,n){if(n)return Kn(o,t,i[i.length-1],e,s,r);let l;if(s<o[e-1])return r?(l=o.slice(0,e),l[e-1]=s,l):null;if(o[o.length-1]<s)return r?(l=o.slice(o.length-e),l[e-1]=s,l):null;for(let a=0,h=i.length;a<h;++a){let c=i[a];if(t!=c){if(s<o[t+e-1])return null;if(s<=o[c-1])return Kn(o,t,c,e,s,!1);t=c}}return null}function $n(o,t,i,e){let s=o[t],r=o[t+1],n=0;for(let l=t+e;l<i;l+=e){let a=o[l],h=o[l+1];n+=Math.sqrt((a-s)*(a-s)+(h-r)*(h-r)),s=a,r=h}return n}var Ll=class o extends Ee{constructor(t,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendCoordinate(t){this.flatCoordinates?xe(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){let t=new o(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,e,s){return s<Me(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,e,s))}forEachSegment(t){return _n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,i){return this.layout!="XYM"&&this.layout!="XYZM"?null:(i=i!==void 0?i:!1,Kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i))}getCoordinates(){return Ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,i){return qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)}getLength(){return $n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){let i=[];return i.length=br(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new o(i,"XY")}getType(){return"LineString"}intersectsExtent(t){return _r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cs(this.flatCoordinates,0,t,this.stride),this.changed()}},Or=Ll;var Il=class o{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){let t=this.getColor();return new o({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}},De=Il;var kl=class o{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ie(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ft()}getImage(t){return ft()}getHitDetectionImage(){return ft()}getPixelRatio(t){return 1}getImageState(){return ft()}getImageSize(){return ft()}getOrigin(){return ft()}getSize(){return ft()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ie(t)}listenImageChange(t){ft()}load(){ft()}unlistenImageChange(t){ft()}},Jn=kl;function Le(o){return Array.isArray(o)?Ro(o):o}var Rl=class o extends Jn{constructor(t){let i=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:i,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){let t=this.getScale(),i=new o({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){let t=this.size_;if(!t)return null;let i=this.getDisplacement(),e=this.getScaleArray();return[t[0]/2-i[0]/e[0],t[1]/2+i[1]/e[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let i=this.canvas_[t];if(!i){let e=this.renderOptions_,s=Xt(e.size*t,e.size*t);this.draw_(e,s,t),i=s.canvas,this.canvas_[t]=i}return i}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Ot.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,e){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){let R=s;s=r,r=R}let n=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/n,a=r*Math.sin(l),h=Math.sqrt(r*r-a*a),c=s-h,f=Math.sqrt(a*a+c*c),u=f/a;if(t==="miter"&&u<=e)return u*i;let p=i/2/u,b=i/2*(c/f),x=Math.sqrt((s+p)*(s+p)+b*b)-s;if(this.radius2_===void 0||t==="bevel")return x*2;let m=s*Math.sin(l),E=Math.sqrt(s*s-m*m),L=r-E,w=Math.sqrt(m*m+L*L)/m;if(w<=e){let R=w*i/2-r-s;return 2*Math.max(x,R)}return x*2}createRenderOptions(){let t=di,i=0,e=null,s=0,r,n=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=Ri),r=Le(r),n=this.stroke_.getWidth(),n===void 0&&(n=Fi),e=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=di),i=this.stroke_.getMiterLimit(),i===void 0&&(i=ki));let l=this.calculateLineJoinSize_(t,n,i),a=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*a+l);return{strokeStyle:r,strokeWidth:n,size:h,lineDash:e,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,i,e){if(i.scale(e,e),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let s=this.fill_.getColor();s===null&&(s=$t),i.fillStyle=Le(s),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let i=this.fill_.getColor(),e=0;if(typeof i=="string"&&(i=as(i)),i===null?e=1:Array.isArray(i)&&(e=i.length===4?i[3]:1),e===0){let s=Xt(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let i=this.points_,e=this.radius_;if(i===1/0)t.arc(0,0,e,0,2*Math.PI);else{let s=this.radius2_===void 0?e:this.radius2_;this.radius2_!==void 0&&(i*=2);let r=this.angle_-Math.PI/2,n=2*Math.PI/i;for(let l=0;l<i;l++){let a=r+l*n,h=l%2===0?e:s;t.lineTo(h*Math.cos(a),h*Math.sin(a))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=$t,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}},Qn=Rl;var Ol=class o extends Qn{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){let t=this.getScale(),i=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(t){this.radius_=t,this.render()}},to=Ol;var eo=class o{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=gu,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new o({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(i){return i.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=gu,this.geometry_=t}setZIndex(t){this.zIndex_=t}};function mu(o){let t;if(typeof o=="function")t=o;else{let i;Array.isArray(o)?i=o:(gt(typeof o.getZIndex=="function",41),i=[o]),t=function(){return i}}return t}var Fl=null;function xu(o,t){if(!Fl){let i=new Ce({color:"rgba(255,255,255,0.4)"}),e=new De({color:"#3399CC",width:1.25});Fl=[new eo({image:new to({fill:i,stroke:e,radius:5}),fill:i,stroke:e})]}return Fl}function gu(o){return o.getGeometry()}var _e=eo;var _f="#333",zl=class o{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=ie(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Ce({color:_f}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){let t=this.getScale();return new o({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ie(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}},is=zl;var Cu=Jt(yl(),1);var Fr=null,Nl=class extends Gi{constructor(t,i,e,s,r,n){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=n,this.unlisten_=null,this.imageState_=r,this.size_=e,this.src_=i,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ot.LOADED){Fr||(Fr=Xt(1,1,void 0,{willReadFrequently:!0})),Fr.drawImage(this.image_,0,0);try{Fr.getImageData(0,0,1,1),this.tainted_=!1}catch{Fr=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ut.CHANGE)}handleImageError_(){this.imageState_=Ot.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ot.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let t=this.size_[0],i=this.size_[1],e=Xt(t,i);e.fillRect(0,0,t,i),this.hitDetectionImage_=e.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ot.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ot.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=zn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Ot.LOADED)return;let i=this.image_,e=document.createElement("canvas");e.width=Math.ceil(i.width*t),e.height=Math.ceil(i.height*t);let s=e.getContext("2d");s.scale(t,t),s.drawImage(i,0,0),s.globalCompositeOperation="multiply",s.fillStyle=un(this.color_),s.fillRect(0,0,e.width/t,e.height/t),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0),this.canvas_[t]=e}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function yu(o,t,i,e,s,r){let n=Ns.get(t,e,r);return n||(n=new Nl(o,t,i,e,s,r),Ns.set(t,e,r,n)),n}function bu(o,t,i,e){return i!==void 0&&e!==void 0?[i/o,e/t]:i!==void 0?i/o:e!==void 0?e/t:1}var jl=class o extends Jn{constructor(t){t=t||{};let i=t.opacity!==void 0?t.opacity:1,e=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:i,rotation:e,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;let n=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let l=t.src;gt(!(l!==void 0&&n),4),gt(!n||n&&this.imgSize_,5),(l===void 0||l.length===0)&&n&&(l=n.src||Mt(n)),gt(l!==void 0&&l.length>0,6),gt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),69);let a=t.src!==void 0?Ot.IDLE:Ot.LOADED;if(this.color_=t.color!==void 0?as(t.color):null,this.iconImage_=yu(n,l,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,a,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let h,c;if(t.size)[h,c]=t.size;else{let f=this.getImage(1);if(f instanceof HTMLCanvasElement||f.src&&f.complete)h=f.width,c=f.height;else{this.initialOptions_=t;let u=()=>{if(this.unlistenImageChange(u),!this.initialOptions_)return;let p=this.iconImage_.getSize();this.setScale(bu(p[0],p[1],t.width,t.height))};this.listenImageChange(u);return}}h!==void 0&&this.setScale(bu(h,c,t.width,t.height))}}clone(){let t,i,e;return this.initialOptions_?(i=this.initialOptions_.width,e=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new o({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:i,height:e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}let i=this.getDisplacement(),e=this.getScaleArray();return[t[0]-i[0]/e[0],t[1]+i[1]/e[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){let i=this.getSize(),e=this.iconImage_.getSize();if(!i||!e)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=e[0]-i[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=e[1]-i[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){let t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(ut.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ut.CHANGE,t)}},zi=jl;function Bl(o){return new _e({fill:zr(o,""),stroke:Nr(o,""),text:wf(o),image:Sf(o)})}function zr(o,t){let i=o[t+"fill-color"];if(i)return i==="none"?null:new Ce({color:i})}function Nr(o,t){let i=o[t+"stroke-width"],e=o[t+"stroke-color"];if(!(!i&&!e))return new De({width:i,color:e,lineCap:o[t+"stroke-line-cap"],lineJoin:o[t+"stroke-line-join"],lineDash:o[t+"stroke-line-dash"],lineDashOffset:o[t+"stroke-line-dash-offset"],miterLimit:o[t+"stroke-miter-limit"]})}function wf(o){let t=o["text-value"];return t?new is({text:t,font:o["text-font"],maxAngle:o["text-max-angle"],offsetX:o["text-offset-x"],offsetY:o["text-offset-y"],overflow:o["text-overflow"],placement:o["text-placement"],repeat:o["text-repeat"],scale:o["text-scale"],rotateWithView:o["text-rotate-with-view"],rotation:o["text-rotation"],textAlign:o["text-align"],justify:o["text-justify"],textBaseline:o["text-baseline"],padding:o["text-padding"],fill:zr(o,"text-"),backgroundFill:zr(o,"text-background-"),stroke:Nr(o,"text-"),backgroundStroke:Nr(o,"text-background-")}):void 0}function Sf(o){let t=o["icon-src"],i=o["icon-img"];if(t||i)return new zi({src:t,img:i,imgSize:o["icon-img-size"],anchor:o["icon-anchor"],anchorOrigin:o["icon-anchor-origin"],anchorXUnits:o["icon-anchor-x-units"],anchorYUnits:o["icon-anchor-y-units"],color:o["icon-color"],crossOrigin:o["icon-cross-origin"],offset:o["icon-offset"],displacement:o["icon-displacement"],opacity:o["icon-opacity"],scale:o["icon-scale"],width:o["icon-width"],height:o["icon-height"],rotation:o["icon-rotation"],rotateWithView:o["icon-rotate-with-view"],size:o["icon-size"],declutterMode:o["icon-declutter-mode"]});let e=o["shape-points"];if(e){let r="shape-";return new Qn({points:e,fill:zr(o,r),stroke:Nr(o,r),radius:o["shape-radius"],radius1:o["shape-radius1"],radius2:o["shape-radius2"],angle:o["shape-angle"],displacement:o["shape-displacement"],rotation:o["shape-rotation"],rotateWithView:o["shape-rotate-with-view"],scale:o["shape-scale"],declutterMode:o["shape-declutter-mode"]})}let s=o["circle-radius"];if(s){let r="circle-";return new to({radius:s,fill:zr(o,r),stroke:Nr(o,r),displacement:o["circle-displacement"],scale:o["circle-scale"],rotation:o["circle-rotation"],rotateWithView:o["circle-rotate-with-view"],declutterMode:o["circle-declutter-mode"]})}}var vu={RENDER_ORDER:"renderOrder"},Gl=class extends ds{constructor(t){t=t||{};let i=Object.assign({},t);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(vu.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Cu.default(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(vu.RENDER_ORDER,t)}setStyle(t){let i;if(t===void 0)i=xu;else if(t===null)i=null;else if(typeof t=="function")i=t;else if(t instanceof _e)i=t;else if(Array.isArray(t)){let e=t.length,s=new Array(e);for(let r=0;r<e;++r){let n=t[r];n instanceof _e?s[r]=n:s[r]=Bl(n)}i=s}else i=Bl(t);this.style_=i,this.styleFunction_=t===null?void 0:mu(this.style_),this.changed()}},_u=Gl;var jr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Br=[jr.FILL],yi=[jr.STROKE],Ni=[jr.BEGIN_PATH],Xl=[jr.CLOSE_PATH],xt=jr;var Wl=class{drawCustom(t,i,e,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,i){}drawFeature(t,i){}drawGeometryCollection(t,i){}drawLineString(t,i){}drawMultiLineString(t,i){}drawMultiPoint(t,i){}drawMultiPolygon(t,i){}drawPoint(t,i){}drawPolygon(t,i){}drawText(t,i){}setFillStrokeStyle(t,i){}setImageStyle(t,i){}setTextStyle(t,i){}},io=Wl;var Vl=class extends io{constructor(t,i,e,s){super(),this.tolerance=t,this.maxExtent=i,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=e,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){let i=this.pixelRatio;return i==1?t:t.map(function(e){return e*i})}appendFlatPointCoordinates(t,i){let e=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates,n=r.length;for(let l=0,a=t.length;l<a;l+=i)s[0]=t[l],s[1]=t[l+1],Wi(e,s)&&(r[n++]=s[0],r[n++]=s[1]);return n}appendFlatLineCoordinates(t,i,e,s,r,n){let l=this.coordinates,a=l.length,h=this.getBufferedMaxExtent();n&&(i+=s);let c=t[i],f=t[i+1],u=this.tmpCoordinate_,p=!0,b,v,x;for(b=i+s;b<e;b+=s)u[0]=t[b],u[1]=t[b+1],x=nn(h,u),x!==v?(p&&(l[a++]=c,l[a++]=f,p=!1),l[a++]=u[0],l[a++]=u[1]):x===Kt.INTERSECTING?(l[a++]=u[0],l[a++]=u[1],p=!1):p=!0,c=u[0],f=u[1],v=x;return(r&&p||b===i+s)&&(l[a++]=c,l[a++]=f),a}drawCustomCoordinates_(t,i,e,s,r){for(let n=0,l=e.length;n<l;++n){let a=e[n],h=this.appendFlatLineCoordinates(t,i,a,s,!1,!1);r.push(h),i=a}return i}drawCustom(t,i,e,s){this.beginGeometry(t,i);let r=t.getType(),n=t.getStride(),l=this.coordinates.length,a,h,c,f,u;switch(r){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),f=[];let p=t.getEndss();u=0;for(let b=0,v=p.length;b<v;++b){let x=[];u=this.drawCustomCoordinates_(a,u,p[b],n,x),f.push(x)}this.instructions.push([xt.CUSTOM,l,f,t,e,vr]),this.hitDetectionInstructions.push([xt.CUSTOM,l,f,t,s||e,vr]);break;case"Polygon":case"MultiLineString":c=[],a=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(a,0,t.getEnds(),n,c),this.instructions.push([xt.CUSTOM,l,c,t,e,Ki]),this.hitDetectionInstructions.push([xt.CUSTOM,l,c,t,s||e,Ki]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(a,0,a.length,n,!1,!1),this.instructions.push([xt.CUSTOM,l,h,t,e,Ue]),this.hitDetectionInstructions.push([xt.CUSTOM,l,h,t,s||e,Ue]);break;case"MultiPoint":a=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(a,n),h>l&&(this.instructions.push([xt.CUSTOM,l,h,t,e,Ue]),this.hitDetectionInstructions.push([xt.CUSTOM,l,h,t,s||e,Ue]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),h=this.coordinates.length,this.instructions.push([xt.CUSTOM,l,h,t,e]),this.hitDetectionInstructions.push([xt.CUSTOM,l,h,t,s||e]);break;default:}this.endGeometry(i)}beginGeometry(t,i){this.beginGeometryInstruction1_=[xt.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[xt.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t=this.hitDetectionInstructions;t.reverse();let i,e=t.length,s,r,n=-1;for(i=0;i<e;++i)s=t[i],r=s[0],r==xt.END_GEOMETRY?n=i:r==xt.BEGIN_GEOMETRY&&(s[2]=i,qh(this.hitDetectionInstructions,n,i),n=-1)}setFillStrokeStyle(t,i){let e=this.state;if(t){let s=t.getColor();e.fillStyle=Le(s||$t)}else e.fillStyle=void 0;if(i){let s=i.getColor();e.strokeStyle=Le(s||Ri);let r=i.getLineCap();e.lineCap=r!==void 0?r:ps;let n=i.getLineDash();e.lineDash=n?n.slice():Te;let l=i.getLineDashOffset();e.lineDashOffset=l||Ae;let a=i.getLineJoin();e.lineJoin=a!==void 0?a:di;let h=i.getWidth();e.lineWidth=h!==void 0?h:Fi;let c=i.getMiterLimit();e.miterLimit=c!==void 0?c:ki,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0}createFill(t){let i=t.fillStyle,e=[xt.SET_FILL_STYLE,i];return typeof i!="string"&&e.push(!0),e}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[xt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,i){let e=t.fillStyle;(typeof e!="string"||t.currentFillStyle!=e)&&(e!==void 0&&this.instructions.push(i.call(this,t)),t.currentFillStyle=e)}updateStrokeStyle(t,i){let e=t.strokeStyle,s=t.lineCap,r=t.lineDash,n=t.lineDashOffset,l=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=s||r!=t.currentLineDash&&!pe(t.currentLineDash,r)||t.currentLineDashOffset!=n||t.currentLineJoin!=l||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(e!==void 0&&i.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=n,t.currentLineJoin=l,t.currentLineWidth=a,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let i=[xt.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=on(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;ks(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},bi=Vl;var Yl=class extends bi{constructor(t,i,e,s){super(t,i,e,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,i){if(!this.image_)return;this.beginGeometry(t,i);let e=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,n=this.appendFlatPointCoordinates(e,s);this.instructions.push([xt.DRAW_IMAGE,r,n,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}drawMultiPoint(t,i){if(!this.image_)return;this.beginGeometry(t,i);let e=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,n=this.appendFlatPointCoordinates(e,s);this.instructions.push([xt.DRAW_IMAGE,r,n,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){let e=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}},wu=Yl;var Ul=class extends bi{constructor(t,i,e,s){super(t,i,e,s)}drawFlatCoordinates_(t,i,e,s){let r=this.coordinates.length,n=this.appendFlatLineCoordinates(t,i,e,s,!1,!1),l=[xt.MOVE_TO_LINE_TO,r,n];return this.instructions.push(l),this.hitDetectionInstructions.push(l),e}drawLineString(t,i){let e=this.state,s=e.strokeStyle,r=e.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,Te,Ae],Ni);let n=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(n,0,n.length,l),this.hitDetectionInstructions.push(yi),this.endGeometry(i)}drawMultiLineString(t,i){let e=this.state,s=e.strokeStyle,r=e.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,Te,Ae],Ni);let n=t.getEnds(),l=t.getFlatCoordinates(),a=t.getStride(),h=0;for(let c=0,f=n.length;c<f;++c)h=this.drawFlatCoordinates_(l,h,n[c],a);this.hitDetectionInstructions.push(yi),this.endGeometry(i)}finish(){let t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(yi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(yi),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ni)}},Su=Ul;var Hl=class extends bi{constructor(t,i,e,s){super(t,i,e,s)}drawFlatCoordinatess_(t,i,e,s){let r=this.state,n=r.fillStyle!==void 0,l=r.strokeStyle!==void 0,a=e.length;this.instructions.push(Ni),this.hitDetectionInstructions.push(Ni);for(let h=0;h<a;++h){let c=e[h],f=this.coordinates.length,u=this.appendFlatLineCoordinates(t,i,c,s,!0,!l),p=[xt.MOVE_TO_LINE_TO,f,u];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(Xl),this.hitDetectionInstructions.push(Xl)),i=c}return n&&(this.instructions.push(Br),this.hitDetectionInstructions.push(Br)),l&&(this.instructions.push(yi),this.hitDetectionInstructions.push(yi)),i}drawCircle(t,i){let e=this.state,s=e.fillStyle,r=e.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,$t]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,Te,Ae]);let n=t.getFlatCoordinates(),l=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(n,0,n.length,l,!1,!1);let h=[xt.CIRCLE,a];this.instructions.push(Ni,h),this.hitDetectionInstructions.push(Ni,h),e.fillStyle!==void 0&&(this.instructions.push(Br),this.hitDetectionInstructions.push(Br)),e.strokeStyle!==void 0&&(this.instructions.push(yi),this.hitDetectionInstructions.push(yi)),this.endGeometry(i)}drawPolygon(t,i){let e=this.state,s=e.fillStyle,r=e.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,$t]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,Te,Ae]);let n=t.getEnds(),l=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(l,0,n,a),this.endGeometry(i)}drawMultiPolygon(t,i){let e=this.state,s=e.fillStyle,r=e.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,$t]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,Te,Ae]);let n=t.getEndss(),l=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0;for(let c=0,f=n.length;c<f;++c)h=this.drawFlatCoordinatess_(l,h,n[c],a);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(t!==0){let i=this.coordinates;for(let e=0,s=i.length;e<s;++e)i[e]=Zi(i[e],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}},Zl=Hl;function Mu(o,t,i,e,s){let r=[],n=i,l=0,a=t.slice(i,2);for(;l<o&&n+s<e;){let[h,c]=a.slice(-2),f=t[n+s],u=t[n+s+1],p=Math.sqrt((f-h)*(f-h)+(u-c)*(u-c));if(l+=p,l>=o){let b=(o-l+p)/p,v=oe(h,f,b),x=oe(c,u,b);a.push(v,x),r.push(a),a=[v,x],l==o&&(n+=s),l=0}else if(l<o)a.push(t[n+s],t[n+s+1]),n+=s;else{let b=p-l,v=oe(h,f,b/p),x=oe(c,u,b/p);a.push(v,x),r.push(a),a=[v,x],l=0,n+=s}}return l>0&&r.push(a),r}function Eu(o,t,i,e,s){let r=i,n=i,l=0,a=0,h=i,c,f,u,p,b,v,x,m,E,L;for(f=i;f<e;f+=s){let S=t[f],w=t[f+1];b!==void 0&&(E=S-b,L=w-v,p=Math.sqrt(E*E+L*L),x!==void 0&&(a+=u,c=Math.acos((x*E+m*L)/(u*p)),c>o&&(a>l&&(l=a,r=h,n=f),a=0,h=f-s)),u=p,x=E,m=L),b=S,v=w}return a+=p,a>l?[h,f]:[r,n]}var Gr={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Kl=class extends bi{constructor(t,i,e,s){super(t,i,e,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[$t]={fillStyle:$t},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,i){let e=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!e&&!s)return;let n=this.coordinates,l=n.length,a=t.getType(),h=null,c=t.getStride();if(r.placement==="line"&&(a=="LineString"||a=="MultiLineString"||a=="Polygon"||a=="MultiPolygon")){if(!Yt(this.getBufferedMaxExtent(),t.getExtent()))return;let f;if(h=t.getFlatCoordinates(),a=="LineString")f=[h.length];else if(a=="MultiLineString")f=t.getEnds();else if(a=="Polygon")f=t.getEnds().slice(0,1);else if(a=="MultiPolygon"){let v=t.getEndss();f=[];for(let x=0,m=v.length;x<m;++x)f.push(v[x][0])}this.beginGeometry(t,i);let u=r.repeat,p=u?void 0:r.textAlign,b=0;for(let v=0,x=f.length;v<x;++v){let m;u?m=Mu(u*this.resolution,h,b,f[v],c):m=[h.slice(b,f[v])];for(let E=0,L=m.length;E<L;++E){let S=m[E],w=0,R=S.length;if(p==null){let I=Eu(r.maxAngle,S,0,S.length,2);w=I[0],R=I[1]}for(let I=w;I<R;I+=c)n.push(S[I],S[I+1]);let O=n.length;b=f[v],this.drawChars_(l,O),l=O}}this.endGeometry(i)}else{let f=r.overflow?null:[];switch(a){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),r.overflow||f.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":let m=t.getFlatInteriorPoints();h=[];for(let E=0,L=m.length;E<L;E+=3)r.overflow||f.push(m[E+2]/this.resolution),h.push(m[E],m[E+1]);if(h.length===0)return;c=2;break;default:}let u=this.appendFlatPointCoordinates(h,c);if(u===l)return;if(f&&(u-l)/2!==h.length/c){let m=l/2;f=f.filter((E,L)=>{let S=n[(m+L)*2]===h[L*c]&&n[(m+L)*2+1]===h[L*c+1];return S||--m,S})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);let p=r.padding;if(p!=Oi&&(r.scale[0]<0||r.scale[1]<0)){let m=r.padding[0],E=r.padding[1],L=r.padding[2],S=r.padding[3];r.scale[0]<0&&(E=-E,S=-S),r.scale[1]<0&&(m=-m,L=-L),p=[m,E,L,S]}let b=this.pixelRatio;this.instructions.push([xt.DRAW_IMAGE,l,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,p==Oi?Oi:p.map(function(m){return m*b}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);let v=1/b,x=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=$t,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,l,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,void 0,this.declutterImageWithText_,p,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?$t:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),r.backgroundFill&&(this.state.fillStyle=x,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(i)}}saveTextStates_(){let t=this.textStrokeState_,i=this.textState_,e=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));let r=this.textKey_;r in this.textStates||(this.textStates[r]={font:i.font,textAlign:i.textAlign||Ji,justify:i.justify,textBaseline:i.textBaseline||fs,scale:i.scale});let n=this.fillKey_;e&&(n in this.fillStates||(this.fillStates[n]={fillStyle:e.fillStyle}))}drawChars_(t,i){let e=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,n=this.textKey_,l=this.fillKey_;this.saveTextStates_();let a=this.pixelRatio,h=Gr[s.textBaseline],c=this.textOffsetY_*a,f=this.text_,u=e?e.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([xt.DRAW_CHARS,t,i,h,s.overflow,l,s.maxAngle,a,c,r,u*a,f,n,1]),this.hitDetectionInstructions.push([xt.DRAW_CHARS,t,i,h,s.overflow,l&&$t,s.maxAngle,1,c,r,u,f,n,1/a])}setTextStyle(t,i){let e,s,r;if(!t)this.text_="";else{let n=t.getFill();n?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Le(n.getColor()||$t)):(s=null,this.textFillState_=s);let l=t.getStroke();if(!l)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);let b=l.getLineDash(),v=l.getLineDashOffset(),x=l.getWidth(),m=l.getMiterLimit();r.lineCap=l.getLineCap()||ps,r.lineDash=b?b.slice():Te,r.lineDashOffset=v===void 0?Ae:v,r.lineJoin=l.getLineJoin()||di,r.lineWidth=x===void 0?Fi:x,r.miterLimit=m===void 0?ki:m,r.strokeStyle=Le(l.getColor()||Ri)}e=this.textState_;let a=t.getFont()||Tn;hd(a);let h=t.getScaleArray();e.overflow=t.getOverflow(),e.font=a,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.repeat=t.getRepeat(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||fs,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||Oi,e.scale=h===void 0?[1,1]:h;let c=t.getOffsetX(),f=t.getOffsetY(),u=t.getRotateWithView(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=u===void 0?!1:u,this.textRotation_=p===void 0?0:p,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:Mt(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.repeat||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+Mt(s.fillStyle):""}this.declutterImageWithText_=i}},Pu=Kl;var Mf={Circle:Zl,Default:bi,Image:wu,LineString:Su,Polygon:Zl,Text:Pu},ql=class{constructor(t,i,e,s){this.tolerance_=t,this.maxExtent_=i,this.pixelRatio_=s,this.resolution_=e,this.buildersByZIndex_={}}finish(){let t={};for(let i in this.buildersByZIndex_){t[i]=t[i]||{};let e=this.buildersByZIndex_[i];for(let s in e){let r=e[s].finish();t[i][s]=r}}return t}getBuilder(t,i){let e=t!==void 0?t.toString():"0",s=this.buildersByZIndex_[e];s===void 0&&(s={},this.buildersByZIndex_[e]=s);let r=s[i];if(r===void 0){let n=Mf[i];r=new n(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[i]=r}return r}},$l=ql;function Tu(o,t,i,e,s,r,n,l,a,h,c,f){let u=o[t],p=o[t+1],b=0,v=0,x=0,m=0;function E(){b=u,v=p,t+=e,u=o[t],p=o[t+1],m+=x,x=Math.sqrt((u-b)*(u-b)+(p-v)*(p-v))}do E();while(t<i-e&&m+x<r);let L=x===0?0:(r-m)/x,S=oe(b,u,L),w=oe(v,p,L),R=t-e,O=m,I=r+l*a(h,s,c);for(;t<i-e&&m+x<I;)E();L=x===0?0:(I-m)/x;let _=oe(b,u,L),A=oe(v,p,L),F;if(f){let g=[S,w,_,A];vn(g,0,4,2,f,g,g),F=g[0]>g[2]}else F=S>_;let P=Math.PI,D=[],C=R+e===t;t=R,x=0,m=O,u=o[t],p=o[t+1];let d;if(C){E(),d=Math.atan2(p-v,u-b),F&&(d+=d>0?-P:P);let g=(_+S)/2,y=(A+w)/2;return D[0]=[g,y,(I-r)/2,d,s],D}s=s.replace(/\n/g," ");for(let g=0,y=s.length;g<y;){E();let M=Math.atan2(p-v,u-b);if(F&&(M+=M>0?-P:P),d!==void 0){let X=M-d;if(X+=X>P?-2*P:X<-P?2*P:0,Math.abs(X)>n)return null}d=M;let k=g,T=0;for(;g<y;++g){let X=F?y-g-1:g,j=l*a(h,s[X],c);if(t+e<i&&m+x<r+T+j/2)break;T+=j}if(g===k)continue;let z=F?s.substring(y-k,y-g):s.substring(k,g);L=x===0?0:(r+T/2-m)/x;let N=oe(b,u,L),G=oe(v,p,L);D.push([N,G,T/2,M,z]),r+=T}return D}var $s=Ut(),ss=[],ji=[],Bi=[],rs=[];function Au(o){return o[3].declutterBox}var Du=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function Jl(o,t){return t==="start"?t=Du.test(o)?"right":"left":t==="end"&&(t=Du.test(o)?"left":"right"),Gr[t]}function Ef(o,t,i){return i>0&&o.push(`
`,""),o.push(t,""),o}var Ql=class{constructor(t,i,e,s){this.overlaps=e,this.pixelRatio=i,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=fe(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,i,e,s){let r=t+i+e+s;if(this.labels_[r])return this.labels_[r];let n=s?this.strokeStates[s]:null,l=e?this.fillStates[e]:null,a=this.textStates[i],h=this.pixelRatio,c=[a.scale[0]*h,a.scale[1]*h],f=Array.isArray(t),u=a.justify?Gr[a.justify]:Jl(Array.isArray(t)?t[0]:t,a.textAlign||Ji),p=s&&n.lineWidth?n.lineWidth:0,b=f?t:t.split(`
`).reduce(Ef,[]),{width:v,height:x,widths:m,heights:E,lineWidths:L}=dd(a,b),S=v+p,w=[],R=(S+2)*c[0],O=(x+p)*c[1],I={width:R<0?Math.floor(R):Math.ceil(R),height:O<0?Math.floor(O):Math.ceil(O),contextInstructions:w};(c[0]!=1||c[1]!=1)&&w.push("scale",c),s&&(w.push("strokeStyle",n.strokeStyle),w.push("lineWidth",p),w.push("lineCap",n.lineCap),w.push("lineJoin",n.lineJoin),w.push("miterLimit",n.miterLimit),w.push("setLineDash",[n.lineDash]),w.push("lineDashOffset",n.lineDashOffset)),e&&w.push("fillStyle",l.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");let _=.5-u,A=u*S+_*p,F=[],P=[],D=0,C=0,d=0,g=0,y;for(let M=0,k=b.length;M<k;M+=2){let T=b[M];if(T===`
`){C+=D,D=0,A=u*S+_*p,++g;continue}let z=b[M+1]||a.font;z!==y&&(s&&F.push("font",z),e&&P.push("font",z),y=z),D=Math.max(D,E[d]);let N=[T,A+_*m[d]+u*(m[d]-L[g]),.5*(p+D)+C];A+=m[d],s&&F.push("strokeText",N),e&&P.push("fillText",N),++d}return Array.prototype.push.apply(w,F),Array.prototype.push.apply(w,P),this.labels_[r]=I,I}replayTextBackground_(t,i,e,s,r,n,l){t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,e),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,i),n&&(this.alignFill_=n[2],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())}calculateImageOrLabelDimensions_(t,i,e,s,r,n,l,a,h,c,f,u,p,b,v,x){l*=u[0],a*=u[1];let m=e-l,E=s-a,L=r+h>t?t-h:r,S=n+c>i?i-c:n,w=b[3]+L*u[0]+b[1],R=b[0]+S*u[1]+b[2],O=m-b[3],I=E-b[0];(v||f!==0)&&(ss[0]=O,rs[0]=O,ss[1]=I,ji[1]=I,ji[0]=O+w,Bi[0]=ji[0],Bi[1]=I+R,rs[1]=Bi[1]);let _;return f!==0?(_=ye(fe(),e,s,1,1,f,-e,-s),Vt(_,ss),Vt(_,ji),Vt(_,Bi),Vt(_,rs),ze(Math.min(ss[0],ji[0],Bi[0],rs[0]),Math.min(ss[1],ji[1],Bi[1],rs[1]),Math.max(ss[0],ji[0],Bi[0],rs[0]),Math.max(ss[1],ji[1],Bi[1],rs[1]),$s)):ze(Math.min(O,O+w),Math.min(I,I+R),Math.max(O,O+w),Math.max(I,I+R),$s),p&&(m=Math.round(m),E=Math.round(E)),{drawImageX:m,drawImageY:E,drawImageW:L,drawImageH:S,originX:h,originY:c,declutterBox:{minX:$s[0],minY:$s[1],maxX:$s[2],maxY:$s[3],value:x},canvasTransform:_,scale:u}}replayImageOrLabel_(t,i,e,s,r,n,l){let a=!!(n||l),h=s.declutterBox,c=t.canvas,f=l?l[2]*s.scale[0]/2:0;return h.minX-f<=c.width/i&&h.maxX+f>=0&&h.minY-f<=c.height/i&&h.maxY+f>=0&&(a&&this.replayTextBackground_(t,ss,ji,Bi,rs,n,l),ud(t,s.canvasTransform,r,e,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){let i=Vt(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.save(),t.translate(i[0]%e,i[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,i){t.strokeStyle=i[1],t.lineWidth=i[2],t.lineCap=i[3],t.lineJoin=i[4],t.miterLimit=i[5],t.lineDashOffset=i[7],t.setLineDash(i[6])}drawLabelWithPointPlacement_(t,i,e,s){let r=this.textStates[i],n=this.createLabel(t,i,s,e),l=this.strokeStates[e],a=this.pixelRatio,h=Jl(Array.isArray(t)?t[0]:t,r.textAlign||Ji),c=Gr[r.textBaseline||fs],f=l&&l.lineWidth?l.lineWidth:0,u=n.width/a-2*r.scale[0],p=h*u+2*(.5-h)*f,b=c*n.height/a+2*(.5-c)*f;return{label:n,anchorX:p,anchorY:b}}execute_(t,i,e,s,r,n,l,a){let h;this.pixelCoordinates_&&pe(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Ye(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),rc(this.renderedTransform_,e));let c=0,f=s.length,u=0,p,b,v,x,m,E,L,S,w,R,O,I,_=0,A=0,F=null,P=null,D=this.coordinateCache_,C=this.viewRotation_,d=Math.round(Math.atan2(-e[1],e[0])*1e12)/1e12,g={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:C},y=this.instructions!=s||this.overlaps?0:200,M,k,T,z;for(;c<f;){let N=s[c];switch(N[0]){case xt.BEGIN_GEOMETRY:M=N[1],z=N[3],M.getGeometry()?l!==void 0&&!Yt(l,z.getExtent())?c=N[2]+1:++c:c=N[2];break;case xt.BEGIN_PATH:_>y&&(this.fill_(t),_=0),A>y&&(t.stroke(),A=0),!_&&!A&&(t.beginPath(),x=NaN,m=NaN),++c;break;case xt.CIRCLE:u=N[1];let X=h[u],j=h[u+1],B=h[u+2],W=h[u+3],V=B-X,U=W-j,q=Math.sqrt(V*V+U*U);t.moveTo(X+q,j),t.arc(X,j,q,0,2*Math.PI,!0),++c;break;case xt.CLOSE_PATH:t.closePath(),++c;break;case xt.CUSTOM:u=N[1],p=N[2];let H=N[3],Y=N[4],Z=N.length==6?N[5]:void 0;g.geometry=H,g.feature=M,c in D||(D[c]=[]);let K=D[c];Z?Z(h,u,p,2,K):(K[0]=h[u],K[1]=h[u+1],K.length=2),Y(K,g),++c;break;case xt.DRAW_IMAGE:u=N[1],p=N[2],S=N[3],b=N[4],v=N[5];let J=N[6],tt=N[7],$=N[8],Q=N[9],et=N[10],it=N[11],st=N[12],rt=N[13],nt=N[14],ot=N[15];if(!S&&N.length>=20){w=N[19],R=N[20],O=N[21],I=N[22];let ke=this.drawLabelWithPointPlacement_(w,R,O,I);S=ke.label,N[3]=S;let vs=N[23];b=(ke.anchorX-vs)*this.pixelRatio,N[4]=b;let je=N[24];v=(ke.anchorY-je)*this.pixelRatio,N[5]=v,J=S.height,N[6]=J,rt=S.width,N[13]=rt}let at;N.length>25&&(at=N[25]);let ct,ht,lt;N.length>17?(ct=N[16],ht=N[17],lt=N[18]):(ct=Oi,ht=!1,lt=!1),et&&d?it+=C:!et&&!d&&(it-=C);let yt=0;for(;u<p;u+=2){if(at&&at[yt++]<rt/this.pixelRatio)continue;let ke=this.calculateImageOrLabelDimensions_(S.width,S.height,h[u],h[u+1],rt,J,b,v,$,Q,it,st,r,ct,ht||lt,M),vs=[t,i,S,ke,tt,ht?F:null,lt?P:null];if(a){if(nt==="none")continue;if(nt==="obstacle"){a.insert(ke.declutterBox);continue}else{let je,Ci;if(ot){let Re=p-u;if(!ot[Re]){ot[Re]=vs;continue}if(je=ot[Re],delete ot[Re],Ci=Au(je),a.collides(Ci))continue}if(a.collides(ke.declutterBox))continue;je&&(a.insert(Ci),this.replayImageOrLabel_.apply(this,je)),a.insert(ke.declutterBox)}}this.replayImageOrLabel_.apply(this,vs)}++c;break;case xt.DRAW_CHARS:let Et=N[1],dt=N[2],St=N[3],mt=N[4];I=N[5];let Pt=N[6],jt=N[7],me=N[8];O=N[9];let se=N[10];w=N[11],R=N[12];let Ie=[N[13],N[13]],vo=this.textStates[R],tr=vo.font,er=[vo.scale[0]*jt,vo.scale[1]*jt],ir;tr in this.widths_?ir=this.widths_[tr]:(ir={},this.widths_[tr]=ir);let _h=$n(h,Et,dt,2),wh=Math.abs(er[0])*wa(tr,w,ir);if(mt||wh<=_h){let ke=this.textStates[R].textAlign,vs=(_h-wh)*Jl(w,ke),je=Tu(h,Et,dt,2,w,vs,Pt,Math.abs(er[0]),wa,tr,ir,d?0:this.viewRotation_);t:if(je){let Ci=[],Re,Zr,Kr,we,Be;if(O)for(Re=0,Zr=je.length;Re<Zr;++Re){Be=je[Re],Kr=Be[4],we=this.createLabel(Kr,R,"",O),b=Be[2]+(er[0]<0?-se:se),v=St*we.height+(.5-St)*2*se*er[1]/er[0]-me;let _i=this.calculateImageOrLabelDimensions_(we.width,we.height,Be[0],Be[1],we.width,we.height,b,v,0,0,Be[3],Ie,!1,Oi,!1,M);if(a&&a.collides(_i.declutterBox))break t;Ci.push([t,i,we,_i,1,null,null])}if(I)for(Re=0,Zr=je.length;Re<Zr;++Re){Be=je[Re],Kr=Be[4],we=this.createLabel(Kr,R,I,""),b=Be[2],v=St*we.height-me;let _i=this.calculateImageOrLabelDimensions_(we.width,we.height,Be[0],Be[1],we.width,we.height,b,v,0,0,Be[3],Ie,!1,Oi,!1,M);if(a&&a.collides(_i.declutterBox))break t;Ci.push([t,i,we,_i,1,null,null])}a&&a.load(Ci.map(Au));for(let _i=0,Sp=Ci.length;_i<Sp;++_i)this.replayImageOrLabel_.apply(this,Ci[_i])}}++c;break;case xt.END_GEOMETRY:if(n!==void 0){M=N[1];let ke=n(M,z);if(ke)return ke}++c;break;case xt.FILL:y?_++:this.fill_(t),++c;break;case xt.MOVE_TO_LINE_TO:for(u=N[1],p=N[2],k=h[u],T=h[u+1],E=k+.5|0,L=T+.5|0,(E!==x||L!==m)&&(t.moveTo(k,T),x=E,m=L),u+=2;u<p;u+=2)k=h[u],T=h[u+1],E=k+.5|0,L=T+.5|0,(u==p-2||E!==x||L!==m)&&(t.lineTo(k,T),x=E,m=L);++c;break;case xt.SET_FILL_STYLE:F=N,this.alignFill_=N[2],_&&(this.fill_(t),_=0,A&&(t.stroke(),A=0)),t.fillStyle=N[1],++c;break;case xt.SET_STROKE_STYLE:P=N,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,N),++c;break;case xt.STROKE:y?A++:t.stroke(),++c;break;default:++c;break}}_&&this.fill_(t),A&&t.stroke()}execute(t,i,e,s,r,n){this.viewRotation_=s,this.execute_(t,i,e,this.instructions,r,void 0,void 0,n)}executeHitDetection(t,i,e,s,r){return this.viewRotation_=e,this.execute_(t,1,i,this.hitDetectionInstructions,!0,s,r)}},Lu=Ql;var th=["Polygon","Circle","LineString","Image","Text","Default"],ih=class{constructor(t,i,e,s,r,n){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=e,this.resolution_=i,this.renderBuffer_=n,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=fe(),this.createExecutors_(r)}clip(t,i){let e=this.getClipCoords(i);t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.lineTo(e[6],e[7]),t.clip()}createExecutors_(t){for(let i in t){let e=this.executorsByZIndex_[i];e===void 0&&(e={},this.executorsByZIndex_[i]=e);let s=t[i];for(let r in s){let n=s[r];e[r]=new Lu(this.resolution_,this.pixelRatio_,this.overlaps_,n)}}}hasExecutors(t){for(let i in this.executorsByZIndex_){let e=this.executorsByZIndex_[i];for(let s=0,r=t.length;s<r;++s)if(t[s]in e)return!0}return!1}forEachFeatureAtCoordinate(t,i,e,s,r,n){s=Math.round(s);let l=s*2+1,a=ye(this.hitDetectionTransform_,s+.5,s+.5,1/i,-1/i,-e,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Xt(l,l,void 0,{willReadFrequently:!0}));let c=this.hitDetectionContext_;c.canvas.width!==l||c.canvas.height!==l?(c.canvas.width=l,c.canvas.height=l):h||c.clearRect(0,0,l,l);let f;this.renderBuffer_!==void 0&&(f=Ut(),os(f,t),ks(f,i*(this.renderBuffer_+s),f));let u=Pf(s),p;function b(w,R){let O=c.getImageData(0,0,l,l).data;for(let I=0,_=u.length;I<_;I++)if(O[u[I]]>0){if(!n||p!=="Image"&&p!=="Text"||n.includes(w)){let A=(u[I]-3)/4,F=s-A%l,P=s-(A/l|0),D=r(w,R,F*F+P*P);if(D)return D}c.clearRect(0,0,l,l);break}}let v=Object.keys(this.executorsByZIndex_).map(Number);v.sort(qe);let x,m,E,L,S;for(x=v.length-1;x>=0;--x){let w=v[x].toString();for(E=this.executorsByZIndex_[w],m=th.length-1;m>=0;--m)if(p=th[m],L=E[p],L!==void 0&&(S=L.executeHitDetection(c,a,e,b,f),S))return S}}getClipCoords(t){let i=this.maxExtent_;if(!i)return null;let e=i[0],s=i[1],r=i[2],n=i[3],l=[e,s,e,n,r,n,r,s];return Ye(l,0,8,2,t,l),l}isEmpty(){return Je(this.executorsByZIndex_)}execute(t,i,e,s,r,n,l){let a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(qe),this.maxExtent_&&(t.save(),this.clip(t,e)),n=n||th;let h,c,f,u,p,b;for(l&&a.reverse(),h=0,c=a.length;h<c;++h){let v=a[h].toString();for(p=this.executorsByZIndex_[v],f=0,u=n.length;f<u;++f){let x=n[f];b=p[x],b!==void 0&&b.execute(t,i,e,s,r,l)}}this.maxExtent_&&t.restore()}},eh={};function Pf(o){if(eh[o]!==void 0)return eh[o];let t=o*2+1,i=o*o,e=new Array(i+1);for(let r=0;r<=o;++r)for(let n=0;n<=o;++n){let l=r*r+n*n;if(l>i)break;let a=e[l];a||(a=[],e[l]=a),a.push(((o+r)*t+(o+n))*4+3),r>0&&a.push(((o-r)*t+(o+n))*4+3),n>0&&(a.push(((o+r)*t+(o-n))*4+3),r>0&&a.push(((o-r)*t+(o-n))*4+3))}let s=[];for(let r=0,n=e.length;r<n;++r)e[r]&&s.push(...e[r]);return eh[o]=s,s}var sh=ih;var rh=class extends io{constructor(t,i,e,s,r,n,l){super(),this.context_=t,this.pixelRatio_=i,this.extent_=e,this.transform_=s,this.transformRotation_=s?dn(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=n,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=fe()}drawImages_(t,i,e,s){if(!this.image_)return;let r=Ye(t,i,e,s,this.transform_,this.pixelCoordinates_),n=this.context_,l=this.tmpLocalTransform_,a=n.globalAlpha;this.imageOpacity_!=1&&(n.globalAlpha=a*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,f=r.length;c<f;c+=2){let u=r[c]-this.imageAnchorX_,p=r[c+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let b=u+this.imageAnchorX_,v=p+this.imageAnchorY_;ye(l,b,v,1,1,h,-b,-v),n.setTransform.apply(n,l),n.translate(b,v),n.scale(this.imageScale_[0],this.imageScale_[1]),n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),n.setTransform(1,0,0,1,0,0)}else n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(n.globalAlpha=a)}drawText_(t,i,e,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let r=Ye(t,i,e,s,this.transform_,this.pixelCoordinates_),n=this.context_,l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);i<e;i+=s){let a=r[i]+this.textOffsetX_,h=r[i+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(n.translate(a-this.textOffsetX_,h-this.textOffsetY_),n.rotate(l),n.translate(this.textOffsetX_,this.textOffsetY_),n.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&n.strokeText(this.text_,0,0),this.textFillState_&&n.fillText(this.text_,0,0),n.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&n.strokeText(this.text_,a,h),this.textFillState_&&n.fillText(this.text_,a,h))}}moveToLineTo_(t,i,e,s,r){let n=this.context_,l=Ye(t,i,e,s,this.transform_,this.pixelCoordinates_);n.moveTo(l[0],l[1]);let a=l.length;r&&(a-=2);for(let h=2;h<a;h+=2)n.lineTo(l[h],l[h+1]);return r&&n.closePath(),e}drawRings_(t,i,e,s){for(let r=0,n=e.length;r<n;++r)i=this.moveToLineTo_(t,i,e[r],s,!0);return i}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let i=Gc(t,this.transform_,this.pixelCoordinates_),e=i[2]-i[0],s=i[3]-i[1],r=Math.sqrt(e*e+s*s),n=this.context_;n.beginPath(),n.arc(i[0],i[1],r,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,i){let e=i.getGeometryFunction()(t);e&&(this.setStyle(i),this.drawGeometry(e))}drawGeometryCollection(t){let i=t.getGeometriesArray();for(let e=0,s=i.length;e<s;++e)this.drawGeometry(i[e])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let i=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(i,0,i.length,e),this.text_!==""&&this.drawText_(i,0,i.length,e)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let i=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(i,0,i.length,e),this.text_!==""&&this.drawText_(i,0,i.length,e)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let i=this.context_,e=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(e,0,e.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){let i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let i=t.getExtent();if(Yt(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,s=t.getFlatCoordinates(),r=0,n=t.getEnds(),l=t.getStride();e.beginPath();for(let a=0,h=n.length;a<h;++a)r=this.moveToLineTo_(s,r,n[a],l,!1);e.stroke()}if(this.text_!==""){let e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){let i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let i=this.context_,e=t.getOrientedFlatCoordinates(),s=0,r=t.getEndss(),n=t.getStride();i.beginPath();for(let l=0,a=r.length;l<a;++l){let h=r[l];s=this.drawRings_(e,s,h,n)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){let i=t.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(t){let i=this.context_,e=this.contextFillState_;e?e.fillStyle!=t.fillStyle&&(e.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let i=this.context_,e=this.contextStrokeState_;e?(e.lineCap!=t.lineCap&&(e.lineCap=t.lineCap,i.lineCap=t.lineCap),pe(e.lineDash,t.lineDash)||i.setLineDash(e.lineDash=t.lineDash),e.lineDashOffset!=t.lineDashOffset&&(e.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset),e.lineJoin!=t.lineJoin&&(e.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),e.lineWidth!=t.lineWidth&&(e.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),e.miterLimit!=t.miterLimit&&(e.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),e.strokeStyle!=t.strokeStyle&&(e.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset,i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let i=this.context_,e=this.contextTextState_,s=t.textAlign?t.textAlign:Ji;e?(e.font!=t.font&&(e.font=t.font,i.font=t.font),e.textAlign!=s&&(e.textAlign=s,i.textAlign=s),e.textBaseline!=t.textBaseline&&(e.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=s,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,i){if(!t)this.fillState_=null;else{let e=t.getColor();this.fillState_={fillStyle:Le(e||$t)}}if(!i)this.strokeState_=null;else{let e=i.getColor(),s=i.getLineCap(),r=i.getLineDash(),n=i.getLineDashOffset(),l=i.getLineJoin(),a=i.getWidth(),h=i.getMiterLimit(),c=r||Te;this.strokeState_={lineCap:s!==void 0?s:ps,lineDash:this.pixelRatio_===1?c:c.map(f=>f*this.pixelRatio_),lineDashOffset:(n||Ae)*this.pixelRatio_,lineJoin:l!==void 0?l:di,lineWidth:(a!==void 0?a:Fi)*this.pixelRatio_,miterLimit:h!==void 0?h:ki,strokeStyle:Le(e||Ri)}}}setImageStyle(t){let i;if(!t||!(i=t.getSize())){this.image_=null;return}let e=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*e,this.imageAnchorY_=s[1]*e,this.imageHeight_=i[1]*e,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let n=t.getScaleArray();this.imageScale_=[n[0]*this.pixelRatio_/e,n[1]*this.pixelRatio_/e],this.imageWidth_=i[0]*e}setTextStyle(t){if(!t)this.text_="";else{let i=t.getFill();if(!i)this.textFillState_=null;else{let p=i.getColor();this.textFillState_={fillStyle:Le(p||$t)}}let e=t.getStroke();if(!e)this.textStrokeState_=null;else{let p=e.getColor(),b=e.getLineCap(),v=e.getLineDash(),x=e.getLineDashOffset(),m=e.getLineJoin(),E=e.getWidth(),L=e.getMiterLimit();this.textStrokeState_={lineCap:b!==void 0?b:ps,lineDash:v||Te,lineDashOffset:x||Ae,lineJoin:m!==void 0?m:di,lineWidth:E!==void 0?E:Fi,miterLimit:L!==void 0?L:ki,strokeStyle:Le(p||Ri)}}let s=t.getFont(),r=t.getOffsetX(),n=t.getOffsetY(),l=t.getRotateWithView(),a=t.getRotation(),h=t.getScaleArray(),c=t.getText(),f=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:s!==void 0?s:Tn,textAlign:f!==void 0?f:Ji,textBaseline:u!==void 0?u:fs},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,b,v)=>p+=v%2?" ":b,""):c:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=n!==void 0?this.pixelRatio_*n:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=a!==void 0?a:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}},Iu=rh;var ni=.5;function ku(o,t,i,e,s,r,n){let l=o[0]*ni,a=o[1]*ni,h=Xt(l,a);h.imageSmoothingEnabled=!1;let c=h.canvas,f=new Iu(h,ni,s,null,n),u=i.length,p=Math.floor((256*256*256-1)/u),b={};for(let x=1;x<=u;++x){let m=i[x-1],E=m.getStyleFunction()||e;if(!E)continue;let L=E(m,r);if(!L)continue;Array.isArray(L)||(L=[L]);let w=(x*p).toString(16).padStart(7,"#00000");for(let R=0,O=L.length;R<O;++R){let I=L[R],_=I.getGeometryFunction()(m);if(!_||!Yt(s,_.getExtent()))continue;let A=I.clone(),F=A.getFill();F&&F.setColor(w);let P=A.getStroke();P&&(P.setColor(w),P.setLineDash(null)),A.setText(void 0);let D=I.getImage();if(D){let y=D.getImageSize();if(!y)continue;let M=Xt(y[0],y[1],void 0,{alpha:!1}),k=M.canvas;M.fillStyle=w,M.fillRect(0,0,k.width,k.height),A.setImage(new zi({img:k,imgSize:y,anchor:D.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}let C=A.getZIndex()||0,d=b[C];d||(d={},b[C]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[]);let g=_.getType();if(g==="GeometryCollection"){let y=_.getGeometriesArrayRecursive();for(let M=0,k=y.length;M<k;++M){let T=y[M];d[T.getType().replace("Multi","")].push(T,A)}}else d[g.replace("Multi","")].push(_,A)}}let v=Object.keys(b).map(Number).sort(qe);for(let x=0,m=v.length;x<m;++x){let E=b[v[x]];for(let L in E){let S=E[L];for(let w=0,R=S.length;w<R;w+=2){f.setStyle(S[w+1]);for(let O=0,I=t.length;O<I;++O)f.setTransform(t[O]),f.drawGeometry(S[w])}}}return h.getImageData(0,0,c.width,c.height)}function Ru(o,t,i){let e=[];if(i){let s=Math.floor(Math.round(o[0])*ni),r=Math.floor(Math.round(o[1])*ni),n=(Rt(s,0,i.width-1)+Rt(r,0,i.height-1)*i.width)*4,l=i.data[n],a=i.data[n+1],c=i.data[n+2]+256*(a+256*l),f=Math.floor((256*256*256-1)/t.length);c&&c%f===0&&e.push(t[c/f-1])}return e}var Tf=.5,Ou={Point:Of,LineString:If,Polygon:zf,MultiPoint:Ff,MultiLineString:kf,MultiPolygon:Rf,GeometryCollection:Lf,Circle:Af};function Fu(o,t){return parseInt(Mt(o),10)-parseInt(Mt(t),10)}function zu(o,t){let i=so(o,t);return i*i}function so(o,t){return Tf*o/t}function Af(o,t,i,e,s){let r=i.getFill(),n=i.getStroke();if(r||n){let a=o.getBuilder(i.getZIndex(),"Circle");a.setFillStrokeStyle(r,n),a.drawCircle(t,e)}let l=i.getText();if(l&&l.getText()){let a=(s||o).getBuilder(i.getZIndex(),"Text");a.setTextStyle(l),a.drawText(t,e)}}function nh(o,t,i,e,s,r,n){let l=!1,a=i.getImage();if(a){let h=a.getImageState();h==Ot.LOADED||h==Ot.ERROR?a.unlistenImageChange(s):(h==Ot.IDLE&&a.load(),a.listenImageChange(s),l=!0)}return Df(o,t,i,e,r,n),l}function Df(o,t,i,e,s,r){let n=i.getGeometryFunction()(t);if(!n)return;let l=n.simplifyTransformed(e,s);if(i.getRenderer())Nu(o,l,i,t);else{let h=Ou[l.getType()];h(o,l,i,t,r)}}function Nu(o,t,i,e){if(t.getType()=="GeometryCollection"){let r=t.getGeometries();for(let n=0,l=r.length;n<l;++n)Nu(o,r[n],i,e);return}o.getBuilder(i.getZIndex(),"Default").drawCustom(t,e,i.getRenderer(),i.getHitDetectionRenderer())}function Lf(o,t,i,e,s){let r=t.getGeometriesArray(),n,l;for(n=0,l=r.length;n<l;++n){let a=Ou[r[n].getType()];a(o,r[n],i,e,s)}}function If(o,t,i,e,s){let r=i.getStroke();if(r){let l=o.getBuilder(i.getZIndex(),"LineString");l.setFillStrokeStyle(null,r),l.drawLineString(t,e)}let n=i.getText();if(n&&n.getText()){let l=(s||o).getBuilder(i.getZIndex(),"Text");l.setTextStyle(n),l.drawText(t,e)}}function kf(o,t,i,e,s){let r=i.getStroke();if(r){let l=o.getBuilder(i.getZIndex(),"LineString");l.setFillStrokeStyle(null,r),l.drawMultiLineString(t,e)}let n=i.getText();if(n&&n.getText()){let l=(s||o).getBuilder(i.getZIndex(),"Text");l.setTextStyle(n),l.drawText(t,e)}}function Rf(o,t,i,e,s){let r=i.getFill(),n=i.getStroke();if(n||r){let a=o.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,n),a.drawMultiPolygon(t,e)}let l=i.getText();if(l&&l.getText()){let a=(s||o).getBuilder(i.getZIndex(),"Text");a.setTextStyle(l),a.drawText(t,e)}}function Of(o,t,i,e,s){let r=i.getImage(),n=i.getText(),l;if(r){if(r.getImageState()!=Ot.LOADED)return;let a=o;if(s){let c=r.getDeclutterMode();if(c!=="none")if(a=s,c==="obstacle"){let f=o.getBuilder(i.getZIndex(),"Image");f.setImageStyle(r,l),f.drawPoint(t,e)}else n&&n.getText()&&(l={})}let h=a.getBuilder(i.getZIndex(),"Image");h.setImageStyle(r,l),h.drawPoint(t,e)}if(n&&n.getText()){let a=o;s&&(a=s);let h=a.getBuilder(i.getZIndex(),"Text");h.setTextStyle(n,l),h.drawText(t,e)}}function Ff(o,t,i,e,s){let r=i.getImage(),n=i.getText(),l;if(r){if(r.getImageState()!=Ot.LOADED)return;let a=o;if(s){let c=r.getDeclutterMode();if(c!=="none")if(a=s,c==="obstacle"){let f=o.getBuilder(i.getZIndex(),"Image");f.setImageStyle(r,l),f.drawMultiPoint(t,e)}else n&&n.getText()&&(l={})}let h=a.getBuilder(i.getZIndex(),"Image");h.setImageStyle(r,l),h.drawMultiPoint(t,e)}if(n&&n.getText()){let a=o;s&&(a=s);let h=a.getBuilder(i.getZIndex(),"Text");h.setTextStyle(n,l),h.drawText(t,e)}}function zf(o,t,i,e,s){let r=i.getFill(),n=i.getStroke();if(r||n){let a=o.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,n),a.drawPolygon(t,e)}let l=i.getText();if(l&&l.getText()){let a=(s||o).getBuilder(i.getZIndex(),"Text");a.setTextStyle(l),a.drawText(t,e)}}var oh=class extends Zn{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ut(),this.wrappedRenderedExtent_=Ut(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,i,e){let s=i.extent,r=i.viewState,n=r.center,l=r.resolution,a=r.projection,h=r.rotation,c=a.getExtent(),f=this.getLayer().getSource(),u=i.pixelRatio,p=i.viewHints,b=!(p[qt.ANIMATING]||p[qt.INTERACTING]),v=this.compositionContext_,x=Math.round(i.size[0]*u),m=Math.round(i.size[1]*u),E=f.getWrapX()&&a.canWrapX(),L=E?At(c):null,S=E?Math.ceil((s[2]-c[2])/L)+1:1,w=E?Math.floor((s[0]-c[0])/L):0;do{let R=this.getRenderTransform(n,l,h,u,x,m,w*L);t.execute(v,1,R,h,b,void 0,e)}while(++w<S)}setupCompositionContext_(){if(this.opacity_!==1){let t=Xt(this.context.canvas.width,this.context.canvas.height,El);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){let t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,us(this.compositionContext_),El.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,i){let e=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];nc(this.pixelTransform,1/e,1/e),Is(this.inversePixelTransform,this.pixelTransform);let r=rn(this.pixelTransform);this.useContainer(i,r,this.getBackground(t));let n=this.context,l=n.canvas,a=this.replayGroup_,h=this.declutterExecutorGroup,c=a&&!a.isEmpty()||h&&!h.isEmpty();if(!c&&!(this.getLayer().hasListener(be.PRERENDER)||this.getLayer().hasListener(be.POSTRENDER)))return null;let f=Math.round(t.size[0]*e),u=Math.round(t.size[1]*e);l.width!=f||l.height!=u?(l.width=f,l.height=u,l.style.transform!==r&&(l.style.transform=r)):this.containerReused||n.clearRect(0,0,f,u),this.preRender(n,t);let p=t.viewState,b=p.projection;this.opacity_=s.opacity,this.setupCompositionContext_();let v=!1;if(c&&s.extent&&this.clipping){let x=si(s.extent,b);c=Yt(x,t.extent),v=c&&!Ti(x,t.extent),v&&this.clipUnrotated(this.compositionContext_,t,x)}return c&&this.renderWorlds(a,t),v&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(n,t),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(i=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let e=[this.context.canvas.width,this.context.canvas.height];Vt(this.pixelTransform,e);let s=this.renderedCenter_,r=this.renderedResolution_,n=this.renderedRotation_,l=this.renderedProjection_,a=this.wrappedRenderedExtent_,h=this.getLayer(),c=[],f=e[0]*ni,u=e[1]*ni;c.push(this.getRenderTransform(s,r,n,ni,f,u,0).slice());let p=h.getSource(),b=l.getExtent();if(p.getWrapX()&&l.canWrapX()&&!Ti(b,a)){let v=a[0],x=At(b),m=0,E;for(;v<b[0];)--m,E=x*m,c.push(this.getRenderTransform(s,r,n,ni,f,u,E).slice()),v+=x;for(m=0,v=a[2];v>b[2];)++m,E=x*m,c.push(this.getRenderTransform(s,r,n,ni,f,u,E).slice()),v-=x}this.hitDetectionImageData_=ku(e,c,this.renderedFeatures_,h.getStyleFunction(),a,r,n)}i(Ru(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,i,e,s,r){if(!this.replayGroup_)return;let n=i.viewState.resolution,l=i.viewState.rotation,a=this.getLayer(),h={},c=function(p,b,v){let x=Mt(p),m=h[x];if(m){if(m!==!0&&v<m.distanceSq){if(v===0)return h[x]=!0,r.splice(r.lastIndexOf(m),1),s(p,a,b);m.geometry=b,m.distanceSq=v}}else{if(v===0)return h[x]=!0,s(p,a,b);r.push(h[x]={feature:p,layer:a,geometry:b,distanceSq:v,callback:s})}},f,u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some(p=>f=p.forEachFeatureAtCoordinate(t,n,l,e,c,p===this.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(b=>b.value):null)),f}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){let i=this.getLayer(),e=i.getSource();if(!e)return!1;let s=t.viewHints[qt.ANIMATING],r=t.viewHints[qt.INTERACTING],n=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(this.ready&&!n&&s||!l&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let a=t.extent,h=t.viewState,c=h.projection,f=h.resolution,u=t.pixelRatio,p=i.getRevision(),b=i.getRenderBuffer(),v=i.getRenderOrder();v===void 0&&(v=Fu);let x=h.center.slice(),m=ks(a,b*f),E=m.slice(),L=[m.slice()],S=c.getExtent();if(e.getWrapX()&&c.canWrapX()&&!Ti(S,t.extent)){let g=At(S),y=Math.max(At(m)/2,g);m[0]=S[0]-y,m[2]=S[2]+y,mn(x,c);let M=ko(L[0],c);M[0]<S[0]&&M[2]<S[2]?L.push([M[0]+g,M[1],M[2]+g,M[3]]):M[0]>S[0]&&M[2]>S[2]&&L.push([M[0]-g,M[1],M[2]-g,M[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==p&&this.renderedRenderOrder_==v&&Ti(this.wrappedRenderedExtent_,m))return pe(this.renderedExtent_,E)||(this.hitDetectionImageData_=null,this.renderedExtent_=E),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let w=new $l(so(f,u),m,f,u),R;this.getLayer().getDeclutter()&&(R=new $l(so(f,u),m,f,u));let O=bn(),I;if(O){for(let g=0,y=L.length;g<y;++g){let M=L[g],k=Xs(M,c);e.loadFeatures(k,Ac(f,c),O)}I=ur(O,c)}else for(let g=0,y=L.length;g<y;++g)e.loadFeatures(L[g],f,c);let _=zu(f,u),A=!0,F=g=>{let y,M=g.getStyleFunction()||i.getStyleFunction();if(M&&(y=M(g,f)),y){let k=this.renderFeature(g,_,y,w,I,R);A=A&&!k}},P=Xs(m,c),D=e.getFeaturesInExtent(P);v&&D.sort(v);for(let g=0,y=D.length;g<y;++g)F(D[g]);this.renderedFeatures_=D,this.ready=A;let C=w.finish(),d=new sh(m,f,u,e.getOverlaps(),C,i.getRenderBuffer());return R&&(this.declutterExecutorGroup=new sh(m,f,u,e.getOverlaps(),R.finish(),i.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=p,this.renderedRenderOrder_=v,this.renderedExtent_=E,this.wrappedRenderedExtent_=m,this.renderedCenter_=x,this.renderedProjection_=c,this.replayGroup_=d,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,i,e,s,r,n){if(!e)return!1;let l=!1;if(Array.isArray(e))for(let a=0,h=e.length;a<h;++a)l=nh(s,t,e[a],i,this.boundHandleStyleImageChange_,r,n)||l;else l=nh(s,t,e,i,this.boundHandleStyleImageChange_,r,n);return l}},ju=oh;var ah=class extends _u{constructor(t){super(t)}createRenderer(){return new ju(this)}},vi=ah;var lh=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,i){if(i){let e=i.dataProjection?zt(i.dataProjection):this.readProjection(t);i.extent&&e&&e.getUnits()==="tile-pixels"&&(e=zt(e),e.setWorldExtent(i.extent)),i={dataProjection:e,featureProjection:i.featureProjection}}return this.adaptOptions(i)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return ft()}readFeature(t,i){return ft()}readFeatures(t,i){return ft()}readGeometry(t,i){return ft()}readProjection(t){return ft()}writeFeature(t,i){return ft()}writeFeatures(t,i){return ft()}writeGeometry(t,i){return ft()}},Bu=lh;function hh(o,t,i){let e=i?zt(i.featureProjection):null,s=i?zt(i.dataProjection):null,r;if(e&&s&&!li(e,s)?r=(t?o.clone():o).transform(t?e:s,t?s:e):r=o,t&&i&&i.decimals!==void 0){let n=Math.pow(10,i.decimals),l=function(a){for(let h=0,c=a.length;h<c;++h)a[h]=Math.round(a[h]*n)/n;return a};r===o&&(r=o.clone()),r.applyTransform(l)}return r}var ch=class o extends Ee{constructor(t,i,e){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,i);else if(i!==void 0&&e)this.setFlatCoordinates(i,t),this.ends_=e;else{let s=this.getLayout(),r=t,n=[],l=[];for(let a=0,h=r.length;a<h;++a){let c=r[a];a===0&&(s=c.getLayout()),xe(n,c.getFlatCoordinates()),l.push(n.length)}this.setFlatCoordinates(s,n),this.ends_=l}}appendLineString(t){this.flatCoordinates?xe(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new o(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,e,s){return s<Me(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gr(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xr(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,e,s))}getCoordinateAtM(t,i,e){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(i=i!==void 0?i:!1,e=e!==void 0?e:!1,fu(this.flatCoordinates,0,this.ends_,this.stride,t,i,e))}getCoordinates(){return Ki(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Or(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){let t=this.flatCoordinates,i=this.ends_,e=this.layout,s=[],r=0;for(let n=0,l=i.length;n<l;++n){let a=i[n],h=new Or(t.slice(r,a),e);s.push(h),r=a}return s}getFlatMidpoints(){let t=[],i=this.flatCoordinates,e=0,s=this.ends_,r=this.stride;for(let n=0,l=s.length;n<l;++n){let a=s[n],h=qn(i,e,a,r,.5);xe(t,h),e=a}return t}getSimplifiedGeometryInternal(t){let i=[],e=[];return i.length=Hc(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,e),new o(i,"XY",e)}getType(){return"MultiLineString"}intersectsExtent(t){return Qc(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let e=yr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=e.length===0?0:e[e.length-1],this.changed()}},Gu=ch;var dh=class o extends Ee{constructor(t,i){super(),i&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendPoint(t){this.flatCoordinates?xe(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){let t=new o(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,e,s){if(s<Me(this.getExtent(),t,i))return s;let r=this.flatCoordinates,n=this.stride;for(let l=0,a=r.length;l<a;l+=n){let h=Qe(t,i,r[l],r[l+1]);if(h<s){s=h;for(let c=0;c<n;++c)e[c]=r[l+c];e.length=n}}return s}getCoordinates(){return Ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){let i=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||i<=t?null:new Pe(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){let t=this.flatCoordinates,i=this.layout,e=this.stride,s=[];for(let r=0,n=t.length;r<n;r+=e){let l=new Pe(t.slice(r,r+e),i);s.push(l)}return s}getType(){return"MultiPoint"}intersectsExtent(t){let i=this.flatCoordinates,e=this.stride;for(let s=0,r=i.length;s<r;s+=e){let n=i[s],l=i[s+1];if(nr(t,n,l))return!0}return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cs(this.flatCoordinates,0,t,this.stride),this.changed()}},ro=dh;function Xu(o,t,i,e){let s=[],r=Ut();for(let n=0,l=i.length;n<l;++n){let a=i[n];r=an(o,t,a[0],e),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=a[a.length-1]}return s}var uh=class o extends Ee{constructor(t,i,e){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!e&&!Array.isArray(t[0])){let s=this.getLayout(),r=t,n=[],l=[];for(let a=0,h=r.length;a<h;++a){let c=r[a];a===0&&(s=c.getLayout());let f=n.length,u=c.getEnds();for(let p=0,b=u.length;p<b;++p)u[p]+=f;xe(n,c.getFlatCoordinates()),l.push(u)}i=s,t=n,e=l}i!==void 0&&e?(this.setFlatCoordinates(i,t),this.endss_=e):this.setCoordinates(t,i)}appendPolygon(t){let i;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),i=t.getEnds().slice(),this.endss_.push();else{let e=this.flatCoordinates.length;xe(this.flatCoordinates,t.getFlatCoordinates()),i=t.getEnds().slice();for(let s=0,r=i.length;s<r;++s)i[s]+=e}this.endss_.push(i),this.changed()}clone(){let t=this.endss_.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=this.endss_[s].slice();let e=new o(this.flatCoordinates.slice(),this.layout,i);return e.applyProperties(this),e}closestPointXY(t,i,e,s){return s<Me(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wc(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,e,s))}containsXY(t,i){return $c(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,i)}getArea(){return Kc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),ca(i,0,this.endss_,this.stride,t)):i=this.flatCoordinates,vr(i,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let t=Xu(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Jc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ro(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;sd(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ca(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let i=[],e=[];return i.length=Zc(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,e),new o(i,"XY",e)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let i;if(t===0)i=0;else{let r=this.endss_[t-1];i=r[r.length-1]}let e=this.endss_[t].slice(),s=e[e.length-1];if(i!==0)for(let r=0,n=e.length;r<n;++r)e[r]-=i;return new hi(this.flatCoordinates.slice(i,s),this.layout,e)}getPolygons(){let t=this.layout,i=this.flatCoordinates,e=this.endss_,s=[],r=0;for(let n=0,l=e.length;n<l;++n){let a=e[n].slice(),h=a[a.length-1];if(r!==0)for(let f=0,u=a.length;f<u;++f)a[f]-=r;let c=new hi(i.slice(r,h),t,a);s.push(c),r=h}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return td(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,3),this.flatCoordinates||(this.flatCoordinates=[]);let e=Uc(this.flatCoordinates,0,t,this.stride,this.endss_);if(e.length===0)this.flatCoordinates.length=0;else{let s=e[e.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}},Xr=uh;var ph=class o extends Cn{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Tt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,i=this.geometries_.length;t<i;++t)this.changeEventsKeys_.push(wt(this.geometries_[t],ut.CHANGE,this.changed,this))}clone(){let t=new o(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,i,e,s){if(s<Me(this.getExtent(),t,i))return s;let r=this.geometries_;for(let n=0,l=r.length;n<l;++n)s=r[n].closestPointXY(t,i,e,s);return s}containsXY(t,i){let e=this.geometries_;for(let s=0,r=e.length;s<r;++s)if(e[s].containsXY(t,i))return!0;return!1}computeExtent(t){Ai(t);let i=this.geometries_;for(let e=0,s=i.length;e<s;++e)ln(t,i[e].getExtent());return t}getGeometries(){return Wu(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[],i=this.geometries_;for(let e=0,s=i.length;e<s;++e)i[e].getType()===this.getType()?t=t.concat(i[e].getGeometriesArrayRecursive()):t.push(i[e]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let i=[],e=this.geometries_,s=!1;for(let r=0,n=e.length;r<n;++r){let l=e[r],a=l.getSimplifiedGeometry(t);i.push(a),a!==l&&(s=!0)}if(s){let r=new o(null);return r.setGeometriesArray(i),r}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){let i=this.geometries_;for(let e=0,s=i.length;e<s;++e)if(i[e].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,i){let e=this.geometries_;for(let s=0,r=e.length;s<r;++s)e[s].rotate(t,i);this.changed()}scale(t,i,e){e||(e=Ge(this.getExtent()));let s=this.geometries_;for(let r=0,n=s.length;r<n;++r)s[r].scale(t,i,e);this.changed()}setGeometries(t){this.setGeometriesArray(Wu(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){let i=this.geometries_;for(let e=0,s=i.length;e<s;++e)i[e].applyTransform(t);this.changed()}translate(t,i){let e=this.geometries_;for(let s=0,r=e.length;s<r;++s)e[s].translate(t,i);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function Wu(o){let t=[];for(let i=0,e=o.length;i<e;++i)t.push(o[i].clone());return t}var Vu=ph;var fh=class extends Bu{constructor(){super()}getType(){return"json"}readFeature(t,i){return this.readFeatureFromObject(no(t),this.getReadOptions(t,i))}readFeatures(t,i){return this.readFeaturesFromObject(no(t),this.getReadOptions(t,i))}readFeatureFromObject(t,i){return ft()}readFeaturesFromObject(t,i){return ft()}readGeometry(t,i){return this.readGeometryFromObject(no(t),this.getReadOptions(t,i))}readGeometryFromObject(t,i){return ft()}readProjection(t){return this.readProjectionFromObject(no(t))}readProjectionFromObject(t){return ft()}writeFeature(t,i){return JSON.stringify(this.writeFeatureObject(t,i))}writeFeatureObject(t,i){return ft()}writeFeatures(t,i){return JSON.stringify(this.writeFeaturesObject(t,i))}writeFeaturesObject(t,i){return ft()}writeGeometry(t,i){return JSON.stringify(this.writeGeometryObject(t,i))}writeGeometryObject(t,i){return ft()}};function no(o){if(typeof o=="string"){let t=JSON.parse(o);return t||null}return o!==null?o:null}var Yu=fh;var gh=class extends Yu{constructor(t){t=t||{},super(),this.dataProjection=zt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=zt(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,i){let e=null;t.type==="Feature"?e=t:e={type:"Feature",geometry:t,properties:null};let s=mh(e.geometry,i),r=new bs;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in e!==void 0&&r.setGeometryName(e.geometry_name),r.setGeometry(s),"id"in e&&r.setId(e.id),e.properties&&r.setProperties(e.properties,!0),r}readFeaturesFromObject(t,i){let e=t,s=null;if(e.type==="FeatureCollection"){let r=t;s=[];let n=r.features;for(let l=0,a=n.length;l<a;++l)s.push(this.readFeatureFromObject(n[l],i))}else s=[this.readFeatureFromObject(t,i)];return s}readGeometryFromObject(t,i){return mh(t,i)}readProjectionFromObject(t){let i=t.crs,e;return i?i.type=="name"?e=zt(i.properties.name):i.type==="EPSG"?e=zt("EPSG:"+i.properties.code):gt(!1,36):e=this.dataProjection,e}writeFeatureObject(t,i){i=this.adaptOptions(i);let e={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(e.id=s),!t.hasProperties())return e;let r=t.getProperties(),n=t.getGeometry();return n&&(e.geometry=xh(n,i),delete r[t.getGeometryName()]),Je(r)||(e.properties=r),e}writeFeaturesObject(t,i){i=this.adaptOptions(i);let e=[];for(let s=0,r=t.length;s<r;++s)e.push(this.writeFeatureObject(t[s],i));return{type:"FeatureCollection",features:e}}writeGeometryObject(t,i){return xh(t,this.adaptOptions(i))}};function mh(o,t){if(!o)return null;let i;switch(o.type){case"Point":{i=jf(o);break}case"LineString":{i=Bf(o);break}case"Polygon":{i=Vf(o);break}case"MultiPoint":{i=Xf(o);break}case"MultiLineString":{i=Gf(o);break}case"MultiPolygon":{i=Wf(o);break}case"GeometryCollection":{i=Nf(o);break}default:throw new Error("Unsupported GeoJSON type: "+o.type)}return hh(i,!1,t)}function Nf(o,t){let i=o.geometries.map(function(e){return mh(e,t)});return new Vu(i)}function jf(o){return new Pe(o.coordinates)}function Bf(o){return new Or(o.coordinates)}function Gf(o){return new Gu(o.coordinates)}function Xf(o){return new ro(o.coordinates)}function Wf(o){return new Xr(o.coordinates)}function Vf(o){return new hi(o.coordinates)}function xh(o,t){o=hh(o,!0,t);let i=o.getType(),e;switch(i){case"Point":{e=qf(o,t);break}case"LineString":{e=Uf(o,t);break}case"Polygon":{e=$f(o,t);break}case"MultiPoint":{e=Zf(o,t);break}case"MultiLineString":{e=Hf(o,t);break}case"MultiPolygon":{e=Kf(o,t);break}case"GeometryCollection":{e=Yf(o,t);break}case"Circle":{e={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+i)}return e}function Yf(o,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:o.getGeometriesArray().map(function(e){return xh(e,t)})}}function Uf(o,t){return{type:"LineString",coordinates:o.getCoordinates()}}function Hf(o,t){return{type:"MultiLineString",coordinates:o.getCoordinates()}}function Zf(o,t){return{type:"MultiPoint",coordinates:o.getCoordinates()}}function Kf(o,t){let i;return t&&(i=t.rightHanded),{type:"MultiPolygon",coordinates:o.getCoordinates(i)}}function qf(o,t){return{type:"Point",coordinates:o.getCoordinates()}}function $f(o,t){let i;return t&&(i=t.rightHanded),{type:"Polygon",coordinates:o.getCoordinates(i)}}var Wr=gh;var Jf=["tooltip"],oo=(()=>{let t=class t extends ue{constructor(){super(...arguments),this.lastHoveredFeatures=[],this.iconStyle=new _e({zIndex:100,image:new zi({anchor:[.5,25],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:1,src:"assets/img/map-pin-icon.svg"})}),this.defaultPolyStroke=new De({color:"rgba(0, 0, 0, 0.3)",width:1}),this.hoverPolyStroke=new De({color:"rgba(0, 0, 255, 0.5)",width:2}),this.mouseOut=e=>{this.onMouseOut(e)},this.mouseClick=e=>this.onMapClick(e),this.pointerMove=e=>this.onPointerMove(e)}ngOnInit(){super.ngOnInit(),this.widget.isMap=!0,this.requestPolygonData(),this.us.isEmbedded()&&(this.onMessage=e=>{let s=e.data;switch(s.type){case"map.applyStyle":this.applyStyle(s);break}},window.addEventListener("message",this.onMessage))}applyStyle(e){let{selector:s,style:r,value:n}=e,l=this.map?.getTargetElement();(l&&l.querySelectorAll(s))?.forEach(h=>{h.style[r]=n})}ngAfterViewInit(){this.createMap()}ngOnDestroy(){this.us.isEmbedded()&&this.onMessage&&window.removeEventListener("message",this.onMessage),this.unbindEvents(),super.ngOnDestroy()}retrieveData(e){return Ft(this,null,function*(){if(this.polygonsLoaded&&(yield this.polygonsLoaded),e.Error){this.showError(e.Error);return}e.Info&&(this.dataInfo=e.Info),this.hideTooltip(),this.markers?.clear(),this.polyVector?.clear(),this.data=e,this.buildMap(),this.fitPolygonsToScreen()})}buildMap(){let e="world";switch(this.isMarketsData()&&(e="markers"),e){case"markers":this.buildMarkers();break;case"world":this.buildWorldMapPolygons();break}}get lonLatNames(){return["latitude","longitude",this.getDataPropValue("latitude")?.toLowerCase(),this.getDataPropValue("longitude")?.toLowerCase()].filter(e=>!!e)}isMarketsData(){let e=this.lonLatNames;return this.data?.Cols[0]?.tuples?.some(s=>e.includes(s.caption?.toLowerCase())||e.includes(s.dimension?.toLowerCase()))}buildMarkers(){let e=this.data?.Cols[0].tuples.length;if(!e)return;let s=0,r=[],n=this.getDataPropValue("latitude")||"latitude",l=this.getDataPropValue("longitude")||"longitude",a=this.data?.Cols[0].tuples.findIndex(f=>f.caption.toLowerCase()===n)??-1,h=this.data?.Cols[0].tuples.findIndex(f=>f.caption.toLowerCase()===l)??-1;if(h===-1||a===-1){console.error("Can't find latitude/longitude columns. Check name of columns that contain latitude or longitude. Also if columns named differently, check latitude/longitude data properties on map widget.");return}let c=this.data?.Cols[1].tuples;if(c?.[0]?.children&&(c=c[0]?.children),!(!c||!this.data)){for(let f=0;f<c.length;f++){if(this.data.Data[s+a]===""||this.data.Data[s+a]===void 0||this.data.Data[s+h]===""||this.data.Data[s+h]===void 0)continue;let u=parseFloat(this.data.Data[s+a].toString()||"0"),p=parseFloat(this.data.Data[s+h].toString()||"0"),b=c[f].caption,v=new Pe([p,u]);v.transform("EPSG:4326",this.map?.getView().getProjection());let x=new bs({geometry:v,title:b,dataIdx:s,path:c[f].path,desc:c[f].title});r.push(x),s+=e}r.length!==0&&this.markers?.addFeatures(r)}}createMap(){let e=this.getDataPropValue("tileUrl"),s=new Ir({wrapX:!0,url:e}),r=new On({layers:[new Rr({source:s})],controls:gs({attributionOptions:{collapsible:!1}}),target:this.el.nativeElement,view:new ve({center:[0,0],zoom:2})});this.map=r,this.createLayers(),this.bindEvents()}bindEvents(){this.map?.getViewport().addEventListener("mouseout",this.mouseOut,!1),this.map?.on("click",this.mouseClick),this.map?.on("pointermove",this.pointerMove)}unbindEvents(){this.map?.getViewport().removeEventListener("mouseout",this.mouseOut,!1),this.map?.un("click",this.mouseClick),this.map?.un("pointermove",this.pointerMove)}createLayers(){if(!this.map){console.error("Map object doesn't exists!");return}this.polyVector=new xi({features:[]});let e=new vi({source:this.polyVector});if(e.setZIndex(1),this.map?.addLayer(e),this.markers=new xi({features:[]}),this.markers){let s=new vi({source:this.markers,style:this.iconStyle});s.setZIndex(100),this.map?.addLayer(s)}}onMouseOut(e){this.hideTooltip()}onMapClick(e){if(de.mobile&&e.originalEvent.touches&&e.originalEvent.touches.length!==1)return;let s=this.map?.forEachFeatureAtPixel(e.pixel,(r,n)=>r);if(s){if(this.hideTooltip(),de.mobile){this.onPointerMove(e);return}this.doDrill(s.get("path"),s.get("name")||s.get("title"),void 0)}}onPointerMove(e){this.updateHoverStyle(e),this.updateTooltip(e)}updateTooltip(e){if(e.dragging){this.hideTooltip(),this.tooltipFeature=void 0;return}let s=this.map?.getEventPixel(e.originalEvent);s&&this.displayFeatureInfo(s,e.originalEvent.target)}updateHoverStyle(e){this.lastHoveredFeatures.forEach(s=>{let r=s.getStyle();r.setStroke(this.defaultPolyStroke),s.setStyle(r)}),this.lastHoveredFeatures=[],this.map?.forEachFeatureAtPixel(e.pixel,s=>{let r=s.getGeometry()?.getType();if(r==="Polygon"||r==="MultiPolygon"){let n=s,l=n.getStyle();l.setStroke(this.hoverPolyStroke),n.setStyle(l),this.lastHoveredFeatures.push(n)}})}displayFeatureInfo(e,s){let r=s.closest(".ol-control")?void 0:this.map?.forEachFeatureAtPixel(e,function(n){return n});if(r){if(this.updateTooltipPosition(e[0],e[1]),r!==this.tooltipFeature){let n=this.getDataPropValue("tooltip")||this.getDataPropValue("tooltipProperty")||"TooltipValue",l=this.getDataByColumnName(this.data,n,r.get("dataIdx"));l||(l=this.getFeatureText(r)),l&&(this.tooltip.nativeElement.innerHTML=l.toString(),this.showTooltip())}}else this.hideTooltip();this.tooltipFeature=r}updateTooltipPosition(e,s){let r=this.tooltip.nativeElement;r.classList.remove("ol-tooltip-top"),r.classList.remove("ol-tooltip-left"),r.classList.remove("ol-tooltip-right"),r.style.left=e+"px",r.style.top=s+"px";let n=r.getBoundingClientRect(),l=this.el.nativeElement.getBoundingClientRect();(n.y+n.height>l.y+l.height+20||n.y+n.height>window.innerHeight-20)&&r.classList.add("ol-tooltip-top"),(n.x+n.width>l.x+l.width+20||n.x+n.width>window.innerWidth-20)&&r.classList.add("ol-tooltip-left"),(n.x<l.x-20||n.x<20)&&r.classList.add("ol-tooltip-right")}showTooltip(){this.tooltip.nativeElement.style.visibility="visible"}hideTooltip(){this.tooltip.nativeElement.style.visibility="hidden"}requestPolygonData(){let e=this.widget.name;this.widget.name.indexOf(".")===-1&&(e+=".js"),e=this.getDataPropValue("polygonFile")||this.getDataPropValue("coordsJsFile")||e;let r=(this.ss.serverSettings.DefaultApp||"/csp")+"/"+e,l=e.split(".").pop()?.toString()==="json"?this.ds.getJSONFile(r):this.ds.getFile(r);this.polygonsLoaded=new Promise(a=>{l.then(h=>this.onPolyFileLoaded(h)).catch(h=>this.loadDefaultGeoJSON()).finally(()=>{this.hideLoading(),a()})})}onPolyFileLoaded(e){e&&(typeof e=="string"?this.parsePlainJS(e):this.createGeoJSON(e))}parsePlainJS(e){let s=/function\s+\w+\s*\(([^)]*)\)\s*\{([\s\S]*)\}/,r=e.match(s);if(r){let n=r[1].trim(),l=r[2],a=new Function(n,l),h={};a(h),this.createGeoJSON(this.convertToGeoJSON(h))}}loadDefaultGeoJSON(){return Ft(this,null,function*(){let e;try{e=yield this.ds.getJSONFile("assets/countries.json")}catch{console.error(`Can't load default GeoJSON: "assets/countries.json"`);return}e&&this.createGeoJSON(e)})}convertToGeoJSON(e){return{type:"FeatureCollection",features:Object.keys(e).map(r=>{let n=e[r].split(";"),l=[];return n.forEach(a=>{l.push(a.split(" ").map(h=>{let[c,f]=h.split(",").map(Number);return[c,f]}))}),{type:"Feature",geometry:{type:l.length>1?"MultiPolygon":"Polygon",coordinates:l.length>1?[l]:[l[0]]},properties:{name:r}}})}}createGeoJSON(e){this.worldMap=new xi,this.worldMap.addFeatures(new Wr().readFeatures(e,{dataProjection:"EPSG:4326",featureProjection:this.map?.getView().getProjection()}))}fitPolygonsToScreen(){this.polyVector?.getFeatures()?.length&&this.map?.getView().fit(this.polyVector.getExtent(),{padding:[20,20,20,20]}),this.markers?.getFeatures()?.length&&this.map?.getView().fit(this.markers.getExtent(),{padding:[20,20,20,20]})}buildWorldMapPolygons(){let e=[],s=(this.data?.Cols[0]?.tuples?.length??0)<2,r=this.getColumnIndexByDataProp("Key");r===-1&&(r=this.getColumnIndexByDataProp("coordsProperty"));let n=this.getColumnIndexByDataProp("Value");n===-1&&(n=this.getColumnIndexByDataProp("colorProperty")),r===-1&&(r=0),n===-1&&(s?n=0:n=1);let l=this.data?.Cols[0]?.tuples?.length||2,a=Number.MAX_VALUE,h=Number.MIN_VALUE;for(let c=0;c<(this.data?.Cols[1]?.tuples?.length??-1);c++){let f=this.data?.Data[c*l+n];f<a&&(a=f),f>h&&(h=f)}for(let c=0;c<(this.data?.Cols[1]?.tuples?.length??-1);c++){let f="";if(s?f=this.data?.Cols[1]?.tuples[c].caption??"":f=this.data?.Data[c*l+r].toString()??"",!f)continue;let u=this.worldMap?.getFeatures().find(L=>L.get("name")===f.toString());if(!u)continue;u.set("dataIdx",c*l),u.set("title",this.data?.Cols[1].tuples[c].caption),u.set("path",this.data?.Cols[1].tuples[c].path),e.push(u);let p=this.data?.Data[c*l+n],b;h-a===0?b=255:b=(p-a)/(h-a)*255;let x=`hsla(${(255-b)/255*120}, 100%, 50%, 0.6)`,m=new is({font:"8px Oxygen",fill:new Ce({color:"black"}),text:`${this.data?.Cols[1].tuples[c].caption}
`+this.formatNumber(p,this.data?.Cols[1].tuples[c].format)}),E=this;u.setStyle(new _e({zIndex:0,fill:new Ce({color:x}),stroke:this.defaultPolyStroke,text:m}))}this.featureOverlay?.getSource().clear(),this.polyVector?.clear(),this.polyVector?.addFeatures(e),this.fitPolygonsToScreen()}getColumnIndexByDataProp(e){if(!this.data)return 0;let s=0,r=this.getDataPropValue(e)||e;return s=this.getColumnIndexByName(this.data,r),s}getFeatureText(e){let s=e.get("dataIdx");if(s===void 0)return;let r="",n=[],l="";e.get("title")&&(l="<b>"+e.get("title")+"</b><hr/>");let a=this.lonLatNames;for(let h=0;h<(this.data?.Cols[0]?.tuples?.length??-1);h++){let c=this.data?.Cols[0]?.tuples[h],f=c?.caption?.toLowerCase();if(a.includes(f)||this.getDataPropValue("Key")===f||f==="key")continue;let u=this.data?.Data[s+h]?.toString()??"";c?.format&&(u=this.formatNumber(u,c.format)),u&&c&&n.push(`<b>${c.caption}:</b> ${u}`)}return r=l+n.join("<br>"),r}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-map-widget"]],viewQuery:function(s,r){if(s&1&&wi(Jf,7),s&2){let n;Si(n=Mi())&&(r.tooltip=n.first)}},standalone:!0,features:[Ct,vt],decls:7,vars:0,consts:[["popup",""],["tooltip",""],[1,"panel","panel-default","map-popup",2,"visibility","hidden"],["ng-bind-html","model.tooltip.content | sanitize"],[1,"arrow_box"],[1,"tooltip"]],template:function(s,r){s&1&&(Dt(0,"div",2,0)(2,"div"),Ht(3,"div",3),It(),Ht(4,"div",4),It(),Ht(5,"div",5,1))},styles:['[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]{margin-top:24px;z-index:1000;position:absolute;color:#929292;background-color:#fff;white-space:nowrap;font-family:Oxygen;font-size:12px;box-shadow:1px 1px 4px #7f7f7f;padding:4px 10px;border-radius:4px;transform:translate(-50%);visibility:hidden}.ol-tooltip-top[_ngcontent-%COMP%]{transform:translate(-50%) translateY(calc(-100% - 8px));margin-top:0}.ol-tooltip-left[_ngcontent-%COMP%]{transform:translate(-100%)}.ol-tooltip-right[_ngcontent-%COMP%]{transform:translate(0)}.ol-tooltip-top.ol-tooltip-left[_ngcontent-%COMP%]{transform:translate(-100%) translateY(calc(-100% - 8px));margin-top:0}.ol-tooltip-top.ol-tooltip-right[_ngcontent-%COMP%]{transform:translate(0) translateY(calc(-100% - 8px));margin-top:0}.map-popup[_ngcontent-%COMP%]{transform:translateY(-100%) translate(-50%);z-index:1;position:absolute;background-color:var(--cl-widget-filter-bg);margin-bottom:0;border-color:#b0b0b0;padding:4px;-webkit-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);-moz-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);box-shadow:1px 1px 9px #32323280;color:var(--cl-widget-header-txt)}.map-popup[_ngcontent-%COMP%]:after{content:" ";display:block;width:0;height:0;border-style:solid;border-width:8px 4px 0 4px;bottom:-8px;left:calc(50% - 4px);position:absolute;border-color:var(--cl-widget-filter-bg) transparent transparent transparent}'],changeDetection:0});let o=t;return o})();var Ne=Jt(Co()),tp=Jt(Uu()),ep=Jt(Hu()),ip=Jt(Zu()),sp=Jt(Ku()),rp=Jt(qu()),np=Jt($u()),op=Jt(Ju()),ap=Jt(Qu());(0,ep.default)(Ne.default);(0,ap.default)(Ne.default);(0,tp.default)(Ne.default);(0,ip.default)(Ne.default);(0,sp.default)(Ne.default);(0,rp.default)(Ne.default);(0,np.default)(Ne.default);(0,op.default)(Ne.default);var Yr=20;var Vr={treemap:{showLines:!1,showText:!1},pie:{showLines:!1}},Wt=(()=>{let t=class t extends ue{constructor(){super(...arguments),this.widgetData=null,this.seriesTypes=[],this.firstRun=!0,this.baseSeriesType="bar",this.sbs=Qt(qr),this.wts=Qt(lp),this.zone=Qt(Lh),this.axisLabelListeners=[],this.seriesVisibility=[]}ngOnInit(){super.ngOnInit(),this.widget.isChart=!0,this.setupHeaderButtons(),this.override?.seriesTypes&&(this.seriesTypes=this.override?.seriesTypes.split(",")),this.subPrint=this.bs.subscribe("print:"+this.widget.name,()=>{if(this.chart){let e=new Blob([this.chart.getSVG()],{type:"image/svg+xml"}),s=window.open(URL.createObjectURL(e),"_blank");s&&(s.onload=()=>{let r=s?.document.querySelector("svg");r?.setAttribute("width","100%"),r?.setAttribute("height","100%"),r&&(r.style.height="auto"),s?.print()},s.onafterprint=()=>{s?.close()})}}),this.setupChart(),this.widget.inline&&this.setupInline(),this.subColorsConfig=this.bs.subscribe("charts:update-colors",e=>this.updateColors(e))}ngAfterViewInit(){this.createChart(),setTimeout(()=>{this.chart?.reflow()})}createChart(){this.chartConfig.chart&&(this.chartConfig.chart.renderTo=this.el.nativeElement),this.chartConfig?.chart?.type==="map"?this.chart=Ne.default.mapChart(this.chartConfig):this.widget.type.toLowerCase()==="timechart"?this.chart=Ne.default.stockChart(this.chartConfig):this.chart=Ne.default.chart(this.chartConfig)}clearSeries(e){let s=e||this.chart;if(s)for(;s.series.length>0;)s.series[0].remove(!1)}onHeaderButton(e){switch(super.onHeaderButton(e),e.name){case"isLegend":this.toggleLegend(e.state);break;case"showValues":{(this.chartConfig?.plotOptions?.series?.dataLabels).enabled=e.state,this.chartConfig.plotOptions?.pie?.dataLabels&&(this.chartConfig.plotOptions.pie.dataLabels.enabled=e.state),this.updateChart(),this.chart?.legend.update({enabled:this.widget.isLegend},!0);break}case"showZero":this.showZeroOnAxis();break;case"isTop":this.limitSeriesAndData();break;case"chartConfig":this.showChartConfig();break}}updateChart(e=!1,s=!1){this.chart&&this.chart.update(this.chartConfig,e,!1,s)}hasOption(e){let s=this.ss.getWidgetsSettings(this.widget.dashboard);return!(!s[this.widget.name]||s[this.widget.name][e]===void 0||s[this.widget.name][e]===!1)}setYAxisMinToZero(){if(this.chartConfig.yAxis instanceof Array)for(let e=0;e<this.chartConfig.yAxis.length;e++)this.chartConfig.yAxis[e].prevMin=this.chartConfig.yAxis[e].min,this.chartConfig.yAxis[e].min=0;else this.chartConfig.yAxis.prevMin=this.chartConfig.yAxis.min,this.chartConfig.yAxis.min=0;this.updateChart(!0)}showZeroOnAxis(){if(this.widget.showZero)this.setYAxisMinToZero();else{if(this.chartConfig.yAxis instanceof Array)for(let e=0;e<this.chartConfig.yAxis.length;e++){let s=this.chartConfig.yAxis[e].prevMin;this.chartConfig.yAxis[e].min=s,this.chart&&(this.chart.yAxis[e].min=s)}else{let e=this.chartConfig.yAxis.prevMin;this.chartConfig.yAxis.min=e,this.chart&&(this.chart.yAxis.min=e)}this.updateChart(!0)}}limitSeriesAndData(){this.requestData()}toggleLegend(e){this.chart&&this.chart.legend.update({enabled:e})}initFormatForSeries(e){let s=n=>{if(!n||!n.Info)return"";let l="";for(let a=0;a<n.Info.numericGroupSize;a++)l+="#";return l+=",#.##",l},r=this.chartConfig.series;if(r)for(let n=0;n<r.length;n++)r[n]&&(!r[n]).format&&(r[n].format=s(e))}retrieveData2(e){this.hideLoading(),this.addSeries({data:[{y:1,name:"test"}]}),this.updateChart(!0)}retrieveData(e){if(this.hideLoading(),this.seriesVisibility=this.chart?.series?.map(s=>s.visible)??[],this.clearSeries(),this.widgetData=JSON.parse(JSON.stringify(e)),e.Error){this.showError(e.Error);return}if(e){let s=this.getMinValue(e.Data);if(s>0&&s<=10&&(this.chartConfig.yAxis.min=-10),!e.Cols)return;if(e.Cols[0].tuples.length===0&&e.Data.length!==0&&e.Cols[0].tuples.push({caption:this.i18n.get("count")}),this.parseData(e),this.widget.showZero&&this.setYAxisMinToZero(),this.firstRun){let r=this.ss.getWidgetsSettings(this.widget.dashboard);if(this.us.isEmbedded()){let n=this.route.snapshot.queryParamMap.get("hiddenSeries"),l=[];n&&(l=n.split(",")),l.forEach(a=>{this.chartConfig?.series?.[a]&&(this.chartConfig.series[a].visible=!1)})}else if(r[this.widget.name]&&r[this.widget.name].series)for(let n=0;n<(this.chartConfig?.series?.length||0);n++)r[this.widget.name].series[n]===!1&&this.chartConfig.series&&(this.chartConfig.series[n].visible=!1);this.firstRun=!1,this.onResize()}}(this.chart?.series?.length??0)<2&&!this.hasOption("isLegend")&&(this.widget.isLegend=!1,this.parent?.header?.cd?.detectChanges(),this.chart?.legend.update({enabled:!1}))}buildAxisTitles(e){if(this.chartConfig?.chart?.type!=="column")return;let s=!1,r=!1,n=this.getMDX(),l=n.indexOf("ON"),a=-1;l!==-1&&(a=n.indexOf("FROM",l),a!==-1&&(r=n.substring(l,a).toLowerCase().lastIndexOf(".members")!==-1)),a!==-1&&(l=a,a=n.indexOf("FROM",l),s=n.substring(l,a).toLowerCase().lastIndexOf(".members")!==-1),this.chartConfig.yAxis&&e.Cols[0]&&e.Cols[0].tuples&&e.Cols[0].tuples.length&&(this.chartConfig.yAxis.title={text:e.Cols[0].tuples.map(h=>h.caption||"").join(" & ")}),this.chartConfig.xAxis&&e.Cols[1]&&e.Cols[1].tuples&&e.Cols[1].tuples.length&&(this.chartConfig.xAxis.title={text:e.Cols[1].tuples.map(h=>h.caption||"").join(" & ")})}addSeries(e,s,r,n=!1){let l=s||this.chart;if(!l)return;let a=(l.options||this.chartConfig).series?.length??-1;if(e&&e.data&&e.data.length!==0){let u=!0,p=!1;for(let b=0;b<e.data.length;b++){let v=e.data[b];if(typeof v=="object"&&!(v instanceof Array)&&(p=!0,v.y===""&&(v.y=0),v.y!==0&&v.y!==""&&v.y!==null&&v.y!==void 0)){u=!1;break}}u&&p&&(e.showInLegend=!1)}let h=this.tc?.hcColors||Ne.default.getOptions().colors||["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"];if(e.color=h[l.series.length%h.length||0],this.widget?.seriesTypes){let u=this.widget?.seriesTypes[a]||this.baseSeriesType;u&&(e.type=u)}if(this.override?.markerShapes){let u=this.override?.markerShapes.split(",")[a];if(!u)return;switch(u){case"up":u="triangle";break;case"down":u="triangle-down";break}e.marker={symbol:u}}let c=(r||this.chart||this.chartConfig)?.series?.length;if(this.seriesTypes&&c!==void 0&&this.seriesTypes[c]&&(e.type=this.seriesTypes[c]),e.visible=!0,this.widgetsSettings&&this.widgetsSettings[this.widget.name]&&this.widgetsSettings[this.widget.name].series&&this.widgetsSettings[this.widget.name].series?.[e.name||""]===!1&&(e.visible=!1),this.widget.type.toLowerCase()==="combochart"&&(e.type||(e.type=c===0?"bar":"line"),this.override)){let u=[];this.override.seriesYAxes&&(u=this.override.seriesYAxes.split(",").map(b=>parseInt(b,10)));let p=(this.chart||this.chartConfig).series?.length||-1;e.yAxis=u[p]||0}e.showInLegend=!0,l.addSeries(e,n,!1);let f=this.seriesVisibility[l.series.length-1];f!==void 0&&(l.series[l.series.length-1].visible=f)}enableStacking(){let e={plotOptions:{series:{stacking:"normal"}}};this.us.mergeRecursive(this.chartConfig,e)}getMinValue(e){let s=1/0;for(let r=0;r<e.length;r++)e[r]<s&&(s=e[r]);return s}limitData(e){let s,r,n,a=(this.widget.controls||[]).filter(c=>c.action==="setRowCount")[0],h=a&&parseInt(a.value.toString())||Yr;if(this.chartConfig?.plotOptions?.series?.stacking==="normal"||!this.chartConfig?.plotOptions?.series?.stacking){let c=e.Cols[1].tuples,f=e.Cols[0].tuples;if(this.widget.isTop)if(f.length===1){let u=!0;for(;u;){u=!1;let p;for(p=0;p<e.Data.length-1;p++)if(e.Data[p]<e.Data[p+1]){u=!0;let b=e.Data[p];e.Data[p]=e.Data[p+1],e.Data[p+1]=b,b=e.Cols[1].tuples[p],e.Cols[1].tuples[p]=e.Cols[1].tuples[p+1],e.Cols[1].tuples[p+1]=b}}e.Cols[1].tuples.splice(h,e.Cols[1].tuples.length-h)}else{e.Cols[1].tuples.splice(h,e.Cols[1].tuples.length-h);return}}}parseData(e){return Ft(this,null,function*(){let s=e;this.route.snapshot.queryParamMap.get("autodrill")==="1"&&(yield this.checkForAutoDrill(e))||(s.Cols[1]||(s.Cols[1]={tuples:[]}),s.Cols[1].tuples.length===0&&s.Cols[1].tuples.push({caption:this.i18n.get("count")}),this.limitData(e),e&&e.Info&&(this.dataInfo=e.Info),this.sortTuplesBasedOnLabels(s),this.setupAxisMinMax(s.Data),this.buildSeries(s),this.updateChart(!0))})}onResize(){super.onResize(),this.chart&&this.chart.reflow()}setElColor(e,s=""){if(!e)return;e.setAttribute("fill",s),e.setAttribute("stroke",s);let r=e.children;r&&Array.from(r).forEach(n=>this.setElColor(n,s))}updateColors(e){this.zone.runOutsideAngular(()=>{let s=this.chart;if(!s)return;let r=s.options?.chart?.type;if(e.hcColors)if(r==="treemap"||r==="pie"){let l=s.options.plotOptions?.[r];l&&(l.colors=e.hcColors);for(let a=0;a<s.series[0]?.points.length;a++){let h=s.series[0].points[a],c=e.hcColors[(h.colorIndex||0)%e.hcColors.length];h.color=c,h.graphic?.element.setAttribute("fill",c),this.setElColor(h?.legendItem?.symbol?.element,c)}}else for(let l=0;l<s.series.length;l++){let a=s.series[l],h=e.hcColors[l%e.hcColors.length],c=a.graph?.element;c&&c.setAttribute("stroke",h),this.setElColor(a?.area?.element,h),this.setElColor(a?.bar?.element,h),this.setElColor(a?.markerGroup?.element,h),this.setElColor(a?.legendItem?.symbol?.element,h),this.setElColor(a?.legendItem?.line?.element,h),this.setElColor(a?.legendItem?.group?.element,h),a.data.forEach(u=>{u.color=h,this.setElColor(u.graphic?.element,h)});let f=s.legend.allItems[l];f&&f.legendSymbol&&[f.legendSymbol.element,f.legendLine.element].forEach(u=>{u&&(u.setAttribute("fill",h),u.setAttribute("stroke",h))}),s.series[l].color=h}if(e.hcBorderColor&&Vr[r||""]?.showBorder!==!1)for(let l=0;l<s?.series.length;l++)(s?.series[l]).data.forEach(h=>{let c=h.graphic?.element;c&&c.setAttribute("stroke",e.hcBorderColor)});if(e.hcBackground&&Vr[r||""]?.showBackground!==!1){let l=s.chartBackground.element;l.setAttribute("fill",e.hcBackground),l.setAttribute("stroke",e.hcBackground),s.options.chart&&(s.options.chart.backgroundColor=e.hcBackground)}if(e.hcLineColor&&Vr[r||""]?.showLines!==!1){let l=e.hcLineColor;s.yAxis.forEach(a=>{s.yAxis[0].options.minorGridLineColor=l,a.gridGroup.element.setAttribute("stroke",l),a.gridGroup.element.childNodes.forEach(h=>{h.setAttribute("stroke",l)})}),s?.xAxis.forEach(a=>{a.axisGroup.element.setAttribute("stroke",l),a.axisGroup.element.childNodes.forEach(h=>{h.setAttribute("stroke",l)})})}let n=e.hcTextColor;if(n&&Vr[r||""]?.showText!==!1){let l=a=>{if(a.labelGroup){a.labelGroup.element.setAttribute("fill",n);for(let h=0;h<a.labelGroup.element.children.length;h++){let c=a.labelGroup.element.children[h];c.setAttribute("fill",n),c.setAttribute("color",n),c.style.color=n,c.style.fill=n}}};s?.xAxis.forEach(l),s?.yAxis.forEach(l),s?.options?.legend?.itemStyle&&(s.options.legend.itemStyle.color=n),s?.legend.allItems.forEach(a=>{a.options.color=n,a.legendItem&&(a.legendItem?.group?.element?.setAttribute("color",n),a.legendItem?.group?.element?.setAttribute("fill",n),a.legendItem?.label?.element?.setAttribute("color",n),a.legendItem?.label?.element?.setAttribute("fill",n))}),s?.series.forEach(a=>a.data.forEach(h=>{let c=h.dataLabel?.element?.children[0]?.style;c&&(c.color=n,c.fill=n)}))}})}fixData(e){for(let s=0;s<e.length;s++)!e[s].y&&e[s].y!==0&&(e[s].y=null),(e[s].y===""||e[s].y===void 0)&&(e[s].y=null)}ngOnDestroy(){this.subPrint?.unsubscribe(),this.removeAxisListeners(),super.ngOnDestroy()}onLegendItemHover(e){}onLegendItemOut(e){}buildAxis(e,s=0){let r=[];return e.tuples?.forEach((n,l)=>{s&&l>s-1||((n.children?.length??0)>1?n.children?.forEach(a=>{a.caption=n.caption+"/"+a.caption,r.push(a)}):r.push(n))}),r}buildSeries(e){this.chartConfig.series=[];let s=this.widget.controls.find(a=>a.action.toLowerCase()==="setcolumncount"),r=this.buildAxis(e.Cols[1],s?.value||0),n=this.buildAxis(e.Cols[0]);n.forEach((a,h)=>{let c=[];r.forEach((f,u)=>{c.push({y:+e.Data[u*n.length+h],drilldown:!0,cube:e.Info?.cubeName||"",path:f.path,name:f.caption,title:f.title})}),this.fixData(c),this.addSeries({data:c,name:a.caption,format:a.format,path:a.path})});let l=this.chartConfig.xAxis;l.categories=r.map(a=>a.caption)}removeAxisListeners(){this.axisLabelListeners.forEach(e=>{e.element.removeEventListener(e.event,e.func)})}saveSeriesVisiblilityState(e,s){let r=this.ss.getWidgetsSettings(this.widget.dashboard);r[this.widget.name]||(r[this.widget.name]={});let n=r[this.widget.name];n.series||(n.series={}),n.series[e]=s,this.ss.setWidgetsSettings(r,this.widget.dashboard)}setupChart(){let e=this,s=this.wts.getDesc(this.widget.type);function r(){let n=this.value,l=e.override,a=l?.valueLabelFormat,h=e.baseType;return(l?.yAxisList[0]?.axisType==="percent"||l?.xAxis.axisType==="percent"&&(h==="barChart"||h==="barChartStacked"))&&(n=e.formatNumber(n,"#%")),n}if(this.chartConfig={accessibility:{enabled:!1},drilldown:{activeAxisLabelStyle:{color:this.tc?.hcTextColor||void 0},activeDataLabelStyle:{color:this.tc?.hcTextColor||void 0}},legend:Se({enabled:this.widget.isLegend,align:"left"},this.tc?.hcTextColor?{itemStyle:{color:this.tc?.hcTextColor}}:{}),navigation:{buttonOptions:{align:"center"}},chart:{type:s?.chart||"column",backgroundColor:this.tc?.hcBackground||"transparent",events:{redraw:n=>{e.removeAxisListeners(),n.target?.series?.forEach(l=>{e.chartConfig.chart?.type==="pie"&&e.chart?.legend.allItems.forEach(a=>{let h=u=>{this.onLegendItemHover({series:a.series,index:a.index})},c=u=>{this.onLegendItemOut({series:a.series,index:a.index})},f=a.legendItem?.group.element;f&&(f.addEventListener("mouseover",h),e.axisLabelListeners.push({event:"mouseover",element:f,func:h}),f.addEventListener("mouseout",c),e.axisLabelListeners.push({event:"out",element:f,func:c}))}),l.data.forEach((a,h)=>{let c="contextmenu",f=a.graphic?.element;if(!f)return;let u=p=>{p.preventDefault(),p.stopImmediatePropagation();let b=e._currentData?.Cols[1]?.tuples;if(!b||!b[h])return;let v=l.userOptions.path,x=b[h].path;v&&(x=v),this.bs.broadcast("contextmenu",{widget:this.widget,event:p,ctxData:{canDrillthrough:this.canDoDrillthrough,canDrill:!0,drillPath:x,drillTitle:b[h].caption||b[h].title}})};a.graphic?.element?.addEventListener(c,u),this.axisLabelListeners.push({event:c,element:f,func:u})})}),e.chartConfig?.chart?.type==="pie"?e.chart?.legend?.allItems.forEach(l=>{let a=l.dataLabel?.element;if(!a)return;let h=()=>{e.showLoading(),e.doDrillOnly(l.options.path,l.name.toString(),l.name.toString()).finally(()=>{e.hideLoading()})};a.addEventListener("click",h),this.axisLabelListeners.push({event:"click",element:a,func:h})}):e.chart?.xAxis[0]?.labelGroup?.element?.childNodes?.forEach((l,a)=>{let h=()=>{let c=e._currentData?.Cols[1]?.tuples,f=e._currentData?.Cols[1]?.tuples[0]?.children;f?.length&&(a=Math.floor(a/f?.length)),!(!c||!c[a])&&(e.showLoading(),e.doDrillOnly(c[a].path,c[a].caption||c[a].title,c[a].caption||c[a].title).finally(()=>{e.hideLoading()}))};l.addEventListener("click",h),this.axisLabelListeners.push({event:"click",element:l,func:h})})}}},credits:{enabled:!1},tooltip:{formatter(){let n=e.override,l=this,a=n?.valueLabelFormat||l.series.options.format,h=l.y;h=e.formatNumber(h,a);let c=l.point.title;c===l.point.name&&(c="");let f=(l.point.name||l.x||"")+"<br>"+(c?c+"<br>":"")+l.series.name+": <b>"+h+"</b><br>";return l.point.percentage&&(f+=e.formatNumber(this.point.percentage,e.getDataPropByDataValue(this.series?.userOptions?.name||"")?.format||"#.##")+"%"),f}},exporting:{enabled:!1},plotOptions:{column:{borderColor:this.tc?.hcBorderColor||void 0},bar:{borderColor:this.tc?.hcBorderColor||void 0},pie:{borderColor:this.tc?.hcBorderColor,colors:this.tc?.hcColors},treemap:{colors:this.tc?.hcColors},series:{opacity:this.tc?.hcOpacity,cursor:"pointer",point:{events:{click(n){if(e.drillFilterWidgets?.length){e.doDrillFilter(n.point.path,e.drills),e.parent?.header?.cd.detectChanges();return}if(!n.point)return;if(de.mobile&&e._selectedPoint!==n.point){e._selectedPoint=n.point;return}let l=n.point.series.userOptions.path,a=[n.point.path];l&&a.push(l),e.showLoading(),e.doDrillthrough(a,n.point.name,n.point.category).finally(()=>{e.hideLoading()})}}},dataLabels:{color:this.tc?.hcTextColor||void 0,enabled:this.widget.showValues===!0,formatter(){let n=e.override,l=this,a=n?.valueLabelFormat||l.series.options.format,h=l.y;return h=e.formatNumber(h,a),h}},events:{hide:n=>this.saveSeriesVisiblilityState(n.target.name,n.target.visible),show:n=>this.saveSeriesVisiblilityState(n.target.name,n.target.visible)}}},yAxis:{events:{},title:{text:""},labels:{style:{color:this.tc?.hcTextColor||void 0,textOverflow:"none"},formatter:r},minorGridLineColor:this.tc?.hcLineColor||"#e6e6e6",gridLineColor:this.tc?.hcLineColor||"#e6e6e6",lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor},xAxis:{events:{},title:{text:""},labels:{style:{color:this.tc?.hcTextColor||void 0,textOverflow:"none",cursor:"pointer"}},minorGridLineColor:this.tc?.hcLineColor||"#e6e6e6",gridLineColor:this.tc?.hcLineColor||"#e6e6e6",lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor},series:[],title:{text:""}},this.setup3DChart(),this.chartConfig.navigator={outlineColor:this.tc?.hcLineColor,xAxis:{gridLineColor:this.tc?.hcLineColor},yAxis:{gridLineColor:this.tc?.hcLineColor}},this.widget.type.toLowerCase()==="combochart"&&(this.chartConfig.yAxis=[{events:{},gridLineColor:this.tc?.hcLineColor,lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor,labels:{style:{color:this.tc?.hcTextColor||void 0}}},{events:{},opposite:!0,gridLineColor:this.tc?.hcLineColor,lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor,labels:{style:{color:this.tc?.hcTextColor||void 0}}}],this.widget.overrides&&this.widget.overrides[0]&&this.widget.overrides[0]._type==="comboChart")){let l=this.widget.overrides.find(a=>a._type.toLowerCase()==="combochart")?.yAxisList;if(l&&l.length)for(let a=0;a<l.length;a++)l[a].title&&(this.chartConfig.yAxis[a].title||(this.chartConfig.yAxis[a].title={}),this.chartConfig.yAxis[a].title.text=l[a].title),l[a].axisType&&(this.chartConfig.yAxis[a].type=l[a].axisType,l[a].axisType==="percent"&&(this.chartConfig.yAxis[a].min=0,this.chartConfig.yAxis[a].max=1,this.chartConfig.yAxis[a].endOnTick=!1,this.chartConfig.yAxis[a].labels={formatter(){return(this.value*100).toFixed(0)+"%"}})),l[a].maxValue!==void 0&&(this.chartConfig.yAxis[a].max=l[a].maxValue),l[a].minValue!==void 0&&(this.chartConfig.yAxis[a].min=l[a].minValue)}}setupHeaderButtons(){this.widget.isBtnZero===void 0&&(this.widget.isBtnZero=!1),this.widget.isBtnValues===void 0&&(this.widget.isBtnValues=!1),this.widget.isLegend===void 0&&(this.widget.isLegend=!0)}setupInline(){if(this.chartConfig.chart&&(this.chartConfig.chart.backgroundColor=""),this.chartConfig.plotOptions={series:{enableMouseTracking:!1}},this.chartConfig.legend={enabled:!1},this.widget.tile){let e={xAxis:{events:{},labels:{style:{color:window.getComputedStyle(document.querySelector("."+de.const.fontColors[this.widget.tile.fontColor])).getPropertyValue("color")}}},yAxis:{events:{},labels:{style:{color:window.getComputedStyle(document.querySelector("."+de.const.fontColors[this.widget.tile.fontColor])).getPropertyValue("color")}}}};this.us.mergeRecursive(this.chartConfig,e)}}showChartConfig(){let e=this.widget.name,s=this.ss.getWidgetsSettings(this.widget.dashboard)||{},r=()=>{this.ss.setWidgetsSettings(s,this.widget.dashboard)};s[e]||(s[e]={}),s[e].themeColors||(s[e].themeColors={});let n=Vr[this.chart?.options?.chart?.type||""]||{};this.sbs.showComponent({component:import("./chunk-HKGXJZ6E.js"),inputs:{widgetSettings:s[e],appearance:n,onSave:r,onUpdate:l=>this.updateColors(l),chart:this.chart}})}setupAxisMinMax(e){let s=this.override,r=this.chartConfig.yAxis,n=this.chartConfig.xAxis,l=s?.yAxisList[0];e.some(a=>a<0)||(r.min=0),(this.baseType==="barChart"||this.baseType==="barChartStacked")&&(l=s?.xAxis),l?.minValue!==void 0&&(r.min=l.minValue),l?.maxValue!==void 0&&(r.max=l.maxValue)}removeUndefinedColors(e){let s=(r,n)=>{r[n]===void 0&&delete r[n]};s(e.plotOptions?.column,"borderColor"),s(e.plotOptions?.bar,"borderColor"),s(e.plotOptions?.pie,"borderColor"),s(e.plotOptions?.treemap,"borderColor"),s(e.plotOptions?.treemap,"borderColor"),s(e.drilldown?.activeAxisLabelStyle,"color"),s(e.drilldown?.activeDataLabelStyle,"color"),s(e.legend?.itemStyle,"color"),s(e.chart,"backgroundColor"),s(e.plotOptions?.series,"opacity"),s(e.plotOptions?.series?.dataLabels,"color"),s(e.yAxis?.labels?.style,"color"),s(e.yAxis,"minorGridLineColor"),s(e.yAxis,"gridLineColor"),s(e.yAxis,"lineColor"),s(e.yAxis,"tickColor"),s(e.xAxis?.labels?.style,"color"),s(e.xAxis,"minorGridLineColor"),s(e.xAxis,"gridLineColor"),s(e.xAxis,"lineColor"),s(e.xAxis,"tickColor"),this.removeEmptyObjects(e)}removeEmptyObjects(e){let s=!0;for(;s;)s=!1,Object.keys(e).forEach(r=>{typeof e[r]=="object"&&!Array.isArray(e[r])&&(Object.keys(e[r]).length===0?(s=!0,delete e[r]):this.removeEmptyObjects(e[r]))})}setup3DChart(){this.widget?.type.toLowerCase().includes("3d")&&(this.chartConfig.chart&&(this.chartConfig.chart.options3d={enabled:!0,alpha:0,beta:8,depth:50,viewDistance:8}),this.chartConfig.plotOptions?.column&&(this.chartConfig.plotOptions.column.depth=25),this.chartConfig.plotOptions?.bar&&(this.chartConfig.plotOptions.bar.depth=25),this.chartConfig.plotOptions?.pie&&(this.chartConfig.plotOptions.pie.depth=25))}sortTuplesArray(e,s){let r=new Map;s.forEach((n,l)=>{r.set(n,l)}),e.forEach((n,l)=>{n.originalIndex=l}),e.sort((n,l)=>{let a=r.get(n.dimension),h=r.get(l.dimension);return a!==void 0&&h!==void 0?a-h:a!==void 0?-1:h!==void 0?1:0})}sortTuplesBasedOnLabels(e){if(!e.Cols[0].tuples?.length)return;let s=this.widget.overrides?.find(n=>n._type==="chartLegend");if(!s)return;let r=s.legendLabels?.split(",");r&&this.sortTuplesArray(e.Cols[0].tuples,r)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var mo=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0,this.widget.type.toLowerCase()==="columnchartstacked"&&this.enableStacking()}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-column-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var xo=(()=>{let t=class t extends ue{constructor(){super(...arguments),this.isSpinner=!1}ngOnInit(){this.widget.title=this.i18n.get("filters"),this.widget.toolbar=!0,this.widget.viewSize=this.getViewSize()}requestData(){}onHeaderButton(e){switch(e.name){case"setDefault":this.setFiltersToDefaults();break;case"byRows":this.setViewSize(0);break;case"by2columns":this.setViewSize(1);break;case"by3columns":this.setViewSize(2);break;case"by4columns":this.setViewSize(3);break;case"by5columns":this.setViewSize(4);break;case"by6columns":this.setViewSize(5);break}}setFiltersToDefaults(){for(let e=0;e<this.model.filters.length;e++){let s=this.fs.getFilter(e);s&&(s.isInterval=!1,s.isExclude=s.defaultExclude,s.fromIdx=-1,s.toIdx=-1,s.values.forEach(function(r){r.checked=r.default===!0}),this.fs.applyFilter(s,!0))}this.bs.broadcast("filterAll")}setViewSize(e){this.widget.viewSize=e,this.saveViewSize()}getViewSize(){let e=this.ss.getWidgetsSettings(this.widget.dashboard),s=this.widget.name;return!e[s]||e[s].viewSize===void 0?0:e[s].viewSize}saveViewSize(){let e=this.ss.getWidgetsSettings(this.widget.dashboard),s=this.widget.name;e[s]||(e[s]={}),e[s].viewSize=this.widget.viewSize,this.ss.setWidgetsSettings(e,this.widget.dashboard)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-empty-widget"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var hp=(()=>{let t=class t extends Wt{constructor(){super(...arguments),this.isPercent=!0,this.totalSum=0,this.prevData=null,this.baseSeriesType="treemap"}ngOnInit(){super.ngOnInit(),this.totalSum=0,this.widget.overrides&&this.widget.overrides[0]&&this.widget.overrides[0].showPercentage===0&&(this.isPercent=!1);let e=this,s={levels:[{level:1,layoutAlgorithm:"sliceAndDice",dataLabels:{enabled:!0,align:"left",verticalAlign:"top",style:{fontSize:"15px",fontWeight:"bold"}}}],legend:{enabled:this.widget.isLegend},plotOptions:{series:{animation:!1,colorByPoint:!0,legendType:"point"},treemap:{dataLabels:{enabled:!0,formatter(){if(e.totalSum){let r=this.point.value/e.totalSum*100;return r=e.formatNumber(r,e.getDataPropByDataValue(this.series?.userOptions?.dimension)?.format||"#.##"),`${this.point.caption}<br>${r}%`}else return`${this.point.caption}`}}}},tooltip:{formatter(){let r=this.series.userOptions.caption,n=this.series.userOptions.format,l=this.point.value;return l=e.formatNumber(l,n),this.point.caption+"<br>"+r+": <b>"+l+"</b>"}}};this.us.mergeRecursive(this.chartConfig,s),delete this.chartConfig.plotOptions?.series?.dataLabels}parseData(e){return Ft(this,null,function*(){this.prevData=e,e&&e.Info&&(this.dataInfo=e.Info);let s=[];if(e.Cols[0].tuples.length){if(e.Cols[0].tuples[0].children)console.error("Data converter for this treemap chart not implemented!");else{if(yield this.checkForAutoDrill(e))return;s=[];let r=0;for(let a=0;a<e.Data.length;a++)r+=parseFloat(e.Data[a]);for(let a=0;a<e.Cols[1].tuples.length;a++)s.push({caption:e.Cols[1].tuples[a].caption,id:e.Cols[1].tuples[a].caption+"<br>"+parseFloat(parseFloat(e.Data[a])/r*100).toFixed(2).toString()+"%",value:parseFloat(e.Data[a]),y:parseFloat(e.Data[a]),path:e.Cols[1].tuples[a].path,name:e.Cols[1].tuples[a].caption});let n="",l="";e.Cols[0].tuples[0]&&(n=e.Cols[0].tuples[0].caption,l=e.Cols[0].tuples[0].format),this.totalSum=e.Data.map(a=>parseFloat(a)||0).reduce((a,h)=>a+h,0),this.addSeries({data:s,name:"",layoutAlgorithm:"squarified",caption:n,dimension:e.Cols[0].tuples[0].dimension,format:l,dataLabels:{enabled:!0}},void 0,void 0,!0)}this.toggleLegend(this.widget.isLegend)}})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-tree-map"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var yo=Jt(Ms());var cp=(()=>{let t=class t extends Wt{constructor(){super(...arguments),this.thirdTitle=""}ngOnInit(){super.ngOnInit();let e=this,s={plotOptions:{bubble:{minSize:"5%",maxSize:"35%",sizeBy:"width"},series:{cursor:null,point:{events:{click:null}}}},chart:{zoomType:"xy"},xAxis:{tickWidth:10,title:{enabled:!0}},tooltip:{formatter:function(){let r=this.series.userOptions.format1,n=this.series.userOptions.format2,l=this.series.userOptions.format3,a=this.x,h=this.y,c=this.point.z;r&&(a=(0,yo.default)(a).format(r)),n&&(h=(0,yo.default)(h).format(n)),l&&(c=(0,yo.default)(c).format(l));let f=e.thirdTitle||"radius";return this.series.name+"<br/>"+e.chartConfig.xAxis.title.text+":<b>"+a+"</b><br/>"+e.chartConfig.yAxis.title.text+":<b>"+h+"</b>"+(c?"<br>"+f+": <b>"+c.toString()+"</b>":"")}}};this.us.mergeRecursive(this.chartConfig,s)}getSeriesNames(e){let s={};if(e.Cols[0].tuples.length==4)for(let r=3;r<e.Data.length;r+=4)s[e.Data[r]]=!0;return Object.keys(s)}mapBySeries(e,s){let r={};if(e.Cols[0].tuples.length==4)for(let n in s)s.hasOwnProperty(n)&&(r[s[n]]=[]);else{let n="default";e.Cols[1]&&e.Cols[1].tuples[0]&&(n=e.Cols[1].tuples[0].caption),r[n]=[]}return r}parseData(e){return Ft(this,null,function*(){let s=this.getSeriesNames(e);this.clearSeries(),e.Cols[0].tuples.length>=1&&(this.chartConfig.xAxis.title.text=e.Cols[0].tuples[0].caption),e.Cols[0].tuples.length>=2&&(this.chartConfig.yAxis.title.text=e.Cols[0].tuples[1].caption),e.Cols[0].tuples.length>=3&&(this.thirdTitle=e.Cols[0].tuples[2].caption);let r=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this bubble chart not implemented!");else{let n=e.Cols[0].tuples.length,l="",a="",h="";e.Cols[0].tuples[0]&&(l=e.Cols[0].tuples[0].format),e.Cols[0].tuples[1]&&(a=e.Cols[0].tuples[1].format),e.Cols[0].tuples[2]&&(h=e.Cols[0].tuples[2].format);let c={},f=!1,u;if(this.hasOption("isTop")){f=!0;let v=(this.widget.controls||[]).filter(function(x){return x.action==="setRowCount"})[0];u=v?v.value||Yr:Yr}let p=f?u:e.Data.length;p>e.Data.length&&(p=e.Data.length);for(let b=0;b<p;b+=n){let v=e.Cols[1].tuples[Math.floor(b/n)].caption;c[v]||(c[v]=[]);let x={x:e.Data[b],y:e.Data[b+1],z:e.Data[b+2]};c[v].push(x)}for(let b in c)this.addSeries({data:c[b],name:b,format1:l,format2:a,format3:h})}this.updateChart(!0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-bubble-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var bo=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={};this.widget.type.toLowerCase()!=="combochart"&&(e={plotOptions:{series:{lineWidth:3,marker:{enabled:!1}}}}),this.widget.type.toLowerCase()==="linechartmarkers"&&(e={series:{marker:{enabled:!0}}}),this.us.mergeRecursive(this.chartConfig,e)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-line-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var yh=Jt(Ms());var dp=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit();let e={series:{fillColor:"#dddddF"},plotOptions:{boxplot:{fillColor:"#fafafF",whiskerLength:0,colorByPoint:!0,lineWidth:3,stemWidth:0}},tooltip:{formatter:function(){let s=this.series.userOptions.caption1||"Minimum",r=this.series.userOptions.caption2||"Maximum",n=this.series.userOptions.format1,l=this.series.userOptions.format2,a=this.point.low,h=this.point.high;return n&&(a=(0,yh.default)(a).format(n)),l&&(h=(0,yh.default)(h).format(l)),this.key+"<br/>"+r+":<b>"+h+"</b><br/>"+s+":<b>"+a+"</b>"}}};this.us.mergeRecursive(this.chartConfig,e)}parseData(e){return Ft(this,null,function*(){let s=this.chartConfig.xAxis;s.categories=[];for(let n=0;n<e.Cols[1].tuples.length;n++)s.categories.push(e.Cols[1].tuples[n].caption.toString());this.chartConfig.series=[];let r=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this hi-low chart not implemented!");else{for(let c=0;c<e.Cols[1].tuples.length;c++)r.push({q1:e.Data[c*2],q3:e.Data[c*2+1],low:e.Data[c*2],high:e.Data[c*2+1],cube:e.Info.cubeName,path:e.Cols[1].tuples[c].path});let n="",l="",a="",h="";e.Cols[0].tuples[0]&&(n=e.Cols[0].tuples[0].caption,a=e.Cols[0].tuples[0].format),e.Cols[0].tuples[1]&&(l=e.Cols[0].tuples[1].caption,h=e.Cols[0].tuples[1].format),this.addSeries({data:r,caption1:n,caption2:l,format1:a,format2:h})}this.updateChart(!0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-hi-low-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var up=Jt(Ms()),pp=Jt(Co());var Qf=["charts"];function tg(o,t){o&1&&Ht(0,"div",null,0)}var bh=(()=>{let t=class t extends Wt{constructor(){super(...arguments),this.confs=[],this.charts=[]}ngOnInit(){super.ngOnInit();let e={title:{verticalAlign:"bottom",style:{fontFamily:Yh}},tooltip:{enabled:!1},legend:{enabled:!1},chart:{plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1},plotOptions:{series:{dataLabels:{enabled:!0,formatter:function(){let s=this.point.y,r=this.series.userOptions.format||"#.##";return r&&(s=(0,up.default)(s).format(r.replace(",","."))),s}}}},pane:{startAngle:-150,endAngle:150,background:[{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#333"]]},borderWidth:0,outerRadius:"109%"},{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#333"],[1,"#FFF"]]},borderWidth:1,outerRadius:"107%"},{},{backgroundColor:"#DDD",borderWidth:0,outerRadius:"105%",innerRadius:"103%"}]}};this.chartConfig.yAxis={minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666"},this.chartConfig.chart?.type==="solidgauge"&&(e.pane={center:["50%","85%"],size:"140%",startAngle:-90,endAngle:90,background:[{backgroundColor:"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}]}),this.us.mergeRecursive(this.chartConfig,e)}ngAfterViewInit(){}createChart(){let e=this.chartsEl?.toArray().map(s=>s.nativeElement);this.charts=[],this.confs.forEach((s,r)=>{s.chart&&(s.chart.renderTo=e?.[r]),this.charts.push(pp.default.chart(s))})}retrieveData(e){let s;if(this.hideLoading(),this.charts.forEach(r=>{for(;r.series.length>0;)r.series[0].remove()}),this.widgetData=JSON.parse(JSON.stringify(e)),e.Error){this.showError(e.Error);return}if(e){if(!e.Cols)return;e.Cols[0].tuples.length===0&&e.Data.length!==0&&e.Cols[0].tuples.push({caption:this.i18n.get("count")}),this.parseData(e)}}parseData(e){return Ft(this,null,function*(){if(this.confs.length===0){for(let s=0;s<e.Cols[0].tuples.length;s++){let r=e.Cols[0].tuples[s].caption,n=this.widget.dataProperties.find(a=>a.dataValue===e.Cols[0].tuples[s].dimension);n&&n.label&&n.label!=="$auto"&&(r=n.label),this.confs.push(this.us.mergeRecursive({},this.chartConfig));let l=this.confs[this.confs.length-1];l.title&&(l.title.text=r)}this.cd.markForCheck(),this.cd.detectChanges(),setTimeout(()=>{this.createChart(),this.parseData(e)});return}for(let s=0;s<e.Cols[0].tuples.length;s++){let r=e.Data[s];r||(r=0),this.charts[s]&&this.clearSeries(this.charts[s]);let n=this.confs[s].yAxis;if(parseFloat(r)<1)n.min=0,n.max=1;else if(parseInt(r,10)===0)n.min=0,n.max=10;else{r=parseInt(r,10);let c=r.toString().length;n.max=Math.pow(10,c),n.min=0}let l=this.widget.dataProperties[s];if(l){let c=parseFloat(l.rangeLower),f=parseFloat(l.rangeUpper);isNaN(c)||(n.min=c),isNaN(f)||(n.max=f);let u=parseFloat(l.thresholdLower),p=parseFloat(l.thresholdUpper);if(isNaN(u)&&(u=n.min||0),isNaN(p)&&(p=n.max||0),u<n.min&&(u=n.min),p>n.max&&(p=n.max),n.plotBands=[],u!==n.min&&n.plotBands.push({from:n.min,to:u,color:"rgba(255, 0, 0, 0.4)",zIndex:5}),p!==n.max&&n.plotBands.push({from:p,to:n.max,color:"rgba(255, 0, 0, 0.4)",zIndex:5}),l.targetValue){let b=parseFloat(l.targetValue);n.plotLines=[{value:b,color:"rgba(0, 180, 0, 0.4)",width:3,zIndex:5}]}}let a="";this.widget.properties&&this.widget.properties.format&&(a=this.widget.properties.format),e.Cols[0].tuples[s].format&&(a=e.Cols[0].tuples[s].format);let h=e.Cols[0].tuples[s].caption;l&&l.label&&l.label!=="$auto"&&(h=l.label),this.addSeries({data:[e.Data[s]||0],name:h,format:a},this.charts[s],this.confs[s]),this.charts[s]&&this.charts[s].update(this.confs[s])}})}onResize(){super.onResize(),this.charts.forEach(e=>e.reflow())}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-speedometer-chart"]],viewQuery:function(s,r){if(s&1&&wi(Qf,5),s&2){let n;Si(n=Mi())&&(r.chartsEl=n)}},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[["charts",""]],template:function(s,r){s&1&&he(0,tg,2,0,"div",null,le),s&2&&ce(r.confs)},styles:["[_nghost-%COMP%]{display:flex}div[_ngcontent-%COMP%]{flex:1 1 100%}"]});let o=t;return o})();var fp=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={plotOptions:{series:{colorByPoint:!1},area:{stacking:"normal",marker:{enabled:!1}}}};this.us.mergeRecursive(this.chartConfig,e)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-area-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var gp=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={plotOptions:{series:{cursor:null,point:{events:{click:null}}},pie:{allowPointSelect:!1,dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.series.options.size}}}},tooltip:{formatter:function(){return this.key+": <b>"+this.y+"</b><br/>"}}};this.us.mergeRecursive(this.chartConfig,e)}parseData(e){return Ft(this,null,function*(){let s=[];this.clearSeries();let r=Math.max.apply(null,e.Data);for(let n=0;n<e.Cols[1].tuples.length;n++)s.push([e.Cols[1].tuples[n].caption,e.Data[n]]),this.addSeries({innerSize:"0%",size:Math.floor(e.Data[n]/r*100).toString()+"%",data:[[e.Cols[1].tuples[n].caption,e.Data[n]]],borderWidth:2});this.updateChart(!0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-area-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var Ur=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit(),this.widget.isBtnValues=!0;let e={series:{allowPointSelect:!0,stickyTracking:!1}};this.chartConfig.plotOptions||(this.chartConfig.plotOptions={}),this.us.mergeRecursive(this.chartConfig.plotOptions,e),(this.widget.type==="donutChart"||this.widget.type==="donutChart3D")&&(e={plotOptions:{pie:{innerSize:"20%"}}},this.us.mergeRecursive(this.chartConfig,e)),(this.widget.type==="pieChart3D"||this.widget.type==="donutChart3D")&&(e={chart:{options3d:{enabled:!0,alpha:55,beta:0}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35}}},this.us.mergeRecursive(this.chartConfig,e));let s=this,r={plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,formatter:function(){let n=s.override,l=this,a=n?.valueLabelFormat||l.series.options.format,h=this.point.name,c=s.formatNumber(this.y,a);s.widget.showValues||(c=""),s.widget["btn.ShowAnnotations"]===!1&&(h="");let f=s.formatNumber(this.point.percentage,s.getDataPropByDataValue(this.series?.userOptions?.name)?.format||"#.##")+"%";return s.widget["btn.ShowPercents"]||(f=""),[h,c,f].filter(u=>u).join(", ")}},showInLegend:!0},series:{dataLabels:{formatter:function(){let n=this,l=n.series.options.format,a=n.y;return l&&(a=s.formatNumber(a,l)),n.key+", "+a}},point:{events:{legendItemClick:function(){let n=this.path,l=this.name,a=this.visible;s.chart?.series.forEach(h=>{h.data.forEach(c=>{(n&&c.path===n||l&&c.name===l)&&(c!==this&&c.update({visible:!a}),a&&c.setState("normal"))})})},mouseOut:function(){let n=[],l=this.series,a=this.index;l.chart.series.forEach(h=>{h!==l&&n.push(h.points[a])}),n.forEach(h=>{h.setState("")})},mouseOver:function(){let n=[],l=this.series,a=this.index;l.chart.series.forEach(h=>{h!==l&&n.push(h.points[a])}),n.forEach(h=>{h.setState("hover")})}}}}}};this.us.mergeRecursive(this.chartConfig,r),this.chartConfig?.plotOptions?.series?.dataLabels||(this.chartConfig.plotOptions.series.dataLabels={}),(this.chartConfig?.plotOptions?.pie?.dataLabels).enabled=this.isValuesVisible(),this.widget.showValues,this.updateChart(!0,!0)}isValuesVisible(){return this.widget.showValues||this.widget["btn.ShowAnnotations"]}onHeaderButton(e){(e.name==="ShowValues"||e.name==="btn.ShowAnnotations"||e.name==="btn.ShowPercents")&&((this.chartConfig.plotOptions?.pie?.dataLabels).enabled=this.isValuesVisible(),this.updateChart(!0),this.chart?.series.forEach((s,r)=>{r!==0&&(s.options.showInLegend=!1)}),(this.chart?.series.length??0)>1&&this.chartConfig.legend&&this.chart?.legend.update(this.chartConfig.legend,!0)),super.onHeaderButton(e)}addSeries(e,s,r,n=!1){let l=this._currentData?.Cols[0]?.tuples?.length||1,a=this._currentData?.Cols[1]?.tuples?.length||1;if(l!==1){let h=100/l,c=this.chart?.series.length||0;e.center=[(h/2+c*h).toString()+"%","50%"],c>a&&(e.showInLegend=!1)}super.addSeries(e,s,r,n),this.chart&&this.chart.series.length>1&&(this.chart.series[this.chart.series.length-1].options.showInLegend=!1)}updateSeriesVisibilityAndPositionForMultiplePies(){this.chart?.series.forEach((e,s)=>{e.options.showInLegend=s===0})}onLegendItemHover(e){super.onLegendItemHover(e),(this.chart?.series?.length??0)>1&&this.chart?.series.forEach(s=>{s!==e.series&&s.setState("inactive",!0)}),this.chartConfig.plotOptions.series.point.events.mouseOver.call(e)}onLegendItemOut(e){super.onLegendItemOut(e),(this.chart?.series?.length??0)>1&&this.chart?.series.forEach(s=>{s!==e.series&&s.setState("normal",!0)}),this.chartConfig.plotOptions.series.point.events.mouseOut.call(e)}parseData(e){return Ft(this,null,function*(){yield Sh(t.prototype,this,"parseData").call(this,e),this.toggleLegend(this.widget.isLegend)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-line-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var vh=Jt(Ms());var mp=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit(),this.chartConfig.plotOptions={series:{lineWidth:3,marker:{enabled:!0}}};let e=this;this.chartConfig.tooltip={formatter(){let s=this.series.userOptions,r=s.format1,n=s.format2,l=this.y,a=this.x;r&&(l=(0,vh.default)(l).format(r)),n&&(a=(0,vh.default)(a).format(n));let h=e.chartConfig.yAxis,c=e.chartConfig.xAxis;return h.title?.text+":<b>"+l+"</b><br/>"+c.title?.text+":<b>"+a+"</b>"}},this.updateChart()}parseData(e){return Ft(this,null,function*(){let s="",r="";if(e.Cols[0].tuples.length>=1){let l=this.chartConfig.xAxis;l?.title&&(l.title.text=e.Cols[0].tuples[0].caption),s=e.Cols[0].tuples[0].format}if(e.Cols[0].tuples.length>=2){let l=this.chartConfig.yAxis;l?.title!==void 0&&(l.title.text=e.Cols[0]?.tuples[1]?.caption),s=e.Cols[0].tuples[1].format}this.chartConfig.series=[];let n=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this xy chart not implemented!");else{for(let l=0;l<e.Cols[1].tuples.length;l++)n.push([parseFloat(e.Data[l*2]),parseFloat(e.Data[l*2+1])]);this.addSeries({data:n,name:"",format1:s,format2:r}),(this.chartConfig?.xAxis).tickInterval=Math.round((n[n.length-1][0]-n[0][0])/10)}this.updateChart(!0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-line-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var xp=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit(),this.widget.isBtnValues=!0;let e=this;function s(){let n,l,a,h=this,c=new Date(h.x),f=c.toLocaleDateString();if(c.getHours()!==0&&c.getMinutes()!==0&&c.getSeconds()!==0&&(f+=" "+c.toLocaleTimeString()),h.series)return l=h.series.options.format,a=h.y,a=e.formatNumber(a,l),n="<b>"+f+'</b><br><span style="color:'+h.series.color+'">\u25CF</span>'+h.series.name+":<b> "+a,n;n="<b>"+f+"</b><br>";for(let u=h.points.length-1;u>-1;u--)l=h.points[u].series.options.format,a=h.points[u].y,a=e.formatNumber(a,l),n+='<span style="color:'+h.points[u].series.color+'">\u25CF</span>'+h.points[u].series.name+":<b> "+a+"<br>";return n}let r={options:{chart:{zoomType:"x"},tooltip:{formatter:s},navigator:{enabled:!0},scrollbar:{enabled:!1}},series:[],useHighStocks:!0,loading:!0};this.us.mergeRecursive(this.chartConfig,r)}parseData(e){return Ft(this,null,function*(){e&&e.Info&&(this.dataInfo=e.Info),this.chartConfig.yAxis.min=this.getMinValue(e.Data),this.clearSeries();let s=[],r,n;if(e.Cols[0].tuples[0].children){let l=0;for(let a=0;a<e.Cols[0].tuples.length;a++)for(let h=0;h<e.Cols[0].tuples[a].children.length;h++){s=[];for(let c=0;c<e.Cols[1].tuples.length;c++)r=this.convertDateFromCache(this.extractValue(e.Cols[1].tuples[c].path)),s.push([r,+e.Data[e.Cols[0].tuples.length*e.Cols[0].tuples[a].children.length*c+a*e.Cols[0].tuples[a].children.length+h]||0]),s[s.length-1][1]===""&&(s[s.length-1][1]=null),l++;this.addSeries({data:s,name:e.Cols[0].tuples[a].caption+"/"+e.Cols[0].tuples[a].children[h].caption,format:e.Cols[0].tuples[a].format})}}else for(let l=e.Cols[0].tuples.length-1;l>=0;l--){for(s=[],n=0;n<e.Cols[1].tuples.length;n++){r=this.convertDateFromCache(this.extractValue(e.Cols[1].tuples[n].path));let a=+e.Data[n*e.Cols[0].tuples.length+l];a!==void 0&&s.push([r,a||0])}this.addSeries({data:s,name:e.Cols[0].tuples[l].caption,format:e.Cols[0].tuples[l].format})}this.initFormatForSeries(e),this.updateChart(!0)})}addDays(e,s){let r=new Date(e);return r.setDate(e.getDate()+s),r}extractValue(e){let s=e.indexOf("&[");return s==-1?"":e.substring(s+2,e.length-1)}getDate(e){let s=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],r=Date.parse(e);if(!isNaN(r))return r;if(e.split("-").length==2){let n=e.split("-"),l=s.indexOf(n[0].toLowerCase());if(l!=-1)return Date.parse((l+1).toString()+"/01/"+n[1])}else if(e.split(" ").length==2&&(e.split(" ")[1].split(":").length===0&&(e+=":00"),r=Date.parse(e.replace(/-/g,"/")),!isNaN(r)))return r;return 0}convertDateFromCache(e){let s,r;if(e===""&&e===void 0||e===null)return null;let n=e.toString();if(e.length===7&&e.charAt(4)==="W")return r=1+(parseInt(e.substring(5,7))-1)*7,s=parseInt(e.substring(0,4)),Date.parse(new Date(s,0,r));if(n.length==4)return this.getDate(e);if(n.indexOf("-")!=-1)return this.getDate(e);if(n.indexOf(" ")!=-1)return this.getDate(e);if(n.length==6){s=n.substr(0,4);let l=n.substr(4,2);return Date.parse(new Date(parseInt(s),parseInt(l)-1,1))}if(n.length==5&&!isNaN(parseInt(n))){let l=new Date(1840,11,31),a=n.toString().split(",");r=parseInt(a[0]);let h;return a.length>1&&(h=parseInt(a[1])),l=this.addDays(l,parseInt(r)),h&&l.setSeconds(h),Date.parse(l)}else return this.getDate(e)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-line-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var Ch=(()=>{let t=class t extends Wt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0,this.widget.type.toLowerCase()==="barchartstacked"&&this.enableStacking()}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-bar-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();var yp=Jt(Co());function eg(o,t){if(o&1&&(Dt(0,"div",2)(1,"div",4),re(2),It(),Ht(3,"span")(4,"span")(5,"span")(6,"span"),Dt(7,"div",4),re(8),It()()),o&2){let i=Bt().$implicit;Lt(2),Fe(i.rangeLower||"0"),Lt(6),Fe(i.rangeUpper||"0")}}function ig(o,t){if(o&1&&(Dt(0,"div"),re(1),It()),o&2){let i=Bt().$implicit;Ze("align-left",i.display==="label"),Lt(),ws(" ",i.label," ")}}function sg(o,t){if(o&1&&(Dt(0,"td"),sr(1,eg,9,2,"div",2)(2,ig,2,3,"div",3),It()),o&2){let i,e=t.$implicit;Ze("plotbox-cell",e.display==="plotBox"),Lt(),rr((i=e.display)==="plotBox"?1:2)}}function rg(o,t){if(o&1&&(Dt(0,"div"),Ht(1,"img",7),It()),o&2){let i=Bt().$index,e=Bt().$index,s=Bt();Lt(),_s("src",s.data[e][i],Cs)}}function ng(o,t){if(o&1&&Ht(0,"span",10),o&2){let i=Bt(2).$index,e=Bt().$index,s=Bt();Oe("left",s.targets[e][i],"%")}}function og(o,t){if(o&1&&(Dt(0,"div",8),sr(1,ng,1,2,"span",9),It()),o&2){let i=Bt().$index,e=Bt().$index,s=Bt();Oe("background-color",s.color)("width",s.data[e][i],"%"),Lt(),rr(s.targets[e][i]?1:-1)}}function ag(o,t){if(o&1&&(Dt(0,"div"),re(1),It()),o&2){let i=Bt().$index,e=Bt().$index,s=Bt();Lt(),ws(" ",s.data[e]?s.data[e][i]:""," ")}}function lg(o,t){if(o&1&&(Dt(0,"td"),sr(1,rg,2,1,"div")(2,og,2,5,"div",6)(3,ag,2,1,"div"),It()),o&2){let i,e=t.$implicit,s=Bt(2);Oe("width",e.display==="plotBox"?100/s.props.length*2:null,"%"),Ze("align-left",e.display==="label")("align-center",e.display==="itemNo"),Lt(),rr((i=e.display)==="trendLine"?1:i==="plotBox"?2:3)}}function hg(o,t){if(o&1&&(Dt(0,"tr"),he(1,lg,4,7,"td",5,le),It()),o&2){let i=Bt();Lt(),ce(i.props)}}function cg(o,t){if(o&1&&(Dt(0,"td"),re(1),It()),o&2){let i=t.$implicit;Lt(),ws(" ",i," ")}}function dg(o,t){if(o&1&&(Dt(0,"tr",1),he(1,cg,2,1,"td",null,le),It()),o&2){let i=Bt();Lt(),ce(i.footerValues)}}var bp=(()=>{let t=class t extends ue{constructor(){super(...arguments),this.widget={},this.columns=[],this.rows=[],this.data=[],this.targets=[],this.color="",this.props=[],this.hasFooter=!1,this.footerValues=[],this.san=Qt(Oh),this.sbs=Qt(qr),this.totalByColumn={},this.originalData=[]}ngOnInit(){super.ngOnInit(),this.color=yp.default.getOptions().colors?.[0],this.tc&&this.tc.hcColors&&(this.color=this.tc.hcColors[0]),this.subColorsConfig=this.bs.subscribe("charts:update-colors",e=>this.updateColors(e)),this.prepareProps(),this.props?.length||this.override?.columns?.length&&(this.props=this.override.columns)}ngOnDestroy(){this.subColorsConfig?.unsubscribe(),super.ngOnDestroy()}retrieveData(e){super.retrieveData(e),!e.Error&&(this.originalData=e.Data,this.columns=e.Cols[0].tuples,this.rows=e.Cols[1]?.tuples||[{}],this.prepareData(e.Data),this.cd.detectChanges())}prepareProps(){this.props=this.widget.dataProperties,this.props&&this.props.forEach(e=>e.label=e.label.replace("\\n",`
`))}onHeaderButton(e){switch(super.onHeaderButton(e),e.name){case"chartConfig":this.showChartConfig();break}}getValue(e,s,r,n,l){switch(r.display||""){case"itemNo":return(s+1).toString();case"label":return this.rows[s].caption;case"":case"value":case"plotBox":{let a=r.format,h=this.getPropValue(e,s,r);if(r.display==="plotBox"){let c=r.rangeLower||0,f=r.rangeUpper||0;return n!==void 0&&(c=n),l!==void 0&&(f=l),r.showAs==="target%"?parseFloat(h)/parseFloat(this.getPropValue(e,s,r,"targetValue"))*100:f-c===0?0:(h-c)/(f-c)*100}else{if(h==="")return"";if(r.showAs==="target%"){let c=this.getPropValue(e,s,r,"targetValue");return this.formatNumber(h/c,a)}return r.showAs==="sum%"?this.formatNumber(h/this.totalByColumn[r.dataValue],a||"#.##%"):this.formatNumber(h,a)}}case"trendLine":{let a=this.getColumnIndex(r.dataValue),h="";return a!==-1&&(h=e[s*this.columns.length+a]),this.getSvgForTrendLine(r,h)}}return 0}prepareFooter(){if(this.hasFooter=this.props.some(e=>e.summary==="sum"),this.footerValues=[],!!this.hasFooter)for(let e=0;e<this.props.length;e++){let s=this.props[e].format,r=this.props[e].summary;this.footerValues[e]="",r&&(this.footerValues[e]=this.formatNumber(this.calcTotal(e,r),s))}}updateColors(e){this.tc=e,this.color=e?.hcColors[0],this.originalData&&this.prepareData(this.originalData),this.cd.detectChanges()}showChartConfig(){let e=this.widget.name,s=this.ss.getWidgetsSettings(this.widget.dashboard)||{},r=()=>{this.ss.setWidgetsSettings(s,this.widget.dashboard)};s[e]||(s[e]={}),s[e].themeColors||(s[e].themeColors={}),this.sbs.showComponent({component:import("./chunk-HKGXJZ6E.js"),inputs:{appearance:{showSeries:[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],showBackground:!1,showLines:!1,showText:!1,showBorder:!1},widgetSettings:s[e],onSave:r,onUpdate:n=>this.updateColors(n)}})}getPropValue(e,s,r,n="dataValue"){let l=!isNaN(parseFloat(r[n])),a=r[n];if(!l){let h=this.getColumnIndex(r[n]);h===-1?a=0:a=e[s*this.columns.length+h]}return a}getColumnIndex(e){return this.columns.findIndex(r=>r.dimension?e.split("/").includes(r.dimension):/^Properties\(\"([^)]+)\"\)/.exec(r.valueID)?.[1]===e)}prepareData(e){let s=[];for(let r=0;r<this.props.length;r++){let n,l;if(this.props[r].rangeLower!==void 0&&this.props[r].rangeLower!==""&&(n=this.props[r].rangeLower),this.props[r].rangeUpper!==void 0&&this.props[r].rangeUpper!==""&&(l=this.props[r].rangeUpper),n!==void 0&&l!==void 0&&!isNaN(n)&&!isNaN(l)){s.push({min:n,max:l});continue}if(this.props[r].display==="plotBox"){let a=this.getColumnIndex(this.props[r].dataValue),h=e.filter((c,f)=>(f+a)%this.columns.length===0);l=Math.max(...h),n=Math.min(...h)}n=0,s.push({min:n,max:l}),this.props[r].rangeLower||(this.props[r].rangeLower=n),this.props[r].rangeUpper||(this.props[r].rangeUpper=l)}this.preparePercentageSums(e),this.data=[],this.targets=[];for(let r=0;r<this.rows.length;r++){this.data[r]||(this.data[r]=[],this.targets[r]=[]);for(let n=0;n<this.props.length;n++){let l=s[n].min,a=s[n].max;if(this.props[n].rangeLower&&typeof this.props[n].rangeLower=="string"&&(l=this.getPropValue(e,r,this.props[n],"rangeLower")),this.props[n].rangeUpper&&typeof this.props[n].rangeUpper=="string"&&(a=this.getPropValue(e,r,this.props[n],"rangeUpper")),this.data[r][n]=this.getValue(e,r,this.props[n],l,a),this.props[n].showAs!=="target%"&&this.props[n].targetValue&&a-l!==0){let h=1e4;this.targets[r][n]=h*1/this.data[r][n]*(this.getPropValue(e,r,this.props[n],"targetValue")-l)/(a-l)}}}this.prepareFooter()}getSvgForTrendLine(e,s){let n=[];typeof s=="string"?n=s.split(",").map(u=>{if(!u)return 0;let p=parseFloat(u);return isNaN(p)?0:p}):typeof s=="number"?n=[s]:Array.isArray(s);let l=Math.max(...n),a=Math.min(...n),h=(n.length-1)*4,c=`<svg xmlns="http://www.w3.org/2000/svg" width="${h}px" height="40px" viewBox="0 0 ${h}px 40px">
                        <path vector-effect="non-scaling-stroke" stroke-width="2" stroke="${this.color}" fill="none" d="`,f=0;for(let u=0;u<n.length;u++){let p=parseFloat(n[u]||"0");p=35-p/(l-a)*30,u===0?c+=`M ${f} ${p} `:c+=`L ${f} ${p} `,f+=4}return c+='"/></svg>',this.san.bypassSecurityTrustUrl("data:image/svg+xml;base64,"+btoa(c))}calcTotal(e,s){let r=this.getColumnIndex(this.props[e].dataValue);if(r===-1)return 0;let n=0;for(let l=0;l<this.rows.length;l++)n+=parseFloat(this.originalData[l*this.columns.length+r]);return s==="avg"&&(n=n/this.rows.length),n}preparePercentageSums(e){if(this.totalByColumn={},!this.override)return;let s=this.override.columns?.filter(r=>r.showAs==="sum%");s?.length&&s.forEach(r=>{let n=this.columns.findIndex(l=>l.dimension===r.dataValue);this.totalByColumn[r.dataValue]=e.reduce((l,a,h)=>{if(h%this.columns.length!==n||a==="")return l;let c=parseFloat(a);return isNaN(c)?l:l+c},0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-scorecard"]],inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:9,vars:1,consts:[[3,"plotbox-cell"],[1,"footer"],[1,"axis"],[3,"align-left"],[1,"label"],[3,"width","align-left","align-center"],[1,"box",3,"background-color","width"],[3,"src"],[1,"box"],[1,"target",3,"left"],[1,"target"]],template:function(s,r){s&1&&(Dt(0,"table")(1,"thead")(2,"tr"),he(3,sg,3,3,"td",0,le),It()(),Dt(5,"tbody"),he(6,hg,3,0,"tr",null,le),sr(8,dg,3,0,"tr",1),It()()),s&2&&(Lt(3),ce(r.props),Lt(3),ce(r.rows),Lt(2),rr(r.hasFooter?8:-1))},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{overflow-y:auto}table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;width:100%}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{color:#686868}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{position:relative;z-index:2}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{white-space:pre;text-align:right;position:sticky;top:0;padding:0 10px;height:40px;background-color:var(--cl-widget-filter-bg);border-bottom:1px solid var(--cl-header-border)}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-left[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-center[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:6px 10px;text-align:right}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-left[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-center[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:30px}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#00000003}.box[_ngcontent-%COMP%]{height:18px;flex-shrink:0;flex-grow:0;position:relative}.boxes-container[_ngcontent-%COMP%]{display:flex}.boxes-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:40px;flex-shrink:0;flex-grow:0;margin-right:10px}.axis[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:10px;border-bottom:1px solid gray;height:6px;border-left:1px solid gray;margin-top:28px;position:relative}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]{position:absolute;text-align:center;top:-14px}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]:first-child{left:0;transform:translate(-50%)}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]:last-child{right:0;transform:translate(50%)}.axis[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;border-right:1px solid gray}.footer[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{color:var(--cl-txt);background-color:var(--cl-widget-filter-bg);border-top:1px solid var(--cl-header-border);position:sticky;bottom:0}.target[_ngcontent-%COMP%]{display:inline-block;width:2px;transform:translate(-1);background-color:#1c1d20;height:calc(100% + 4px);position:absolute;top:-2px}.plotbox-cell[_ngcontent-%COMP%]{z-index:1}"]});let o=t;return o})();var Js=(()=>{let t=class t extends ue{constructor(){super(...arguments),this.data=[]}retrieveData(e){this.hideLoading(),this.prepareMeterData(e),this.cd.markForCheck(),this.cd.detectChanges()}prepareMeterData(e){if(this.data=[],!e)return;let s=!!this.widget?.dataProperties?.length,r=s?this.widget?.dataProperties:e.Cols[0].tuples;for(let n=0;n<r.length;n++){let l;s?l=r[n]:l=this.getDataPropByDataValue(r[n].dimension);let a,h="";if(s){let v=e.Cols[0].tuples.findIndex(x=>x.dimension===l.dataValue);h=e.Cols[0].tuples[v].caption,a=e.Data[v]}else h=r[n].caption,a=e.Data[n];let c=1,f=parseFloat(l.rangeLower.toString()),u=parseFloat(l.rangeUpper.toString());isNaN(f)&&(f=0),isNaN(u)&&(u=100);let p=f,b=u;isNaN(p)&&(p=33.33333),isNaN(b)&&(b=66.66666),a<p&&(c=0),a>=b&&(c=2),this.data.push({caption:h,state:c,value:a,min:f,max:u})}}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(s,r){},encapsulation:2});let o=t;return o})();function ug(o,t){if(o&1&&(Dt(0,"div",0),Ht(1,"img",1),Dt(2,"label"),re(3),It()()),o&2){let i=t.$implicit;Lt(),_s("src","assets/img/smiley/"+(i.state===1?"smile-yellow.svg":i.state===0?"smile-red.svg":"smile-green.svg"),Cs),Lt(2),Fe(i.caption)}}var vp=(()=>{let t=class t extends Js{constructor(){super(...arguments),this.widget={}}get gridColumns(){return"repeat("+(this.data?.length>=3?3:this.data?.length||0).toString()+", 1fr)"}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-wsmiley"]],hostVars:2,hostBindings:function(s,r){s&2&&Oe("grid-template-columns",r.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[[1,"card"],[3,"src"]],template:function(s,r){s&1&&he(0,ug,4,2,"div",0,le),s&2&&ce(r.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center}img[_ngcontent-%COMP%]{width:100%;max-height:calc(100% - 24px);max-width:100%}.card[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let o=t;return o})();function pg(o,t){if(o&1&&Ht(0,"div",3),o&2){let i=t.$implicit,e=Bt().$implicit;Ze("filled",e.progress>=i+1)}}function fg(o,t){if(o&1&&(Dt(0,"div",0)(1,"div",1),he(2,pg,1,2,"div",2,le),It(),Dt(4,"label"),re(5),It()()),o&2){let i=t.$implicit,e=Bt();Lt(),Ze("high",i.state===2)("low",i.state===0),Lt(),ce(e.dots),Lt(3),Fe(i.caption)}}var Cp=(()=>{let t=class t extends Js{constructor(){super(...arguments),this.widget={},this.data=[],this.dots=[0,1,2,3,4,5,6,7,8,9]}get gridColumns(){return"repeat("+(this.data?.length>=5?2:1).toString()+", 1fr)"}prepareMeterData(e){super.prepareMeterData(e),this.data.forEach(s=>{s.progress=(s.value-s.min)/(s.max-s.min)*10,isNaN(s.progress)&&(s.progress=0)}),console.log(this.data)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-light-bar"]],hostVars:2,hostBindings:function(s,r){s&2&&Oe("grid-template-columns",r.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[[1,"holder"],[1,"bar"],[1,"dot",3,"filled"],[1,"dot"]],template:function(s,r){s&1&&he(0,fg,6,5,"div",0,le),s&2&&ce(r.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center;gap:20px}.holder[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bar[_ngcontent-%COMP%]{display:flex;width:100%;height:24px;border:1px solid var(--cl-accent);border-radius:1000px;padding-left:3px;padding-right:3px;gap:4px;justify-content:space-between;align-items:center}.dot[_ngcontent-%COMP%]{background:var(--cl-hover);border-radius:1000px;width:100%;height:100%;max-width:18px;max-height:18px}.dot.filled[_ngcontent-%COMP%]{background:var(--cl-accent)}.bar.high[_ngcontent-%COMP%] > .dot[_ngcontent-%COMP%]:last-child{background-color:#e07d86}.bar.low[_ngcontent-%COMP%] > .dot[_ngcontent-%COMP%]:first-child{background-color:#175ab8}"],changeDetection:0});let o=t;return o})();function gg(o,t){if(o&1&&(Dt(0,"div",0),Ht(1,"img",1),Dt(2,"label"),re(3),It()()),o&2){let i=t.$implicit;Lt(),_s("src","assets/img/traffic-light/"+(i.state===1?"yellow.svg":i.state===0?"red.svg":"green.svg"),Cs),Lt(2),Fe(i.caption)}}var _p=(()=>{let t=class t extends Js{constructor(){super(...arguments),this.widget={}}get gridColumns(){return"repeat("+(this.data?.length>=3?3:this.data?.length||0).toString()+", 1fr)"}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=_t(t)))(r||t)}})(),t.\u0275cmp=bt({type:t,selectors:[["dsw-traffic-light"]],hostVars:2,hostBindings:function(s,r){s&2&&Oe("grid-template-columns",r.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[[1,"card"],[3,"src"]],template:function(s,r){s&1&&he(0,gg,4,2,"div",0,le),s&2&&ce(r.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center;gap:20px}img[_ngcontent-%COMP%]{width:100%;max-height:calc(100% - 24px);max-width:100%}.card[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let o=t;return o})();var mg=["popup"],xg=["tooltip"],wp=(()=>{let _MapWidgetOldComponent=class _MapWidgetOldComponent extends ue{constructor(){super(...arguments),this.tooltipData={visible:!1,content:"",name:"",items:[]},this.preventColFilteringBasedOnDataProperties=!0,this.CLUSTER_RANGE=1,this.isRGBColor=!1,this._selectedFeature=null,this.featureOverlay=null,this.mapData=null,this.hintTimeout=null,this.popupElement=null,this.polyData=null,this.isGeoJSON=!1,this.isWorldMap=!1}ngOnInit(){super.ngOnInit(),this.popupElement=this.popupEl.nativeElement,this.tooltipData.name="",this.tooltipData.items=[],this.widget.isMap=!0,this.requestPolygons(),this.us.isEmbedded()&&(this.onMessage=o=>{let t=o.data;switch(t.type){case"map.applyStyle":this.applyStyle(t);break}},window.addEventListener("message",this.onMessage))}applyStyle(o){let{selector:t,style:i,value:e}=o,s=this.map?.getTargetElement();(s&&s.querySelectorAll(t))?.forEach(n=>{n.style[i]=e})}ngAfterViewInit(){this.createMap()}ngOnDestroy(){this.us.isEmbedded()&&window.removeEventListener("message",this.onMessage),this.tooltip?.nativeElement?.remove(),super.ngOnDestroy()}createMap(){let o=this.ss.getAppSettings(),t;t=this.getDataPropValue("tileUrl");let i=new Ir({wrapX:!0,url:t}),e=new On({layers:[new Rr({source:i})],controls:gs({attributionOptions:{collapsible:!1}}),target:this.el.nativeElement,view:new ve({center:[0,0],zoom:2})});e.getViewport().addEventListener("mouseout",s=>{this.hideTooltip()},!1),this.map=e,this.initialize()}hideTooltip(){this.hintTimeout&&clearTimeout(this.hintTimeout),this.tooltip&&(this.tooltip.nativeElement.style.display="none")}rejectTooltipCreation(){clearTimeout(this.hintTimeout)}showTooltip(o,t,i){this.hintTimeout&&clearTimeout(this.hintTimeout),this.hintTimeout=setTimeout(()=>{let e=this.tooltip?.nativeElement,s=this.getDataPropValue("tooltipStyles");if(s){let r=JSON.parse(s);for(let n in r)e.style.setProperty(n,r[n])}e.innerHTML=o,e.style.left=t.toString()+"px",e.style.top=i.toString()+"px",e.style.display="block"},600)}showPopup(){let o=this.popupElement,t=this.getDataPropValue("popupStyles");if(t){let i=JSON.parse(t);for(let e in i)o.style.setProperty(e,i[e])}this.popupElement&&(this.popupElement.style.visibility="hidden"),setTimeout(()=>{this.popupElement&&(this.popupElement.style.visibility="visible"),this.map?.render()},0)}hidePopup(){this.popupElement&&(this.popupElement.style.visibility="hidden")}doDrillUp(){this.hideTooltip(),this.hidePopup(),this.doDrill()}displayAsPivot(o){this.hideTooltip(),this.rejectTooltipCreation(),this.widget.type==="pivot"?(this.widget.isDrillthrough=!1,this.restoreWidgetType()):(this.widget.pivotMdx=o||this.getMDX(),this.changeWidgetType("pivot"))}requestPolygons(){let o=this.widget.name;this.widget.name.indexOf(".")===-1&&(o+=".js"),o=this.getDataPropValue("coordsJsFile")||o;let i=(this.ss.serverSettings.DefaultApp||"/csp")+"/"+o;this.ds.getFile(i).then(e=>this.onPolyFileLoaded(e)).catch(e=>{this.loadDefaultGeoJSON()}).finally(()=>this.hideLoading())}onPolyFileLoaded(result){this.isGeoJSON=!1;try{let o=JSON.parse(result);this.polyData=o,this.isGeoJSON=!0,this.buildPolygons();return}catch(o){}var polys={};result="("+result+")(polys)",eval(result),this.polyData=polys,this.buildPolygons()}onPolyJSONFileLoaded(o){this.polyData=o,this.buildPolygons()}getFeatureColor(o,t){let i=this.mapData.Cols[1].tuples.filter(c=>c.caption===o);if(i.length===0)return;i=i[0];let e,s=this.mapData.Cols[1].tuples.indexOf(i),r=this.mapData.Cols[0].tuples.length,n="ColorExplicitValue";n=this.getDataPropValue("colorProperty")||n;let l;isNaN(parseInt(n,10))?l=this.mapData.Cols[0].tuples.filter(c=>c.caption===n):l=this.mapData.Cols[0].tuples.slice(n,1),l=l[0];let a=this.mapData.Cols[0].tuples.indexOf(l),h=this.mapData.Data[s*r+a];if(isNaN(parseFloat(h)))return h.toString().indexOf("rgb")!==-1&&h.toString().indexOf("rgba")===-1&&(h=h.replace("rgb","rgba"),h=h.substr(0,h.length-1)+", 0)"),e=h.split(","),e[3]="0.4)",e.join(",");{let c=this.getDataPropValue("colorFormula")||"hsl((255-x)/255 * 120, 100%, 50%)";this.isRGBColor&&(c="rgb(x, 255-x, 0)");let f=c.indexOf("("),u=c.substring(0,f).toLowerCase();c=c.substring(f+1,c.length-1),e=c.split(",");let p=t||0;for(let b=0;b<e.length;b++){if(e[b].indexOf("x")===-1)continue;e[b]=e[b].replace(/x/g,p.toString());let x=window["eval"](e[b]);x>255&&(x=255),x<0&&(x=0),e[b]=Math.floor(x).toString()}return u.indexOf("a")===-1?u+"a("+e.join(",")+", 0.45)":u+"("+e.join(",")+")"}}centerView(o,t){let i,e,s;if(this.widget.properties&&(i=parseFloat(this.widget.properties.latitude),e=parseFloat(this.widget.properties.longitude),s=parseFloat(this.widget.properties.zoom)),this.drills.length===0&&!isNaN(i)&&!isNaN(e)&&!isNaN(s)&&i!==void 0&&e!==void 0&&s!==void 0)this.map?.getView().setCenter(Hi([e,i],"EPSG:4326","EPSG:900913")),this.map?.getView().setZoom(s);else{if(Math.abs(o[0]-t[0])<1e-8&&Math.abs(o[1]-t[1])<1e-8)return;let r=Hi([o[0],o[1]],"EPSG:4326","EPSG:900913"),n=Hi([t[0],t[1]],"EPSG:4326","EPSG:900913");this.map?.getView().fit([r[0],r[1],n[0],n[1]],this.map?.getSize())}this.getDataPropValue("fixMaxZoom")==="1"&&this.map?.getView().setMaxZoom(this.map?.getView().getZoom()||1),this.getDataPropValue("fixMinZoom")==="1"&&this.map?.getView().setMinZoom(this.map?.getView().getZoom()||1),this.getDataPropValue("maxZoom")&&this.map?.getView().setMaxZoom(parseFloat(this.getDataPropValue("maxZoom")||"1"))}buildPolygons(){let o,t,i,e,s,r,n,l,a,h,c,f;this.isRGBColor=!1;let u=this.getDataPropValue("colorProperty")||"ColorHSLValue",p=this.getDataPropValue("coordsProperty")||"CoordKeyValue";if(!this.polyData||!this.map||!this.mapData)return;if(this.isWorldMap){this.buildWorldMapPolygons();return}let b=[];n=this.mapData.Cols[0].tuples.length;let v=Number.MAX_VALUE,x=Number.MIN_VALUE,m=0;for(isNaN(parseInt(u))?(f=this.mapData.Cols[0].tuples.filter(w=>w.caption===u),m=this.mapData.Cols[0].tuples.indexOf(f[0]),m===-1&&(this.isRGBColor=!0,u="ColorRGBValue",f=this.mapData.Cols[0].tuples.filter(w=>w.caption===u),m=this.mapData.Cols[0].tuples.indexOf(f[0]))):m=parseInt(this.widget.properties.colorProperty,10)||0,l=0;l<this.mapData.Cols[1].tuples.length;l++)a=this.mapData.Data[l*n+m],a<v&&(v=a),a>x&&(x=a);let E=[99999999,99999999],L=[-99999999,-99999999],S=0;for(c=-1,f=this.mapData.Cols[0].tuples.filter(w=>w.caption===p),f.length===0&&(f=this.mapData.Cols[0].tuples.filter(w=>w.caption==="Key")),f.length!==0&&(c=this.mapData.Cols[0].tuples.indexOf(f[0])),l=0;l<this.mapData.Cols[1].tuples.length;l++){let w=this.mapData.Cols[1].tuples[l].caption,R=w;if(c!==-1&&(R=this.mapData.Data[l*n+c]),h=this.getPartsByKey(R,p),!h)continue;let O=[];S++;let I=this.getDataPropValue("dataLabels");if(this.isGeoJSON){let C=this.convertCoordinatesOfGEOJson(h,E,L);O=C.poly,E=C.min,L=C.max}else for(r=0;r<h.length;r++){let C=[];if(!h[r])continue;let d=h[r];typeof d=="string"&&(d=d.split(" "));let g=[];for(e in d){if(!d[e])continue;let y=d[e];if(typeof y=="string"&&(y=y.split(",")),y.length<2)continue;if(o=parseFloat(y[0]),t=parseFloat(y[1]),isNaN(o)||isNaN(t)){console.warn("Wrong poly coordinates: ",d[e]);continue}let M=new Pe([o,t]);M.transform("EPSG:4326","EPSG:3857");let k=o;k<0&&(k+=360),parseFloat(k)<E[0]&&(E[0]=parseFloat(k)),parseFloat(t)<E[1]&&(E[1]=parseFloat(t)),parseFloat(k)>L[0]&&(L[0]=parseFloat(k)),parseFloat(t)>L[1]&&(L[1]=parseFloat(t)),g.push(M.getCoordinates())}if(C.push(g),C.length>300){let y=[];for(e=0;e<C.length;e+=2)y.push(C[e]);C=y}O.push(g)}let _=w,A=this.getDataPropValue("polygonTitleProperty");if(A){let C=this.mapData.Cols[0].tuples.filter(d=>d.caption===A);if(C.length!==0){let d=this.mapData.Cols[0].tuples.indexOf(C[0]);d!==-1&&(_=this.mapData.Data[l*n+d])}}let F=hi;if(this.isGeoJSON){switch(h.type.toLowerCase()){}F=Xr}let P=new bs({geometry:new F(O),key:w,title:_,dataIdx:l*n,path:this.mapData.Cols[1].tuples[l].path,desc:this.mapData.Cols[1].tuples[l].title}),D;if(isNaN(parseFloat(_))||(_=this.formatNumber(_,"")),I){let C=JSON.parse(I),d=C.size||12,g=C.font||"Calibri,Arial,sans-serif",y=C.color||"#000",M=C.stroke||"#fff",k=C.strokeWidth||2;D=new is({font:`${d}px ${g}`,fill:new Ce({color:y}),stroke:new De({color:M,width:k}),text:_+""})}a=this.mapData.Data[l*n+m],P.setStyle(new _e({zIndex:0,fill:new Ce({color:this.getFeatureColor(w,(a-v)*255/(x-v))||"none"}),stroke:new De({color:"rgba(0, 0, 0, 0.3)",width:1}),text:D})),b.push(P)}this.featureOverlay.getSource().clear(),this.polys.clear(),this.polys.addFeatures(b),setTimeout(()=>{this.centerView(E,L)})}retrieveData(o){if(setTimeout(()=>{this.map?.updateSize()},0),o.Error){this.showError(o.Error);return}o.Info&&(this.dataInfo=o.Info),this.hideTooltip(),this.markers.clear(),this.mapData=o,this.buildPolygons();let t=[Number.MAX_VALUE,Number.MAX_VALUE],i=[-Number.MAX_VALUE,-Number.MAX_VALUE];if(o&&this.map){let e=o.Cols[0].tuples.length,s=0,r=[],n="latitude";this.widget.properties&&this.widget.properties.latitudeProperty&&(n=this.widget.properties.latitudeProperty);let l="longitude";this.widget.properties&&this.widget.properties.longitudeProperty&&(l=this.widget.properties.longitudeProperty);let a=-1,h=-1,c=o.Cols[0].tuples.filter(u=>u.caption.toLowerCase()===n);if(c.length!==0&&(h=o.Cols[0].tuples.indexOf(c[0])),c=o.Cols[0].tuples.filter(u=>u.caption.toLowerCase()===l),c.length!==0&&(a=o.Cols[0].tuples.indexOf(c[0])),h===-1||a===-1)return;let f=o.Cols[1].tuples;f[0]?.children&&(f=f[0]?.children);for(let u=0;u<f.length;u++){if(o.Data[s+a]===""||o.Data[s+a]===void 0||o.Data[s+h]===""||o.Data[s+h]===void 0)continue;let p=parseFloat(o.Data[s+a]||0),b=parseFloat(o.Data[s+h]||0),v=f[u].caption,x=new Pe([p,b]);x.transform("EPSG:4326","EPSG:900913");let m=[],E=[];for(let S=2;S<o.Cols[0].tuples.length;S++)m.push(o.Cols[0].tuples[S].caption),E.push(o.Data[s+S]);let L=new bs({geometry:x,name:v,labels:m,values:E,dataIdx:s,path:f[u].path,desc:f[u].title});parseFloat(b.toString())<t[1]&&(t[1]=parseFloat(b.toString())),parseFloat(p.toString())<t[0]&&(t[0]=parseFloat(p.toString())),parseFloat(b.toString())>i[1]&&(i[1]=parseFloat(b.toString())),parseFloat(p.toString())>i[0]&&(i[0]=parseFloat(p.toString())),t[0]==i[0]&&(t[0]-=.25,i[0]+=.25),t[1]==i[1]&&(t[1]-=.25,i[1]+=.25),r.push(L),s+=e}r.length!==0&&(this.markers.addFeatures(r),this.centerView(t,i)),this.centerView(t,i)}}initialize(){this.iconStyle=new _e({zIndex:100,image:new zi({anchor:[.5,40],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:1,src:"assets/img/map-marker-red.png"})});let o=this.map,t=new _e({zIndex:0,stroke:new De({color:"rgba(0, 0, 0, 0.5)",width:1})});this.polyStyle=t,this.hoverStyle=new _e({zIndex:1,stroke:new De({color:"blue",width:2})}),this.polys=new xi({features:[]});let i=new vi({source:this.polys,style:this.polyStyle});i.setZIndex(1),this.map?.addLayer(i),this.markers=new xi({features:[]});let e=new ne;this.featureOverlay=new vi({map:this.map,source:new xi({features:e,useSpatialIndex:!1}),style:this.hoverStyle,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.featureOverlay.setZIndex(10),this.featureOverlay.setMap(this.map),this.markers&&(i=new vi({source:this.markers,style:this.iconStyle}),i.setZIndex(100),this.map?.addLayer(i)),this.map?.on("click",s=>this.onMapClick(s)),this.map?.on("pointermove",s=>this.onPointerMove(s))}onPointerMove(o){if(de.mobile&&o.originalEvent.touches&&o.originalEvent.touches.length!==1)return;this.hideTooltip();let t=this.map?.forEachFeatureAtPixel(o.pixel,(e,s)=>e);if(t){let e=t.get("dataIdx"),s,r="TooltipValue",n="";if(this.isWorldMap){let l=[];for(let a=0;a<this.mapData?.Cols[0]?.tuples?.length;a++){let h=this.mapData?.Cols[0]?.tuples[a],c=this.mapData?.Data[e+a]?.toString()??"";c&&l.push(`<b>${h.caption}:</b> ${c}`)}s=l.join("<br>"),s?.toString()&&this.showTooltip(s.toString(),o.pixel[0],o.pixel[1])}else{let l=this.getDataProp("tooltipProperty");l&&(r=l.dataValue,n=l.format),s=this.getDataByColumnName(this.mapData,r||"Name",e,n),!s&&this.widget.properties?.polygonTitleProperty&&t.get("title")&&(s=t.get("title")),s||(s=this.getDataByColumnName(this.mapData,"Name",e)),s||(s=(this.mapData.Cols[1].tuples[0]?.children||this.mapData.Cols[1].tuples)[Math.floor(e/this.mapData.Cols[0].tuples.length)].caption||""),s?.toString()&&this.showTooltip(s.toString(),o.pixel[0],o.pixel[1])}}if(o.dragging){this.hideTooltip();return}let i=this.map?.getEventPixel(o.originalEvent);if(i){let e=this.map?.hasFeatureAtPixel(i);(this.map?.getTarget()).style.cursor=e?"pointer":""}this.featureOverlay?.getSource().clear(),t&&this.featureOverlay?.getSource().addFeature(t)}getTooltipData(o){if(!this.mapData)return;let t=[],i=this.mapData.Cols[1].tuples.filter(l=>l.caption===o);if(i.length===0)return;i=i[0];let e=this.mapData.Cols[1].tuples.indexOf(i),s=this.mapData.Cols[0].tuples.length,r=this.mapData.Cols[0].tuples.filter(l=>l.caption==="tooltip");if(r.length===0)return;r=r[0];let n=this.mapData.Cols[0].tuples.indexOf(r);return t.push({label:"",value:this.mapData?.Data[e*s+n].split(":")[1]||""}),t}onMapClick(o){if(this.hidePopup(),de.mobile&&o.originalEvent.touches&&o.originalEvent.touches.length!==1)return;let t=this.map?.forEachFeatureAtPixel(o.pixel,(e,s)=>e);if(t){if(this.hideTooltip(),de.mobile&&this._selectedFeature!==t){this._selectedFeature=t,this.onPointerMove(o);return}this.doDrill(t.get("path"),t.get("name")||t.get("title"),void 0,()=>{i(t)})}else this.hideTooltip();let i=e=>{let s=e.get("dataIdx"),r,n,l="PopupValue",a="",h=this.getDataProp("popupProperty");if(h&&(l=h.dataValue,a=h.format),l?(n="<b>"+(e.get("key")||e.values_.title)+"</b><br/>",n+=l+": ",n+=this.getDataByColumnName(this.mapData,l,s,a)):n=this.mapData?.Cols[1].tuples[Math.floor(s/this.mapData?.Cols[0].tuples.length)].caption||this.mapData?.Cols[1].tuples[Math.floor(s/this.mapData?.Cols[0].tuples.length)].desc||"",!n)if(n="<b>"+(e.get("name")||e.values_.title)+"</b><br/>",this.mapData?.Cols[0].tuples.length)for(let c=0;c<this.mapData?.Cols[0].tuples.length;c++){let f=this.mapData?.Cols[0].tuples[c].caption;if(f.toLowerCase()==="latitude"||f.toLowerCase()==="longitude")continue;let u=this.getDataByColumnName(this.mapData,f,s);n+=`${f}: <span style="opacity: 0.6">${u}</span>`,c!==this.mapData?.Cols[0].tuples.length-1&&(n+="<br/>")}else n=this.getDataByColumnName(this.mapData,"Name",s);n&&(this.tooltipData.content=n,this.popupElement&&(this.popupElement.style.left=o.pixel[0]+"px",this.popupElement.style.top=o.pixel[1]-10+"px",this.popupElement.innerHTML=n),this.showPopup())}}onResize(){this.map&&this.map.updateSize()}buildGeoJSON(o){}getPartsByKey(o,t="Key"){if(this.isGeoJSON){let i=this.polyData?.features.find(e=>e.properties[t]===o);return i?i.geometry:void 0}else if(this.polyData?.[o])return this.polyData[o]?.split(";")}convertCoordinatesOfGEOJson(o,t,i){let e=JSON.parse(JSON.stringify(o.coordinates));for(let s=0;s<e.length;s++)for(let r=0;r<e[s].length;r++)for(let n=0;n<e[s][r].length;n++){let l=e[s][r][n][0],a=e[s][r][n][1],h=new Pe([l,a]);h.transform("EPSG:4326","EPSG:3857"),e[s][r][n][0]=h.getCoordinates()[0],e[s][r][n][1]=h.getCoordinates()[1];let c=l;c<0&&(c+=360),parseFloat(c)<t[0]&&(t[0]=parseFloat(c)),parseFloat(a)<t[1]&&(t[1]=parseFloat(a)),parseFloat(c)>i[0]&&(i[0]=parseFloat(c)),parseFloat(a)>i[1]&&(i[1]=parseFloat(a))}return{poly:e,min:t,max:i}}loadDefaultGeoJSON(){return Ft(this,null,function*(){let o;try{o=yield this.ds.getJSONFile("assets/countries.json")}catch{console.error(`Can't load default GEOJSON: "assets/countries.json"`);return}if(!o)return;let t=new xi;t.addFeatures(new Wr().readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:this.map?.getView().getProjection()})),this.worldMap=t;let i=new vi({source:t});this.polyData=o,this.isWorldMap=!0,this.isGeoJSON=!0})}buildWorldMapPolygons(){let o=this.polyData.features,t=[],i=Number.MAX_VALUE,e=Number.MIN_VALUE;for(let s=0;s<this.mapData?.Data?.length;s+=2){let r=this.mapData?.Data[s+1];r<i&&(i=r),r>e&&(e=r)}for(let s=0;s<this.mapData?.Cols[1]?.tuples?.length;s++){let r=this.mapData.Data[s*2];if(!r)continue;let n=this.worldMap?.getFeatures().find(p=>p.get("name")===r);if(!n)continue;n.set("dataIdx",s*2),n.set("title",r),n.set("path",this.mapData.Cols[1].tuples[s].path),t.push(n);let l=this.mapData.Data[s*2+1],c=`hsla(${(255-(l-i)/(e-i)*255)/255*120}, 100%, 50%, 0.6)`,f=new is({font:"8px Oxygen",fill:new Ce({color:"black"}),text:`${r}
`+l.toString()}),u=this;n.setStyle(new _e({zIndex:0,fill:new Ce({color:c}),stroke:new De({color:"rgba(0, 0, 0, 0.3)",width:1}),text:f}))}this.featureOverlay.getSource().clear(),this.polys.clear(),this.polys.addFeatures(t),this.fitPolygonsToScreen()}getMaxPoly(o){let t=[];for(let i=0;i<o.length;i++)t.push({poly:o[i],area:o[i].getArea()});return t.sort(function(i,e){return i.area-e.area}),t[t.length-1].poly}fitPolygonsToScreen(){this.map?.getView().fit(this.polys.getExtent(),{padding:[20,20,20,20]})}};_MapWidgetOldComponent.\u0275fac=(()=>{let o;return function(i){return(o||(o=_t(_MapWidgetOldComponent)))(i||_MapWidgetOldComponent)}})(),_MapWidgetOldComponent.\u0275cmp=bt({type:_MapWidgetOldComponent,selectors:[["dsw-map-widget"]],viewQuery:function(t,i){if(t&1&&(wi(mg,7),wi(xg,7)),t&2){let e;Si(e=Mi())&&(i.popupEl=e.first),Si(e=Mi())&&(i.tooltip=e.first)}},standalone:!0,features:[Ct,vt],decls:7,vars:0,consts:[["popup",""],["tooltip",""],[1,"panel","panel-default","map-popup",2,"visibility","hidden"],["ng-bind-html","model.tooltip.content | sanitize"],[1,"arrow_box"],[1,"tooltip",2,"display","none"]],template:function(t,i){t&1&&(Dt(0,"div",2,0)(2,"div"),Ht(3,"div",3),It(),Ht(4,"div",4),It(),Ht(5,"div",5,1))},styles:['[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]{margin-top:24px;z-index:1000;position:absolute;border:solid 1px #000000;color:#000;background-color:#ffffe1;white-space:nowrap;font-family:Oxygen;font-size:13px;-moz-box-shadow:2px 2px 4px #7f7f7f;box-shadow:2px 2px 4px #7f7f7f;padding:2px 3px}.map-popup[_ngcontent-%COMP%]{transform:translateY(-100%) translate(-50%);z-index:1;position:absolute;background-color:var(--cl-widget-filter-bg);margin-bottom:0;border-color:#b0b0b0;padding:4px;-webkit-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);-moz-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);box-shadow:1px 1px 9px #32323280;color:var(--cl-widget-header-txt)}.map-popup[_ngcontent-%COMP%]:after{content:" ";display:block;width:0;height:0;border-style:solid;border-width:8px 4px 0 4px;bottom:-8px;left:calc(50% - 4px);position:absolute;border-color:var(--cl-widget-filter-bg) transparent transparent transparent}']});let MapWidgetOldComponent=_MapWidgetOldComponent;return MapWidgetOldComponent})();var Hr=[{id:"btn.ShowAnnotations",text:"Show annotations",tooltip:"Show annotations",icon:"assets/img/icons/text.svg",defValue:!0},{id:"btn.ShowPercents",text:"Show percents",tooltip:"Show percents",icon:"assets/img/icons/percent.svg"}],Qs={regular:{label:"Scorecard chart",class:bp,allowShowAsPivot:!0},fuelGauge:{class:bh,type:"chart",chart:"solidgauge",allowShowAsPivot:!0},bullseyeChart:{label:"Bullseye chart",class:gp,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},speedometer:{class:bh,type:"chart",chart:"gauge",allowShowAsPivot:!0,disableLegend:!0},bubbleChart:{label:"Bubble chart",class:cp,type:"chart",chart:"bubble",allowShowAsPivot:!0},treeMapChart:{label:"Tree map chart",class:hp,type:"chart",chart:"treemap",allowShowAsPivot:!0},hilowChart:{label:"Hi-low chart",class:dp,type:"chart",chart:"boxplot",allowShowAsPivot:!0},pieChart3D:{label:"Pie chart 3D",class:Ur,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},donutChart3D:{label:"Donut chart 3D",class:Ur,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},donutChart:{label:"Donut chart",class:Ur,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},pieChart:{label:"Pie chart",class:Ur,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},areaChart:{label:"Area chart",class:fp,type:"chart",chart:"area",allowShowAsPivot:!0},barChart:{label:"Bar chart",class:Ch,type:"chart",chart:"bar",allowShowAsPivot:!0},barChartStacked:{label:"Bar chart stacked",class:Ch,type:"chart",chart:"bar",allowShowAsPivot:!0},lineChart:{label:"Linear chart",class:bo,type:"chart",chart:"line",allowShowAsPivot:!0},lineChartMarkers:{label:"Linear chart with markers",class:bo,type:"chart",chart:"line",allowShowAsPivot:!0},comboChart:{label:"Combo chart",class:bo,type:"chart",chart:"line",allowShowAsPivot:!0},columnChart:{label:"Column chart",class:mo,type:"chart",chart:"column",allowShowAsPivot:!0},columnChart3D:{label:"Column chart 3D",class:mo,type:"chart",chart:"column",allowShowAsPivot:!0},columnChartStacked:{label:"Column chart stacked",class:mo,type:"chart",chart:"column",allowShowAsPivot:!0},xyChart:{label:"XY chart",class:mp,type:"chart",chart:"scatter",allowShowAsPivot:!0},timeChart:{label:"Time chart",class:xp,type:"chart",allowShowAsPivot:!0},pivot:{label:"Table",class:wo,type:"pivot"},"deepsee.lightpivottable":{class:wo,type:"pivot"},textMeter:{label:"Text meter",class:Zh,type:"text",allowShowAsPivot:!0},map:{label:"World map",class:location.hash.indexOf("oldmap=1")!==-1?wp:oo,type:"map",allowShowAsPivot:!0},"deepsee.enhancedmapportlet":{class:oo,type:"map",allowShowAsPivot:!0},"rf.mapportlet":{class:oo,type:"map",allowShowAsPivot:!0},horizontalControls:{class:xo,type:"empty"},verticalControls:{class:xo,type:"empty"},smiley:{class:vp,allowShowAsPivot:!1},lightBar:{class:Cp,allowShowAsPivot:!1},trafficLight:{class:_p,allowShowAsPivot:!1}};Qs[de.const.emptyWidgetClass]={class:xo,type:"empty"};var lp=(()=>{let t=class t{constructor(){}initialize(){let e=de.addons;if(e&&e&&e.length)for(let s=0;s<e.length;s++){let r=e[s].split("/").pop();r=Hh+r;try{}catch{console.error(`Can't register addon: ${r}. Be aware that all names is case sensitive!`)}}}register(e,s,r,n){Qs[e]=Se({class:r,type:s},n)}getClass(e){let s=e.toLowerCase();if(Qs[s]||(s=s.replace(/dsw.addons./ig,"")),!!Qs[s])return Qs[s].class}getDesc(e){return Qs[e.replace(/dsw.addons./ig,"")]}getType(e){return this.getDesc(e)?.type||""}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Mh({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();export{Uh as a,ue as b,Zh as c,Wt as d,Qs as e,lp as f};
