import{a as A}from"./chunk-PPAMQKOX.js";import{a as I}from"./chunk-2QWDS2UT.js";import{a as N}from"./chunk-EAEBZZLM.js";import{a as j}from"./chunk-DQT4BSA2.js";import{a as D}from"./chunk-RNWIIYZZ.js";import{a as F}from"./chunk-SUAWKU6Z.js";import{b as T}from"./chunk-GVFZPDGQ.js";import{d as W,e as O,i as P,j as k}from"./chunk-6EPWFNOH.js";import{F as S}from"./chunk-3HKVS7J3.js";import{$a as p,$b as u,Db as e,Eb as t,Fb as a,Jb as y,Nb as g,Ob as M,Xb as n,_b as h,ab as s,ac as f,cc as E,fa as _,qa as w,ra as v,rb as x,tb as b,yb as C}from"./chunk-ZKAUCJHV.js";import"./chunk-DEPBX7UX.js";function B(m,l){if(m&1){let z=y();e(0,"button",11),g("click",function(){w(z);let o=M();return v(o.deleteWidgetClick())}),n(1,"Delete widget"),t()}}var U=(()=>{let l=class l{constructor(c,o,i,d,r){this.ms=c,this.dbs=o,this.eds=i,this.mds=d,this.sbs=r,this.invalid=[],this.model={edKey:"ed"+new Date().getTime(),dashboard:this.dbs.current.value,name:"",title:"",dataSource:"",type:"pivot",dataLink:"",dataProperties:[],dependents:[],controls:[],mdx:"",x:0,y:0,rows:4,cols:4}}ngOnInit(){this.eds.resetSavedState(),this.widget?(this.model=this.widget,this.widget.oldWidget=JSON.parse(JSON.stringify(this.widget)),this.eds.updateEditedWidget({widget:this.model}),this.eds.resetSavedState()):this.initializeNewWidget()}ngOnDestroy(){this.eds.cancelEditing()}onCancelEditing(){this.close()}onSave(){this.eds.save(this.model)}onTypeAndDataSourceClick(){this.eds.navigateDataSourceAndType(this.model)}updateWidget(){this.eds.updateEditedWidget({widget:this.model})}deleteWidgetClick(){this.eds.deleteWidget(this.model)}close(){this.sbs.hide()}initializeNewWidget(){let c=this.dbs.getWidgets().filter(o=>o.type!==S.const.emptyWidgetClass).length+1;this.model.name=`Widget${c}`,this.eds.onNewWidget.emit(this.model)}};l.\u0275fac=function(o){return new(o||l)(s(N),s(T),s(j),s(D),s(F))},l.\u0275cmp=_({type:l,selectors:[["dsw-widget-editor"]],inputs:{widget:"widget",invalid:"invalid"},standalone:!0,features:[E],decls:37,vars:5,consts:[[3,"cancel","apply","isWidgetEditorWarning"],[1,"container"],[1,"headline"],[3,"ngModelChange","change","required","ngModel"],[3,"ngModelChange","change","ngModel"],[1,"navigation"],[1,"btn-section",3,"click"],["src","assets/img/icons/icon-next-blue.svg"],["title","Not implemented yet",1,"btn-section","disabled"],[1,"footer"],[1,"btn","btn-white"],[1,"btn","btn-white",3,"click"]],template:function(o,i){o&1&&(e(0,"dsw-sidebar-actions",0),g("cancel",function(){return i.onCancelEditing()})("apply",function(){return i.onSave()}),n(1,` Add widget
`),t(),e(2,"div",1)(3,"div",2),n(4," General settings "),t(),e(5,"label"),n(6,"Name"),t(),e(7,"dsw-input",3),f("ngModelChange",function(r){return u(i.model.name,r)||(i.model.name=r),r}),g("change",function(){return i.updateWidget()}),t(),e(8,"label"),n(9,"Title"),t(),e(10,"dsw-input",4),f("ngModelChange",function(r){return u(i.model.title,r)||(i.model.title=r),r}),g("change",function(){return i.updateWidget()}),t(),e(11,"div",5)(12,"button",6),g("click",function(){return i.onTypeAndDataSourceClick()}),n(13," Type and data source "),a(14,"img",7),t(),e(15,"button",8),n(16," Widget settings "),a(17,"img",7),t(),e(18,"button",8),n(19," Controls "),a(20,"img",7),t(),e(21,"button",8),n(22," Data properties "),a(23,"img",7),t(),e(24,"div",2),n(25," Diagram and pivot table "),t(),e(26,"button",8),n(27," Table settings "),a(28,"img",7),t(),e(29,"button",8),n(30," Diagram settings "),a(31,"img",7),t(),e(32,"button",8),n(33," Diagram legend "),a(34,"img",7),t()()(),e(35,"div",9),x(36,B,2,0,"button",10),t()),o&2&&(b("isWidgetEditorWarning",!0),p(7),b("required",i.invalid.includes("name")),h("ngModel",i.model.name),p(3),h("ngModel",i.model.title),p(26),C(i.widget?36:-1))},dependencies:[I,A,k,W,P,O],styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;padding-bottom:20px;transition:transform 2s linear;min-width:var(--sidebar-width)}.container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;padding-left:20px;flex:1 1 100%}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px;height:4px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-left:solid 16px var(--cl-bg);background:#ebebea}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-left:solid 16px var(--cl-bg);border-radius:0;background:#1c1d2066}label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-family:Oxygen;color:var(--cl-sidebar-txt);margin-top:10px;margin-bottom:2px;font-size:14px;width:calc(100% - 4px)}input[_ngcontent-%COMP%]{margin-bottom:4px}.divider[_ngcontent-%COMP%]{display:block;width:100%;clear:both}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#fff;padding:10px;color:#1a73e8;font-size:14px;line-height:16px;border:1px solid #EBEBEA;border-radius:4px;width:100%;cursor:pointer;transition:background-color .3s linear}.btn-section[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#1a73e80d}.btn-section[_ngcontent-%COMP%]:not(.disabled):active{transform:translateY(1px)}.headline[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.navigation[_ngcontent-%COMP%]{margin-top:20px}.navigation[_ngcontent-%COMP%] > .btn-section[_ngcontent-%COMP%]:not(:last-child){margin-bottom:4px}.navigation[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]{margin-top:20px}.disabled[_ngcontent-%COMP%]{cursor:default;filter:grayscale(1);opacity:.5}.footer[_ngcontent-%COMP%]{padding-left:20px}.footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-top:20px}.footer[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}.color-rect[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:inline-flex;position:relative;align-items:center;justify-content:center;cursor:pointer;width:32px;height:32px;margin-right:4px;margin-bottom:4px;border:var(--tile-border);font-size:24px;outline-offset:-2px;float:left;background-size:60%}.color-rect[_ngcontent-%COMP%]:hover{outline:1px solid var(--cl-accent)}.color-rect.active[_ngcontent-%COMP%]{outline:3px solid var(--cl-accent)}.color-rect.small[_ngcontent-%COMP%]{width:32px}"],changeDetection:0});let m=l;return m})();export{U as WidgetEditorComponent};
