import{a as Jn}from"./chunk-54YLOEMX.js";import{a as vh}from"./chunk-WYNQ5JHX.js";import{a as zr}from"./chunk-SUAWKU6Z.js";import{a as yh,b as bh}from"./chunk-7Z57W26K.js";import{E as fh,F as Ae,H as gh,I as mh,J as xh,K as xs,r as uh,u as ph}from"./chunk-B2BNZRWN.js";import{$a as Dt,Ab as ne,Ba as ah,Bb as oe,Bc as dh,Cb as ae,Db as Lt,Eb as kt,Fb as le,Jb as hh,Nb as ch,Ob as Nt,Tb as $i,Ub as Ji,Vb as Qi,X as ih,Xa as fs,Xb as ie,Yb as Te,Zb as ms,ba as $t,cc as bt,fa as yt,gb as lh,lb as vt,qa as sh,ra as rh,rb as $s,sa as nh,ta as oh,tb as gs,ua as St,ub as Ee,vb as je,yb as Js}from"./chunk-ZKAUCJHV.js";import{a as xe,b as qi,d as qe,f as qt,g as eh,h as Yt}from"./chunk-DEPBX7UX.js";var ys=qe((Ch,Nr)=>{"use strict";(function(o,t){typeof define=="function"&&define.amd?define(t):typeof Nr=="object"&&Nr.exports?Nr.exports=t():o.numeral=t()})(Ch,function(){var o,t,s="2.0.6",e={},i={},r={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},n={currentLocale:r.currentLocale,zeroFormat:r.zeroFormat,nullFormat:r.nullFormat,defaultFormat:r.defaultFormat,scalePercentBy100:r.scalePercentBy100};function l(a,h){this._input=a,this._value=h}return o=function(a){var h,c,g,u;if(o.isNumeral(a))h=a.value();else if(a===0||typeof a>"u")h=0;else if(a===null||t.isNaN(a))h=null;else if(typeof a=="string")if(n.zeroFormat&&a===n.zeroFormat)h=0;else if(n.nullFormat&&a===n.nullFormat||!a.replace(/[^0-9]+/g,"").length)h=null;else{for(c in e)if(u=typeof e[c].regexps.unformat=="function"?e[c].regexps.unformat():e[c].regexps.unformat,u&&a.match(u)){g=e[c].unformat;break}g=g||o._.stringToNumber,h=g(a)}else h=Number(a)||null;return new l(a,h)},o.version=s,o.isNumeral=function(a){return a instanceof l},o._=t={numberToFormat:function(a,h,c){var g=i[o.options.currentLocale],u=!1,p=!1,b=0,v="",x=1e12,m=1e9,E=1e6,L=1e3,S="",w=!1,R,O,I,_,P,F,A,D,C,d;if(a=a||0,O=Math.abs(a),o._.includes(h,"(")?(u=!0,h=h.replace(/[\(|\)]/g,"")):(o._.includes(h,"+")||o._.includes(h,"-"))&&(D=o._.includes(h,"+")?h.indexOf("+"):a<0?h.indexOf("-"):-1,h=h.replace(/[\+|\-]/g,"")),o._.includes(h,"a")&&(R=h.match(/a(k|m|b|t)?/),R=R?R[1]:!1,o._.includes(h," a")&&(v=" "),h=h.replace(new RegExp(v+"a[kmbt]?"),""),O>=x&&!R||R==="t"?(v+=g.abbreviations.trillion,a=a/x):O<x&&O>=m&&!R||R==="b"?(v+=g.abbreviations.billion,a=a/m):O<m&&O>=E&&!R||R==="m"?(v+=g.abbreviations.million,a=a/E):(O<E&&O>=L&&!R||R==="k")&&(v+=g.abbreviations.thousand,a=a/L)),o._.includes(h,"[.]")&&(p=!0,h=h.replace("[.]",".")),F=a.toString().split(".")[0],A=h.split(".")[1],C=h.indexOf(","),b=(h.split(".")[0].split(",")[0].match(/0/g)||[]).length,A?(o._.includes(A,"[")?(A=A.replace("]",""),A=A.split("["),S=o._.toFixed(a,A[0].length+A[1].length,c,A[1].length)):S=o._.toFixed(a,A.length,c),F=S.split(".")[0],o._.includes(S,".")?S=g.delimiters.decimal+S.split(".")[1]:S="",p&&Number(S.slice(1))===0&&(S="")):F=o._.toFixed(a,0,c),v&&!R&&Number(F)>=1e3&&v!==g.abbreviations.trillion)switch(F=String(Number(F)/1e3),v){case g.abbreviations.thousand:v=g.abbreviations.million;break;case g.abbreviations.million:v=g.abbreviations.billion;break;case g.abbreviations.billion:v=g.abbreviations.trillion;break}if(o._.includes(F,"-")&&(F=F.slice(1),w=!0),F.length<b)for(var f=b-F.length;f>0;f--)F="0"+F;return C>-1&&(F=F.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g.delimiters.thousands)),h.indexOf(".")===0&&(F=""),d=F+S+(v||""),u?d=(u&&w?"(":"")+d+(u&&w?")":""):D>=0?d=D===0?(w?"-":"+")+d:d+(w?"-":"+"):w&&(d="-"+d),d},stringToNumber:function(a){var h=i[n.currentLocale],c=a,g={thousand:3,million:6,billion:9,trillion:12},u,p,b,v;if(n.zeroFormat&&a===n.zeroFormat)p=0;else if(n.nullFormat&&a===n.nullFormat||!a.replace(/[^0-9]+/g,"").length)p=null;else{p=1,h.delimiters.decimal!=="."&&(a=a.replace(/\./g,"").replace(h.delimiters.decimal,"."));for(u in g)if(v=new RegExp("[^a-zA-Z]"+h.abbreviations[u]+"(?:\\)|(\\"+h.currency.symbol+")?(?:\\))?)?$"),c.match(v)){p*=Math.pow(10,g[u]);break}p*=(a.split("-").length+Math.min(a.split("(").length-1,a.split(")").length-1))%2?1:-1,a=a.replace(/[^0-9\.]+/g,""),p*=Number(a)}return p},isNaN:function(a){return typeof a=="number"&&isNaN(a)},includes:function(a,h){return a.indexOf(h)!==-1},insert:function(a,h,c){return a.slice(0,c)+h+a.slice(c)},reduce:function(a,h){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof h!="function")throw new TypeError(h+" is not a function");var c=Object(a),g=c.length>>>0,u=0,p;if(arguments.length===3)p=arguments[2];else{for(;u<g&&!(u in c);)u++;if(u>=g)throw new TypeError("Reduce of empty array with no initial value");p=c[u++]}for(;u<g;u++)u in c&&(p=h(p,c[u],u,c));return p},multiplier:function(a){var h=a.toString().split(".");return h.length<2?1:Math.pow(10,h[1].length)},correctionFactor:function(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(h,c){var g=t.multiplier(c);return h>g?h:g},1)},toFixed:function(a,h,c,g){var u=a.toString().split("."),p=h-(g||0),b,v,x,m;return u.length===2?b=Math.min(Math.max(u[1].length,p),h):b=p,x=Math.pow(10,b),m=(c(a+"e+"+b)/x).toFixed(b),g>h-b&&(v=new RegExp("\\.?0{1,"+(g-(h-b))+"}$"),m=m.replace(v,"")),m}},o.options=n,o.formats=e,o.locales=i,o.locale=function(a){return a&&(n.currentLocale=a.toLowerCase()),n.currentLocale},o.localeData=function(a){if(!a)return i[n.currentLocale];if(a=a.toLowerCase(),!i[a])throw new Error("Unknown locale : "+a);return i[a]},o.reset=function(){for(var a in r)n[a]=r[a]},o.zeroFormat=function(a){n.zeroFormat=typeof a=="string"?a:null},o.nullFormat=function(a){n.nullFormat=typeof a=="string"?a:null},o.defaultFormat=function(a){n.defaultFormat=typeof a=="string"?a:"0.0"},o.register=function(a,h,c){if(h=h.toLowerCase(),this[a+"s"][h])throw new TypeError(h+" "+a+" already registered.");return this[a+"s"][h]=c,c},o.validate=function(a,h){var c,g,u,p,b,v,x,m;if(typeof a!="string"&&(a+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",a)),a=a.trim(),a.match(/^\d+$/))return!0;if(a==="")return!1;try{x=o.localeData(h)}catch{x=o.localeData(o.locale())}return u=x.currency.symbol,b=x.abbreviations,c=x.delimiters.decimal,x.delimiters.thousands==="."?g="\\.":g=x.delimiters.thousands,m=a.match(/^[^\d]+/),m!==null&&(a=a.substr(1),m[0]!==u)||(m=a.match(/[^\d]+$/),m!==null&&(a=a.slice(0,-1),m[0]!==b.thousand&&m[0]!==b.million&&m[0]!==b.billion&&m[0]!==b.trillion))?!1:(v=new RegExp(g+"{2}"),a.match(/[^\d.,]/g)?!1:(p=a.split(c),p.length>2?!1:p.length<2?!!p[0].match(/^\d+.*\d$/)&&!p[0].match(v):p[0].length===1?!!p[0].match(/^\d+$/)&&!p[0].match(v)&&!!p[1].match(/^\d+$/):!!p[0].match(/^\d+.*\d$/)&&!p[0].match(v)&&!!p[1].match(/^\d+$/)))},o.fn=l.prototype={clone:function(){return o(this)},format:function(a,h){var c=this._value,g=a||n.defaultFormat,u,p,b;if(h=h||Math.round,c===0&&n.zeroFormat!==null)p=n.zeroFormat;else if(c===null&&n.nullFormat!==null)p=n.nullFormat;else{for(u in e)if(g.match(e[u].regexps.format)){b=e[u].format;break}b=b||o._.numberToFormat,p=b(c,g,h)}return p},value:function(){return this._value},input:function(){return this._input},set:function(a){return this._value=Number(a),this},add:function(a){var h=t.correctionFactor.call(null,this._value,a);function c(g,u,p,b){return g+Math.round(h*u)}return this._value=t.reduce([this._value,a],c,0)/h,this},subtract:function(a){var h=t.correctionFactor.call(null,this._value,a);function c(g,u,p,b){return g-Math.round(h*u)}return this._value=t.reduce([a],c,Math.round(this._value*h))/h,this},multiply:function(a){function h(c,g,u,p){var b=t.correctionFactor(c,g);return Math.round(c*b)*Math.round(g*b)/Math.round(b*b)}return this._value=t.reduce([this._value,a],h,1),this},divide:function(a){function h(c,g,u,p){var b=t.correctionFactor(c,g);return Math.round(c*b)/Math.round(g*b)}return this._value=t.reduce([this._value,a],h),this},difference:function(a){return Math.abs(o(this._value).subtract(a).value())}},o.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var h=a%10;return~~(a%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th"},currency:{symbol:"$"}}),function(){o.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(a,h,c){var g=o._.includes(h," BPS")?" ":"",u;return a=a*1e4,h=h.replace(/\s?BPS/,""),u=o._.numberToFormat(a,h,c),o._.includes(u,")")?(u=u.split(""),u.splice(-1,0,g+"BPS"),u=u.join("")):u=u+g+"BPS",u},unformat:function(a){return+(o._.stringToNumber(a)*1e-4).toFixed(15)}})}(),function(){var a={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},h={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},c=a.suffixes.concat(h.suffixes.filter(function(u){return a.suffixes.indexOf(u)<0})),g=c.join("|");g="("+g.replace("B","B(?!PS)")+")",o.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(g)},format:function(u,p,b){var v,x=o._.includes(p,"ib")?h:a,m=o._.includes(p," b")||o._.includes(p," ib")?" ":"",E,L,S;for(p=p.replace(/\s?i?b/,""),E=0;E<=x.suffixes.length;E++)if(L=Math.pow(x.base,E),S=Math.pow(x.base,E+1),u===null||u===0||u>=L&&u<S){m+=x.suffixes[E],L>0&&(u=u/L);break}return v=o._.numberToFormat(u,p,b),v+m},unformat:function(u){var p=o._.stringToNumber(u),b,v;if(p){for(b=a.suffixes.length-1;b>=0;b--){if(o._.includes(u,a.suffixes[b])){v=Math.pow(a.base,b);break}if(o._.includes(u,h.suffixes[b])){v=Math.pow(h.base,b);break}}p*=v||1}return p}})}(),function(){o.register("format","currency",{regexps:{format:/(\$)/},format:function(a,h,c){var g=o.locales[o.options.currentLocale],u={before:h.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:h.match(/([\+|\-|\)|\s|\$]*)$/)[0]},p,b,v;for(h=h.replace(/\s?\$\s?/,""),p=o._.numberToFormat(a,h,c),a>=0?(u.before=u.before.replace(/[\-\(]/,""),u.after=u.after.replace(/[\-\)]/,"")):a<0&&!o._.includes(u.before,"-")&&!o._.includes(u.before,"(")&&(u.before="-"+u.before),v=0;v<u.before.length;v++)switch(b=u.before[v],b){case"$":p=o._.insert(p,g.currency.symbol,v);break;case" ":p=o._.insert(p," ",v+g.currency.symbol.length-1);break}for(v=u.after.length-1;v>=0;v--)switch(b=u.after[v],b){case"$":p=v===u.after.length-1?p+g.currency.symbol:o._.insert(p,g.currency.symbol,-(u.after.length-(1+v)));break;case" ":p=v===u.after.length-1?p+" ":o._.insert(p," ",-(u.after.length-(1+v)+g.currency.symbol.length-1));break}return p}})}(),function(){o.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(a,h,c){var g,u=typeof a=="number"&&!o._.isNaN(a)?a.toExponential():"0e+0",p=u.split("e");return h=h.replace(/e[\+|\-]{1}0/,""),g=o._.numberToFormat(Number(p[0]),h,c),g+"e"+p[1]},unformat:function(a){var h=o._.includes(a,"e+")?a.split("e+"):a.split("e-"),c=Number(h[0]),g=Number(h[1]);g=o._.includes(a,"e-")?g*=-1:g;function u(p,b,v,x){var m=o._.correctionFactor(p,b),E=p*m*(b*m)/(m*m);return E}return o._.reduce([c,Math.pow(10,g)],u,1)}})}(),function(){o.register("format","ordinal",{regexps:{format:/(o)/},format:function(a,h,c){var g=o.locales[o.options.currentLocale],u,p=o._.includes(h," o")?" ":"";return h=h.replace(/\s?o/,""),p+=g.ordinal(a),u=o._.numberToFormat(a,h,c),u+p}})}(),function(){o.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(a,h,c){var g=o._.includes(h," %")?" ":"",u;return o.options.scalePercentBy100&&(a=a*100),h=h.replace(/\s?\%/,""),u=o._.numberToFormat(a,h,c),o._.includes(u,")")?(u=u.split(""),u.splice(-1,0,g+"%"),u=u.join("")):u=u+g+"%",u},unformat:function(a){var h=o._.stringToNumber(a);return o.options.scalePercentBy100?h*.01:h}})}(),function(){o.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(a,h,c){var g=Math.floor(a/60/60),u=Math.floor((a-g*60*60)/60),p=Math.round(a-g*60*60-u*60);return g+":"+(u<10?"0"+u:u)+":"+(p<10?"0"+p:p)},unformat:function(a){var h=a.split(":"),c=0;return h.length===3?(c=c+Number(h[0])*60*60,c=c+Number(h[1])*60,c=c+Number(h[2])):h.length===2&&(c=c+Number(h[0])*60,c=c+Number(h[1])),Number(c)}})}(),o})});var Ua=qe((Ya,Va)=>{"use strict";(function(o,t){typeof Ya=="object"&&typeof Va<"u"?Va.exports=t():typeof define=="function"&&define.amd?define(t):(o=o||self).RBush=t()})(Ya,function(){"use strict";function o(x,m,E,L,S){(function w(R,O,I,_,P){for(;_>I;){if(_-I>600){var F=_-I+1,A=O-I+1,D=Math.log(F),C=.5*Math.exp(2*D/3),d=.5*Math.sqrt(D*C*(F-C)/F)*(A-F/2<0?-1:1),f=Math.max(I,Math.floor(O-A*C/F+d)),y=Math.min(_,Math.floor(O+(F-A)*C/F+d));w(R,O,f,y,P)}var M=R[O],k=I,T=_;for(t(R,I,O),P(R[_],M)>0&&t(R,I,_);k<T;){for(t(R,k,T),k++,T--;P(R[k],M)<0;)k++;for(;P(R[T],M)>0;)T--}P(R[I],M)===0?t(R,I,T):t(R,++T,_),T<=O&&(I=T+1),O<=T&&(_=T-1)}})(x,m,E||0,L||x.length-1,S||s)}function t(x,m,E){var L=x[m];x[m]=x[E],x[E]=L}function s(x,m){return x<m?-1:x>m?1:0}var e=function(x){x===void 0&&(x=9),this._maxEntries=Math.max(4,x),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(x,m,E){if(!E)return m.indexOf(x);for(var L=0;L<m.length;L++)if(E(x,m[L]))return L;return-1}function r(x,m){n(x,0,x.children.length,m,x)}function n(x,m,E,L,S){S||(S=b(null)),S.minX=1/0,S.minY=1/0,S.maxX=-1/0,S.maxY=-1/0;for(var w=m;w<E;w++){var R=x.children[w];l(S,x.leaf?L(R):R)}return S}function l(x,m){return x.minX=Math.min(x.minX,m.minX),x.minY=Math.min(x.minY,m.minY),x.maxX=Math.max(x.maxX,m.maxX),x.maxY=Math.max(x.maxY,m.maxY),x}function a(x,m){return x.minX-m.minX}function h(x,m){return x.minY-m.minY}function c(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}function g(x){return x.maxX-x.minX+(x.maxY-x.minY)}function u(x,m){return x.minX<=m.minX&&x.minY<=m.minY&&m.maxX<=x.maxX&&m.maxY<=x.maxY}function p(x,m){return m.minX<=x.maxX&&m.minY<=x.maxY&&m.maxX>=x.minX&&m.maxY>=x.minY}function b(x){return{children:x,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(x,m,E,L,S){for(var w=[m,E];w.length;)if(!((E=w.pop())-(m=w.pop())<=L)){var R=m+Math.ceil((E-m)/L/2)*L;o(x,R,m,E,S),w.push(m,R,R,E)}}return e.prototype.all=function(){return this._all(this.data,[])},e.prototype.search=function(x){var m=this.data,E=[];if(!p(x,m))return E;for(var L=this.toBBox,S=[];m;){for(var w=0;w<m.children.length;w++){var R=m.children[w],O=m.leaf?L(R):R;p(x,O)&&(m.leaf?E.push(R):u(x,O)?this._all(R,E):S.push(R))}m=S.pop()}return E},e.prototype.collides=function(x){var m=this.data;if(!p(x,m))return!1;for(var E=[];m;){for(var L=0;L<m.children.length;L++){var S=m.children[L],w=m.leaf?this.toBBox(S):S;if(p(x,w)){if(m.leaf||u(x,w))return!0;E.push(S)}}m=E.pop()}return!1},e.prototype.load=function(x){if(!x||!x.length)return this;if(x.length<this._minEntries){for(var m=0;m<x.length;m++)this.insert(x[m]);return this}var E=this._build(x.slice(),0,x.length-1,0);if(this.data.children.length)if(this.data.height===E.height)this._splitRoot(this.data,E);else{if(this.data.height<E.height){var L=this.data;this.data=E,E=L}this._insert(E,this.data.height-E.height-1,!0)}else this.data=E;return this},e.prototype.insert=function(x){return x&&this._insert(x,this.data.height-1),this},e.prototype.clear=function(){return this.data=b([]),this},e.prototype.remove=function(x,m){if(!x)return this;for(var E,L,S,w=this.data,R=this.toBBox(x),O=[],I=[];w||O.length;){if(w||(w=O.pop(),L=O[O.length-1],E=I.pop(),S=!0),w.leaf){var _=i(x,w.children,m);if(_!==-1)return w.children.splice(_,1),O.push(w),this._condense(O),this}S||w.leaf||!u(w,R)?L?(E++,w=L.children[E],S=!1):w=null:(O.push(w),I.push(E),E=0,L=w,w=w.children[0])}return this},e.prototype.toBBox=function(x){return x},e.prototype.compareMinX=function(x,m){return x.minX-m.minX},e.prototype.compareMinY=function(x,m){return x.minY-m.minY},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(x){return this.data=x,this},e.prototype._all=function(x,m){for(var E=[];x;)x.leaf?m.push.apply(m,x.children):E.push.apply(E,x.children),x=E.pop();return m},e.prototype._build=function(x,m,E,L){var S,w=E-m+1,R=this._maxEntries;if(w<=R)return r(S=b(x.slice(m,E+1)),this.toBBox),S;L||(L=Math.ceil(Math.log(w)/Math.log(R)),R=Math.ceil(w/Math.pow(R,L-1))),(S=b([])).leaf=!1,S.height=L;var O=Math.ceil(w/R),I=O*Math.ceil(Math.sqrt(R));v(x,m,E,I,this.compareMinX);for(var _=m;_<=E;_+=I){var P=Math.min(_+I-1,E);v(x,_,P,O,this.compareMinY);for(var F=_;F<=P;F+=O){var A=Math.min(F+O-1,P);S.children.push(this._build(x,F,A,L-1))}}return r(S,this.toBBox),S},e.prototype._chooseSubtree=function(x,m,E,L){for(;L.push(m),!m.leaf&&L.length-1!==E;){for(var S=1/0,w=1/0,R=void 0,O=0;O<m.children.length;O++){var I=m.children[O],_=c(I),P=(F=x,A=I,(Math.max(A.maxX,F.maxX)-Math.min(A.minX,F.minX))*(Math.max(A.maxY,F.maxY)-Math.min(A.minY,F.minY))-_);P<w?(w=P,S=_<S?_:S,R=I):P===w&&_<S&&(S=_,R=I)}m=R||m.children[0]}var F,A;return m},e.prototype._insert=function(x,m,E){var L=E?x:this.toBBox(x),S=[],w=this._chooseSubtree(L,this.data,m,S);for(w.children.push(x),l(w,L);m>=0&&S[m].children.length>this._maxEntries;)this._split(S,m),m--;this._adjustParentBBoxes(L,S,m)},e.prototype._split=function(x,m){var E=x[m],L=E.children.length,S=this._minEntries;this._chooseSplitAxis(E,S,L);var w=this._chooseSplitIndex(E,S,L),R=b(E.children.splice(w,E.children.length-w));R.height=E.height,R.leaf=E.leaf,r(E,this.toBBox),r(R,this.toBBox),m?x[m-1].children.push(R):this._splitRoot(E,R)},e.prototype._splitRoot=function(x,m){this.data=b([x,m]),this.data.height=x.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},e.prototype._chooseSplitIndex=function(x,m,E){for(var L,S,w,R,O,I,_,P=1/0,F=1/0,A=m;A<=E-m;A++){var D=n(x,0,A,this.toBBox),C=n(x,A,E,this.toBBox),d=(S=D,w=C,R=void 0,O=void 0,I=void 0,_=void 0,R=Math.max(S.minX,w.minX),O=Math.max(S.minY,w.minY),I=Math.min(S.maxX,w.maxX),_=Math.min(S.maxY,w.maxY),Math.max(0,I-R)*Math.max(0,_-O)),f=c(D)+c(C);d<P?(P=d,L=A,F=f<F?f:F):d===P&&f<F&&(F=f,L=A)}return L||E-m},e.prototype._chooseSplitAxis=function(x,m,E){var L=x.leaf?this.compareMinX:a,S=x.leaf?this.compareMinY:h;this._allDistMargin(x,m,E,L)<this._allDistMargin(x,m,E,S)&&x.children.sort(L)},e.prototype._allDistMargin=function(x,m,E,L){x.children.sort(L);for(var S=this.toBBox,w=n(x,0,m,S),R=n(x,E-m,E,S),O=g(w)+g(R),I=m;I<E-m;I++){var _=x.children[I];l(w,x.leaf?S(_):_),O+=g(w)}for(var P=E-m-1;P>=m;P--){var F=x.children[P];l(R,x.leaf?S(F):F),O+=g(R)}return O},e.prototype._adjustParentBBoxes=function(x,m,E){for(var L=E;L>=0;L--)l(m[L],x)},e.prototype._condense=function(x){for(var m=x.length-1,E=void 0;m>=0;m--)x[m].children.length===0?m>0?(E=x[m-1].children).splice(E.indexOf(x[m]),1):this.clear():r(x[m],this.toBBox)},e})});var wu=qe((cT,jn)=>{"use strict";(function(o){typeof jn=="object"&&jn.exports?(o.default=o,jn.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/map",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function s(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}s(t,"Core/Axis/Color/ColorAxisComposition.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,i){var r;let{parse:n}=e,{addEvent:l,extend:a,merge:h,pick:c,splat:g}=i;return function(u){let p;function b(){let{userOptions:I}=this;this.colorAxis=[],I.colorAxis&&(I.colorAxis=g(I.colorAxis),I.colorAxis.map(_=>new p(this,_)))}function v(I){let _=this.chart.colorAxis||[],P=C=>{let d=I.allItems.indexOf(C);d!==-1&&(this.destroyItem(I.allItems[d]),I.allItems.splice(d,1))},F=[],A,D;for(_.forEach(function(C){(A=C.options)&&A.showInLegend&&(A.dataClasses&&A.visible?F=F.concat(C.getDataClassLegendSymbols()):A.visible&&F.push(C),C.series.forEach(function(d){(!d.options.showInLegend||A.dataClasses)&&(d.options.legendType==="point"?d.points.forEach(function(f){P(f)}):P(d))}))}),D=F.length;D--;)I.allItems.unshift(F[D])}function x(I){I.visible&&I.item.legendColor&&I.item.legendItem.symbol.attr({fill:I.item.legendColor})}function m(I){this.chart.colorAxis?.forEach(_=>{_.update({},I.redraw)})}function E(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function L(){let I=this.axisTypes;I?I.indexOf("colorAxis")===-1&&I.push("colorAxis"):this.axisTypes=["colorAxis"]}function S(I){let _=this,P=I?"show":"hide";_.visible=_.options.visible=!!I,["graphic","dataLabel"].forEach(function(F){_[F]&&_[F][P]()}),this.series.buildKDTree()}function w(){let I=this,_=this.data.length?this.data:this.points,P=this.options.nullColor,F=this.colorAxis,A=this.colorKey;_.forEach(D=>{let C=D.getNestedProperty(A),d=D.options.color||(D.isNull||D.value===null?P:F&&C!==void 0?F.toColor(C,D):D.color||I.color);d&&D.color!==d&&(D.color=d,I.options.legendType==="point"&&D.legendItem&&D.legendItem.label&&I.chart.legend.colorizeItem(D,D.visible))})}function R(){this.elem.attr("fill",n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}function O(){this.elem.attr("stroke",n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}u.compose=function(I,_,P,F,A){let D=_.prototype,C=P.prototype,d=A.prototype;D.collectionsWithUpdate.includes("colorAxis")||(p=I,D.collectionsWithUpdate.push("colorAxis"),D.collectionsWithInit.colorAxis=[D.addColorAxis],l(_,"afterGetAxes",b),function(f){let y=f.prototype.createAxis;f.prototype.createAxis=function(M,k){if(M!=="colorAxis")return y.apply(this,arguments);let T=new p(this,h(k.axis,{index:this[M].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(z=>{z.series=[]}),this.series.forEach(z=>{z.bindAxes(),z.isDirtyData=!0}),c(k.redraw,!0)&&this.redraw(k.animation),T}}(_),C.fillSetter=R,C.strokeSetter=O,l(F,"afterGetAllItems",v),l(F,"afterColorizeItem",x),l(F,"afterUpdate",m),a(d,{optionalAxis:"colorAxis",translateColors:w}),a(d.pointClass.prototype,{setVisible:S}),l(A,"afterTranslate",E,{order:1}),l(A,"bindAxes",L))},u.pointSetVisible=S}(r||(r={})),r}),s(t,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0}}),s(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,i){var r,n;let{parse:l}=e,{merge:a}=i;return(n=r||(r={})).initDataClasses=function(h){let c=this.chart,g=this.legendItem=this.legendItem||{},u=this.options,p=h.dataClasses||[],b,v,x=c.options.chart.colorCount,m=0,E;this.dataClasses=v=[],g.labels=[];for(let L=0,S=p.length;L<S;++L)b=a(b=p[L]),v.push(b),(c.styledMode||!b.color)&&(u.dataClassColor==="category"?(c.styledMode||(x=(E=c.options.colors||[]).length,b.color=E[m]),b.colorIndex=m,++m===x&&(m=0)):b.color=l(u.minColor).tweenTo(l(u.maxColor),S<2?.5:L/(S-1)))},n.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let g=0,u=c.length;g<u;++g)c[g].color=l(c[g][1])},n.normalizedValue=function(h){let c=this.max||0,g=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-g||1)},n.toColor=function(h,c){let g,u,p,b,v,x,m=this.dataClasses,E=this.stops;if(m){for(x=m.length;x--;)if(u=(v=m[x]).from,p=v.to,(u===void 0||h>=u)&&(p===void 0||h<=p)){b=v.color,c&&(c.dataClass=x,c.colorIndex=v.colorIndex);break}}else{for(g=this.normalizedValue(h),x=E.length;x--&&!(g>E[x][0]););u=E[x]||E[x+1],g=1-((p=E[x+1]||u)[0]-g)/(p[0]-u[0]||1),b=u.color.tweenTo(p.color,g)}return b},r}),s(t,"Core/Axis/Color/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Axis/Color/ColorAxisComposition.js"],t["Core/Axis/Color/ColorAxisDefaults.js"],t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Defaults.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c){let{defaultOptions:g}=l,{series:u}=h,{defined:p,extend:b,fireEvent:v,isArray:x,isNumber:m,merge:E,pick:L,relativeLength:S}=c;g.colorAxis=E(g.xAxis,r);class w extends e{static compose(O,I,_,P){i.compose(w,O,I,_,P)}constructor(O,I){super(O,I),this.coll="colorAxis",this.visible=!0,this.init(O,I)}init(O,I){let _=O.options.legend||{},P=I.layout?I.layout!=="vertical":_.layout!=="vertical";this.side=I.side||P?2:1,this.reversed=I.reversed||!P,this.opposite=!P,super.init(O,I,"colorAxis"),this.userOptions=I,x(O.userOptions.colorAxis)&&(O.userOptions.colorAxis[this.index]=I),I.dataClasses&&this.initDataClasses(I),this.initStops(),this.horiz=P,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(O){let I=E(g.colorAxis,O,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&O.visible!==!1});super.setOptions(I),this.options.crosshair=this.options.marker}setAxisSize(){let O=this.chart,I=this.legendItem?.symbol,{width:_,height:P}=this.getSize();I&&(this.left=+I.attr("x"),this.top=+I.attr("y"),this.width=_=+I.attr("width"),this.height=P=+I.attr("height"),this.right=O.chartWidth-this.left-_,this.bottom=O.chartHeight-this.top-P,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?_:P)||w.defaultLegendLength}getOffset(){let O=this.legendItem?.group,I=this.chart.axisOffset[this.side];if(O){this.axisParent=O,super.getOffset();let _=this.chart.legend;_.allItems.forEach(function(P){P instanceof w&&P.drawLegendSymbol(_,P)}),_.render(),this.chart.getMargins(!0),this.chart.series.some(P=>P.isDrilling)||(this.isDirty=!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=I}}setLegendColor(){let O=this.horiz,I=this.reversed,_=I?1:0,P=I?0:1,F=O?[_,0,P,0]:[0,P,0,_];this.legendColor={linearGradient:{x1:F[0],y1:F[1],x2:F[2],y2:F[3]},stops:this.stops}}drawLegendSymbol(O,I){let _=I.legendItem||{},P=O.padding,F=O.options,A=this.options.labels,D=L(F.itemDistance,10),C=this.horiz,{width:d,height:f}=this.getSize(),y=L(F.labelPadding,C?16:30);this.setLegendColor(),_.symbol||(_.symbol=this.chart.renderer.symbol("roundedRect").attr({r:F.symbolRadius??3,zIndex:1}).add(_.group)),_.symbol.attr({x:0,y:(O.baseline||0)-11,width:d,height:f}),_.labelWidth=d+P+(C?D:L(A.x,A.distance)+(this.maxLabelLength||0)),_.labelHeight=f+P+(C?y:0)}setState(O){this.series.forEach(function(I){I.setState(O)})}setVisible(){}getSeriesExtremes(){let O=this.series,I,_,P,F,A,D,C=O.length,d,f;for(this.dataMin=1/0,this.dataMax=-1/0;C--;){if(_=(D=O[C]).colorKey=L(D.options.colorKey,D.colorKey,D.pointValKey,D.zoneAxis,"y"),F=D.pointArrayMap,A=D[_+"Min"]&&D[_+"Max"],D[_+"Data"])I=D[_+"Data"];else if(F){if(I=[],P=F.indexOf(_),d=D.yData,P>=0&&d)for(f=0;f<d.length;f++)I.push(L(d[f][P],d[f]))}else I=D.yData;if(A)D.minColorValue=D[_+"Min"],D.maxColorValue=D[_+"Max"];else{let y=u.prototype.getExtremes.call(D,I);D.minColorValue=y.dataMin,D.maxColorValue=y.dataMax}p(D.minColorValue)&&p(D.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,D.minColorValue),this.dataMax=Math.max(this.dataMax,D.maxColorValue)),A||u.prototype.applyExtremes.call(D)}}drawCrosshair(O,I){let _,P=this.legendItem||{},F=I&&I.plotX,A=I&&I.plotY,D=this.pos,C=this.len;I&&((_=this.toPixels(I.getNestedProperty(I.series.colorKey)))<D?_=D-2:_>D+C&&(_=D+C+2),I.plotX=_,I.plotY=this.len-_,super.drawCrosshair(O,I),I.plotX=F,I.plotY=A,this.cross&&!this.cross.addedToColorAxis&&P.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(P.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||typeof this.crosshair!="object"||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(O){let I=this.left,_=O.translatedValue,P=this.top;return m(_)?this.horiz?[["M",_-4,P-6],["L",_+4,P-6],["L",_,P],["Z"]]:[["M",I,_],["L",I-6,_+6],["L",I-6,_-6],["Z"]]:super.getPlotLinePath(O)}update(O,I){let _=this.chart.legend;this.series.forEach(P=>{P.isDirtyData=!0}),(O.dataClasses&&_.allItems||this.dataClasses)&&this.destroyItems(),super.update(O,I),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),_.colorizeItem(this,!0))}destroyItems(){let O=this.chart,I=this.legendItem||{};if(I.label)O.legend.destroyItem(this);else if(I.labels)for(let _ of I.labels)O.legend.destroyItem(_);O.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(O){this.destroyItems(),super.remove(O)}getDataClassLegendSymbols(){let O,I=this,_=I.chart,P=I.legendItem&&I.legendItem.labels||[],F=_.options.legend,A=L(F.valueDecimals,-1),D=L(F.valueSuffix,""),C=d=>I.series.reduce((f,y)=>(f.push(...y.points.filter(M=>M.dataClass===d)),f),[]);return P.length||I.dataClasses.forEach((d,f)=>{let y=d.from,M=d.to,{numberFormatter:k}=_,T=!0;O="",y===void 0?O="< ":M===void 0&&(O="> "),y!==void 0&&(O+=k(y,A)+D),y!==void 0&&M!==void 0&&(O+=" - "),M!==void 0&&(O+=k(M,A)+D),P.push(b({chart:_,name:O,options:{},drawLegendSymbol:a.rectangle,visible:!0,isDataClass:!0,setState:z=>{for(let N of C(f))N.setState(z)},setVisible:function(){this.visible=T=I.visible=!T;let z=[];for(let N of C(f))N.setVisible(T),N.hiddenInDataClass=!T,z.indexOf(N.series)===-1&&z.push(N.series);_.legend.colorizeItem(this,T),z.forEach(N=>{v(N,"afterDataClassLegendClick")})}},d))}),P}getSize(){let{chart:O,horiz:I}=this,{height:_,width:P}=this.options,{legend:F}=O.options;return{width:L(p(P)?S(P,O.chartWidth):void 0,F?.symbolWidth,I?w.defaultLegendLength:12),height:L(p(_)?S(_,O.chartHeight):void 0,F?.symbolHeight,I?12:w.defaultLegendLength)}}}return w.defaultLegendLength=200,w.keepProps=["legendItem"],b(w.prototype,n),Array.prototype.push.apply(e.keepProps,w.keepProps),w}),s(t,"masters/modules/coloraxis.src.js",[t["Core/Globals.js"],t["Core/Axis/Color/ColorAxis.js"]],function(e,i){return e.ColorAxis=e.ColorAxis||i,e.ColorAxis.compose(e.Chart,e.Fx,e.Legend,e.Series),e}),s(t,"Maps/MapNavigationDefaults.js",[],function(){return{lang:{zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation:{buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}}}),s(t,"Maps/MapPointer.js",[t["Core/Utilities.js"]],function(e){var i;let{defined:r,extend:n,pick:l,wrap:a}=e;return function(h){let c,g=0;function u(x){let m=this.chart;x=this.normalize(x),m.options.mapNavigation.enableDoubleClickZoomTo?m.pointer.inClass(x.target,"highcharts-tracker")&&m.hoverPoint&&m.hoverPoint.zoomTo():m.isInsidePlot(x.chartX-m.plotLeft,x.chartY-m.plotTop)&&m.mapZoom(.5,void 0,void 0,x.chartX,x.chartY)}function p(x){let m=this.chart,E=r((x=this.normalize(x)).wheelDelta)&&-x.wheelDelta/120||x.deltaY||x.detail;Math.abs(E)>=1&&(g+=Math.abs(E),c&&clearTimeout(c),c=setTimeout(()=>{g=0},50)),g<10&&m.isInsidePlot(x.chartX-m.plotLeft,x.chartY-m.plotTop)&&m.mapView&&m.mapView.zoomBy(-((m.options.mapNavigation.mouseWheelSensitivity-1)*E),void 0,[x.chartX,x.chartY],!(1>Math.abs(E))&&void 0)}function b(x,m,E){let L=this.chart;if(m=x.call(this,m,E),L&&L.mapView){let S=L.mapView.pixelsToLonLat({x:m.chartX-L.plotLeft,y:m.chartY-L.plotTop});S&&n(m,S)}return m}function v(x){let m=this.chart.options.mapNavigation;m&&l(m.enableTouchZoom,m.enabled)&&(this.chart.zooming.pinchType="xy"),x.apply(this,[].slice.call(arguments,1))}h.compose=function(x){let m=x.prototype;m.onContainerDblClick||(n(m,{onContainerDblClick:u,onContainerMouseWheel:p}),a(m,"normalize",b),a(m,"zoomOption",v))}}(i||(i={})),i}),s(t,"Maps/MapSymbols.js",[],function(){let e;function i(n,l,a,h,c){if(c){let g=c?.r||0;c.brBoxY=l-g,c.brBoxHeight=h+g}return e.roundedRect(n,l,a,h,c)}function r(n,l,a,h,c){if(c){let g=c?.r||0;c.brBoxHeight=h+g}return e.roundedRect(n,l,a,h,c)}return{compose:function(n){(e=n.prototype.symbols).bottombutton=i,e.topbutton=r}}}),s(t,"Maps/MapNavigation.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Maps/MapNavigationDefaults.js"],t["Maps/MapPointer.js"],t["Maps/MapSymbols.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{setOptions:h}=e,{composed:c}=i,{addEvent:g,extend:u,merge:p,objectEach:b,pick:v,pushUnique:x}=a;function m(L){L&&(L.preventDefault&&L.preventDefault(),L.stopPropagation&&L.stopPropagation(),L.cancelBubble=!0)}class E{static compose(S,w,R){n.compose(w),l.compose(R),x(c,"Map.Navigation")&&(g(S,"beforeRender",function(){this.mapNavigation=new E(this),this.mapNavigation.update()}),h(r))}constructor(S){this.chart=S,this.navButtons=[]}update(S){let w=this,R=w.chart,O=w.navButtons,I=function(P){this.handler.call(R,P),m(P)},_=R.options.mapNavigation;for(S&&(_=R.options.mapNavigation=p(R.options.mapNavigation,S));O.length;)O.pop().destroy();if(!R.renderer.forExport&&v(_.enableButtons,_.enabled)){w.navButtonsGroup||(w.navButtonsGroup=R.renderer.g().attr({zIndex:7}).add()),b(_.buttons,(F,A)=>{let D={padding:(F=p(_.buttonOptions,F)).padding};!R.styledMode&&F.theme&&(u(D,F.theme),D.style=p(F.theme.style,F.style));let{text:C,width:d=0,height:f=0,padding:y=0}=F,M=R.renderer.button(C!=="+"&&C!=="-"&&C||"",0,0,I,D,void 0,void 0,void 0,A==="zoomIn"?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[A]).attr({width:d,height:f,title:R.options.lang[A],zIndex:5}).add(w.navButtonsGroup);if(C==="+"||C==="-"){let k=d+1,T=[["M",y+3,y+f/2],["L",y+k-3,y+f/2]];C==="+"&&T.push(["M",y+k/2,y+3],["L",y+k/2,y+f-3]),R.renderer.path(T).addClass("highcharts-button-symbol").attr(R.styledMode?{}:{stroke:F.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(M)}if(M.handler=F.onclick,g(M.element,"dblclick",m),O.push(M),u(F,{width:M.width,height:2*(M.height||0)}),R.hasLoaded)M.align(F,!1,F.alignTo);else{let k=g(R,"load",()=>{M.element&&M.align(F,!1,F.alignTo),k()})}});let P=(F,A)=>!(A.x>=F.x+F.width||A.x+A.width<=F.x||A.y>=F.y+F.height||A.y+A.height<=F.y);R.hasLoaded||g(R,"render",function(){let F=R.exportingGroup&&R.exportingGroup.getBBox();if(F){let A=w.navButtonsGroup.getBBox();if(P(F,A)){let D=-A.y-A.height+F.y-5,C=F.y+F.height-A.y+5,d=_.buttonOptions&&_.buttonOptions.verticalAlign;w.navButtonsGroup.attr({translateY:d==="bottom"?D:C})}}})}this.updateEvents(_)}updateEvents(S){let w=this.chart;v(S.enableDoubleClickZoom,S.enabled)||S.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||g(w.container,"dblclick",function(R){w.pointer.onContainerDblClick(R)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),v(S.enableMouseWheelZoom,S.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||g(w.container,"wheel",function(R){return w.pointer.inClass(R.target,"highcharts-no-mousewheel")||(w.pointer.onContainerMouseWheel(R),m(R)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}}return E}),s(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(e,i,r){var n;let{column:{prototype:l}}=e.seriesTypes,{addEvent:a,defined:h}=r;return function(c){function g(u){let p=this.series,b=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new i(b,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),u?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${b.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(u){let p={};return h(u.color)&&(!u.state||u.state==="normal")&&(p[this.colorProp||"fill"]=u.color),p},pointAttribs:l.pointAttribs},c.compose=function(u){return a(u.prototype.pointClass,"afterSetState",g),u}}(n||(n={})),n}),s(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(e,i,r,n){var l;let{getOptions:a}=i,{isNumber:h,merge:c,pick:g}=n;class u extends e{init(b,v){let x=a().credits,m=c({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:g(x.mapText,' \xA9 <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:g(x.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},b);super.init(m,v)}mapZoom(b,v,x,m,E){this.mapView&&(h(b)&&(b=Math.log(b)/Math.log(.5)),this.mapView.zoomBy(b,h(v)&&h(x)?this.mapView.projection.inverse([v,x]):void 0,h(m)&&h(E)?[m,E]:void 0))}update(b){b.chart&&"map"in b.chart&&this.mapView?.recommendMapView(this,[b.chart.map,...(this.options.series||[]).map(v=>v.mapData)],!0),super.update.apply(this,arguments)}}return(l=u||(u={})).maps={},l.mapChart=function(p,b,v){return new l(p,b,v)},l.splitPath=function(p){let b;return b=typeof p=="string"?(p=p.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(v=>/[A-Za-z]/.test(v)?v:parseFloat(v)):p,r.prototype.pathToSegments(b)},u}),s(t,"Maps/MapUtilities.js",[],function(){return{boundsFromPath:function(e){let i=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE,l=Number.MAX_VALUE,a;if(e.forEach(h=>{let c=h[h.length-2],g=h[h.length-1];typeof c=="number"&&typeof g=="number"&&(r=Math.min(r,c),i=Math.max(i,c),l=Math.min(l,g),n=Math.max(n,g),a=!0)}),a)return{x1:r,y1:l,x2:i,y2:n}},pointInPolygon:function({x:e,y:i},r){let n,l,a=!1;for(n=0,l=r.length-1;n<r.length;l=n++)r[n][1]>i!=r[l][1]>i&&e<(r[l][0]-r[n][0])*(i-r[n][1])/(r[l][1]-r[n][1])+r[n][0]&&(a=!a);return a}}}),s(t,"Series/Map/MapPoint.js",[t["Series/ColorMapComposition.js"],t["Maps/MapUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{boundsFromPath:l}=i,a=r.seriesTypes.scatter.prototype.pointClass,{extend:h,isNumber:c,pick:g}=n;class u extends a{static getProjectedPath(b,v){return b.projectedPath||(v&&b.geometry?(v.hasCoordinates=!0,b.projectedPath=v.path(b.geometry)):b.projectedPath=b.path),b.projectedPath||[]}applyOptions(b,v){let x=this.series,m=super.applyOptions(b,v),E=x.joinBy;if(x.mapData&&x.mapMap){let L=E[1],S=super.getNestedProperty(L),w=S!==void 0&&x.mapMap[S];w?h(m,qi(xe({},w),{name:m.name??w.name})):x.pointArrayMap.indexOf("value")!==-1&&(m.value=m.value||null)}return m}getProjectedBounds(b){let v=l(u.getProjectedPath(this,b)),x=this.properties,m=this.series.chart.mapView;if(v){let E=x&&x["hc-middle-lon"],L=x&&x["hc-middle-lat"];if(m&&c(E)&&c(L)){let S=b.forward([E,L]);v.midX=S[0],v.midY=S[1]}else{let S=x&&x["hc-middle-x"],w=x&&x["hc-middle-y"];v.midX=v.x1+(v.x2-v.x1)*g(this.middleX,c(S)?S:.5);let R=g(this.middleY,c(w)?w:.5);this.geometry||(R=1-R),v.midY=v.y2-(v.y2-v.y1)*R}return v}}onMouseOver(b){n.clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,b):this.series.onMouseOut()}setVisible(b){this.visible=this.options.visible=!!b,this.dataLabel&&this.dataLabel[b?"show":"hide"](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(b){let v=this.series.chart,x=v.mapView,m=this.bounds;if(x&&m){let E=c(this.insetIndex)&&x.insets[this.insetIndex];if(E){let L=E.projectedUnitsToPixels({x:m.x1,y:m.y1}),S=E.projectedUnitsToPixels({x:m.x2,y:m.y2}),w=x.pixelsToProjectedUnits({x:L.x,y:L.y}),R=x.pixelsToProjectedUnits({x:S.x,y:S.y});m={x1:w.x,y1:w.y,x2:R.x,y2:R.y}}x.fitToBounds(m,void 0,!1),this.series.isDirty=!0,v.redraw(b)}}}return h(u.prototype,{dataLabelOnNull:e.pointMembers.dataLabelOnNull,moveToTopOnHover:e.pointMembers.moveToTopOnHover,isValid:e.pointMembers.isValid}),u}),s(t,"Series/Map/MapSeriesDefaults.js",[t["Core/Utilities.js"]],function(e){let{isNumber:i}=e;return{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){let{numberFormatter:r}=this.series.chart,{value:n}=this.point;return i(n)?r(n,-1):this.point.name},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}}),s(t,"Maps/MapViewDefaults.js",[],function(){return{center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}}}),s(t,"Maps/GeoJSONComposition.js",[t["Core/Globals.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(e,i,r){var n;let{win:l}=e,{format:a}=i,{error:h,extend:c,merge:g,wrap:u}=r;return function(p){function b(S){return this.mapView&&this.mapView.lonLatToProjectedUnits(S)}function v(S){return this.mapView&&this.mapView.projectedUnitsToLonLat(S)}function x(S,w){let R=this.options.chart.proj4||l.proj4;if(!R){h(21,!1,this);return}let{jsonmarginX:O=0,jsonmarginY:I=0,jsonres:_=1,scale:P=1,xoffset:F=0,xpan:A=0,yoffset:D=0,ypan:C=0}=w,d=R(w.crs,[S.lon,S.lat]),f=w.cosAngle||w.rotation&&Math.cos(w.rotation),y=w.sinAngle||w.rotation&&Math.sin(w.rotation),M=w.rotation?[d[0]*f+d[1]*y,-d[0]*y+d[1]*f]:d;return{x:((M[0]-F)*P+A)*_+O,y:-(((D-M[1])*P+C)*_-I)}}function m(S,w){let R=this.options.chart.proj4||l.proj4;if(!R){h(21,!1,this);return}if(S.y===null)return;let{jsonmarginX:O=0,jsonmarginY:I=0,jsonres:_=1,scale:P=1,xoffset:F=0,xpan:A=0,yoffset:D=0,ypan:C=0}=w,d={x:((S.x-O)/_-A)/P+F,y:((S.y-I)/_+C)/P+D},f=w.cosAngle||w.rotation&&Math.cos(w.rotation),y=w.sinAngle||w.rotation&&Math.sin(w.rotation),M=R(w.crs,"WGS84",w.rotation?{x:d.x*f+-(d.y*y),y:d.x*y+d.y*f}:d);return{lat:M.y,lon:M.x}}function E(S,w){w||(w=Object.keys(S.objects)[0]);let R=S.objects[w];if(R["hc-decoded-geojson"]&&R["hc-decoded-geojson"].title===S.title)return R["hc-decoded-geojson"];let O=S.arcs;if(S.transform){let A,D,C,d=S.arcs,{scale:f,translate:y}=S.transform;O=[];for(let M=0,k=d.length;M<k;++M){let T=d[M];O.push(A=[]),D=0,C=0;for(let z=0,N=T.length;z<N;++z)A.push([(D+=T[z][0])*f[0]+y[0],(C+=T[z][1])*f[1]+y[1]])}}let I=A=>typeof A[0]=="number"?A.reduce((D,C,d)=>{let f=C<0?O[~C]:O[C];return C<0?(f=f.slice(0,d===0?f.length:f.length-1)).reverse():d&&(f=f.slice(1)),D.concat(f)},[]):A.map(I),_=R.geometries,P=[];for(let A=0,D=_.length;A<D;++A)P.push({type:"Feature",properties:_[A].properties,geometry:{type:_[A].type,coordinates:_[A].coordinates||I(_[A].arcs)}});let F={type:"FeatureCollection",copyright:S.copyright,copyrightShort:S.copyrightShort,copyrightUrl:S.copyrightUrl,features:P,"hc-recommended-mapview":R["hc-recommended-mapview"],bbox:S.bbox,title:S.title};return R["hc-decoded-geojson"]=F,F}function L(S,w){w=g(!0,this.options.credits,w),this.mapCredits&&(w.href=void 0),S.call(this,w),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}p.compose=function(S){let w=S.prototype;w.transformFromLatLon||(w.fromLatLonToPoint=b,w.fromPointToLatLon=v,w.transformFromLatLon=x,w.transformToLatLon=m,u(w,"addCredits",L))},p.geojson=function(S,w="map",R){let O=[],I=S.type==="Topology"?E(S):S,_=I.features;for(let P=0,F=_.length;P<F;++P){let A,D=_[P],C=D.geometry||{},d=C.type,f=C.coordinates,y=D.properties;if((w==="map"||w==="mapbubble")&&(d==="Polygon"||d==="MultiPolygon")?f.length&&(A={geometry:{coordinates:f,type:d}}):w==="mapline"&&(d==="LineString"||d==="MultiLineString")?f.length&&(A={geometry:{coordinates:f,type:d}}):w==="mappoint"&&d==="Point"&&f.length&&(A={geometry:{coordinates:f,type:d}}),A){let M=y&&(y.name||y.NAME),k=y&&y.lon,T=y&&y.lat;O.push(c(A,{lat:typeof T=="number"?T:void 0,lon:typeof k=="number"?k:void 0,name:typeof M=="string"?M:void 0,properties:y}))}}return R&&I.copyrightShort&&(R.chart.mapCredits=a(R.chart.options.credits?.mapText,{geojson:I}),R.chart.mapCreditsFull=a(R.chart.options.credits?.mapTextFull,{geojson:I})),O},p.topo2geo=E}(n||(n={})),n}),s(t,"Core/Geometry/PolygonClip.js",[],function(){function e(n,l,a=!0){let h=l[l.length-1],c,g,u,p=n;for(let b=0;b<l.length;b++){let v=p;c=l[b],p=[],g=a?v[v.length-1]:v[0];for(let x=0;x<v.length;x++)i(h,c,u=v[x])?(i(h,c,g)||p.push(r(h,c,g,u)),p.push(u)):i(h,c,g)&&p.push(r(h,c,g,u)),g=u;h=c}return p}function i(n,l,a){return(l[0]-n[0])*(a[1]-n[1])>(l[1]-n[1])*(a[0]-n[0])}function r(n,l,a,h){let c=[n[0]-l[0],n[1]-l[1]],g=[a[0]-h[0],a[1]-h[1]],u=n[0]*l[1]-n[1]*l[0],p=a[0]*h[1]-a[1]*h[0],b=1/(c[0]*g[1]-c[1]*g[0]),v=[(u*g[0]-p*c[0])*b,(u*g[1]-p*c[1])*b];return v.isIntersection=!0,v}return{clipLineString:function(n,l){let a=[],h=e(n,l,!1);for(let c=1;c<h.length;c++)h[c].isIntersection&&h[c-1].isIntersection&&(a.push(h.splice(0,c)),c=0),c===h.length-1&&a.push(h);return a},clipPolygon:e}}),s(t,"Maps/Projections/LambertConformalConic.js",[],function(){let e=Math.sign||(l=>l===0?0:l>0?1:-1),i=Math.PI/180,r=Math.PI/2,n=l=>Math.tan((r+l)/2);return class{constructor(l){let a=(l.parallels||[]).map(p=>p*i),h=a[0]||0,c=a[1]??h,g=Math.cos(h);typeof l.projectedBounds=="object"&&(this.projectedBounds=l.projectedBounds);let u=h===c?Math.sin(h):Math.log(g/Math.cos(c))/Math.log(n(c)/n(h));1e-10>Math.abs(u)&&(u=1e-10*(e(u)||1)),this.n=u,this.c=g*Math.pow(n(h),u)/u}forward(l){let{c:a,n:h,projectedBounds:c}=this,g=l[0]*i,u=l[1]*i;a>0?u<-r+1e-6&&(u=-r+1e-6):u>r-1e-6&&(u=r-1e-6);let p=a/Math.pow(n(u),h),b=p*Math.sin(h*g)*63.78137,v=(a-p*Math.cos(h*g))*63.78137,x=[b,v];return c&&(b<c.x1||b>c.x2||v<c.y1||v>c.y2)&&(x.outside=!0),x}inverse(l){let{c:a,n:h}=this,c=l[0]/63.78137,g=a-l[1]/63.78137,u=e(h)*Math.sqrt(c*c+g*g),p=Math.atan2(c,Math.abs(g))*e(g);return g*h<0&&(p-=Math.PI*e(c)*e(g)),[p/h/i,(2*Math.atan(Math.pow(a/u,1/h))-r)/i]}}}),s(t,"Maps/Projections/EqualEarth.js",[],function(){let e=Math.sqrt(3)/2;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(i){let r=Math.PI/180,n=Math.asin(e*Math.sin(i[1]*r)),l=n*n,a=l*l*l;return[i[0]*r*Math.cos(n)*74.03120656864502/(e*(1.340264+-.24331799999999998*l+a*(.0062510000000000005+.034164*l))),74.03120656864502*n*(1.340264+-.081106*l+a*(893e-6+.003796*l))]}inverse(i){let r=i[0]/74.03120656864502,n=i[1]/74.03120656864502,l=180/Math.PI,a=n,h,c,g,u;for(let v=0;v<12&&(c=(h=a*a)*h*h,g=a*(1.340264+-.081106*h+c*(893e-6+.003796*h))-n,a-=u=g/(1.340264+-.24331799999999998*h+c*(.0062510000000000005+.034164*h)),!(1e-9>Math.abs(u)));++v);c=(h=a*a)*h*h;let p=l*e*r*(1.340264+-.24331799999999998*h+c*(.0062510000000000005+.034164*h))/Math.cos(a),b=l*Math.asin(Math.sin(a)/e);return Math.abs(p)>180?[NaN,NaN]:[p,b]}}}),s(t,"Maps/Projections/Miller.js",[],function(){let e=Math.PI/4,i=Math.PI/180;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(r){return[r[0]*i*63.78137,79.7267125*Math.log(Math.tan(e+.4*r[1]*i))]}inverse(r){return[r[0]/63.78137/i,2.5*(Math.atan(Math.exp(r[1]/63.78137*.8))-e)/i]}}}),s(t,"Maps/Projections/Orthographic.js",[],function(){let e=Math.PI/180;return class{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}forward(i){let r=i[0],n=i[1]*e,l=[Math.cos(n)*Math.sin(r*e)*63.78460826781007,63.78460826781007*Math.sin(n)];return(r<-90||r>90)&&(l.outside=!0),l}inverse(i){let r=i[0]/63.78460826781007,n=i[1]/63.78460826781007,l=Math.sqrt(r*r+n*n),a=Math.asin(l),h=Math.sin(a);return[Math.atan2(r*h,l*Math.cos(a))/e,Math.asin(l&&n*h/l)/e]}}}),s(t,"Maps/Projections/WebMercator.js",[],function(){let e=Math.PI/180;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(i){let r=Math.sin(i[1]*e),n=[63.78137*i[0]*e,63.78137*Math.log((1+r)/(1-r))/2];return Math.abs(i[1])>this.maxLatitude&&(n.outside=!0),n}inverse(i){return[i[0]/(63.78137*e),(2*Math.atan(Math.exp(i[1]/63.78137))-Math.PI/2)/e]}}}),s(t,"Maps/Projections/ProjectionRegistry.js",[t["Maps/Projections/LambertConformalConic.js"],t["Maps/Projections/EqualEarth.js"],t["Maps/Projections/Miller.js"],t["Maps/Projections/Orthographic.js"],t["Maps/Projections/WebMercator.js"]],function(e,i,r,n,l){return{EqualEarth:i,LambertConformalConic:e,Miller:r,Orthographic:n,WebMercator:l}}),s(t,"Maps/Projection.js",[t["Core/Geometry/PolygonClip.js"],t["Maps/Projections/ProjectionRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{clipLineString:n,clipPolygon:l}=e,{clamp:a,erase:h}=r,c=2*Math.PI/360,g=v=>(v<-180&&(v+=360),v>180&&(v-=360),v),u=v=>(1-Math.cos(v))/2,p=(v,x)=>{let m=Math.cos,E=v[1]*c,L=v[0]*c,S=x[1]*c,w=x[0]*c;return u(S-E)+m(E)*m(S)*u(w-L)};class b{static add(x,m){b.registry[x]=m}static distance(x,m){let{atan2:E,sqrt:L}=Math,S=p(x,m);return 2*E(L(S),L(1-S))*6371e3}static geodesic(x,m,E,L=5e5){let{atan2:S,cos:w,sin:R,sqrt:O}=Math,I=b.distance,_=x[1]*c,P=x[0]*c,F=m[1]*c,A=m[0]*c,D=w(_)*w(P),C=w(F)*w(A),d=w(_)*R(P),f=w(F)*R(A),y=R(_),M=R(F),k=I(x,m),T=k/6371e3,z=R(T),N=Math.round(k/L),G=[];if(E&&G.push(x),N>1){let X=1/N;for(let j=X;j<.999;j+=X){let B=R((1-j)*T)/z,W=R(j*T)/z,Y=B*D+W*C,U=B*d+W*f,q=S(B*y+W*M,O(Y*Y+U*U)),H=S(U,Y);G.push([H/c,q/c])}}return E&&G.push(m),G}static insertGeodesics(x){let m=x.length-1;for(;m--;)if(Math.max(Math.abs(x[m][0]-x[m+1][0]),Math.abs(x[m][1]-x[m+1][1]))>10){let E=b.geodesic(x[m],x[m+1]);E.length&&x.splice(m+1,0,...E)}}static toString(x){let{name:m,rotation:E}=x||{};return[m,E&&E.join(",")].join(";")}constructor(x={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90,this.options=x;let{name:m,projectedBounds:E,rotation:L}=x;this.rotator=L?this.getRotator(L):void 0;let S=m?b.registry[m]:void 0;S&&(this.def=new S(x));let{def:w,rotator:R}=this;w&&(this.maxLatitude=w.maxLatitude||90,this.hasGeoProjection=!0),R&&w?(this.forward=O=>w.forward(R.forward(O)),this.inverse=O=>R.inverse(w.inverse(O))):w?(this.forward=O=>w.forward(O),this.inverse=O=>w.inverse(O)):R&&(this.forward=R.forward,this.inverse=R.inverse),this.bounds=E==="world"?w&&w.bounds:E}lineIntersectsBounds(x){let{x1:m,x2:E,y1:L,y2:S}=this.bounds||{},w=(I,_,P)=>{let[F,A]=I,D=_?0:1;if(typeof P=="number"&&F[_]>=P!=A[_]>=P){let C=(P-F[_])/(A[_]-F[_]),d=F[D]+C*(A[D]-F[D]);return _?[d,P]:[P,d]}},R,O=x[0];return((R=w(x,0,m))||(R=w(x,0,E)))&&(O=R,x[1]=R),((R=w(x,1,L))||(R=w(x,1,S)))&&(O=R),O}getRotator(x){let m=x[0]*c,E=(x[1]||0)*c,L=(x[2]||0)*c,S=Math.cos(E),w=Math.sin(E),R=Math.cos(L),O=Math.sin(L);if(m!==0||E!==0||L!==0)return{forward:I=>{let _=I[0]*c+m,P=I[1]*c,F=Math.cos(P),A=Math.cos(_)*F,D=Math.sin(_)*F,C=Math.sin(P),d=C*S+A*w;return[Math.atan2(D*R-d*O,A*S-C*w)/c,Math.asin(d*R+D*O)/c]},inverse:I=>{let _=I[0]*c,P=I[1]*c,F=Math.cos(P),A=Math.cos(_)*F,D=Math.sin(_)*F,C=Math.sin(P),d=C*R-D*O;return[(Math.atan2(D*R+C*O,A*S+d*w)-m)/c,Math.asin(d*S-A*w)/c]}}}forward(x){return x}inverse(x){return x}cutOnAntimeridian(x,m){let E,L=[],S=[x];for(let w=0,R=x.length;w<R;++w){let O=x[w],I=x[w-1];if(!w){if(!m)continue;I=x[x.length-1]}let _=I[0],P=O[0];if((_<-90||_>90)&&(P<-90||P>90)&&_>0!=P>0){let F=a((180-(_+360)%360)/((P+360)%360-(_+360)%360),0,1),A=I[1]+F*(O[1]-I[1]);L.push({i:w,lat:A,direction:_<0?1:-1,previousLonLat:I,lonLat:O})}}if(L.length)if(m){L.length%2==1&&(E=L.slice().sort((R,O)=>Math.abs(O.lat)-Math.abs(R.lat))[0],h(L,E));let w=L.length-2;for(;w>=0;){let R=L[w].i,O=g(180+1e-6*L[w].direction),I=g(180-1e-6*L[w].direction),_=x.splice(R,L[w+1].i-R,...b.geodesic([O,L[w].lat],[O,L[w+1].lat],!0));_.push(...b.geodesic([I,L[w+1].lat],[I,L[w].lat],!0)),S.push(_),w-=2}if(E)for(let R=0;R<S.length;R++){let{direction:O,lat:I}=E,_=S[R],P=_.indexOf(E.lonLat);if(P>-1){let F=(I<0?-1:1)*this.maxLatitude,A=g(180+1e-6*O),D=g(180-1e-6*O),C=b.geodesic([A,I],[A,F],!0);for(let d=A+120*O;d>-180&&d<180;d+=120*O)C.push([d,F]);C.push(...b.geodesic([D,F],[D,E.lat],!0)),_.splice(P,0,...C);break}}}else{let w=L.length;for(;w--;){let R=L[w].i,O=x.splice(R,x.length,[g(180+1e-6*L[w].direction),L[w].lat]);O.unshift([g(180-1e-6*L[w].direction),L[w].lat]),S.push(O)}}return S}path(x){let m,{bounds:E,def:L,rotator:S}=this,w=[],R=x.type==="Polygon"||x.type==="MultiPolygon",O=this.hasGeoProjection,I=!L||L.antimeridianCutting!==!1,_=I?S:void 0,P=I&&L||this;E&&(m=[[E.x1,E.y1],[E.x2,E.y1],[E.x2,E.y2],[E.x1,E.y2]]);let F=A=>{let D=A.map(d=>{if(I){_&&(d=_.forward(d));let f=d[0];1e-6>Math.abs(f-180)&&(f=f<180?179.999999:180.000001),d=[f,d[1]]}return d}),C=[D];O&&(b.insertGeodesics(D),I&&(C=this.cutOnAntimeridian(D,R))),C.forEach(d=>{let f,y;if(d.length<2)return;let M=!1,k=!1,T=X=>{M?w.push(["L",X[0],X[1]]):(w.push(["M",X[0],X[1]]),M=!0)},z=!1,N=!1,G=d.map(X=>{let j=P.forward(X);return j.outside?z=!0:N=!0,j[1]===1/0?j[1]=1e10:j[1]===-1/0&&(j[1]=-1e10),j});if(I){if(R&&G.push(G[0]),z){if(!N)return;if(m){if(R)G=l(G,m);else if(E){n(G,m).forEach(X=>{M=!1,X.forEach(T)});return}}}G.forEach(T)}else for(let X=0;X<G.length;X++){let j=d[X],B=G[X];B.outside?k=!0:(R&&!f&&(f=j,d.push(j),G.push(B)),k&&y&&(R&&O?b.geodesic(y,j).forEach(W=>T(P.forward(W))):M=!1),T(B),y=j,k=!1)}})};return x.type==="LineString"?F(x.coordinates):x.type==="MultiLineString"?x.coordinates.forEach(A=>F(A)):x.type==="Polygon"?(x.coordinates.forEach(A=>F(A)),w.length&&w.push(["Z"])):x.type==="MultiPolygon"&&(x.coordinates.forEach(A=>{A.forEach(D=>F(D))}),w.length&&w.push(["Z"])),w}}return b.registry=i,b}),s(t,"Maps/MapView.js",[t["Core/Globals.js"],t["Maps/MapViewDefaults.js"],t["Maps/GeoJSONComposition.js"],t["Maps/MapUtilities.js"],t["Maps/Projection.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{composed:h}=e,{topo2geo:c}=r,{boundsFromPath:g,pointInPolygon:u}=n,{addEvent:p,clamp:b,crisp:v,fireEvent:x,isArray:m,isNumber:E,isObject:L,isString:S,merge:w,pick:R,pushUnique:O,relativeLength:I}=a,_={};function P(C,d){let{width:f,height:y}=d;return Math.log(400.979322/Math.max((C.x2-C.x1)/(f/256),(C.y2-C.y1)/(y/256)))/Math.log(2)}function F(C){C.seriesOptions.mapData&&this.mapView?.recommendMapView(this,[this.options.chart.map,C.seriesOptions.mapData],this.options.drilldown?.mapZooming)}class A{static compose(d){O(h,"MapView")&&(_=d.maps,p(d,"afterInit",function(){this.mapView=new A(this,this.options.mapView)},{order:0}),p(d,"addSeriesAsDrilldown",F),p(d,"afterDrillUp",F))}static compositeBounds(d){if(d.length)return d.slice(1).reduce((f,y)=>(f.x1=Math.min(f.x1,y.x1),f.y1=Math.min(f.y1,y.y1),f.x2=Math.max(f.x2,y.x2),f.y2=Math.max(f.y2,y.y2),f),w(d[0]))}static mergeInsets(d,f){let y=k=>{let T={};return k.forEach((z,N)=>{T[z&&z.id||`i${N}`]=z}),T},M=w(y(d),y(f));return Object.keys(M).map(k=>M[k])}constructor(d,f){this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],this.recommendedMapView={},this instanceof D||this.recommendMapView(d,[d.options.chart.map,...(d.options.series||[]).map(T=>T.mapData)]),this.userOptions=f||{};let y=w(i,this.recommendedMapView,f),M=this.recommendedMapView?.insets,k=f&&f.insets;M&&k&&(y.insets=A.mergeInsets(M,k)),this.chart=d,this.center=y.center,this.options=y,this.projection=new l(y.projection),this.playingField=d.plotBox,this.zoom=y.zoom||0,this.minZoom=y.minZoom,this.createInsets(),this.eventsToUnbind.push(p(d,"afterSetChartSize",()=>{this.playingField=this.getField(),(this.minZoom===void 0||this.minZoom===this.zoom)&&(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&E(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&w(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){let d=this.options,f=d.insets;f&&f.forEach(y=>{let M=new D(this,w(d.insetOptions,y));this.insets.push(M)})}fitToBounds(d,f,y=!0,M){let k=d||this.getProjectedBounds();if(k){let T=R(f,d?0:this.options.padding),z=this.getField(!1),N=m(T)?T:[T,T,T,T];this.padding=[I(N[0],z.height),I(N[1],z.width),I(N[2],z.height),I(N[3],z.width)],this.playingField=this.getField();let G=P(k,this.playingField);d||(this.minZoom=G);let X=this.projection.inverse([(k.x2+k.x1)/2,(k.y2+k.y1)/2]);this.setView(X,G,y,M)}}getField(d=!0){let f=d?this.padding:[0,0,0,0];return{x:f[3],y:f[0],width:this.chart.plotWidth-f[1]-f[3],height:this.chart.plotHeight-f[0]-f[2]}}getGeoMap(d){if(S(d))return _[d]&&_[d].type==="Topology"?c(_[d]):_[d];if(L(d,!0)){if(d.type==="FeatureCollection")return d;if(d.type==="Topology")return c(d)}}getMapBBox(){let d=this.getProjectedBounds(),f=this.getScale();if(d){let y=this.padding,M=this.projectedUnitsToPixels({x:d.x1,y:d.y2});return{width:(d.x2-d.x1)*f+y[1]+y[3],height:(d.y2-d.y1)*f+y[0]+y[2],x:M.x-y[3],y:M.y-y[0]}}}getProjectedBounds(){let d=this.projection,f=this.chart.series.reduce((M,k)=>{let T=k.getProjectedBounds&&k.getProjectedBounds();return T&&k.options.affectsMapView!==!1&&M.push(T),M},[]),y=this.options.fitToGeometry;if(y){if(!this.fitToGeometryCache)if(y.type==="MultiPoint"){let M=y.coordinates.map(z=>d.forward(z)),k=M.map(z=>z[0]),T=M.map(z=>z[1]);this.fitToGeometryCache={x1:Math.min.apply(0,k),x2:Math.max.apply(0,k),y1:Math.min.apply(0,T),y2:Math.max.apply(0,T)}}else this.fitToGeometryCache=g(d.path(y));return this.fitToGeometryCache}return this.projection.bounds||A.compositeBounds(f)}getScale(){return 256/400.979322*Math.pow(2,this.zoom)}getSVGTransform(){let{x:d,y:f,width:y,height:M}=this.playingField,k=this.projection.forward(this.center),T=this.projection.hasCoordinates?-1:1,z=this.getScale(),N=z*T,G=d+y/2-k[0]*z,X=f+M/2-k[1]*N;return{scaleX:z,scaleY:N,translateX:G,translateY:X}}lonLatToPixels(d){let f=this.lonLatToProjectedUnits(d);if(f)return this.projectedUnitsToPixels(f)}lonLatToProjectedUnits(d){let f=this.chart,y=f.mapTransforms;if(y){for(let k in y)if(Object.hasOwnProperty.call(y,k)&&y[k].hitZone){let T=f.transformFromLatLon(d,y[k]);if(T&&u(T,y[k].hitZone.coordinates[0]))return T}return f.transformFromLatLon(d,y.default)}for(let k of this.insets)if(k.options.geoBounds&&u({x:d.lon,y:d.lat},k.options.geoBounds.coordinates[0])){let T=k.projection.forward([d.lon,d.lat]),z=k.projectedUnitsToPixels({x:T[0],y:T[1]});return this.pixelsToProjectedUnits(z)}let M=this.projection.forward([d.lon,d.lat]);if(!M.outside)return{x:M[0],y:M[1]}}projectedUnitsToLonLat(d){let f=this.chart,y=f.mapTransforms;if(y){for(let T in y)if(Object.hasOwnProperty.call(y,T)&&y[T].hitZone&&u(d,y[T].hitZone.coordinates[0]))return f.transformToLatLon(d,y[T]);return f.transformToLatLon(d,y.default)}let M=this.projectedUnitsToPixels(d);for(let T of this.insets)if(T.hitZone&&u(M,T.hitZone.coordinates[0])){let z=T.pixelsToProjectedUnits(M),N=T.projection.inverse([z.x,z.y]);return{lon:N[0],lat:N[1]}}let k=this.projection.inverse([d.x,d.y]);return{lon:k[0],lat:k[1]}}recommendMapView(d,f,y=!1){this.recommendedMapView={};let M=f.map(z=>this.getGeoMap(z)),k=[];M.forEach(z=>{if(z&&(Object.keys(this.recommendedMapView).length||(this.recommendedMapView=z["hc-recommended-mapview"]||{}),z.bbox)){let[N,G,X,j]=z.bbox;k.push({x1:N,y1:G,x2:X,y2:j})}});let T=k.length&&A.compositeBounds(k);x(this,"onRecommendMapView",{geoBounds:T,chart:d},function(){if(T&&this.recommendedMapView){if(!this.recommendedMapView.projection){let{x1:z,y1:N,x2:G,y2:X}=T;this.recommendedMapView.projection=G-z>180&&X-N>90?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[N,X],rotation:[-(z+G)/2]}}this.recommendedMapView.insets||(this.recommendedMapView.insets=void 0)}}),this.geoMap=M[0],y&&d.hasRendered&&!d.userOptions.mapView?.projection&&this.recommendedMapView&&this.update(this.recommendedMapView)}redraw(d){this.chart.series.forEach(f=>{f.useMapGeometry&&(f.isDirty=!0)}),this.chart.redraw(d)}setView(d,f,y=!0,M){d&&(this.center=d),typeof f=="number"&&(typeof this.minZoom=="number"&&(f=Math.max(f,this.minZoom)),typeof this.options.maxZoom=="number"&&(f=Math.min(f,this.options.maxZoom)),E(f)&&(this.zoom=f));let k=this.getProjectedBounds();if(k){let T=this.projection.forward(this.center),{x:z,y:N,width:G,height:X}=this.playingField,j=this.getScale(),B=this.projectedUnitsToPixels({x:k.x1,y:k.y1}),W=this.projectedUnitsToPixels({x:k.x2,y:k.y2}),Y=[(k.x1+k.x2)/2,(k.y1+k.y2)/2];if(!this.chart.series.some(U=>U.isDrilling)){let U=B.x,q=W.y,H=W.x,V=B.y;H-U<G?T[0]=Y[0]:U<z&&H<z+G?T[0]+=Math.max(U-z,H-G-z)/j:H>z+G&&U>z&&(T[0]+=Math.min(H-G-z,U-z)/j),V-q<X?T[1]=Y[1]:q<N&&V<N+X?T[1]-=Math.max(q-N,V-X-N)/j:V>N+X&&q>N&&(T[1]-=Math.min(V-X-N,q-N)/j),this.center=this.projection.inverse(T)}this.insets.forEach(U=>{U.options.field&&(U.hitZone=U.getHitZone(),U.playingField=U.getField())}),this.render()}x(this,"afterSetView"),y&&this.redraw(M)}projectedUnitsToPixels(d){let f=this.getScale(),y=this.projection.forward(this.center),M=this.playingField,k=M.x+M.width/2,T=M.y+M.height/2;return{x:k-f*(y[0]-d.x),y:T+f*(y[1]-d.y)}}pixelsToLonLat(d){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(d))}pixelsToProjectedUnits(d){let{x:f,y}=d,M=this.getScale(),k=this.projection.forward(this.center),T=this.playingField,z=T.x+T.width/2,N=T.y+T.height/2;return{x:k[0]+(f-z)/M,y:k[1]-(y-N)/M}}setUpEvents(){let d,f,y,{chart:M}=this,k=T=>{let{lastTouches:z,pinchDown:N}=M.pointer,G=this.projection,X=T.touches,{mouseDownX:j,mouseDownY:B}=M,W=0;if(N?.length===1?(j=N[0].chartX,B=N[0].chartY):N?.length===2&&(j=(N[0].chartX+N[1].chartX)/2,B=(N[0].chartY+N[1].chartY)/2),X?.length===2&&z&&(W=Math.log(Math.sqrt(Math.pow(z[0].chartX-z[1].chartX,2)+Math.pow(z[0].chartY-z[1].chartY,2))/Math.sqrt(Math.pow(X[0].chartX-X[1].chartX,2)+Math.pow(X[0].chartY-X[1].chartY,2)))/Math.log(.5)),E(j)&&E(B)){let Y=`${j},${B}`,{chartX:U,chartY:q}=T.originalEvent;X?.length===2&&(U=(X[0].chartX+X[1].chartX)/2,q=(X[0].chartY+X[1].chartY)/2),Y!==f&&(f=Y,d=this.projection.forward(this.center),y=(this.projection.options.rotation||[0,0]).slice());let H=G.def&&G.def.bounds,V=H&&P(H,this.playingField)||-1/0;if(G.options.name==="Orthographic"&&2>(X?.length||0)&&(this.minZoom||1/0)<1.3*V){let Z=440/(this.getScale()*Math.min(M.plotWidth,M.plotHeight));if(y){let K=(j-U)*Z-y[0],J=b(-y[1]-(B-q)*Z,-80,80),tt=this.zoom;this.update({projection:{rotation:[-K,-J]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=tt,M.redraw(!1)}}else if(E(U)&&E(q)){let Z=this.getScale(),K=this.projection.hasCoordinates?1:-1,J=this.projection.inverse([d[0]+(j-U)/Z,d[1]-(B-q)/Z*K]);isNaN(J[0]+J[1])||this.zoomBy(W,J,void 0,!1)}T.preventDefault()}};p(M,"pan",k),p(M,"touchpan",k),p(M,"selection",T=>{if(T.resetSelection)this.zoomBy();else{let z=T.x-M.plotLeft,N=T.y-M.plotTop,{y:G,x:X}=this.pixelsToProjectedUnits({x:z,y:N}),{y:j,x:B}=this.pixelsToProjectedUnits({x:z+T.width,y:N+T.height});this.fitToBounds({x1:X,y1:G,x2:B,y2:j},void 0,!0,!T.originalEvent.touches&&void 0),/^touch/.test(T.originalEvent.type)||M.showResetZoom(),T.preventDefault()}})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(d,f=!0,y){let M=d.projection,k=M&&l.toString(M)!==l.toString(this.options.projection),T=!1;w(!0,this.userOptions,d),w(!0,this.options,d),"insets"in d&&(this.insets.forEach(z=>z.destroy()),this.insets.length=0,T=!0),(k||"fitToGeometry"in d)&&delete this.fitToGeometryCache,(k||T)&&(this.chart.series.forEach(z=>{let N=z.transformGroups;if(z.clearBounds&&z.clearBounds(),z.isDirty=!0,z.isDirtyData=!0,T&&N)for(;N.length>1;){let G=N.pop();G&&G.destroy()}}),k&&(this.projection=new l(this.options.projection)),T&&this.createInsets(),!d.center&&Object.hasOwnProperty.call(d,"zoom")&&!E(d.zoom)&&this.fitToBounds(void 0,void 0,!1)),d.center||E(d.zoom)?this.setView(this.options.center,d.zoom,!1):"fitToGeometry"in d&&this.fitToBounds(void 0,void 0,!1),f&&this.chart.redraw(y)}zoomBy(d,f,y,M){let k=this.chart,T=this.projection.forward(this.center);if(typeof d=="number"){let z,N,G,X=this.zoom+d;if(y){let[j,B]=y,W=this.getScale(),Y=j-k.plotLeft-k.plotWidth/2,U=B-k.plotTop-k.plotHeight/2;N=T[0]+Y/W,G=T[1]+U/W}if(typeof N=="number"&&typeof G=="number"){let j=1-Math.pow(2,this.zoom)/Math.pow(2,X),B=T[0]-N,W=T[1]-G;T[0]-=B*j,T[1]+=W*j,z=this.projection.inverse(T)}this.setView(f||z,X,void 0,M)}else this.fitToBounds(void 0,void 0,void 0,M)}}class D extends A{constructor(d,f){if(super(d.chart,f),this.id=f.id,this.mapView=d,this.options=w({center:[0,0]},d.options.insetOptions,f),this.allBounds=[],this.options.geoBounds){let y=d.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=g(y),this.geoBoundsProjectedPolygon=y.map(M=>[M[1]||0,M[2]||0])}}getField(d=!0){let f=this.hitZone;if(f){let y=d?this.padding:[0,0,0,0],M=f.coordinates[0],k=M.map(j=>j[0]),T=M.map(j=>j[1]),z=Math.min.apply(0,k)+y[3],N=Math.max.apply(0,k)-y[1],G=Math.min.apply(0,T)+y[0],X=Math.max.apply(0,T)-y[2];if(E(z)&&E(G))return{x:z,y:G,width:N-z,height:X-G}}return super.getField.call(this,d)}getHitZone(){let{chart:d,mapView:f,options:y}=this,{coordinates:M}=y.field||{};if(M){let k=M[0];if(y.units==="percent"){let T=y.relativeTo==="mapBoundingBox"&&f.getMapBBox()||w(d.plotBox,{x:0,y:0});k=k.map(z=>[I(`${z[0]}%`,T.width,T.x),I(`${z[1]}%`,T.height,T.y)])}return{type:"Polygon",coordinates:[k]}}}getProjectedBounds(){return A.compositeBounds(this.allBounds)}isInside(d){let{geoBoundsProjectedBox:f,geoBoundsProjectedPolygon:y}=this;return!!(f&&d.x>=f.x1&&d.x<=f.x2&&d.y>=f.y1&&d.y<=f.y2&&y&&u(d,y))}render(){let{chart:d,mapView:f,options:y}=this,M=y.borderPath||y.field;if(M&&f.group){let k=!0;this.border||(this.border=d.renderer.path().addClass("highcharts-mapview-inset-border").add(f.group),k=!1),d.styledMode||this.border.attr({stroke:y.borderColor,"stroke-width":y.borderWidth});let T=this.border.strokeWidth(),z=y.relativeTo==="mapBoundingBox"&&f.getMapBBox()||f.playingField,N=(M.coordinates||[]).reduce((G,X)=>X.reduce((j,B,W)=>{let[Y,U]=B;return y.units==="percent"&&(Y=d.plotLeft+I(`${Y}%`,z.width,z.x),U=d.plotTop+I(`${U}%`,z.height,z.y)),Y=v(Y,T),U=v(U,T),j.push(W===0?["M",Y,U]:["L",Y,U]),j},G),[]);this.border[k?"animate":"attr"]({d:N})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(d=>d())}setUpEvents(){}}return A}),s(t,"Series/Map/MapSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/ColorMapComposition.js"],t["Series/CenteredUtilities.js"],t["Core/Globals.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Series/Map/MapSeriesDefaults.js"],t["Maps/MapView.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c,g,u){let{animObject:p,stop:b}=e,{noop:v}=n,{splitPath:x}=l,{column:m,scatter:E}=g.seriesTypes,{extend:L,find:S,fireEvent:w,getNestedProperty:R,isArray:O,defined:I,isNumber:_,isObject:P,merge:F,objectEach:A,pick:D,splat:C}=u;class d extends E{constructor(){super(...arguments),this.processedData=[]}animate(y){let{chart:M,group:k}=this,T=p(this.options.animation);y?k.attr({translateX:M.plotLeft+M.plotWidth/2,translateY:M.plotTop+M.plotHeight/2,scaleX:.001,scaleY:.001}):k.animate({translateX:M.plotLeft,translateY:M.plotTop,scaleX:1,scaleY:1},T)}clearBounds(){this.points.forEach(y=>{delete y.bounds,delete y.insetIndex,delete y.projectedPath}),delete this.bounds}doFullTranslate(){return!!(this.isDirtyData||this.chart.isResizing||!this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}drawPoints(){let y=this,{chart:M,group:k,transformGroups:T=[]}=this,{mapView:z,renderer:N}=M;if(z){this.transformGroups=T,T[0]||(T[0]=N.g().add(k));for(let G=0,X=z.insets.length;G<X;++G)T[G+1]||T.push(N.g().add(k));this.doFullTranslate()&&(this.points.forEach(G=>{let{graphic:X}=G;G.group=T[typeof G.insetIndex=="number"?G.insetIndex+1:0],X&&X.parentGroup!==G.group&&X.add(G.group)}),m.prototype.drawPoints.apply(this),this.points.forEach(G=>{let X=G.graphic;if(X){let j=X.animate,B="";G.name&&(B+="highcharts-name-"+G.name.replace(/ /g,"-").toLowerCase()),G.properties&&G.properties["hc-key"]&&(B+=" highcharts-key-"+G.properties["hc-key"].toString().toLowerCase()),B&&X.addClass(B),M.styledMode&&X.css(this.pointAttribs(G,G.selected&&"select"||void 0)),X.attr({visibility:!G.visible&&(G.visible||G.isNull)?"hidden":"inherit"}),X.animate=function(W,Y,U){let q=_(W["stroke-width"])&&!_(X["stroke-width"]),H=_(X["stroke-width"])&&!_(W["stroke-width"]);if(q||H){let V=D(y.getStrokeWidth(y.options),1)/(M.mapView&&M.mapView.getScale()||1);q&&(X["stroke-width"]=V),H&&(W["stroke-width"]=V)}return j.call(X,W,Y,H?function(){X.element.removeAttribute("stroke-width"),delete X["stroke-width"],U&&U.apply(this,arguments)}:U)}}})),T.forEach((G,X)=>{let j=(X===0?z:z.insets[X-1]).getSVGTransform(),B=D(this.getStrokeWidth(this.options),1),W=j.scaleX,Y=j.scaleY>0?1:-1,U=q=>{(y.points||[]).forEach(H=>{let V,Z=H.graphic;Z&&Z["stroke-width"]&&(V=this.getStrokeWidth(H.options))&&Z.attr({"stroke-width":V/q})})};if(N.globalAnimation&&M.hasRendered&&z.allowTransformAnimation){let q=Number(G.attr("translateX")),H=Number(G.attr("translateY")),V=Number(G.attr("scaleX")),Z=(tt,$)=>{let Q=V+(W-V)*$.pos;G.attr({translateX:q+(j.translateX-q)*$.pos,translateY:H+(j.translateY-H)*$.pos,scaleX:Q,scaleY:Q*Y,"stroke-width":B/Q}),U(Q)},K=F(p(N.globalAnimation)),J=K.step;K.step=function(){J&&J.apply(this,arguments),Z.apply(this,arguments)},G.attr({animator:0}).animate({animator:1},K,(function(){typeof N.globalAnimation!="boolean"&&N.globalAnimation.complete&&N.globalAnimation.complete({applyDrilldown:!0}),w(this,"mapZoomComplete")}).bind(this))}else b(G),G.attr(F(j,{"stroke-width":B/W})),U(W)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){let{insets:y,projection:M}=this.chart.mapView,k=[];(this.points||[]).forEach(T=>{if(T.path||T.geometry){if(typeof T.path=="string"?T.path=x(T.path):O(T.path)&&T.path[0]==="M"&&(T.path=this.chart.renderer.pathToSegments(T.path)),!T.bounds){let z=T.getProjectedBounds(M);if(z){T.labelrank=D(T.labelrank,(z.x2-z.x1)*(z.y2-z.y1));let{midX:N,midY:G}=z;if(y&&_(N)&&_(G)){let X=S(y,j=>j.isInside({x:N,y:G}));X&&(delete T.projectedPath,(z=T.getProjectedBounds(X.projection))&&X.allBounds.push(z),T.insetIndex=y.indexOf(X))}T.bounds=z}}T.bounds&&T.insetIndex===void 0&&k.push(T.bounds)}}),this.bounds=c.compositeBounds(k)}return this.bounds}getStrokeWidth(y){let M=this.pointAttrToOptions;return y[M&&M["stroke-width"]||"borderWidth"]}hasData(){return!!this.processedXData.length}pointAttribs(y,M){let{mapView:k,styledMode:T}=y.series.chart,z=T?this.colorAttribs(y):m.prototype.pointAttribs.call(this,y,M),N=this.getStrokeWidth(y.options);if(M){let X=F(this.options.states&&this.options.states[M],y.options.states&&y.options.states[M]||{}),j=this.getStrokeWidth(X);I(j)&&(N=j),z.stroke=X.borderColor??y.color}N&&k&&(N/=k.getScale());let G=this.getStrokeWidth(this.options);return z.dashstyle&&k&&_(G)&&(N=G/k.getScale()),y.visible||(z.fill=this.options.nullColor),I(N)?z["stroke-width"]=N:delete z["stroke-width"],z["stroke-linecap"]=z["stroke-linejoin"]=this.options.linecap,z}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(y,M=!0,k,T){delete this.bounds,super.setData(y,!1,void 0,T),this.processData(),this.generatePoints(),M&&this.chart.redraw(k)}processData(){let y,M,k,T=this.options,z=T.data,N=this.chart,G=N.options.chart,X=this.joinBy,j=T.keys||this.pointArrayMap,B=[],W={},Y=this.chart.mapView,U=Y&&(P(T.mapData,!0)?Y.getGeoMap(T.mapData):Y.geoMap),q=N.mapTransforms=G.mapTransforms||U&&U["hc-transform"]||N.mapTransforms;q&&A(q,V=>{V.rotation&&(V.cosAngle=Math.cos(V.rotation),V.sinAngle=Math.sin(V.rotation))}),O(T.mapData)?k=T.mapData:U&&U.type==="FeatureCollection"&&(this.mapTitle=U.title,k=n.geojson(U,this.type,this)),this.processedData=[];let H=this.processedData;if(z){let V;for(let Z=0,K=z.length;Z<K;++Z){if(_(V=z[Z]))H[Z]={value:V};else if(O(V)){let J=0;H[Z]={},!T.keys&&V.length>j.length&&typeof V[0]=="string"&&(H[Z]["hc-key"]=V[0],++J);for(let tt=0;tt<j.length;++tt,++J)j[tt]&&V[J]!==void 0&&(j[tt].indexOf(".")>0?a.prototype.setNestedProperty(H[Z],V[J],j[tt]):H[Z][j[tt]]=V[J])}else H[Z]=z[Z];X&&X[0]==="_i"&&(H[Z]._i=Z)}}if(k){this.mapData=k,this.mapMap={};for(let V=0;V<k.length;V++)M=(y=k[V]).properties,y._i=V,X[0]&&M&&M[X[0]]&&(y[X[0]]=M[X[0]]),W[y[X[0]]]=y;if(this.mapMap=W,X[1]){let V=X[1];H.forEach(Z=>{let K=R(V,Z);W[K]&&B.push(W[K])})}if(T.allAreas){if(X[1]){let Z=X[1];H.forEach(K=>{B.push(R(Z,K))})}let V="|"+B.map(function(Z){return Z&&Z[X[0]]}).join("|")+"|";k.forEach(Z=>{X[0]&&V.indexOf("|"+Z[X[0]]+"|")!==-1||H.push(F(Z,{value:null}))})}}this.processedXData=Array(H.length)}setOptions(y){let M=super.setOptions(y),k=M.joinBy;return M.joinBy===null&&(k="_i"),(k=this.joinBy=C(k))[1]||(k[1]=k[0]),M}translate(){let y=this.doFullTranslate(),M=this.chart.mapView,k=M&&M.projection;if(this.chart.hasRendered&&(this.isDirtyData||!this.hasRendered)&&(this.processData(),this.generatePoints(),delete this.bounds,!M||M.userOptions.center||_(M.userOptions.zoom)||M.zoom!==M.minZoom?this.getProjectedBounds():M.fitToBounds(void 0,void 0,!1)),M){let T=M.getSVGTransform();this.points.forEach(z=>{let N=_(z.insetIndex)&&M.insets[z.insetIndex].getSVGTransform()||T;N&&z.bounds&&_(z.bounds.midX)&&_(z.bounds.midY)&&(z.plotX=z.bounds.midX*N.scaleX+N.translateX,z.plotY=z.bounds.midY*N.scaleY+N.translateY),y&&(z.shapeType="path",z.shapeArgs={d:a.getProjectedPath(z,k)}),z.hiddenInDataClass||(z.projectedPath&&!z.projectedPath.length?z.setVisible(!1):z.visible||z.setVisible(!0))})}w(this,"afterTranslate")}update(y){y.mapData&&this.chart.mapView?.recommendMapView(this.chart,[this.chart.options.chart.map,...(this.chart.options.series||[]).map((M,k)=>k===this._i?y.mapData:M.mapData)],!0),super.update.apply(this,arguments)}}return d.defaultOptions=F(E.defaultOptions,h),L(d.prototype,{type:"map",axisTypes:i.seriesMembers.axisTypes,colorAttribs:i.seriesMembers.colorAttribs,colorKey:i.seriesMembers.colorKey,directTouch:!0,drawDataLabels:v,drawGraph:v,forceDL:!0,getCenter:r.getCenter,getExtremesFromAll:!0,getSymbol:v,isCartesian:!1,parallelArrays:i.seriesMembers.parallelArrays,pointArrayMap:i.seriesMembers.pointArrayMap,pointClass:a,preserveAspectRatio:!0,searchPoint:v,trackerGroups:i.seriesMembers.trackerGroups,useMapGeometry:!0}),i.compose(d),g.registerSeriesType("map",d),d}),s(t,"Series/MapLine/MapLineSeriesDefaults.js",[],function(){return{lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"}}),s(t,"Series/MapLine/MapLineSeries.js",[t["Series/MapLine/MapLineSeriesDefaults.js"],t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{extend:l,merge:a}=n;class h extends i{pointAttribs(g,u){let p=super.pointAttribs(g,u);return p.fill=this.options.fillColor,p}}return h.defaultOptions=a(i.defaultOptions,e),l(h.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),r.registerSeriesType("mapline",h),h}),s(t,"Series/MapPoint/MapPointPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i){let{scatter:r}=e.seriesTypes,{isNumber:n}=i;class l extends r.prototype.pointClass{isValid(){return!!(this.options.geometry||n(this.x)&&n(this.y)||n(this.options.lon)&&n(this.options.lat))}}return l}),s(t,"Series/MapPoint/MapPointSeriesDefaults.js",[],function(){return{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"}}),s(t,"Series/MapPoint/MapPointSeries.js",[t["Core/Globals.js"],t["Series/MapPoint/MapPointPoint.js"],t["Series/MapPoint/MapPointSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{noop:h}=e,{map:c,scatter:g}=n.seriesTypes,{extend:u,fireEvent:p,isNumber:b,merge:v}=a;class x extends g{constructor(){super(...arguments),this.clearBounds=c.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}projectPoint(E){let L=this.chart.mapView;if(L){let{geometry:S,lon:w,lat:R}=E,O=S&&S.type==="Point"&&S.coordinates;if(b(w)&&b(R)&&(O=[w,R]),O)return L.lonLatToProjectedUnits({lon:O[0],lat:O[1]})}}translate(){let E=this.chart.mapView;if(this.processedXData||this.processData(),this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),E){let L=E.getSVGTransform(),{hasCoordinates:S}=E.projection;this.points.forEach(w=>{let R,{x:O,y:I}=w,_=b(w.insetIndex)&&E.insets[w.insetIndex].getSVGTransform()||L,P=this.projectPoint(w.options)||w.properties&&this.projectPoint(w.properties);if(P?(O=P.x,I=P.y):w.bounds&&(O=w.bounds.midX,I=w.bounds.midY,_&&b(O)&&b(I)&&(w.plotX=O*_.scaleX+_.translateX,w.plotY=I*_.scaleY+_.translateY,R=!0)),b(O)&&b(I)){if(!R){let F=E.projectedUnitsToPixels({x:O,y:I});w.plotX=F.x,w.plotY=S?F.y:this.chart.plotHeight-F.y}}else w.y=w.plotX=w.plotY=void 0;w.isInside=this.isPointInside(w),w.zone=this.zones.length?w.getZone():void 0})}p(this,"afterTranslate")}}return x.defaultOptions=v(g.defaultOptions,r),l.prototype.symbols.mapmarker=(m,E,L,S,w)=>{let R,O,I=w&&w.context==="legend";I?(R=m+L/2,O=E+S):w&&typeof w.anchorX=="number"&&typeof w.anchorY=="number"?(R=w.anchorX,O=w.anchorY):(R=m+L/2,O=E+S/2,E-=S);let _=I?S/3:S/2;return[["M",R,O],["C",R,O,R-_,E+1.5*_,R-_,E+_],["A",_,_,1,1,1,R+_,E+_],["C",R+_,E+1.5*_,R,O,R,O],["Z"]]},u(x.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:i,searchPoint:h,useMapGeometry:!0}),n.registerSeriesType("mappoint",x),x}),s(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),s(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{parse:l}=e,{noop:a}=r,{arrayMax:h,arrayMin:c,isNumber:g,merge:u,pick:p,stableSort:b}=n;return class{constructor(v,x){this.setState=a,this.init(v,x)}init(v,x){this.options=v,this.visible=!0,this.chart=x.chart,this.legend=x}addToLegend(v){v.splice(this.options.legendIndex,0,this)}drawLegendSymbol(v){let x,m=p(v.options.itemDistance,20),E=this.legendItem||{},L=this.options,S=L.ranges,w=L.connectorDistance;if(!S||!S.length||!g(S[0].value)){v.options.bubbleLegend.autoRanges=!0;return}b(S,function(_,P){return P.value-_.value}),this.ranges=S,this.setOptions(),this.render();let R=this.getMaxLabelSize(),O=this.ranges[0].radius,I=2*O;x=(x=w-O+R.width)>0?x:0,this.maxLabel=R,this.movementX=L.labels.align==="left"?x:0,E.labelWidth=I+x+m,E.labelHeight=I+R.height/2}setOptions(){let v=this.ranges,x=this.options,m=this.chart.series[x.seriesIndex],E=this.legend.baseline,L={zIndex:x.zIndex,"stroke-width":x.borderWidth},S={zIndex:x.zIndex,"stroke-width":x.connectorWidth},w={align:this.legend.options.rtl||x.labels.align==="left"?"right":"left",zIndex:x.zIndex},R=m.options.marker.fillOpacity,O=this.chart.styledMode;v.forEach(function(I,_){O||(L.stroke=p(I.borderColor,x.borderColor,m.color),L.fill=p(I.color,x.color,R!==1?l(m.color).setOpacity(R).get("rgba"):m.color),S.stroke=p(I.connectorColor,x.connectorColor,m.color)),v[_].radius=this.getRangeRadius(I.value),v[_]=u(v[_],{center:v[0].radius-v[_].radius+E}),O||u(!0,v[_],{bubbleAttribs:u(L),connectorAttribs:u(S),labelAttribs:w})},this)}getRangeRadius(v){let x=this.options,m=this.options.seriesIndex,E=this.chart.series[m],L=x.ranges[0].value,S=x.ranges[x.ranges.length-1].value,w=x.minSize,R=x.maxSize;return E.getRadius.call(this,S,L,w,R,v)}render(){let v=this.legendItem||{},x=this.chart.renderer,m=this.options.zThreshold;for(let E of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),v.symbol=x.g("bubble-legend"),v.label=x.g("bubble-legend-item").css(this.legend.itemStyle||{}),v.symbol.translateX=0,v.symbol.translateY=0,v.symbol.add(v.label),v.label.add(v.group),this.ranges))E.value>=m&&this.renderRange(E);this.hideOverlappingLabels()}renderRange(v){let x=this.ranges[0],m=this.legend,E=this.options,L=E.labels,S=this.chart,w=S.series[E.seriesIndex],R=S.renderer,O=this.symbols,I=O.labels,_=v.center,P=Math.abs(v.radius),F=E.connectorDistance||0,A=L.align,D=m.options.rtl,C=E.borderWidth,d=E.connectorWidth,f=x.radius||0,y=_-P-C/2+d/2,M=(y%1?1:.5)-(d%2?0:.5),k=R.styledMode,T=D||A==="left"?-F:F;A==="center"&&(T=0,E.connectorDistance=0,v.labelAttribs.align="center"),O.bubbleItems.push(R.circle(f,_+M,P).attr(k?{}:v.bubbleAttribs).addClass((k?"highcharts-color-"+w.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(E.className||"")).add(this.legendItem.symbol)),O.connectors.push(R.path(R.crispLine([["M",f,y],["L",f+T,y]],E.connectorWidth)).attr(k?{}:v.connectorAttribs).addClass((k?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(E.connectorClassName||"")).add(this.legendItem.symbol));let z=R.text(this.formatLabel(v)).attr(k?{}:v.labelAttribs).css(k?{}:L.style).addClass("highcharts-bubble-legend-labels "+(E.labels.className||"")).add(this.legendItem.symbol),N={x:f+T+E.labels.x,y:y+E.labels.y+.4*z.getBBox().height};z.attr(N),I.push(z),z.placed=!0,z.alignAttr=N}getMaxLabelSize(){let v,x;return this.symbols.labels.forEach(function(m){x=m.getBBox(!0),v=v?x.width>v.width?x:v:x}),v||{}}formatLabel(v){let x=this.options,m=x.labels.formatter,E=x.labels.format,{numberFormatter:L}=this.chart;return E?i.format(E,v):m?m.call(v):L(v.value,1)}hideOverlappingLabels(){let v=this.chart,x=this.options.labels.allowOverlap,m=this.symbols;!x&&m&&(v.hideOverlappingLabels(m.labels),m.labels.forEach(function(E,L){E.newOpacity?E.newOpacity!==E.oldOpacity&&m.connectors[L].show():m.connectors[L].hide()}))}getRanges(){let v=this.legend.bubbleLegend,x=v.chart.series,m=v.options.ranges,E,L,S=Number.MAX_VALUE,w=-Number.MAX_VALUE;return x.forEach(function(R){R.isBubble&&!R.ignoreSeries&&(L=R.zData.filter(g)).length&&(S=p(R.options.zMin,Math.min(S,Math.max(c(L),R.options.displayNegative===!1?R.options.zThreshold:-Number.MAX_VALUE))),w=p(R.options.zMax,Math.max(w,h(L))))}),E=S===w?[{value:w}]:[{value:S},{value:(S+w)/2},{value:w,autoRanges:!0}],m.length&&m[0].radius&&E.reverse(),E.forEach(function(R,O){m&&m[O]&&(E[O]=u(m[O],R))}),E}predictBubbleSizes(){let v=this.chart,x=v.legend.options,m=x.floating,E=x.layout==="horizontal",L=E?v.legend.lastLineHeight:0,S=v.plotSizeX,w=v.plotSizeY,R=v.series[this.options.seriesIndex],O=R.getPxExtremes(),I=Math.ceil(O.minPxSize),_=Math.ceil(O.maxPxSize),P,F=R.options.maxSize;return m||!/%$/.test(F)?P=_:(P=(Math.min(w,S)+L)*(F=parseFloat(F))/100/(F/100+1),(E&&w-P>=S||!E&&S-P>=w)&&(P=_)),[I,Math.ceil(P)]}updateRanges(v,x){let m=this.legend.options.bubbleLegend;m.minSize=v,m.maxSize=x,m.ranges=this.getRanges()}correctSizes(){let v=this.legend,x=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(x.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,x.maxPxSize),v.render())}}}),s(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r,n,l){let{setOptions:a}=r,{composed:h}=n,{addEvent:c,objectEach:g,pushUnique:u,wrap:p}=l;function b(S,w,R){let O,I,_,P=this.legend,F=v(this)>=0;P&&P.options.enabled&&P.bubbleLegend&&P.options.bubbleLegend.autoRanges&&F?(O=P.bubbleLegend.options,I=P.bubbleLegend.predictBubbleSizes(),P.bubbleLegend.updateRanges(I[0],I[1]),O.placed||(P.group.placed=!1,P.allItems.forEach(A=>{(_=A.legendItem||{}).group&&(_.group.translateY=void 0)})),P.render(),O.placed||(this.getMargins(),this.axes.forEach(function(A){A.visible&&A.render(),O.placed||(A.setScale(),A.updateNames(),g(A.ticks,function(D){D.isNew=!0,D.isNewLabel=!0}))}),this.getMargins()),O.placed=!0,S.call(this,w,R),P.bubbleLegend.correctSizes(),L(P,x(P))):(S.call(this,w,R),P&&P.options.enabled&&P.bubbleLegend&&(P.render(),L(P,x(P))))}function v(S){let w=S.series,R=0;for(;R<w.length;){if(w[R]&&w[R].isBubble&&w[R].visible&&w[R].zData.length)return R;R++}return-1}function x(S){let w=S.allItems,R=[],O=w.length,I,_,P,F=0,A=0;for(F=0;F<O;F++)if(_=w[F].legendItem||{},P=(w[F+1]||{}).legendItem||{},_.labelHeight&&(w[F].itemHeight=_.labelHeight),w[F]===w[O-1]||_.y!==P.y){for(R.push({height:0}),I=R[R.length-1];A<=F;A++)w[A].itemHeight>I.height&&(I.height=w[A].itemHeight);I.step=F}return R}function m(S){let w=this.bubbleLegend,R=this.options,O=R.bubbleLegend,I=v(this.chart);w&&w.ranges&&w.ranges.length&&(O.ranges.length&&(O.autoRanges=!!O.ranges[0].autoRanges),this.destroyItem(w)),I>=0&&R.enabled&&O.enabled&&(O.seriesIndex=I,this.bubbleLegend=new i(O,this),this.bubbleLegend.addToLegend(S.allItems))}function E(S){let w;if(S.defaultPrevented)return!1;let R=this.chart,O=this.visible,I=this.chart.legend;I&&I.bubbleLegend&&(this.visible=!O,this.ignoreSeries=O,w=v(R)>=0,I.bubbleLegend.visible!==w&&(I.update({bubbleLegend:{enabled:w}}),I.bubbleLegend.visible=w),this.visible=O)}function L(S,w){let R=S.allItems,O=S.options.rtl,I,_,P,F,A=0;R.forEach((D,C)=>{(F=D.legendItem||{}).group&&(I=F.group.translateX||0,_=F.y||0,((P=D.movementX)||O&&D.ranges)&&(P=O?I-D.options.maxSize/2:I+P,F.group.attr({translateX:P})),C>w[A].step&&A++,F.group.attr({translateY:Math.round(_+w[A].height/2)}),F.y=_+w[A].height/2)})}return{compose:function(S,w,R){u(h,"Series.BubbleLegend")&&(a({legend:{bubbleLegend:e}}),p(S.prototype,"drawChartBox",b),c(w,"afterGetAllItems",m),c(R,"legendItemClick",E))}}}),s(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{seriesTypes:{scatter:{prototype:{pointClass:n}}}}=i,{extend:l}=r;class a extends n{haloPath(c){return e.prototype.haloPath.call(this,c===0?0:(this.marker&&this.marker.radius||0)+c)}}return l(a.prototype,{ttBelow:!1}),a}),s(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{parse:h}=r,{composed:c,noop:g}=n,{series:u,seriesTypes:{column:{prototype:p},scatter:b}}=l,{addEvent:v,arrayMax:x,arrayMin:m,clamp:E,extend:L,isNumber:S,merge:w,pick:R,pushUnique:O}=a;function I(){let P=this.len,{coll:F,isXAxis:A,min:D}=this,C=A?"xData":"yData",d=(this.max||0)-(D||0),f=0,y=P,M=P/d,k;(F==="xAxis"||F==="yAxis")&&(this.series.forEach(T=>{if(T.bubblePadding&&T.reserveSpace()){this.allowZoomOutside=!0,k=!0;let z=T[C];if(A&&((T.onPoint||T).getRadii(0,0,T),T.onPoint&&(T.radii=T.onPoint.radii)),d>0){let N=z.length;for(;N--;)if(S(z[N])&&this.dataMin<=z[N]&&z[N]<=this.max){let G=T.radii&&T.radii[N]||0;f=Math.min((z[N]-D)*M-G,f),y=Math.max((z[N]-D)*M+G,y)}}}}),k&&d>0&&!this.logarithmic&&(y-=P,M*=(P+Math.max(0,f)-Math.min(y,P))/P,[["min","userMin",f],["max","userMax",y]].forEach(T=>{R(this.options[T[0]],this[T[1]])===void 0&&(this[T[0]]+=T[2]/M)})))}class _ extends b{static compose(F,A,D,C){e.compose(A,D,C),O(c,"Series.Bubble")&&v(F,"foundExtremes",I)}animate(F){!F&&this.points.length<this.options.animationLimit&&this.points.forEach(function(A){let{graphic:D,plotX:C=0,plotY:d=0}=A;D&&D.width&&(this.hasRendered||D.attr({x:C,y:d,width:1,height:1}),D.animate(this.markerAttribs(A),this.options.animation))},this)}getRadii(){let F=this.zData,A=this.yData,D=[],C,d,f,y=this.chart.bubbleZExtremes,{minPxSize:M,maxPxSize:k}=this.getPxExtremes();if(!y){let T,z=Number.MAX_VALUE,N=-Number.MAX_VALUE;this.chart.series.forEach(G=>{if(G.bubblePadding&&G.reserveSpace()){let X=(G.onPoint||G).getZExtremes();X&&(z=Math.min(R(z,X.zMin),X.zMin),N=Math.max(R(N,X.zMax),X.zMax),T=!0)}}),T?(y={zMin:z,zMax:N},this.chart.bubbleZExtremes=y):y={zMin:0,zMax:0}}for(d=0,C=F.length;d<C;d++)f=F[d],D.push(this.getRadius(y.zMin,y.zMax,M,k,f,A&&A[d]));this.radii=D}getRadius(F,A,D,C,d,f){let y=this.options,M=y.sizeBy!=="width",k=y.zThreshold,T=A-F,z=.5;if(f===null||d===null)return null;if(S(d)){if(y.sizeByAbsoluteValue&&(d=Math.abs(d-k),A=T=Math.max(A-k,Math.abs(F-k)),F=0),d<F)return D/2-1;T>0&&(z=(d-F)/T)}return M&&z>=0&&(z=Math.sqrt(z)),Math.ceil(D+z*(C-D))/2}hasData(){return!!this.processedXData.length}markerAttribs(F,A){let D=super.markerAttribs(F,A),{height:C=0,width:d=0}=D;return this.chart.inverted?L(D,{x:(F.plotX||0)-d/2,y:(F.plotY||0)-C/2}):D}pointAttribs(F,A){let D=this.options.marker.fillOpacity,C=u.prototype.pointAttribs.call(this,F,A);return D!==1&&(C.fill=h(C.fill).setOpacity(D).get("rgba")),C}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:F,options:A,radii:D}=this,{minPxSize:C}=this.getPxExtremes(),d=F.length;for(;d--;){let f=F[d],y=D?D[d]:0;this.zoneAxis==="z"&&(f.negative=(f.z||0)<(A.zThreshold||0)),S(y)&&y>=C/2?(f.marker=L(f.marker,{radius:y,width:2*y,height:2*y}),f.dlBox={x:f.plotX-y,y:f.plotY-y,width:2*y,height:2*y}):(f.shapeArgs=f.plotY=f.dlBox=void 0,f.isInside=!1)}}getPxExtremes(){let F=Math.min(this.chart.plotWidth,this.chart.plotHeight),A=d=>{let f;return typeof d=="string"&&(f=/%$/.test(d),d=parseInt(d,10)),f?F*d/100:d},D=A(R(this.options.minSize,8)),C=Math.max(A(R(this.options.maxSize,"20%")),D);return{minPxSize:D,maxPxSize:C}}getZExtremes(){let F=this.options,A=(this.zData||[]).filter(S);if(A.length){let D=R(F.zMin,E(m(A),F.displayNegative===!1?F.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),C=R(F.zMax,x(A));if(S(D)&&S(C))return{zMin:D,zMax:C}}}}return _.defaultOptions=w(b.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:P}=this.series.chart,{z:F}=this.point;return S(F)?P(F,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),L(_.prototype,{alignDataLabel:p.alignDataLabel,applyZones:g,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:i,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),v(_,"updatedData",P=>{delete P.target.chart.bubbleZExtremes}),v(_,"remove",P=>{delete P.target.chart.bubbleZExtremes}),l.registerSeriesType("bubble",_),_}),s(t,"Series/MapBubble/MapBubblePoint.js",[t["Series/Bubble/BubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{seriesTypes:{map:{prototype:{pointClass:{prototype:n}}}}}=i,{extend:l}=r;class a extends e{isValid(){return typeof this.z=="number"}}return l(a.prototype,{applyOptions:n.applyOptions,getProjectedBounds:n.getProjectedBounds}),a}),s(t,"Series/MapBubble/MapBubbleSeries.js",[t["Series/Bubble/BubbleSeries.js"],t["Series/MapBubble/MapBubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{seriesTypes:{map:{prototype:l},mappoint:{prototype:a}}}=r,{extend:h,merge:c}=n;class g extends e{constructor(){super(...arguments),this.clearBounds=l.clearBounds}searchPoint(p,b){return this.searchKDTree({plotX:p.chartX-this.chart.plotLeft,plotY:p.chartY-this.chart.plotTop},b,p)}translate(){a.translate.call(this),this.getRadii(),this.translateBubble()}updateParallelArrays(p,b,v){super.updateParallelArrays.call(this,p,b,v);let x=this.processedXData,m=this.xData;x&&m&&(x.length=m.length)}}return g.defaultOptions=c(e.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),h(g.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:l.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:i,processData:l.processData,projectPoint:a.projectPoint,kdAxisArray:["plotX","plotY"],setData:l.setData,setOptions:l.setOptions,updateData:l.updateData,useMapGeometry:!0,xyFromShape:!0}),r.registerSeriesType("mapbubble",g),g}),s(t,"Series/Heatmap/HeatmapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i){let{scatter:{prototype:{pointClass:r}}}=e.seriesTypes,{clamp:n,defined:l,extend:a,pick:h}=i;class c extends r{applyOptions(u,p){return(this.isNull||this.value===null)&&delete this.color,super.applyOptions(u,p),this.formatPrefix=this.isNull||this.value===null?"null":"point",this}getCellAttributes(){let u=this.series,p=u.options,b=(p.colsize||1)/2,v=(p.rowsize||1)/2,x=u.xAxis,m=u.yAxis,E=this.options.marker||u.options.marker,L=u.pointPlacementToXValue(),S=h(this.pointPadding,p.pointPadding,0),w={x1:n(Math.round(x.len-x.translate(this.x-b,!1,!0,!1,!0,-L)),-x.len,2*x.len),x2:n(Math.round(x.len-x.translate(this.x+b,!1,!0,!1,!0,-L)),-x.len,2*x.len),y1:n(Math.round(m.translate(this.y-v,!1,!0,!1,!0)),-m.len,2*m.len),y2:n(Math.round(m.translate(this.y+v,!1,!0,!1,!0)),-m.len,2*m.len)};for(let R of[["width","x"],["height","y"]]){let O=R[0],I=R[1],_=I+"1",P=I+"2",F=Math.abs(w[_]-w[P]),A=E&&E.lineWidth||0,D=Math.abs(w[_]+w[P])/2,C=E&&E[O];if(l(C)&&C<F){let d=C/2+A/2;w[_]=D-d,w[P]=D+d}S&&((I==="x"&&x.reversed||I==="y"&&!m.reversed)&&(_=P,P=I+"1"),w[_]+=S,w[P]-=S)}return w}haloPath(u){if(!u)return[];let{x:p=0,y:b=0,width:v=0,height:x=0}=this.shapeArgs||{};return[["M",p-u,b-u],["L",p-u,b+x+u],["L",p+v+u,b+x+u],["L",p+v+u,b-u],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}return a(c.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),c}),s(t,"Series/Heatmap/HeatmapSeriesDefaults.js",[t["Core/Utilities.js"]],function(e){let{isNumber:i}=e;return{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:n}=this.point;return i(n)?r(n,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}}),s(t,"Series/InterpolationUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){let{doc:r}=e,{defined:n,pick:l}=i;return{colorFromPoint:function(a,h){let c=h.series.colorAxis;if(c){let g=c.toColor(a||0,h).split(")")[0].split("(")[1].split(",").map(u=>l(parseFloat(u),parseInt(u,10)));return g[3]=255*l(g[3],1),n(a)&&h.visible||(g[3]=0),g}return[0,0,0,0]},getContext:function(a){let{canvas:h,context:c}=a;return h&&c?(c.clearRect(0,0,h.width,h.height),c):(a.canvas=r.createElement("canvas"),a.context=a.canvas.getContext("2d",{willReadFrequently:!0})||void 0,a.context)}}}),s(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Series/Heatmap/HeatmapSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"],t["Series/InterpolationUtilities.js"]],function(e,i,r,n,l,a,h,c){let{series:g,seriesTypes:{column:u,scatter:p}}=l,{prototype:{symbols:b}}=a,{addEvent:v,extend:x,fireEvent:m,isNumber:E,merge:L,pick:S}=h,{colorFromPoint:w,getContext:R}=c;class O extends p{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let _=this,P=_.options,F=P.interpolation,A=P.marker||{};if(F){let{image:D,chart:C,xAxis:d,yAxis:f}=_,{reversed:y=!1,len:M}=d,{reversed:k=!1,len:T}=f,z={width:M,height:T};if(!D||_.isDirtyData||_.isDirtyCanvas){let N=R(_),{canvas:G,options:{colsize:X=1,rowsize:j=1},points:B,points:{length:W}}=_,Y=C.colorAxis&&C.colorAxis[0];if(G&&N&&Y){let{min:U,max:q}=d.getExtremes(),{min:H,max:V}=f.getExtremes(),Z=q-U,K=V-H,J=Math.round(Z/X/8*8),tt=Math.round(K/j/8*8),[$,Q]=[[J,J/Z,y,"ceil"],[tt,tt/K,!k,"floor"]].map(([ot,at,ct,ht])=>ct?lt=>Math[ht](ot-at*lt):lt=>Math[ht](at*lt)),et=G.width=J+1,it=et*(G.height=tt+1),st=(W-1)/it,rt=new Uint8ClampedArray(4*it),nt=(ot,at)=>4*Math.ceil(et*Q(at-H)+$(ot-U));_.buildKDTree();for(let ot=0;ot<it;ot++){let at=B[Math.ceil(st*ot)],{x:ct,y:ht}=at;rt.set(w(at.value,at),nt(ct,ht))}N.putImageData(new ImageData(rt,et),0,0),D?D.attr(qi(xe({},z),{href:G.toDataURL("image/png",1)})):(_.directTouch=!1,_.image=C.renderer.image(G.toDataURL("image/png",1)).attr(z).add(_.group))}_.isDirtyCanvas=!1}else(D.width!==M||D.height!==T)&&D.attr(z)}else(A.enabled||_._hasPointMarkers)&&(g.prototype.drawPoints.call(_),_.points.forEach(D=>{D.graphic&&(D.graphic[_.chart.styledMode?"css":"animate"](_.colorAttribs(D)),D.value===null&&D.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:_,dataMax:P}=g.prototype.getExtremes.call(this,this.valueData);return E(_)&&(this.valueMin=_),E(P)&&(this.valueMax=P),g.prototype.getExtremes.call(this)}getValidPoints(_,P){return g.prototype.getValidPoints.call(this,_,P,!0)}hasData(){return!!this.processedXData.length}init(){super.init.apply(this,arguments);let _=this.options;_.pointRange=S(_.pointRange,_.colsize||1),this.yAxis.axisPointRange=_.rowsize||1,b.ellipse=b.circle,_.marker&&E(_.borderRadius)&&(_.marker.r=_.borderRadius)}markerAttribs(_,P){let F=_.shapeArgs||{};if(_.hasImage)return{x:_.plotX,y:_.plotY};if(P&&P!=="normal"){let A=_.options.marker||{},D=this.options.marker||{},C=D.states&&D.states[P]||{},d=A.states&&A.states[P]||{},f=(d.width||C.width||F.width||0)+(d.widthPlus||C.widthPlus||0),y=(d.height||C.height||F.height||0)+(d.heightPlus||C.heightPlus||0);return{x:(F.x||0)+((F.width||0)-f)/2,y:(F.y||0)+((F.height||0)-y)/2,width:f,height:y}}return F}pointAttribs(_,P){let F=g.prototype.pointAttribs.call(this,_,P),A=this.options||{},D=this.chart.options.plotOptions||{},C=D.series||{},d=D.heatmap||{},f=_&&_.options.borderColor||A.borderColor||d.borderColor||C.borderColor,y=_&&_.options.borderWidth||A.borderWidth||d.borderWidth||C.borderWidth||F["stroke-width"];if(F.stroke=_&&_.marker&&_.marker.lineColor||A.marker&&A.marker.lineColor||f||this.color,F["stroke-width"]=y,P&&P!=="normal"){let M=L(A.states&&A.states[P],A.marker&&A.marker.states&&A.marker.states[P],_&&_.options.states&&_.options.states[P]||{});F.fill=M.color||e.parse(F.fill).brighten(M.brightness||0).get(),F.stroke=M.lineColor||F.stroke}return F}translate(){let{borderRadius:_,marker:P}=this.options,F=P&&P.symbol||"rect",A=b[F]?F:"rect",D=["circle","square"].indexOf(A)!==-1;for(let C of(this.generatePoints(),this.points)){let d=C.getCellAttributes(),f=Math.min(d.x1,d.x2),y=Math.min(d.y1,d.y2),M=Math.max(Math.abs(d.x2-d.x1),0),k=Math.max(Math.abs(d.y2-d.y1),0);if(C.hasImage=(C.marker&&C.marker.symbol||F||"").indexOf("url")===0,D){let T=Math.abs(M-k);f=Math.min(d.x1,d.x2)+(M<k?0:T/2),y=Math.min(d.y1,d.y2)+(M<k?T/2:0),M=k=Math.min(M,k)}C.hasImage&&(C.marker={width:M,height:k}),C.plotX=C.clientX=(d.x1+d.x2)/2,C.plotY=(d.y1+d.y2)/2,C.shapeType="path",C.shapeArgs=L(!0,{x:f,y,width:M,height:k},{d:b[A](f,y,M,k,{r:E(_)?_:0})})}m(this,"afterTranslate")}}return O.defaultOptions=L(p.defaultOptions,n),v(O,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),x(O.prototype,{axisTypes:i.seriesMembers.axisTypes,colorKey:i.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:i.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:r,specialGroup:"group",trackerGroups:i.seriesMembers.trackerGroups,alignDataLabel:u.prototype.alignDataLabel,colorAttribs:i.seriesMembers.colorAttribs,getSymbol:g.prototype.getSymbol}),i.compose(O),l.registerSeriesType("heatmap",O),O}),s(t,"masters/modules/map.src.js",[t["Core/Globals.js"],t["Maps/MapNavigation.js"],t["Series/ColorMapComposition.js"],t["Series/MapBubble/MapBubbleSeries.js"],t["Maps/GeoJSONComposition.js"],t["Core/Chart/MapChart.js"],t["Maps/MapView.js"],t["Maps/Projection.js"]],function(e,i,r,n,l,a,h,c){return e.ColorMapComposition=r,e.MapChart=e.MapChart||a,e.MapNavigation=e.MapNavigation||i,e.MapView=e.MapView||h,e.Projection=e.Projection||c,e.mapChart=e.Map=e.MapChart.mapChart,e.maps=e.MapChart.maps,e.geojson=l.geojson,e.topo2geo=l.topo2geo,l.compose(e.Chart),n.compose(e.Axis,e.Chart,e.Legend,e.Series),i.compose(a,e.Pointer,e.SVGRenderer),h.compose(a),e})})});var Su=qe((yT,Bn)=>{"use strict";(function(o){typeof Bn=="object"&&Bn.exports?(o.default=o,Bn.exports=o):typeof define=="function"&&define.amd?define("highcharts/highcharts-more",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function s(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}s(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(e){let{addEvent:i,correctFloat:r,defined:n,pick:l}=e;function a(p){let b,v=this;return p&&v.pane.forEach(x=>{h(p.chartX-v.plotLeft,p.chartY-v.plotTop,x.center)&&(b=x)}),b}function h(p,b,v,x,m){let E=!0,L=v[0],S=v[1];if(n(x)&&n(m)){let w=Math.atan2(r(b-S,8),r(p-L,8));m!==x&&(E=x>m?w>=x&&w<=Math.PI||w<=m&&w>=-Math.PI:w>=x&&w<=r(m,8))}return Math.sqrt(Math.pow(p-L,2)+Math.pow(b-S,2))<=Math.ceil(v[2]/2)&&E}function c(p){this.polar&&(p.options.inverted&&([p.x,p.y]=[p.y,p.x]),p.isInsidePlot=this.pane.some(b=>h(p.x,p.y,b.center,b.axis&&b.axis.normalizedStartAngleRad,b.axis&&b.axis.normalizedEndAngleRad)))}function g(p){let b=this.chart;p.hoverPoint&&p.hoverPoint.plotX&&p.hoverPoint.plotY&&b.hoverPane&&!h(p.hoverPoint.plotX,p.hoverPoint.plotY,b.hoverPane.center)&&(p.hoverPoint=void 0)}function u(p){let b=this.chart;b.polar?(b.hoverPane=b.getHoverPane(p),p.filter=function(v){return v.visible&&!(!p.shared&&v.directTouch)&&l(v.options.enableMouseTracking,!0)&&(!b.hoverPane||v.xAxis.pane===b.hoverPane)}):b.hoverPane=void 0}return{compose:function(p,b){let v=p.prototype;v.getHoverPane||(v.collectionsWithUpdate.push("pane"),v.getHoverPane=a,i(p,"afterIsInsidePlot",c),i(b,"afterGetHoverData",g),i(b,"beforeGetHoverData",u))}}}),s(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),s(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{extend:l,merge:a,splat:h}=n;class c{constructor(u,p){this.coll="pane",this.init(u,p)}init(u,p){this.chart=p,this.background=[],p.pane.push(this),this.setOptions(u)}setOptions(u){this.options=u=a(r.pane,this.chart.angular?{background:{}}:void 0,u)}render(){let u=this.options,p=this.chart.renderer;this.group||(this.group=p.g("pane-group").attr({zIndex:u.zIndex||0}).add()),this.updateCenter();let b=this.options.background;if(b){let v=Math.max((b=h(b)).length,this.background.length||0);for(let x=0;x<v;x++)b[x]&&this.axis?this.renderBackground(a(r.background,b[x]),x):this.background[x]&&(this.background[x]=this.background[x].destroy(),this.background.splice(x,1))}}renderBackground(u,p){let b={class:"highcharts-pane "+(u.className||"")},v="animate";this.chart.styledMode||l(b,{fill:u.backgroundColor,stroke:u.borderColor,"stroke-width":u.borderWidth}),this.background[p]||(this.background[p]=this.chart.renderer.path().add(this.group),v="attr"),this.background[p][v]({d:this.axis.getPlotBandPath(u.from,u.to,u)}).attr(b)}updateCenter(u){this.center=(u||this.axis||{}).center=e.getCenter.call(this)}update(u,p){a(!0,this.options,u),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(b){b.pane===this&&(b.pane=null,b.update({},p))},this)}}return c.compose=i.compose,c}),s(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i){let{area:{prototype:{pointClass:r,pointClass:{prototype:n}}}}=e.seriesTypes,{defined:l,isNumber:a}=i;return class extends r{setState(){let h=this.state,c=this.series,g=c.chart.polar;l(this.plotHigh)||(this.plotHigh=c.yAxis.toPixels(this.high,!0)),l(this.plotLow)||(this.plotLow=this.plotY=c.yAxis.toPixels(this.low,!0)),c.lowerStateMarkerGraphic=c.stateMarkerGraphic,c.stateMarkerGraphic=c.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,g&&a(this.plotHighX)&&(this.plotX=this.plotHighX),n.setState.apply(this,arguments),this.state=h,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],g&&a(this.plotLowX)&&(this.plotX=this.plotLowX),c.upperStateMarkerGraphic=c.stateMarkerGraphic,c.stateMarkerGraphic=c.lowerStateMarkerGraphic,c.lowerStateMarkerGraphic=void 0;let u=c.modifyMarkerSettings();n.setState.apply(this,arguments),c.restoreMarkerSettings(u)}haloPath(){let h=this.series.chart.polar,c=[];return this.plotY=this.plotLow,h&&a(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(c=n.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,h&&a(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(c=c.concat(n.haloPath.apply(this,arguments))),c}isValid(){return a(this.low)&&a(this.high)}}}),s(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{noop:l}=i,{area:a,area:{prototype:h},column:{prototype:c}}=r.seriesTypes,{addEvent:g,defined:u,extend:p,isArray:b,isNumber:v,pick:x,merge:m}=n;class E extends a{toYData(S){return[S.low,S.high]}highToXY(S){let w=this.chart,R=this.xAxis.postTranslate(S.rectPlotX||0,this.yAxis.len-(S.plotHigh||0));S.plotHighX=R.x-w.plotLeft,S.plotHigh=R.y-w.plotTop,S.plotLowX=S.plotX}getGraphPath(S){let w=[],R=[],O=h.getGraphPath,I=this.options,_=this.chart.polar,P=_&&I.connectEnds!==!1,F=I.connectNulls,A,D,C,d=I.step;for(A=(S=S||this.points).length;A--;){D=S[A];let T=_?{plotX:D.rectPlotX,plotY:D.yBottom,doCurve:!1}:{plotX:D.plotX,plotY:D.plotY,doCurve:!1};D.isNull||P||F||S[A+1]&&!S[A+1].isNull||R.push(T),C={polarPlotY:D.polarPlotY,rectPlotX:D.rectPlotX,yBottom:D.yBottom,plotX:x(D.plotHighX,D.plotX),plotY:D.plotHigh,isNull:D.isNull},R.push(C),w.push(C),D.isNull||P||F||S[A-1]&&!S[A-1].isNull||R.push(T)}let f=O.call(this,S);d&&(d===!0&&(d="left"),I.step={left:"right",center:"center",right:"left"}[d]);let y=O.call(this,w),M=O.call(this,R);I.step=d;let k=[].concat(f,y);return!this.chart.polar&&M[0]&&M[0][0]==="M"&&(M[0]=["L",M[0][1],M[0][2]]),this.graphPath=k,this.areaPath=f.concat(M),k.isArea=!0,k.xMap=f.xMap,this.areaPath.xMap=f.xMap,k}drawDataLabels(){let S,w,R,O,I,_=this.points,P=_.length,F=[],A=this.options.dataLabels,D=this.chart.inverted;if(A){if(b(A)?(O=A[0]||{enabled:!1},I=A[1]||{enabled:!1}):((O=p({},A)).x=A.xHigh,O.y=A.yHigh,(I=p({},A)).x=A.xLow,I.y=A.yLow),O.enabled||this.hasDataLabels?.()){for(S=P;S--;)if(w=_[S]){let{plotHigh:C=0,plotLow:d=0}=w;R=O.inside?C<d:C>d,w.y=w.high,w._plotY=w.plotY,w.plotY=C,F[S]=w.dataLabel,w.dataLabel=w.dataLabelUpper,w.below=R,D?O.align||(O.align=R?"right":"left"):O.verticalAlign||(O.verticalAlign=R?"top":"bottom")}for(this.options.dataLabels=O,h.drawDataLabels&&h.drawDataLabels.apply(this,arguments),S=P;S--;)(w=_[S])&&(w.dataLabelUpper=w.dataLabel,w.dataLabel=F[S],delete w.dataLabels,w.y=w.low,w.plotY=w._plotY)}if(I.enabled||this.hasDataLabels?.()){for(S=P;S--;)if(w=_[S]){let{plotHigh:C=0,plotLow:d=0}=w;R=I.inside?C<d:C>d,w.below=!R,D?I.align||(I.align=R?"left":"right"):I.verticalAlign||(I.verticalAlign=R?"bottom":"top")}this.options.dataLabels=I,h.drawDataLabels&&h.drawDataLabels.apply(this,arguments)}if(O.enabled)for(S=P;S--;)(w=_[S])&&(w.dataLabels=[w.dataLabelUpper,w.dataLabel].filter(function(C){return!!C}));this.options.dataLabels=A}}alignDataLabel(){c.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let S={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:w,lowMarker:R}}=this;this.options.marker=m(w,R),R.symbol&&(this.symbol=R.symbol)}return S}restoreMarkerSettings(S){this.options.marker=S.marker,this.symbol=S.symbol}drawPoints(){let S,w,R=this.points.length,O=this.modifyMarkerSettings();for(h.drawPoints.apply(this,arguments),this.restoreMarkerSettings(O),S=0;S<R;)(w=this.points[S]).graphics=w.graphics||[],w.origProps={plotY:w.plotY,plotX:w.plotX,isInside:w.isInside,negative:w.negative,zone:w.zone,y:w.y},(w.graphic||w.graphics[0])&&(w.graphics[0]=w.graphic),w.graphic=w.graphics[1],w.plotY=w.plotHigh,u(w.plotHighX)&&(w.plotX=w.plotHighX),w.y=x(w.high,w.origProps.y),w.negative=w.y<(this.options.threshold||0),this.zones.length&&(w.zone=w.getZone()),this.chart.polar||(w.isInside=w.isTopInside=w.plotY!==void 0&&w.plotY>=0&&w.plotY<=this.yAxis.len&&w.plotX>=0&&w.plotX<=this.xAxis.len),S++;for(h.drawPoints.apply(this,arguments),S=0;S<R;)(w=this.points[S]).graphics=w.graphics||[],(w.graphic||w.graphics[1])&&(w.graphics[1]=w.graphic),w.graphic=w.graphics[0],w.origProps&&(p(w,w.origProps),delete w.origProps),S++}hasMarkerChanged(S,w){let R=S.lowMarker,O=w.lowMarker||{};return R&&(R.enabled===!1||O.symbol!==R.symbol||O.height!==R.height||O.width!==R.width)||super.hasMarkerChanged(S,w)}}return E.defaultOptions=m(a.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),g(E,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(L=>{let S=L.high,w=L.plotY;L.isNull?L.plotY=void 0:(L.plotLow=w,L.plotHigh=v(S)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(S):S,!1,!0,void 0,!0):void 0,this.dataModify&&(L.yBottom=L.plotHigh))})},{order:0}),g(E,"afterTranslate",function(){this.points.forEach(L=>{if(this.chart.polar)this.highToXY(L),L.plotLow=L.plotY,L.tooltipPos=[((L.plotHighX||0)+(L.plotLowX||0))/2,((L.plotHigh||0)+(L.plotLow||0))/2];else{let S=L.pos(!1,L.plotLow),w=L.pos(!1,L.plotHigh);S&&w&&(S[0]=(S[0]+w[0])/2,S[1]=(S[1]+w[1])/2),L.tooltipPos=S}})},{order:3}),p(E.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:e,pointValKey:"low",setStackedPoints:l}),r.registerSeriesType("arearange",E),E}),s(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{spline:{prototype:n}}=i.seriesTypes,{merge:l,extend:a}=r;class h extends e{}return h.defaultOptions=l(e.defaultOptions),a(h.prototype,{getPointSpline:n.getPointSpline}),i.registerSeriesType("areasplinerange",h),h}),s(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),s(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l){let{noop:a}=r,{crisp:h,extend:c,merge:g,pick:u}=l;class p extends i{pointAttribs(){return{}}translate(){let v=this.yAxis,x=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(m){x.forEach(function(E){m[E]!==null&&(m[E+"Plot"]=v.translate(m[E],0,1,0,1))}),m.plotHigh=m.highPlot})}drawPoints(){let v,x,m,E,L,S,w,R,O,I,_,P,F,A=this.points,D=this.options,C=this.chart,d=C.renderer,f=this.doQuartiles!==!1,y=this.options.whiskerLength;for(let M of A){let k=(R=M.graphic)?"animate":"attr",T=M.shapeArgs,z={},N={},G={},X={},j=M.color||this.color;if(M.plotY!==void 0){let B;O=T.width,_=(I=T.x)+O,P=O/2,v=f?M.q1Plot:M.lowPlot,x=f?M.q3Plot:M.lowPlot,m=M.highPlot,E=M.lowPlot,R||(M.graphic=R=d.g("point").add(this.group),M.stem=d.path().addClass("highcharts-boxplot-stem").add(R),y&&(M.whiskers=d.path().addClass("highcharts-boxplot-whisker").add(R)),f&&(M.box=d.path(w).addClass("highcharts-boxplot-box").add(R)),M.medianShape=d.path(S).addClass("highcharts-boxplot-median").add(R)),C.styledMode||(N.stroke=M.stemColor||D.stemColor||j,N["stroke-width"]=u(M.stemWidth,D.stemWidth,D.lineWidth),N.dashstyle=M.stemDashStyle||D.stemDashStyle||D.dashStyle,M.stem.attr(N),y&&(G.stroke=M.whiskerColor||D.whiskerColor||j,G["stroke-width"]=u(M.whiskerWidth,D.whiskerWidth,D.lineWidth),G.dashstyle=M.whiskerDashStyle||D.whiskerDashStyle||D.dashStyle,M.whiskers.attr(G)),f&&(z.fill=M.fillColor||D.fillColor||j,z.stroke=D.lineColor||j,z["stroke-width"]=D.lineWidth||0,z.dashstyle=M.boxDashStyle||D.boxDashStyle||D.dashStyle,M.box.attr(z)),X.stroke=M.medianColor||D.medianColor||j,X["stroke-width"]=u(M.medianWidth,D.medianWidth,D.lineWidth),X.dashstyle=M.medianDashStyle||D.medianDashStyle||D.dashStyle,M.medianShape.attr(X));let W=h(M.plotX||0,M.stem.strokeWidth());if(B=[["M",W,x],["L",W,m],["M",W,v],["L",W,E]],M.stem[k]({d:B}),f){let Y=M.box.strokeWidth();v=h(v,Y),x=h(x,Y),B=[["M",I=h(I,Y),x],["L",I,v],["L",_=h(_,Y),v],["L",_,x],["L",I,x],["Z"]],M.box[k]({d:B})}if(y){let Y=M.whiskers.strokeWidth();m=h(M.highPlot,Y),E=h(M.lowPlot,Y),B=[["M",h(W-(F=typeof y=="string"&&/%$/.test(y)?P*parseFloat(y)/100:Number(y)/2)),m],["L",h(W+F),m],["M",h(W-F),E],["L",h(W+F),E]],M.whiskers[k]({d:B})}B=[["M",I,L=h(M.medianPlot,M.medianShape.strokeWidth())],["L",_,L]],M.medianShape[k]({d:B})}}}toYData(v){return[v.low,v.q1,v.median,v.q3,v.high]}}return p.defaultOptions=g(i.defaultOptions,e),c(p.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:a,setStackedPoints:a}),n.registerSeriesType("boxplot",p),p}),s(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),s(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{parse:l}=e,{noop:a}=r,{arrayMax:h,arrayMin:c,isNumber:g,merge:u,pick:p,stableSort:b}=n;return class{constructor(v,x){this.setState=a,this.init(v,x)}init(v,x){this.options=v,this.visible=!0,this.chart=x.chart,this.legend=x}addToLegend(v){v.splice(this.options.legendIndex,0,this)}drawLegendSymbol(v){let x,m=p(v.options.itemDistance,20),E=this.legendItem||{},L=this.options,S=L.ranges,w=L.connectorDistance;if(!S||!S.length||!g(S[0].value)){v.options.bubbleLegend.autoRanges=!0;return}b(S,function(_,P){return P.value-_.value}),this.ranges=S,this.setOptions(),this.render();let R=this.getMaxLabelSize(),O=this.ranges[0].radius,I=2*O;x=(x=w-O+R.width)>0?x:0,this.maxLabel=R,this.movementX=L.labels.align==="left"?x:0,E.labelWidth=I+x+m,E.labelHeight=I+R.height/2}setOptions(){let v=this.ranges,x=this.options,m=this.chart.series[x.seriesIndex],E=this.legend.baseline,L={zIndex:x.zIndex,"stroke-width":x.borderWidth},S={zIndex:x.zIndex,"stroke-width":x.connectorWidth},w={align:this.legend.options.rtl||x.labels.align==="left"?"right":"left",zIndex:x.zIndex},R=m.options.marker.fillOpacity,O=this.chart.styledMode;v.forEach(function(I,_){O||(L.stroke=p(I.borderColor,x.borderColor,m.color),L.fill=p(I.color,x.color,R!==1?l(m.color).setOpacity(R).get("rgba"):m.color),S.stroke=p(I.connectorColor,x.connectorColor,m.color)),v[_].radius=this.getRangeRadius(I.value),v[_]=u(v[_],{center:v[0].radius-v[_].radius+E}),O||u(!0,v[_],{bubbleAttribs:u(L),connectorAttribs:u(S),labelAttribs:w})},this)}getRangeRadius(v){let x=this.options,m=this.options.seriesIndex,E=this.chart.series[m],L=x.ranges[0].value,S=x.ranges[x.ranges.length-1].value,w=x.minSize,R=x.maxSize;return E.getRadius.call(this,S,L,w,R,v)}render(){let v=this.legendItem||{},x=this.chart.renderer,m=this.options.zThreshold;for(let E of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),v.symbol=x.g("bubble-legend"),v.label=x.g("bubble-legend-item").css(this.legend.itemStyle||{}),v.symbol.translateX=0,v.symbol.translateY=0,v.symbol.add(v.label),v.label.add(v.group),this.ranges))E.value>=m&&this.renderRange(E);this.hideOverlappingLabels()}renderRange(v){let x=this.ranges[0],m=this.legend,E=this.options,L=E.labels,S=this.chart,w=S.series[E.seriesIndex],R=S.renderer,O=this.symbols,I=O.labels,_=v.center,P=Math.abs(v.radius),F=E.connectorDistance||0,A=L.align,D=m.options.rtl,C=E.borderWidth,d=E.connectorWidth,f=x.radius||0,y=_-P-C/2+d/2,M=(y%1?1:.5)-(d%2?0:.5),k=R.styledMode,T=D||A==="left"?-F:F;A==="center"&&(T=0,E.connectorDistance=0,v.labelAttribs.align="center"),O.bubbleItems.push(R.circle(f,_+M,P).attr(k?{}:v.bubbleAttribs).addClass((k?"highcharts-color-"+w.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(E.className||"")).add(this.legendItem.symbol)),O.connectors.push(R.path(R.crispLine([["M",f,y],["L",f+T,y]],E.connectorWidth)).attr(k?{}:v.connectorAttribs).addClass((k?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(E.connectorClassName||"")).add(this.legendItem.symbol));let z=R.text(this.formatLabel(v)).attr(k?{}:v.labelAttribs).css(k?{}:L.style).addClass("highcharts-bubble-legend-labels "+(E.labels.className||"")).add(this.legendItem.symbol),N={x:f+T+E.labels.x,y:y+E.labels.y+.4*z.getBBox().height};z.attr(N),I.push(z),z.placed=!0,z.alignAttr=N}getMaxLabelSize(){let v,x;return this.symbols.labels.forEach(function(m){x=m.getBBox(!0),v=v?x.width>v.width?x:v:x}),v||{}}formatLabel(v){let x=this.options,m=x.labels.formatter,E=x.labels.format,{numberFormatter:L}=this.chart;return E?i.format(E,v):m?m.call(v):L(v.value,1)}hideOverlappingLabels(){let v=this.chart,x=this.options.labels.allowOverlap,m=this.symbols;!x&&m&&(v.hideOverlappingLabels(m.labels),m.labels.forEach(function(E,L){E.newOpacity?E.newOpacity!==E.oldOpacity&&m.connectors[L].show():m.connectors[L].hide()}))}getRanges(){let v=this.legend.bubbleLegend,x=v.chart.series,m=v.options.ranges,E,L,S=Number.MAX_VALUE,w=-Number.MAX_VALUE;return x.forEach(function(R){R.isBubble&&!R.ignoreSeries&&(L=R.zData.filter(g)).length&&(S=p(R.options.zMin,Math.min(S,Math.max(c(L),R.options.displayNegative===!1?R.options.zThreshold:-Number.MAX_VALUE))),w=p(R.options.zMax,Math.max(w,h(L))))}),E=S===w?[{value:w}]:[{value:S},{value:(S+w)/2},{value:w,autoRanges:!0}],m.length&&m[0].radius&&E.reverse(),E.forEach(function(R,O){m&&m[O]&&(E[O]=u(m[O],R))}),E}predictBubbleSizes(){let v=this.chart,x=v.legend.options,m=x.floating,E=x.layout==="horizontal",L=E?v.legend.lastLineHeight:0,S=v.plotSizeX,w=v.plotSizeY,R=v.series[this.options.seriesIndex],O=R.getPxExtremes(),I=Math.ceil(O.minPxSize),_=Math.ceil(O.maxPxSize),P,F=R.options.maxSize;return m||!/%$/.test(F)?P=_:(P=(Math.min(w,S)+L)*(F=parseFloat(F))/100/(F/100+1),(E&&w-P>=S||!E&&S-P>=w)&&(P=_)),[I,Math.ceil(P)]}updateRanges(v,x){let m=this.legend.options.bubbleLegend;m.minSize=v,m.maxSize=x,m.ranges=this.getRanges()}correctSizes(){let v=this.legend,x=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(x.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,x.maxPxSize),v.render())}}}),s(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r,n,l){let{setOptions:a}=r,{composed:h}=n,{addEvent:c,objectEach:g,pushUnique:u,wrap:p}=l;function b(S,w,R){let O,I,_,P=this.legend,F=v(this)>=0;P&&P.options.enabled&&P.bubbleLegend&&P.options.bubbleLegend.autoRanges&&F?(O=P.bubbleLegend.options,I=P.bubbleLegend.predictBubbleSizes(),P.bubbleLegend.updateRanges(I[0],I[1]),O.placed||(P.group.placed=!1,P.allItems.forEach(A=>{(_=A.legendItem||{}).group&&(_.group.translateY=void 0)})),P.render(),O.placed||(this.getMargins(),this.axes.forEach(function(A){A.visible&&A.render(),O.placed||(A.setScale(),A.updateNames(),g(A.ticks,function(D){D.isNew=!0,D.isNewLabel=!0}))}),this.getMargins()),O.placed=!0,S.call(this,w,R),P.bubbleLegend.correctSizes(),L(P,x(P))):(S.call(this,w,R),P&&P.options.enabled&&P.bubbleLegend&&(P.render(),L(P,x(P))))}function v(S){let w=S.series,R=0;for(;R<w.length;){if(w[R]&&w[R].isBubble&&w[R].visible&&w[R].zData.length)return R;R++}return-1}function x(S){let w=S.allItems,R=[],O=w.length,I,_,P,F=0,A=0;for(F=0;F<O;F++)if(_=w[F].legendItem||{},P=(w[F+1]||{}).legendItem||{},_.labelHeight&&(w[F].itemHeight=_.labelHeight),w[F]===w[O-1]||_.y!==P.y){for(R.push({height:0}),I=R[R.length-1];A<=F;A++)w[A].itemHeight>I.height&&(I.height=w[A].itemHeight);I.step=F}return R}function m(S){let w=this.bubbleLegend,R=this.options,O=R.bubbleLegend,I=v(this.chart);w&&w.ranges&&w.ranges.length&&(O.ranges.length&&(O.autoRanges=!!O.ranges[0].autoRanges),this.destroyItem(w)),I>=0&&R.enabled&&O.enabled&&(O.seriesIndex=I,this.bubbleLegend=new i(O,this),this.bubbleLegend.addToLegend(S.allItems))}function E(S){let w;if(S.defaultPrevented)return!1;let R=this.chart,O=this.visible,I=this.chart.legend;I&&I.bubbleLegend&&(this.visible=!O,this.ignoreSeries=O,w=v(R)>=0,I.bubbleLegend.visible!==w&&(I.update({bubbleLegend:{enabled:w}}),I.bubbleLegend.visible=w),this.visible=O)}function L(S,w){let R=S.allItems,O=S.options.rtl,I,_,P,F,A=0;R.forEach((D,C)=>{(F=D.legendItem||{}).group&&(I=F.group.translateX||0,_=F.y||0,((P=D.movementX)||O&&D.ranges)&&(P=O?I-D.options.maxSize/2:I+P,F.group.attr({translateX:P})),C>w[A].step&&A++,F.group.attr({translateY:Math.round(_+w[A].height/2)}),F.y=_+w[A].height/2)})}return{compose:function(S,w,R){u(h,"Series.BubbleLegend")&&(a({legend:{bubbleLegend:e}}),p(S.prototype,"drawChartBox",b),c(w,"afterGetAllItems",m),c(R,"legendItemClick",E))}}}),s(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{seriesTypes:{scatter:{prototype:{pointClass:n}}}}=i,{extend:l}=r;class a extends n{haloPath(c){return e.prototype.haloPath.call(this,c===0?0:(this.marker&&this.marker.radius||0)+c)}}return l(a.prototype,{ttBelow:!1}),a}),s(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{parse:h}=r,{composed:c,noop:g}=n,{series:u,seriesTypes:{column:{prototype:p},scatter:b}}=l,{addEvent:v,arrayMax:x,arrayMin:m,clamp:E,extend:L,isNumber:S,merge:w,pick:R,pushUnique:O}=a;function I(){let P=this.len,{coll:F,isXAxis:A,min:D}=this,C=A?"xData":"yData",d=(this.max||0)-(D||0),f=0,y=P,M=P/d,k;(F==="xAxis"||F==="yAxis")&&(this.series.forEach(T=>{if(T.bubblePadding&&T.reserveSpace()){this.allowZoomOutside=!0,k=!0;let z=T[C];if(A&&((T.onPoint||T).getRadii(0,0,T),T.onPoint&&(T.radii=T.onPoint.radii)),d>0){let N=z.length;for(;N--;)if(S(z[N])&&this.dataMin<=z[N]&&z[N]<=this.max){let G=T.radii&&T.radii[N]||0;f=Math.min((z[N]-D)*M-G,f),y=Math.max((z[N]-D)*M+G,y)}}}}),k&&d>0&&!this.logarithmic&&(y-=P,M*=(P+Math.max(0,f)-Math.min(y,P))/P,[["min","userMin",f],["max","userMax",y]].forEach(T=>{R(this.options[T[0]],this[T[1]])===void 0&&(this[T[0]]+=T[2]/M)})))}class _ extends b{static compose(F,A,D,C){e.compose(A,D,C),O(c,"Series.Bubble")&&v(F,"foundExtremes",I)}animate(F){!F&&this.points.length<this.options.animationLimit&&this.points.forEach(function(A){let{graphic:D,plotX:C=0,plotY:d=0}=A;D&&D.width&&(this.hasRendered||D.attr({x:C,y:d,width:1,height:1}),D.animate(this.markerAttribs(A),this.options.animation))},this)}getRadii(){let F=this.zData,A=this.yData,D=[],C,d,f,y=this.chart.bubbleZExtremes,{minPxSize:M,maxPxSize:k}=this.getPxExtremes();if(!y){let T,z=Number.MAX_VALUE,N=-Number.MAX_VALUE;this.chart.series.forEach(G=>{if(G.bubblePadding&&G.reserveSpace()){let X=(G.onPoint||G).getZExtremes();X&&(z=Math.min(R(z,X.zMin),X.zMin),N=Math.max(R(N,X.zMax),X.zMax),T=!0)}}),T?(y={zMin:z,zMax:N},this.chart.bubbleZExtremes=y):y={zMin:0,zMax:0}}for(d=0,C=F.length;d<C;d++)f=F[d],D.push(this.getRadius(y.zMin,y.zMax,M,k,f,A&&A[d]));this.radii=D}getRadius(F,A,D,C,d,f){let y=this.options,M=y.sizeBy!=="width",k=y.zThreshold,T=A-F,z=.5;if(f===null||d===null)return null;if(S(d)){if(y.sizeByAbsoluteValue&&(d=Math.abs(d-k),A=T=Math.max(A-k,Math.abs(F-k)),F=0),d<F)return D/2-1;T>0&&(z=(d-F)/T)}return M&&z>=0&&(z=Math.sqrt(z)),Math.ceil(D+z*(C-D))/2}hasData(){return!!this.processedXData.length}markerAttribs(F,A){let D=super.markerAttribs(F,A),{height:C=0,width:d=0}=D;return this.chart.inverted?L(D,{x:(F.plotX||0)-d/2,y:(F.plotY||0)-C/2}):D}pointAttribs(F,A){let D=this.options.marker.fillOpacity,C=u.prototype.pointAttribs.call(this,F,A);return D!==1&&(C.fill=h(C.fill).setOpacity(D).get("rgba")),C}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:F,options:A,radii:D}=this,{minPxSize:C}=this.getPxExtremes(),d=F.length;for(;d--;){let f=F[d],y=D?D[d]:0;this.zoneAxis==="z"&&(f.negative=(f.z||0)<(A.zThreshold||0)),S(y)&&y>=C/2?(f.marker=L(f.marker,{radius:y,width:2*y,height:2*y}),f.dlBox={x:f.plotX-y,y:f.plotY-y,width:2*y,height:2*y}):(f.shapeArgs=f.plotY=f.dlBox=void 0,f.isInside=!1)}}getPxExtremes(){let F=Math.min(this.chart.plotWidth,this.chart.plotHeight),A=d=>{let f;return typeof d=="string"&&(f=/%$/.test(d),d=parseInt(d,10)),f?F*d/100:d},D=A(R(this.options.minSize,8)),C=Math.max(A(R(this.options.maxSize,"20%")),D);return{minPxSize:D,maxPxSize:C}}getZExtremes(){let F=this.options,A=(this.zData||[]).filter(S);if(A.length){let D=R(F.zMin,E(m(A),F.displayNegative===!1?F.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),C=R(F.zMax,x(A));if(S(D)&&S(C))return{zMin:D,zMax:C}}}}return _.defaultOptions=w(b.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:P}=this.series.chart,{z:F}=this.point;return S(F)?P(F,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),L(_.prototype,{alignDataLabel:p.alignDataLabel,applyZones:g,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:i,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),v(_,"updatedData",P=>{delete P.target.chart.bubbleZExtremes}),v(_,"remove",P=>{delete P.target.chart.bubbleZExtremes}),l.registerSeriesType("bubble",_),_}),s(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i){let{seriesTypes:{column:{prototype:{pointClass:{prototype:r}}},arearange:{prototype:{pointClass:n}}}}=e,{extend:l,isNumber:a}=i;class h extends n{isValid(){return a(this.low)}}return l(h.prototype,{setState:r.setState}),h}),s(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{noop:l}=i,{seriesTypes:{arearange:a,column:h,column:{prototype:c}}}=r,{addEvent:g,clamp:u,extend:p,isNumber:b,merge:v,pick:x}=n;class m extends a{setOptions(){return v(!0,arguments[0],{stacking:void 0}),a.prototype.setOptions.apply(this,arguments)}translate(){return c.translate.apply(this)}pointAttribs(){return c.pointAttribs.apply(this,arguments)}translate3dPoints(){return c.translate3dPoints.apply(this,arguments)}translate3dShapes(){return c.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let L,S,w,R,O=this.yAxis,I=this.xAxis,_=I.startAngleRad,P=this.chart,F=this.xAxis.isRadial,A=Math.max(P.chartWidth,P.chartHeight)+999;this.points.forEach(D=>{let C=D.shapeArgs||{},d=this.options.minPointLength,f=D.plotY,y=O.translate(D.high,0,1,0,1);if(b(y)&&b(f))if(D.plotHigh=u(y,-A,A),D.plotLow=u(f,-A,A),R=D.plotHigh,Math.abs(L=x(D.rectPlotY,D.plotY)-D.plotHigh)<d?(S=d-L,L+=S,R-=S/2):L<0&&(L*=-1,R-=L),F&&this.polar)w=D.barX+_,D.shapeType="arc",D.shapeArgs=this.polar.arc(R+L,R,w,w+D.pointWidth);else{C.height=L,C.y=R;let{x:M=0,width:k=0}=C;D.shapeArgs=v(D.shapeArgs,this.crispCol(M,R,k,L)),D.tooltipPos=P.inverted?[O.len+O.pos-P.plotLeft-R-L/2,I.len+I.pos-P.plotTop-M-k/2,L]:[I.left-P.plotLeft+M+k/2,O.pos-P.plotTop+R+L/2,L]}})}}return m.defaultOptions=v(h.defaultOptions,a.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),g(m,"afterColumnTranslate",function(){m.prototype.afterColumnTranslate.apply(this)},{order:5}),p(m.prototype,{directTouch:!0,pointClass:e,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:c.adjustForMissingColumns,animate:c.animate,crispCol:c.crispCol,drawGraph:l,drawPoints:c.drawPoints,getSymbol:l,drawTracker:c.drawTracker,getColumnMetrics:c.getColumnMetrics}),r.registerSeriesType("columnrange",m),m}),s(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),s(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{column:n}=i.seriesTypes,{clamp:l,merge:a,pick:h}=r;class c extends n{translate(){let u=this.chart,p=this.options,b=this.dense=this.closestPointRange*this.xAxis.transA<2,v=this.borderWidth=h(p.borderWidth,b?0:1),x=this.yAxis,m=p.threshold,E=h(p.minPointLength,5),L=this.getColumnMetrics(),S=L.width,w=this.pointXOffset=L.offset,R=this.translatedThreshold=x.getThreshold(m),O=this.barW=Math.max(S,1+2*v);for(let I of(u.inverted&&(R-=.5),p.pointPadding&&(O=Math.ceil(O)),super.translate(),this.points)){let _=h(I.yBottom,R),P=999+Math.abs(_),F=l(I.plotY,-P,x.len+P),A=O/2,D=Math.min(F,_),C=Math.max(F,_)-D,d=I.plotX+w,f,y,M,k,T,z,N,G,X,j,B;p.centerInCategory&&(d=this.adjustForMissingColumns(d,S,I,L)),I.barX=d,I.pointWidth=S,I.tooltipPos=u.inverted?[x.len+x.pos-u.plotLeft-F,this.xAxis.len-d-A,C]:[d+A,F+x.pos-u.plotTop,C],f=m+(I.total||I.y),p.stacking==="percent"&&(f=m+(I.y<0)?-100:100);let W=x.toPixels(f,!0);M=(y=u.plotHeight-W-(u.plotHeight-R))?A*(D-W)/y:0,k=y?A*(D+C-W)/y:0,z=d-M+A,N=d+M+A,G=d+k+A,X=d-k+A,j=D-E,B=D+C,I.y<0&&(j=D,B=D+C+E),u.inverted&&(T=x.width-D,y=W-(x.width-R),M=A*(W-T)/y,k=A*(W-(T-C))/y,N=(z=d+A+M)-2*M,G=d-k+A,X=d+k+A,j=D,B=D+C-E,I.y<0&&(B=D+C+E)),I.shapeType="path",I.shapeArgs={x:z,y:j,width:N-z,height:C,d:[["M",z,j],["L",N,j],["L",G,B],["L",X,B],["Z"]]}}}}return c.defaultOptions=a(n.defaultOptions,e),i.registerSeriesType("columnpyramid",c),c}),s(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),s(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l){let{arearange:a}=n.seriesTypes,{addEvent:h,merge:c,extend:g}=l;class u extends e{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||i.prototype.getColumnMetrics.call(this)}drawDataLabels(){let b=this.pointValKey;if(a)for(let v of(a.prototype.drawDataLabels.call(this),this.points))v.y=v[b]}toYData(b){return[b.low,b.high]}}return u.defaultOptions=c(e.defaultOptions,r),h(u,"afterTranslate",function(){for(let p of this.points)p.plotLow=p.plotY},{order:0}),g(u.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),n.registerSeriesType("errorbar",u),u}),s(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(e){let{series:{prototype:{pointClass:i}}}=e;return class extends i{setState(r){this.state=r}}}),s(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{noop:l}=i,{series:a,seriesTypes:{column:h}}=r,{clamp:c,isNumber:g,extend:u,merge:p,pick:b,pInt:v,defined:x}=n;class m extends a{translate(){let L=this.yAxis,S=this.options,w=L.center;this.generatePoints(),this.points.forEach(R=>{let O=p(S.dial,R.dial),I=v(O.radius)*w[2]/200,_=v(O.baseLength)*I/100,P=v(O.rearLength)*I/100,F=O.baseWidth,A=O.topWidth,D=S.overshoot,C=L.startAngleRad+L.translate(R.y,void 0,void 0,void 0,!0);(g(D)||S.wrap===!1)&&(D=g(D)?D/180*Math.PI:0,C=c(C,L.startAngleRad-D,L.endAngleRad+D)),C=180*C/Math.PI,R.shapeType="path";let d=O.path||[["M",-P,-F/2],["L",_,-F/2],["L",I,-A/2],["L",I,A/2],["L",_,F/2],["L",-P,F/2],["Z"]];R.shapeArgs={d,translateX:w[0],translateY:w[1],rotation:C},R.plotX=w[0],R.plotY=w[1],x(R.y)&&L.max-L.min&&(R.percentage=(R.y-L.min)/(L.max-L.min)*100)})}drawPoints(){let L=this,S=L.chart,w=L.yAxis.center,R=L.pivot,O=L.options,I=O.pivot,_=S.renderer;L.points.forEach(P=>{let F=P.graphic,A=P.shapeArgs,D=A.d,C=p(O.dial,P.dial);F?(F.animate(A),A.d=D):P.graphic=_[P.shapeType](A).addClass("highcharts-dial").add(L.group),S.styledMode||P.graphic[F?"animate":"attr"]({stroke:C.borderColor,"stroke-width":C.borderWidth,fill:C.backgroundColor})}),R?R.animate({translateX:w[0],translateY:w[1]}):I&&(L.pivot=_.circle(0,0,I.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(w[0],w[1]).add(L.group),S.styledMode||L.pivot.attr({fill:I.backgroundColor,stroke:I.borderColor,"stroke-width":I.borderWidth}))}animate(L){let S=this;L||S.points.forEach(w=>{let R=w.graphic;R&&(R.attr({rotation:180*S.yAxis.startAngleRad/Math.PI}),R.animate({rotation:w.shapeArgs.rotation},S.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),a.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(L,S){a.prototype.setData.call(this,L,!1),this.processData(),this.generatePoints(),b(S,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return m.defaultOptions=p(a.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),u(m.prototype,{angular:!0,directTouch:!0,drawGraph:l,drawTracker:h.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:e,trackerGroups:["group","dataLabelsGroup"]}),r.registerSeriesType("gauge",m),m}),s(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){let{composed:r}=e,{addEvent:n,pushUnique:l}=i;function a(){let h,c,g,u=this;u.container&&(h=n(u.container,"mousedown",p=>{let b=u.hoverPoint;b&&b.series&&b.series.hasDraggableNodes&&b.series.options.draggable&&(b.series.onMouseDown(b,p),c=n(u.container,"mousemove",v=>b&&b.series&&b.series.onMouseMove(b,v)),g=n(u.container.ownerDocument,"mouseup",v=>(c(),g(),b&&b.series&&b.series.onMouseUp(b,v))))})),n(u,"destroy",function(){h()})}return{compose:function(h){l(r,"DragNodes")&&n(h,"load",a)},onMouseDown:function(h,c){let g=this.chart.pointer?.normalize(c)||c;h.fixedPosition={chartX:g.chartX,chartY:g.chartY,plotX:h.plotX,plotY:h.plotY},h.inDragMode=!0},onMouseMove:function(h,c){if(h.fixedPosition&&h.inDragMode){let g,u,p=this.chart,b=p.pointer?.normalize(c)||c,v=h.fixedPosition.chartX-b.chartX,x=h.fixedPosition.chartY-b.chartY,m=p.graphLayoutsLookup;(Math.abs(v)>5||Math.abs(x)>5)&&(g=h.fixedPosition.plotX-v,u=h.fixedPosition.plotY-x,p.isInsidePlot(g,u)&&(h.plotX=g,h.plotY=u,h.hasDragged=!0,this.redrawHalo(h),m.forEach(E=>{E.restartSimulation()})))}},onMouseUp:function(h){h.fixedPosition&&(h.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),h.inDragMode=h.hasDragged=!1,this.options.fixedDraggable||delete h.fixedPosition)},redrawHalo:function(h){h&&this.halo&&this.halo.attr({d:h.haloPath(this.options.states.hover.halo.size)})}}}),s(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r){let{setAnimation:n}=e,{composed:l}=i,{addEvent:a,pushUnique:h}=r;function c(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(b=>{b.updateSimulation()}),this.redraw())}function g(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(b=>{b.updateSimulation(!1)}),this.redraw())}function u(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(b=>{b.stop()})}function p(){let b,v=!1,x=m=>{m.maxIterations--&&isFinite(m.temperature)&&!m.isStable()&&!m.enableSimulation&&(m.beforeStep&&m.beforeStep(),m.step(),b=!1,v=!0)};if(this.graphLayoutsLookup){for(n(!1,this),this.graphLayoutsLookup.forEach(m=>m.start());!b;)b=!0,this.graphLayoutsLookup.forEach(x);v&&this.series.forEach(m=>{m&&m.layout&&m.render()})}}return{compose:function(b){h(l,"GraphLayout")&&(a(b,"afterPrint",c),a(b,"beforePrint",g),a(b,"predraw",u),a(b,"render",p))},integrations:{},layouts:{}}}),s(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(e,i,r){let{seriesTypes:{bubble:{prototype:{pointClass:n}}}}=r;return class extends n{destroy(){return this.series.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),i.prototype.destroy.apply(this,arguments)}firePointEvent(){let l=this.series.options;if(this.isParentNode&&l.parentNode){let a=l.allowPointSelect;l.allowPointSelect=l.parentNode.allowPointSelect,i.prototype.firePointEvent.apply(this,arguments),l.allowPointSelect=a}else i.prototype.firePointEvent.apply(this,arguments)}select(){let l=this.series.chart;this.isParentNode?(l.getSelectedPoints=l.getSelectedParentNodes,i.prototype.select.apply(this,arguments),l.getSelectedPoints=e.prototype.getSelectedPoints):i.prototype.select.apply(this,arguments)}}}),s(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(e){let{isNumber:i}=e;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:n}=this.point;return i(n)?r(n,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),s(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(e,i,r){let n=e.getMass(),l=-r.x*i*this.diffTemperature,a=-r.y*i*this.diffTemperature;e.fromNode.fixedPosition||(e.fromNode.plotX-=l*n.fromNode/e.fromNode.degree,e.fromNode.plotY-=a*n.fromNode/e.fromNode.degree),e.toNode.fixedPosition||(e.toNode.plotX+=l*n.toNode/e.toNode.degree,e.toNode.plotY+=a*n.toNode/e.toNode.degree)},attractiveForceFunction:function(e,i){return(i-e)/e},barycenter:function(){let e=this.options.gravitationalConstant||0,i=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*e,r=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*e;this.nodes.forEach(function(n){n.fixedPosition||(n.plotX-=i/n.mass/n.degree,n.plotY-=r/n.mass/n.degree)})},getK:function(e){return Math.pow(e.box.width*e.box.height/e.nodes.length,.5)},integrate:function(e,i){let r=-e.options.friction,n=e.options.maxSpeed,l=i.prevX,a=i.prevY,h=(i.plotX+i.dispX-l)*r,c=(i.plotY+i.dispY-a)*r,g=Math.abs,u=g(h)/(h||1),p=g(c)/(c||1),b=u*Math.min(n,Math.abs(h)),v=p*Math.min(n,Math.abs(c));i.prevX=i.plotX+i.dispX,i.prevY=i.plotY+i.dispY,i.plotX+=b,i.plotY+=v,i.temperature=e.vectorLength({x:b,y:v})},repulsive:function(e,i,r){let n=i*this.diffTemperature/e.mass/e.degree;e.fixedPosition||(e.plotX+=r.x*n,e.plotY+=r.y*n)},repulsiveForceFunction:function(e,i){return(i-e)/e*(i>e?1:0)}}}),s(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(e,i){let{noop:r}=e;return{barycenter:function(){let n,l,a=this.options.gravitationalConstant,h=this.box,c=this.nodes;for(let g of c)this.options.splitSeries&&!g.isParentNode?(n=g.series.parentNode.plotX,l=g.series.parentNode.plotY):(n=h.width/2,l=h.height/2),g.fixedPosition||(g.plotX-=(g.plotX-n)*a/(g.mass*Math.sqrt(c.length)),g.plotY-=(g.plotY-l)*a/(g.mass*Math.sqrt(c.length)))},getK:r,integrate:i.integrate,repulsive:function(n,l,a,h){let c=l*this.diffTemperature/n.mass/n.degree,g=a.x*c,u=a.y*c;n.fixedPosition||(n.plotX+=g,n.plotY+=u),h.fixedPosition||(h.plotX-=g,h.plotY-=u)},repulsiveForceFunction:function(n,l,a,h){return Math.min(n,(a.marker.radius+h.marker.radius)/2)}}}),s(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(e,i,r,n){let l=e.getMass(),a=r.x/n*i,h=r.y/n*i;e.fromNode.fixedPosition||(e.fromNode.dispX-=a*l.fromNode/e.fromNode.degree,e.fromNode.dispY-=h*l.fromNode/e.fromNode.degree),e.toNode.fixedPosition||(e.toNode.dispX+=a*l.toNode/e.toNode.degree,e.toNode.dispY+=h*l.toNode/e.toNode.degree)},attractiveForceFunction:function(e,i){return e*e/i},barycenter:function(){let e=this.options.gravitationalConstant,i=this.barycenter.xFactor,r=this.barycenter.yFactor;this.nodes.forEach(function(n){if(!n.fixedPosition){let l=n.getDegree(),a=l*(1+l/2);n.dispX+=(i-n.plotX)*e*a/n.degree,n.dispY+=(r-n.plotY)*e*a/n.degree}})},getK:function(e){return Math.pow(e.box.width*e.box.height/e.nodes.length,.3)},integrate:function(e,i){i.dispX+=i.dispX*e.options.friction,i.dispY+=i.dispY*e.options.friction;let r=i.temperature=e.vectorLength({x:i.dispX,y:i.dispY});r!==0&&(i.plotX+=i.dispX/r*Math.min(Math.abs(i.dispX),e.temperature),i.plotY+=i.dispY/r*Math.min(Math.abs(i.dispY),e.temperature))},repulsive:function(e,i,r,n){e.dispX+=r.x/n*i/e.degree,e.dispY+=r.y/n*i/e.degree},repulsiveForceFunction:function(e,i){return i*i/e}}}),s(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class e{constructor(r){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=r,this.boxSize=Math.min(r.width,r.height)}divideBox(){let r=this.box.width/2,n=this.box.height/2;this.nodes[0]=new e({left:this.box.left,top:this.box.top,width:r,height:n}),this.nodes[1]=new e({left:this.box.left+r,top:this.box.top,width:r,height:n}),this.nodes[2]=new e({left:this.box.left+r,top:this.box.top+n,width:r,height:n}),this.nodes[3]=new e({left:this.box.left,top:this.box.top+n,width:r,height:n})}getBoxPosition(r){let n=r.plotX<this.box.left+this.box.width/2,l=r.plotY<this.box.top+this.box.height/2;return n?l?0:3:l?1:2}insert(r,n){let l;this.isInternal?this.nodes[this.getBoxPosition(r)].insert(r,n-1):(this.isEmpty=!1,this.body?n?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,n-1),this.body=!0),this.nodes[this.getBoxPosition(r)].insert(r,n-1)):((l=new e({top:r.plotX||NaN,left:r.plotY||NaN,width:.1,height:.1})).body=r,l.isInternal=!1,this.nodes.push(l)):(this.isInternal=!1,this.body=r))}updateMassAndCenter(){let r=0,n=0,l=0;if(this.isInternal){for(let a of this.nodes)a.isEmpty||(r+=a.mass,n+=a.plotX*a.mass,l+=a.plotY*a.mass);n/=r,l/=r}else this.body&&(r=this.body.mass,n=this.body.plotX,l=this.body.plotY);this.mass=r,this.plotX=n,this.plotY=l}}return e}),s(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(e){return class{constructor(i,r,n,l){this.box={left:i,top:r,width:n,height:l},this.maxDepth=25,this.root=new e(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(i){i.updateMassAndCenter()})}insertNodes(i){for(let r of i)this.root.insert(r,this.maxDepth)}visitNodeRecursive(i,r,n){let l;if(i||(i=this.root),i===this.root&&r&&(l=r(i)),l!==!1){for(let a of i.nodes){if(a.isInternal){if(r&&(l=r(a)),l===!1)continue;this.visitNodeRecursive(a,r,n)}else a.body&&r&&r(a.body);n&&n(a)}i===this.root&&n&&n(i)}}}}),s(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(e,i,r,n,l,a){let{win:h}=i,{clamp:c,defined:g,isFunction:u,fireEvent:p,pick:b}=l;class v{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(m){r.compose(m),r.integrations.euler=e,r.integrations.verlet=a,r.layouts["reingold-fruchterman"]=v}init(m){this.options=m,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=r.integrations[m.integration],this.enableSimulation=m.enableSimulation,this.attractiveForce=b(m.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=b(m.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=m.approximation}updateSimulation(m){this.enableSimulation=b(m,this.options.enableSimulation)}start(){let m=this.series,E=this.options;this.currentStep=0,this.forces=m[0]&&m[0].forces||[],this.chart=m[0]&&m[0].chart,this.initialRendering&&(this.initPositions(),m.forEach(function(L){L.finishedAnimating=!0,L.render()})),this.setK(),this.resetSimulation(E),this.enableSimulation&&this.step()}step(){let m=this.series;for(let E of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[E+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let E of m)E.chart&&E.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&h.cancelAnimationFrame(this.simulation),this.simulation=h.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(E=>{p(E,"afterSimulation")}))}}stop(){this.simulation&&h.cancelAnimationFrame(this.simulation)}setArea(m,E,L,S){this.box={left:m,top:E,width:L,height:S}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(m,E){for(let L of m)E.indexOf(L)===-1&&E.push(L)}removeElementFromCollection(m,E){let L=E.indexOf(m);L!==-1&&E.splice(L,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(m){this.maxIterations=b(m,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(m){this.initialRendering=m}createQuadTree(){this.quadTree=new n(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let m=this.options.initialPositions;if(u(m))for(let E of(m.call(this),this.nodes))g(E.prevX)||(E.prevX=E.plotX),g(E.prevY)||(E.prevY=E.plotY),E.dispX=0,E.dispY=0;else m==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let m,E=this.box,L=this.nodes,S=2*Math.PI/(L.length+1),w=L.filter(function(P){return P.linksTo.length===0}),R={},O=this.options.initialPositionRadius,I=P=>{for(let F of P.linksFrom||[])R[F.toNode.id]||(R[F.toNode.id]=!0,_.push(F.toNode),I(F.toNode))},_=[];for(let P of w)_.push(P),I(P);if(_.length)for(let P of L)_.indexOf(P)===-1&&_.push(P);else _=L;for(let P=0,F=_.length;P<F;++P)(m=_[P]).plotX=m.prevX=b(m.plotX,E.width/2+O*Math.cos(P*S)),m.plotY=m.prevY=b(m.plotY,E.height/2+O*Math.sin(P*S)),m.dispX=0,m.dispY=0}setRandomPositions(){let m,E=this.box,L=this.nodes,S=L.length+1,w=R=>{let O=R*R/Math.PI;return O-Math.floor(O)};for(let R=0,O=L.length;R<O;++R)(m=L[R]).plotX=m.prevX=b(m.plotX,E.width*w(R)),m.plotY=m.prevY=b(m.plotY,E.height*w(S+R)),m.dispX=0,m.dispY=0}force(m,...E){this.integration[m].apply(this,E)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let m=0,E=0,L=0;for(let S of this.nodes)E+=S.plotX*S.mass,L+=S.plotY*S.mass,m+=S.mass;return this.barycenter={x:E,y:L,xFactor:E/m,yFactor:L/m},this.barycenter}barnesHutApproximation(m,E){let L,S,w=this.getDistXY(m,E),R=this.vectorLength(w);return m!==E&&R!==0&&(E.isInternal?E.boxSize/R<this.options.theta&&R!==0?(S=this.repulsiveForce(R,this.k),this.force("repulsive",m,S*E.mass,w,R),L=!1):L=!0:(S=this.repulsiveForce(R,this.k),this.force("repulsive",m,S*E.mass,w,R))),L}repulsiveForces(){if(this.approximation==="barnes-hut")for(let m of this.nodes)this.quadTree.visitNodeRecursive(null,E=>this.barnesHutApproximation(m,E));else{let m,E,L;for(let S of this.nodes)for(let w of this.nodes)S===w||S.fixedPosition||(L=this.getDistXY(S,w),(E=this.vectorLength(L))!==0&&(m=this.repulsiveForce(E,this.k),this.force("repulsive",S,m*w.mass,L,E)))}}attractiveForces(){let m,E,L;for(let S of this.links)S.fromNode&&S.toNode&&(m=this.getDistXY(S.fromNode,S.toNode),(E=this.vectorLength(m))!==0&&(L=this.attractiveForce(E,this.k),this.force("attractive",S,L,m,E)))}applyLimits(){for(let m of this.nodes)m.fixedPosition||(this.integration.integrate(this,m),this.applyLimitBox(m,this.box),m.dispX=0,m.dispY=0)}applyLimitBox(m,E){let L=m.radius;m.plotX=c(m.plotX,E.left+L,E.width-L),m.plotY=c(m.plotY,E.top+L,E.height-L)}coolDown(m,E,L){return m-E*L}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let m=0;for(let E of this.nodes)m+=E.temperature;return m}vectorLength(m){return Math.sqrt(m.x*m.x+m.y*m.y)}getDistR(m,E){let L=this.getDistXY(m,E);return this.vectorLength(L)}getDistXY(m,E){let L=m.plotX-E.plotX,S=m.plotY-E.plotY;return{x:L,y:S,absX:Math.abs(L),absY:Math.abs(S)}}}return v}),s(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{addEvent:l,pick:a}=n;function h(){let u=this.series,p=[];return u.forEach(b=>{b.parentNode&&b.parentNode.selected&&p.push(b.parentNode)}),p}function c(){this.allDataPoints&&delete this.allDataPoints}class g extends r{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(p){r.compose(p),e.integrations.packedbubble=i,e.layouts.packedbubble=g;let b=p.prototype;b.getSelectedParentNodes||(l(p,"beforeRedraw",c),b.getSelectedParentNodes=h)}beforeStep(){this.options.marker&&this.series.forEach(p=>{p&&p.calculateParentRadius()})}isStable(){let p=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&p<1e-5||this.temperature<=0}setCircularPositions(){let p=this.box,b=this.nodes,v=2*Math.PI/(b.length+1),x=this.options.initialPositionRadius,m,E,L=0;for(let S of b)this.options.splitSeries&&!S.isParentNode?(m=S.series.parentNode.plotX,E=S.series.parentNode.plotY):(m=p.width/2,E=p.height/2),S.plotX=S.prevX=a(S.plotX,m+x*Math.cos(S.index||L*v)),S.plotY=S.prevY=a(S.plotY,E+x*Math.sin(S.index||L*v)),S.dispX=0,S.dispY=0,L++}repulsiveForces(){let p,b,v,x=this,m=x.options.bubblePadding,E=x.nodes;E.forEach(L=>{L.degree=L.mass,L.neighbours=0,E.forEach(S=>{p=0,L!==S&&!L.fixedPosition&&(x.options.seriesInteraction||L.series===S.series)&&(v=x.getDistXY(L,S),(b=x.vectorLength(v)-(L.marker.radius+S.marker.radius+m))<0&&(L.degree+=.01,L.neighbours++,p=x.repulsiveForce(-b/Math.sqrt(L.neighbours),x.k,L,S)),x.force("repulsive",L,p*S.mass,v,S,b))})})}applyLimitBox(p,b){let v,x;this.options.splitSeries&&!p.isParentNode&&this.options.parentNodeLimit&&(v=this.getDistXY(p,p.series.parentNode),(x=p.series.parentNodeRadius-p.marker.radius-this.vectorLength(v))<0&&x>-2*p.marker.radius&&(p.plotX-=.01*v.x,p.plotY-=.01*v.y)),super.applyLimitBox(p,b)}}return e.layouts.packedbubble=g,g}),s(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(e,i){let{merge:r,syncTimeout:n}=e,{animObject:l}=i;return{initDataLabels:function(){let a=this.options.dataLabels;if(!this.dataLabelsGroup){let h=this.initDataLabelsGroup();return!this.chart.styledMode&&a?.style&&h.css(a.style),h.attr({opacity:0}),this.visible&&h.show(),h}return this.dataLabelsGroup.attr(r({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){let a=this.options.dataLabels;a?.defer&&this.options.layoutAlgorithm?.enableSimulation?n(()=>{this.deferDataLabels=!1},a?l(a.animation).defer:0):this.deferDataLabels=!1}}}),s(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c,g,u){let{parse:p}=e,{noop:b}=n,{series:{prototype:v},seriesTypes:{bubble:x}}=c,{initDataLabels:m,initDataLabelsDefer:E}=g,{addEvent:L,clamp:S,defined:w,extend:R,fireEvent:O,isArray:I,isNumber:_,merge:P,pick:F}=u;class A extends x{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(C,d,f,y){x.compose(C,d,f,y),i.compose(d),h.compose(d)}accumulateAllPoints(){let C,d=this.chart,f=[];for(let y of d.series)if(y.is("packedbubble")&&y.reserveSpace()){C=y.yData||[];for(let M=0;M<C.length;M++)f.push([null,null,C[M],y.index,M,{id:M,marker:{radius:0}}])}return f}addLayout(){let C=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},d=C.type||"packedbubble",f=this.chart.options.chart,y=this.chart.graphLayoutsStorage,M=this.chart.graphLayoutsLookup,k;y||(this.chart.graphLayoutsStorage=y={},this.chart.graphLayoutsLookup=M=[]),(k=y[d])||(C.enableSimulation=w(f.forExport)?!f.forExport:C.enableSimulation,y[d]=k=new r.layouts[d],k.init(C),M.splice(k.index,0,k)),this.layout=k,this.points.forEach(T=>{T.mass=2,T.degree=1,T.collisionNmb=1}),k.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),k.addElementsToCollection([this],k.series),k.addElementsToCollection(this.points,k.nodes)}addSeriesLayout(){let C=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},d=C.type||"packedbubble",f=this.chart.graphLayoutsStorage,y=this.chart.graphLayoutsLookup,M=P(C,C.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),k=f[d+"-series"];k||(f[d+"-series"]=k=new r.layouts[d],k.init(M),y.splice(k.index,0,k)),this.parentNodeLayout=k,this.createParentNodes()}calculateParentRadius(){let C=this.seriesBox();this.parentNodeRadius=S(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,C?Math.max(Math.sqrt(Math.pow(C.width,2)+Math.pow(C.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let C=this.chart.series,d=this.options.zMin,f=this.options.zMax,y=1/0,M=-1/0;return d&&f?[d,f]:(C.forEach(k=>{k.yData.forEach(T=>{w(T)&&(T>M&&(M=T),T<y&&(y=T))})}),[d=F(d,y),f=F(f,M)])}checkOverlap(C,d){let f=C[0]-d[0],y=C[1]-d[1];return Math.sqrt(f*f+y*y)-Math.abs(C[2]+d[2])<-.001}createParentNodes(){let C=this.pointClass,d=this.chart,f=this.parentNodeLayout,y=this.layout.options,M,k=this.parentNode,T={radius:this.parentNodeRadius,lineColor:this.color,fillColor:p(this.color).brighten(.4).get()};y.parentNodeOptions&&(T=P(y.parentNodeOptions.marker||{},T)),this.parentNodeMass=0,this.points.forEach(z=>{this.parentNodeMass+=Math.PI*Math.pow(z.marker.radius,2)}),this.calculateParentRadius(),f.nodes.forEach(z=>{z.seriesIndex===this.index&&(M=!0)}),f.setArea(0,0,d.plotWidth,d.plotHeight),M||(k||(k=new C(this,{mass:this.parentNodeRadius/2,marker:T,dataLabels:{inside:!1},states:{normal:{marker:T},hover:{marker:T}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(k.plotX=this.parentNode.plotX,k.plotY=this.parentNode.plotY),this.parentNode=k,f.addElementsToCollection([this],f.series),f.addElementsToCollection([k],f.nodes))}deferLayout(){let C=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),C.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(C=>{C.removeElementFromCollection(this,C.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),v.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(v.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",v.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){if(!this.layout||!this.layout.options.splitSeries)return;let C=this.chart,d=this.layout.options.parentNodeOptions.marker,f={fill:d.fillColor||p(this.color).brighten(.4).get(),opacity:d.fillOpacity,stroke:d.lineColor||this.color,"stroke-width":F(d.lineWidth,this.options.lineWidth)},y={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,C.seriesGroup),this.group?.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&w(this.parentNode.plotX)&&w(this.parentNode.plotY)&&w(this.parentNodeRadius)&&(y=P({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},f),this.parentNode.graphic||(this.graph=this.parentNode.graphic=C.renderer.symbol(f.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(y))}drawTracker(){let C,d=this.parentNode;super.drawTracker(),d&&(C=I(d.dataLabels)?d.dataLabels:d.dataLabel?[d.dataLabel]:[],d.graphic&&(d.graphic.element.point=d),C.forEach(f=>{(f.div||f.element).point=d}))}getPointRadius(){let C,d,f,y,M=this.chart,k=M.plotWidth,T=M.plotHeight,z=this.options,N=z.useSimulation,G=Math.min(k,T),X={},j=[],B=M.allDataPoints||[],W=B.length;["minSize","maxSize"].forEach(U=>{let q=parseInt(z[U],10),H=/%$/.test(z[U]);X[U]=H?G*q/100:q*Math.sqrt(W)}),M.minRadius=C=X.minSize/Math.sqrt(W),M.maxRadius=d=X.maxSize/Math.sqrt(W);let Y=N?this.calculateZExtremes():[C,d];B.forEach((U,q)=>{f=N?S(U[2],Y[0],Y[1]):U[2],(y=this.getRadius(Y[0],Y[1],C,d,f))===0&&(y=null),B[q][2]=y,j.push(y)}),this.radii=j}init(){return v.init.apply(this,arguments),E.call(this),this.eventsToUnbind.push(L(this,"updatedData",function(){this.chart.series.forEach(C=>{C.type===this.type&&(C.isDirty=!0)},this)})),this}onMouseUp(C){if(C.fixedPosition&&!C.removed){let d,f=this.layout,y=this.parentNodeLayout;y&&f.options.dragBetweenSeries&&y.nodes.forEach(M=>{C&&C.marker&&M!==C.series.parentNode&&(d=f.getDistXY(C,M),f.vectorLength(d)-M.marker.radius-C.marker.radius<0&&(M.series.addPoint(P(C.options,{plotX:C.plotX,plotY:C.plotY}),!1),f.removeElementFromCollection(C,f.nodes),C.remove()))}),i.onMouseUp.apply(this,arguments)}}placeBubbles(C){let d=this.checkOverlap,f=this.positionBubble,y=[],M=1,k=0,T=0,z,N=[],G,X=C.sort((j,B)=>B[2]-j[2]);if(X.length){if(y.push([[0,0,X[0][2],X[0][3],X[0][4]]]),X.length>1)for(y.push([[0,0-X[1][2]-X[0][2],X[1][2],X[1][3],X[1][4]]]),G=2;G<X.length;G++)X[G][2]=X[G][2]||1,d(z=f(y[M][k],y[M-1][T],X[G]),y[M][0])?(y.push([]),T=0,y[M+1].push(f(y[M][k],y[M][0],X[G])),M++,k=0):M>1&&y[M-1][T+1]&&d(z,y[M-1][T+1])?(T++,y[M].push(f(y[M][k],y[M-1][T],X[G])),k++):(k++,y[M].push(z));this.chart.stages=y,this.chart.rawPositions=[].concat.apply([],y),this.resizeRadius(),N=this.chart.rawPositions}return N}pointAttribs(C,d){let f=this.options,y=C&&C.isParentNode,M=f.marker;y&&f.layoutAlgorithm&&f.layoutAlgorithm.parentNodeOptions&&(M=f.layoutAlgorithm.parentNodeOptions.marker);let k=M.fillOpacity,T=v.pointAttribs.call(this,C,d);return k!==1&&(T["fill-opacity"]=k),T}positionBubble(C,d,f){let y=Math.pow,M=(0,Math.sqrt)(y(C[0]-d[0],2)+y(C[1]-d[1],2)),k=(0,Math.acos)((y(M,2)+y(f[2]+d[2],2)-y(f[2]+C[2],2))/(2*(f[2]+d[2])*M)),T=(0,Math.asin)((0,Math.abs)(C[0]-d[0])/M),z=(C[1]-d[1]<0?0:Math.PI)+k+T*((C[0]-d[0])*(C[1]-d[1])<0?1:-1);return[d[0]+(d[2]+f[2])*Math.sin(z),d[1]-(d[2]+f[2])*Math.cos(z),f[2],f[3],f[4]]}render(){let C=[];v.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(d=>{I(d.dataLabels)&&d.dataLabels.forEach(f=>{C.push(f)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(C))}resizeRadius(){let C,d,f,y,M,k=this.chart,T=k.rawPositions,z=Math.min,N=Math.max,G=k.plotLeft,X=k.plotTop,j=k.plotHeight,B=k.plotWidth;for(let q of(C=f=Number.POSITIVE_INFINITY,d=y=Number.NEGATIVE_INFINITY,T))M=q[2],C=z(C,q[0]-M),d=N(d,q[0]+M),f=z(f,q[1]-M),y=N(y,q[1]+M);let W=[d-C,y-f],Y=[(B-G)/W[0],(j-X)/W[1]],U=z.apply([],Y);if(Math.abs(U-1)>1e-10){for(let q of T)q[2]*=U;this.placeBubbles(T)}else k.diffY=j/2+X-f-(y-f)/2,k.diffX=B/2+G-C-(d-C)/2}seriesBox(){let C,d=this.chart,f=this.data,y=Math.max,M=Math.min,k=[d.plotLeft,d.plotLeft+d.plotWidth,d.plotTop,d.plotTop+d.plotHeight];return f.forEach(T=>{w(T.plotX)&&w(T.plotY)&&T.marker.radius&&(C=T.marker.radius,k[0]=M(k[0],T.plotX-C),k[1]=y(k[1],T.plotX+C),k[2]=M(k[2],T.plotY-C),k[3]=y(k[3],T.plotY+C))}),_(k.width/k.height)?k:null}setVisible(){let C=this;v.setVisible.apply(C,arguments),C.parentNodeLayout&&C.graph?C.visible?(C.graph.show(),C.parentNode.dataLabel&&C.parentNode.dataLabel.show()):(C.graph.hide(),C.parentNodeLayout.removeElementFromCollection(C.parentNode,C.parentNodeLayout.nodes),C.parentNode.dataLabel&&C.parentNode.dataLabel.hide()):C.layout&&(C.visible?C.layout.addElementsToCollection(C.points,C.layout.nodes):C.points.forEach(d=>{C.layout.removeElementFromCollection(d,C.layout.nodes)}))}translate(){let C,d,f,y=this.chart,M=this.data,k=this.index,T=this.options.useSimulation;for(let z of(this.processedXData=this.xData,this.generatePoints(),w(y.allDataPoints)||(y.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),T?f=y.allDataPoints:(f=this.placeBubbles(y.allDataPoints),this.options.draggable=!1),f))z[3]===k&&(C=M[z[4]],d=F(z[2],void 0),T||(C.plotX=z[0]-y.plotLeft+y.diffX,C.plotY=z[1]-y.plotTop+y.diffY),_(d)&&(C.marker=R(C.marker,{radius:d,width:2*d,height:2*d}),C.radius=d));T&&this.deferLayout(),O(this,"afterTranslate")}}return A.defaultOptions=P(x.defaultOptions,a),R(A.prototype,{pointClass:l,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:m,alignDataLabel:v.alignDataLabel,indexateNodes:b,onMouseDown:i.onMouseDown,onMouseMove:i.onMouseMove,redrawHalo:i.redrawHalo,searchPoint:b}),c.registerSeriesType("packedbubble",A),A}),s(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),s(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{noop:l}=e,{area:a,line:h,scatter:c}=r.seriesTypes,{extend:g,merge:u}=n;class p extends c{getGraphPath(){let v=h.prototype.getGraphPath.call(this),x=v.length+1;for(;x--;)(x===v.length||v[x][0]==="M")&&x>0&&v.splice(x,0,["Z"]);return this.areaPath=v,v}drawGraph(){this.options.fillColor=this.color,a.prototype.drawGraph.call(this)}}return p.defaultOptions=u(c.defaultOptions,i),g(p.prototype,{type:"polygon",drawTracker:h.prototype.drawTracker,setStackedPoints:l}),r.registerSeriesType("polygon",p),p}),s(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),s(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r,n){var l;let{defaultOptions:a}=i,{composed:h,noop:c}=r,{addEvent:g,correctFloat:u,defined:p,extend:b,fireEvent:v,isObject:x,merge:m,pick:E,pushUnique:L,relativeLength:S,wrap:w}=n;return function(R){function O(){this.autoConnect=this.isCircular&&E(this.userMax,this.options.max)===void 0&&u(this.endAngleRad-this.startAngleRad)===u(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function I(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(V=>this.ticks[V]&&this.ticks[V].label).filter(V=>!!V)}}function _(){return c}function P(V,Z,K){let J=this.pane.center,tt=V.value,$,Q,et;return this.isCircular?(p(tt)?V.point&&(V.point.shapeArgs||{}).start&&(tt=this.chart.inverted?this.translate(V.point.rectPlotY,!0):V.point.x):(Q=V.chartX||0,et=V.chartY||0,tt=this.translate(Math.atan2(et-K,Q-Z)-this.startAngleRad,!0)),Q=($=this.getPosition(tt)).x,et=$.y):(p(tt)||(Q=V.chartX,et=V.chartY),p(Q)&&p(et)&&(K=J[1]+this.chart.plotTop,tt=this.translate(Math.min(Math.sqrt(Math.pow(Q-Z,2)+Math.pow(et-K,2)),J[2]/2)-J[3]/2,!0))),[tt,Q||0,et||0]}function F(V,Z,K){let J=this.pane.center,tt=this.chart,$=this.left||0,Q=this.top||0,et,it=E(Z,J[2]/2-this.offset),st;return K===void 0&&(K=this.horiz?0:this.center&&-this.center[3]/2),K&&(it+=K),this.isCircular||Z!==void 0?((st=this.chart.renderer.symbols.arc($+J[0],Q+J[1],it,it,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[$+J[0]],st.yBounds=[Q+J[1]-it]):(et=this.postTranslate(this.angleRad,it),st=[["M",this.center[0]+tt.plotLeft,this.center[1]+tt.plotTop],["L",et.x,et.y]]),st}function A(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function D(V,Z,K){let J=this.chart,tt=Tt=>{if(typeof Tt=="string"){let zt=parseInt(Tt,10);return nt.test(Tt)&&(zt=zt*et/100),zt}return Tt},$=this.center,Q=this.startAngleRad,et=$[2]/2,it=Math.min(this.offset,0),st=this.left||0,rt=this.top||0,nt=/%$/,ot=this.isCircular,at,ct,ht,lt,xt,wt,dt=E(tt(K.outerRadius),et),Ct=tt(K.innerRadius),ft=E(tt(K.thickness),10);if(this.options.gridLineInterpolation==="polygon")wt=this.getPlotLinePath({value:V}).concat(this.getPlotLinePath({value:Z,reverse:!0}));else{V=Math.max(V,this.min),Z=Math.min(Z,this.max);let Tt=this.translate(V),zt=this.translate(Z);ot||(dt=Tt||0,Ct=zt||0),K.shape!=="circle"&&ot?(at=Q+(Tt||0),ct=Q+(zt||0)):(at=-Math.PI/2,ct=1.5*Math.PI,xt=!0),dt-=it,ft-=it,wt=J.renderer.symbols.arc(st+$[0],rt+$[1],dt,dt,{start:Math.min(at,ct),end:Math.max(at,ct),innerR:E(Ct,dt-ft),open:xt,borderRadius:K.borderRadius}),ot&&(ht=(ct+at)/2,lt=st+$[0]+$[2]/2*Math.cos(ht),wt.xBounds=ht>-Math.PI/2&&ht<Math.PI/2?[lt,J.plotWidth]:[0,lt],wt.yBounds=[rt+$[1]+$[2]/2*Math.sin(ht)],wt.yBounds[0]+=ht>-Math.PI&&ht<0||ht>Math.PI?-10:10)}return wt}function C(V){let Z=this.pane.center,K=this.chart,J=K.inverted,tt=V.reverse,$=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Q=$.innerRadius||"0%",et=$.outerRadius||"100%",it=Z[0]+K.plotLeft,st=Z[1]+K.plotTop,rt=this.height,nt=V.isCrosshair,ot=Z[3]/2,at=V.value,ct,ht,lt,xt,wt,dt,Ct,ft,Tt,zt=this.getPosition(at),pe=zt.x,ee=zt.y;if(nt&&(at=(ft=this.getCrosshairPosition(V,it,st))[0],pe=ft[1],ee=ft[2]),this.isCircular)ht=Math.sqrt(Math.pow(pe-it,2)+Math.pow(ee-st,2)),lt=typeof Q=="string"?S(Q,1):Q/ht,xt=typeof et=="string"?S(et,1):et/ht,Z&&ot&&(lt<(ct=ot/ht)&&(lt=ct),xt<ct&&(xt=ct)),Tt=[["M",it+lt*(pe-it),st-lt*(st-ee)],["L",pe-(1-xt)*(pe-it),ee+(1-xt)*(st-ee)]];else if((at=this.translate(at))&&(at<0||at>rt)&&(at=0),this.options.gridLineInterpolation==="circle")Tt=this.getLinePath(0,at,ot);else if(Tt=[],K[J?"yAxis":"xAxis"].forEach(we=>{we.pane===this.pane&&(wt=we)}),wt){Ct=wt.tickPositions,wt.autoConnect&&(Ct=Ct.concat([Ct[0]])),tt&&(Ct=Ct.slice().reverse()),at&&(at+=ot);for(let we=0;we<Ct.length;we++)dt=wt.getPosition(Ct[we],at),Tt.push(we?["L",dt.x,dt.y]:["M",dt.x,dt.y])}return Tt}function d(V,Z){let K=this.translate(V);return this.postTranslate(this.isCircular?K:this.angleRad,E(this.isCircular?Z:K<0?0:K,this.center[2]/2)-this.offset)}function f(){let V=this.center,Z=this.chart,K=this.options.title;return{x:Z.plotLeft+V[0]+(K.x||0),y:Z.plotTop+V[1]-{high:.5,middle:.25,low:0}[K.align]*V[2]+(K.y||0)}}function y(V){V.beforeSetTickPositions=O,V.createLabelCollector=I,V.getCrosshairPosition=P,V.getLinePath=F,V.getOffset=A,V.getPlotBandPath=D,V.getPlotLinePath=C,V.getPosition=d,V.getTitlePosition=f,V.postTranslate=B,V.setAxisSize=Y,V.setAxisTranslation=U,V.setOptions=q}function M(){let V=this.chart,Z=this.options,K=V.angular&&this.isXAxis,J=this.pane,tt=J&&J.options;if(!K&&J&&(V.angular||V.polar)){let $=2*Math.PI,Q=(E(tt.startAngle,0)-90)*Math.PI/180,et=(E(tt.endAngle,E(tt.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(Z.angle||0)*Math.PI/180,this.startAngleRad=Q,this.endAngleRad=et,this.offset=Z.offset||0;let it=(Q%$+$)%$,st=(et%$+$)%$;it>Math.PI&&(it-=$),st>Math.PI&&(st-=$),this.normalizedStartAngleRad=it,this.normalizedEndAngleRad=st}}function k(V){this.isRadial&&(V.align=void 0,V.preventDefault())}function T(){if(this.chart&&this.chart.labelCollectors){let V=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;V>=0&&this.chart.labelCollectors.splice(V,1)}}function z(V){let Z,K=this.chart,J=K.angular,tt=K.polar,$=this.isXAxis,Q=this.coll,et=V.userOptions.pane||0,it=this.pane=K.pane&&K.pane[et];if(Q==="colorAxis"){this.isRadial=!1;return}J?(J&&$?(this.isHidden=!0,this.createLabelCollector=_,this.getOffset=c,this.redraw=W,this.render=W,this.setScale=c,this.setCategories=c,this.setTitle=c):y(this),Z=!$):tt&&(y(this),Z=this.horiz),J||tt?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&K.labelCollectors.push(this.labelCollector)):this.isRadial=!1,it&&Z&&(it.axis=this),this.isCircular=Z}function N(){this.isRadial&&this.beforeSetTickPositions()}function G(V){let Z=this.label;if(!Z)return;let K=this.axis,J=Z.getBBox(),tt=K.options.labels,$=(K.translate(this.pos)+K.startAngleRad+Math.PI/2)/Math.PI*180%360,Q=Math.round($),et=p(tt.y)?0:-(.3*J.height),it=tt.y,st,rt=20,nt=tt.align,ot="end",at=Q<0?Q+360:Q,ct=at,ht=0,lt=0;K.isRadial&&(st=K.getPosition(this.pos,K.center[2]/2+S(E(tt.distance,-25),K.center[2]/2,-K.center[2]/2)),tt.rotation==="auto"?Z.attr({rotation:$}):p(it)||(it=K.chart.renderer.fontMetrics(Z).b-J.height/2),p(nt)||(K.isCircular?(J.width>K.len*K.tickInterval/(K.max-K.min)&&(rt=0),nt=$>rt&&$<180-rt?"left":$>180+rt&&$<360-rt?"right":"center"):nt="center",Z.attr({align:nt})),nt==="auto"&&K.tickPositions.length===2&&K.isCircular&&(at>90&&at<180?at=180-at:at>270&&at<=360&&(at=540-at),ct>180&&ct<=360&&(ct=360-ct),(K.pane.options.startAngle===Q||K.pane.options.startAngle===Q+360||K.pane.options.startAngle===Q-360)&&(ot="start"),nt=Q>=-90&&Q<=90||Q>=-360&&Q<=-270||Q>=270&&Q<=360?ot==="start"?"right":"left":ot==="start"?"left":"right",ct>70&&ct<110&&(nt="center"),at<15||at>=180&&at<195?ht=.3*J.height:at>=15&&at<=35?ht=ot==="start"?0:.75*J.height:at>=195&&at<=215?ht=ot==="start"?.75*J.height:0:at>35&&at<=90?ht=ot==="start"?-(.25*J.height):J.height:at>215&&at<=270&&(ht=ot==="start"?J.height:-(.25*J.height)),ct<15?lt=ot==="start"?-(.15*J.height):.15*J.height:ct>165&&ct<=180&&(lt=ot==="start"?.15*J.height:-(.15*J.height)),Z.attr({align:nt}),Z.translate(lt,ht+et)),V.pos.x=st.x+(tt.x||0),V.pos.y=st.y+(it||0))}function X(V){this.axis.getPosition&&b(V.pos,this.axis.getPosition(this.pos))}function j({options:V}){V.xAxis&&m(!0,R.radialDefaultOptions.circular,V.xAxis),V.yAxis&&m(!0,R.radialDefaultOptions.radialGauge,V.yAxis)}function B(V,Z){let K=this.chart,J=this.center;return V=this.startAngleRad+V,{x:K.plotLeft+J[0]+Math.cos(V)*Z,y:K.plotTop+J[1]+Math.sin(V)*Z}}function W(){this.isDirty=!1}function Y(){let V,Z;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),V=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(Z=this.postTranslate(this.angleRad,V[3]/2),V[0]=Z.x-this.chart.plotLeft,V[1]=Z.y-this.chart.plotTop),this.len=this.width=this.height=(V[2]-V[3])*E(this.sector,1)/2)}function U(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function q(V){let{coll:Z}=this,{angular:K,inverted:J,polar:tt}=this.chart,$={};K?this.isXAxis||($=m(a.yAxis,R.radialDefaultOptions.radialGauge)):tt&&($=this.horiz?m(a.xAxis,R.radialDefaultOptions.circular):m(Z==="xAxis"?a.xAxis:a.yAxis,R.radialDefaultOptions.radial)),J&&Z==="yAxis"&&($.stackLabels=x(a.yAxis,!0)?a.yAxis.stackLabels:{},$.reversedStacks=!0);let Q=this.options=m($,V);Q.plotBands||(Q.plotBands=[]),v(this,"afterSetOptions")}function H(V,Z,K,J,tt,$,Q){let et,it=this.axis;return it.isRadial?["M",Z,K,"L",(et=it.getPosition(this.pos,it.center[2]/2+J)).x,et.y]:V.call(this,Z,K,J,tt,$,Q)}R.radialDefaultOptions=m(e),R.compose=function(V,Z){return L(h,"Axis.Radial")&&(g(V,"afterInit",M),g(V,"autoLabelAlign",k),g(V,"destroy",T),g(V,"init",z),g(V,"initialAxisTranslation",N),g(Z,"afterGetLabelPosition",G),g(Z,"afterGetPosition",X),g(r,"setOptions",j),w(Z.prototype,"getMarkPath",H)),V}}(l||(l={})),l}),s(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{animObject:h}=e,{composed:c}=i,{addEvent:g,defined:u,find:p,isNumber:b,merge:v,pick:x,pushUnique:m,relativeLength:E,splat:L,uniqueKey:S,wrap:w}=a;function R(){(this.pane||[]).forEach(j=>{j.render()})}function O(j){let B=j.args[0].xAxis,W=j.args[0].yAxis,Y=j.args[0].chart;B&&W&&(W.gridLineInterpolation==="polygon"?(B.startOnTick=!0,B.endOnTick=!0):B.gridLineInterpolation==="polygon"&&Y.inverted&&(W.startOnTick=!0,W.endOnTick=!0))}function I(){this.pane||(this.pane=[]),this.options.pane=L(this.options.pane),this.options.pane.forEach(j=>{new n(j,this)},this)}function _(j){let B=j.args.marker,W=this.chart.xAxis[0],Y=this.chart.yAxis[0],U=this.chart.inverted,q=U?Y:W,H=U?W:Y;if(this.chart.polar){j.preventDefault();let V=(B.attr?B.attr("start"):B.start)-q.startAngleRad,Z=B.attr?B.attr("r"):B.r,K=(B.attr?B.attr("end"):B.end)-q.startAngleRad,J=B.attr?B.attr("innerR"):B.innerR;j.result.x=V+q.pos,j.result.width=K-V,j.result.y=H.len+H.pos-Z,j.result.height=Z-J}}function P(j){let B=this.chart;if(B.polar&&B.hoverPane&&B.hoverPane.axis){j.preventDefault();let W=B.hoverPane.center,Y=B.mouseDownX||0,U=B.mouseDownY||0,q=j.args.chartY,H=j.args.chartX,V=2*Math.PI,Z=B.hoverPane.axis.startAngleRad,K=B.hoverPane.axis.endAngleRad,J=B.inverted?B.xAxis[0]:B.yAxis[0],tt={},$="arc";if(tt.x=W[0]+B.plotLeft,tt.y=W[1]+B.plotTop,this.zoomHor){let Q=Z>0?K-Z:Math.abs(Z)+Math.abs(K),et=Math.atan2(U-B.plotTop-W[1],Y-B.plotLeft-W[0])-Z,it=Math.atan2(q-B.plotTop-W[1],H-B.plotLeft-W[0])-Z;tt.r=W[2]/2,tt.innerR=W[3]/2,et<=0&&(et+=V),it<=0&&(it+=V),it<et&&(it=[et,et=it][0]),Q<V&&Z+it>K+(V-Q)/2&&(it=et,et=Z<=0?Z:0);let st=tt.start=Math.max(et+Z,Z),rt=tt.end=Math.min(it+Z,K);if(J.options.gridLineInterpolation==="polygon"){let nt=B.hoverPane.axis,ot=st-nt.startAngleRad+nt.pos,at=J.getPlotLinePath({value:J.max}),ct=nt.toValue(ot),ht=nt.toValue(ot+(rt-st));if(ct<nt.getExtremes().min){let{min:lt,max:xt}=nt.getExtremes();ct=xt-(lt-ct)}if(ht<nt.getExtremes().min){let{min:lt,max:xt}=nt.getExtremes();ht=xt-(lt-ht)}ht<ct&&(ht=[ct,ct=ht][0]),(at=C(at,ct,ht,nt)).push(["L",W[0]+B.plotLeft,B.plotTop+W[1]]),tt.d=at,$="path"}}if(this.zoomVert){let Q=B.inverted?B.xAxis[0]:B.yAxis[0],et=Math.sqrt(Math.pow(Y-B.plotLeft-W[0],2)+Math.pow(U-B.plotTop-W[1],2)),it=Math.sqrt(Math.pow(H-B.plotLeft-W[0],2)+Math.pow(q-B.plotTop-W[1],2));if(it<et&&(et=[it,it=et][0]),it>W[2]/2&&(it=W[2]/2),et<W[3]/2&&(et=W[3]/2),this.zoomHor||(tt.start=Z,tt.end=K),tt.r=it,tt.innerR=et,Q.options.gridLineInterpolation==="polygon"){let st=Q.toValue(Q.len+Q.pos-et),rt=Q.toValue(Q.len+Q.pos-it),nt=Q.getPlotLinePath({value:rt}).concat(Q.getPlotLinePath({value:st,reverse:!0}));tt.d=nt,$="path"}}if(this.zoomHor&&this.zoomVert&&J.options.gridLineInterpolation==="polygon"){let Q=B.hoverPane.axis,et=tt.start||0,it=tt.end||0,st=et-Q.startAngleRad+Q.pos,rt=Q.toValue(st),nt=Q.toValue(st+(it-et));if(tt.d instanceof Array){let ot=tt.d.slice(0,tt.d.length/2),at=tt.d.slice(tt.d.length/2,tt.d.length);at=[...at].reverse();let ct=B.hoverPane.axis;ot=C(ot,rt,nt,ct),(at=C(at,rt,nt,ct))&&(at[0][0]="L"),at=[...at].reverse(),tt.d=ot.concat(at),$="path"}}j.attrs=tt,j.shapeType=$}}function F(){let j=this.chart;j.polar&&(this.polar=new X(this),j.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function A(){if(this.chart.polar&&this.xAxis){let{xAxis:j,yAxis:B}=this,W=this.chart;this.kdByAngle=W.tooltip&&W.tooltip.shared,this.kdByAngle||W.inverted?this.searchPoint=D:this.options.findNearestPointBy="xy";let Y=this.points,U=Y.length;for(;U--;)this.is("column")||this.is("columnrange")||this.polar.toXY(Y[U]),W.hasParallelCoordinates||this.yAxis.reversed||(x(Y[U].y,Number.MIN_VALUE)<B.min||Y[U].x<j.min||Y[U].x>j.max?(Y[U].isNull=!0,Y[U].plotY=NaN):Y[U].isNull=Y[U].isValid&&!Y[U].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(g(this,"afterRender",function(){let q;W.polar&&this.options.clip!==!1&&(q=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:q[0],y:q[1],r:q[2]/2,innerR:q[3]/2}):this.clipCircle=function(H,V,Z,K,J){let tt=S(),$=H.createElement("clipPath").attr({id:tt}).add(H.defs),Q=J?H.arc(V,Z,K,J,0,2*Math.PI).add($):H.circle(V,Z,K).add($);return Q.id=tt,Q.clipPath=$,Q}(W.renderer,q[0],q[1],q[2]/2,q[3]/2),this.group.clip(this.clipCircle),this.setClip=i.noop)})))}}function D(j){let B=this.chart,W=this.xAxis,Y=this.yAxis,U=W.pane&&W.pane.center,q=j.chartX-(U&&U[0]||0)-B.plotLeft,H=j.chartY-(U&&U[1]||0)-B.plotTop,V=B.inverted?{clientX:j.chartX-Y.pos,plotY:j.chartY-W.pos}:{clientX:180+-180/Math.PI*Math.atan2(q,H)};return this.searchKDTree(V)}function C(j,B,W,Y){let U=Y.tickInterval,q=Y.tickPositions,H=p(q,Z=>Z>=W),V=p([...q].reverse(),Z=>Z<=B);return u(H)||(H=q[q.length-1]),u(V)||(V=q[0],H+=U,j[0][0]="L",j.unshift(j[j.length-3])),(j=j.slice(q.indexOf(V),q.indexOf(H)+1))[0][0]="M",j}function d(j,B){return p(this.pane||[],W=>W.options.id===B)||j.call(this,B)}function f(j,B,W,Y,U,q){let H,V,Z,K=this.chart,J=x(Y.inside,!!this.options.stacking);if(K.polar){if(H=B.rectPlotX/Math.PI*180,K.inverted)this.forceDL=K.isInsidePlot(B.plotX,B.plotY),J&&B.shapeArgs?(V=B.shapeArgs,U=v(U,{x:(Z=this.yAxis.postTranslate(((V.start||0)+(V.end||0))/2-this.xAxis.startAngleRad,B.barX+B.pointWidth/2)).x-K.plotLeft,y:Z.y-K.plotTop})):B.tooltipPos&&(U=v(U,{x:B.tooltipPos[0],y:B.tooltipPos[1]})),Y.align=x(Y.align,"center"),Y.verticalAlign=x(Y.verticalAlign,"middle");else{var tt;let $,Q;(tt=Y).align===null&&($=H>20&&H<160?"left":H>200&&H<340?"right":"center",tt.align=$),tt.verticalAlign===null&&(Q=H<45||H>315?"bottom":H>135&&H<225?"top":"middle",tt.verticalAlign=Q),Y=tt}r.prototype.alignDataLabel.call(this,B,W,Y,U,q),this.isRadialBar&&B.shapeArgs&&B.shapeArgs.start===B.shapeArgs.end?W.hide():W.show()}else j.call(this,B,W,Y,U,q)}function y(){let j=this.options,B=j.stacking,W=this.chart,Y=this.xAxis,U=this.yAxis,q=U.reversed,H=U.center,V=Y.startAngleRad,Z=Y.endAngleRad-V,K=j.threshold,J=0,tt,$,Q,et,it,st=0,rt=0,nt,ot,at,ct,ht,lt,xt,wt;if(Y.isRadial)for(Q=(tt=this.points).length,et=U.translate(U.min),it=U.translate(U.max),K=j.threshold||0,W.inverted&&b(K)&&u(J=U.translate(K))&&(J<0?J=0:J>Z&&(J=Z),this.translatedThreshold=J+V);Q--;){if(lt=($=tt[Q]).barX,ot=$.x,at=$.y,$.shapeType="arc",W.inverted){$.plotY=U.translate(at),B&&U.stacking?(ht=U.stacking.stacks[(at<0?"-":"")+this.stackKey],this.visible&&ht&&ht[ot]&&!$.isNull&&(ct=ht[ot].points[this.getStackIndicator(void 0,ot,this.index).key],st=U.translate(ct[0]),rt=U.translate(ct[1]),u(st)&&(st=a.clamp(st,0,Z)))):(st=J,rt=$.plotY),st>rt&&(rt=[st,st=rt][0]),q?rt>et?rt=et:st<it?st=it:(st>et||rt<it)&&(st=rt=Z):st<et?st=et:rt>it?rt=it:(rt<et||st>it)&&(st=rt=0),U.min>U.max&&(st=rt=q?Z:0),st+=V,rt+=V,H&&($.barX=lt+=H[3]/2),xt=Math.max(lt,0),wt=Math.max(lt+$.pointWidth,0);let dt=j.borderRadius,Ct=E((typeof dt=="object"?dt.radius:dt)||0,wt-xt);$.shapeArgs={x:H[0],y:H[1],r:wt,innerR:xt,start:st,end:rt,borderRadius:Ct},$.opacity=st===rt?0:void 0,$.plotY=(u(this.translatedThreshold)&&(st<this.translatedThreshold?st:rt))-V}else st=lt+V,$.shapeArgs=this.polar.arc($.yBottom,$.plotY,st,st+$.pointWidth),$.shapeArgs.borderRadius=0;this.polar.toXY($),W.inverted?(nt=U.postTranslate($.rectPlotY,lt+$.pointWidth/2),$.tooltipPos=[nt.x-W.plotLeft,nt.y-W.plotTop]):$.tooltipPos=[$.plotX,$.plotY],H&&($.ttBelow=$.plotY>H[1])}}function M(j,B){let W,Y,U=this;if(this.chart.polar){B=B||this.points;for(let H=0;H<B.length;H++)if(!B[H].isNull){W=H;break}this.options.connectEnds!==!1&&W!==void 0&&(this.connectEnds=!0,B.splice(B.length,0,B[W]),Y=!0),B.forEach(H=>{H.polarPlotY===void 0&&U.polar.toXY(H)})}let q=j.apply(this,[].slice.call(arguments,1));return Y&&B.pop(),q}function k(j,B){let W=this.chart,Y={xAxis:[],yAxis:[]};return W.polar?W.axes.forEach(U=>{if(U.coll==="colorAxis")return;let q=U.isXAxis,H=U.center,V=B.chartX-H[0]-W.plotLeft,Z=B.chartY-H[1]-W.plotTop;Y[q?"xAxis":"yAxis"].push({axis:U,value:U.translate(q?Math.PI-Math.atan2(V,Z):Math.sqrt(Math.pow(V,2)+Math.pow(Z,2)),!0)})}):Y=j.call(this,B),Y}function T(j,B){this.chart.polar||j.call(this,B)}function z(j,B){let W=this,Y=this.chart,U=this.group,q=this.markerGroup,H=this.xAxis&&this.xAxis.center,V=Y.plotLeft,Z=Y.plotTop,K=this.options.animation,J,tt,$,Q,et,it;Y.polar?W.isRadialBar?B||(W.startAngleRad=x(W.translatedThreshold,W.xAxis.startAngleRad),i.seriesTypes.pie.prototype.animate.call(W,B)):(K=h(K),W.is("column")?B||(tt=H[3]/2,W.points.forEach(st=>{$=st.graphic,et=(Q=st.shapeArgs)&&Q.r,it=Q&&Q.innerR,$&&Q&&($.attr({r:tt,innerR:tt}),$.animate({r:et,innerR:it},W.options.animation))})):B?(J={translateX:H[0]+V,translateY:H[1]+Z,scaleX:.001,scaleY:.001},U.attr(J),q&&q.attr(J)):(J={translateX:V,translateY:Z,scaleX:1,scaleY:1},U.animate(J,K),q&&q.animate(J,K))):j.call(this,B)}function N(j,B,W,Y){let U,q;if(this.chart.polar)if(Y){let H=(q=function Z(K,J,tt,$){let Q,et,it,st,rt,nt,ot=$?1:0,at=(Q=J>=0&&J<=K.length-1?J:J<0?K.length-1+J:0)-1<0?K.length-(1+ot):Q-1,ct=Q+1>K.length-1?ot:Q+1,ht=K[at],lt=K[ct],xt=ht.plotX,wt=ht.plotY,dt=lt.plotX,Ct=lt.plotY,ft=K[Q].plotX,Tt=K[Q].plotY;et=(1.5*ft+xt)/2.5,it=(1.5*Tt+wt)/2.5,st=(1.5*ft+dt)/2.5,rt=(1.5*Tt+Ct)/2.5;let zt=Math.sqrt(Math.pow(et-ft,2)+Math.pow(it-Tt,2)),pe=Math.sqrt(Math.pow(st-ft,2)+Math.pow(rt-Tt,2)),ee=Math.atan2(it-Tt,et-ft);nt=Math.PI/2+(ee+Math.atan2(rt-Tt,st-ft))/2,Math.abs(ee-nt)>Math.PI/2&&(nt-=Math.PI),et=ft+Math.cos(nt)*zt,it=Tt+Math.sin(nt)*zt;let we={rightContX:st=ft+Math.cos(Math.PI+nt)*pe,rightContY:rt=Tt+Math.sin(Math.PI+nt)*pe,leftContX:et,leftContY:it,plotX:ft,plotY:Tt};return tt&&(we.prevPointCont=Z(K,at,!1,$)),we}(B,Y,!0,this.connectEnds)).prevPointCont&&q.prevPointCont.rightContX,V=q.prevPointCont&&q.prevPointCont.rightContY;U=["C",b(H)?H:q.plotX,b(V)?V:q.plotY,b(q.leftContX)?q.leftContX:q.plotX,b(q.leftContY)?q.leftContY:q.plotY,q.plotX,q.plotY]}else U=["M",W.plotX,W.plotY];else U=j.call(this,B,W,Y);return U}function G(j,B,W=this.plotY){if(!this.destroyed){let{plotX:Y,series:U}=this,{chart:q}=U;return q.polar&&b(Y)&&b(W)?[Y+(B?q.plotLeft:0),W+(B?q.plotTop:0)]:j.call(this,B,W)}}class X{static compose(B,W,Y,U,q,H,V,Z,K,J){if(n.compose(W,Y),l.compose(B,q),m(c,"Polar")){let tt=W.prototype,$=H.prototype,Q=Y.prototype,et=U.prototype;if(g(W,"afterDrawChartBox",R),g(W,"getAxes",I),g(W,"init",O),w(tt,"get",d),w(Q,"getCoordinates",k),w(Q,"pinch",T),g(Y,"getSelectionMarkerAttrs",P),g(Y,"getSelectionBox",_),g(U,"afterInit",F),g(U,"afterTranslate",A,{order:2}),g(U,"afterColumnTranslate",y,{order:4}),w(et,"animate",z),w($,"pos",G),Z){let it=Z.prototype;w(it,"alignDataLabel",f),w(it,"animate",z)}if(K&&w(K.prototype,"getGraphPath",M),J){let it=J.prototype;w(it,"getPointSpline",N),V&&(V.prototype.getPointSpline=it.getPointSpline)}}}constructor(B){this.series=B}arc(B,W,Y,U){let q=this.series,H=q.xAxis.center,V=q.yAxis.len,Z=H[3]/2,K=V-W+Z,J=V-x(B,V)+Z;return q.yAxis.reversed&&(K<0&&(K=Z),J<0&&(J=Z)),{x:H[0],y:H[1],r:K,innerR:J,start:Y,end:U}}toXY(B){let W=this.series,Y=W.chart,U=W.xAxis,q=W.yAxis,H=B.plotX,V=Y.inverted,Z=B.y,K=B.plotY,J=V?H:q.len-K,tt;if(V&&W&&!W.isRadialBar&&(B.plotY=K=b(Z)?q.translate(Z):0),B.rectPlotX=H,B.rectPlotY=K,q.center&&(J+=q.center[3]/2),b(K)){let $=V?q.postTranslate(K,J):U.postTranslate(H,J);B.plotX=B.polarPlotX=$.x-Y.plotLeft,B.plotY=B.polarPlotY=$.y-Y.plotTop}W.kdByAngle?((tt=(H/Math.PI*180+U.pane.options.startAngle)%360)<0&&(tt+=360),B.clientX=tt):B.clientX=B.plotX}}return X}),s(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(e,i,r){var n;let{composed:l}=e,{addEvent:a,objectEach:h,pushUnique:c}=r;return function(g){function u(){let m=this.waterfall.stacks;m&&(m.changed=!1,delete m.alreadyChanged)}function p(){let m=this.options.stackLabels;m&&m.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function b(){this.waterfall||(this.waterfall=new x(this))}function v(){let m=this.axes;for(let E of this.series)if(E.options.stacking){for(let L of m)L.isXAxis||(L.waterfall.stacks.changed=!0);break}}g.compose=function(m,E){c(l,"Axis.Waterfall")&&(a(m,"init",b),a(m,"afterBuildStacks",u),a(m,"afterRender",p),a(E,"beforeRedraw",v))};class x{constructor(E){this.axis=E,this.stacks={changed:!1}}renderStackTotals(){let E=this.axis,L=E.waterfall.stacks,S=E.stacking&&E.stacking.stackTotalGroup,w=new i(E,E.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=w,S&&h(L,R=>{h(R,(O,I)=>{w.total=O.stackTotal,w.x=+I,O.label&&(w.label=O.label),i.prototype.render.call(w,S),O.label=w.label,delete w.label})}),w.total=null}}g.Composition=x}(n||(n={})),n}),s(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(e,i,r){let{isNumber:n}=r;class l extends e.prototype.pointClass{getClassName(){let h=i.prototype.getClassName.call(this);return this.isSum?h+=" highcharts-sum":this.isIntermediateSum&&(h+=" highcharts-intermediate-sum"),h}isValid(){return n(this.y)||this.isSum||!!this.isIntermediateSum}}return l}),s(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),s(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(e,i,r,n,l){let{column:a,line:h}=e.seriesTypes,{addEvent:c,arrayMax:g,arrayMin:u,correctFloat:p,crisp:b,extend:v,isNumber:x,merge:m,objectEach:E,pick:L}=i;function S(R,O){return Object.hasOwnProperty.call(R,O)}class w extends a{generatePoints(){a.prototype.generatePoints.apply(this);for(let O=0,I=this.points.length;O<I;O++){let _=this.points[O],P=this.processedYData[O];x(P)&&(_.isIntermediateSum||_.isSum)&&(_.y=p(P))}}processData(O){let I,_,P,F,A,D,C=this.options,d=this.yData,f=C.data,y=d.length,M=C.threshold||0;P=_=F=A=0;for(let k=0;k<y;k++)D=d[k],I=f&&f[k]?f[k]:{},D==="sum"||I.isSum?d[k]=p(P):D==="intermediateSum"||I.isIntermediateSum?(d[k]=p(_),_=0):(P+=D,_+=D),F=Math.min(P,F),A=Math.max(P,A);super.processData.call(this,O),C.stacking||(this.dataMin=F+M,this.dataMax=A)}toYData(O){return O.isSum?"sum":O.isIntermediateSum?"intermediateSum":O.y}updateParallelArrays(O,I){super.updateParallelArrays.call(this,O,I),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(O,I){let _=this.options.upColor;_&&!O.options.color&&x(O.y)&&(O.color=O.y>0?_:void 0);let P=a.prototype.pointAttribs.call(this,O,I);return delete P.dashstyle,P}getGraphPath(){return[["M",0,0]]}getCrispPath(){let O=this.data.filter(d=>x(d.y)),I=this.yAxis,_=O.length,P=this.graph?.strokeWidth()||0,F=this.xAxis.reversed,A=this.yAxis.reversed,D=this.options.stacking,C=[];for(let d=1;d<_;d++){if(!(this.options.connectNulls||x(this.data[O[d].index-1].y)))continue;let f=O[d].box,y=O[d-1],M=y.y||0,k=O[d-1].box;if(!f||!k)continue;let T=I.waterfall.stacks[this.stackKey],z=M>0?-k.height:0;if(T&&k&&f){let N,G=T[d-1];if(D){let X=G.connectorThreshold;N=b(I.translate(X,!1,!0,!1,!0)+(A?z:0),P)}else N=b(k.y+(y.minPointLengthOffset||0),P);C.push(["M",(k.x||0)+(F?0:k.width||0),N],["L",(f.x||0)+(F&&f.width||0),N])}if(k&&C.length&&(!D&&M<0&&!A||M>0&&A)){let N=C[C.length-2];N&&typeof N[2]=="number"&&(N[2]+=k.height||0);let G=C[C.length-1];G&&typeof G[2]=="number"&&(G[2]+=k.height||0)}}return C}drawGraph(){h.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(O){let I=this.options,_=O.waterfall?.stacks,P=I.threshold||0,F=this.stackKey,A=this.xData,D=A.length,C=P,d=C,f,y=0,M=0,k=0,T,z,N,G,X,j,B,W,Y=(U,q,H,V)=>{if(f){if(T)for(;H<T;H++)f.stackState[H]+=V;else f.stackState[0]=U,T=f.stackState.length;f.stackState.push(f.stackState[T-1]+q)}};if(O.stacking&&_&&this.reserveSpace()){W=_.changed,(B=_.alreadyChanged)&&0>B.indexOf(F)&&(W=!0),_[F]||(_[F]={});let U=_[F];if(U)for(let q=0;q<D;q++)(!U[j=A[q]]||W)&&(U[j]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:W&&U[j]?U[j].label:void 0}),f=U[j],(X=this.yData[q])>=0?f.posTotal+=X:f.negTotal+=X,G=I.data[q],z=f.absolutePos=f.posTotal,N=f.absoluteNeg=f.negTotal,f.stackTotal=z+N,T=f.stackState.length,G&&G.isIntermediateSum?(Y(k,M,0,k),k=M,M=P,C^=d,d^=C,C^=d):G&&G.isSum?(Y(P,y,T,0),C=P):(Y(C,X,0,y),G&&(y+=X,M+=X)),f.stateIndex++,f.threshold=C,C+=f.stackTotal;_.changed=!1,_.alreadyChanged||(_.alreadyChanged=[]),_.alreadyChanged.push(F)}}getExtremes(){let O,I,_,P=this.options.stacking;return P?(O=this.yAxis.waterfall.stacks,I=this.stackedYNeg=[],_=this.stackedYPos=[],P==="overlap"?E(O[this.stackKey],function(F){I.push(u(F.stackState)),_.push(g(F.stackState))}):E(O[this.stackKey],function(F){I.push(F.negTotal+F.threshold),_.push(F.posTotal+F.threshold)}),{dataMin:u(I),dataMax:g(_)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return w.defaultOptions=m(a.defaultOptions,l),w.compose=r.compose,v(w.prototype,{pointValKey:"y",showLine:!0,pointClass:n}),c(w,"afterColumnTranslate",function(){let{options:R,points:O,yAxis:I}=this,_=L(R.minPointLength,5),P=_/2,F=R.threshold||0,A=R.stacking,D=I.waterfall.stacks[this.stackKey],C=F,d=F,f,y,M,k;for(let T=0;T<O.length;T++){let z=O[T],N=this.processedYData[T],G=v({x:0,y:0,width:0,height:0},z.shapeArgs||{});z.box=G;let X=[0,N],j=z.y||0;if(A){if(D){let Y=D[T];A==="overlap"?(y=Y.stackState[Y.stateIndex--],f=j>=0?y:y-j,S(Y,"absolutePos")&&delete Y.absolutePos,S(Y,"absoluteNeg")&&delete Y.absoluteNeg):(j>=0?(y=Y.threshold+Y.posTotal,Y.posTotal-=j,f=y):(y=Y.threshold+Y.negTotal,Y.negTotal-=j,f=y-j),!Y.posTotal&&x(Y.absolutePos)&&S(Y,"absolutePos")&&(Y.posTotal=Y.absolutePos,delete Y.absolutePos),!Y.negTotal&&x(Y.absoluteNeg)&&S(Y,"absoluteNeg")&&(Y.negTotal=Y.absoluteNeg,delete Y.absoluteNeg)),z.isSum||(Y.connectorThreshold=Y.threshold+Y.stackTotal),I.reversed?(M=j>=0?f-j:f+j,k=f):(M=f,k=f-j),z.below=M<=F,G.y=I.translate(M,!1,!0,!1,!0),G.height=Math.abs(G.y-I.translate(k,!1,!0,!1,!0));let U=I.waterfall.dummyStackItem;U&&(U.x=T,U.label=D[T].label,U.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[T],this.stackedYPos[T],void 0,this.xAxis))}}else f=Math.max(d,d+j)+X[0],G.y=I.translate(f,!1,!0,!1,!0),z.isSum?(G.y=I.translate(X[1],!1,!0,!1,!0),G.height=Math.min(I.translate(X[0],!1,!0,!1,!0),I.len)-G.y,z.below=X[1]<=F):z.isIntermediateSum?(j>=0?(M=X[1]+C,k=C):(M=C,k=X[1]+C),I.reversed&&(M^=k,k^=M,M^=k),G.y=I.translate(M,!1,!0,!1,!0),G.height=Math.abs(G.y-Math.min(I.translate(k,!1,!0,!1,!0),I.len)),C+=X[1],z.below=M<=F):(G.height=N>0?I.translate(d,!1,!0,!1,!0)-G.y:I.translate(d,!1,!0,!1,!0)-I.translate(d-N,!1,!0,!1,!0),d+=N,z.below=d<F),G.height<0&&(G.y+=G.height,G.height*=-1);z.plotY=G.y,z.yBottom=G.y+G.height,G.height<=_&&!z.isNull?(G.height=_,G.y-=P,z.yBottom=G.y+G.height,z.plotY=G.y,j<0?z.minPointLengthOffset=-P:z.minPointLengthOffset=P):(z.isNull&&(G.width=0),z.minPointLengthOffset=0);let B=z.plotY+(z.negative?G.height:0);z.below&&(z.plotY+=G.height),z.tooltipPos&&(this.chart.inverted?z.tooltipPos[0]=I.len-B:z.tooltipPos[1]=B),z.isInside=this.isPointInside(z);let W=b(z.yBottom,this.borderWidth);G.y=b(G.y,this.borderWidth),G.height=W-G.y,m(!0,z.shapeArgs,G)}},{order:2}),e.registerSeriesType("waterfall",w),w}),s(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(e,i,r,n,l,a,h,c){return e.RadialAxis=h,n.compose(e.Axis,e.Chart,e.Legend,e.Series),l.compose(e.Axis,e.Chart,e.Legend,e.Series),r.compose(e.Chart,e.Pointer),a.compose(e.Axis,e.Chart,e.Pointer,e.Series,e.Tick,e.Point,i.seriesTypes.areasplinerange,i.seriesTypes.column,i.seriesTypes.line,i.seriesTypes.spline),c.compose(e.Axis,e.Chart),e})})});var Mu=qe((ST,Gn)=>{"use strict";(function(o){typeof Gn=="object"&&Gn.exports?(o.default=o,Gn.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/treemap",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function s(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}s(t,"Extensions/Breadcrumbs/BreadcrumbsDefaults.js",[],function(){return{lang:{mainBreadcrumb:"Main"},options:{buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#334eff"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",style:{color:"#666666",fontSize:"0.8em"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7}}}),s(t,"Extensions/Breadcrumbs/Breadcrumbs.js",[t["Extensions/Breadcrumbs/BreadcrumbsDefaults.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{format:l}=i,{composed:a}=r,{addEvent:h,defined:c,extend:g,fireEvent:u,isString:p,merge:b,objectEach:v,pick:x,pushUnique:m}=n;function E(){if(this.breadcrumbs){let I=this.resetZoomButton&&this.resetZoomButton.getBBox(),_=this.breadcrumbs.options;I&&_.position.align==="right"&&_.relativeTo==="plotBox"&&this.breadcrumbs.alignBreadcrumbsGroup(-I.width-_.buttonSpacing)}}function L(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}function S(){let I=this.breadcrumbs;if(I&&!I.options.floating&&I.level){let _=I.options,P=_.buttonTheme,F=(P.height||0)+2*(P.padding||0)+_.buttonSpacing,A=_.position.verticalAlign;A==="bottom"?(this.marginBottom=(this.marginBottom||0)+F,I.yOffset=F):A!=="middle"?(this.plotTop+=F,I.yOffset=-F):I.yOffset=void 0}}function w(){this.breadcrumbs&&this.breadcrumbs.redraw()}function R(I){I.resetSelection===!0&&this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()}class O{static compose(_,P){m(a,"Breadcrumbs")&&(h(_,"destroy",L),h(_,"afterShowResetZoom",E),h(_,"getMargins",S),h(_,"redraw",w),h(_,"selection",R),g(P.lang,e.lang))}constructor(_,P){this.elementList={},this.isDirty=!0,this.level=0,this.list=[];let F=b(_.options.drilldown&&_.options.drilldown.drillUpButton,O.defaultOptions,_.options.navigation&&_.options.navigation.breadcrumbs,P);this.chart=_,this.options=F||{}}updateProperties(_){this.setList(_),this.setLevel(),this.isDirty=!0}setList(_){this.list=_}setLevel(){this.level=this.list.length&&this.list.length-1}getLevel(){return this.level}getButtonText(_){let P=this.chart,F=this.options,A=P.options.lang,D=x(F.format,F.showFullPath?"{level.name}":"\u2190 {level.name}"),C=A&&x(A.drillUpText,A.mainBreadcrumb),d=F.formatter&&F.formatter(_)||l(D,{level:_.levelOptions},P)||"";return(p(d)&&!d.length||d==="\u2190 ")&&c(C)&&(d=F.showFullPath?C:"\u2190 "+C),d}redraw(){this.isDirty&&this.render(),this.group&&this.group.align(),this.isDirty=!1}render(){let _=this.chart,P=this.options;!this.group&&P&&(this.group=_.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:P.zIndex}).add()),P.showFullPath?this.renderFullPathButtons():this.renderSingleButton(),this.alignBreadcrumbsGroup()}renderFullPathButtons(){this.destroySingleButton(),this.resetElementListState(),this.updateListElements(),this.destroyListElements()}renderSingleButton(){let _=this.chart,P=this.list,F=this.options.buttonSpacing;this.destroyListElements();let A=this.group?this.group.getBBox().width:F,D=P[P.length-2];!_.drillUpButton&&this.level>0?_.drillUpButton=this.renderButton(D,A,F):_.drillUpButton&&(this.level>0?this.updateSingleButton():this.destroySingleButton())}alignBreadcrumbsGroup(_){if(this.group){let P=this.options,F=P.buttonTheme,A=P.position,D=P.relativeTo==="chart"||P.relativeTo==="spacingBox"?void 0:"plotBox",C=this.group.getBBox(),d=2*(F.padding||0)+P.buttonSpacing;A.width=C.width+d,A.height=C.height+d;let f=b(A);_&&(f.x+=_),this.options.rtl&&(f.x+=A.width),f.y=x(f.y,this.yOffset,0),this.group.align(f,!0,D)}}renderButton(_,P,F){let A=this,D=this.chart,C=A.options,d=b(C.buttonTheme),f=D.renderer.button(A.getButtonText(_),P,F,function(y){let M,k=C.events&&C.events.click;k&&(M=k.call(A,y,_)),M!==!1&&(C.showFullPath?y.newLevel=_.level:y.newLevel=A.level-1,u(A,"up",y))},d).addClass("highcharts-breadcrumbs-button").add(A.group);return D.styledMode||f.attr(C.style),f}renderSeparator(_,P){let F=this.chart,A=this.options.separator,D=F.renderer.label(A.text,_,P,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group);return F.styledMode||D.css(A.style),D}update(_){b(!0,this.options,_),this.destroy(),this.isDirty=!0}updateSingleButton(){let _=this.chart,P=this.list[this.level-1];_.drillUpButton&&_.drillUpButton.attr({text:this.getButtonText(P)})}destroy(){this.destroySingleButton(),this.destroyListElements(!0),this.group&&this.group.destroy(),this.group=void 0}destroyListElements(_){let P=this.elementList;v(P,(F,A)=>{(_||!P[A].updated)&&((F=P[A]).button&&F.button.destroy(),F.separator&&F.separator.destroy(),delete F.button,delete F.separator,delete P[A])}),_&&(this.elementList={})}destroySingleButton(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)}resetElementListState(){v(this.elementList,_=>{_.updated=!1})}updateListElements(){let _=this.elementList,P=this.options.buttonSpacing,F=this.list,A=this.options.rtl,D=A?-1:1,C=function(k,T){return D*k.getBBox().width+D*T},d=function(k,T,z){k.translate(T-k.getBBox().width,z)},f=this.group?C(this.group,P):P,y,M;for(let k=0,T=F.length;k<T;++k){let z,N,G=k===T-1;_[(M=F[k]).level]?(z=(y=_[M.level]).button,y.separator||G?y.separator&&G&&(y.separator.destroy(),delete y.separator):(f+=D*P,y.separator=this.renderSeparator(f,P),A&&d(y.separator,f,P),f+=C(y.separator,P)),_[M.level].updated=!0):(z=this.renderButton(M,f,P),A&&d(z,f,P),f+=C(z,P),G||(N=this.renderSeparator(f,P),A&&d(N,f,P),f+=C(N,P)),_[M.level]={button:z,separator:N,updated:!0}),z&&z.setState(G?2:0)}}}return O.defaultOptions=e.options,O}),s(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(e,i,r){var n;let{column:{prototype:l}}=e.seriesTypes,{addEvent:a,defined:h}=r;return function(c){function g(u){let p=this.series,b=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new i(b,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),u?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${b.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(u){let p={};return h(u.color)&&(!u.state||u.state==="normal")&&(p[this.colorProp||"fill"]=u.color),p},pointAttribs:l.pointAttribs},c.compose=function(u){return a(u.prototype.pointClass,"afterSetState",g),u}}(n||(n={})),n}),s(t,"Series/Treemap/TreemapAlgorithmGroup.js",[],function(){return class{constructor(e,i,r,n){this.height=e,this.width=i,this.plot=n,this.direction=r,this.startDirection=r,this.total=0,this.nW=0,this.lW=0,this.nH=0,this.lH=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(l,a){return Math.max(l/a,a/l)}}}addElement(e){this.lP.total=this.elArr[this.elArr.length-1],this.total=this.total+e,this.direction===0?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)}reset(){this.nW=0,this.lW=0,this.elArr=[],this.total=0}}}),s(t,"Series/Treemap/TreemapNode.js",[],function(){return class{constructor(){this.childrenTotal=0,this.visible=!1}init(e,i,r,n,l,a,h){return this.id=e,this.i=i,this.children=r,this.height=n,this.level=l,this.series=a,this.parent=h,this}}}),s(t,"Series/DrawPointUtilities.js",[],function(){return{draw:function(e,i){let{animatableAttribs:r,onComplete:n,css:l,renderer:a}=i,h=e.series&&e.series.chart.hasRendered?void 0:e.series&&e.series.options.animation,c=e.graphic;if(i.attribs=qi(xe({},i.attribs),{class:e.getClassName()}),e.shouldDraw())c||(c=i.shapeType==="text"?a.text():i.shapeType==="image"?a.image(i.imageUrl||"").attr(i.shapeArgs||{}):a[i.shapeType](i.shapeArgs||{}),e.graphic=c,c.add(i.group)),l&&c.css(l),c.attr(i.attribs).animate(r,!i.isNew&&h,n);else if(c){let g=()=>{e.graphic=c=c&&c.destroy(),typeof n=="function"&&n()};Object.keys(r).length?c.animate(r,void 0,()=>g()):g()}}}}),s(t,"Series/Treemap/TreemapPoint.js",[t["Series/DrawPointUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{pie:{prototype:{pointClass:n}},scatter:{prototype:{pointClass:l}}}=i.seriesTypes,{extend:a,isNumber:h,pick:c}=r;class g extends l{constructor(){super(...arguments),this.shapeType="rect"}draw(p){e.draw(this,p)}getClassName(){let p=this.series,b=p.options,v=super.getClassName();return this.node.level<=p.nodeMap[p.rootNode].level?v+=" highcharts-above-level":this.node.isLeaf||c(b.interactByLeaf,!b.allowTraversingTree)?this.node.isLeaf||(v+=" highcharts-internal-node"):v+=" highcharts-internal-node-interactive",v}isValid(){return!!(this.id||h(this.value))}setState(p){super.setState.apply(this,arguments),this.graphic&&this.graphic.attr({zIndex:p==="hover"?1:0})}shouldDraw(){return h(this.plotY)&&this.y!==null}}return a(g.prototype,{setVisible:n.prototype.setVisible}),g}),s(t,"Series/Treemap/TreemapSeriesDefaults.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i){let{isString:r}=i;return{allowTraversingTree:!1,animationLimit:250,borderRadius:0,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{defer:!1,enabled:!0,formatter:function(){let n=this&&this.point?this.point:{};return r(n.name)?n.name:""},inside:!0,verticalAlign:"middle"},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:"#999999",brightness:e.seriesTypes.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}},legendSymbol:"rectangle"}}),s(t,"Series/Treemap/TreemapUtilities.js",[],function(){var e;return(e||(e={})).recursive=function i(r,n,l){let a=n.call(l||this,r);a!==!1&&i(a,n,l)},e}),s(t,"Series/TreeUtilities.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,i){let{extend:r,isArray:n,isNumber:l,isObject:a,merge:h,pick:c,relativeLength:g}=i;return{getColor:function(u,p){let b,v,x,m,E,L,S=p.index,w=p.mapOptionsToLevel,R=p.parentColor,O=p.parentColorIndex,I=p.series,_=p.colors,P=p.siblings,F=I.points,A=I.chart.options.chart;return u&&(b=F[u.i],v=w[u.level]||{},b&&v.colorByPoint&&(m=b.index%(_?_.length:A.colorCount),x=_&&_[m]),I.chart.styledMode||(E=c(b&&b.options.color,v&&v.color,x,R&&(D=>{let C=v&&v.colorVariation;return C&&C.key==="brightness"&&S&&P?e.parse(D).brighten(C.to*(S/P)).get():D})(R),I.color)),L=c(b&&b.options.colorIndex,v&&v.colorIndex,m,O,p.colorIndex)),{color:E,colorIndex:L}},getLevelOptions:function(u){let p,b,v,x,m,E,L={};if(a(u))for(x=l(u.from)?u.from:1,E=u.levels,b={},p=a(u.defaults)?u.defaults:{},n(E)&&(b=E.reduce((S,w)=>{let R,O,I;return a(w)&&l(w.level)&&(O=c((I=h({},w)).levelIsConstant,p.levelIsConstant),delete I.levelIsConstant,delete I.level,a(S[R=w.level+(O?0:x-1)])?h(!0,S[R],I):S[R]=I),S},{})),m=l(u.to)?u.to:1,v=0;v<=m;v++)L[v]=h({},p,a(b[v])?b[v]:{});return L},getNodeWidth:function(u,p){let{chart:b,options:v}=u,{nodeDistance:x=0,nodeWidth:m=0}=v,{plotSizeX:E=1}=b;if(m==="auto"){if(typeof x=="string"&&/%$/.test(x))return E/(p+parseFloat(x)/100*(p-1));let L=Number(x);return(E+L)/(p||1)-L}return g(m,E)},setTreeValues:function u(p,b){let v=b.before,x=b.idRoot,m=b.mapIdToNode[x],E=b.levelIsConstant!==!1,L=b.points[p.i],S=L&&L.options||{},w=[],R=0;p.levelDynamic=p.level-(E?0:m.level),p.name=c(L&&L.name,""),p.visible=x===p.id||b.visible===!0,typeof v=="function"&&(p=v(p,b)),p.children.forEach((I,_)=>{let P=r({},b);r(P,{index:_,siblings:p.children.length,visible:p.visible}),I=u(I,P),w.push(I),I.visible&&(R+=I.val)});let O=c(S.value,R);return p.visible=O>=0&&(R>0||p.visible),p.children=w,p.childrenTotal=R,p.isLeaf=p.visible&&!R,p.val=O,p},updateRootId:function(u){let p,b;return a(u)&&(b=a(u.options)?u.options:{},p=c(u.rootNode,b.rootId,""),a(u.userOptions)&&(u.userOptions.rootId=p),u.rootNode=p),p}}}),s(t,"Series/Treemap/TreemapSeries.js",[t["Extensions/Breadcrumbs/Breadcrumbs.js"],t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Treemap/TreemapAlgorithmGroup.js"],t["Series/Treemap/TreemapNode.js"],t["Series/Treemap/TreemapPoint.js"],t["Series/Treemap/TreemapSeriesDefaults.js"],t["Series/Treemap/TreemapUtilities.js"],t["Series/TreeUtilities.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c,g,u,p,b){let{parse:v}=i,{composed:x,noop:m}=n,{column:E,scatter:L}=l.seriesTypes,{getColor:S,getLevelOptions:w,updateRootId:R}=p,{addEvent:O,correctFloat:I,crisp:_,defined:P,error:F,extend:A,fireEvent:D,isArray:C,isObject:d,isString:f,merge:y,pick:M,pushUnique:k,stableSort:T}=b,z=!1;function N(){let X,j=this.xAxis,B=this.yAxis;j&&B&&(this.is("treemap")?(X={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,minPadding:0,max:100,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]},A(B.options,X),A(j.options,X),z=!0):z&&(B.setOptions(B.userOptions),j.setOptions(j.userOptions),z=!1))}class G extends L{static compose(j){k(x,"TreemapSeries")&&O(j,"afterBindAxes",N)}algorithmCalcPoints(j,B,W,Y){let U=W.plot,q=W.elArr.length-1,H,V,Z,K,J=W.lW,tt=W.lH,$,Q=0;for(let et of(B?(J=W.nW,tt=W.nH):$=W.elArr[q],W.elArr))(B||Q<q)&&(W.direction===0?(H=U.x,V=U.y,K=et/(Z=J)):(H=U.x,V=U.y,Z=et/(K=tt)),Y.push({x:H,y:V,width:Z,height:I(K)}),W.direction===0?U.y=U.y+K:U.x=U.x+Z),Q+=1;W.reset(),W.direction===0?W.width=W.width-J:W.height=W.height-tt,U.y=U.parent.y+(U.parent.height-W.height),U.x=U.parent.x+(U.parent.width-W.width),j&&(W.direction=1-W.direction),B||W.addElement($)}algorithmFill(j,B,W){let Y=[],U,q=B.direction,H=B.x,V=B.y,Z=B.width,K=B.height,J,tt,$,Q;for(let et of W)U=B.width*B.height*(et.val/B.val),J=H,tt=V,q===0?(Z-=$=U/(Q=K),H+=$):(K-=Q=U/($=Z),V+=Q),Y.push({x:J,y:tt,width:$,height:Q}),j&&(q=1-q);return Y}algorithmLowAspectRatio(j,B,W){let Y=[],U={x:B.x,y:B.y,parent:B},q=B.direction,H=W.length-1,V=new a(B.height,B.width,q,U),Z,K=0;for(let J of W)Z=B.width*B.height*(J.val/B.val),V.addElement(Z),V.lP.nR>V.lP.lR&&this.algorithmCalcPoints(j,!1,V,Y,U),K===H&&this.algorithmCalcPoints(j,!0,V,Y,U),++K;return Y}alignDataLabel(j,B,W){let Y=W.style;Y&&!P(Y.textOverflow)&&B.text&&B.getBBox().width>(B.text.textWidth||0)&&B.css({textOverflow:"ellipsis",width:Y.width+="px"}),E.prototype.alignDataLabel.apply(this,arguments),j.dataLabel&&j.dataLabel.attr({zIndex:(j.node.zIndex||0)+1})}calculateChildrenAreas(j,B){let W=this.options,Y=this.mapOptionsToLevel[j.level+1],U=M(this[Y&&Y.layoutAlgorithm]&&Y.layoutAlgorithm,W.layoutAlgorithm),q=W.alternateStartingDirection,H=j.children.filter(K=>!K.ignore),V=[];Y&&Y.layoutStartingDirection&&(B.direction=Y.layoutStartingDirection==="vertical"?0:1),V=this[U](B,H);let Z=-1;for(let K of H){let J=V[++Z];K.values=y(J,{val:K.childrenTotal,direction:q?1-B.direction:B.direction}),K.pointValues=y(J,{x:J.x/this.axisRatio,y:100-J.y-J.height,width:J.width/this.axisRatio}),K.children.length&&this.calculateChildrenAreas(K,K.values)}}createList(j){let B=this.chart,W=B.breadcrumbs,Y=[];if(W){let U=0;Y.push({level:U,levelOptions:B.series[0]});let q=j.target.nodeMap[j.newRootId],H=[];for(;q.parent||q.parent==="";)H.push(q),q=j.target.nodeMap[q.parent];for(let V of H.reverse())Y.push({level:++U,levelOptions:V});Y.length<=1&&(Y.length=0)}return Y}drawDataLabels(){let j,B,W=this.mapOptionsToLevel;for(let Y of this.points.filter(function(U){return U.node.visible}))B=W[Y.node.level],j={style:{}},Y.node.isLeaf||(j.enabled=!1),B&&B.dataLabels&&(j=y(j,B.dataLabels),this.hasDataLabels=()=>!0),Y.shapeArgs&&(j.style.width=Y.shapeArgs.width,Y.dataLabel&&Y.dataLabel.css({width:Y.shapeArgs.width+"px"})),Y.dlOptions=y(j,Y.options.dataLabels);super.drawDataLabels()}drawPoints(j=this.points){let B=this.chart,W=B.renderer,Y=B.styledMode,U=this.options,q=Y?{}:U.shadow,H=U.borderRadius,V=B.pointCount<U.animationLimit,Z=U.allowTraversingTree;for(let K of j){let J=K.node.levelDynamic,tt={},$={},Q={},et="level-group-"+K.node.level,it=!!K.graphic,st=V&&it,rt=K.shapeArgs;K.shouldDraw()&&(K.isInside=!0,H&&($.r=H),y(!0,st?tt:$,it?rt:{},Y?{}:this.pointAttribs(K,K.selected?"select":void 0)),this.colorAttribs&&Y&&A(Q,this.colorAttribs(K)),this[et]||(this[et]=W.g(et).attr({zIndex:1e3-(J||0)}).add(this.group),this[et].survive=!0)),K.draw({animatableAttribs:tt,attribs:$,css:Q,group:this[et],imageUrl:K.imageUrl,renderer:W,shadow:q,shapeArgs:rt,shapeType:K.shapeType}),Z&&K.graphic&&(K.drillId=U.interactByLeaf?this.drillToByLeaf(K):this.drillToByGroup(K))}}drillToByGroup(j){let B=!1;return j.node.isLeaf||j.node.level-this.nodeMap[this.rootNode].level!=1||(B=j.id),B}drillToByLeaf(j){let B=!1,W;if(j.node.parent!==this.rootNode&&j.node.isLeaf)for(W=j.node;!B;)(W=this.nodeMap[W.parent]).parent===this.rootNode&&(B=W.id);return B}drillToNode(j,B){F(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"}),this.setRootNode(j,B)}drillUp(){let j=this.nodeMap[this.rootNode];j&&f(j.parent)&&this.setRootNode(j.parent,!0,{trigger:"traverseUpButton"})}getExtremes(){let{dataMin:j,dataMax:B}=super.getExtremes(this.colorValueData);return this.valueMin=j,this.valueMax=B,super.getExtremes()}getListOfParents(j,B){let W=C(j)?j:[],Y=C(B)?B:[],U=W.reduce(function(q,H,V){let Z=M(H.parent,"");return q[Z]===void 0&&(q[Z]=[]),q[Z].push(V),q},{"":[]});for(let q of Object.keys(U)){let H=U[q];if(q!==""&&Y.indexOf(q)===-1){for(let V of H)U[""].push(V);delete U[q]}}return U}getTree(){let j=this.data.map(function(W){return W.id}),B=this.getListOfParents(this.data,j);return this.nodeMap={},this.nodeList=[],this.buildTree("",-1,0,B)}buildTree(j,B,W,Y,U){let q=[],H=this.points[B],V=0,Z;for(let J of Y[j]||[])V=Math.max((Z=this.buildTree(this.points[J].id,J,W+1,Y,j)).height+1,V),q.push(Z);let K=new this.NodeClass().init(j,B,q,V,W,this,U);for(let J of q)J.parentNode=K;return this.nodeMap[K.id]=K,this.nodeList.push(K),H&&(H.node=K,K.point=H),K}hasData(){return!!this.processedXData.length}init(j,B){let W=this,Y=y(B.drillUpButton,B.breadcrumbs),U=O(W,"setOptions",q=>{let H=q.userOptions;P(H.allowDrillToNode)&&!P(H.allowTraversingTree)&&(H.allowTraversingTree=H.allowDrillToNode,delete H.allowDrillToNode),P(H.drillUpButton)&&!P(H.traverseUpButton)&&(H.traverseUpButton=H.drillUpButton,delete H.drillUpButton)});super.init(j,B),delete W.opacity,W.eventsToUnbind.push(U),W.options.allowTraversingTree&&(W.eventsToUnbind.push(O(W,"click",W.onClickDrillToNode)),W.eventsToUnbind.push(O(W,"setRootNode",function(q){let H=W.chart;H.breadcrumbs&&H.breadcrumbs.updateProperties(W.createList(q))})),W.eventsToUnbind.push(O(W,"update",function(q,H){let V=this.chart.breadcrumbs;V&&q.options.breadcrumbs&&V.update(q.options.breadcrumbs)})),W.eventsToUnbind.push(O(W,"destroy",function(q){let H=this.chart;H.breadcrumbs&&!q.keepEventsForUpdate&&(H.breadcrumbs.destroy(),H.breadcrumbs=void 0)}))),j.breadcrumbs||(j.breadcrumbs=new e(j,Y)),W.eventsToUnbind.push(O(j.breadcrumbs,"up",function(q){let H=this.level-q.newLevel;for(let V=0;V<H;V++)W.drillUp()}))}onClickDrillToNode(j){let B=j.point,W=B&&B.drillId;f(W)&&(B.setState(""),this.setRootNode(W,!0,{trigger:"click"}))}pointAttribs(j,B){let W,Y=d(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},U=j&&Y[j.node.level]||{},q=this.options,H=B&&q.states&&q.states[B]||{},V=j&&j.getClassName()||"",Z={stroke:j&&j.borderColor||U.borderColor||H.borderColor||q.borderColor,"stroke-width":M(j&&j.borderWidth,U.borderWidth,H.borderWidth,q.borderWidth),dashstyle:j&&j.borderDashStyle||U.borderDashStyle||H.borderDashStyle||q.borderDashStyle,fill:j&&j.color||this.color};return V.indexOf("highcharts-above-level")!==-1?(Z.fill="none",Z["stroke-width"]=0):V.indexOf("highcharts-internal-node-interactive")!==-1?(W=M(H.opacity,q.opacity),Z.fill=v(Z.fill).setOpacity(W).get(),Z.cursor="pointer"):V.indexOf("highcharts-internal-node")!==-1?Z.fill="none":B&&(Z.fill=v(Z.fill).brighten(H.brightness).get()),Z}setColorRecursive(j,B,W,Y,U){let q=this&&this.chart,H=q&&q.options&&q.options.colors;if(j){let V=S(j,{colors:H,index:Y,mapOptionsToLevel:this.mapOptionsToLevel,parentColor:B,parentColorIndex:W,series:this,siblings:U}),Z=this.points[j.i];Z&&(Z.color=V.color,Z.colorIndex=V.colorIndex);let K=-1;for(let J of j.children||[])this.setColorRecursive(J,V.color,V.colorIndex,++K,j.children.length)}}setPointValues(){let j=this,{points:B,xAxis:W,yAxis:Y}=j,U=j.chart.styledMode,q=H=>U?0:j.pointAttribs(H)["stroke-width"]||0;for(let H of B){let{pointValues:V,visible:Z}=H.node;if(V&&Z){let{height:K,width:J,x:tt,y:$}=V,Q=q(H),et=_(W.toPixels(tt,!0),Q,!0),it=_(W.toPixels(tt+J,!0),Q,!0),st=_(Y.toPixels($,!0),Q,!0),rt=_(Y.toPixels($+K,!0),Q,!0),nt={x:Math.min(et,it),y:Math.min(st,rt),width:Math.abs(it-et),height:Math.abs(rt-st)};H.plotX=nt.x+nt.width/2,H.plotY=nt.y+nt.height/2,H.shapeArgs=nt}else delete H.plotX,delete H.plotY}}setRootNode(j,B,W){D(this,"setRootNode",A({newRootId:j,previousRootId:this.rootNode,redraw:M(B,!0),series:this},W),function(Y){let U=Y.series;U.idPreviousRoot=Y.previousRootId,U.rootNode=Y.newRootId,U.isDirty=!0,Y.redraw&&U.chart.redraw()})}setState(j){this.options.inactiveOtherPoints=!0,super.setState(j,!1),this.options.inactiveOtherPoints=!1}setTreeValues(j){let B=this.options,W=this.rootNode,Y=this.nodeMap[W],U=typeof B.levelIsConstant!="boolean"||B.levelIsConstant,q=[],H=this.points[j.i],V=0;for(let K of j.children)K=this.setTreeValues(K),q.push(K),K.ignore||(V+=K.val);T(q,(K,J)=>(K.sortIndex||0)-(J.sortIndex||0));let Z=M(H&&H.options.value,V);return H&&(H.value=Z),A(j,{children:q,childrenTotal:V,ignore:!(M(H&&H.visible,!0)&&Z>0),isLeaf:j.visible&&!V,levelDynamic:j.level-(U?0:Y.level),name:M(H&&H.name,""),sortIndex:M(H&&H.sortIndex,-Z),val:Z}),j}sliceAndDice(j,B){return this.algorithmFill(!0,j,B)}squarified(j,B){return this.algorithmLowAspectRatio(!0,j,B)}strip(j,B){return this.algorithmLowAspectRatio(!1,j,B)}stripes(j,B){return this.algorithmFill(!1,j,B)}translate(){let j=this,B=j.options,W=R(j),Y,U,q,H;super.translate();let V=j.tree=j.getTree();Y=j.nodeMap[W],W===""||Y&&Y.children.length||(j.setRootNode("",!1),W=j.rootNode,Y=j.nodeMap[W]),j.mapOptionsToLevel=w({from:Y.level+1,levels:B.levels,to:V.height,defaults:{levelIsConstant:j.options.levelIsConstant,colorByPoint:B.colorByPoint}}),u.recursive(j.nodeMap[j.rootNode],Z=>{let K=Z.parent,J=!1;return Z.visible=!0,(K||K==="")&&(J=j.nodeMap[K]),J}),u.recursive(j.nodeMap[j.rootNode].children,Z=>{let K=!1;for(let J of Z)J.visible=!0,J.children.length&&(K=(K||[]).concat(J.children));return K}),j.setTreeValues(V),j.axisRatio=j.xAxis.len/j.yAxis.len,j.nodeMap[""].pointValues=U={x:0,y:0,width:100,height:100},j.nodeMap[""].values=q=y(U,{width:U.width*j.axisRatio,direction:B.layoutStartingDirection==="vertical"?0:1,val:V.val}),j.calculateChildrenAreas(V,q),j.colorAxis||B.colorByPoint||j.setColorRecursive(j.tree),B.allowTraversingTree&&(H=Y.pointValues,j.xAxis.setExtremes(H.x,H.x+H.width,!1),j.yAxis.setExtremes(H.y,H.y+H.height,!1),j.xAxis.setScale(),j.yAxis.setScale()),j.setPointValues()}}return G.defaultOptions=y(L.defaultOptions,g),A(G.prototype,{buildKDTree:m,colorAttribs:r.seriesMembers.colorAttribs,colorKey:"colorValue",directTouch:!0,getExtremesFromAll:!0,getSymbol:m,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value"],pointClass:c,NodeClass:h,trackerGroups:["group","dataLabelsGroup"],utils:u}),r.compose(G),l.registerSeriesType("treemap",G),G}),s(t,"masters/modules/treemap.src.js",[t["Core/Globals.js"],t["Extensions/Breadcrumbs/Breadcrumbs.js"],t["Series/Treemap/TreemapSeries.js"]],function(e,i,r){return e.Breadcrumbs=e.Breadcrumbs||i,e.Breadcrumbs.compose(e.Chart,e.defaultOptions),r.compose(e.Series),e})})});var Eu=qe((AT,Xn)=>{"use strict";(function(o){typeof Xn=="object"&&Xn.exports?(o.default=o,Xn.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/heatmap",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function s(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}s(t,"Core/Axis/Color/ColorAxisComposition.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,i){var r;let{parse:n}=e,{addEvent:l,extend:a,merge:h,pick:c,splat:g}=i;return function(u){let p;function b(){let{userOptions:I}=this;this.colorAxis=[],I.colorAxis&&(I.colorAxis=g(I.colorAxis),I.colorAxis.map(_=>new p(this,_)))}function v(I){let _=this.chart.colorAxis||[],P=C=>{let d=I.allItems.indexOf(C);d!==-1&&(this.destroyItem(I.allItems[d]),I.allItems.splice(d,1))},F=[],A,D;for(_.forEach(function(C){(A=C.options)&&A.showInLegend&&(A.dataClasses&&A.visible?F=F.concat(C.getDataClassLegendSymbols()):A.visible&&F.push(C),C.series.forEach(function(d){(!d.options.showInLegend||A.dataClasses)&&(d.options.legendType==="point"?d.points.forEach(function(f){P(f)}):P(d))}))}),D=F.length;D--;)I.allItems.unshift(F[D])}function x(I){I.visible&&I.item.legendColor&&I.item.legendItem.symbol.attr({fill:I.item.legendColor})}function m(I){this.chart.colorAxis?.forEach(_=>{_.update({},I.redraw)})}function E(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function L(){let I=this.axisTypes;I?I.indexOf("colorAxis")===-1&&I.push("colorAxis"):this.axisTypes=["colorAxis"]}function S(I){let _=this,P=I?"show":"hide";_.visible=_.options.visible=!!I,["graphic","dataLabel"].forEach(function(F){_[F]&&_[F][P]()}),this.series.buildKDTree()}function w(){let I=this,_=this.data.length?this.data:this.points,P=this.options.nullColor,F=this.colorAxis,A=this.colorKey;_.forEach(D=>{let C=D.getNestedProperty(A),d=D.options.color||(D.isNull||D.value===null?P:F&&C!==void 0?F.toColor(C,D):D.color||I.color);d&&D.color!==d&&(D.color=d,I.options.legendType==="point"&&D.legendItem&&D.legendItem.label&&I.chart.legend.colorizeItem(D,D.visible))})}function R(){this.elem.attr("fill",n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}function O(){this.elem.attr("stroke",n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}u.compose=function(I,_,P,F,A){let D=_.prototype,C=P.prototype,d=A.prototype;D.collectionsWithUpdate.includes("colorAxis")||(p=I,D.collectionsWithUpdate.push("colorAxis"),D.collectionsWithInit.colorAxis=[D.addColorAxis],l(_,"afterGetAxes",b),function(f){let y=f.prototype.createAxis;f.prototype.createAxis=function(M,k){if(M!=="colorAxis")return y.apply(this,arguments);let T=new p(this,h(k.axis,{index:this[M].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(z=>{z.series=[]}),this.series.forEach(z=>{z.bindAxes(),z.isDirtyData=!0}),c(k.redraw,!0)&&this.redraw(k.animation),T}}(_),C.fillSetter=R,C.strokeSetter=O,l(F,"afterGetAllItems",v),l(F,"afterColorizeItem",x),l(F,"afterUpdate",m),a(d,{optionalAxis:"colorAxis",translateColors:w}),a(d.pointClass.prototype,{setVisible:S}),l(A,"afterTranslate",E,{order:1}),l(A,"bindAxes",L))},u.pointSetVisible=S}(r||(r={})),r}),s(t,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0}}),s(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,i){var r,n;let{parse:l}=e,{merge:a}=i;return(n=r||(r={})).initDataClasses=function(h){let c=this.chart,g=this.legendItem=this.legendItem||{},u=this.options,p=h.dataClasses||[],b,v,x=c.options.chart.colorCount,m=0,E;this.dataClasses=v=[],g.labels=[];for(let L=0,S=p.length;L<S;++L)b=a(b=p[L]),v.push(b),(c.styledMode||!b.color)&&(u.dataClassColor==="category"?(c.styledMode||(x=(E=c.options.colors||[]).length,b.color=E[m]),b.colorIndex=m,++m===x&&(m=0)):b.color=l(u.minColor).tweenTo(l(u.maxColor),S<2?.5:L/(S-1)))},n.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let g=0,u=c.length;g<u;++g)c[g].color=l(c[g][1])},n.normalizedValue=function(h){let c=this.max||0,g=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-g||1)},n.toColor=function(h,c){let g,u,p,b,v,x,m=this.dataClasses,E=this.stops;if(m){for(x=m.length;x--;)if(u=(v=m[x]).from,p=v.to,(u===void 0||h>=u)&&(p===void 0||h<=p)){b=v.color,c&&(c.dataClass=x,c.colorIndex=v.colorIndex);break}}else{for(g=this.normalizedValue(h),x=E.length;x--&&!(g>E[x][0]););u=E[x]||E[x+1],g=1-((p=E[x+1]||u)[0]-g)/(p[0]-u[0]||1),b=u.color.tweenTo(p.color,g)}return b},r}),s(t,"Core/Axis/Color/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Axis/Color/ColorAxisComposition.js"],t["Core/Axis/Color/ColorAxisDefaults.js"],t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Defaults.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c){let{defaultOptions:g}=l,{series:u}=h,{defined:p,extend:b,fireEvent:v,isArray:x,isNumber:m,merge:E,pick:L,relativeLength:S}=c;g.colorAxis=E(g.xAxis,r);class w extends e{static compose(O,I,_,P){i.compose(w,O,I,_,P)}constructor(O,I){super(O,I),this.coll="colorAxis",this.visible=!0,this.init(O,I)}init(O,I){let _=O.options.legend||{},P=I.layout?I.layout!=="vertical":_.layout!=="vertical";this.side=I.side||P?2:1,this.reversed=I.reversed||!P,this.opposite=!P,super.init(O,I,"colorAxis"),this.userOptions=I,x(O.userOptions.colorAxis)&&(O.userOptions.colorAxis[this.index]=I),I.dataClasses&&this.initDataClasses(I),this.initStops(),this.horiz=P,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(O){let I=E(g.colorAxis,O,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&O.visible!==!1});super.setOptions(I),this.options.crosshair=this.options.marker}setAxisSize(){let O=this.chart,I=this.legendItem?.symbol,{width:_,height:P}=this.getSize();I&&(this.left=+I.attr("x"),this.top=+I.attr("y"),this.width=_=+I.attr("width"),this.height=P=+I.attr("height"),this.right=O.chartWidth-this.left-_,this.bottom=O.chartHeight-this.top-P,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?_:P)||w.defaultLegendLength}getOffset(){let O=this.legendItem?.group,I=this.chart.axisOffset[this.side];if(O){this.axisParent=O,super.getOffset();let _=this.chart.legend;_.allItems.forEach(function(P){P instanceof w&&P.drawLegendSymbol(_,P)}),_.render(),this.chart.getMargins(!0),this.chart.series.some(P=>P.isDrilling)||(this.isDirty=!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=I}}setLegendColor(){let O=this.horiz,I=this.reversed,_=I?1:0,P=I?0:1,F=O?[_,0,P,0]:[0,P,0,_];this.legendColor={linearGradient:{x1:F[0],y1:F[1],x2:F[2],y2:F[3]},stops:this.stops}}drawLegendSymbol(O,I){let _=I.legendItem||{},P=O.padding,F=O.options,A=this.options.labels,D=L(F.itemDistance,10),C=this.horiz,{width:d,height:f}=this.getSize(),y=L(F.labelPadding,C?16:30);this.setLegendColor(),_.symbol||(_.symbol=this.chart.renderer.symbol("roundedRect").attr({r:F.symbolRadius??3,zIndex:1}).add(_.group)),_.symbol.attr({x:0,y:(O.baseline||0)-11,width:d,height:f}),_.labelWidth=d+P+(C?D:L(A.x,A.distance)+(this.maxLabelLength||0)),_.labelHeight=f+P+(C?y:0)}setState(O){this.series.forEach(function(I){I.setState(O)})}setVisible(){}getSeriesExtremes(){let O=this.series,I,_,P,F,A,D,C=O.length,d,f;for(this.dataMin=1/0,this.dataMax=-1/0;C--;){if(_=(D=O[C]).colorKey=L(D.options.colorKey,D.colorKey,D.pointValKey,D.zoneAxis,"y"),F=D.pointArrayMap,A=D[_+"Min"]&&D[_+"Max"],D[_+"Data"])I=D[_+"Data"];else if(F){if(I=[],P=F.indexOf(_),d=D.yData,P>=0&&d)for(f=0;f<d.length;f++)I.push(L(d[f][P],d[f]))}else I=D.yData;if(A)D.minColorValue=D[_+"Min"],D.maxColorValue=D[_+"Max"];else{let y=u.prototype.getExtremes.call(D,I);D.minColorValue=y.dataMin,D.maxColorValue=y.dataMax}p(D.minColorValue)&&p(D.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,D.minColorValue),this.dataMax=Math.max(this.dataMax,D.maxColorValue)),A||u.prototype.applyExtremes.call(D)}}drawCrosshair(O,I){let _,P=this.legendItem||{},F=I&&I.plotX,A=I&&I.plotY,D=this.pos,C=this.len;I&&((_=this.toPixels(I.getNestedProperty(I.series.colorKey)))<D?_=D-2:_>D+C&&(_=D+C+2),I.plotX=_,I.plotY=this.len-_,super.drawCrosshair(O,I),I.plotX=F,I.plotY=A,this.cross&&!this.cross.addedToColorAxis&&P.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(P.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||typeof this.crosshair!="object"||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(O){let I=this.left,_=O.translatedValue,P=this.top;return m(_)?this.horiz?[["M",_-4,P-6],["L",_+4,P-6],["L",_,P],["Z"]]:[["M",I,_],["L",I-6,_+6],["L",I-6,_-6],["Z"]]:super.getPlotLinePath(O)}update(O,I){let _=this.chart.legend;this.series.forEach(P=>{P.isDirtyData=!0}),(O.dataClasses&&_.allItems||this.dataClasses)&&this.destroyItems(),super.update(O,I),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),_.colorizeItem(this,!0))}destroyItems(){let O=this.chart,I=this.legendItem||{};if(I.label)O.legend.destroyItem(this);else if(I.labels)for(let _ of I.labels)O.legend.destroyItem(_);O.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(O){this.destroyItems(),super.remove(O)}getDataClassLegendSymbols(){let O,I=this,_=I.chart,P=I.legendItem&&I.legendItem.labels||[],F=_.options.legend,A=L(F.valueDecimals,-1),D=L(F.valueSuffix,""),C=d=>I.series.reduce((f,y)=>(f.push(...y.points.filter(M=>M.dataClass===d)),f),[]);return P.length||I.dataClasses.forEach((d,f)=>{let y=d.from,M=d.to,{numberFormatter:k}=_,T=!0;O="",y===void 0?O="< ":M===void 0&&(O="> "),y!==void 0&&(O+=k(y,A)+D),y!==void 0&&M!==void 0&&(O+=" - "),M!==void 0&&(O+=k(M,A)+D),P.push(b({chart:_,name:O,options:{},drawLegendSymbol:a.rectangle,visible:!0,isDataClass:!0,setState:z=>{for(let N of C(f))N.setState(z)},setVisible:function(){this.visible=T=I.visible=!T;let z=[];for(let N of C(f))N.setVisible(T),N.hiddenInDataClass=!T,z.indexOf(N.series)===-1&&z.push(N.series);_.legend.colorizeItem(this,T),z.forEach(N=>{v(N,"afterDataClassLegendClick")})}},d))}),P}getSize(){let{chart:O,horiz:I}=this,{height:_,width:P}=this.options,{legend:F}=O.options;return{width:L(p(P)?S(P,O.chartWidth):void 0,F?.symbolWidth,I?w.defaultLegendLength:12),height:L(p(_)?S(_,O.chartHeight):void 0,F?.symbolHeight,I?12:w.defaultLegendLength)}}}return w.defaultLegendLength=200,w.keepProps=["legendItem"],b(w.prototype,n),Array.prototype.push.apply(e.keepProps,w.keepProps),w}),s(t,"masters/modules/coloraxis.src.js",[t["Core/Globals.js"],t["Core/Axis/Color/ColorAxis.js"]],function(e,i){return e.ColorAxis=e.ColorAxis||i,e.ColorAxis.compose(e.Chart,e.Fx,e.Legend,e.Series),e}),s(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(e,i,r){var n;let{column:{prototype:l}}=e.seriesTypes,{addEvent:a,defined:h}=r;return function(c){function g(u){let p=this.series,b=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new i(b,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),u?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${b.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(u){let p={};return h(u.color)&&(!u.state||u.state==="normal")&&(p[this.colorProp||"fill"]=u.color),p},pointAttribs:l.pointAttribs},c.compose=function(u){return a(u.prototype.pointClass,"afterSetState",g),u}}(n||(n={})),n}),s(t,"Series/Heatmap/HeatmapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i){let{scatter:{prototype:{pointClass:r}}}=e.seriesTypes,{clamp:n,defined:l,extend:a,pick:h}=i;class c extends r{applyOptions(u,p){return(this.isNull||this.value===null)&&delete this.color,super.applyOptions(u,p),this.formatPrefix=this.isNull||this.value===null?"null":"point",this}getCellAttributes(){let u=this.series,p=u.options,b=(p.colsize||1)/2,v=(p.rowsize||1)/2,x=u.xAxis,m=u.yAxis,E=this.options.marker||u.options.marker,L=u.pointPlacementToXValue(),S=h(this.pointPadding,p.pointPadding,0),w={x1:n(Math.round(x.len-x.translate(this.x-b,!1,!0,!1,!0,-L)),-x.len,2*x.len),x2:n(Math.round(x.len-x.translate(this.x+b,!1,!0,!1,!0,-L)),-x.len,2*x.len),y1:n(Math.round(m.translate(this.y-v,!1,!0,!1,!0)),-m.len,2*m.len),y2:n(Math.round(m.translate(this.y+v,!1,!0,!1,!0)),-m.len,2*m.len)};for(let R of[["width","x"],["height","y"]]){let O=R[0],I=R[1],_=I+"1",P=I+"2",F=Math.abs(w[_]-w[P]),A=E&&E.lineWidth||0,D=Math.abs(w[_]+w[P])/2,C=E&&E[O];if(l(C)&&C<F){let d=C/2+A/2;w[_]=D-d,w[P]=D+d}S&&((I==="x"&&x.reversed||I==="y"&&!m.reversed)&&(_=P,P=I+"1"),w[_]+=S,w[P]-=S)}return w}haloPath(u){if(!u)return[];let{x:p=0,y:b=0,width:v=0,height:x=0}=this.shapeArgs||{};return[["M",p-u,b-u],["L",p-u,b+x+u],["L",p+v+u,b+x+u],["L",p+v+u,b-u],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}return a(c.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),c}),s(t,"Series/Heatmap/HeatmapSeriesDefaults.js",[t["Core/Utilities.js"]],function(e){let{isNumber:i}=e;return{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:n}=this.point;return i(n)?r(n,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}}),s(t,"Series/InterpolationUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){let{doc:r}=e,{defined:n,pick:l}=i;return{colorFromPoint:function(a,h){let c=h.series.colorAxis;if(c){let g=c.toColor(a||0,h).split(")")[0].split("(")[1].split(",").map(u=>l(parseFloat(u),parseInt(u,10)));return g[3]=255*l(g[3],1),n(a)&&h.visible||(g[3]=0),g}return[0,0,0,0]},getContext:function(a){let{canvas:h,context:c}=a;return h&&c?(c.clearRect(0,0,h.width,h.height),c):(a.canvas=r.createElement("canvas"),a.context=a.canvas.getContext("2d",{willReadFrequently:!0})||void 0,a.context)}}}),s(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Series/Heatmap/HeatmapSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"],t["Series/InterpolationUtilities.js"]],function(e,i,r,n,l,a,h,c){let{series:g,seriesTypes:{column:u,scatter:p}}=l,{prototype:{symbols:b}}=a,{addEvent:v,extend:x,fireEvent:m,isNumber:E,merge:L,pick:S}=h,{colorFromPoint:w,getContext:R}=c;class O extends p{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let _=this,P=_.options,F=P.interpolation,A=P.marker||{};if(F){let{image:D,chart:C,xAxis:d,yAxis:f}=_,{reversed:y=!1,len:M}=d,{reversed:k=!1,len:T}=f,z={width:M,height:T};if(!D||_.isDirtyData||_.isDirtyCanvas){let N=R(_),{canvas:G,options:{colsize:X=1,rowsize:j=1},points:B,points:{length:W}}=_,Y=C.colorAxis&&C.colorAxis[0];if(G&&N&&Y){let{min:U,max:q}=d.getExtremes(),{min:H,max:V}=f.getExtremes(),Z=q-U,K=V-H,J=Math.round(Z/X/8*8),tt=Math.round(K/j/8*8),[$,Q]=[[J,J/Z,y,"ceil"],[tt,tt/K,!k,"floor"]].map(([ot,at,ct,ht])=>ct?lt=>Math[ht](ot-at*lt):lt=>Math[ht](at*lt)),et=G.width=J+1,it=et*(G.height=tt+1),st=(W-1)/it,rt=new Uint8ClampedArray(4*it),nt=(ot,at)=>4*Math.ceil(et*Q(at-H)+$(ot-U));_.buildKDTree();for(let ot=0;ot<it;ot++){let at=B[Math.ceil(st*ot)],{x:ct,y:ht}=at;rt.set(w(at.value,at),nt(ct,ht))}N.putImageData(new ImageData(rt,et),0,0),D?D.attr(qi(xe({},z),{href:G.toDataURL("image/png",1)})):(_.directTouch=!1,_.image=C.renderer.image(G.toDataURL("image/png",1)).attr(z).add(_.group))}_.isDirtyCanvas=!1}else(D.width!==M||D.height!==T)&&D.attr(z)}else(A.enabled||_._hasPointMarkers)&&(g.prototype.drawPoints.call(_),_.points.forEach(D=>{D.graphic&&(D.graphic[_.chart.styledMode?"css":"animate"](_.colorAttribs(D)),D.value===null&&D.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:_,dataMax:P}=g.prototype.getExtremes.call(this,this.valueData);return E(_)&&(this.valueMin=_),E(P)&&(this.valueMax=P),g.prototype.getExtremes.call(this)}getValidPoints(_,P){return g.prototype.getValidPoints.call(this,_,P,!0)}hasData(){return!!this.processedXData.length}init(){super.init.apply(this,arguments);let _=this.options;_.pointRange=S(_.pointRange,_.colsize||1),this.yAxis.axisPointRange=_.rowsize||1,b.ellipse=b.circle,_.marker&&E(_.borderRadius)&&(_.marker.r=_.borderRadius)}markerAttribs(_,P){let F=_.shapeArgs||{};if(_.hasImage)return{x:_.plotX,y:_.plotY};if(P&&P!=="normal"){let A=_.options.marker||{},D=this.options.marker||{},C=D.states&&D.states[P]||{},d=A.states&&A.states[P]||{},f=(d.width||C.width||F.width||0)+(d.widthPlus||C.widthPlus||0),y=(d.height||C.height||F.height||0)+(d.heightPlus||C.heightPlus||0);return{x:(F.x||0)+((F.width||0)-f)/2,y:(F.y||0)+((F.height||0)-y)/2,width:f,height:y}}return F}pointAttribs(_,P){let F=g.prototype.pointAttribs.call(this,_,P),A=this.options||{},D=this.chart.options.plotOptions||{},C=D.series||{},d=D.heatmap||{},f=_&&_.options.borderColor||A.borderColor||d.borderColor||C.borderColor,y=_&&_.options.borderWidth||A.borderWidth||d.borderWidth||C.borderWidth||F["stroke-width"];if(F.stroke=_&&_.marker&&_.marker.lineColor||A.marker&&A.marker.lineColor||f||this.color,F["stroke-width"]=y,P&&P!=="normal"){let M=L(A.states&&A.states[P],A.marker&&A.marker.states&&A.marker.states[P],_&&_.options.states&&_.options.states[P]||{});F.fill=M.color||e.parse(F.fill).brighten(M.brightness||0).get(),F.stroke=M.lineColor||F.stroke}return F}translate(){let{borderRadius:_,marker:P}=this.options,F=P&&P.symbol||"rect",A=b[F]?F:"rect",D=["circle","square"].indexOf(A)!==-1;for(let C of(this.generatePoints(),this.points)){let d=C.getCellAttributes(),f=Math.min(d.x1,d.x2),y=Math.min(d.y1,d.y2),M=Math.max(Math.abs(d.x2-d.x1),0),k=Math.max(Math.abs(d.y2-d.y1),0);if(C.hasImage=(C.marker&&C.marker.symbol||F||"").indexOf("url")===0,D){let T=Math.abs(M-k);f=Math.min(d.x1,d.x2)+(M<k?0:T/2),y=Math.min(d.y1,d.y2)+(M<k?T/2:0),M=k=Math.min(M,k)}C.hasImage&&(C.marker={width:M,height:k}),C.plotX=C.clientX=(d.x1+d.x2)/2,C.plotY=(d.y1+d.y2)/2,C.shapeType="path",C.shapeArgs=L(!0,{x:f,y,width:M,height:k},{d:b[A](f,y,M,k,{r:E(_)?_:0})})}m(this,"afterTranslate")}}return O.defaultOptions=L(p.defaultOptions,n),v(O,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),x(O.prototype,{axisTypes:i.seriesMembers.axisTypes,colorKey:i.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:i.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:r,specialGroup:"group",trackerGroups:i.seriesMembers.trackerGroups,alignDataLabel:u.prototype.alignDataLabel,colorAttribs:i.seriesMembers.colorAttribs,getSymbol:g.prototype.getSymbol}),i.compose(O),l.registerSeriesType("heatmap",O),O}),s(t,"masters/modules/heatmap.src.js",[t["Core/Globals.js"]],function(e){return e})})});var Tu=qe((DT,Wn)=>{"use strict";(function(o){typeof Wn=="object"&&Wn.exports?(o.default=o,Wn.exports=o):typeof define=="function"&&define.amd?define("highcharts/highcharts-3d",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function s(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}s(t,"Core/Math3D.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){let{deg2rad:r}=e,{pick:n}=i;function l(c,g,u,p){let b=g.options.chart.options3d,v=n(p,!!u&&g.inverted),x={x:g.plotWidth/2,y:g.plotHeight/2,z:b.depth/2,vd:n(b.depth,1)*n(b.viewDistance,0)},m=g.scale3d||1,E=r*b.beta*(v?-1:1),L=r*b.alpha*(v?-1:1),S={cosA:Math.cos(L),cosB:Math.cos(-E),sinA:Math.sin(L),sinB:Math.sin(-E)};return u||(x.x+=g.plotLeft,x.y+=g.plotTop),c.map(function(w){var R,O,I;let _=(R=(v?w.y:w.x)-x.x,O=(v?w.x:w.y)-x.y,I=(w.z||0)-x.z,{x:S.cosB*R-S.sinB*I,y:-S.sinA*S.sinB*R+S.cosA*O-S.cosB*S.sinA*I,z:S.cosA*S.sinB*R+S.sinA*O+S.cosA*S.cosB*I}),P=a(_,x,x.vd);return P.x=P.x*m+x.x,P.y=P.y*m+x.y,P.z=_.z*m+x.z,{x:v?P.y:P.x,y:v?P.x:P.y,z:P.z}})}function a(c,g,u){let p=u>0&&u<Number.POSITIVE_INFINITY?u/(c.z+g.z+u):1;return{x:c.x*p,y:c.y*p}}function h(c){let g=0,u,p;for(u=0;u<c.length;u++)p=(u+1)%c.length,g+=c[u].x*c[p].y-c[p].x*c[u].y;return g/2}return{perspective:l,perspective3D:a,pointCameraDistance:function(c,g){let u=g.options.chart.options3d,p={x:g.plotWidth/2,y:g.plotHeight/2,z:n(u.depth,1)*n(u.viewDistance,0)+u.depth};return Math.sqrt(Math.pow(p.x-n(c.plotX,c.x),2)+Math.pow(p.y-n(c.plotY,c.y),2)+Math.pow(p.z-n(c.plotZ,c.z),2))},shapeArea:h,shapeArea3D:function(c,g,u){return h(l(c,g,u))}}}),s(t,"Core/Chart/Chart3D.js",[t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Math3D.js"],t["Core/Utilities.js"]],function(e,i,r,n){var l;let{parse:a}=e,{defaultOptions:h}=i,{perspective:c,shapeArea3D:g}=r,{addEvent:u,isArray:p,merge:b,pick:v,wrap:x}=n;return function(m){function E(C){this.is3d()&&C.options.type==="scatter"&&(C.options.type="scatter3d")}function L(){if(this.chart3d&&this.is3d()){let C=this.renderer,d=this.options.chart.options3d,f=this.chart3d.get3dFrame(),y=this.plotLeft,M=this.plotLeft+this.plotWidth,k=this.plotTop,T=this.plotTop+this.plotHeight,z=d.depth,N=y-(f.left.visible?f.left.size:0),G=M+(f.right.visible?f.right.size:0),X=k-(f.top.visible?f.top.size:0),j=T+(f.bottom.visible?f.bottom.size:0),B=0-(f.front.visible?f.front.size:0),W=z+(f.back.visible?f.back.size:0),Y=this.hasRendered?"animate":"attr";this.chart3d.frame3d=f,this.frameShapes||(this.frameShapes={bottom:C.polyhedron().add(),top:C.polyhedron().add(),left:C.polyhedron().add(),right:C.polyhedron().add(),back:C.polyhedron().add(),front:C.polyhedron().add()}),this.frameShapes.bottom[Y]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:f.bottom.frontFacing?-1e3:1e3,faces:[{fill:a(f.bottom.color).brighten(.1).get(),vertexes:[{x:N,y:j,z:B},{x:G,y:j,z:B},{x:G,y:j,z:W},{x:N,y:j,z:W}],enabled:f.bottom.visible},{fill:a(f.bottom.color).brighten(.1).get(),vertexes:[{x:y,y:T,z},{x:M,y:T,z},{x:M,y:T,z:0},{x:y,y:T,z:0}],enabled:f.bottom.visible},{fill:a(f.bottom.color).brighten(-.1).get(),vertexes:[{x:N,y:j,z:B},{x:N,y:j,z:W},{x:y,y:T,z},{x:y,y:T,z:0}],enabled:f.bottom.visible&&!f.left.visible},{fill:a(f.bottom.color).brighten(-.1).get(),vertexes:[{x:G,y:j,z:W},{x:G,y:j,z:B},{x:M,y:T,z:0},{x:M,y:T,z}],enabled:f.bottom.visible&&!f.right.visible},{fill:a(f.bottom.color).get(),vertexes:[{x:G,y:j,z:B},{x:N,y:j,z:B},{x:y,y:T,z:0},{x:M,y:T,z:0}],enabled:f.bottom.visible&&!f.front.visible},{fill:a(f.bottom.color).get(),vertexes:[{x:N,y:j,z:W},{x:G,y:j,z:W},{x:M,y:T,z},{x:y,y:T,z}],enabled:f.bottom.visible&&!f.back.visible}]}),this.frameShapes.top[Y]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:f.top.frontFacing?-1e3:1e3,faces:[{fill:a(f.top.color).brighten(.1).get(),vertexes:[{x:N,y:X,z:W},{x:G,y:X,z:W},{x:G,y:X,z:B},{x:N,y:X,z:B}],enabled:f.top.visible},{fill:a(f.top.color).brighten(.1).get(),vertexes:[{x:y,y:k,z:0},{x:M,y:k,z:0},{x:M,y:k,z},{x:y,y:k,z}],enabled:f.top.visible},{fill:a(f.top.color).brighten(-.1).get(),vertexes:[{x:N,y:X,z:W},{x:N,y:X,z:B},{x:y,y:k,z:0},{x:y,y:k,z}],enabled:f.top.visible&&!f.left.visible},{fill:a(f.top.color).brighten(-.1).get(),vertexes:[{x:G,y:X,z:B},{x:G,y:X,z:W},{x:M,y:k,z},{x:M,y:k,z:0}],enabled:f.top.visible&&!f.right.visible},{fill:a(f.top.color).get(),vertexes:[{x:N,y:X,z:B},{x:G,y:X,z:B},{x:M,y:k,z:0},{x:y,y:k,z:0}],enabled:f.top.visible&&!f.front.visible},{fill:a(f.top.color).get(),vertexes:[{x:G,y:X,z:W},{x:N,y:X,z:W},{x:y,y:k,z},{x:M,y:k,z}],enabled:f.top.visible&&!f.back.visible}]}),this.frameShapes.left[Y]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:f.left.frontFacing?-1e3:1e3,faces:[{fill:a(f.left.color).brighten(.1).get(),vertexes:[{x:N,y:j,z:B},{x:y,y:T,z:0},{x:y,y:T,z},{x:N,y:j,z:W}],enabled:f.left.visible&&!f.bottom.visible},{fill:a(f.left.color).brighten(.1).get(),vertexes:[{x:N,y:X,z:W},{x:y,y:k,z},{x:y,y:k,z:0},{x:N,y:X,z:B}],enabled:f.left.visible&&!f.top.visible},{fill:a(f.left.color).brighten(-.1).get(),vertexes:[{x:N,y:j,z:W},{x:N,y:X,z:W},{x:N,y:X,z:B},{x:N,y:j,z:B}],enabled:f.left.visible},{fill:a(f.left.color).brighten(-.1).get(),vertexes:[{x:y,y:k,z},{x:y,y:T,z},{x:y,y:T,z:0},{x:y,y:k,z:0}],enabled:f.left.visible},{fill:a(f.left.color).get(),vertexes:[{x:N,y:j,z:B},{x:N,y:X,z:B},{x:y,y:k,z:0},{x:y,y:T,z:0}],enabled:f.left.visible&&!f.front.visible},{fill:a(f.left.color).get(),vertexes:[{x:N,y:X,z:W},{x:N,y:j,z:W},{x:y,y:T,z},{x:y,y:k,z}],enabled:f.left.visible&&!f.back.visible}]}),this.frameShapes.right[Y]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:f.right.frontFacing?-1e3:1e3,faces:[{fill:a(f.right.color).brighten(.1).get(),vertexes:[{x:G,y:j,z:W},{x:M,y:T,z},{x:M,y:T,z:0},{x:G,y:j,z:B}],enabled:f.right.visible&&!f.bottom.visible},{fill:a(f.right.color).brighten(.1).get(),vertexes:[{x:G,y:X,z:B},{x:M,y:k,z:0},{x:M,y:k,z},{x:G,y:X,z:W}],enabled:f.right.visible&&!f.top.visible},{fill:a(f.right.color).brighten(-.1).get(),vertexes:[{x:M,y:k,z:0},{x:M,y:T,z:0},{x:M,y:T,z},{x:M,y:k,z}],enabled:f.right.visible},{fill:a(f.right.color).brighten(-.1).get(),vertexes:[{x:G,y:j,z:B},{x:G,y:X,z:B},{x:G,y:X,z:W},{x:G,y:j,z:W}],enabled:f.right.visible},{fill:a(f.right.color).get(),vertexes:[{x:G,y:X,z:B},{x:G,y:j,z:B},{x:M,y:T,z:0},{x:M,y:k,z:0}],enabled:f.right.visible&&!f.front.visible},{fill:a(f.right.color).get(),vertexes:[{x:G,y:j,z:W},{x:G,y:X,z:W},{x:M,y:k,z},{x:M,y:T,z}],enabled:f.right.visible&&!f.back.visible}]}),this.frameShapes.back[Y]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:f.back.frontFacing?-1e3:1e3,faces:[{fill:a(f.back.color).brighten(.1).get(),vertexes:[{x:G,y:j,z:W},{x:N,y:j,z:W},{x:y,y:T,z},{x:M,y:T,z}],enabled:f.back.visible&&!f.bottom.visible},{fill:a(f.back.color).brighten(.1).get(),vertexes:[{x:N,y:X,z:W},{x:G,y:X,z:W},{x:M,y:k,z},{x:y,y:k,z}],enabled:f.back.visible&&!f.top.visible},{fill:a(f.back.color).brighten(-.1).get(),vertexes:[{x:N,y:j,z:W},{x:N,y:X,z:W},{x:y,y:k,z},{x:y,y:T,z}],enabled:f.back.visible&&!f.left.visible},{fill:a(f.back.color).brighten(-.1).get(),vertexes:[{x:G,y:X,z:W},{x:G,y:j,z:W},{x:M,y:T,z},{x:M,y:k,z}],enabled:f.back.visible&&!f.right.visible},{fill:a(f.back.color).get(),vertexes:[{x:y,y:k,z},{x:M,y:k,z},{x:M,y:T,z},{x:y,y:T,z}],enabled:f.back.visible},{fill:a(f.back.color).get(),vertexes:[{x:N,y:j,z:W},{x:G,y:j,z:W},{x:G,y:X,z:W},{x:N,y:X,z:W}],enabled:f.back.visible}]}),this.frameShapes.front[Y]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:f.front.frontFacing?-1e3:1e3,faces:[{fill:a(f.front.color).brighten(.1).get(),vertexes:[{x:N,y:j,z:B},{x:G,y:j,z:B},{x:M,y:T,z:0},{x:y,y:T,z:0}],enabled:f.front.visible&&!f.bottom.visible},{fill:a(f.front.color).brighten(.1).get(),vertexes:[{x:G,y:X,z:B},{x:N,y:X,z:B},{x:y,y:k,z:0},{x:M,y:k,z:0}],enabled:f.front.visible&&!f.top.visible},{fill:a(f.front.color).brighten(-.1).get(),vertexes:[{x:N,y:X,z:B},{x:N,y:j,z:B},{x:y,y:T,z:0},{x:y,y:k,z:0}],enabled:f.front.visible&&!f.left.visible},{fill:a(f.front.color).brighten(-.1).get(),vertexes:[{x:G,y:j,z:B},{x:G,y:X,z:B},{x:M,y:k,z:0},{x:M,y:T,z:0}],enabled:f.front.visible&&!f.right.visible},{fill:a(f.front.color).get(),vertexes:[{x:M,y:k,z:0},{x:y,y:k,z:0},{x:y,y:T,z:0},{x:M,y:T,z:0}],enabled:f.front.visible},{fill:a(f.front.color).get(),vertexes:[{x:G,y:j,z:B},{x:N,y:j,z:B},{x:N,y:X,z:B},{x:G,y:X,z:B}],enabled:f.front.visible}]})}}function S(){this.styledMode&&[{name:"darker",slope:.6},{name:"brighter",slope:1.4}].forEach(function(C){this.renderer.definition({tagName:"filter",attributes:{id:"highcharts-"+C.name},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",attributes:{type:"linear",slope:C.slope}},{tagName:"feFuncG",attributes:{type:"linear",slope:C.slope}},{tagName:"feFuncB",attributes:{type:"linear",slope:C.slope}}]}]})},this)}function w(){let C=this.options;this.is3d()&&(C.series||[]).forEach(function(d){(d.type||C.chart.type||C.chart.defaultSeriesType)==="scatter"&&(d.type="scatter3d")})}function R(){let C=this.options.chart.options3d;if(this.chart3d&&this.is3d()){C&&(C.alpha=C.alpha%360+(C.alpha>=0?0:360),C.beta=C.beta%360+(C.beta>=0?0:360));let d=this.inverted,f=this.clipBox,y=this.margin;f[d?"y":"x"]=-(y[3]||0),f[d?"x":"y"]=-(y[0]||0),f[d?"height":"width"]=this.chartWidth+(y[3]||0)+(y[1]||0),f[d?"width":"height"]=this.chartHeight+(y[0]||0)+(y[2]||0),this.scale3d=1,C.fitToPlot===!0&&(this.scale3d=this.chart3d.getScale(C.depth)),this.chart3d.frame3d=this.chart3d.get3dFrame()}}function O(){this.is3d()&&(this.isDirtyBox=!0)}function I(){this.chart3d&&this.is3d()&&(this.chart3d.frame3d=this.chart3d.get3dFrame())}function _(){this.chart3d||(this.chart3d=new D(this))}function P(C){return this.is3d()||C.apply(this,[].slice.call(arguments,1))}function F(C){let d,f=this.series.length;if(this.is3d())for(;f--;)(d=this.series[f]).translate(),d.render();else C.call(this)}function A(C){C.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}m.defaultOptions={chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:null,frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}},m.compose=function(C,d){let f=C.prototype,y=d.prototype;f.is3d=function(){return!!this.options.chart.options3d?.enabled},f.propsRequireDirtyBox.push("chart.options3d"),f.propsRequireUpdateSeries.push("chart.options3d"),y.matrixSetter=function(){let M;if(this.pos<1&&(p(this.start)||p(this.end))){let k=this.start||[1,0,0,1,0,0],T=this.end||[1,0,0,1,0,0];M=[];for(let z=0;z<6;z++)M.push(this.pos*T[z]+(1-this.pos)*k[z])}else M=this.end;this.elem.attr(this.prop,M,null,!0)},b(!0,h,m.defaultOptions),u(C,"init",_),u(C,"addSeries",E),u(C,"afterDrawChartBox",L),u(C,"afterGetContainer",S),u(C,"afterInit",w),u(C,"afterSetChartSize",R),u(C,"beforeRedraw",O),u(C,"beforeRender",I),x(f,"isInsidePlot",P),x(f,"renderSeries",F),x(f,"setClassName",A)};class D{constructor(d){this.chart=d}get3dFrame(){let d=this.chart,f=d.options.chart.options3d,y=f.frame,M=d.plotLeft,k=d.plotLeft+d.plotWidth,T=d.plotTop,z=d.plotTop+d.plotHeight,N=f.depth,G=function(tt){let $=g(tt,d);return $>.5?1:$<-.5?-1:0},X=G([{x:M,y:z,z:N},{x:k,y:z,z:N},{x:k,y:z,z:0},{x:M,y:z,z:0}]),j=G([{x:M,y:T,z:0},{x:k,y:T,z:0},{x:k,y:T,z:N},{x:M,y:T,z:N}]),B=G([{x:M,y:T,z:0},{x:M,y:T,z:N},{x:M,y:z,z:N},{x:M,y:z,z:0}]),W=G([{x:k,y:T,z:N},{x:k,y:T,z:0},{x:k,y:z,z:0},{x:k,y:z,z:N}]),Y=G([{x:M,y:z,z:0},{x:k,y:z,z:0},{x:k,y:T,z:0},{x:M,y:T,z:0}]),U=G([{x:M,y:T,z:N},{x:k,y:T,z:N},{x:k,y:z,z:N},{x:M,y:z,z:N}]),q=!1,H=!1,V=!1,Z=!1;[].concat(d.xAxis,d.yAxis,d.zAxis).forEach(function(tt){tt&&(tt.horiz?tt.opposite?H=!0:q=!0:tt.opposite?Z=!0:V=!0)});let K=function(tt,$,Q){let et=["size","color","visible"],it={};for(let rt=0;rt<et.length;rt++){let nt=et[rt];for(let ot=0;ot<tt.length;ot++)if(typeof tt[ot]=="object"){let at=tt[ot][nt];if(at!=null){it[nt]=at;break}}}let st=Q;return it.visible===!0||it.visible===!1?st=it.visible:it.visible==="auto"&&(st=$>0),{size:v(it.size,1),color:v(it.color,"none"),frontFacing:$>0,visible:st}},J={axes:{},bottom:K([y.bottom,y.top,y],X,q),top:K([y.top,y.bottom,y],j,H),left:K([y.left,y.right,y.side,y],B,V),right:K([y.right,y.left,y.side,y],W,Z),back:K([y.back,y.front,y],U,!0),front:K([y.front,y.back,y],Y,!1)};if(f.axisLabelPosition==="auto"){let tt=function(nt,ot){return nt.visible!==ot.visible||nt.visible&&ot.visible&&nt.frontFacing!==ot.frontFacing},$=[];tt(J.left,J.front)&&$.push({y:(T+z)/2,x:M,z:0,xDir:{x:1,y:0,z:0}}),tt(J.left,J.back)&&$.push({y:(T+z)/2,x:M,z:N,xDir:{x:0,y:0,z:-1}}),tt(J.right,J.front)&&$.push({y:(T+z)/2,x:k,z:0,xDir:{x:0,y:0,z:1}}),tt(J.right,J.back)&&$.push({y:(T+z)/2,x:k,z:N,xDir:{x:-1,y:0,z:0}});let Q=[];tt(J.bottom,J.front)&&Q.push({x:(M+k)/2,y:z,z:0,xDir:{x:1,y:0,z:0}}),tt(J.bottom,J.back)&&Q.push({x:(M+k)/2,y:z,z:N,xDir:{x:-1,y:0,z:0}});let et=[];tt(J.top,J.front)&&et.push({x:(M+k)/2,y:T,z:0,xDir:{x:1,y:0,z:0}}),tt(J.top,J.back)&&et.push({x:(M+k)/2,y:T,z:N,xDir:{x:-1,y:0,z:0}});let it=[];tt(J.bottom,J.left)&&it.push({z:(0+N)/2,y:z,x:M,xDir:{x:0,y:0,z:-1}}),tt(J.bottom,J.right)&&it.push({z:(0+N)/2,y:z,x:k,xDir:{x:0,y:0,z:1}});let st=[];tt(J.top,J.left)&&st.push({z:(0+N)/2,y:T,x:M,xDir:{x:0,y:0,z:-1}}),tt(J.top,J.right)&&st.push({z:(0+N)/2,y:T,x:k,xDir:{x:0,y:0,z:1}});let rt=function(nt,ot,at){if(nt.length===0)return null;if(nt.length===1)return nt[0];let ct=c(nt,d,!1),ht=0;for(let lt=1;lt<ct.length;lt++)(at*ct[lt][ot]>at*ct[ht][ot]||at*ct[lt][ot]==at*ct[ht][ot]&&ct[lt].z<ct[ht].z)&&(ht=lt);return nt[ht]};J.axes={y:{left:rt($,"x",-1),right:rt($,"x",1)},x:{top:rt(et,"y",-1),bottom:rt(Q,"y",1)},z:{top:rt(st,"y",-1),bottom:rt(it,"y",1)}}}else J.axes={y:{left:{x:M,z:0,xDir:{x:1,y:0,z:0}},right:{x:k,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:T,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:z,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:V?k:M,y:T,xDir:V?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:V?k:M,y:z,xDir:V?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}};return J}getScale(d){let f=this.chart,y=f.plotLeft,M=f.plotWidth+y,k=f.plotTop,T=f.plotHeight+k,z=y+f.plotWidth/2,N=k+f.plotHeight/2,G={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE},X,j=1;return X=[{x:y,y:k,z:0},{x:y,y:k,z:d}],[0,1].forEach(function(B){X.push({x:M,y:X[B].y,z:X[B].z})}),[0,1,2,3].forEach(function(B){X.push({x:X[B].x,y:T,z:X[B].z})}),(X=c(X,f,!1)).forEach(function(B){G.minX=Math.min(G.minX,B.x),G.maxX=Math.max(G.maxX,B.x),G.minY=Math.min(G.minY,B.y),G.maxY=Math.max(G.maxY,B.y)}),y>G.minX&&(j=Math.min(j,1-Math.abs((y+z)/(G.minX+z))%1)),M<G.maxX&&(j=Math.min(j,(M-z)/(G.maxX-z))),k>G.minY&&(j=G.minY<0?Math.min(j,(k+N)/(-G.minY+k+N)):Math.min(j,1-(k+N)/(G.minY+N)%1)),T<G.maxY&&(j=Math.min(j,Math.abs((T-N)/(G.maxY-N)))),j}}m.Additions=D}(l||(l={})),l}),s(t,"Series/Area3D/Area3DSeries.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{composed:l}=e,{perspective:a}=i,{line:{prototype:h}}=r.seriesTypes,{pushUnique:c,wrap:g}=n;function u(p){let b=p.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d())return b;let v=h.getGraphPath,x=this.options,m=Math.round(this.yAxis.getThreshold(x.threshold)),E=[];if(this.rawPointsX)for(let w=0;w<this.points.length;w++)E.push({x:this.rawPointsX[w],y:x.stacking?this.points[w].yBottom:m,z:this.zPadding});let L=this.chart.options.chart.options3d;E=a(E,this.chart,!0).map(w=>({plotX:w.x,plotY:w.y,plotZ:w.z})),this.group&&L&&L.depth&&L.beta&&(this.markerGroup&&(this.markerGroup.add(this.group),this.markerGroup.attr({translateX:0,translateY:0})),this.group.attr({zIndex:Math.max(1,L.beta>270||L.beta<90?L.depth-Math.round(this.zPadding||0):Math.round(this.zPadding||0))})),E.reversed=!0;let S=v.call(this,E,!0,!0);if(S[0]&&S[0][0]==="M"&&(S[0]=["L",S[0][1],S[0][2]]),this.areaPath){let w=this.areaPath.splice(0,this.areaPath.length/2).concat(S);w.xMap=this.areaPath.xMap,this.areaPath=w}return this.graphPath=b,b}return{compose:function(p){c(l,"Area3DSeries")&&g(p.prototype,"getGraphPath",u)}}}),s(t,"Core/Axis/Axis3DDefaults.js",[],function(){return{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}}),s(t,"Core/Axis/Tick3DComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){let{composed:r}=e,{addEvent:n,extend:l,pushUnique:a,wrap:h}=i;function c(u){let p=this.axis.axis3D;p&&l(u.pos,p.fix3dPosition(u.pos))}function g(u){let p=this.axis.axis3D,b=u.apply(this,[].slice.call(arguments,1));if(p){let v=b[0],x=b[1];if(v[0]==="M"&&x[0]==="L"){let m=[p.fix3dPosition({x:v[1],y:v[2],z:0}),p.fix3dPosition({x:x[1],y:x[2],z:0})];return this.axis.chart.renderer.toLineSegments(m)}}return b}return{compose:function(u){a(r,"Axis.Tick3D")&&(n(u,"afterGetLabelPosition",c),h(u.prototype,"getMarkPath",g))}}}),s(t,"Core/Axis/Axis3DComposition.js",[t["Core/Axis/Axis3DDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Axis/Tick3DComposition.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{defaultOptions:h}=i,{deg2rad:c}=r,{perspective:g,perspective3D:u,shapeArea:p}=n,{addEvent:b,merge:v,pick:x,wrap:m}=a;function E(){let F=this.chart,A=this.options;F.is3d&&F.is3d()&&this.coll!=="colorAxis"&&(A.tickWidth=x(A.tickWidth,0),A.gridLineWidth=x(A.gridLineWidth,1))}function L(F){this.chart.is3d()&&this.coll!=="colorAxis"&&F.point&&(F.point.crosshairPos=this.isXAxis?F.point.axisXpos:this.len-F.point.axisYpos)}function S(){this.axis3D||(this.axis3D=new P(this))}function w(F){return this.chart.is3d()&&this.coll!=="colorAxis"?[]:F.apply(this,[].slice.call(arguments,1))}function R(F){if(!this.chart.is3d()||this.coll==="colorAxis")return F.apply(this,[].slice.call(arguments,1));let A=arguments,D=A[1],C=A[2],d=[],f=this.getPlotLinePath({value:D}),y=this.getPlotLinePath({value:C});if(f&&y)for(let M=0;M<f.length;M+=2){let k=f[M],T=f[M+1],z=y[M],N=y[M+1];k[0]==="M"&&T[0]==="L"&&z[0]==="M"&&N[0]==="L"&&d.push(k,T,N,["L",z[1],z[2]],["Z"])}return d}function O(F){let A=this.axis3D,D=this.chart,C=F.apply(this,[].slice.call(arguments,1));if(this.coll==="colorAxis"||!D.chart3d||!D.is3d()||C===null)return C;let d=D.options.chart.options3d,f=this.isZAxis?D.plotWidth:d.depth,y=D.chart3d.frame3d,M=C[0],k=C[1],T,z=[];return M[0]==="M"&&k[0]==="L"&&(T=[A.swapZ({x:M[1],y:M[2],z:0}),A.swapZ({x:M[1],y:M[2],z:f}),A.swapZ({x:k[1],y:k[2],z:0}),A.swapZ({x:k[1],y:k[2],z:f})],this.horiz?(this.isZAxis?(y.left.visible&&z.push(T[0],T[2]),y.right.visible&&z.push(T[1],T[3])):(y.front.visible&&z.push(T[0],T[2]),y.back.visible&&z.push(T[1],T[3])),y.top.visible&&z.push(T[0],T[1]),y.bottom.visible&&z.push(T[2],T[3])):(y.front.visible&&z.push(T[0],T[2]),y.back.visible&&z.push(T[1],T[3]),y.left.visible&&z.push(T[0],T[1]),y.right.visible&&z.push(T[2],T[3])),z=g(z,this.chart,!1)),D.renderer.toLineSegments(z)}function I(F,A){let{chart:D,gridGroup:C,tickPositions:d,ticks:f}=this;if(this.categories&&D.frameShapes&&D.is3d()&&C&&A&&A.label){let y,M,k,T=C.element.childNodes[0].getBBox(),z=D.frameShapes.left.getBBox(),N=D.options.chart.options3d,G={x:D.plotWidth/2,y:D.plotHeight/2,z:N.depth/2,vd:x(N.depth,1)*x(N.viewDistance,0)},X=d.indexOf(A.pos),j=f[d[X-1]],B=f[d[X+1]];return j?.label?.xy&&(M=u({x:j.label.xy.x,y:j.label.xy.y,z:null},G,G.vd)),B&&B.label&&B.label.xy&&(k=u({x:B.label.xy.x,y:B.label.xy.y,z:null},G,G.vd)),y=u(y={x:A.label.xy.x,y:A.label.xy.y,z:null},G,G.vd),Math.abs(M?y.x-M.x:k?k.x-y.x:T.x-z.x)}return F.apply(this,[].slice.call(arguments,1))}function _(F){let A=F.apply(this,[].slice.call(arguments,1));return this.axis3D?this.axis3D.fix3dPosition(A,!0):A}class P{static compose(A,D){if(l.compose(D),!A.keepProps.includes("axis3D")){v(!0,h.xAxis,e),A.keepProps.push("axis3D"),b(A,"init",S),b(A,"afterSetOptions",E),b(A,"drawCrosshair",L);let C=A.prototype;m(C,"getLinePath",w),m(C,"getPlotBandPath",R),m(C,"getPlotLinePath",O),m(C,"getSlotWidth",I),m(C,"getTitlePosition",_)}}constructor(A){this.axis=A}fix3dPosition(A,D){let C=this.axis,d=C.chart;if(C.coll==="colorAxis"||!d.chart3d||!d.is3d())return A;let f=c*d.options.chart.options3d.alpha,y=c*d.options.chart.options3d.beta,M=x(D&&C.options.title.position3d,C.options.labels.position3d),k=x(D&&C.options.title.skew3d,C.options.labels.skew3d),T=d.chart3d.frame3d,z=d.plotLeft,N=d.plotWidth+z,G=d.plotTop,X=d.plotHeight+G,j=0,B=0,W,Y={x:0,y:1,z:0},U=!1;if(A=C.axis3D.swapZ({x:A.x,y:A.y,z:0}),C.isZAxis)if(C.opposite){if(T.axes.z.top===null)return{};B=A.y-G,A.x=T.axes.z.top.x,A.y=T.axes.z.top.y,W=T.axes.z.top.xDir,U=!T.top.frontFacing}else{if(T.axes.z.bottom===null)return{};B=A.y-X,A.x=T.axes.z.bottom.x,A.y=T.axes.z.bottom.y,W=T.axes.z.bottom.xDir,U=!T.bottom.frontFacing}else if(C.horiz)if(C.opposite){if(T.axes.x.top===null)return{};B=A.y-G,A.y=T.axes.x.top.y,A.z=T.axes.x.top.z,W=T.axes.x.top.xDir,U=!T.top.frontFacing}else{if(T.axes.x.bottom===null)return{};B=A.y-X,A.y=T.axes.x.bottom.y,A.z=T.axes.x.bottom.z,W=T.axes.x.bottom.xDir,U=!T.bottom.frontFacing}else if(C.opposite){if(T.axes.y.right===null)return{};j=A.x-N,A.x=T.axes.y.right.x,A.z=T.axes.y.right.z,W={x:(W=T.axes.y.right.xDir).z,y:W.y,z:-W.x}}else{if(T.axes.y.left===null)return{};j=A.x-z,A.x=T.axes.y.left.x,A.z=T.axes.y.left.z,W=T.axes.y.left.xDir}if(M!=="chart")if(M==="flap")if(C.horiz){let H=Math.sin(f);C.opposite&&(H=-H),U&&(H=-H),Y={x:W.z*H,y:Math.cos(f),z:-W.x*H}}else W={x:Math.cos(y),y:0,z:Math.sin(y)};else if(M==="ortho")if(C.horiz){let H=Math.cos(f),V={x:Math.sin(y)*H,y:-Math.sin(f),z:-H*Math.cos(y)},Z=1/Math.sqrt((Y={x:W.y*V.z-W.z*V.y,y:W.z*V.x-W.x*V.z,z:W.x*V.y-W.y*V.x}).x*Y.x+Y.y*Y.y+Y.z*Y.z);U&&(Z=-Z),Y={x:Z*Y.x,y:Z*Y.y,z:Z*Y.z}}else W={x:Math.cos(y),y:0,z:Math.sin(y)};else C.horiz?Y={x:Math.sin(y)*Math.sin(f),y:Math.cos(f),z:-Math.cos(y)*Math.sin(f)}:W={x:Math.cos(y),y:0,z:Math.sin(y)};A.x+=j*W.x+B*Y.x,A.y+=j*W.y+B*Y.y,A.z+=j*W.z+B*Y.z;let q=g([A],C.chart)[0];if(k){0>p(g([A,{x:A.x+W.x,y:A.y+W.y,z:A.z+W.z},{x:A.x+Y.x,y:A.y+Y.y,z:A.z+Y.z}],C.chart))&&(W={x:-W.x,y:-W.y,z:-W.z});let H=g([{x:A.x,y:A.y,z:A.z},{x:A.x+W.x,y:A.y+W.y,z:A.z+W.z},{x:A.x+Y.x,y:A.y+Y.y,z:A.z+Y.z}],C.chart);q.matrix=[H[1].x-H[0].x,H[1].y-H[0].y,H[2].x-H[0].x,H[2].y-H[0].y,q.x,q.y],q.matrix[4]-=q.x*q.matrix[0]+q.y*q.matrix[2],q.matrix[5]-=q.x*q.matrix[1]+q.y*q.matrix[3]}return q}swapZ(A,D){let C=this.axis;if(C.isZAxis){let d=D?0:C.chart.plotLeft;return{x:d+A.z,y:A.y,z:A.x-d}}return A}}return P}),s(t,"Core/Series/Series3D.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{composed:l}=e,{perspective:a}=i,{addEvent:h,extend:c,isNumber:g,merge:u,pick:p,pushUnique:b}=n;class v extends r{static compose(m){b(l,"Core.Series3D")&&(h(m,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),c(m.prototype,{translate3dPoints:v.prototype.translate3dPoints}))}translate3dPoints(){let m,E,L=this,S=L.options,w=L.chart,R=p(L.zAxis,w.options.zAxis[0]),O=[],I=[],_=S.stacking?g(S.stack)?S.stack:0:L.index||0;L.zPadding=_*(S.depth||0+(S.groupZPadding||1)),L.data.forEach(F=>{R&&R.translate?(E=R.logarithmic&&R.val2lin?R.val2lin(F.z):F.z,F.plotZ=R.translate(E),F.isInside=!!F.isInside&&E>=R.min&&E<=R.max):F.plotZ=L.zPadding,F.axisXpos=F.plotX,F.axisYpos=F.plotY,F.axisZpos=F.plotZ,O.push({x:F.plotX,y:F.plotY,z:F.plotZ}),I.push(F.plotX||0)}),L.rawPointsX=I;let P=a(O,w,!0);L.data.forEach((F,A)=>{m=P[A],F.plotX=m.x,F.plotY=m.y,F.plotZ=m.z})}}return v.defaultOptions=u(r.defaultOptions),v}),s(t,"Core/Renderer/SVG/SVGElement3D.js",[t["Core/Color/Color.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{parse:n}=e,{Element:l}=i.getRendererType().prototype,{defined:a,pick:h}=r;class c extends l{constructor(){super(...arguments),this.parts=["front","top","side"],this.pathType="cuboid"}initArgs(u){let p=this.renderer,b=p[this.pathType+"Path"](u),v=b.zIndexes;for(let x of this.parts){let m={class:"highcharts-3d-"+x,zIndex:v[x]||0};p.styledMode&&(x==="top"?m.filter="url(#highcharts-brighter)":x==="side"&&(m.filter="url(#highcharts-darker)")),this[x]=p.path(b[x]).attr(m).add(this)}this.attr({"stroke-linejoin":"round",zIndex:v.group}),this.forcedSides=b.forcedSides}singleSetterForParts(u,p,b,v,x,m){let E={},L=[null,null,v||"attr",x,m],S=b&&b.zIndexes;if(b){for(let w of(S&&S.group&&this.attr({zIndex:S.group}),Object.keys(b)))E[w]={},E[w][u]=b[w],S&&(E[w].zIndex=b.zIndexes[w]||0);L[1]=E}else E[u]=p,L[0]=E;return this.processParts.apply(this,L)}processParts(u,p,b,v,x){for(let m of this.parts)p&&(u=h(p[m],!1)),u!==!1&&this[m][b](u,v,x);return this}destroy(){return this.processParts(null,null,"destroy"),super.destroy()}attr(u,p,b,v){if(typeof u=="string"&&p!==void 0){let x=u;(u={})[x]=p}return u.shapeArgs||a(u.x)?this.singleSetterForParts("d",null,this.renderer[this.pathType+"Path"](u.shapeArgs||u)):super.attr(u,void 0,b,v)}animate(u,p,b){if(a(u.x)&&a(u.y)){let v=this.renderer[this.pathType+"Path"](u),x=v.forcedSides;this.singleSetterForParts("d",null,v,"animate",p,b),this.attr({zIndex:v.zIndexes.group}),x===this.forcedSides||(this.forcedSides=x,this.renderer.styledMode||this.fillSetter(this.fill))}else super.animate(u,p,b);return this}fillSetter(u){return this.forcedSides=this.forcedSides||[],this.singleSetterForParts("fill",null,{front:u,top:n(u).brighten(this.forcedSides.indexOf("top")>=0?0:.1).get(),side:n(u).brighten(this.forcedSides.indexOf("side")>=0?0:-.1).get()}),this.color=this.fill=u,this}}return c.types={base:c,cuboid:c},c}),s(t,"Core/Renderer/SVG/SVGRenderer3D.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Renderer/SVG/SVGElement3D.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){var h;let{animObject:c}=e,{parse:g}=i,{charts:u,deg2rad:p}=r,{perspective:b,shapeArea:v}=n,{defined:x,extend:m,merge:E,pick:L}=a,S=Math.cos,w=Math.sin,R=Math.PI,O=4*(Math.sqrt(2)-1)/3/(R/2);function I(_,P,F,A,D,C,d,f){let y=C-D,M=[];return C>D&&C-D>Math.PI/2+1e-4?M=(M=M.concat(I(_,P,F,A,D,D+Math.PI/2,d,f))).concat(I(_,P,F,A,D+Math.PI/2,C,d,f)):C<D&&D-C>Math.PI/2+1e-4?M=(M=M.concat(I(_,P,F,A,D,D-Math.PI/2,d,f))).concat(I(_,P,F,A,D-Math.PI/2,C,d,f)):[["C",_+F*Math.cos(D)-F*O*y*Math.sin(D)+d,P+A*Math.sin(D)+A*O*y*Math.cos(D)+f,_+F*Math.cos(C)+F*O*y*Math.sin(C)+d,P+A*Math.sin(C)-A*O*y*Math.cos(C)+f,_+F*Math.cos(C)+d,P+A*Math.sin(C)+f]]}return function(_){function P(k,T){let z=[];for(let N of k)z.push(["L",N.x,N.y]);return k.length&&(z[0][0]="M",T&&z.push(["Z"])),z}function F(k){let T=[],z=!0;for(let N of k)T.push(z?["M",N.x,N.y]:["L",N.x,N.y]),z=!z;return T}function A(k){let T=this,z=T.Element.prototype,N=T.createElement("path");return N.vertexes=[],N.insidePlotArea=!1,N.enabled=!0,N.attr=function(G){if(typeof G=="object"&&(x(G.enabled)||x(G.vertexes)||x(G.insidePlotArea))){this.enabled=L(G.enabled,this.enabled),this.vertexes=L(G.vertexes,this.vertexes),this.insidePlotArea=L(G.insidePlotArea,this.insidePlotArea),delete G.enabled,delete G.vertexes,delete G.insidePlotArea;let X=u[T.chartIndex],j=b(this.vertexes,X,this.insidePlotArea),B=T.toLinePath(j,!0),W=v(j);G.d=B,G.visibility=this.enabled&&W>0?"inherit":"hidden"}return z.attr.apply(this,arguments)},N.animate=function(G){if(typeof G=="object"&&(x(G.enabled)||x(G.vertexes)||x(G.insidePlotArea))){this.enabled=L(G.enabled,this.enabled),this.vertexes=L(G.vertexes,this.vertexes),this.insidePlotArea=L(G.insidePlotArea,this.insidePlotArea),delete G.enabled,delete G.vertexes,delete G.insidePlotArea;let X=u[T.chartIndex],j=b(this.vertexes,X,this.insidePlotArea),B=T.toLinePath(j,!0),W=v(j),Y=this.enabled&&W>0?"visible":"hidden";G.d=B,this.attr("visibility",Y)}return z.animate.apply(this,arguments)},N.attr(k)}function D(k){let T=this,z=T.Element.prototype,N=T.g(),G=N.destroy;return this.styledMode||N.attr({"stroke-linejoin":"round"}),N.faces=[],N.destroy=function(){for(let X=0;X<N.faces.length;X++)N.faces[X].destroy();return G.call(this)},N.attr=function(X,j,B,W){if(typeof X=="object"&&x(X.faces)){for(;N.faces.length>X.faces.length;)N.faces.pop().destroy();for(;N.faces.length<X.faces.length;)N.faces.push(T.face3d().add(N));for(let Y=0;Y<X.faces.length;Y++)T.styledMode&&delete X.faces[Y].fill,N.faces[Y].attr(X.faces[Y],null,B,W);delete X.faces}return z.attr.apply(this,arguments)},N.animate=function(X,j,B){if(X&&X.faces){for(;N.faces.length>X.faces.length;)N.faces.pop().destroy();for(;N.faces.length<X.faces.length;)N.faces.push(T.face3d().add(N));for(let W=0;W<X.faces.length;W++)N.faces[W].animate(X.faces[W],j,B);delete X.faces}return z.animate.apply(this,arguments)},N.attr(k)}function C(k,T){let z=new l.types[k](this,"g");return z.initArgs(T),z}function d(k){return this.element3d("cuboid",k)}function f(k){let T=k.x||0,z=k.y||0,N=k.z||0,G=k.height||0,X=k.width||0,j=k.depth||0,B=u[this.chartIndex],W=B.options.chart.options3d.alpha,Y=[],U,q=0,H=[{x:T,y:z,z:N},{x:T+X,y:z,z:N},{x:T+X,y:z+G,z:N},{x:T,y:z+G,z:N},{x:T,y:z+G,z:N+j},{x:T+X,y:z+G,z:N+j},{x:T+X,y:z,z:N+j},{x:T,y:z,z:N+j}];H=b(H,B,k.insidePlotArea);let V=st=>G===0&&st>1&&st<6?{x:H[st].x,y:H[st].y+10,z:H[st].z}:H[0].x===H[7].x&&st>=4?{x:H[st].x+10,y:H[st].y,z:H[st].z}:j===0&&st<2||st>5?{x:H[st].x,y:H[st].y,z:H[st].z+10}:H[st],Z=st=>H[st],K=(st,rt,nt)=>{let ot=st.map(Z),at=rt.map(Z),ct=st.map(V),ht=rt.map(V),lt=[[],-1];return 0>v(ot)?lt=[ot,0]:0>v(at)?lt=[at,1]:nt&&(Y.push(nt),lt=0>v(ct)?[ot,0]:0>v(ht)?[at,1]:[ot,0]),lt},J=(U=K([3,2,1,0],[7,6,5,4],"front"))[0],tt=U[1],$=(U=K([1,6,7,0],[4,5,2,3],"top"))[0],Q=U[1],et=(U=K([1,2,5,6],[0,7,4,3],"side"))[0],it=U[1];return it===1?q+=1e6*(B.plotWidth-T):it||(q+=1e6*T),q+=10*(!Q||W>=0&&W<=180||W<360&&W>357.5?B.plotHeight-z:10+z),tt===1?q+=100*N:tt||(q+=100*(1e3-N)),{front:this.toLinePath(J,!0),top:this.toLinePath($,!0),side:this.toLinePath(et,!0),zIndexes:{group:Math.round(q)},forcedSides:Y,isFront:tt,isTop:Q}}function y(k){let T=this.g(),z=this.Element.prototype,N=["x","y","r","innerR","start","end","depth"];function G(X){let j={},B=!1,W;for(W in X=E(X))N.indexOf(W)!==-1&&(j[W]=X[W],delete X[W],B=!0);return!!B&&[j,X]}for(let X of((k=E(k)).alpha=(k.alpha||0)*p,k.beta=(k.beta||0)*p,T.top=this.path(),T.side1=this.path(),T.side2=this.path(),T.inn=this.path(),T.out=this.path(),T.onAdd=function(){let j=T.parentGroup,B=T.attr("class");for(let W of(T.top.add(T),["out","inn","side1","side2"]))T[W].attr({class:B+" highcharts-3d-side"}).add(j)},["addClass","removeClass"]))T[X]=function(){let j=arguments;for(let B of["top","out","inn","side1","side2"])T[B][X].apply(T[B],j)};for(let X of(T.setPaths=function(j){let B=T.renderer.arc3dPath(j),W=100*B.zTop;T.attribs=j,T.top.attr({d:B.top,zIndex:B.zTop}),T.inn.attr({d:B.inn,zIndex:B.zInn}),T.out.attr({d:B.out,zIndex:B.zOut}),T.side1.attr({d:B.side1,zIndex:B.zSide1}),T.side2.attr({d:B.side2,zIndex:B.zSide2}),T.zIndex=W,T.attr({zIndex:W}),j.center&&(T.top.setRadialReference(j.center),delete j.center)},T.setPaths(k),T.fillSetter=function(j){let B=g(j).brighten(-.1).get();return this.fill=j,this.side1.attr({fill:B}),this.side2.attr({fill:B}),this.inn.attr({fill:B}),this.out.attr({fill:B}),this.top.attr({fill:j}),this},["opacity","translateX","translateY","visibility"]))T[X+"Setter"]=function(j,B){for(let W of(T[B]=j,["out","inn","side1","side2","top"]))T[W].attr(B,j)};return T.attr=function(X){let j,B;return typeof X=="object"&&(B=G(X))&&(j=B[0],arguments[0]=B[1],m(T.attribs,j),T.setPaths(T.attribs)),z.attr.apply(T,arguments)},T.animate=function(X,j,B){let W,Y,U=this.attribs,q="data-"+Math.random().toString(26).substring(2,9);delete X.center,delete X.z,delete X.alpha,delete X.beta;let H=c(L(j,this.renderer.globalAnimation));return H.duration&&(W=G(X),T[q]=0,X[q]=1,T[q+"Setter"]=r.noop,W&&(Y=W[0],H.step=function(V,Z){let K=J=>U[J]+(L(Y[J],U[J])-U[J])*Z.pos;Z.prop===q&&Z.elem.setPaths(E(U,{x:K("x"),y:K("y"),r:K("r"),innerR:K("innerR"),start:K("start"),end:K("end"),depth:K("depth")}))}),j=H),z.animate.call(this,X,j,B)},T.destroy=function(){return this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),z.destroy.call(this)},T.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},T.show=function(X){this.top.show(X),this.out.show(X),this.inn.show(X),this.side1.show(X),this.side2.show(X)},T}function M(k){let T=k.x||0,z=k.y||0,N=k.start||0,G=(k.end||0)-1e-5,X=k.r||0,j=k.innerR||0,B=k.depth||0,W=k.alpha||0,Y=k.beta||0,U=Math.cos(N),q=Math.sin(N),H=Math.cos(G),V=Math.sin(G),Z=X*Math.cos(Y),K=X*Math.cos(W),J=j*Math.cos(Y),tt=j*Math.cos(W),$=B*Math.sin(Y),Q=B*Math.sin(W),et=[["M",T+Z*U,z+K*q]];(et=et.concat(I(T,z,Z,K,N,G,0,0))).push(["L",T+J*H,z+tt*V]),(et=et.concat(I(T,z,J,tt,G,N,0,0))).push(["Z"]);let it=Y>0?Math.PI/2:0,st=W>0?0:Math.PI/2,rt=N>-it?N:G>-it?-it:N,nt=G<R-st?G:N<R-st?R-st:G,ot=2*R-st,at=[["M",T+Z*S(rt),z+K*w(rt)]];at=at.concat(I(T,z,Z,K,rt,nt,0,0)),G>ot&&N<ot?(at.push(["L",T+Z*S(nt)+$,z+K*w(nt)+Q]),(at=at.concat(I(T,z,Z,K,nt,ot,$,Q))).push(["L",T+Z*S(ot),z+K*w(ot)]),(at=at.concat(I(T,z,Z,K,ot,G,0,0))).push(["L",T+Z*S(G)+$,z+K*w(G)+Q]),(at=at.concat(I(T,z,Z,K,G,ot,$,Q))).push(["L",T+Z*S(ot),z+K*w(ot)]),at=at.concat(I(T,z,Z,K,ot,nt,0,0))):G>R-st&&N<R-st&&(at.push(["L",T+Z*Math.cos(nt)+$,z+K*Math.sin(nt)+Q]),(at=at.concat(I(T,z,Z,K,nt,G,$,Q))).push(["L",T+Z*Math.cos(G),z+K*Math.sin(G)]),at=at.concat(I(T,z,Z,K,G,nt,0,0))),at.push(["L",T+Z*Math.cos(nt)+$,z+K*Math.sin(nt)+Q]),(at=at.concat(I(T,z,Z,K,nt,rt,$,Q))).push(["Z"]);let ct=[["M",T+J*U,z+tt*q]];(ct=ct.concat(I(T,z,J,tt,N,G,0,0))).push(["L",T+J*Math.cos(G)+$,z+tt*Math.sin(G)+Q]),(ct=ct.concat(I(T,z,J,tt,G,N,$,Q))).push(["Z"]);let ht=[["M",T+Z*U,z+K*q],["L",T+Z*U+$,z+K*q+Q],["L",T+J*U+$,z+tt*q+Q],["L",T+J*U,z+tt*q],["Z"]],lt=[["M",T+Z*H,z+K*V],["L",T+Z*H+$,z+K*V+Q],["L",T+J*H+$,z+tt*V+Q],["L",T+J*H,z+tt*V],["Z"]],xt=Math.atan2(Q,-$),wt=Math.abs(G+xt),dt=Math.abs(N+xt),Ct=Math.abs((N+G)/2+xt);function ft(ee){return(ee%=2*Math.PI)>Math.PI&&(ee=2*Math.PI-ee),ee}wt=ft(wt),dt=ft(dt);let Tt=1e5*(Ct=ft(Ct)),zt=1e5*dt,pe=1e5*wt;return{top:et,zTop:1e5*Math.PI+1,out:at,zOut:Math.max(Tt,zt,pe),inn:ct,zInn:Math.max(Tt,zt,pe),side1:ht,zSide1:.99*pe,side2:lt,zSide2:.99*zt}}_.compose=function(k){let T=k.prototype;T.element3d||m(T,{Element3D:l,arc3d:y,arc3dPath:M,cuboid:d,cuboidPath:f,element3d:C,face3d:A,polyhedron:D,toLinePath:P,toLineSegments:F})}}(h||(h={})),h}),s(t,"Core/Axis/ZAxis.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(e,i,r){let{defaultOptions:n}=i,{addEvent:l,merge:a,pick:h,splat:c}=r;function g(b){return new p(this,b)}function u(){let b=this.options.zAxis=c(this.options.zAxis||{});this.is3d()&&(this.zAxis=[],b.forEach(v=>{this.addZAxis(v).setScale()}))}class p extends e{constructor(){super(...arguments),this.isZAxis=!0}static compose(v){let x=v.prototype;x.addZAxis||(n.zAxis=a(n.xAxis,{offset:0,lineWidth:0}),x.addZAxis=g,x.collectionsWithInit.zAxis=[x.addZAxis],x.collectionsWithUpdate.push("zAxis"),l(v,"afterGetAxes",u))}init(v,x){this.isZAxis=!0,super.init(v,x,"zAxis")}getSeriesExtremes(){this.hasVisibleSeries=!1,this.dataMin=this.dataMax=this.ignoreMinPadding=this.ignoreMaxPadding=void 0,this.stacking&&this.stacking.buildStacks(),this.series.forEach(v=>{if(v.reserveSpace()){let x=v.options.threshold;this.hasVisibleSeries=!0,this.positiveValuesOnly&&x<=0&&(x=void 0);let m=v.zData;m.length&&(this.dataMin=Math.min(h(this.dataMin,m[0]),Math.min.apply(null,m)),this.dataMax=Math.max(h(this.dataMax,m[0]),Math.max.apply(null,m)))}})}setAxisSize(){let v=this.chart;super.setAxisSize(),this.width=this.len=v.options.chart.options3d&&v.options.chart.options3d.depth||0,this.right=v.chartWidth-this.width-this.left}}return p}),s(t,"Series/Column3D/Column3DComposition.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Utilities.js"]],function(e,i,r){let{composed:n}=e,{perspective:l}=i,{addEvent:a,extend:h,pick:c,pushUnique:g,wrap:u}=r;function p(){let _=this.chart,P=this.options,F=P.depth,A=(P.stacking?P.stack||0:this.index)*(F+(P.groupZPadding||1)),D=this.borderWidth%2?.5:0,C;for(let d of(_.inverted&&!this.yAxis.reversed&&(D*=-1),P.grouping!==!1&&(A=0),A+=P.groupZPadding||1,this.points))if(d.outside3dPlot=null,d.y!==null){let f,y=h({x:0,y:0,width:0,height:0},d.shapeArgs||{}),M=[["x","width"],["y","height"]],k=d.tooltipPos;for(let T of M)if((f=y[T[0]]-D)<0&&(y[T[1]]+=y[T[0]]+D,y[T[0]]=-D,f=0),f+y[T[1]]>this[T[0]+"Axis"].len&&y[T[1]]!==0&&(y[T[1]]=this[T[0]+"Axis"].len-y[T[0]]),y[T[1]]!==0&&(y[T[0]]>=this[T[0]+"Axis"].len||y[T[0]]+y[T[1]]<=D)){for(let z in y)y[z]=z==="y"?-9999:0;d.outside3dPlot=!0}if(d.shapeType==="roundedRect"&&(d.shapeType="cuboid"),d.shapeArgs=h(y,{z:A,depth:F,insidePlotArea:!0}),C={x:y.x+y.width/2,y:y.y,z:A+F/2},_.inverted&&(C.x=y.height,C.y=d.clientX||0),d.axisXpos=C.x,d.axisYpos=C.y,d.axisZpos=C.z,d.plot3d=l([C],_,!0,!1)[0],k){let T=l([{x:k[0],y:k[1],z:A+F/2}],_,!0,!1)[0];d.tooltipPos=[T.x,T.y]}}this.z=A}function b(){if(this.chart.is3d()){let _=this.options,P=_.grouping,F=_.stacking,A=this.yAxis.options.reversedStacks,D=0;if(!(P!==void 0&&!P)){let C,d=function(y,M){let k=y.series,T={totalStacks:0},z,N=1;return k.forEach(function(G){T[z=c(G.options.stack,M?0:k.length-1-G.index)]?T[z].series.push(G):(T[z]={series:[G],position:N},N++)}),T.totalStacks=N+1,T}(this.chart,F),f=_.stack||0;for(C=0;C<d[f].series.length&&d[f].series[C]!==this;C++);D=10*(d.totalStacks-d[f].position)+(A?C:-C),this.xAxis.reversed||(D=10*d.totalStacks-D)}_.depth=_.depth||25,this.z=this.z||0,_.zIndex=D}}function v(_,...P){return this.series.chart.is3d()?this.graphic&&this.graphic.element.nodeName!=="g":_.apply(this,P)}function x(_){if(this.chart.is3d()){let P=arguments,F=P[1],A=this.yAxis,D=this.yAxis.reversed;if(F)for(let C of this.points)C.y===null||(C.height=C.shapeArgs.height,C.shapey=C.shapeArgs.y,C.shapeArgs.height=1,D||(C.stackY?C.shapeArgs.y=C.plotY+A.translate(C.stackY):C.shapeArgs.y=C.plotY+(C.negative?-C.height:C.height)));else{for(let C of this.points)C.y!==null&&(C.shapeArgs.height=C.height,C.shapeArgs.y=C.shapey,C.graphic&&C.graphic[C.outside3dPlot?"attr":"animate"](C.shapeArgs,this.options.animation));this.drawDataLabels()}}else _.apply(this,[].slice.call(arguments,1))}function m(_,P,F,A,D,C){return P!=="dataLabelsGroup"&&P!=="markerGroup"&&this.chart.is3d()&&(this[P]&&delete this[P],C&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(C)),this[P]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[P].survive=!0,P==="group"&&(arguments[3]="visible"))),_.apply(this,Array.prototype.slice.call(arguments,1))}function E(_){let P=_.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(P.stroke=this.options.edgeColor||P.fill,P["stroke-width"]=c(this.options.edgeWidth,1)),P}function L(_,P,F){let A=this.chart.is3d&&this.chart.is3d();A&&(this.options.inactiveOtherPoints=!0),_.call(this,P,F),A&&(this.options.inactiveOtherPoints=!1)}function S(_,P){if(this.chart.is3d())for(let F of this.points)F.visible=F.options.visible=P=P===void 0?!c(this.visible,F.visible):P,this.options.data[this.data.indexOf(F)]=F.options,F.graphic&&F.graphic.attr({visibility:P?"visible":"hidden"});_.apply(this,Array.prototype.slice.call(arguments,1))}function w(_){_.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}function R(_,P,F,A,D){let C=this.chart;if(A.outside3dPlot=P.outside3dPlot,C.is3d()&&this.is("column")){let d=this.options,f=c(A.inside,!!this.options.stacking),y=C.options.chart.options3d,M=P.pointWidth/2||0,k={x:D.x+M,y:D.y,z:this.z+d.depth/2};C.inverted&&(f&&(D.width=0,k.x+=P.shapeArgs.height/2),y.alpha>=90&&y.alpha<=270&&(k.y+=P.shapeArgs.width)),k=l([k],C,!0,!1)[0],D.x=k.x-M,D.y=P.outside3dPlot?-9e9:k.y}_.apply(this,[].slice.call(arguments,1))}function O(_){return!arguments[2].outside3dPlot&&_.apply(this,[].slice.call(arguments,1))}function I(_,P){let F=_.apply(this,[].slice.call(arguments,1)),A=this.axis.chart,{width:D}=P;if(A.is3d()&&this.base){let C=+this.base.split(",")[0],d=A.series[C],f=A.options.chart.options3d;if(d&&d.type==="column"){let y={x:F.x+(A.inverted?F.height:D/2),y:F.y,z:d.options.depth/2};A.inverted&&(F.width=0,f.alpha>=90&&f.alpha<=270&&(y.y+=D)),y=l([y],A,!0,!1)[0],F.x=y.x-D/2,F.y=y.y}}return F}return{compose:function(_,P){if(g(n,"Column3D")){let F=_.prototype,A=P.prototype,{column:D,columnRange:C}=_.types;if(u(F,"alignDataLabel",R),u(F,"justifyDataLabel",O),u(A,"getStackBox",I),D){let d=D.prototype,f=d.pointClass.prototype;d.translate3dPoints=()=>{},d.translate3dShapes=p,a(d,"afterInit",b),u(f,"hasNewShapeType",v),u(d,"animate",x),u(d,"plotGroup",m),u(d,"pointAttribs",E),u(d,"setState",L),u(d,"setVisible",S),u(d,"translate",w)}if(C){let d=C.prototype;u(d.pointClass.prototype,"hasNewShapeType",v),u(d,"plotGroup",m),u(d,"pointAttribs",E),u(d,"setState",L),u(d,"setVisible",S)}}}}}),s(t,"Series/Pie3D/Pie3DPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(e){let{pie:{prototype:{pointClass:i}}}=e.seriesTypes;return class extends i{haloPath(){return this.series?.chart.is3d()?[]:super.haloPath.apply(this,arguments)}}}),s(t,"Series/Pie3D/Pie3DSeries.js",[t["Core/Globals.js"],t["Series/Pie3D/Pie3DPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{composed:l,deg2rad:a}=e,{pie:h}=r.seriesTypes,{extend:c,pick:g,pushUnique:u}=n;class p extends h{static compose(v){u(l,"Pie3D")&&(v.types.pie=p)}addPoint(){super.addPoint.apply(this,arguments),this.chart.is3d()&&this.update(this.userOptions,!0)}animate(v){if(this.chart.is3d()){let x=this.center,m=this.group,E=this.markerGroup,L=this.options.animation,S;L===!0&&(L={}),v?(m.oldtranslateX=g(m.oldtranslateX,m.translateX),m.oldtranslateY=g(m.oldtranslateY,m.translateY),S={translateX:x[0],translateY:x[1],scaleX:.001,scaleY:.001},m.attr(S),E&&(E.attrSetters=m.attrSetters,E.attr(S))):(S={translateX:m.oldtranslateX,translateY:m.oldtranslateY,scaleX:1,scaleY:1},m.animate(S,L),E&&E.animate(S,L))}else super.animate.apply(this,arguments)}getDataLabelPosition(v,x){let m=super.getDataLabelPosition(v,x);if(this.chart.is3d()){let E=this.chart.options.chart.options3d,L=v.shapeArgs,S=L.r,w=(L.alpha||E?.alpha)*a,R=(L.beta||E?.beta)*a,O=(L.start+L.end)/2,I=m.connectorPosition,_=-S*(1-Math.cos(w))*Math.sin(O),P=S*(Math.cos(R)-1)*Math.cos(O);for(let F of[m?.natural,I.breakAt,I.touchingSliceAt])F.x+=P,F.y+=_}return m}pointAttribs(v){let x=super.pointAttribs.apply(this,arguments),m=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(x.stroke=m.edgeColor||v.color||this.color,x["stroke-width"]=g(m.edgeWidth,1)),x}translate(){if(super.translate.apply(this,arguments),!this.chart.is3d())return;let v=this.options,x=v.depth||0,m=this.chart.options.chart.options3d,E=m.alpha,L=m.beta,S=v.stacking?(v.stack||0)*x:this._i*x;for(let w of(S+=x/2,v.grouping!==!1&&(S=0),this.points)){let R=w.shapeArgs;w.shapeType="arc3d",R.z=S,R.depth=.75*x,R.alpha=E,R.beta=L,R.center=this.center;let O=(R.end+R.start)/2;w.slicedTranslation={translateX:Math.round(Math.cos(O)*v.slicedOffset*Math.cos(E*a)),translateY:Math.round(Math.sin(O)*v.slicedOffset*Math.cos(E*a))}}}drawTracker(){if(super.drawTracker.apply(this,arguments),this.chart.is3d()){for(let v of this.points)if(v.graphic)for(let x of["out","inn","side1","side2"])v.graphic&&(v.graphic[x].element.point=v)}}}return c(p.prototype,{pointClass:i}),p}),s(t,"Series/Scatter3D/Scatter3DPoint.js",[t["Series/Scatter/ScatterSeries.js"],t["Core/Utilities.js"]],function(e,i){let{pointClass:r}=e.prototype,{defined:n}=i;return class extends r{applyOptions(){return super.applyOptions.apply(this,arguments),n(this.z)||(this.z=0),this}}}),s(t,"Series/Scatter3D/Scatter3DSeriesDefaults.js",[],function(){return{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}}}),s(t,"Series/Scatter3D/Scatter3DSeries.js",[t["Core/Math3D.js"],t["Series/Scatter3D/Scatter3DPoint.js"],t["Series/Scatter3D/Scatter3DSeriesDefaults.js"],t["Series/Scatter/ScatterSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{pointCameraDistance:h}=e,{extend:c,merge:g}=a;class u extends n{pointAttribs(b){let v=super.pointAttribs.apply(this,arguments);return this.chart.is3d()&&b&&(v.zIndex=h(b,this.chart)),v}}return u.defaultOptions=g(n.defaultOptions,r),c(u.prototype,{axisTypes:["xAxis","yAxis","zAxis"],directTouch:!0,parallelArrays:["x","y","z"],pointArrayMap:["x","y","z"],pointClass:i}),l.registerSeriesType("scatter3d",u),u}),s(t,"masters/highcharts-3d.src.js",[t["Core/Globals.js"],t["Core/Chart/Chart3D.js"],t["Series/Area3D/Area3DSeries.js"],t["Core/Axis/Axis3DComposition.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series3D.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Renderer/SVG/SVGRenderer3D.js"],t["Core/Axis/ZAxis.js"],t["Series/Column3D/Column3DComposition.js"],t["Series/Pie3D/Pie3DSeries.js"]],function(e,i,r,n,l,a,h,c,g,u,p){return r.compose(e.seriesTypes.area),n.compose(e.Axis,e.Tick),i.compose(e.Chart,e.Fx),u.compose(e.Series,h),p.compose(e.Series),a.compose(e.Series),c.compose(l.getRendererType()),g.compose(e.Chart),e})})});var Au=qe((RT,Yn)=>{"use strict";(function(o){typeof Yn=="object"&&Yn.exports?(o.default=o,Yn.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/exporting",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function s(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}s(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var e;return function(i){i.compose=function(n){return n.navigation||(n.navigation=new r(n)),n};class r{constructor(l){this.updates=[],this.chart=l}addUpdate(l){this.chart.navigation.updates.push(l)}update(l,a){this.updates.forEach(h=>{h.call(this.chart,l,a)})}}i.Additions=r}(e||(e={})),e}),s(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(e){let{isTouchDevice:i}=e;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:i?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),s(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var e;return function(i){let r=[];function n(a,h,c,g){return[["M",a,h+2.5],["L",a+c,h+2.5],["M",a,h+g/2+.5],["L",a+c,h+g/2+.5],["M",a,h+g-1.5],["L",a+c,h+g-1.5]]}function l(a,h,c,g){let u=g/3-2;return[].concat(this.circle(c-u,h,u,u),this.circle(c-u,h+u+4,u,u),this.circle(c-u,h+2*(u+4),u,u))}i.compose=function(a){if(r.indexOf(a)===-1){r.push(a);let h=a.prototype.symbols;h.menu=n,h.menuball=l.bind(h)}}}(e||(e={})),e}),s(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r){let{composed:n}=i,{addEvent:l,fireEvent:a,pushUnique:h}=r;function c(){this.fullscreen=new g(this)}class g{static compose(p){h(n,"Fullscreen")&&l(p,"beforeRender",c)}constructor(p){this.chart=p,this.isOpen=!1;let b=p.renderTo;!this.browserProps&&(typeof b.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:b.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:b.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:b.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let p=this,b=p.chart,v=b.options.chart;a(b,"fullscreenClose",null,function(){p.isOpen&&p.browserProps&&b.container.ownerDocument instanceof Document&&b.container.ownerDocument[p.browserProps.exitFullscreen](),p.unbindFullscreenEvent&&(p.unbindFullscreenEvent=p.unbindFullscreenEvent()),b.setSize(p.origWidth,p.origHeight,!1),p.origWidth=void 0,p.origHeight=void 0,v.width=p.origWidthOption,v.height=p.origHeightOption,p.origWidthOption=void 0,p.origHeightOption=void 0,p.isOpen=!1,p.setButtonText()})}open(){let p=this,b=p.chart,v=b.options.chart;a(b,"fullscreenOpen",null,function(){if(v&&(p.origWidthOption=v.width,p.origHeightOption=v.height),p.origWidth=b.chartWidth,p.origHeight=b.chartHeight,p.browserProps){let x=l(b.container.ownerDocument,p.browserProps.fullscreenChange,function(){p.isOpen?(p.isOpen=!1,p.close()):(b.setSize(null,null,!1),p.isOpen=!0,p.setButtonText())}),m=l(b,"destroy",x);p.unbindFullscreenEvent=()=>{x(),m()};let E=b.renderTo[p.browserProps.requestFullscreen]();E&&E.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let p=this.chart,b=p.exportDivElements,v=p.options.exporting,x=v&&v.buttons&&v.buttons.contextButton.menuItems,m=p.options.lang;if(v&&v.menuItemDefinitions&&m&&m.exitFullscreen&&m.viewFullscreen&&x&&b){let E=b[x.indexOf("viewFullscreen")];E&&e.setElementHTML(E,this.isOpen?m.exitFullscreen:v.menuItemDefinitions.viewFullscreen.text||m.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return g}),s(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){let{win:r}=e,{discardElement:n,objectEach:l}=i,a={ajax:function(h){let c={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},g=new XMLHttpRequest;function u(p,b){h.error&&h.error(p,b)}if(!h.url)return!1;g.open((h.type||"get").toUpperCase(),h.url,!0),h.headers&&h.headers["Content-Type"]||g.setRequestHeader("Content-Type",c[h.dataType||"json"]||c.text),l(h.headers,function(p,b){g.setRequestHeader(b,p)}),h.responseType&&(g.responseType=h.responseType),g.onreadystatechange=function(){let p;if(g.readyState===4){if(g.status===200){if(h.responseType!=="blob"&&(p=g.responseText,h.dataType==="json"))try{p=JSON.parse(p)}catch(b){if(b instanceof Error)return u(g,b)}return h.success&&h.success(p,g)}u(g,g.responseText)}},h.data&&typeof h.data!="string"&&(h.data=JSON.stringify(h.data)),g.send(h.data)},getJSON:function(h,c){a.ajax({url:h,success:c,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(h,c,g){let u=new r.FormData;l(c,function(v,x){u.append(x,v)}),u.append("b64","true");let{filename:p,type:b}=c;return r.fetch(h,xe({method:"POST",body:u},g)).then(v=>{v.ok&&v.text().then(x=>{let m=document.createElement("a");m.href=`data:${b};base64,${x}`,m.download=p,m.click(),n(m)})})}};return a}),s(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c,g,u){var p;let{defaultOptions:b}=n,{doc:v,SVG_NS:x,win:m}=c,{addEvent:E,css:L,createElement:S,discardElement:w,extend:R,find:O,fireEvent:I,isObject:_,merge:P,objectEach:F,pick:A,removeEvent:D,uniqueKey:C}=u;return function(d){let f,y=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^[0-9]+$/],M=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];d.inlineAllowlist=[];let k=["clipPath","defs","desc"];function T($){let Q,et,it=this,st=it.renderer,rt=P(it.options.navigation.buttonOptions,$),nt=rt.onclick,ot=rt.menuItems,at=rt.symbolSize||12;if(it.btnCount||(it.btnCount=0),it.exportDivElements||(it.exportDivElements=[],it.exportSVGElements=[]),rt.enabled===!1||!rt.theme)return;let ct=it.styledMode?{}:rt.theme;nt?et=function(lt){lt&&lt.stopPropagation(),nt.call(it,lt)}:ot&&(et=function(lt){lt&&lt.stopPropagation(),it.contextMenu(ht.menuClassName,ot,ht.translateX||0,ht.translateY||0,ht.width||0,ht.height||0,ht),ht.setState(2)}),rt.text&&rt.symbol?ct.paddingLeft=A(ct.paddingLeft,30):rt.text||R(ct,{width:rt.width,height:rt.height,padding:0});let ht=st.button(rt.text,0,0,et,ct,void 0,void 0,void 0,void 0,rt.useHTML).addClass($.className).attr({title:A(it.options.lang[rt._titleKey||rt.titleKey],"")});ht.menuClassName=$.menuClassName||"highcharts-menu-"+it.btnCount++,rt.symbol&&(Q=st.symbol(rt.symbol,Math.round((rt.symbolX||0)-at/2),Math.round((rt.symbolY||0)-at/2),at,at,{width:at,height:at}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(ht),it.styledMode||Q.attr({stroke:rt.symbolStroke,fill:rt.symbolFill,"stroke-width":rt.symbolStrokeWidth||1})),ht.add(it.exportingGroup).align(R(rt,{width:ht.width,x:A(rt.x,it.buttonOffset)}),!0,"spacingBox"),it.buttonOffset+=((ht.width||0)+rt.buttonSpacing)*(rt.align==="right"?-1:1),it.exportSVGElements.push(ht,Q)}function z(){if(!this.printReverseInfo)return;let{childNodes:$,origDisplay:Q,resetParams:et}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call($,function(it,st){it.nodeType===1&&(it.style.display=Q[st]||"")}),this.isPrinting=!1,et&&this.setSize.apply(this,et),delete this.printReverseInfo,f=void 0,I(this,"afterPrint")}function N(){let $=v.body,Q=this.options.exporting.printMaxWidth,et={childNodes:$.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,this.pointer?.reset(void 0,0),I(this,"beforePrint"),Q&&this.chartWidth>Q&&(et.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Q,void 0,!1)),[].forEach.call(et.childNodes,function(it,st){it.nodeType===1&&(et.origDisplay[st]=it.style.display,it.style.display="none")}),this.moveContainers($),this.printReverseInfo=et}function G($){$.renderExporting(),E($,"redraw",$.renderExporting),E($,"destroy",$.destroyExport)}function X($,Q,et,it,st,rt,nt){let ot=this,at=ot.options.navigation,ct=ot.chartWidth,ht=ot.chartHeight,lt="cache-"+$,xt=Math.max(st,rt),wt,dt=ot[lt];dt||(ot.exportContextMenu=ot[lt]=dt=S("div",{className:$},xe({position:"absolute",zIndex:1e3,padding:xt+"px",pointerEvents:"auto"},ot.renderer.style),ot.scrollablePlotArea?.fixedDiv||ot.container),wt=S("ul",{className:"highcharts-menu"},ot.styledMode?{}:{listStyle:"none",margin:0,padding:0},dt),ot.styledMode||L(wt,R({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},at.menuStyle)),dt.hideMenu=function(){L(dt,{display:"none"}),nt&&nt.setState(0),ot.openMenu=!1,L(ot.renderTo,{overflow:"hidden"}),L(ot.container,{overflow:"hidden"}),u.clearTimeout(dt.hideTimer),I(ot,"exportMenuHidden")},ot.exportEvents.push(E(dt,"mouseleave",function(){dt.hideTimer=m.setTimeout(dt.hideMenu,500)}),E(dt,"mouseenter",function(){u.clearTimeout(dt.hideTimer)}),E(v,"mouseup",function(ft){ot.pointer?.inClass(ft.target,$)||dt.hideMenu()}),E(dt,"click",function(){ot.openMenu&&dt.hideMenu()})),Q.forEach(function(ft){if(typeof ft=="string"&&(ft=ot.options.exporting.menuItemDefinitions[ft]),_(ft,!0)){let Tt;ft.separator?Tt=S("hr",void 0,void 0,wt):(ft.textKey==="viewData"&&ot.isDataTableVisible&&(ft.textKey="hideData"),Tt=S("li",{className:"highcharts-menu-item",onclick:function(zt){zt&&zt.stopPropagation(),dt.hideMenu(),typeof ft!="string"&&ft.onclick&&ft.onclick.apply(ot,arguments)}},void 0,wt),e.setElementHTML(Tt,ft.text||ot.options.lang[ft.textKey]),ot.styledMode||(Tt.onmouseover=function(){L(this,at.menuItemHoverStyle)},Tt.onmouseout=function(){L(this,at.menuItemStyle)},L(Tt,R({cursor:"pointer"},at.menuItemStyle||{})))),ot.exportDivElements.push(Tt)}}),ot.exportDivElements.push(wt,dt),ot.exportMenuWidth=dt.offsetWidth,ot.exportMenuHeight=dt.offsetHeight);let Ct={display:"block"};et+(ot.exportMenuWidth||0)>ct?Ct.right=ct-et-st-xt+"px":Ct.left=et-xt+"px",it+rt+(ot.exportMenuHeight||0)>ht&&nt.alignOptions?.verticalAlign!=="top"?Ct.bottom=ht-it-xt+"px":Ct.top=it+rt-xt+"px",L(dt,Ct),L(ot.renderTo,{overflow:""}),L(ot.container,{overflow:""}),ot.openMenu=!0,I(ot,"exportMenuShown")}function j($){let Q,et=$?$.target:this,it=et.exportSVGElements,st=et.exportDivElements,rt=et.exportEvents;it&&(it.forEach((nt,ot)=>{nt&&(nt.onclick=nt.ontouchstart=null,et[Q="cache-"+nt.menuClassName]&&delete et[Q],it[ot]=nt.destroy())}),it.length=0),et.exportingGroup&&(et.exportingGroup.destroy(),delete et.exportingGroup),st&&(st.forEach(function(nt,ot){nt&&(u.clearTimeout(nt.hideTimer),D(nt,"mouseleave"),st[ot]=nt.onmouseout=nt.onmouseover=nt.ontouchstart=nt.onclick=null,w(nt))}),st.length=0),rt&&(rt.forEach(function(nt){nt()}),rt.length=0)}function B($,Q){let et=this.getSVGForExport($,Q);$=P(this.options.exporting,$),g.post($.url,{filename:$.filename?$.filename.replace(/\//g,"-"):this.getFilename(),type:$.type,width:$.width,scale:$.scale,svg:et},$.fetchOptions)}function W(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function Y(){let $=this.userOptions.title&&this.userOptions.title.text,Q=this.options.exporting.filename;return Q?Q.replace(/\//g,"-"):(typeof $=="string"&&(Q=$.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Q||Q.length<5)&&(Q="chart"),Q)}function U($){let Q,et,it=P(this.options,$);it.plotOptions=P(this.userOptions.plotOptions,$&&$.plotOptions),it.time=P(this.userOptions.time,$&&$.time);let st=S("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},v.body),rt=this.renderTo.style.width,nt=this.renderTo.style.height,ot=it.exporting.sourceWidth||it.chart.width||/px$/.test(rt)&&parseInt(rt,10)||(it.isGantt?800:600),at=it.exporting.sourceHeight||it.chart.height||/px$/.test(nt)&&parseInt(nt,10)||400;R(it.chart,{animation:!1,renderTo:st,forExport:!0,renderer:"SVGRenderer",width:ot,height:at}),it.exporting.enabled=!1,delete it.data,it.series=[],this.series.forEach(function(lt){(et=P(lt.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:lt.visible})).isInternal||it.series.push(et)});let ct={};this.axes.forEach(function(lt){lt.userOptions.internalKey||(lt.userOptions.internalKey=C()),lt.options.isInternal||(ct[lt.coll]||(ct[lt.coll]=!0,it[lt.coll]=[]),it[lt.coll].push(P(lt.userOptions,{visible:lt.visible})))}),it.colorAxis=this.userOptions.colorAxis;let ht=new this.constructor(it,this.callback);return $&&["xAxis","yAxis","series"].forEach(function(lt){let xt={};$[lt]&&(xt[lt]=$[lt],ht.update(xt))}),this.axes.forEach(function(lt){let xt=O(ht.axes,function(ft){return ft.options.internalKey===lt.userOptions.internalKey}),wt=lt.getExtremes(),dt=wt.userMin,Ct=wt.userMax;xt&&(dt!==void 0&&dt!==xt.min||Ct!==void 0&&Ct!==xt.max)&&xt.setExtremes(dt,Ct,!0,!1)}),Q=ht.getChartHTML(),I(this,"getSVG",{chartCopy:ht}),Q=this.sanitizeSVG(Q,it),it=null,ht.destroy(),w(st),Q}function q($,Q){let et=this.options.exporting;return this.getSVG(P({chart:{borderRadius:0}},et.chartOptions,Q,{exporting:{sourceWidth:$&&$.sourceWidth||et.sourceWidth,sourceHeight:$&&$.sourceHeight||et.sourceHeight}}))}function H(){let $,Q=d.inlineAllowlist,et={},it=v.createElement("iframe");L(it,{width:"1px",height:"1px",visibility:"hidden"}),v.body.appendChild(it);let st=it.contentWindow&&it.contentWindow.document;st&&st.body.appendChild(st.createElementNS(x,"svg")),function rt(nt){let ot,at,ct,ht,lt,xt,wt={};if(st&&nt.nodeType===1&&k.indexOf(nt.nodeName)===-1){if(ot=m.getComputedStyle(nt,null),at=nt.nodeName==="svg"?{}:m.getComputedStyle(nt.parentNode,null),!et[nt.nodeName]){$=st.getElementsByTagName("svg")[0],ct=st.createElementNS(nt.namespaceURI,nt.nodeName),$.appendChild(ct);let dt=m.getComputedStyle(ct,null),Ct={};for(let ft in dt)ft.length<1e3&&typeof dt[ft]=="string"&&!/^[0-9]+$/.test(ft)&&(Ct[ft]=dt[ft]);et[nt.nodeName]=Ct,nt.nodeName==="text"&&delete et.text.fill,$.removeChild(ct)}for(let dt in ot)(c.isFirefox||c.isMS||c.isSafari||Object.hasOwnProperty.call(ot,dt))&&function(Ct,ft){if(ht=lt=!1,Q.length){for(xt=Q.length;xt--&&!lt;)lt=Q[xt].test(ft);ht=!lt}for(ft==="transform"&&Ct==="none"&&(ht=!0),xt=y.length;xt--&&!ht;){if(ft.length>1e3)throw Error("Input too long");ht=y[xt].test(ft)||typeof Ct=="function"}!ht&&(at[ft]!==Ct||nt.nodeName==="svg")&&et[nt.nodeName][ft]!==Ct&&(M&&M.indexOf(ft)===-1?wt[ft]=Ct:Ct&&nt.setAttribute(ft.replace(/([A-Z])/g,function(Tt,zt){return"-"+zt.toLowerCase()}),Ct))}(ot[dt],dt);if(L(nt,wt),nt.nodeName==="svg"&&nt.setAttribute("stroke-width","1px"),nt.nodeName==="text")return;[].forEach.call(nt.children||nt.childNodes,rt)}}(this.container.querySelector("svg")),$.parentNode.removeChild($),it.parentNode.removeChild(it)}function V($){let{scrollablePlotArea:Q}=this;(Q?[Q.fixedDiv,Q.scrollingContainer]:[this.container]).forEach(function(et){$.appendChild(et)})}function Z(){let $=this,Q=(et,it,st)=>{$.isDirtyExporting=!0,P(!0,$.options[et],it),A(st,!0)&&$.redraw()};$.exporting={update:function(et,it){Q("exporting",et,it)}},r.compose($).navigation.addUpdate((et,it)=>{Q("navigation",et,it)})}function K(){let $=this;$.isPrinting||(f=$,c.isSafari||$.beforePrint(),setTimeout(()=>{m.focus(),m.print(),c.isSafari||setTimeout(()=>{$.afterPrint()},1e3)},1))}function J(){let $=this,Q=$.options.exporting,et=Q.buttons,it=$.isDirtyExporting||!$.exportSVGElements;$.buttonOffset=0,$.isDirtyExporting&&$.destroyExport(),it&&Q.enabled!==!1&&($.exportEvents=[],$.exportingGroup=$.exportingGroup||$.renderer.g("exporting-group").attr({zIndex:3}).add(),F(et,function(st){$.addButton(st)}),$.isDirtyExporting=!1)}function tt($,Q){let et=$.indexOf("</svg>")+6,it=$.substr(et);return $=$.substr(0,et),Q&&Q.exporting&&Q.exporting.allowHTML&&it&&(it='<foreignObject x="0" y="0" width="'+Q.chart.width+'" height="'+Q.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+it.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",$=$.replace("</svg>",it+"</svg>")),$=$.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (|NS[0-9]+\:)href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xA0").replace(/&shy;/g,"\xAD")}d.compose=function($,Q){a.compose(Q),h.compose($);let et=$.prototype;et.exportChart||(et.afterPrint=z,et.exportChart=B,et.inlineStyles=H,et.print=K,et.sanitizeSVG=tt,et.getChartHTML=W,et.getSVG=U,et.getSVGForExport=q,et.getFilename=Y,et.moveContainers=V,et.beforePrint=N,et.contextMenu=X,et.addButton=T,et.destroyExport=j,et.renderExporting=J,et.callbacks.push(G),E($,"init",Z),c.isSafari&&m.matchMedia("print").addListener(function(it){f&&(it.matches?f.beforePrint():f.afterPrint())}),b.exporting=P(l.exporting,b.exporting),b.lang=P(l.lang,b.lang),b.navigation=P(l.navigation,b.navigation))}}(p||(p={})),p}),s(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(e,i,r){return e.HttpUtilities=e.HttpUtilities||r,e.ajax=e.HttpUtilities.ajax,e.getJSON=e.HttpUtilities.getJSON,e.post=e.HttpUtilities.post,i.compose(e.Chart,e.Renderer),e})})});var Pu=qe((OT,Vn)=>{"use strict";(function(o){typeof Vn=="object"&&Vn.exports?(o.default=o,Vn.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/stock",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function s(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}s(t,"Series/DataModifyComposition.js",[t["Core/Axis/Axis.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,i,r,n){var l;let{tooltipFormatter:a}=i.prototype,{addEvent:h,arrayMax:c,arrayMin:g,correctFloat:u,defined:p,isArray:b,isNumber:v,isString:x,pick:m}=n;return function(E){function L(D,C,d){!this.isXAxis&&(this.series.forEach(function(f){D==="compare"&&typeof C!="boolean"?f.setCompare(C,!1):D!=="cumulative"||x(C)||f.setCumulative(C,!1)}),m(d,!0)&&this.chart.redraw())}function S(D){let C=this,{numberFormatter:d}=C.series.chart,f=function(y){D=D.replace("{point."+y+"}",(C[y]>0&&y==="change"?"+":"")+d(C[y],m(C.series.tooltipOptions.changeDecimals,2)))};return p(C.change)&&f("change"),p(C.cumulativeSum)&&f("cumulativeSum"),a.apply(this,[D])}function w(){let D,C=this.options.compare;(C==="percent"||C==="value"||this.options.cumulative)&&(D=new A(this),C==="percent"||C==="value"?D.initCompare(C):D.initCumulative()),this.dataModify=D}function R(D){let C=D.dataExtremes,d=C.activeYData;if(this.dataModify&&C){let f;this.options.compare?f=[this.dataModify.modifyValue(C.dataMin),this.dataModify.modifyValue(C.dataMax)]:this.options.cumulative&&b(d)&&d.length>=2&&(f=A.getCumulativeExtremes(d)),f&&(C.dataMin=g(f),C.dataMax=c(f))}}function O(D,C){this.options.compare=this.userOptions.compare=D,this.update({},m(C,!0)),this.dataModify&&(D==="value"||D==="percent")?this.dataModify.initCompare(D):this.points.forEach(d=>{delete d.change})}function I(){if(this.xAxis&&this.processedYData&&this.dataModify){let D=this.processedXData,C=this.processedYData,d=C.length,f=this.options.compareStart===!0?0:1,y=-1,M;for(this.pointArrayMap&&(y=this.pointArrayMap.indexOf(this.options.pointValKey||this.pointValKey||"y")),M=0;M<d-f;M++){let k=C[M]&&y>-1?C[M][y]:C[M];if(v(k)&&k!==0&&D[M+f]>=(this.xAxis.min||0)){this.dataModify.compareValue=k;break}}}}function _(D,C){this.setModifier("compare",D,C)}function P(D,C){D=m(D,!1),this.options.cumulative=this.userOptions.cumulative=D,this.update({},m(C,!0)),this.dataModify?this.dataModify.initCumulative():this.points.forEach(d=>{delete d.cumulativeSum})}function F(D,C){this.setModifier("cumulative",D,C)}E.compose=function(D,C,d){let f=C.prototype,y=d.prototype,M=D.prototype;return M.setCompare||(M.setCompare=O,M.setCumulative=P,h(D,"afterInit",w),h(D,"afterGetExtremes",R),h(D,"afterProcessData",I)),f.setCompare||(f.setCompare=_,f.setModifier=L,f.setCumulative=F,y.tooltipFormatter=S),D};class A{constructor(C){this.series=C}modifyValue(){return 0}static getCumulativeExtremes(C){let d=1/0,f=-1/0;return C.reduce((y,M)=>{let k=y+M;return d=Math.min(d,k,y),f=Math.max(f,k,y),k}),[d,f]}initCompare(C){this.modifyValue=function(d,f){d===null&&(d=0);let y=this.compareValue;if(d!==void 0&&y!==void 0){if(C==="value"?d-=y:d=d/y*100-(this.series.options.compareBase===100?0:100),f!==void 0){let M=this.series.points[f];M&&(M.change=d)}return d}return 0}}initCumulative(){this.modifyValue=function(C,d){if(C===null&&(C=0),C!==void 0&&d!==void 0){let f=d>0?this.series.points[d-1]:null;f&&f.cumulativeSum&&(C=u(f.cumulativeSum+C));let y=this.series.points[d],M=y.series.options.cumulativeStart,k=y.x<=this.series.xAxis.max&&y.x>=this.series.xAxis.min;return y&&(!M||k?y.cumulativeSum=C:y.cumulativeSum=void 0),C}return 0}}}E.Additions=A}(l||(l={})),l}),s(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){let r,{isTouchDevice:n}=e,{addEvent:l,merge:a,pick:h}=i,c=[];function g(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function u(){let E,L,S,w=this.legend,R=this.navigator;if(R){E=w&&w.options,L=R.xAxis,S=R.yAxis;let{scrollbarHeight:O,scrollButtonSize:I}=R;this.inverted?(R.left=R.opposite?this.chartWidth-O-R.height:this.spacing[3]+O,R.top=this.plotTop+I):(R.left=h(L.left,this.plotLeft+I),R.top=R.navigatorOptions.top||this.chartHeight-R.height-O-(this.scrollbar?.options.margin||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(E&&E.verticalAlign==="bottom"&&E.layout!=="proximate"&&E.enabled&&!E.floating?w.legendHeight+h(E.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),L&&S&&(this.inverted?L.options.left=S.options.left=R.left:L.options.top=S.options.top=R.top,L.setAxisSize(),S.setAxisSize())}}function p(E){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new r(this),h(E.redraw,!0)&&this.redraw(E.animation))}function b(){let E=this.options;(E.navigator.enabled||E.scrollbar.enabled)&&(this.scroller=this.navigator=new r(this))}function v(){let E=this.options,L=E.navigator,S=E.rangeSelector;if((L&&L.enabled||S&&S.enabled)&&(!n&&this.zooming.type==="x"||n&&this.zooming.pinchType==="x"))return!1}function x(E){let L=E.navigator;if(L&&E.xAxis[0]){let S=E.xAxis[0].getExtremes();L.render(S.min,S.max)}}function m(E){let L=E.options.navigator||{},S=E.options.scrollbar||{};!this.navigator&&!this.scroller&&(L.enabled||S.enabled)&&(a(!0,this.options.navigator,L),a(!0,this.options.scrollbar,S),delete E.options.navigator,delete E.options.scrollbar)}return{compose:function(E,L){if(i.pushUnique(c,E)){let S=E.prototype;r=L,S.callbacks.push(x),l(E,"afterAddSeries",g),l(E,"afterSetChartSize",u),l(E,"afterUpdate",p),l(E,"beforeRender",b),l(E,"beforeShowResetZoom",v),l(E,"update",m)}}}}),s(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){let{isTouchDevice:r}=e,{addEvent:n,correctFloat:l,defined:a,isNumber:h,pick:c}=i;function g(){this.navigatorAxis||(this.navigatorAxis=new p(this))}function u(b){let v,x=this.chart,m=x.options,E=m.navigator,L=this.navigatorAxis,S=x.zooming.pinchType,w=m.rangeSelector,R=x.zooming.type;if(this.isXAxis&&(E?.enabled||w?.enabled)){if(R==="y"&&b.trigger==="zoom")v=!1;else if((b.trigger==="zoom"&&R==="xy"||r&&S==="xy")&&this.options.range){let O=L.previousZoom;a(b.min)?L.previousZoom=[this.min,this.max]:O&&(b.min=O[0],b.max=O[1],L.previousZoom=void 0)}}v!==void 0&&b.preventDefault()}class p{static compose(v){v.keepProps.includes("navigatorAxis")||(v.keepProps.push("navigatorAxis"),n(v,"init",g),n(v,"setExtremes",u))}constructor(v){this.axis=v}destroy(){this.axis=void 0}toFixedRange(v,x,m,E){let L=this.axis,S=(L.pointRange||0)/2,w=c(m,L.translate(v,!0,!L.horiz)),R=c(E,L.translate(x,!0,!L.horiz));return a(m)||(w=l(w+S)),a(E)||(R=l(R-S)),h(w)&&h(R)||(w=R=void 0),{min:w,max:R}}}return p}),s(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(e,i){let{parse:r}=e,{seriesTypes:n}=i;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:r("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:n.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),s(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(e,i){let{relativeLength:r}=i;return{"navigator-handle":function(n,l,a,h,c={}){let g=c.width?c.width/2:a,u=r(c.borderRadius||0,Math.min(2*g,h));return[["M",-1.5,(h=c.height||h)/2-3.5],["L",-1.5,h/2+4.5],["M",.5,h/2-3.5],["L",.5,h/2+4.5],...e.rect(-g-1,.5,2*g+1,h,{r:u})]}}}),s(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(e){let{defined:i}=e;return{setFixedRange:function(r){let n=this.xAxis[0];i(n.dataMax)&&i(n.dataMin)&&r?this.fixedRange=Math.min(r,n.dataMax-n.dataMin):this.fixedRange=r}}}),s(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c){let{setOptions:g}=e,{composed:u}=i,{getRendererType:p}=a,{setFixedRange:b}=h,{addEvent:v,extend:x,pushUnique:m}=c;function E(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(L,S,w){r.compose(S),m(u,"Navigator")&&(L.prototype.setFixedRange=b,x(p().prototype.symbols,l),v(w,"afterUpdate",E),g({navigator:n}))}}}),s(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i){var r;let{composed:n}=e,{addEvent:l,defined:a,pick:h,pushUnique:c}=i;return function(g){let u;function p(m){let E=h(m.options&&m.options.min,m.min),L=h(m.options&&m.options.max,m.max);return{axisMin:E,axisMax:L,scrollMin:a(m.dataMin)?Math.min(E,m.min,m.dataMin,h(m.threshold,1/0)):E,scrollMax:a(m.dataMax)?Math.max(L,m.max,m.dataMax,h(m.threshold,-1/0)):L}}function b(){let m=this.scrollbar,E=m&&!m.options.opposite,L=this.horiz?2:E?3:1;m&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[L]+=m.size+(m.options.margin||0))}function v(){let m=this;m.options&&m.options.scrollbar&&m.options.scrollbar.enabled&&(m.options.scrollbar.vertical=!m.horiz,m.options.startOnTick=m.options.endOnTick=!1,m.scrollbar=new u(m.chart.renderer,m.options.scrollbar,m.chart),l(m.scrollbar,"changed",function(E){let L,S,{axisMin:w,axisMax:R,scrollMin:O,scrollMax:I}=p(m),_=I-O;if(a(w)&&a(R))if(m.horiz&&!m.reversed||!m.horiz&&m.reversed?(L=O+_*this.to,S=O+_*this.from):(L=O+_*(1-this.from),S=O+_*(1-this.to)),this.shouldUpdateExtremes(E.DOMType)){let P=E.DOMType!=="mousemove"&&E.DOMType!=="touchmove"&&void 0;m.setExtremes(S,L,!0,P,E)}else this.setRange(this.from,this.to)}))}function x(){let m,E,L,{scrollMin:S,scrollMax:w}=p(this),R=this.scrollbar,O=this.axisTitleMargin+(this.titleOffset||0),I=this.chart.scrollbarsOffsets,_=this.options.margin||0;if(R&&I){if(this.horiz)this.opposite||(I[1]+=O),R.position(this.left,this.top+this.height+2+I[1]-(this.opposite?_:0),this.width,this.height),this.opposite||(I[1]+=_),m=1;else{let P;this.opposite&&(I[0]+=O),P=R.options.opposite?this.left+this.width+2+I[0]-(this.opposite?0:_):this.opposite?0:_,R.position(P,this.top,this.width,this.height),this.opposite&&(I[0]+=_),m=0}I[m]+=R.size+(R.options.margin||0),isNaN(S)||isNaN(w)||!a(this.min)||!a(this.max)||this.min===this.max?R.setRange(0,1):(E=(this.min-S)/(w-S),L=(this.max-S)/(w-S),this.horiz&&!this.reversed||!this.horiz&&this.reversed?R.setRange(E,L):R.setRange(1-L,1-E))}}g.compose=function(m,E){c(n,"Axis.Scrollbar")&&(u=E,l(m,"afterGetOffset",b),l(m,"afterInit",v),l(m,"afterRender",x))}}(r||(r={})),r}),s(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),s(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(e,i,r,n,l){let{defaultOptions:a}=e,{addEvent:h,correctFloat:c,crisp:g,defined:u,destroyObjectProperties:p,fireEvent:b,merge:v,pick:x,removeEvent:m}=l;class E{static compose(S){r.compose(S,E)}static swapXY(S,w){return w&&S.forEach(R=>{let O,I=R.length;for(let _=0;_<I;_+=2)typeof(O=R[_+1])=="number"&&(R[_+1]=R[_+2],R[_+2]=O)}),S}constructor(S,w,R){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(S,w,R)}addEvents(){let S=this.options.inverted?[1,0]:[0,1],w=this.scrollbarButtons,R=this.scrollbarGroup.element,O=this.track.element,I=this.mouseDownHandler.bind(this),_=this.mouseMoveHandler.bind(this),P=this.mouseUpHandler.bind(this),F=[[w[S[0]].element,"click",this.buttonToMinClick.bind(this)],[w[S[1]].element,"click",this.buttonToMaxClick.bind(this)],[O,"click",this.trackClick.bind(this)],[R,"mousedown",I],[R.ownerDocument,"mousemove",_],[R.ownerDocument,"mouseup",P],[R,"touchstart",I],[R.ownerDocument,"touchmove",_],[R.ownerDocument,"touchend",P]];F.forEach(function(A){h.apply(null,A)}),this._events=F}buttonToMaxClick(S){let w=(this.to-this.from)*x(this.options.step,.2);this.updatePosition(this.from+w,this.to+w),b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:S})}buttonToMinClick(S){let w=c(this.to-this.from)*x(this.options.step,.2);this.updatePosition(c(this.from-w),c(this.to-w)),b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:S})}cursorToScrollbarPosition(S){let w=this.options,R=w.minWidth>this.calculatedWidth?w.minWidth:0;return{chartX:(S.chartX-this.x-this.xOffset)/(this.barWidth-R),chartY:(S.chartY-this.y-this.yOffset)/(this.barWidth-R)}}destroy(){let S=this,w=S.chart.scroller;S.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(R){S[R]&&S[R].destroy&&(S[R]=S[R].destroy())}),w&&S===w.scrollbar&&(w.scrollbar=null,p(w.scrollbarButtons))}drawScrollbarButton(S){let w=this.renderer,R=this.scrollbarButtons,O=this.options,I=this.size,_=w.g().add(this.group);if(R.push(_),O.buttonsEnabled){let P=w.rect().addClass("highcharts-scrollbar-button").add(_);this.chart.styledMode||P.attr({stroke:O.buttonBorderColor,"stroke-width":O.buttonBorderWidth,fill:O.buttonBackgroundColor}),P.attr(P.crisp({x:-.5,y:-.5,width:I,height:I,r:O.buttonBorderRadius},P.strokeWidth()));let F=w.path(E.swapXY([["M",I/2+(S?-1:1),I/2-3],["L",I/2+(S?-1:1),I/2+3],["L",I/2+(S?2:-2),I/2]],O.vertical)).addClass("highcharts-scrollbar-arrow").add(R[S]);this.chart.styledMode||F.attr({fill:O.buttonArrowColor})}}init(S,w,R){this.scrollbarButtons=[],this.renderer=S,this.userOptions=w,this.options=v(n,a.scrollbar,w),this.options.margin=x(this.options.margin,10),this.chart=R,this.size=x(this.options.size,this.options.height),w.enabled&&(this.render(),this.addEvents())}mouseDownHandler(S){let w=this.chart.pointer?.normalize(S)||S,R=this.cursorToScrollbarPosition(w);this.chartX=R.chartX,this.chartY=R.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(S){let w,R=this.chart.pointer?.normalize(S)||S,O=this.options.vertical?"chartY":"chartX",I=this.initPositions||[];this.grabbedCenter&&(!S.touches||S.touches[0][O]!==0)&&(w=this.cursorToScrollbarPosition(R)[O]-this[O],this.hasDragged=!0,this.updatePosition(I[0]+w,I[1]+w),this.hasDragged&&b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:S.type,DOMEvent:S}))}mouseUpHandler(S){this.hasDragged&&b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:S.type,DOMEvent:S}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(S,w,R,O){let{buttonsEnabled:I,margin:_=0,vertical:P}=this.options,F=this.rendered?"animate":"attr",A=O,D=0;this.group.show(),this.x=S,this.y=w+this.trackBorderWidth,this.width=R,this.height=O,this.xOffset=A,this.yOffset=D,P?(this.width=this.yOffset=R=D=this.size,this.xOffset=A=0,this.yOffset=D=I?this.size:0,this.barWidth=O-(I?2*R:0),this.x=S+=_):(this.height=O=this.size,this.xOffset=A=I?this.size:0,this.barWidth=R-(I?2*O:0),this.y=this.y+_),this.group[F]({translateX:S,translateY:this.y}),this.track[F]({width:R,height:O}),this.scrollbarButtons[1][F]({translateX:P?0:R-A,translateY:P?O-D:0})}removeEvents(){this._events.forEach(function(S){m.apply(null,S)}),this._events.length=0}render(){let S=this.renderer,w=this.options,R=this.size,O=this.chart.styledMode,I=S.g("scrollbar").attr({zIndex:w.zIndex}).hide().add();this.group=I,this.track=S.rect().addClass("highcharts-scrollbar-track").attr({r:w.trackBorderRadius||0,height:R,width:R}).add(I),O||this.track.attr({fill:w.trackBackgroundColor,stroke:w.trackBorderColor,"stroke-width":w.trackBorderWidth});let _=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-g(0,_),y:-g(0,_)}),this.scrollbarGroup=S.g().add(I),this.scrollbar=S.rect().addClass("highcharts-scrollbar-thumb").attr({height:R-_,width:R-_,r:w.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=S.path(E.swapXY([["M",-3,R/4],["L",-3,2*R/3],["M",0,R/4],["L",0,2*R/3],["M",3,R/4],["L",3,2*R/3]],w.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),O||(this.scrollbar.attr({fill:w.barBackgroundColor,stroke:w.barBorderColor,"stroke-width":w.barBorderWidth}),this.scrollbarRifles.attr({stroke:w.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-g(0,this.scrollbarStrokeWidth),-g(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(S,w){let R,O,I=this.options,_=I.vertical,P=I.minWidth,F=this.barWidth,A=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!u(F))return;let D=F*Math.min(w,1);R=Math.ceil(F*(S=Math.max(S,0))),this.calculatedWidth=O=c(D-R),O<P&&(R=(F-P+O)*S,O=P);let C=Math.floor(R+this.xOffset+this.yOffset),d=O/2-.5;this.from=S,this.to=w,_?(this.scrollbarGroup[A]({translateY:C}),this.scrollbar[A]({height:O}),this.scrollbarRifles[A]({translateY:d}),this.scrollbarTop=C,this.scrollbarLeft=0):(this.scrollbarGroup[A]({translateX:C}),this.scrollbar[A]({width:O}),this.scrollbarRifles[A]({translateX:d}),this.scrollbarLeft=C,this.scrollbarTop=0),O<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),I.showFull===!1&&(S<=0&&w>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(S){return x(this.options.liveRedraw,i.svg&&!i.isTouchDevice&&!this.chart.boosted)||S==="mouseup"||S==="touchend"||!u(S)}trackClick(S){let w=this.chart.pointer?.normalize(S)||S,R=this.to-this.from,O=this.y+this.scrollbarTop,I=this.x+this.scrollbarLeft;this.options.vertical&&w.chartY>O||!this.options.vertical&&w.chartX>I?this.updatePosition(this.from+R,this.to+R):this.updatePosition(this.from-R,this.to-R),b(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:S})}update(S){this.destroy(),this.init(this.chart.renderer,v(!0,this.options,S),this.chart)}updatePosition(S,w){w>1&&(S=c(1-c(w-S)),w=1),S<0&&(w=c(w-S),S=0),this.from=S,this.to=w}}return E.defaultOptions=n,a.scrollbar=v(!0,E.defaultOptions,a.scrollbar),E}),s(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c){let{defaultOptions:g}=r,{isTouchDevice:u}=n,{addEvent:p,clamp:b,correctFloat:v,defined:x,destroyObjectProperties:m,erase:E,extend:L,find:S,fireEvent:w,isArray:R,isNumber:O,merge:I,pick:_,removeEvent:P,splat:F}=c;function A(C,...d){let f=[].filter.call(d,O);if(f.length)return Math[C].apply(0,f)}class D{static compose(d,f,y){i.compose(d,D),a.compose(d,f,y)}constructor(d){this.scrollbarHeight=0,this.init(d)}drawHandle(d,f,y,M){let k=this.navigatorOptions.handles.height;this.handles[f][M](y?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(d,10)+.5-k)}:{translateX:Math.round(this.left+parseInt(d,10)),translateY:Math.round(this.top+this.height/2-k/2-1)})}drawOutline(d,f,y,M){let k=this.navigatorOptions.maskInside,T=this.outline.strokeWidth(),z=T/2,N=T%2/2,G=this.scrollButtonSize,X=this.size,j=this.top,B=this.height,W=j-z,Y=j+B,U=this.left,q,H;y?(q=j+f+N,f=j+d+N,H=[["M",U+B,j-G-N],["L",U+B,q],["L",U,q],["M",U,f],["L",U+B,f],["L",U+B,j+X+G]],k&&H.push(["M",U+B,q-z],["L",U+B,f+z])):(U-=G,d+=U+G-N,f+=U+G-N,H=[["M",U,W],["L",d,W],["L",d,Y],["M",f,Y],["L",f,W],["L",U+X+2*G,j+z]],k&&H.push(["M",d-z,W],["L",f+z,W])),this.outline[M]({d:H})}drawMasks(d,f,y,M){let k,T,z,N,G=this.left,X=this.top,j=this.height;y?(z=[G,G,G],N=[X,X+d,X+f],T=[j,j,j],k=[d,f-d,this.size-f]):(z=[G,G+d,G+f],N=[X,X,X],T=[d,f-d,this.size-f],k=[j,j,j]),this.shades.forEach((B,W)=>{B[M]({x:z[W],y:N[W],width:T[W],height:k[W]})})}renderElements(){let d=this,f=d.navigatorOptions,y=f.maskInside,M=d.chart,k=M.inverted,T=M.renderer,z={cursor:k?"ns-resize":"ew-resize"},N=d.navigatorGroup=T.g("navigator").attr({zIndex:8,visibility:"hidden"}).add();if([!y,y,!y].forEach((G,X)=>{let j=T.rect().addClass("highcharts-navigator-mask"+(X===1?"-inside":"-outside")).add(N);M.styledMode||(j.attr({fill:G?f.maskFill:"rgba(0,0,0,0)"}),X===1&&j.css(z)),d.shades[X]=j}),d.outline=T.path().addClass("highcharts-navigator-outline").add(N),M.styledMode||d.outline.attr({"stroke-width":f.outlineWidth,stroke:f.outlineColor}),f.handles&&f.handles.enabled){let G=f.handles,{height:X,width:j}=G;[0,1].forEach(B=>{d.handles[B]=T.symbol(G.symbols[B],-j/2-1,0,j,X,G),M.inverted&&d.handles[B].attr({rotation:90,rotationOriginX:Math.floor(-j/2),rotationOriginY:(X+j)/2}),d.handles[B].attr({zIndex:7-B}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][B]).add(N),M.styledMode||d.handles[B].attr({fill:G.backgroundColor,stroke:G.borderColor,"stroke-width":G.lineWidth}).css(z)})}}update(d){(this.series||[]).forEach(f=>{f.baseSeries&&delete f.baseSeries.navigatorSeries}),this.destroy(),I(!0,this.chart.options.navigator,d),this.init(this.chart)}render(d,f,y,M){let k=this.chart,T=this.xAxis,z=T.pointRange||0,N=T.navigatorAxis.fake?k.xAxis[0]:T,G=this.navigatorEnabled,X=this.rendered,j=k.inverted,B=k.xAxis[0].minRange,W=k.xAxis[0].options.maxRange,Y=this.scrollButtonSize,U,q,H,V=this.scrollbarHeight,Z,K;if(this.hasDragged&&!x(y))return;if(d=v(d-z/2),f=v(f+z/2),!O(d)||!O(f)){if(!X)return;y=0,M=_(T.width,N.width)}this.left=_(T.left,k.plotLeft+Y+(j?k.plotWidth:0));let J=this.size=Z=_(T.len,(j?k.plotHeight:k.plotWidth)-2*Y);U=j?V:Z+2*Y,y=_(y,T.toPixels(d,!0)),M=_(M,T.toPixels(f,!0)),O(y)&&Math.abs(y)!==1/0||(y=0,M=U);let tt=T.toValue(y,!0),$=T.toValue(M,!0),Q=Math.abs(v($-tt));Q<B?this.grabbedLeft?y=T.toPixels($-B-z,!0):this.grabbedRight&&(M=T.toPixels(tt+B+z,!0)):x(W)&&v(Q-z)>W&&(this.grabbedLeft?y=T.toPixels($-W-z,!0):this.grabbedRight&&(M=T.toPixels(tt+W+z,!0))),this.zoomedMax=b(Math.max(y,M),0,J),this.zoomedMin=b(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(y,M),0,J),this.range=this.zoomedMax-this.zoomedMin,J=Math.round(this.zoomedMax);let et=Math.round(this.zoomedMin);G&&(this.navigatorGroup.attr({visibility:"inherit"}),K=X&&!this.hasDragged?"animate":"attr",this.drawMasks(et,J,j,K),this.drawOutline(et,J,j,K),this.navigatorOptions.handles.enabled&&(this.drawHandle(et,0,j,K),this.drawHandle(J,1,j,K))),this.scrollbar&&(j?(H=this.top-Y,q=this.left-V+(G||!N.opposite?0:(N.titleOffset||0)+N.axisTitleMargin),V=Z+2*Y):(H=this.top+(G?this.height:-V),q=this.left-Y),this.scrollbar.position(q,H,U,V),this.scrollbar.setRange(this.zoomedMin/(Z||1),this.zoomedMax/(Z||1))),this.rendered=!0,w(this,"afterRender")}addMouseEvents(){let d=this,f=d.chart,y=f.container,M=[],k,T;d.mouseMoveHandler=k=function(z){d.onMouseMove(z)},d.mouseUpHandler=T=function(z){d.onMouseUp(z)},(M=d.getPartsEvents("mousedown")).push(p(f.renderTo,"mousemove",k),p(y.ownerDocument,"mouseup",T),p(f.renderTo,"touchmove",k),p(y.ownerDocument,"touchend",T)),M.concat(d.getPartsEvents("touchstart")),d.eventsToUnbind=M,d.series&&d.series[0]&&M.push(p(d.series[0].xAxis,"foundExtremes",function(){f.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(d){let f=this,y=[];return["shades","handles"].forEach(function(M){f[M].forEach(function(k,T){y.push(p(k.element,d,function(z){f[M+"Mousedown"](z,T)}))})}),y}shadesMousedown(d,f){d=this.chart.pointer?.normalize(d)||d;let y=this.chart,M=this.xAxis,k=this.zoomedMin,T=this.size,z=this.range,N=this.left,G=d.chartX,X,j,B,W;y.inverted&&(G=d.chartY,N=this.top),f===1?(this.grabbedCenter=G,this.fixedWidth=z,this.dragOffset=G-k):(W=G-N-z/2,f===0?W=Math.max(0,W):f===2&&W+z>=T&&(W=T-z,this.reversedExtremes?(W-=z,j=this.getUnionExtremes().dataMin):X=this.getUnionExtremes().dataMax),W!==k&&(this.fixedWidth=z,x((B=M.navigatorAxis.toFixedRange(W,W+z,j,X)).min)&&w(this,"setRange",{min:Math.min(B.min,B.max),max:Math.max(B.min,B.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(d,f){d=this.chart.pointer?.normalize(d)||d;let y=this.chart,M=y.xAxis[0],k=this.reversedExtremes;f===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=k?M.min:M.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=k?M.max:M.min),y.setFixedRange(void 0)}onMouseMove(d){let f=this,y=f.chart,M=f.navigatorSize,k=f.range,T=f.dragOffset,z=y.inverted,N=f.left,G;(!d.touches||d.touches[0].pageX!==0)&&(G=(d=y.pointer?.normalize(d)||d).chartX,z&&(N=f.top,G=d.chartY),f.grabbedLeft?(f.hasDragged=!0,f.render(0,0,G-N,f.otherHandlePos)):f.grabbedRight?(f.hasDragged=!0,f.render(0,0,f.otherHandlePos,G-N)):f.grabbedCenter&&(f.hasDragged=!0,G<T?G=T:G>M+T-k&&(G=M+T-k),f.render(0,0,G-T,G-T+k)),f.hasDragged&&f.scrollbar&&_(f.scrollbar.options.liveRedraw,!u&&!this.chart.boosted)&&(d.DOMType=d.type,setTimeout(function(){f.onMouseUp(d)},0)))}onMouseUp(d){let f,y,M,k,T,z,N=this.chart,G=this.xAxis,X=this.scrollbar,j=d.DOMEvent||d,B=N.inverted,W=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!X||!X.hasDragged)||d.trigger==="scrollbar")&&(M=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?k=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(T=this.fixedExtreme),this.zoomedMax===this.size&&(T=this.reversedExtremes?M.dataMin:M.dataMax),this.zoomedMin===0&&(k=this.reversedExtremes?M.dataMax:M.dataMin),x((z=G.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,k,T)).min)&&w(this,"setRange",{min:Math.min(z.min,z.max),max:Math.max(z.min,z.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:j}})),d.DOMType!=="mousemove"&&d.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&O(this.zoomedMin)&&O(this.zoomedMax)&&(y=Math.round(this.zoomedMin),f=Math.round(this.zoomedMax),this.shades&&this.drawMasks(y,f,B,W),this.outline&&this.drawOutline(y,f,B,W),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(y,0,B,W),this.drawHandle(f,1,B,W)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(d){d()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let d=this.baseSeries||[];this.navigatorEnabled&&d[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&d.forEach(function(f){P(f,"updatedData",this.updatedDataHandler)},this),d[0].xAxis&&P(d[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}init(d){let f=d.options,y=f.navigator||{},M=y.enabled,k=f.scrollbar||{},T=k.enabled,z=M&&y.height||0,N=T&&k.height||0,G=k.buttonsEnabled&&N||0;this.handles=[],this.shades=[],this.chart=d,this.setBaseSeries(),this.height=z,this.scrollbarHeight=N,this.scrollButtonSize=G,this.scrollbarEnabled=T,this.navigatorEnabled=M,this.navigatorOptions=y,this.scrollbarOptions=k,this.opposite=_(y.opposite,!!(!M&&d.inverted));let X=this,j=X.baseSeries,B=d.xAxis.length,W=d.yAxis.length,Y=j&&j[0]&&j[0].xAxis||d.xAxis[0]||{options:{}};if(d.isDirtyBox=!0,X.navigatorEnabled?(X.xAxis=new e(d,I({breaks:Y.options.breaks,ordinal:Y.options.ordinal,overscroll:Y.options.overscroll},y.xAxis,{type:"datetime",index:B,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},d.inverted?{offsets:[G,0,-G,0],width:z}:{offsets:[0,-G,0,G],height:z}),"xAxis"),X.yAxis=new e(d,I(y.yAxis,{alignTicks:!1,offset:0,index:W,isInternal:!0,reversed:_(y.yAxis&&y.yAxis.reversed,d.yAxis[0]&&d.yAxis[0].reversed,!1),zoomEnabled:!1},d.inverted?{width:z}:{height:z}),"yAxis"),j||y.series.data?X.updateNavigatorSeries(!1):d.series.length===0&&(X.unbindRedraw=p(d,"beforeRedraw",function(){d.series.length>0&&!X.series&&(X.setBaseSeries(),X.unbindRedraw())})),X.reversedExtremes=d.inverted&&!X.xAxis.reversed||!d.inverted&&X.xAxis.reversed,X.renderElements(),X.addMouseEvents()):(X.xAxis={chart:d,navigatorAxis:{fake:!0},translate:function(U,q){let H=d.xAxis[0],V=H.getExtremes(),Z=H.len-2*G,K=A("min",H.options.min,V.dataMin),J=A("max",H.options.max,V.dataMax)-K;return q?U*J/Z+K:Z*(U-K)/J},toPixels:function(U){return this.translate(U)},toValue:function(U){return this.translate(U,!0)}},X.xAxis.navigatorAxis.axis=X.xAxis,X.xAxis.navigatorAxis.toFixedRange=l.prototype.toFixedRange.bind(X.xAxis.navigatorAxis)),d.options.scrollbar.enabled){let U=I(d.options.scrollbar,{vertical:d.inverted});!O(U.margin)&&X.navigatorEnabled&&(U.margin=d.inverted?-3:3),d.scrollbar=X.scrollbar=new h(d.renderer,U,d),p(X.scrollbar,"changed",function(q){let H=X.size,V=H*this.to,Z=H*this.from;X.hasDragged=X.scrollbar.hasDragged,X.render(0,0,Z,V),this.shouldUpdateExtremes(q.DOMType)&&setTimeout(function(){X.onMouseUp(q)})})}X.addBaseSeriesEvents(),X.addChartEvents()}getUnionExtremes(d){let f,y=this.chart.xAxis[0],M=this.xAxis,k=M.options,T=y.options;return d&&y.dataMin===null||(f={dataMin:_(k&&k.min,A("min",T.min,y.dataMin,M.dataMin,M.min)),dataMax:_(k&&k.max,A("max",T.max,y.dataMax,M.dataMax,M.max))}),f}setBaseSeries(d,f){let y=this.chart,M=this.baseSeries=[];d=d||y.options&&y.options.navigator.baseSeries||(y.series.length?S(y.series,k=>!k.options.isInternal).index:0),(y.series||[]).forEach((k,T)=>{!k.options.isInternal&&(k.options.showInNavigator||(T===d||k.options.id===d)&&k.options.showInNavigator!==!1)&&M.push(k)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,f)}updateNavigatorSeries(d,f){let y=this,M=y.chart,k=y.baseSeries,T={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:this.navigatorOptions.xAxis?.id,yAxis:this.navigatorOptions.yAxis?.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},z=y.series=(y.series||[]).filter(B=>{let W=B.baseSeries;return!(0>k.indexOf(W))||(W&&(P(W,"updatedData",y.updatedDataHandler),delete W.navigatorSeries),B.chart&&B.destroy(),!1)}),N,G,X=y.navigatorOptions.series,j;k&&k.length&&k.forEach(B=>{let W=B.navigatorSeries,Y=L({color:B.color,visible:B.visible},R(X)?g.navigator.series:X);if(W&&y.navigatorOptions.adaptToUpdatedData===!1)return;T.name="Navigator "+k.length,j=(N=B.options||{}).navigatorOptions||{},Y.dataLabels=F(Y.dataLabels),(G=I(N,T,Y,j)).pointRange=_(Y.pointRange,j.pointRange,g.plotOptions[G.type||"line"].pointRange);let U=j.data||Y.data;y.hasNavigatorData=y.hasNavigatorData||!!U,G.data=U||N.data&&N.data.slice(0),W&&W.options?W.update(G,f):(B.navigatorSeries=M.initSeries(G),M.setSortedData(),B.navigatorSeries.baseSeries=B,z.push(B.navigatorSeries))}),(X.data&&!(k&&k.length)||R(X))&&(y.hasNavigatorData=!1,(X=F(X)).forEach((B,W)=>{T.name="Navigator "+(z.length+1),(G=I(g.navigator.series,{color:M.series[W]&&!M.series[W].options.isInternal&&M.series[W].color||M.options.colors[W]||M.options.colors[0]},T,B)).data=B.data,G.data&&(y.hasNavigatorData=!0,z.push(M.initSeries(G)))})),d&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let d=this,f=d.baseSeries||[];f[0]&&f[0].xAxis&&f[0].eventsToUnbind.push(p(f[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),f.forEach(y=>{y.eventsToUnbind.push(p(y,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),y.eventsToUnbind.push(p(y,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&y.xAxis&&y.eventsToUnbind.push(p(y,"updatedData",this.updatedDataHandler)),y.eventsToUnbind.push(p(y,"remove",function(){this.navigatorSeries&&(E(d.series,this.navigatorSeries),x(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(d){return this.baseSeries.reduce(function(f,y){return Math.min(f,y.xData&&y.xData.length?y.xData[0]:f)},d)}modifyNavigatorAxisExtremes(){let d=this.xAxis;if(d.getExtremes!==void 0){let f=this.getUnionExtremes(!0);f&&(f.dataMin!==d.min||f.dataMax!==d.max)&&(d.min=f.dataMin,d.max=f.dataMax)}}modifyBaseAxisExtremes(){let d,f,y=this.chart.navigator,M=this.getExtremes(),k=M.min,T=M.max,z=M.dataMin,N=M.dataMax,G=T-k,X=y.stickToMin,j=y.stickToMax,B=_(this.ordinal?.convertOverscroll(this.options.overscroll),0),W=y.series&&y.series[0],Y=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(X&&(d=(f=z)+G),j&&(d=N+B,X||(f=Math.max(z,d-G,y.getBaseSeriesMin(W&&W.xData?W.xData[0]:-Number.MAX_VALUE)))),Y&&(X||j)&&O(f)&&(this.min=this.userMin=f,this.max=this.userMax=d)),y.stickToMin=y.stickToMax=null}updatedDataHandler(){let d=this.chart.navigator,f=this.navigatorSeries,y=d.reversedExtremes?Math.round(d.zoomedMin)===0:Math.round(d.zoomedMax)>=Math.round(d.size);d.stickToMax=_(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,y),d.stickToMin=d.shouldStickToMin(this,d),f&&!d.hasNavigatorData&&(f.options.pointStart=this.xData[0],f.setData(this.options.data,!1,null,!1))}shouldStickToMin(d,f){let y=f.getBaseSeriesMin(d.xData[0]),M=d.xAxis,k=M.max,T=M.min,z=M.options.range;return!!(O(k)&&O(T))&&(z&&k-y>0?k-y<z:T<=y)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(p(this.chart,"redraw",function(){let d=this.navigator,f=d&&(d.baseSeries&&d.baseSeries[0]&&d.baseSeries[0].xAxis||this.xAxis[0]);f&&d.render(f.min,f.max)}),p(this.chart,"getMargins",function(){let d=this.navigator,f=d.opposite?"plotTop":"marginBottom";this.inverted&&(f=d.opposite?"marginRight":"plotLeft"),this[f]=(this[f]||0)+(d.navigatorEnabled||!this.inverted?d.height+d.scrollbarHeight:0)+d.navigatorOptions.margin}),p(D,"setRange",function(d){this.chart.xAxis[0].setExtremes(d.min,d.max,d.redraw,d.animation,d.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(E(this.chart.xAxis,this.xAxis),E(this.chart.axes,this.xAxis)),this.yAxis&&(E(this.chart.yAxis,this.yAxis),E(this.chart.axes,this.yAxis)),(this.series||[]).forEach(d=>{d.destroy&&d.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(d=>{this[d]&&this[d].destroy&&this[d].destroy(),this[d]=null}),[this.handles].forEach(d=>{m(d)})}}return D}),s(t,"Core/Axis/OrdinalAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,i,r,n){var l;let{addEvent:a,correctFloat:h,css:c,defined:g,error:u,isNumber:p,pick:b,timeUnits:v,isString:x}=n;return function(m){function E(C,d,f,y,M=[],k=0,T){let z={},N=this.options.tickPixelInterval,G=this.chart.time,X=[],j,B,W,Y,U,q=0,H=[],V=-Number.MAX_VALUE;if(!this.options.ordinal&&!this.options.breaks||!M||M.length<3||d===void 0)return G.getTimeTicks.apply(G,arguments);let Z=M.length;for(j=0;j<Z;j++){if(U=j&&M[j-1]>f,M[j]<d&&(q=j),j===Z-1||M[j+1]-M[j]>5*k||U){if(M[j]>V){for(B=G.getTimeTicks(C,M[q],M[j],y);B.length&&B[0]<=V;)B.shift();B.length&&(V=B[B.length-1]),X.push(H.length),H=H.concat(B)}q=j+1}if(U)break}if(B){if(Y=B.info,T&&Y.unitRange<=v.hour){for(q=1,j=H.length-1;q<j;q++)G.dateFormat("%d",H[q])!==G.dateFormat("%d",H[q-1])&&(z[H[q]]="day",W=!0);W&&(z[H[0]]="day"),Y.higherRanks=z}Y.segmentStarts=X,H.info=Y}else u(12,!1,this.chart);if(T&&g(N)){let K=H.length,J=[],tt=[],$,Q,et,it,st,rt=K;for(;rt--;)Q=this.translate(H[rt]),et&&(tt[rt]=et-Q),J[rt]=et=Q;for(tt.sort((nt,ot)=>nt-ot),(it=tt[Math.floor(tt.length/2)])<.6*N&&(it=null),rt=H[K-1]>f?K-1:K,et=void 0;rt--;)st=Math.abs(et-(Q=J[rt])),et&&st<.8*N&&(it===null||st<.8*it)?(z[H[rt]]&&!z[H[rt+1]]?($=rt+1,et=Q):$=rt,H.splice($,1)):et=Q}return H}function L(C){let d=this.ordinal.positions;if(!d)return C;let f=d.length-1,y;return C<0?C=d[0]:C>f?C=d[f]:(f=Math.floor(C),y=C-f),y!==void 0&&d[f]!==void 0?d[f]+(y?y*(d[f+1]-d[f]):0):C}function S(C){let d=this.ordinal,f=this.old?this.old.min:this.min,y=this.old?this.old.transA:this.transA,M=d.getExtendedPositions();if(M&&M.length){let k=h((C-f)*y+this.minPixelPadding),T=h(d.getIndexOfPoint(k,M)),z=h(T%1);if(T>=0&&T<=M.length-1){let N=M[Math.floor(T)],G=M[Math.ceil(T)];return M[Math.floor(T)]+z*(G-N)}}return C}function w(C,d){let f=m.Additions.findIndexOf(C,d,!0);if(C[f]===d)return f;let y=(d-C[f])/(C[f+1]-C[f]);return f+y}function R(){this.ordinal||(this.ordinal=new m.Additions(this))}function O(){let{eventArgs:C,options:d}=this;if(this.isXAxis&&g(d.overscroll)&&d.overscroll!==0&&p(this.max)&&p(this.min)&&(this.options.ordinal&&!this.ordinal.originalOrdinalRange&&this.ordinal.getExtendedPositions(!1),this.max===this.dataMax&&(C?.trigger!=="pan"||this.isInternal)&&C?.trigger!=="navigator")){let f=this.ordinal.convertOverscroll(d.overscroll);this.max+=f,!this.isInternal&&g(this.userMin)&&C?.trigger!=="mousewheel"&&(this.min+=f)}}function I(){this.horiz&&!this.isDirty&&(this.isDirty=this.isOrdinal&&this.chart.navigator&&!this.chart.navigator.adaptToUpdatedData)}function _(){this.ordinal&&(this.ordinal.beforeSetTickPositions(),this.tickInterval=this.ordinal.postProcessTickInterval(this.tickInterval))}function P(C){let d=this.xAxis[0],f=d.ordinal.convertOverscroll(d.options.overscroll),y=C.originalEvent.chartX,M=this.options.chart.panning,k=!1;if(M&&M.type!=="y"&&d.options.ordinal&&d.series.length){let T,z,N=this.mouseDownX,G=d.getExtremes(),X=G.dataMin,j=G.dataMax,B=G.min,W=G.max,Y=this.hoverPoints,U=d.closestPointRange||d.ordinal&&d.ordinal.overscrollPointsRange,q=Math.round((N-y)/(d.translationSlope*(d.ordinal.slope||U))),H=d.ordinal.getExtendedPositions(),V={ordinal:{positions:H,extendedOrdinalPositions:H}},Z=d.index2val,K=d.val2lin;if(B<=X&&q<0||W+f>=j&&q>0)return;V.ordinal.positions?Math.abs(q)>1&&(Y&&Y.forEach(function(J){J.setState()}),j>(z=V.ordinal.positions)[z.length-1]&&z.push(j),this.setFixedRange(W-B),(T=d.navigatorAxis.toFixedRange(void 0,void 0,Z.apply(V,[K.apply(V,[B,!0])+q]),Z.apply(V,[K.apply(V,[W,!0])+q]))).min>=Math.min(G.dataMin,B)&&T.max<=Math.max(j,W)+f&&d.setExtremes(T.min,T.max,!0,!1,{trigger:"pan"}),this.mouseDownX=y,c(this.container,{cursor:"move"})):k=!0}else k=!0;k||M&&/y/.test(M.type)?f&&(d.max=d.dataMax+f):C.preventDefault()}function F(){let C=this.xAxis;C&&C.options.ordinal&&(delete C.ordinal.index,delete C.ordinal.originalOrdinalRange)}function A(C,d){let f,y=this.ordinal,M=y.positions,k=y.slope,T;if(!M)return C;let z=M.length;if(M[0]<=C&&M[z-1]>=C)f=w(M,C);else{if(!((T=y.getExtendedPositions&&y.getExtendedPositions())&&T.length))return C;let N=T.length;k||(k=(T[N-1]-T[0])/N);let G=w(T,M[0]);if(C>=T[0]&&C<=T[N-1])f=w(T,C)-G;else{if(!d)return C;f=C<T[0]?-G-(T[0]-C)/k:(C-T[N-1])/k+N-G}}return d?f:k*(f||0)+y.offset}m.compose=function(C,d,f){let y=C.prototype;return y.ordinal2lin||(y.getTimeTicks=E,y.index2val=L,y.lin2val=S,y.val2lin=A,y.ordinal2lin=y.val2lin,a(C,"afterInit",R),a(C,"foundExtremes",O),a(C,"afterSetScale",I),a(C,"initialAxisTranslation",_),a(f,"pan",P),a(d,"updatedData",F)),C};class D{constructor(d){this.index={},this.axis=d}beforeSetTickPositions(){let d=this.axis,f=d.ordinal,y=d.getExtremes(),M=y.min,k=y.max,T=d.brokenAxis?.hasBreaks,z=d.options.ordinal,N,G,X,j,B,W,Y,U=[],q=Number.MAX_VALUE,H=!1,V=!1,Z=!1;if(z||T){let K=0;if(d.series.forEach(function(J,tt){if(G=[],tt>0&&J.options.id!=="highcharts-navigator-series"&&J.processedXData.length>1&&(V=K!==J.processedXData[1]-J.processedXData[0]),K=J.processedXData[1]-J.processedXData[0],J.boosted&&(Z=J.boosted),J.reserveSpace()&&(J.takeOrdinalPosition!==!1||T)&&(N=(U=U.concat(J.processedXData)).length,U.sort(function($,Q){return $-Q}),q=Math.min(q,b(J.closestPointRange,q)),N)){for(tt=0;tt<N-1;)U[tt]!==U[tt+1]&&G.push(U[tt+1]),tt++;G[0]!==U[0]&&G.unshift(U[0]),U=G}}),d.ordinal.originalOrdinalRange||(d.ordinal.originalOrdinalRange=(U.length-1)*q),V&&Z&&(U.pop(),U.shift()),(N=U.length)>2){for(X=U[1]-U[0],Y=N-1;Y--&&!H;)U[Y+1]-U[Y]!==X&&(H=!0);!d.options.keepOrdinalPadding&&(U[0]-M>X||k-U[U.length-1]>X)&&(H=!0)}else d.options.overscroll&&(N===2?q=U[1]-U[0]:N===1?(q=d.ordinal.convertOverscroll(d.options.overscroll),U=[U[0],U[0]+q]):q=f.overscrollPointsRange);H||d.forceOrdinal?(d.options.overscroll&&(f.overscrollPointsRange=q,U=U.concat(f.getOverscrollPositions())),f.positions=U,j=d.ordinal2lin(Math.max(M,U[0]),!0),B=Math.max(d.ordinal2lin(Math.min(k,U[U.length-1]),!0),1),f.slope=W=(k-M)/(B-j),f.offset=M-j*W):(f.overscrollPointsRange=b(d.closestPointRange,f.overscrollPointsRange),f.positions=d.ordinal.slope=f.offset=void 0)}d.isOrdinal=z&&H,f.groupIntervalFactor=null}static findIndexOf(d,f,y){let M=0,k=d.length-1,T;for(;M<k;)d[T=Math.ceil((M+k)/2)]<=f?M=T:k=T-1;return d[M]===f||y?M:-1}getExtendedPositions(d=!0){let f=this,y=f.axis,M=y.constructor.prototype,k=y.chart,T=y.series[0]?.currentDataGrouping,z=T?T.count+T.unitName:"raw",N=d?y.ordinal.convertOverscroll(y.options.overscroll):0,G=y.getExtremes(),X,j,B=f.index;return B||(B=f.index={}),B[z]||((X={series:[],chart:k,forceOrdinal:!1,getExtremes:function(){return{min:G.dataMin,max:G.dataMax+N}},applyGrouping:M.applyGrouping,getGroupPixelWidth:M.getGroupPixelWidth,getTimeTicks:M.getTimeTicks,options:{ordinal:!0},ordinal:{getGroupIntervalFactor:this.getGroupIntervalFactor},ordinal2lin:M.ordinal2lin,getIndexOfPoint:M.getIndexOfPoint,val2lin:M.val2lin}).ordinal.axis=X,y.series.forEach(function(W){j={xAxis:X,xData:W.xData.slice(),chart:k,groupPixelWidth:W.groupPixelWidth,destroyGroupedData:i.noop,getProcessedData:r.prototype.getProcessedData,applyGrouping:r.prototype.applyGrouping,reserveSpace:r.prototype.reserveSpace,visible:W.visible},d&&(j.xData=j.xData.concat(f.getOverscrollPositions())),j.options={dataGrouping:T?{firstAnchor:W.options.dataGrouping?.firstAnchor,anchor:W.options.dataGrouping?.anchor,lastAnchor:W.options.dataGrouping?.firstAnchor,enabled:!0,forced:!0,approximation:"open",units:[[T.unitName,[T.count]]]}:{enabled:!1}},X.series.push(j),W.processData.apply(j)}),X.applyGrouping({hasExtremesChanged:!0}),j?.closestPointRange!==j?.basePointRange&&j.currentDataGrouping&&(X.forceOrdinal=!0),y.ordinal.beforeSetTickPositions.apply({axis:X}),!y.ordinal.originalOrdinalRange&&X.ordinal.originalOrdinalRange&&(y.ordinal.originalOrdinalRange=X.ordinal.originalOrdinalRange),B[z]=X.ordinal.positions),B[z]}getGroupIntervalFactor(d,f,y){let M=y.processedXData,k=M.length,T=[],z,N,G=this.groupIntervalFactor;if(!G){for(N=0;N<k-1;N++)T[N]=M[N+1]-M[N];T.sort(function(X,j){return X-j}),z=T[Math.floor(k/2)],d=Math.max(d,M[0]),f=Math.min(f,M[k-1]),this.groupIntervalFactor=G=k*z/(f-d)}return G}getIndexOfPoint(d,f){let y,M=this.axis,k=0,T=function(G){let{min:X,max:j}=M;return!!(g(X)&&g(j))&&G.points.some(B=>B.x>=X&&B.x<=j)};M.series.forEach(G=>{let X=G.points?.[0];g(X?.plotX)&&(X.plotX<y||!g(y))&&T(G)&&(y=X.plotX,k=X.x)}),y??(y=M.minPixelPadding);let z=M.translationSlope*(this.slope||M.closestPointRange||this.overscrollPointsRange),N=h((d-y)/z);return D.findIndexOf(f,k,!0)+N}getOverscrollPositions(){let d=this.axis,f=this.convertOverscroll(d.options.overscroll),y=this.overscrollPointsRange,M=[],k=d.dataMax;if(g(y))for(;k<=d.dataMax+f;)M.push(k+=y);return M}postProcessTickInterval(d){let f=this.axis,y=this.slope;return y?f.options.breaks?f.closestPointRange||d:d/(y/f.closestPointRange):d}convertOverscroll(d=0){let f=this,y=f.axis,M=function(k){return b(f.originalOrdinalRange,g(y.dataMax)&&g(y.dataMin)?y.dataMax-y.dataMin:0)*k};if(x(d)){let k=parseInt(d,10);if(/%$/.test(d))return M(k/100);if(/px/.test(d)){let T=Math.min(k,.9*y.len)/y.len;return M(T/(1-T))}return 0}return d}}m.Additions=D}(l||(l={})),l}),s(t,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%e %b %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#334eff",cursor:"pointer",fontSize:"0.8em"},labelStyle:{color:"#666666",fontSize:"0.8em"}}}}),s(t,"Stock/RangeSelector/RangeSelectorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Core/Utilities.js"]],function(e,i,r,n){let l,{defaultOptions:a}=e,{composed:h}=i,{addEvent:c,defined:g,extend:u,isNumber:p,merge:b,pick:v,pushUnique:x}=n,m=[];function E(){let _,P,F=this.range,A=F.type,D=this.max,C=this.chart.time,d=function(y,M){let k=A==="year"?"FullYear":"Month",T=new C.Date(y),z=C.get(k,T);return C.set(k,T,z+M),z===C.get(k,T)&&C.set("Date",T,0),T.getTime()-y};p(F)?(_=D-F,P=F):F&&(_=D+d(D,-(F.count||1)),this.chart&&this.chart.setFixedRange(D-_));let f=v(this.dataMin,Number.MIN_VALUE);return p(_)||(_=f),_<=f&&(_=f,P===void 0&&(P=d(_,F.count)),this.newMax=Math.min(_+P,v(this.dataMax,Number.MAX_VALUE))),p(D)?!p(F)&&F&&F._offsetMin&&(_+=F._offsetMin):_=void 0,_}function L(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new l(this))}function S(){let _=this.rangeSelector;if(_){p(_.deferredYTDClick)&&(_.clickButton(_.deferredYTDClick),delete _.deferredYTDClick);let P=_.options.verticalAlign;_.options.floating||(P==="bottom"?this.extraBottomMargin=!0:P==="middle"||(this.extraTopMargin=!0))}}function w(){let _,P=this.rangeSelector;if(!P)return;let F=this.xAxis[0].getExtremes(),A=this.legend,D=P&&P.options.verticalAlign;p(F.min)&&P.render(F.min,F.max),A.display&&D==="top"&&D===A.options.verticalAlign&&(_=b(this.spacingBox),A.options.layout==="vertical"?_.y=this.plotTop:_.y+=P.getHeight(),A.group.placed=!1,A.align(_))}function R(){for(let _=0,P=m.length;_<P;++_){let F=m[_];if(F[0]===this){F[1].forEach(A=>A()),m.splice(_,1);return}}}function O(){let _=this.rangeSelector;if(_){let P=_.getHeight();this.extraTopMargin&&(this.plotTop+=P),this.extraBottomMargin&&(this.marginBottom+=P)}}function I(_){let P=_.options.rangeSelector,F=this.extraBottomMargin,A=this.extraTopMargin,D=this.rangeSelector;if(P&&P.enabled&&!g(D)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=D=new l(this)),this.extraBottomMargin=!1,this.extraTopMargin=!1,D){let C=P&&P.verticalAlign||D.options&&D.options.verticalAlign;D.options.floating||(C==="bottom"?this.extraBottomMargin=!0:C==="middle"||(this.extraTopMargin=!0)),(this.extraBottomMargin!==F||this.extraTopMargin!==A)&&(this.isDirtyBox=!0)}}return{compose:function(_,P,F){if(l=F,x(h,"RangeSelector")){let A=P.prototype;_.prototype.minFromRange=E,c(P,"afterGetContainer",L),c(P,"beforeRender",S),c(P,"destroy",R),c(P,"getMargins",O),c(P,"redraw",w),c(P,"update",I),A.callbacks.push(w),u(a,{rangeSelector:r.rangeSelector}),u(a.lang,r.lang)}}}}),s(t,"Stock/RangeSelector/RangeSelector.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Stock/RangeSelector/RangeSelectorComposition.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"],t["Core/Axis/OrdinalAxis.js"]],function(e,i,r,n,l,a,h){let{defaultOptions:c}=i,{addEvent:g,createElement:u,css:p,defined:b,destroyObjectProperties:v,discardElement:x,extend:m,fireEvent:E,isNumber:L,merge:S,objectEach:w,pad:R,pick:O,pInt:I,splat:_}=a;class P{static compose(A,D){n.compose(A,D,P)}constructor(A){this.buttonOptions=P.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.init(A)}clickButton(A,D){let C=this.chart,d=this.buttonOptions[A],f=C.xAxis[0],y=C.scroller&&C.scroller.getUnionExtremes()||f||{},M=d.type,k=d.dataGrouping,T=y.dataMin,z=y.dataMax,N,G=f&&Math.round(Math.min(f.max,O(z,f.max))),X,j=d._range,B,W,Y,U=!0;if(T!==null&&z!==null){if(this.setSelected(A),k&&(this.forcedDataGrouping=!0,e.prototype.setDataGrouping.call(f||{chart:this.chart},k,!1),this.frozenStates=d.preserveDataGrouping),M==="month"||M==="year")f?(W={range:d,max:G,chart:C,dataMin:T,dataMax:z},N=f.minFromRange.call(W),L(W.newMax)&&(G=W.newMax),U=!1):j=d;else if(j)G=Math.min((N=Math.max(G-j,T))+j,z),U=!1;else if(M==="ytd")if(f)(z===void 0||T===void 0)&&(T=Number.MAX_VALUE,z=Number.MIN_VALUE,C.series.forEach(q=>{let H=q.xData;H&&(T=Math.min(H[0],T),z=Math.max(H[H.length-1],z))}),D=!1),N=B=(Y=this.getYTDExtremes(z,T,C.time.useUTC)).min,G=Y.max;else{this.deferredYTDClick=A;return}else M==="all"&&f&&(C.navigator&&C.navigator.baseSeries[0]&&(C.navigator.baseSeries[0].xAxis.options.range=void 0),N=T,G=z);if(U&&d._offsetMin&&b(N)&&(N+=d._offsetMin),d._offsetMax&&b(G)&&(G+=d._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=A+1),f)f.setExtremes(N,G,O(D,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:d}),C.setFixedRange(d._range);else{X=_(C.options.xAxis)[0];let q=g(C,"afterGetAxes",function(){let H=C.xAxis[0];H.range=H.options.range=j,H.min=H.options.min=B});g(C,"load",function(){let H=C.xAxis[0];C.setFixedRange(d._range),H.options.range=X.range,H.options.min=X.min,q()})}E(this,"afterBtnClick")}}setSelected(A){this.selected=this.options.selected=A}init(A){let D=this,C=A.options.rangeSelector,d=C.buttons||D.defaultButtons.slice(),f=C.selected,y=function(){let M=D.minInput,k=D.maxInput;M&&M.blur&&E(M,"blur"),k&&k.blur&&E(k,"blur")};D.chart=A,D.options=C,D.buttons=[],D.buttonOptions=d,this.eventsToUnbind=[],this.eventsToUnbind.push(g(A.container,"mousedown",y)),this.eventsToUnbind.push(g(A,"resize",y)),d.forEach(D.computeButtonRange),f!==void 0&&d[f]&&this.clickButton(f,!1),this.eventsToUnbind.push(g(A,"load",function(){A.xAxis&&A.xAxis[0]&&g(A.xAxis[0],"setExtremes",function(M){L(this.max)&&L(this.min)&&this.max-this.min!==A.fixedRange&&M.trigger!=="rangeSelectorButton"&&M.trigger!=="updatedData"&&D.forcedDataGrouping&&!D.frozenStates&&this.setDataGrouping(!1,!1)})})),this.createElements()}updateButtonStates(){let A=this,D=this.chart,C=this.dropdown,d=this.dropdownLabel,f=D.xAxis[0],y=Math.round(f.max-f.min),M=!f.hasVisibleSeries,k=24*36e5,T=D.scroller&&D.scroller.getUnionExtremes()||f,z=T.dataMin,N=T.dataMax,G=A.getYTDExtremes(N,z,D.time.useUTC),X=G.min,j=G.max,B=A.selected,W=A.options.allButtonsEnabled,Y=Array(A.buttonOptions.length).fill(0),U=L(B),q=A.buttons,H=!1,V=null;A.buttonOptions.forEach((Z,K)=>{let J=Z._range,tt=Z.type,$=Z.count||1,Q=Z._offsetMax-Z._offsetMin,et=K===B,it=J>N-z,st=J<f.minRange,rt=!1,nt=J===y;if(et&&it&&(H=!0),f.isOrdinal&&f.ordinal?.positions&&J&&y<J){let ct=f.ordinal.positions,ht=h.Additions.findIndexOf(ct,f.min,!0),lt=Math.min(h.Additions.findIndexOf(ct,f.max,!0)+1,ct.length-1);ct[lt]-ct[ht]>J&&(nt=!0)}else(tt==="month"||tt==="year")&&y+36e5>={month:28,year:365}[tt]*k*$-Q&&y-36e5<={month:31,year:366}[tt]*k*$+Q?nt=!0:tt==="ytd"?(nt=j-X+Q===y,rt=!et):tt==="all"&&(nt=f.max-f.min>=N-z);let ot=!W&&!(H&&tt==="all")&&(it||st||M),at=H&&tt==="all"||!rt&&nt||et&&A.frozenStates;ot?Y[K]=3:at&&(!U||K===B)&&(V=K)}),V!==null?(Y[V]=2,A.setSelected(V)):(A.setSelected(),d&&(d.setState(0),d.attr({text:(c.lang.rangeSelectorZoom||"")+" \u25BE"})));for(let Z=0;Z<Y.length;Z++){let K=Y[Z],J=q[Z];if(J.state!==K&&(J.setState(K),C)){C.options[Z+1].disabled=K===3,K===2&&(d&&(d.setState(2),d.attr({text:A.buttonOptions[Z].text+" \u25BE"})),C.selectedIndex=Z+1);let tt=d.getBBox();p(C,{width:`${tt.width}px`,height:`${tt.height}px`})}}}computeButtonRange(A){let D=A.type,C=A.count||1,d={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};d[D]?A._range=d[D]*C:(D==="month"||D==="year")&&(A._range=24*{month:30,year:365}[D]*36e5*C),A._offsetMin=O(A.offsetMin,0),A._offsetMax=O(A.offsetMax,0),A._range+=A._offsetMax-A._offsetMin}getInputValue(A){let D=A==="min"?this.minInput:this.maxInput,C=this.chart.options.rangeSelector,d=this.chart.time;return D?(D.type==="text"&&C.inputDateParser||this.defaultInputDateParser)(D.value,d.useUTC,d):0}setInputValue(A,D){let C=this.options,d=this.chart.time,f=A==="min"?this.minInput:this.maxInput,y=A==="min"?this.minDateBox:this.maxDateBox;if(f){let M=f.getAttribute("data-hc-time"),k=b(M)?Number(M):void 0;if(b(D)){let T=k;b(T)&&f.setAttribute("data-hc-time-previous",T),f.setAttribute("data-hc-time",D),k=D}f.value=d.dateFormat(this.inputTypeFormats[f.type]||C.inputEditDateFormat,k),y&&y.attr({text:d.dateFormat(C.inputDateFormat,k)})}}setInputExtremes(A,D,C){let d=A==="min"?this.minInput:this.maxInput;if(d){let f=this.inputTypeFormats[d.type],y=this.chart.time;if(f){let M=y.dateFormat(f,D);d.min!==M&&(d.min=M);let k=y.dateFormat(f,C);d.max!==k&&(d.max=k)}}}showInput(A){let D=A==="min"?this.minDateBox:this.maxDateBox,C=A==="min"?this.minInput:this.maxInput;if(C&&D&&this.inputGroup){let d=C.type==="text",{translateX:f=0,translateY:y=0}=this.inputGroup,{x:M=0,width:k=0,height:T=0}=D,{inputBoxWidth:z}=this.options;p(C,{width:d?k+(z?-2:20)+"px":"auto",height:T-2+"px",border:"2px solid silver"}),d&&z?p(C,{left:f+M+"px",top:y+"px"}):p(C,{left:Math.min(Math.round(M+f-(C.offsetWidth-k)/2),this.chart.chartWidth-C.offsetWidth)+"px",top:y-(C.offsetHeight-T)/2+"px"})}}hideInput(A){let D=A==="min"?this.minInput:this.maxInput;D&&p(D,{top:"-9999em",border:0,width:"1px",height:"1px"})}defaultInputDateParser(A,D,C){let d=A.split("/").join("-").split(" ").join("T");if(d.indexOf("T")===-1&&(d+="T00:00"),D)d+="Z";else{let y;if(r.isSafari&&!((y=d).length>6&&(y.lastIndexOf("-")===y.length-6||y.lastIndexOf("+")===y.length-6))){let M=new Date(d).getTimezoneOffset()/60;d+=M<=0?`+${R(-M)}:00`:`-${R(M)}:00`}}let f=Date.parse(d);if(!L(f)){let y=A.split("-");f=Date.UTC(I(y[0]),I(y[1])-1,I(y[2]))}return C&&D&&L(f)&&(f+=C.getTimezoneOffset(f)),f}drawInput(A){let{chart:D,div:C,inputGroup:d}=this,f=this,y=D.renderer.style||{},M=D.renderer,k=D.options.rangeSelector,T=c.lang,z=A==="min";function N(Y){let{maxInput:U,minInput:q}=f,H=D.xAxis[0],V=D.scroller?.getUnionExtremes()||H,Z=V.dataMin,K=V.dataMax,J=D.xAxis[0].getExtremes()[Y],tt=f.getInputValue(Y);L(tt)&&tt!==J&&(z&&U&&L(Z)?tt>Number(U.getAttribute("data-hc-time"))?tt=void 0:tt<Z&&(tt=Z):q&&L(K)&&(tt<Number(q.getAttribute("data-hc-time"))?tt=void 0:tt>K&&(tt=K)),tt!==void 0&&H.setExtremes(z?tt:H.min,z?H.max:tt,void 0,void 0,{trigger:"rangeSelectorInput"}))}let G=T[z?"rangeSelectorFrom":"rangeSelectorTo"]||"",X=M.label(G,0).addClass("highcharts-range-label").attr({padding:G?2:0,height:G?k.inputBoxHeight:0}).add(d),j=M.label("",0).addClass("highcharts-range-input").attr({padding:2,width:k.inputBoxWidth,height:k.inputBoxHeight,"text-align":"center"}).on("click",function(){f.showInput(A),f[A+"Input"].focus()});D.styledMode||j.attr({stroke:k.inputBoxBorderColor,"stroke-width":1}),j.add(d);let B=u("input",{name:A,className:"highcharts-range-selector"},void 0,C);B.setAttribute("type",function(Y){if(Y.indexOf("%L")!==-1)return"text";let U=["a","A","d","e","w","b","B","m","o","y","Y"].some(H=>Y.indexOf("%"+H)!==-1),q=["H","k","I","l","M","S"].some(H=>Y.indexOf("%"+H)!==-1);return U&&q?"datetime-local":U?"date":q?"time":"text"}(k.inputDateFormat||"%e %b %Y")),D.styledMode||(X.css(S(y,k.labelStyle)),j.css(S({color:"#333333"},y,k.inputStyle)),p(B,m({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:y.fontSize,fontFamily:y.fontFamily,top:"-9999em"},k.inputStyle))),B.onfocus=()=>{f.showInput(A)},B.onblur=()=>{B===r.doc.activeElement&&N(A),f.hideInput(A),f.setInputValue(A),B.blur()};let W=!1;return B.onchange=()=>{W||(N(A),f.hideInput(A),B.blur())},B.onkeypress=Y=>{Y.keyCode===13&&N(A)},B.onkeydown=Y=>{W=!0,(Y.key==="ArrowUp"||Y.key==="ArrowDown"||Y.key==="Tab")&&N(A)},B.onkeyup=()=>{W=!1},{dateBox:j,input:B,label:X}}getPosition(){let A=this.chart,D=A.options.rangeSelector,C=D.verticalAlign==="top"?A.plotTop-A.axisOffset[0]:0;return{buttonTop:C+D.buttonPosition.y,inputTop:C+D.inputPosition.y-10}}getYTDExtremes(A,D,C){let d=this.chart.time,f=new d.Date(A),y=d.get("FullYear",f),M=C?d.Date.UTC(y,0,1):+new d.Date(y,0,1),k=f.getTime();return{max:Math.min(A||k,k),min:Math.max(D,M)}}createElements(){let A=this.chart,D=A.renderer,C=A.container,d=A.options,f=d.rangeSelector,y=f.inputEnabled,M=O(d.chart.style?.zIndex,0)+1;if(f.enabled!==!1&&(this.group=D.g("range-selector-group").attr({zIndex:7}).add(),this.div=u("div",void 0,{position:"relative",height:0,zIndex:M}),this.buttonOptions.length&&this.renderButtons(),C.parentNode&&C.parentNode.insertBefore(this.div,C),y)){this.inputGroup=D.g("input-group").add(this.group);let k=this.drawInput("min");this.minDateBox=k.dateBox,this.minLabel=k.label,this.minInput=k.input;let T=this.drawInput("max");this.maxDateBox=T.dateBox,this.maxLabel=T.label,this.maxInput=T.input}}render(A,D){let C=this.chart,d=C.options.rangeSelector,f=d.inputEnabled;if(d.enabled!==!1){if(f){this.setInputValue("min",A),this.setInputValue("max",D);let y=C.scroller&&C.scroller.getUnionExtremes()||C.xAxis[0]||{};if(b(y.dataMin)&&b(y.dataMax)){let M=C.xAxis[0].minRange||0;this.setInputExtremes("min",y.dataMin,Math.min(y.dataMax,this.getInputValue("max"))-M),this.setInputExtremes("max",Math.max(y.dataMin,this.getInputValue("min"))+M,y.dataMax)}if(this.inputGroup){let M=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(k=>{if(k){let{width:T}=k.getBBox();T&&(k.attr({x:M}),M+=T+d.inputSpacing)}})}}this.alignElements(),this.updateButtonStates()}}renderButtons(){let{buttons:A,chart:D,options:C}=this,d=c.lang,f=D.renderer,y=S(C.buttonTheme),M=y&&y.states,k=y.width||28;delete y.width,delete y.states,this.buttonGroup=f.g("range-selector-buttons").add(this.group);let T=this.dropdown=u("select",void 0,{position:"absolute",padding:0,border:0,cursor:"pointer",opacity:1e-4},this.div),z=D.userOptions.rangeSelector?.buttonTheme;this.dropdownLabel=f.button("",0,0,()=>{},S(y,{"stroke-width":O(y["stroke-width"],0),width:"auto",paddingLeft:O(C.buttonTheme.paddingLeft,z?.padding,8),paddingRight:O(C.buttonTheme.paddingRight,z?.padding,8)}),M&&M.hover,M&&M.select,M&&M.disabled).hide().add(this.group),g(T,"touchstart",()=>{T.style.fontSize="16px"});let N=r.isMS?"mouseover":"mouseenter",G=r.isMS?"mouseout":"mouseleave";g(T,N,()=>{E(this.dropdownLabel.element,N)}),g(T,G,()=>{E(this.dropdownLabel.element,G)}),g(T,"change",()=>{E(this.buttons[T.selectedIndex-1].element,"click")}),this.zoomText=f.label(d.rangeSelectorZoom||"",0).attr({padding:C.buttonTheme.padding,height:C.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(C.labelStyle),y["stroke-width"]=O(y["stroke-width"],0)),u("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,T),this.buttonOptions.forEach((X,j)=>{u("option",{textContent:X.title||X.text},void 0,T),A[j]=f.button(X.text,0,0,B=>{let W,Y=X.events&&X.events.click;Y&&(W=Y.call(X,B)),W!==!1&&this.clickButton(j),this.isActive=!0},y,M&&M.hover,M&&M.select,M&&M.disabled).attr({"text-align":"center",width:k}).add(this.buttonGroup),X.title&&A[j].attr("title",X.title)})}alignElements(){let{buttonGroup:A,buttons:D,chart:C,group:d,inputGroup:f,options:y,zoomText:M}=this,k=C.options,T=k.exporting&&k.exporting.enabled!==!1&&k.navigation&&k.navigation.buttonOptions,{buttonPosition:z,inputPosition:N,verticalAlign:G}=y,X=(B,W)=>T&&this.titleCollision(C)&&G==="top"&&W.align==="right"&&W.y-B.getBBox().height-12<(T.y||0)+(T.height||0)+C.spacing[0]?-40:0,j=C.plotLeft;if(d&&z&&N){let B=z.x-C.spacing[3];if(A){if(this.positionButtons(),!this.initialButtonGroupWidth){let J=0;M&&(J+=M.getBBox().width+5),D.forEach((tt,$)=>{J+=tt.width||0,$!==D.length-1&&(J+=y.buttonSpacing)}),this.initialButtonGroupWidth=J}j-=C.spacing[3];let K=X(A,z);this.alignButtonGroup(K),this.buttonGroup?.translateY&&this.dropdownLabel.attr({y:this.buttonGroup.translateY}),d.placed=A.placed=C.hasLoaded}let W=0;f&&(W=X(f,N),N.align==="left"?B=j:N.align==="right"&&(B=-Math.max(C.axisOffset[1],-W)),f.align({y:N.y,width:f.getBBox().width,align:N.align,x:N.x+B-2},!0,C.spacingBox),f.placed=C.hasLoaded),this.handleCollision(W),d.align({verticalAlign:G},!0,C.spacingBox);let Y=d.alignAttr.translateY,U=d.getBBox().height+20,q=0;if(G==="bottom"){let K=C.legend&&C.legend.options;q=Y-(U=U+(K&&K.verticalAlign==="bottom"&&K.enabled&&!K.floating?C.legend.legendHeight+O(K.margin,10):0)-20)-(y.floating?0:y.y)-(C.titleOffset?C.titleOffset[2]:0)-10}G==="top"?(y.floating&&(q=0),C.titleOffset&&C.titleOffset[0]&&(q=C.titleOffset[0]),q+=C.margin[0]-C.spacing[0]||0):G==="middle"&&(N.y===z.y?q=Y:(N.y||z.y)&&(N.y<0||z.y<0?q-=Math.min(N.y,z.y):q=Y-U)),d.translate(y.x,y.y+Math.floor(q));let{minInput:H,maxInput:V,dropdown:Z}=this;y.inputEnabled&&H&&V&&(H.style.marginTop=d.translateY+"px",V.style.marginTop=d.translateY+"px"),Z&&(Z.style.marginTop=d.translateY+"px")}}alignButtonGroup(A,D){let{chart:C,options:d,buttonGroup:f}=this,{buttonPosition:y}=d,M=C.plotLeft-C.spacing[3],k=y.x-C.spacing[3];y.align==="right"?k+=A-M:y.align==="center"&&(k-=M/2),f&&f.align({y:y.y,width:O(D,this.initialButtonGroupWidth),align:y.align,x:k},!0,C.spacingBox)}positionButtons(){let{buttons:A,chart:D,options:C,zoomText:d}=this,f=D.hasLoaded?"animate":"attr",{buttonPosition:y}=C,M=D.plotLeft,k=M;d&&d.visibility!=="hidden"&&(d[f]({x:O(M+y.x,M)}),k+=y.x+d.getBBox().width+5);for(let T=0,z=this.buttonOptions.length;T<z;++T)A[T].visibility!=="hidden"?(A[T][f]({x:k}),k+=(A[T].width||0)+C.buttonSpacing):A[T][f]({x:M})}handleCollision(A){let{chart:D,buttonGroup:C,inputGroup:d}=this,{buttonPosition:f,dropdown:y,inputPosition:M}=this.options,k=()=>{let N=0;return this.buttons.forEach(G=>{let X=G.getBBox();X.width>N&&(N=X.width)}),N},T=N=>{if(d?.alignOptions&&C){let G=d.alignAttr.translateX+d.alignOptions.x-A+d.getBBox().x+2,X=d.alignOptions.width||0,j=C.alignAttr.translateX+C.getBBox().x;return j+N>G&&G+X>j&&f.y<M.y+d.getBBox().height}return!1},z=()=>{d&&C&&d.attr({translateX:d.alignAttr.translateX+(D.axisOffset[1]>=-A?0:-A),translateY:d.alignAttr.translateY+C.getBBox().height+10})};if(C){if(y==="always"){this.collapseButtons(),T(k())&&z();return}y==="never"&&this.expandButtons()}d&&C?M.align===f.align||T(this.initialButtonGroupWidth+20)?y==="responsive"?(this.collapseButtons(),T(k())&&z()):z():y==="responsive"&&this.expandButtons():C&&y==="responsive"&&(this.initialButtonGroupWidth>D.plotWidth?this.collapseButtons():this.expandButtons())}collapseButtons(){let{buttons:A,zoomText:D}=this;this.isCollapsed!==!0&&(this.isCollapsed=!0,D.hide(),A.forEach(C=>void C.hide()),this.showDropdown())}expandButtons(){let{buttons:A,zoomText:D}=this;this.isCollapsed!==!1&&(this.isCollapsed=!1,this.hideDropdown(),D.show(),A.forEach(C=>void C.show()),this.positionButtons())}showDropdown(){let{buttonGroup:A,chart:D,dropdownLabel:C,dropdown:d}=this;if(A&&d){let{translateX:f=0,translateY:y=0}=A,M=D.plotLeft+f;C.attr({x:M,y}).show(),p(d,{left:M+"px",top:y+"px",visibility:"inherit"}),this.hasVisibleDropdown=!0}}hideDropdown(){let{dropdown:A}=this;A&&(this.dropdownLabel.hide(),p(A,{visibility:"hidden",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)}getHeight(){let A=this.options,D=this.group,C=A.inputPosition,d=A.buttonPosition,f=A.y,y=d.y,M=C.y,k=0;return A.height?A.height:(this.alignElements(),k=D?D.getBBox(!0).height+13+f:0,(M<0&&y<0||M>0&&y>0)&&(k+=Math.abs(Math.min(M,y))),k)}titleCollision(A){return!(A.options.title.text||A.options.subtitle.text)}update(A,D=!0){let C=this.chart;S(!0,C.options.rangeSelector,A),this.destroy(),this.init(C),D&&this.render()}destroy(){let A=this,D=A.minInput,C=A.maxInput;A.eventsToUnbind&&(A.eventsToUnbind.forEach(d=>d()),A.eventsToUnbind=void 0),v(A.buttons),D&&(D.onfocus=D.onblur=D.onchange=null),C&&(C.onfocus=C.onblur=C.onchange=null),w(A,function(d,f){d&&f!=="chart"&&(d instanceof l?d.destroy():d instanceof window.HTMLElement&&x(d)),d!==P.prototype[f]&&(A[f]=null)},this)}}return m(P.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),P}),s(t,"Core/Chart/StockChart.js",[t["Core/Chart/Chart.js"],t["Core/Templating.js"],t["Core/Defaults.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c){let{format:g}=i,{getOptions:u}=r,{setFixedRange:p}=h,{addEvent:b,clamp:v,crisp:x,defined:m,extend:E,find:L,isNumber:S,isString:w,merge:R,pick:O,splat:I}=c;function _(A,D,C){return A==="xAxis"?{minPadding:0,maxPadding:0,overscroll:0,ordinal:!0}:A==="yAxis"?{labels:{y:-2},opposite:C.opposite??D.opposite??!0,showLastLabel:!!(D.categories||D.type==="category"),title:{text:C.title?.text!=="Values"?C.title?.text:null}}:{}}function P(A,D){if(A==="xAxis"){let C=O(D.navigator&&D.navigator.enabled,n.enabled,!0),d={type:"datetime",categories:void 0};return C&&(d.startOnTick=!1,d.endOnTick=!1),d}return{}}class F extends e{init(D,C){let d=u(),f=D.xAxis,y=D.yAxis,M=O(D.navigator&&D.navigator.enabled,n.enabled,!0);D.xAxis=D.yAxis=void 0;let k=R({chart:{panning:{enabled:!0,type:"x"},zooming:{pinchType:"x",mouseWheel:{type:"x"}}},navigator:{enabled:M},scrollbar:{enabled:O(a.enabled,!0)},rangeSelector:{enabled:O(l.rangeSelector.enabled,!0)},title:{text:null},tooltip:{split:O(d.tooltip&&d.tooltip.split,!0),crosshairs:!0},legend:{enabled:!1}},D,{isStock:!0});D.xAxis=f,D.yAxis=y,k.xAxis=I(D.xAxis||{}).map(T=>R(_("xAxis",T,d.xAxis),T,P("xAxis",D))),k.yAxis=I(D.yAxis||{}).map(T=>R(_("yAxis",T,d.yAxis),T)),super.init(k,C)}createAxis(D,C){return C.axis=R(_(D,C.axis,u()[D]),C.axis,P(D,this.userOptions)),super.createAxis(D,C)}}return b(e,"update",function(A){let D=A.options;"scrollbar"in D&&this.navigator&&(R(!0,this.options.scrollbar,D.scrollbar),this.navigator.update({}),delete D.scrollbar)}),function(A){function D(z){if(!this.crosshair||!this.crosshair.label||!this.crosshair.label.enabled||!this.cross||!S(this.min)||!S(this.max))return;let N=this.chart,G=this.logarithmic,X=this.crosshair.label,j=this.horiz,B=this.opposite,W=this.left,Y=this.top,U=this.width,q=this.options.tickPosition==="inside",H=this.crosshair.snap!==!1,V=z.e||this.cross&&this.cross.e,Z=z.point,K=this.crossLabel,J,tt,$=X.format,Q="",et,it=0,st=this.min,rt=this.max;G&&(st=G.lin2log(this.min),rt=G.lin2log(this.max));let nt=j?"center":B?this.labelAlign==="right"?"right":"left":this.labelAlign==="left"?"left":"center";K||(K=this.crossLabel=N.renderer.label("",0,void 0,X.shape||"callout").addClass("highcharts-crosshair-label highcharts-color-"+(Z&&Z.series?Z.series.colorIndex:this.series[0]&&this.series[0].colorIndex)).attr({align:X.align||nt,padding:O(X.padding,8),r:O(X.borderRadius,3),zIndex:2}).add(this.labelGroup),N.styledMode||K.attr({fill:X.backgroundColor||Z&&Z.series&&Z.series.color||"#666666",stroke:X.borderColor||"","stroke-width":X.borderWidth||0}).css(E({color:"#ffffff",fontWeight:"normal",fontSize:"0.7em",textAlign:"center"},X.style||{}))),j?(J=H?(Z.plotX||0)+W:V.chartX,tt=Y+(B?0:this.height)):(J=W+this.offset+(B?U:0),tt=H?(Z.plotY||0)+Y:V.chartY),$||X.formatter||(this.dateTime&&(Q="%b %d, %Y"),$="{value"+(Q?":"+Q:"")+"}");let ot=H?this.isXAxis?Z.x:Z.y:this.toValue(j?V.chartX:V.chartY),at=Z&&Z.series?Z.series.isPointInside(Z):S(ot)&&ot>st&&ot<rt,ct="";$?ct=g($,{value:ot},N):X.formatter&&S(ot)&&(ct=X.formatter.call(this,ot)),K.attr({text:ct,x:J,y:tt,visibility:at?"inherit":"hidden"});let ht=K.getBBox();!S(K.x)||j||B||(J=K.x-ht.width/2),S(K.y)&&(j?(q&&!B||!q&&B)&&(tt=K.y-ht.height):tt=K.y-ht.height/2),et=j?{left:W,right:W+this.width}:{left:this.labelAlign==="left"?W:0,right:this.labelAlign==="right"?W+this.width:N.chartWidth};let lt=K.translateX||0;lt<et.left&&(it=et.left-lt),lt+ht.width>=et.right&&(it=-(lt+ht.width-et.right)),K.attr({x:J+it,y:tt,anchorX:j?J:this.opposite?0:N.chartWidth,anchorY:j?this.opposite?N.chartHeight:0:tt+ht.height/2})}function C(){this.crossLabel&&(this.crossLabel=this.crossLabel.hide())}function d(z){let N=this.chart,G=this.options,X=N._labelPanes=N._labelPanes||{},j=G.labels;if(N.options.isStock&&this.coll==="yAxis"){let B=G.top+","+G.height;!X[B]&&j.enabled&&(j.distance===15&&this.side===1&&(j.distance=0),j.align===void 0&&(j.align="right"),X[B]=this,z.align="right",z.preventDefault())}}function f(){let z=this.chart,N=this.options&&this.options.top+","+this.options.height;N&&z._labelPanes&&z._labelPanes[N]===this&&delete z._labelPanes[N]}function y(z){let N=this,G=N.isLinked&&!N.series&&N.linkedParent?N.linkedParent.series:N.series,X=N.chart,j=X.renderer,B=N.left,W=N.top,Y=[],U=z.translatedValue,q=z.value,H=z.force,V,Z,K,J,tt=[],$,Q;if(X.options.isStock&&z.acrossPanes!==!1&&N.coll==="xAxis"||N.coll==="yAxis"){for(let et of(z.preventDefault(),tt=(it=>{let st=it==="xAxis"?"yAxis":"xAxis",rt=N.options[st];return S(rt)?[X[st][rt]]:w(rt)?[X.get(rt)]:G.map(nt=>nt[st])})(N.coll),N.isXAxis?X.yAxis:X.xAxis))if(!m(et.options.id)||et.options.id.indexOf("navigator")===-1){let it=et.isXAxis?"yAxis":"xAxis";N===(m(et.options[it])?X[it][et.options[it]]:X[it][0])&&tt.push(et)}for(let et of($=tt.length?[]:[N.isXAxis?X.yAxis[0]:X.xAxis[0]],tt))$.indexOf(et)!==-1||L($,it=>it.pos===et.pos&&it.len===et.len)||$.push(et);if(S(Q=O(U,N.translate(q||0,void 0,void 0,z.old))))if(N.horiz)for(let et of $){let it;J=(Z=et.pos)+et.len,V=K=Math.round(Q+N.transB),H!=="pass"&&(V<B||V>B+N.width)&&(H?V=K=v(V,B,B+N.width):it=!0),it||Y.push(["M",V,Z],["L",K,J])}else for(let et of $){let it;K=(V=et.pos)+et.len,Z=J=Math.round(W+N.height-Q),H!=="pass"&&(Z<W||Z>W+N.height)&&(H?Z=J=v(Z,W,W+N.height):it=!0),it||Y.push(["M",V,Z],["L",K,J])}z.path=Y.length>0?j.crispPolyLine(Y,z.lineWidth||1):void 0}}function M(z){if(this.chart.options.isStock){let N;this.is("column")||this.is("columnrange")?N={borderWidth:0,shadow:!1}:this.is("scatter")||this.is("sma")||(N={marker:{enabled:!1,radius:2}}),N&&(z.plotOptions[this.type]=R(z.plotOptions[this.type],N))}}function k(){let z=this.chart,N=this.options.dataGrouping;return this.allowDG!==!1&&N&&O(N.enabled,z.options.isStock)}function T(z,N){for(let G=0;G<z.length;G+=2){let X=z[G],j=z[G+1];m(X[1])&&X[1]===j[1]&&(X[1]=j[1]=x(X[1],N)),m(X[2])&&X[2]===j[2]&&(X[2]=j[2]=x(X[2],N))}return z}A.compose=function(z,N,G,X){let j=G.prototype;j.forceCropping||(b(N,"afterDrawCrosshair",D),b(N,"afterHideCrosshair",C),b(N,"autoLabelAlign",d),b(N,"destroy",f),b(N,"getPlotLinePath",y),z.prototype.setFixedRange=p,j.forceCropping=k,b(G,"setOptions",M),X.prototype.crispPolyLine=T)},A.stockChart=function(z,N,G){return new A(z,N,G)}}(F||(F={})),F}),s(t,"Series/HLC/HLCPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(e){let{column:{prototype:{pointClass:i}}}=e.seriesTypes;return class extends i{}}),s(t,"Series/HLC/HLCSeriesDefaults.js",[],function(){return{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b> {series.name}</b><br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0}}),s(t,"Series/HLC/HLCSeries.js",[t["Series/HLC/HLCPoint.js"],t["Series/HLC/HLCSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n){let{column:l}=r.seriesTypes,{crisp:a,extend:h,merge:c}=n;class g extends l{extendStem(p,b,v){let x=p[0],m=p[1];typeof x[2]=="number"&&(x[2]=Math.max(v+b,x[2])),typeof m[2]=="number"&&(m[2]=Math.min(v-b,m[2]))}getPointPath(p,b){let v=b.strokeWidth(),x=p.series,m=a(p.plotX||0,v),E=Math.round(p.shapeArgs.width/2),L=[["M",m,Math.round(p.yBottom)],["L",m,Math.round(p.plotHigh)]];if(p.close!==null){let S=a(p.plotClose,v);L.push(["M",m,S],["L",m+E,S]),x.extendStem(L,v/2,S)}return L}drawSinglePoint(p){let b=p.series,v=b.chart,x,m=p.graphic;p.plotY!==void 0&&(m||(p.graphic=m=v.renderer.path().add(b.group)),v.styledMode||m.attr(b.pointAttribs(p,p.selected&&"select")),x=b.getPointPath(p,m),m[m?"animate":"attr"]({d:x}).addClass(p.getClassName(),!0))}drawPoints(){this.points.forEach(this.drawSinglePoint)}init(){super.init.apply(this,arguments),this.options.stacking=void 0}pointAttribs(p,b){let v=super.pointAttribs.call(this,p,b);return delete v.fill,v}toYData(p){return[p.high,p.low,p.close]}translate(){let p=this,b=p.yAxis,v=this.pointArrayMap&&this.pointArrayMap.slice()||[],x=v.map(m=>`plot${m.charAt(0).toUpperCase()+m.slice(1)}`);x.push("yBottom"),v.push("low"),super.translate.apply(p),p.points.forEach(function(m){v.forEach(function(E,L){let S=m[E];S!==null&&(p.dataModify&&(S=p.dataModify.modifyValue(S)),m[x[L]]=b.toPixels(S,!0))}),m.tooltipPos[1]=m.plotHigh+b.pos-p.chart.plotTop})}}return g.defaultOptions=c(l.defaultOptions,i),h(g.prototype,{pointClass:e,animate:null,directTouch:!1,pointArrayMap:["high","low","close"],pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointValKey:"close"}),r.registerSeriesType("hlc",g),g}),s(t,"Series/OHLC/OHLCPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(e){let{seriesTypes:{hlc:i}}=e;class r extends i.prototype.pointClass{getClassName(){return super.getClassName.call(this)+(this.open<this.close?" highcharts-point-up":" highcharts-point-down")}resolveUpColor(){this.open<this.close&&!this.options.color&&this.series.options.upColor&&(this.color=this.series.options.upColor)}resolveColor(){super.resolveColor(),this.series.is("heikinashi")||this.resolveUpColor()}getZone(){let l=super.getZone();return this.resolveUpColor(),l}applyOptions(){return super.applyOptions.apply(this,arguments),this.resolveColor&&this.resolveColor(),this}}return r}),s(t,"Series/OHLC/OHLCSeriesDefaults.js",[],function(){return{tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'}}}),s(t,"Series/OHLC/OHLCSeries.js",[t["Core/Globals.js"],t["Series/OHLC/OHLCPoint.js"],t["Series/OHLC/OHLCSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l){let{composed:a}=e,{hlc:h}=n.seriesTypes,{addEvent:c,crisp:g,extend:u,merge:p,pushUnique:b}=l;function v(E){let L=E.options,S=L.dataGrouping;S&&L.useOhlcData&&L.id!=="highcharts-navigator-series"&&(S.approximation="ohlc")}function x(E){let L=E.options;L.useOhlcData&&L.id!=="highcharts-navigator-series"&&u(this,{pointValKey:m.prototype.pointValKey,pointArrayMap:m.prototype.pointArrayMap,toYData:m.prototype.toYData})}class m extends h{static compose(L,...S){b(a,"OHLCSeries")&&(c(L,"afterSetOptions",v),c(L,"init",x))}getPointPath(L,S){let w=super.getPointPath(L,S),R=S.strokeWidth(),O=g(L.plotX||0,R),I=Math.round(L.shapeArgs.width/2);if(L.open!==null){let _=g(L.plotOpen,R);w.push(["M",O,_],["L",O-I,_]),super.extendStem(w,R/2,_)}return w}pointAttribs(L,S){let w=super.pointAttribs.call(this,L,S),R=this.options;return delete w.fill,!L.options.color&&R.upColor&&L.open<L.close&&(w.stroke=R.upColor),w}toYData(L){return[L.open,L.high,L.low,L.close]}}return m.defaultOptions=p(h.defaultOptions,r),u(m.prototype,{pointClass:i,pointArrayMap:["open","high","low","close"]}),n.registerSeriesType("ohlc",m),m}),s(t,"Series/Candlestick/CandlestickSeriesDefaults.js",[],function(){return{states:{hover:{lineWidth:2}},threshold:null,lineColor:"#000000",lineWidth:1,upColor:"#ffffff",stickyTracking:!0}}),s(t,"Series/Candlestick/CandlestickSeries.js",[t["Series/Candlestick/CandlestickSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r){let{column:n,ohlc:l}=i.seriesTypes,{crisp:a,merge:h}=r;class c extends l{pointAttribs(u,p){let b=n.prototype.pointAttribs.call(this,u,p),v=this.options,x=u.open<u.close,m=v.lineColor||this.color,E=u.color||this.color;if(b["stroke-width"]=v.lineWidth,b.fill=u.options.color||x&&v.upColor||E,b.stroke=u.options.lineColor||x&&v.upLineColor||m,p){let L=v.states[p];b.fill=L.color||b.fill,b.stroke=L.lineColor||b.stroke,b["stroke-width"]=L.lineWidth||b["stroke-width"]}return b}drawPoints(){let u=this.points,p=this.chart,b=this.yAxis.reversed;for(let v of u){let x=v.graphic,m,E,L,S,w,R,O,I,_,P=!x;if(v.plotY!==void 0){x||(v.graphic=x=p.renderer.path().add(this.group)),this.chart.styledMode||x.attr(this.pointAttribs(v,v.selected&&"select")).shadow(this.options.shadow);let F=x.strokeWidth();O=a(v.plotX||0,F),L=Math.min(m=v.plotOpen,E=v.plotClose),S=Math.max(m,E),_=Math.round(v.shapeArgs.width/2),w=b?S!==v.yBottom:Math.round(L)!==Math.round(v.plotHigh||0),R=b?Math.round(L)!==Math.round(v.plotHigh||0):S!==v.yBottom,L=a(L,F),S=a(S,F),(I=[]).push(["M",O-_,S],["L",O-_,L],["L",O+_,L],["L",O+_,S],["Z"],["M",O,L],["L",O,w?Math.round(b?v.yBottom:v.plotHigh):L],["M",O,S],["L",O,R?Math.round(b?v.plotHigh:v.yBottom):S]),x[P?"attr":"animate"]({d:I}).addClass(v.getClassName(),!0)}}}}return c.defaultOptions=h(l.defaultOptions,{tooltip:l.defaultOptions.tooltip},e),i.registerSeriesType("candlestick",c),c}),s(t,"Series/Flags/FlagsPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i){let{column:{prototype:{pointClass:r}}}=e.seriesTypes,{isNumber:n}=i;return class extends r{constructor(){super(...arguments),this.ttBelow=!1}isValid(){return n(this.y)||this.y===void 0}hasNewShapeType(){let l=this.options.shape||this.series.options.shape;return this.graphic&&l&&l!==this.graphic.symbolKey}}}),s(t,"Series/Flags/FlagsSeriesDefaults.js",[],function(){return{borderRadius:0,pointRange:0,allowOverlapX:!1,shape:"flag",stackDistance:12,textAlign:"center",tooltip:{pointFormat:"{point.text}"},threshold:null,y:-30,fillColor:"#ffffff",lineWidth:1,states:{hover:{lineColor:"#000000",fillColor:"#ccd3ff"}},style:{fontSize:"0.7em",fontWeight:"bold"}}}),s(t,"Series/Flags/FlagsSymbols.js",[t["Core/Renderer/RendererRegistry.js"]],function(e){var i;return function(r){let n=[];function l(h,c,g,u,p){let b=p&&p.anchorX||h,v=p&&p.anchorY||c,x=this.circle(b-1,v-1,2,2);return x.push(["M",b,v],["L",h,c+u],["L",h,c],["L",h+g,c],["L",h+g,c+u],["L",h,c+u],["Z"]),x}function a(h,c){h[c+"pin"]=function(g,u,p,b,v){let x,m=v&&v.anchorX,E=v&&v.anchorY;if(c==="circle"&&b>p&&(g-=Math.round((b-p)/2),p=b),x=h[c](g,u,p,b,v),m&&E){let L=m;if(c==="circle")L=g+p/2;else{let w=x[0],R=x[1];w[0]==="M"&&R[0]==="L"&&(L=(w[1]+R[1])/2)}let S=u>E?u:u+b;x.push(["M",L,S],["L",m,E]),x=x.concat(h.circle(m-1,E-1,2,2))}return x}}r.compose=function(h){if(n.indexOf(h)===-1){n.push(h);let g=h.prototype.symbols;g.flag=l,a(g,"circle"),a(g,"square")}let c=e.getRendererType();n.indexOf(c)&&n.push(c)}}(i||(i={})),i}),s(t,"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,i,r,n){var l;let{composed:a}=i,{prototype:h}=e,{prototype:c}=r,{defined:g,pushUnique:u,stableSort:p}=n;return function(b){function v(m){return c.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,m)}function x(){h.translate.apply(this);let m=this,E=m.options,L=m.chart,S=m.points,w=E.onSeries,R=w&&L.get(w),O=R&&R.options.step,I=R&&R.points,_=L.inverted,P=m.xAxis,F=m.yAxis,A=S.length-1,D,C,d=E.onKey||"y",f=I&&I.length,y=0,M,k,T,z,N;if(R&&R.visible&&f){for(y=(R.pointXOffset||0)+(R.barW||0)/2,z=R.currentDataGrouping,k=I[f-1].x+(z?z.totalRange:0),p(S,(G,X)=>G.x-X.x),d="plot"+d[0].toUpperCase()+d.substr(1);f--&&S[A];)if(M=I[f],(D=S[A]).y=M.y,M.x<=D.x&&M[d]!==void 0){if(D.x<=k&&(D.plotY=M[d],M.x<D.x&&!O&&(T=I[f+1])&&T[d]!==void 0))if(g(D.plotX)&&R.is("spline")){let G=[M.plotX||0,M.plotY||0],X=[T.plotX||0,T.plotY||0],j=M.controlPoints?.high||G,B=T.controlPoints?.low||X,W=(H,V)=>Math.pow(1-H,3)*G[V]+3*(1-H)*(1-H)*H*j[V]+3*(1-H)*H*H*B[V]+H*H*H*X[V],Y=0,U=1,q;for(let H=0;H<100;H++){let V=(Y+U)/2,Z=W(V,0);if(Z===null)break;if(.25>Math.abs(Z-D.plotX)){q=V;break}Z<D.plotX?Y=V:U=V}g(q)&&(D.plotY=W(q,1),D.y=F.toValue(D.plotY,!0))}else N=(D.x-M.x)/(T.x-M.x),D.plotY+=N*(T[d]-M[d]),D.y+=N*(T.y-M.y);if(A--,f++,A<0)break}}S.forEach((G,X)=>{let j;G.plotX+=y,(G.plotY===void 0||_)&&(G.plotX>=0&&G.plotX<=P.len?_?(G.plotY=P.translate(G.x,0,1,0,1),G.plotX=g(G.y)?F.translate(G.y,0,0,0,1):0):G.plotY=(P.opposite?0:m.yAxis.len)+P.offset:G.shapeArgs={}),(C=S[X-1])&&C.plotX===G.plotX&&(C.stackIndex===void 0&&(C.stackIndex=0),j=C.stackIndex+1),G.stackIndex=j}),this.onSeries=R}b.compose=function(m){if(u(a,"OnSeries")){let E=m.prototype;E.getPlotBox=v,E.translate=x}return m},b.getPlotBox=v,b.translate=x}(l||(l={})),l}),s(t,"Series/Flags/FlagsSeries.js",[t["Series/Flags/FlagsPoint.js"],t["Series/Flags/FlagsSeriesDefaults.js"],t["Series/Flags/FlagsSymbols.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a,h,c,g){let{noop:u}=n,{distribute:p}=a,{series:b,seriesTypes:{column:v}}=h,{addEvent:x,defined:m,extend:E,isNumber:L,merge:S,objectEach:w,wrap:R}=g;class O extends v{animate(_){_&&this.setClip()}drawPoints(){let _,P,F,A,D,C,d,f,y,M,k,T=this.points,z=this.chart,N=z.renderer,G=z.inverted,X=this.options,j=X.y,B=this.yAxis,W={},Y=[],U=L(X.borderRadius)?X.borderRadius:0;for(A=T.length;A--;)D=T[A],M=(G?D.plotY:D.plotX)>this.xAxis.len,_=D.plotX,d=D.stackIndex,F=D.options.shape||X.shape,(P=D.plotY)!==void 0&&(P=D.plotY+j-(d!==void 0&&d*X.stackDistance)),D.anchorX=d?void 0:D.plotX,f=d?void 0:D.plotY,k=F!=="flag",C=D.graphic,P!==void 0&&_>=0&&!M?(C&&D.hasNewShapeType()&&(C=C.destroy()),C||(C=D.graphic=N.label("",0,void 0,F,void 0,void 0,X.useHTML).addClass("highcharts-point").add(this.markerGroup),D.graphic.div&&(D.graphic.div.point=D),C.isNew=!0),C.attr({align:k?"center":"left",width:X.width,height:X.height,"text-align":X.textAlign,r:U}),z.styledMode||C.attr(this.pointAttribs(D)).css(S(X.style,D.style)).shadow(X.shadow),_>0&&(_-=C.strokeWidth()%2),y={y:P,anchorY:f},X.allowOverlapX&&(y.x=_,y.anchorX=D.anchorX),C.attr({text:D.options.title??X.title??"A"})[C.isNew?"attr":"animate"](y),X.allowOverlapX||(W[D.plotX]?W[D.plotX].size=Math.max(W[D.plotX].size,C.width||0):W[D.plotX]={align:k?.5:0,size:C.width||0,target:_,anchorX:_}),D.tooltipPos=[_,P+B.pos-z.plotTop]):C&&(D.graphic=C.destroy());if(!X.allowOverlapX){let q=100;for(let H of(w(W,function(V){V.plotX=V.anchorX,Y.push(V),q=Math.max(V.size,q)}),p(Y,G?B.len:this.xAxis.len,q),T)){let V=H.plotX,Z=H.graphic,K=Z&&W[V];K&&Z&&(m(K.pos)?Z[Z.isNew?"attr":"animate"]({x:K.pos+(K.align||0)*K.size,anchorX:H.anchorX}).show().isNew=!1:Z.hide().isNew=!0)}}X.useHTML&&this.markerGroup&&R(this.markerGroup,"on",function(q){return c.prototype.on.apply(q.apply(this,[].slice.call(arguments,1)),[].slice.call(arguments,1))})}drawTracker(){let _=this.points;for(let P of(super.drawTracker(),_)){let F=P.graphic;F&&(P.unbindMouseOver&&P.unbindMouseOver(),P.unbindMouseOver=x(F.element,"mouseover",function(){for(let A of(P.stackIndex>0&&!P.raised&&(P._y=F.y,F.attr({y:P._y-8}),P.raised=!0),_))A!==P&&A.raised&&A.graphic&&(A.graphic.attr({y:A._y}),A.raised=!1)}))}}pointAttribs(_,P){let F=this.options,A=_&&_.color||this.color,D=F.lineColor,C=_&&_.lineWidth,d=_&&_.fillColor||F.fillColor;return P&&(d=F.states[P].fillColor,D=F.states[P].lineColor,C=F.states[P].lineWidth),{fill:d||A,stroke:D||A,"stroke-width":C||F.lineWidth||0}}setClip(){b.prototype.setClip.apply(this,arguments),this.options.clip!==!1&&this.sharedClipKey&&this.markerGroup&&this.markerGroup.clip(this.chart.sharedClips[this.sharedClipKey])}}return O.compose=r.compose,O.defaultOptions=S(v.defaultOptions,i),l.compose(O),E(O.prototype,{allowDG:!1,forceCrop:!0,invertible:!1,noSharedTooltip:!0,pointClass:e,sorted:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],buildKDTree:u,init:b.prototype.init}),h.registerSeriesType("flags",O),O}),s(t,"Core/Axis/BrokenAxis.js",[t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(e,i){var r;let{addEvent:n,find:l,fireEvent:a,isArray:h,isNumber:c,pick:g}=i;return function(u){function p(){this.brokenAxis!==void 0&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function b(){this.brokenAxis?.hasBreaks&&(this.options.ordinal=!1)}function v(){let R=this.brokenAxis;if(R?.hasBreaks){let O=this.tickPositions,I=this.tickPositions.info,_=[];for(let P=0;P<O.length;P++)R.isInAnyBreak(O[P])||_.push(O[P]);this.tickPositions=_,this.tickPositions.info=I}}function x(){this.brokenAxis||(this.brokenAxis=new w(this))}function m(){let{isDirty:R,options:{connectNulls:O},points:I,xAxis:_,yAxis:P}=this;if(R){let F=I.length;for(;F--;){let A=I[F],D=!(A.y===null&&O===!1)&&(_?.brokenAxis?.isInAnyBreak(A.x,!0)||P?.brokenAxis?.isInAnyBreak(A.y,!0));A.visible=!D&&A.options.visible!==!1}}}function E(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,g(this.pointArrayMap,["y"]))}function L(R,O){let I,_,P,F=this,A=F.points;if(R?.brokenAxis?.hasBreaks){let D=R.brokenAxis;O.forEach(function(C){I=D?.breakArray||[],_=R.isXAxis?R.min:g(F.options.threshold,R.min);let d=R?.options?.breaks?.filter(function(f){let y=!0;for(let M=0;M<I.length;M++){let k=I[M];if(k.from===f.from&&k.to===f.to){y=!1;break}}return y});A.forEach(function(f){P=g(f["stack"+C.toUpperCase()],f[C]),I.forEach(function(y){if(c(_)&&c(P)){let M="";_<y.from&&P>y.to||_>y.from&&P<y.from?M="pointBreak":(_<y.from&&P>y.from&&P<y.to||_>y.from&&P>y.to&&P<y.from)&&(M="pointInBreak"),M&&a(R,M,{point:f,brk:y})}}),d?.forEach(function(y){a(R,"pointOutsideOfBreak",{point:f,brk:y})})})})}}function S(){let R=this.currentDataGrouping,O=R?.gapSize,I=this.points.slice(),_=this.yAxis,P=this.options.gapSize,F=I.length-1;if(P&&F>0){let A,D;for(this.options.gapUnit!=="value"&&(P*=this.basePointRange),O&&O>P&&O>=this.basePointRange&&(P=O);F--;)if(D&&D.visible!==!1||(D=I[F+1]),A=I[F],D.visible!==!1&&A.visible!==!1){if(D.x-A.x>P){let C=(A.x+D.x)/2;I.splice(F+1,0,{isNull:!0,x:C}),_.stacking&&this.options.stacking&&((_.stacking.stacks[this.stackKey][C]=new e(_,_.options.stackLabels,!1,C,this.stack)).total=0)}D=A}}return this.getGraphPath(I)}u.compose=function(R,O){if(!R.keepProps.includes("brokenAxis")){R.keepProps.push("brokenAxis"),n(R,"init",x),n(R,"afterInit",p),n(R,"afterSetTickPositions",v),n(R,"afterSetOptions",b);let I=O.prototype;I.drawBreaks=L,I.gappedPath=S,n(O,"afterGeneratePoints",m),n(O,"afterRender",E)}return R};class w{static isInBreak(O,I){let _=O.repeat||1/0,P=O.from,F=O.to-O.from,A=I>=P?(I-P)%_:_-(P-I)%_;return O.inclusive?A<=F:A<F&&A!==0}static lin2Val(O){let I=this.brokenAxis,_=I&&I.breakArray;if(!_||!c(O))return O;let P=O,F,A;for(A=0;A<_.length&&!((F=_[A]).from>=P);A++)(F.to<P||w.isInBreak(F,P))&&(P+=F.len);return P}static val2Lin(O){let I=this.brokenAxis,_=I&&I.breakArray;if(!_||!c(O))return O;let P=O,F,A;for(A=0;A<_.length;A++)if((F=_[A]).to<=O)P-=F.len;else{if(F.from>=O)break;if(w.isInBreak(F,O)){P-=O-F.from;break}}return P}constructor(O){this.hasBreaks=!1,this.axis=O}findBreakAt(O,I){return l(I,function(_){return _.from<O&&O<_.to})}isInAnyBreak(O,I){let _=this.axis,P=_.options.breaks||[],F=P.length,A,D,C;if(F&&c(O)){for(;F--;)w.isInBreak(P[F],O)&&(A=!0,D||(D=g(P[F].showPoints,!_.isXAxis)));C=A&&I?A&&!D:A}return C}setBreaks(O,I){let _=this,P=_.axis,F=h(O)&&!!O.length&&!!Object.keys(O[0]).length;P.isDirty=_.hasBreaks!==F,_.hasBreaks=F,O!==P.options.breaks&&(P.options.breaks=P.userOptions.breaks=O),P.forceRedraw=!0,P.series.forEach(function(A){A.isDirty=!0}),F||P.val2lin!==w.val2Lin||(delete P.val2lin,delete P.lin2val),F&&(P.userOptions.ordinal=!1,P.lin2val=w.lin2Val,P.val2lin=w.val2Lin,P.setExtremes=function(A,D,C,d,f){if(_.hasBreaks){let y,M=this.options.breaks||[];for(;y=_.findBreakAt(A,M);)A=y.to;for(;y=_.findBreakAt(D,M);)D=y.from;D<A&&(D=A)}P.constructor.prototype.setExtremes.call(this,A,D,C,d,f)},P.setAxisTranslation=function(){if(P.constructor.prototype.setAxisTranslation.call(this),_.unitLength=void 0,_.hasBreaks){let A=P.options.breaks||[],D=[],C=[],d=g(P.pointRangePadding,0),f=0,y,M,k=P.userMin||P.min,T=P.userMax||P.max,z,N;A.forEach(function(G){M=G.repeat||1/0,c(k)&&c(T)&&(w.isInBreak(G,k)&&(k+=G.to%M-k%M),w.isInBreak(G,T)&&(T-=T%M-G.from%M))}),A.forEach(function(G){if(z=G.from,M=G.repeat||1/0,c(k)&&c(T)){for(;z-M>k;)z-=M;for(;z<k;)z+=M;for(N=z;N<T;N+=M)D.push({value:N,move:"in"}),D.push({value:N+G.to-G.from,move:"out",size:G.breakSize})}}),D.sort(function(G,X){return G.value===X.value?(G.move==="in"?0:1)-(X.move==="in"?0:1):G.value-X.value}),y=0,z=k,D.forEach(function(G){(y+=G.move==="in"?1:-1)===1&&G.move==="in"&&(z=G.value),y===0&&c(z)&&(C.push({from:z,to:G.value,len:G.value-z-(G.size||0)}),f+=G.value-z-(G.size||0))}),_.breakArray=C,c(k)&&c(T)&&c(P.min)&&(_.unitLength=T-k-f+d,a(P,"afterBreaks"),P.staticScale?P.transA=P.staticScale:_.unitLength&&(P.transA*=(T-P.min+d)/_.unitLength),d&&(P.minPixelPadding=P.transA*(P.minPointOffset||0)),P.min=k,P.max=T)}}),g(I,!0)&&P.chart.redraw()}}u.Additions=w}(r||(r={})),r}),s(t,"masters/modules/broken-axis.src.js",[t["Core/Globals.js"],t["Core/Axis/BrokenAxis.js"]],function(e,i){return e.BrokenAxis=e.BrokenAxis||i,e.BrokenAxis.compose(e.Axis,e.Series),e}),s(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),s(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(e,i){let{arrayMax:r,arrayMin:n,correctFloat:l,extend:a,isNumber:h}=i;function c(p){let b=p.length,v=g(p);return h(v)&&b&&(v=l(v/b)),v}function g(p){let b=p.length,v;if(!b&&p.hasNulls)v=null;else if(b)for(v=0;b--;)v+=p[b];return v}let u={average:c,averages:function(){let p=[];return[].forEach.call(arguments,function(b){p.push(c(b))}),p[0]===void 0?void 0:p},close:function(p){return p.length?p[p.length-1]:p.hasNulls?null:void 0},high:function(p){return p.length?r(p):p.hasNulls?null:void 0},hlc:function(p,b,v){if(p=e.high(p),b=e.low(b),v=e.close(v),h(p)||h(b)||h(v))return[p,b,v]},low:function(p){return p.length?n(p):p.hasNulls?null:void 0},ohlc:function(p,b,v,x){if(p=e.open(p),b=e.high(b),v=e.low(v),x=e.close(x),h(p)||h(b)||h(v)||h(x))return[p,b,v,x]},open:function(p){return p.length?p[0]:p.hasNulls?null:void 0},range:function(p,b){return p=e.low(p),b=e.high(b),h(p)||h(b)?[p,b]:p===null&&b===null?null:void 0},sum:g};return a(e,u),u}),s(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),s(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(e,i){let r,{addEvent:n,extend:l,merge:a,pick:h}=i;function c(b){let v=this,x=v.series;x.forEach(function(m){m.groupPixelWidth=void 0}),x.forEach(function(m){m.groupPixelWidth=v.getGroupPixelWidth&&v.getGroupPixelWidth(),m.groupPixelWidth&&(m.hasProcessed=!0),m.applyGrouping(!!b.hasExtremesChanged)})}function g(){let b=this.series,v=b.length,x=0,m=!1,E,L;for(;v--;)(L=b[v].options.dataGrouping)&&(x=Math.max(x,h(L.groupPixelWidth,e.common.groupPixelWidth)),E=(b[v].processedXData||b[v].data).length,(b[v].groupPixelWidth||E>this.chart.plotSizeX/x||E&&L.forced)&&(m=!0));return m?x:0}function u(){this.series.forEach(function(b){b.hasProcessed=!1})}function p(b,v){let x;if(v=h(v,!0),b||(b={forced:!1,units:null}),this instanceof r)for(x=this.series.length;x--;)this.series[x].update({dataGrouping:b},!1);else this.chart.options.series.forEach(function(m){m.dataGrouping=typeof b=="boolean"?b:a(b,m.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),v&&this.chart.redraw()}return{compose:function(b){r=b;let v=b.prototype;v.applyGrouping||(n(b,"afterSetScale",u),n(b,"postProcessData",c),l(v,{applyGrouping:c,getGroupPixelWidth:g,setDataGrouping:p}))}}}),s(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{series:{prototype:h}}=l,{addEvent:c,defined:g,error:u,extend:p,isNumber:b,merge:v,pick:x}=a,m=h.generatePoints;function E(I){var _;let P,F,A=this.chart,D=this.options.dataGrouping,C=this.allowDG!==!1&&D&&x(D.enabled,A.options.isStock),d=this.reserveSpace(),f=this.currentDataGrouping,y,M,k=!1;C&&!this.requireSorting&&(this.requireSorting=k=!0);let T=!!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!I)||!C;if(k&&(this.requireSorting=!1),T)return;this.destroyGroupedData();let z=D.groupAll?this.xData:this.processedXData,N=D.groupAll?this.yData:this.processedYData,G=A.plotSizeX,X=this.xAxis,j=X.options.ordinal,B=this.groupPixelWidth;if(B&&z&&z.length&&G){F=!0,this.isDirty=!0,this.points=null;let W=X.getExtremes(),Y=W.min,U=W.max,q=j&&X.ordinal&&X.ordinal.getGroupIntervalFactor(Y,U,this)||1,H=B*(U-Y)/G*q,V=X.getTimeTicks(r.Additions.prototype.normalizeTimeTickInterval(H,D.units||i.units),Math.min(Y,z[0]),Math.max(U,z[z.length-1]),X.options.startOfWeek,z,this.closestPointRange),Z=h.groupData.apply(this,[z,N,V,D.approximation]),K=Z.groupedXData,J=Z.groupedYData,tt=0;for(D&&D.smoothed&&K.length&&(D.firstAnchor="firstPoint",D.anchor="middle",D.lastAnchor="lastPoint",u(32,!1,A,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),P=1;P<V.length;P++)V.info.segmentStarts&&V.info.segmentStarts.indexOf(P)!==-1||(tt=Math.max(V[P]-V[P-1],tt));(y=V.info).gapSize=tt,this.closestPointRange=V.info.totalRange,this.groupMap=Z.groupMap,this.currentDataGrouping=y,function($,Q,et){let it=$.options.dataGrouping,st=$.currentDataGrouping&&$.currentDataGrouping.gapSize;if(!(it&&$.xData&&st&&$.groupMap))return;let rt=Q.length-1,nt=it.anchor,ot=it.firstAnchor,at=it.lastAnchor,ct=Q.length-1,ht=0;if(ot&&$.xData[0]>=Q[0]){let lt;ht++;let xt=$.groupMap[0].start,wt=$.groupMap[0].length;b(xt)&&b(wt)&&(lt=xt+(wt-1)),Q[0]={start:Q[0],middle:Q[0]+.5*st,end:Q[0]+st,firstPoint:$.xData[0],lastPoint:lt&&$.xData[lt]}[ot]}if(rt>0&&at&&st&&Q[rt]>=et-st){ct--;let lt=$.groupMap[$.groupMap.length-1].start;Q[rt]={start:Q[rt],middle:Q[rt]+.5*st,end:Q[rt]+st,firstPoint:lt&&$.xData[lt],lastPoint:$.xData[$.xData.length-1]}[at]}if(nt&&nt!=="start"){let lt=st*{middle:.5,end:1}[nt];for(;ct>=ht;)Q[ct]+=lt,ct--}}(this,K,U),d&&(g((_=K)[0])&&b(X.min)&&b(X.dataMin)&&_[0]<X.min&&((!g(X.options.min)&&X.min<=X.dataMin||X.min===X.dataMin)&&(X.min=Math.min(_[0],X.min)),X.dataMin=Math.min(_[0],X.dataMin)),g(_[_.length-1])&&b(X.max)&&b(X.dataMax)&&_[_.length-1]>X.max&&((!g(X.options.max)&&b(X.dataMax)&&X.max>=X.dataMax||X.max===X.dataMax)&&(X.max=Math.max(_[_.length-1],X.max)),X.dataMax=Math.max(_[_.length-1],X.dataMax))),D.groupAll&&(this.allGroupedData=J,K=(M=this.cropData(K,J,X.min,X.max)).xData,J=M.yData,this.cropStart=M.start),this.processedXData=K,this.processedYData=J}else this.groupMap=null,this.currentDataGrouping=void 0;this.hasGroupedData=F,this.preventGraphAnimation=(f&&f.totalRange)!==(y&&y.totalRange)}function L(){this.groupedData&&(this.groupedData.forEach(function(I,_){I&&(this.groupedData[_]=I.destroy?I.destroy():null)},this),this.groupedData.length=0,delete this.allGroupedData)}function S(){m.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function w(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")||this.options.cumulative?"sum":"average"}function R(I,_,P,F){let A=this,D=A.data,C=A.options&&A.options.data,d=[],f=[],y=[],M=I.length,k=!!_,T=[],z=A.pointArrayMap,N=z&&z.length,G=["x"].concat(z||["y"]),X=this.options.dataGrouping&&this.options.dataGrouping.groupAll,j,B,W,Y=0,U=0,q=typeof F=="function"?F:F&&e[F]?e[F]:e[A.getDGApproximation&&A.getDGApproximation()||"average"];if(N){let V=z.length;for(;V--;)T.push([])}else T.push([]);let H=N||1;for(let V=0;V<=M;V++)if(!(I[V]<P[0])){for(;P[Y+1]!==void 0&&I[V]>=P[Y+1]||V===M;){j=P[Y],A.dataGroupInfo={start:X?U:A.cropStart+U,length:T[0].length,groupStart:j},W=q.apply(A,T),A.pointClass&&!g(A.dataGroupInfo.options)&&(A.dataGroupInfo.options=v(A.pointClass.prototype.optionsToObject.call({series:A},A.options.data[A.cropStart+U])),G.forEach(function(Z){delete A.dataGroupInfo.options[Z]})),W!==void 0&&(d.push(j),f.push(W),y.push(A.dataGroupInfo)),U=V;for(let Z=0;Z<H;Z++)T[Z].length=0,T[Z].hasNulls=!1;if(Y+=1,V===M)break}if(V===M)break;if(z){let Z,K=A.options.dataGrouping&&A.options.dataGrouping.groupAll?V:A.cropStart+V,J=D&&D[K]||A.pointClass.prototype.applyOptions.apply({series:A},[C[K]]);for(let tt=0;tt<N;tt++)b(Z=J[z[tt]])?T[tt].push(Z):Z===null&&(T[tt].hasNulls=!0)}else b(B=k?_[V]:null)?T[0].push(B):B===null&&(T[0].hasNulls=!0)}return{groupedXData:d,groupedYData:f,groupMap:y}}function O(I){let _=I.options,P=this.type,F=this.chart.options.plotOptions,A=this.useCommonDataGrouping&&i.common,D=i.seriesSpecific,C=n.defaultOptions.plotOptions[P].dataGrouping;if(F&&(D[P]||A)){let d=this.chart.rangeSelector;C||(C=v(i.common,D[P])),_.dataGrouping=v(A,C,F.series&&F.series.dataGrouping,F[P].dataGrouping,this.userOptions.dataGrouping,!_.isInternal&&d&&b(d.selected)&&d.buttonOptions[d.selected].dataGrouping)}}return{compose:function(I){let _=I.prototype;_.applyGrouping||(c(I.prototype.pointClass,"update",function(){if(this.dataGroup)return u(24,!1,this.series.chart),!1}),c(I,"afterSetOptions",O),c(I,"destroy",L),p(_,{applyGrouping:E,destroyGroupedData:L,generatePoints:S,getDGApproximation:w,groupData:R}))},groupData:R}}),s(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(e,i,r,n,l,a){let{format:h}=n,{composed:c}=l,{addEvent:g,extend:u,isNumber:p,pick:b,pushUnique:v}=a;function x(m){let E=this.chart,L=E.time,S=m.labelConfig,w=S.series,R=S.point,O=w.options,I=w.tooltipOptions,_=O.dataGrouping,P=w.xAxis,F=I.xDateFormat,A,D,C,d,f,y=I[m.isFooter?"footerFormat":"headerFormat"];if(P&&P.options.type==="datetime"&&_&&p(S.key)){D=w.currentDataGrouping,C=_.dateTimeLabelFormats||i.common.dateTimeLabelFormats,D?(d=C[D.unitName],D.count===1?F=d[0]:(F=d[1],A=d[2])):!F&&C&&P.dateTime&&(F=P.dateTime.getXDateFormat(S.x,I.dateTimeLabelFormats));let M=b(w.groupMap?.[R.index].groupStart,S.key),k=M+D?.totalRange-1;f=L.dateFormat(F,M),A&&(f+=L.dateFormat(A,k)),w.chart.styledMode&&(y=this.styledModeFormat(y)),m.text=h(y,{point:u(S.point,{key:f}),series:w},E),m.preventDefault()}}return{compose:function(m,E,L){e.compose(m),r.compose(E),L&&v(c,"DataGrouping")&&g(L,"headerFormatter",x)},groupData:r.groupData}}),s(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(e,i,r,n){return e.dataGrouping=e.dataGrouping||{},e.dataGrouping.approximationDefaults=e.dataGrouping.approximationDefaults||i,e.dataGrouping.approximations=e.dataGrouping.approximations||r,n.compose(e.Axis,e.Series,e.Tooltip),e}),s(t,"Extensions/Annotations/NavigationBindingsUtilities.js",[t["Core/Utilities.js"]],function(e){let{defined:i,isNumber:r,pick:n}=e,l={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};return{annotationsFieldsTypes:l,getAssignedAxis:function(a){return a.filter(h=>{let c=h.axis.getExtremes(),g=c.min,u=c.max,p=n(h.axis.minPointOffset,0);return r(g)&&r(u)&&h.value>=g-p&&h.value<=u+p&&!h.axis.options.isInternal})[0]},getFieldType:function(a,h){let c=l[a],g=typeof h;return i(c)&&(g=c),{string:"text",number:"number",boolean:"checkbox"}[g]}}}),s(t,"Extensions/MouseWheelZoom/MouseWheelZoom.js",[t["Core/Utilities.js"],t["Extensions/Annotations/NavigationBindingsUtilities.js"]],function(e,i){let r,{addEvent:n,isObject:l,pick:a,defined:h,merge:c}=e,{getAssignedAxis:g}=i,u=[],p={enabled:!0,sensitivity:1.1},b=m=>(l(m)||(m={enabled:m??!0}),c(p,m)),v=function(m,E,L,S,w,R,O){let I=a(O.type,m.zooming.type,""),_=[];I==="x"?_=L:I==="y"?_=S:I==="xy"&&(_=m.axes);let P=m.transform({axes:_,to:{x:w-5,y:R-5,width:10,height:10},from:{x:w-5*E,y:R-5*E,width:10*E,height:10*E},trigger:"mousewheel"});return P&&(h(r)&&clearTimeout(r),r=setTimeout(()=>{m.pointer?.drop()},400)),P};function x(){let m=b(this.zooming.mouseWheel);m.enabled&&n(this.container,"wheel",E=>{E=this.pointer?.normalize(E)||E;let{pointer:L}=this,S=L&&!L.inClass(E.target,"highcharts-no-mousewheel");if(this.isInsidePlot(E.chartX-this.plotLeft,E.chartY-this.plotTop)&&S){let w=m.sensitivity||1.1,R=E.detail||(E.deltaY||0)/120,O=g(L.getCoordinates(E).xAxis),I=g(L.getCoordinates(E).yAxis);v(this,Math.pow(w,R),O?[O.axis]:this.xAxis,I?[I.axis]:this.yAxis,E.chartX,E.chartY,m)&&E.preventDefault?.()}})}return{compose:function(m){u.indexOf(m)===-1&&(u.push(m),n(m,"afterGetContainer",x))}}}),s(t,"masters/modules/mouse-wheel-zoom.src.js",[t["Core/Globals.js"],t["Extensions/MouseWheelZoom/MouseWheelZoom.js"]],function(e,i){return e.MouseWheelZoom=e.MouseWheelZoom||i,e.MouseWheelZoom.compose(e.Chart),e}),s(t,"masters/modules/stock.src.js",[t["Core/Globals.js"],t["Series/DataModifyComposition.js"],t["Stock/Navigator/Navigator.js"],t["Core/Axis/OrdinalAxis.js"],t["Stock/RangeSelector/RangeSelector.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Chart/StockChart.js"],t["Series/OHLC/OHLCSeries.js"],t["Series/Flags/FlagsSeries.js"]],function(e,i,r,n,l,a,h,c,g){return e.Navigator=e.Navigator||r,e.OrdinalAxis=e.OrdinalAxis||n,e.RangeSelector=e.RangeSelector||l,e.Scrollbar=e.Scrollbar||a,e.stockChart=e.stockChart||h.stockChart,e.StockChart=e.StockChart||e.stockChart,e.extend(e.StockChart,h),i.compose(e.Series,e.Axis,e.Point),g.compose(e.Renderer),c.compose(e.Series),e.Navigator.compose(e.Chart,e.Axis,e.Series),e.OrdinalAxis.compose(e.Axis,e.Series,e.Chart),e.RangeSelector.compose(e.Axis,e.Chart),e.Scrollbar.compose(e.Axis),e.StockChart.compose(e.Chart,e.Axis,e.Series,e.SVGRenderer),e})})});var Du=qe((NT,Un)=>{"use strict";(function(o){typeof Un=="object"&&Un.exports?(o.default=o,Un.exports=o):typeof define=="function"&&define.amd?define("highcharts/modules/solid-gauge",["highcharts","highcharts/highcharts-more"],function(t){return o(t),o.Highcharts=t,o}):o(typeof Highcharts<"u"?Highcharts:void 0)})(function(o){"use strict";var t=o?o._modules:{};function s(e,i,r,n){e.hasOwnProperty(i)||(e[i]=n.apply(null,r),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:e[i]}})))}s(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(e,i){var r,n;let{parse:l}=e,{merge:a}=i;return(n=r||(r={})).initDataClasses=function(h){let c=this.chart,g=this.legendItem=this.legendItem||{},u=this.options,p=h.dataClasses||[],b,v,x=c.options.chart.colorCount,m=0,E;this.dataClasses=v=[],g.labels=[];for(let L=0,S=p.length;L<S;++L)b=a(b=p[L]),v.push(b),(c.styledMode||!b.color)&&(u.dataClassColor==="category"?(c.styledMode||(x=(E=c.options.colors||[]).length,b.color=E[m]),b.colorIndex=m,++m===x&&(m=0)):b.color=l(u.minColor).tweenTo(l(u.maxColor),S<2?.5:L/(S-1)))},n.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let g=0,u=c.length;g<u;++g)c[g].color=l(c[g][1])},n.normalizedValue=function(h){let c=this.max||0,g=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-g||1)},n.toColor=function(h,c){let g,u,p,b,v,x,m=this.dataClasses,E=this.stops;if(m){for(x=m.length;x--;)if(u=(v=m[x]).from,p=v.to,(u===void 0||h>=u)&&(p===void 0||h<=p)){b=v.color,c&&(c.dataClass=x,c.colorIndex=v.colorIndex);break}}else{for(g=this.normalizedValue(h),x=E.length;x--&&!(g>E[x][0]););u=E[x]||E[x+1],g=1-((p=E[x+1]||u)[0]-g)/(p[0]-u[0]||1),b=u.color.tweenTo(p.color,g)}return b},r}),s(t,"Core/Axis/SolidGaugeAxis.js",[t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Utilities.js"]],function(e,i){let{extend:r}=i;return{init:function(n){r(n,e)}}}),s(t,"Series/SolidGauge/SolidGaugeSeriesDefaults.js",[],function(){return{colorByPoint:!0,dataLabels:{y:0}}}),s(t,"Series/SolidGauge/SolidGaugeSeries.js",[t["Extensions/BorderRadius.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/SolidGaugeAxis.js"],t["Series/SolidGauge/SolidGaugeSeriesDefaults.js"],t["Core/Utilities.js"]],function(e,i,r,n,l){let{gauge:a,pie:h}=i.seriesTypes,{clamp:c,extend:g,isNumber:u,merge:p,pick:b,pInt:v}=l;class x extends a{translate(){let E=this.yAxis;r.init(E),!E.dataClasses&&E.options.dataClasses&&E.initDataClasses(E.options),E.initStops(),a.prototype.translate.call(this)}drawPoints(){let E,L=this.yAxis,S=L.center,w=this.options,R=this.chart.renderer,O=w.overshoot,I=w.rounded&&w.borderRadius===void 0,_=u(O)?O/180*Math.PI:0;for(let P of(u(w.threshold)&&(E=L.startAngleRad+L.translate(w.threshold,void 0,void 0,void 0,!0)),this.thresholdAngleRad=b(E,L.startAngleRad),this.points))if(!P.isNull){let F=v(b(P.options.radius,w.radius,100))*S[2]/200,A=v(b(P.options.innerRadius,w.innerRadius,60))*S[2]/200,D=Math.min(L.startAngleRad,L.endAngleRad),C=Math.max(L.startAngleRad,L.endAngleRad),d=P.graphic,f=L.startAngleRad+L.translate(P.y,void 0,void 0,void 0,!0),y,M,k=L.toColor(P.y,P);k==="none"&&(k=P.color||this.color||"none"),k!=="none"&&(P.color=k),f=c(f,D-_,C+_),w.wrap===!1&&(f=c(f,D,C));let T=I?(F-A)/2/F:0,z=Math.min(f,this.thresholdAngleRad)-T,N=Math.max(f,this.thresholdAngleRad)+T;N-z>2*Math.PI&&(N=z+2*Math.PI);let G=I?"50%":0;w.borderRadius&&(G=e.optionsToObject(w.borderRadius).radius),P.shapeArgs=y={x:S[0],y:S[1],r:F,innerR:A,start:z,end:N,borderRadius:G},P.startR=F,d?(M=y.d,d.animate(g({fill:k},y)),M&&(y.d=M)):P.graphic=d=R.arc(y).attr({fill:k,"sweep-flag":0}).add(this.group),this.chart.styledMode||(w.linecap!=="square"&&d.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),d.attr({stroke:w.borderColor||"none","stroke-width":w.borderWidth||0})),d&&d.addClass(P.getClassName(),!0)}}animate(E){E||(this.startAngleRad=this.thresholdAngleRad,h.prototype.animate.call(this,E))}}return x.defaultOptions=p(a.defaultOptions,n),i.registerSeriesType("solidgauge",x),x}),s(t,"masters/modules/solid-gauge.src.js",[t["Core/Globals.js"]],function(e){return e})})});var Qn=qt(ys());var _h="Oxygen",wh="mdx2json.emptyportlet",Sh="DSW.Addons.";var ye=(()=>{let t=class t{constructor(){this.model={},this.el=$t(ah),this.cd=$t(dh),this.ds=$t(gh),this.ss=$t(xh),this.bs=$t(yh),this.us=$t(mh),this.i18n=$t(fh),this.route=$t(ph),this.fs=$t(vh),this.dbs=$t(bh),this.isSpinner=!0,this.drills=[],this.drillFilterWidgets=[],this.customDataSource="",this.preventColFilteringBasedOnDataProperties=!1,this.drillFilter="",this.drillFilterDrills=[],this.customColSpec="",this.customRowSpec="",this.linkedMdx="",this.canDoDrillthrough=!1,this.firstRun=!0,this.baseType="",this.hasDatasourceChooser=!1,this.oneItemDrillApplied=!1}get inline(){return this.widget.inline}ngOnInit(){this.baseType=this.widget?.type,this.override=this.getOverride(),this.extendPropsWithOverrides(),this.loadWidgetSettings(),this.initializeDrills(),this.initializeTile(),this.initializeActionAndPvItems(),this.initializeDataSourceChooser(),this.initializeDrillthrough(),this.initializeLiveDataUpdate(),this.subscribe(),this.initializeLinkedWidgets(),this.initializeDependants(),this.initializeDrillFilter(),this.initializeChoseDataSource(),this.initializeInputControls(),this.initializeActions(),this.requestPivotData(),this.initializeDataRequest()}ngOnDestroy(){clearInterval(this.liveUpdateInterval),this.subDrilldown?.unsubscribe(),this.subDrillthrough?.unsubscribe(),this.subLinkedMdx?.unsubscribe(),this.subRefreshDependants?.unsubscribe(),this.subDrillFilter?.unsubscribe(),this.subDrillFilterAll?.unsubscribe(),this.subPivotVar?.unsubscribe(),this.subPivotVarAll?.unsubscribe(),this.subDataSourceChange?.unsubscribe(),this.subColSpec?.unsubscribe(),this.subColSpecAll?.unsubscribe(),this.subChartType?.unsubscribe()}getDataProp(e){if(this.widget.dataProperties)return this.widget.dataProperties.find(i=>i.name===e)}getDataPropByDataValue(e){if(!this.widget.dataProperties||!e)return;let i=e.split("/");return this.widget.dataProperties.find(r=>{let n=r.dataValue?.toString().split("/");return i.some(l=>n.includes(l))})}getDataPropValue(e){let i=this.getDataProp(e);if(i&&i.dataValue!==null&&i.dataValue!==void 0)return i.dataValue.toString()}initializeActions(){if(!this.widget.controls||this.widget.controls.length===0)return;let e=["chooserowspec","setrowspec","choosedatasource","choosecharttype","applyfilter","setfilter","refresh","reloaddashboard","showlisting","showgeolisting","showbreakdown","setdatasource","applyvariable","setrowcount","setrowsort","setcolumncount","setcolumnsort","choosecolumnspec"],i=this.widget.controls.filter(r=>e.indexOf(r.action.toLowerCase())===-1&&r.type!=="hidden");i.length!==0&&(this.widget.acItems=i)}initializeChoseDataSource(){return Yt(this,null,function*(){if(!this.widget)return;let e=n=>n.action==="chooseDataSource"||n.action==="chooseRowSpec"||n.action==="setRowSpec"||n.action==="chooseColumnSpec",i=this.widget.type===wh;if(!i&&(!this.widget.controls||this.widget.controls.length===0))return;let r=[];if(this.widget.controls&&(r=this.widget.controls.filter(e).filter(n=>n.location!=="dashboard")),i){let n=this.dbs.getWidgets();for(let l=0;l<n.length;l++)n[l].controls&&(r=r.concat(n[l].controls.filter(e).filter(a=>a.location==="dashboard")))}if(r.length!==0){this.hasDatasourceChooser=!0,this.widget.dsItems=[];for(let n=0;n<r.length;n++){let l=r[n].valueList,a=r[n].displayList,h={},c=r[n].targetProperty;if(c)c.toLowerCase().slice(-9)===".termlist"&&(c=c.slice(0,-9)),c.toLowerCase().slice(-5)===".term"&&(c=c.slice(0,-5));else{if(!l||!a)continue;{h={};let p=l.split(",");a.split(",").forEach((b,v)=>{h[b]=p[v]})}}let g={action:r[n].action,label:r[n].label||this.i18n.get("dataSource"),dsSelected:r[n].value,control:r[n],labels:[],values:[],field:"select"};this.widget.dsItems.push(g);let u=null;if(c?u=yield this.ds.getTermList(c):u=h,u&&typeof u=="object"){for(let b in u)u[b]===this.widget.dataSource&&(this.widget.dsSelected=b);g.labels=[],g.values=[],(g.control?.action==="chooseRowSpec"||g.control?.action==="setRowSpec")&&(g.labels.push(""),g.values.push(""));for(let b in u)g.labels.push(b),g.values.push(u[b]);let p=-1;this.customDataSource?p=g.values.findIndex(b=>b===this.customDataSource):p=g.values.findIndex(b=>b.split("/").pop()===g.dsSelected),p===-1?g.dsSelected=g.labels[0]:g.dsSelected=g.labels[p],this.parent?.filters.detectChanges()}}}})}onVariableChange(e){let i=e.target;this.bs.broadcast(`updatePivotVar:${i}`)}onPivotVarChanged(){this.requestData()}getDataByColumnName(e,i,r,n=""){if(!e||!e.Data||!e.Cols||!e.Cols[0]||!e.Cols[0].tuples)return;let l=e.Cols[0].tuples.filter(g=>g.caption.toLowerCase()===i.toLowerCase());if(l.length===0)return;let a=e.Cols[0].tuples.indexOf(l[0]),h=e.Cols[0].tuples[a].originalIndex;h!==void 0&&(a=h);let c=e.Data[r+a];return n&&(c=this.formatNumber(c,n)),c}initializeDrillFilter(){let e=this.fs.getClickFilterTarget(this.widget.name);e?.length&&(this.drillFilterWidgets=e)}resetClickFilter(){if(this.widget.clickFilterActive=!1,!(!this.drillFilterWidgets||!this.drillFilterWidgets.length))for(let e=0;e<this.drillFilterWidgets.length;e++){if(!this.drillFilterWidgets[e])continue;this.drillFilterWidgets[e].split(",").forEach(r=>{this.bs.broadcast("drillFilter:"+r,{path:"",drills:[]})})}}doDrillFilter(e,i=[]){if(!this.drillFilterWidgets||!this.drillFilterWidgets.length)return;let r=i.slice();e||r.pop(),this.widget.clickFilterActive=!!e;for(let n=0;n<this.drillFilterWidgets.length;n++){if(!this.drillFilterWidgets[n])continue;this.drillFilterWidgets[n].split(",").forEach(a=>{this.bs.broadcast("drillFilter:"+a,{path:e,drills:r})})}this.parent?.header?.cd.detectChanges()}onDrillFilter(e,i){this.drillFilter=e,this.drillFilterDrills=i,this.requestData()}actionNavigate(e,i=!1){let r=e.targetProperty,n=r.toUpperCase().indexOf("DASHBOARD=");if(n!==-1){let l=r.substring(n+10,r.length);l.indexOf("?")===-1&&(l=l.replace("&","?"));let a=location.href;a.indexOf("#")!==-1?r=a.split("#")[0]+"#/"+xs+"/"+l:r+="#/"+xs+"/"+l}if(r=r.replace("$$$FILTERS",this.fs.getFiltersUrlString(this.widget.name)),this.lpt&&this.lpt.getSelectedRows().length){let l=this.lpt.dataController.getData(),a=l.dataArray[(this.lpt.getSelectedRows()[0]-1)*l.columnProps.length],h=r.toLowerCase().indexOf("$$$currvalue");h!==-1&&(r=r.substring(0,h)+a+r.substring(h+12,r.length))}if(this.lpt&&this.lpt.getSelectedRows().length){let l=this.lpt.dataController.getData(),a=this.lpt.getSelectedRows(),h=[];for(let g=0;g<a.length;g++){let u=l.dataArray[(a[g]-1)*l.columnProps.length];h.push(u)}let c=r.toLowerCase().indexOf("$$$valuelist");c!==-1&&(r=r.substring(0,c)+h.join(",")+r.substring(c+12,r.length))}i?window.open(r,"_blank"):window.location.href=r}performAction(e){let i=e.action.toLowerCase();i==="viewdashboard"?this.navigateDashboard(e.targetProperty):i==="navigate"?this.actionNavigate(e):i==="newwindow"?this.actionNavigate(e,!0):i==="setColumnSpec"?(this.customColSpec=e.targetProperty,this.requestData()):this.ds.execAction(e.action,this.widget.cube?this.widget.cube:this.widget.dataSource.replace(".kpi","")).then(()=>this.requestData())}getDrillTitle(e){if(!e)return this.widget.baseTitle||"";let i=e.path.split(".");return i.pop(),(this.widget.baseTitle?this.widget.baseTitle+" - ":"")+(e.name?i[i.length-1]+" - ":"")+(e.name||e.category)}isEmptyData(e){return!e||!e.Cols||!e.Cols[1]||!e.Cols[1]||!e.Cols[1].tuples||e.Cols[1].tuples.length===0||!e.Data||e.Data.length===0||e.Data[0]==="@NOPROPERTY"}doDrillUp(){this.widget.isDrillthrough?(this.restoreWidgetType(),this.widget.isDrillthrough=!1,this.widget.backButton=!!this.drills?.length,this.parent.header?.cd.detectChanges()):this.doDrillOnly()}restoreWidgetType(){delete this.widget.pivotMdx,delete this.widget.pivotData,this.widget?.oldType&&(this.widget.type=this.widget.oldType,this.parent?.updateComponent())}changeWidgetType(e){this.widget.oldType=this.widget.type,this.widget.type=e,this.parent?.updateComponent()}getDrillthroughMdx(e){let i=e.toLowerCase(),r="select non empty",n=i.lastIndexOf(r);n===-1&&(r="select",n=i.lastIndexOf(r));let l=i.lastIndexOf("from");if(n===-1){console.warn("Can't find 'select' in MDX during calculation drillthrough mdx");return}if(l===-1){console.warn("Can't find 'from' in MDX during calculation drillthrough mdx");return}let a="";if(this.pivotData?.listingRows){let c=parseInt(this.pivotData.listingRows,10);c&&(a=` MAXROWS ${c} `)}let h=this.widget.controls.find(c=>c.action==="showListing");if(h){let c=h.targetPropertyDisplay;if(c)return"DRILLTHROUGH "+a+e.substring(0,n+r.length)+" "+e.substring(l,e.length)+` %LISTING [${c}]`}return"DRILLTHROUGH "+a+e.substring(0,n+r.length)+" "+e.substring(l,e.length)}doDrill(e,i,r,n,l=!1,a,h){return new Promise((c,g)=>{this.clearError(),l||this.doDrillFilter(e,this.drills);let u=this.drills.slice();e?this.drills.push({path:e,name:i||"",category:r}):this.drills.pop();let p=this.getMDX();this.drills=u,this.showLoading();let b=()=>{if(n){n();return}if(!this.canDoDrillthrough)return;let v=this.getDrillthroughMdx(p)||"";this.ds.execMDX(v).then(x=>{!x||!x.children||x.children.length===0||(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.pivotData=x,this._currentData=x,this.displayAsPivot(v))}).catch(x=>{h&&h(x)})};this.showLoading(),this.ds.execMDX(p).catch(v=>{l?h&&h(v):b()}).then(v=>{if(v){if(this.chartConfig&&(this.chartConfig.loading=!1),this.isEmptyData(v)&&e){b();return}this.isEmptyData(v)||(e?this.drills.push({path:e,name:i||"",category:r}):this.drills.pop(),this.widget.backButton=this.drills.length!==0,this.widget.title=this.getDrillTitle(this.drills[this.drills.length-1]),this.broadcastDependents(p),this.retrieveData(v),this.updateLocationDrillParameters(),this.parent?.header?.cd.detectChanges(),this._currentData=v,a&&a())}}).finally(()=>{this.hideLoading(),c()})})}doDrillthrough(e,i,r,n,l=!1,a,h){return new Promise((c,g)=>{if(!this.canDoDrillthrough){c();return}if(this.clearError(),this.widget.kpitype&&i){this.doKPIDrillthrough(i);return}let u=this.drills.slice();e?Array.isArray(e)?e.forEach(v=>{this.drills.push({path:v,name:i||"",category:r})}):this.drills.push({path:e,name:i||"",category:r}):this.drills.pop();let p=this.getMDX();this.drills=u,this.showLoading();let b=this.getDrillthroughMdx(p)||"";this.ds.execMDX(b).then(v=>{!v||!v.children||v.children.length===0||(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.pivotData=v,this.displayAsPivot(b))}).catch(v=>{h&&h(v)}).finally(()=>{this.hideLoading()})})}doDrillOnly(e,i,r,n,l=!1,a,h){return new Promise((c,g)=>{this.clearError();let u=this.drills.slice();e?this.drills.push({path:e,name:i||"",category:r}):this.drills.pop();let p=this.getMDX();this.drills=u,this.showLoading(),this.ds.execMDX(p).catch(b=>{h&&h(b)}).then(b=>{b&&(this.chartConfig&&(this.chartConfig.loading=!1),!this.isEmptyData(b)&&(this._currentData=b,e?this.drills.push({path:e,name:i||"",category:r}):this.drills.pop(),this.widget.backButton=this.drills.length!==0,this.widget.title=this.getDrillTitle(this.drills[this.drills.length-1]),this.broadcastDependents(p),this.retrieveData(b),this.updateLocationDrillParameters(),this.parent?.header?.cd.detectChanges(),a&&a()))}).finally(()=>{this.hideLoading(),c()})})}checkForAutoDrill(e){return Yt(this,null,function*(){let i=!1;return e?.Cols[1]?.tuples?.length===1&&(this.oneItemDrillApplied=!0,yield this.doDrill(e.Cols[1].tuples[0].path,e.Cols[1].tuples[0].caption,void 0,void 0,!0,()=>{this.widget.backButton=!1,this.parent?.header?.cd.detectChanges(),i=!0},()=>{this.oneItemDrillApplied=!1})),i})}showLoading(){this.isSpinner||(this.isSpinner=!0,this.parent.cd.detectChanges(),this.cd.detectChanges())}hideLoading(){this.isSpinner&&(this.isSpinner=!1,this.parent.cd.detectChanges(),this.cd.detectChanges())}applyDrill(e){let i=this.route.snapshot.queryParamMap.get("filter");i&&(e=e+" %FILTER "+i);let r=this.drills;if(r.length===0&&(r=this.drillFilterDrills),r.length===0)return e;let n=[];this.pivotData&&this.pivotData.rowAxisOptions&&this.pivotData.rowAxisOptions.drilldownSpec&&(n=this.pivotData.rowAxisOptions.drilldownSpec.split("^"));for(let g=0;g<r.length;g++)r[g].path&&(e+=" %FILTER "+r[g].path);let l=n[r.length-1],a=l||r[r.length-1].path,h=e.match(/ON 0,(.*)ON 1/),c="";if(h&&h.length===2){let g=h[1],u=g.match(/ORDER\((.*?)\,/);if(u&&u[0]&&(c=u[0]),c)e=e.replace(c,"ORDER("+a+".children,");else{let p=g.indexOf("NON EMPTY")!==-1;e=e.replace(g,(p?"NON EMPTY ":" ")+a+" ")}}if((!l&&n.length!==0||n.length===0)&&!e.match(/\{.*\} ON 1/)){if(e.indexOf(".Members ON 1 FROM")===-1)c||(e=e.replace(" ON 1 FROM"," .children ON 1 FROM"));else{let u=e.indexOf("["),p=".Members ON 1 FROM",b=e.indexOf(p);e=e.substr(0,u)+a+".children ON 1 FROM"+e.substr(b+p.length)}return e}return this.drillFilter&&(e=e+" %FILTER "+this.drillFilter),e}changeDataSource(e,i){if(i&&i?.control?.target!==""){let r=i?.control?.target.split(",")??[];for(let n=0;n<r.length;n++)this.bs.broadcast("changeDataSource:"+r[n],e);return}e?this.customDataSource=e:this.customDataSource="",this.requestPivotData(),this.updateDatasourceParameterInURL()}onColSpecChanged(e){this.customColSpec=e,this.requestData()}changeRowSpec(e,i=!0){e?this.customRowSpec=e:this.customRowSpec="",i&&this.requestData()}changeColumnSpec(e,i){let r="";e&&(r=e.replace(/\\/g,""));let n=i.control?.target;this.bs.broadcast("setColSpec:"+n,r)}onDataSourceChange(e){let i="",r=e.dsSelected;if(r){let n=e.labels?.indexOf(r.toString())??-1;n!==-1&&(i=e?.values?.[n]||"")}switch(e.action){case"chooseDataSource":this.changeDataSource(i,e);break;case"chooseRowSpec":case"setRowSpec":this.changeRowSpec(i,e.action!=="setRowSpec");break;case"chooseColumnSpec":this.changeColumnSpec(i,e);break}}onRefreshDependents(){this.broadcastDependents()}onSetLinkedMdx(e){this.widget.linkedMdx=e,this.linkedMdx=e,this.requestData()}isLinked(){return!!this.widget?.dataLink}hasDependents(){return!!this.widget?.dependents?.length}requestPivotData(){let e=this.customDataSource||this.widget.dataSource;this.widget.kpitype||e&&this.ds.getPivotData(e).then(i=>this._retriveDataSource(i)).catch(i=>{this.showError(i.error?.Error||i.message)})}convertKPIToMDXData(e,i=!1){let r=e,n=e.Result,l={Info:{cubeName:r.Info.KpiName},Cols:[],Data:[]},a=[];for(let c=0;c<n.Properties.length;c++)a.push({caption:n.Properties[c].caption||n.Properties[c].name,dimension:n.Properties[c].name});l.Cols.push({tuples:a});let h=[];for(let c=0;c<n.Series.length;c++){for(let u=0;u<n.Properties.length;u++)l.Data.push(n.Series[c][n.Properties[u].name]);let g=n.Series[c]["%series"]||n.Series[c].seriesName;h.push({title:g,caption:g})}return l.Cols.push({tuples:h}),i||this.removeColsThatNotExistInDataProperties(l),l}retrieveData(e){if(this.hideLoading(),e.Error){this.showError(e.Error);return}}_retriveKPI(e,i=!1){if(this){if(this._kpiData=e,this.lpt){this.lpt.dataController.setData(this.lpt.dataSource._convert(this.convertKPIToMDXData(e,i)));return}this.retrieveData(this.convertKPIToMDXData(e,i))}}_retriveDataSource(e){this&&(this.pivotData=e,this.customDataSource&&(this.widget.mdx=e.mdx,this.requestData()))}onResize(){}requestData(){if(!this.widget.isSupported)return;if(this.oneItemDrillApplied&&(this.drills=[],this.oneItemDrillApplied=!1,this.widget.backButton=!1,this.widget.title=this.getDrillTitle(),this.parent?.header?.cd.detectChanges()),this.widget.kpitype){this._requestKPIData();return}let e=this.getMDX();if(!e){this.isSpinner=!1;return}this.clearError(),setTimeout(()=>this.broadcastDependents(),0),e.indexOf("$")!==-1&&!this.pivotVariables&&this.ds.getPivotVariables(this.widget.cube).then(i=>{this.pivotVariables=i}).catch(i=>{this.showError(i.message)}),this.showLoading(),this.ds.execMDX(e).then(i=>{this.removeColsThatNotExistInDataProperties(i),this._currentData=i,this.retrieveData(i)}).catch(i=>this._onRequestError(i)).finally(()=>{this.hideLoading()})}broadcastDependents(e){if(this.hasDependents())for(let i=0;i<this.widget.dependents.length;i++)this.bs.broadcast("setLinkedMDX:"+this.widget.dependents[i],e||this.getMDX())}_onRequestError(e,i){this.chartConfig&&(this.chartConfig.loading=!1);let r=this.i18n.get("errWidgetRequest");switch(i){case 401:case 403:r=this.i18n.get("errUnauth");break;case 404:r=this.i18n.get("errNotFound");break}this.showError(r)}clearError(){this.parent&&this.parent.clearError()}showError(e){this.parent&&this.parent.showError(e)}checkColSpec(e){if(this.customColSpec){let i="SELECT NON EMPTY",r=e.lastIndexOf(i);if(r===-1&&(i="SELECT",r=e.lastIndexOf(i)),r===-1)return e;let n=e.lastIndexOf("ON 0");return n===-1||n<r||(e=e.replace(e.substring(r,n),i+" "+this.customColSpec+" ")),e}return e}replaceMDXVariables(e,i){if(e.indexOf("$")===-1)return e;let r=i.filter(n=>n.action==="applyVariable");if(this.widget.shared){let n=this.route.snapshot.queryParamMap.get("variables");n&&n.split("~").forEach(a=>{let h=a.split("."),c=h[0],g=h[1],u=r.findIndex(p=>p.targetProperty==="$variable."+c);u!==-1?r[u].value=g:r.push({targetProperty:"$variable."+c,value:g})})}if(!r.length)return e;for(let n=0;n<r.length;n++){let l=r[n];if(l.value==="")continue;let a=l.targetProperty.toLowerCase(),h;for(;(h=e.toLowerCase().indexOf(a))!==-1;)e=e.substr(0,h)+l.value+e.substr(h+a.length,e.length)}return e}addQueryFilters(e){let i=this.route.snapshot.queryParamMap.get("SETTINGS");if(!i)return e;let r=i.split(";"),n="",l="";for(let a=0;a<r.length;a++){let h=r[a].split(":");if(h[0].toLowerCase()==="target"){n=h[1];continue}h[0].toLowerCase()==="filter"&&(l=h.slice(1).join(":"))}if(n&&(this.widget.name===n||n==="*"||n.split(",").indexOf(this.widget.name)!==-1)&&l){let a=l.split("~");for(let h=0;h<a.length;h++){let c=a[h],g=c.indexOf("%NOT")!==-1;if(c.indexOf("{")!==-1){let u=c.substring(0,c.indexOf("{")).replace("%NOT ",""),p=c.match(/\{([^)]+)\}/)?.[1].split(",");e+=" %FILTER %OR({",e+=p?.map(b=>u+b+(g?".%NOT":"")).join(",")||"",e+="})"}else e+=" %FILTER "+c}}return e}dateToHorolog(e){let i=new Date("12/31/1840Z"),n=this.us.toDate(e).getTime()-i.getTime();return Math.ceil(n/(1e3*3600*24)).toString()}getMDX(){let e=!1;if(this.widget.kpitype)return"";let i=this.fs.getWidgetFilters(this.widget.name);if(this.isLinked()){let l=this.replaceMDXVariables(this.linkedMdx||this.widget.linkedMdx||"",i);return l=this.checkColSpec(l),this.applyDrill(l)}if(this.drillFilter){let l=this.drillFilter.indexOf("&");l!==-1&&i.push({targetProperty:this.drillFilter.substring(0,l-1),value:"&"+this.drillFilter.substring(l+1,this.drillFilter.length)})}for(let l=0;l<i.length;l++){let a=i[l];if(a.value!==""||a.isInterval){e=!0;break}}let r=this.replaceMDXVariables(this.widget.mdx,i);if(!r)return this.widget.edKey||this.showError("Widget without MDX"),"";if(this.customRowSpec){let l=r.indexOf("ON 0"),a=r.indexOf("ON 1");l!==-1&&(r=r.slice(0,l)+"ON 0, NON EMPTY "+this.customRowSpec+" ON 1 "+r.slice(a+4))}if(r=this.applyRowCount(r),r=this.checkColSpec(r),r=this.addQueryFilters(r),!e||this.widget.tile)return this.applyDrill(r);let n="";for(let l=0;l<i.length;l++){let a=i[l];if(!a.isInterval)continue;let h=a.targetProperty,c=a.values[a.fromIdx].path,g=a.values[a.toIdx].path;a.isDate&&(c=this.dateToHorolog(c.replace("&[","").replace("]","")),g=this.dateToHorolog(g.replace("&[","").replace("]","")),c=`&[${c}]`,g=`&[${g}]`),r+=" %FILTER %OR("+h+"."+c+":"+g+")"}for(let l=0;l<i.length;l++){let a=i[l];if(a.action!=="applyVariable"&&a.value!==""&&!a.isInterval){let h="{";a.isExclude&&(h="(");let c=a.value.toString().split("|"),g=a.targetProperty;a.isExclude?r+=" %FILTER "+h:r+=" %FILTER %OR("+h;for(let u=0;u<c.length;u++){let p=c[u];a.isDate&&(p=this.dateToHorolog(p.replace("&[","").replace("]","")),p=`&[${p}]`),a.isExclude?r+=g+"."+p+".%NOT,":r+=g+"."+p+","}h="}",a.isExclude&&(h=")"),r=r.substr(0,r.length-1)+" "+h,a.isExclude||(r+=")")}}if(n){let l=r.toUpperCase(),a=l.indexOf("WHERE");a===-1?(a=l.indexOf("%FILTER"),a===-1?r+=" WHERE "+n:r=r.slice(0,a)+" WHERE "+n+" "+r.slice(a)):r=r.slice(0,a)+" "+n+" AND "+r.slice(a)}return this.applyDrill(r)}onHeaderButton(e){e.name==="expand"&&(this.widget.isExpanded=e.state,this.widget.dragEnabled=this.widget.isExpanded,setTimeout(()=>{this.onResize()},0))}displayAsPivot(e){this.widget.type==="pivot"?(this.widget.isDrillthrough=!1,this.restoreWidgetType()):(this.widget.pivotMdx=e||this.getMDX(),this.changeWidgetType("pivot")),this.parent?.cd&&this.parent.cd.detectChanges()}formatNumber(e,i=""){let r="";if(e==null&&(e=""),i?r=(0,Qn.default)(e).format(i.replace(/;/g,""))||"":r=e.toString(),this.dataInfo){let n=this.dataInfo.numericGroupSeparator,l=this.dataInfo.numericGroupSize||3;if(n){let a=r.split(".");a[0]=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),r=a.join(".")}this.dataInfo.decimalSeparator&&(r=r.replace(/\./g,this.dataInfo.decimalSeparator))}return r}getDrillsAsParameter(){let e=this.drills;return e?.length?encodeURIComponent(e.map(i=>i.path).join("~")):""}getFormat(e,i,r){let n="";return this.widget?.format&&(n=this.widget.format),i.Cols[0].tuples[e].format&&(n=i.Cols[0].tuples[e].format),r?.format&&(n=r?.format),n}getDataValue(e,i,r){let n=i.Data[e],l=this.getFormat(e,i,r);return l&&(n=(0,Qn.default)(n).format(l)),n}_requestKPIData(e,i=!1){let r=this.customDataSource||this.widget.dataSource;if(!r)return;let n=this.fs.getWidgetFilters(this.widget.name)?.filter(a=>!!a.value).map(a=>a.value.toString().split("|").map(c=>({name:a.targetProperty,value:c,exclude:!!a.isExclude}))).flat();e&&n.push(...e);let l=!!e||i;return this.showLoading(),this.ds.getKPIData(r,n,l).then(a=>this._retriveKPI(a,l)).finally(()=>{this.hideLoading()})}removeColsThatNotExistInDataProperties(e){if(this.preventColFilteringBasedOnDataProperties||!this.widget.dataProperties?.length||!e?.Cols[0]?.tuples?.length)return;let i=[],r=e.Cols[0]?.tuples?.length||0;r&&(e.Cols[0].tuples=e?.Cols[0]?.tuples.filter((n,l)=>{let a=n.dimension.toString().split("/"),h=this.widget.dataProperties.some(c=>c.dataValue.toString().split("/").some(u=>a.includes(u)));return h||i.push(l),h}),e.Data=e.Data?.filter((n,l)=>!i.some(a=>l%r===a)))}subscribe(){this.subDrillFilter=this.bs.subscribe("drillFilter:"+this.widget.name,({path:e,drills:i})=>{this.onDrillFilter(e,i)}),this.subDrillFilterAll=this.bs.subscribe("drillFilter:*",({path:e,drills:i})=>{this.onDrillFilter(e,i)}),this.subDrilldown=this.bs.subscribe("drilldown:"+this.widget.name,({path:e,title:i})=>{this.doDrillOnly(e,i,i)}),this.subDrillthrough=this.bs.subscribe("drillthrough:"+this.widget.name,({path:e,title:i})=>{this.doDrillthrough(e,i,i)}),this.subPivotVar=this.bs.subscribe("updatePivotVar:"+this.widget.name,e=>this.onPivotVarChanged()),this.subPivotVarAll=this.bs.subscribe("updatePivotVar:*",e=>this.onPivotVarChanged()),this.subColSpec=this.bs.subscribe("setColSpec:"+this.widget.name,e=>this.onColSpecChanged(e)),this.subColSpecAll=this.bs.subscribe("setColSpec:*",e=>this.onColSpecChanged(e)),this.subDataSourceChange=this.bs.subscribe("changeDataSource:"+this.widget.name,e=>this.changeDataSource(e)),this.subChartType=this.bs.subscribe("setWidgetType:"+this.widget.name,e=>{this.changeWidgetType(e)})}getOverride(){let e=this.baseType;return e==="lineChartMarkers"&&(e="lineChart"),e==="regular"&&(e="scoreCard"),this.widget?.overrides?.find(i=>i._type===e)}updateLocationDrillParameters(){if(!this.widget?.shared)return;let e=location.hash,i=this.getDrillsAsParameter();this.ds.router.navigate([],{relativeTo:this.route,queryParams:{drilldown:i},queryParamsHandling:"merge"});let r={type:"drill",index:this.route.snapshot.queryParamMap.get("widget"),widget:this.widget,drills:this.drills};window.parent&&window.parent.postMessage(r,"*");try{window.parent.dsw?.onDrill&&window.parent.dsw.onDrill(r)}catch(n){console.error(n)}}updateDatasourceParameterInURL(){if(!this.widget?.shared)return;this.ds.router.navigate([],{relativeTo:this.route,queryParams:{datasource:this.customDataSource},queryParamsHandling:"merge"});let e={type:"datasource",index:this.route.snapshot.queryParamMap.get("widget"),widget:this.widget,datasource:this.customDataSource};window.parent&&window.parent.postMessage(e,"*");try{window.parent.dsw?.onDataSource&&window.parent.dsw.onDataSource(e)}catch(i){console.error(i)}}navigateDashboard(e){this.ds.router.navigateByUrl(xs+"/"+e)}initializeInputControls(){let e="setRowCount";this.widget.controls.filter(r=>e.includes(r.action)).forEach(r=>{this.widget.dsItems.push({action:r.action,label:r.label||"Row count",field:"input",type:"number",_value:r.value||void 0})})}applyRowCount(e){let i=this.widget.dsItems.find(h=>h.action==="setRowCount");if(!i||!i._value)return e;let r=/(HEAD\(.*),(.*)(\))/i;if(e.match(r))return e.replace(r,`$1,${i._value}$3`);let l=e.match(/ON 0,(.*)ON 1/)?.[1];if(!l)return e;l=l.replace("NON EMPTY","");let a=" HEAD("+l.trim()+`, ${i._value}) `;return e.replace(l,a)}extendPropsWithOverrides(){this.override&&this.override.columns?.forEach((e,i)=>{let r=this.widget.dataProperties[i];r&&(e.showAs&&(r.showAs=e.showAs),e.format&&(r.format=e.format),e.display&&(r.display=e.display),e.label&&(r.label=e.label),e.summary&&(r.summary=e.summary),e.rangeLower&&(r.rangeLower=e.rangeLower),e.rangeUpper&&(r.rangeUpper=e.rangeUpper),e.targetValue&&(r.targetValue=e.targetValue),e.thresholdLower&&(r.thresholdLower=e.thresholdLower),e.thresholdUpper&&(r.thresholdUpper=e.thresholdUpper))})}initializeDataSourceChooser(){this.widget.dsItems=[],this.widget.dsLabel="",this.widget.dsSelected="",this.widget&&this.widget.dataSource&&(this.widget.dsSelected=this.us.removeExt(this.widget.dataSource.split("/").pop()))}initializeLiveDataUpdate(){if(!(this.widget&&this.widget.controls))return;let e=this.widget.controls.filter(r=>r.action==="setColumnSpec");e.length!==0&&(this.customColSpec=e[0].targetProperty);let i=this.widget.controls.filter(r=>r.action==="refresh"&&parseInt(r.timeout,10)>0);i.length!==0&&(this.liveUpdateInterval=setInterval(()=>this.requestData(),parseInt(i[0].timeout,10)*1e3))}initializeLinkedWidgets(){if(this.isLinked())if(this.widget.shared||this.widget.inline||this.widget.edKey){let i=this.dbs.getAllWidgets().find(r=>r.name===this.widget.dataLink);i&&(this.linkedMdx=i.mdx)}else this.subLinkedMdx=this.bs.subscribe("setLinkedMDX:"+this.widget.name,e=>this.onSetLinkedMdx(e))}loadWidgetSettings(){let e=this.ss.getAppSettings(),i=e.theme||"";this.widgetsSettings=this.ss.getWidgetsSettings(this.widget.dashboard)||{},this.tc=e?.themeColors?.[i];let r=this.widgetsSettings?.[this.widget.name]?.themeColors?.[i];r&&(this.tc=r)}initializeDrills(){this.widget?.drills&&(this.drills=this.widget.drills)}initializeTile(){this.tile&&(this.widget={},this.us.mergeRecursive(this.widget,this.tile))}initializeActionAndPvItems(){this.widget.acItems=[],this.widget.pvItems=[]}initializeDrillthrough(){this.widget.controls&&this.widget.controls.length&&(this.canDoDrillthrough=!0)}initializeDependants(){this.hasDependents()&&(this.subRefreshDependants=this.bs.subscribe("widget:"+this.widget.name+":refreshDependents",e=>this.onRefreshDependents()))}initializeDataRequest(){this.widget.initialData||(this.widget?.properties?.chartToggle==="table"&&this.widget.type!=="pivot"&&!this.widget.oldType?this.requestData():this.customDataSource||this.requestData())}doKPIDrillthrough(e){if(!this._kpiData)return;let i=this._kpiData.Result.Series.find(a=>a.seriesName===e);if(!i)return;let r=this._kpiData.Result.Properties.map(a=>({name:a.name,value:i[a.name],path:""})),n=this._kpiData.Result.Properties.map(a=>({name:a.name,value:i.seriesName,path:""})),l=this._requestKPIData([...r,...n]);l&&l.then(a=>{this._kpiData&&(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.initialData=this.convertKPIToMDXData(this._kpiData,!0),this.changeWidgetType("pivot"),setTimeout(()=>{delete this.widget.initialData}))})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=yt({type:t,selectors:[["ng-component"]],hostVars:2,hostBindings:function(i,r){i&2&&je("inline",r.inline)},inputs:{model:"model",parent:"parent",widget:"widget"},standalone:!0,features:[bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var ep=["images"];function ip(o,t){if(o&1){let s=hh();Lt(0,"div",2),ch("click",function(){let i=sh(s).$implicit,r=Nt();return rh(r.onClick(i))}),nh(),Lt(1,"svg",3,0)(3,"text"),ie(4),Lt(5,"tspan",4),ie(6),kt(),Lt(7,"tspan",5),ie(8),kt()()(),oh(),Lt(9,"label"),ie(10),kt()()}if(o&2){let s=t.$implicit,e=Nt();je("clickable",e.canDrillthrough),Dt(3),Ee("fill",s.valueColor),Dt(),ms("",s.value," "),Dt(2),Te(s.deltaNeg),Dt(2),Te(s.delta),Dt(2),Te(s.label)}}var Mh=(()=>{let t=class t extends ye{constructor(){super(...arguments),this.images=[],this.widget={},this.textData=[]}get flexDirection(){let e=this.el?.nativeElement;if(e)return e.offsetWidth>e.offsetHeight?"row":"column"}get canDrillthrough(){return this.canDoDrillthrough}ngOnInit(){this.textData=[],super.ngOnInit()}ngAfterViewInit(){}findDataPropByName(e){if(this.widget.dataProperties){for(let i=0;i<this.widget.dataProperties.length;i++)if(this.widget.dataProperties[i].dataValue===e)return this.widget.dataProperties[i]}}adjustSize(){this.images.forEach(e=>{let i=e.nativeElement,n=i.firstChild.getBBox();i.setAttribute("viewBox",[n.x,n.y,n.width,n.height].join(" "))})}retrieveData(e){if(this.textData=[],this.hideLoading(),e)for(let i=0;i<e.Cols[0].tuples.length;i++){let r=null;if(this.widget.dataProperties&&(r=this.getDataPropByDataValue(e.Cols[0].tuples[i].dimension)??null),!r)continue;let n=this.getDataValue(i,e,r),l="var(--cl-text-widget-font)";if(this.widget.tile){let c=document.querySelector("."+Ae.const.fontColors[this.widget.tile.fontColor]);c&&(l=window.getComputedStyle(c).getPropertyValue("color"))}let a=e.Cols[0].tuples[i].caption,h=this.findDataPropByName(e.Cols[0].tuples[i]?.caption);if(h&&(h.label==="$auto"?a=h.dataValue||a:a=h.label||a),a.substr(0,5).toLowerCase()==="delta"){let c=parseInt(a.substring(5,a.length),10)-1;!isNaN(c)&&this.textData[c]&&n.toString()!=="0"&&(n.toString()[0]!=="-"?this.textData[c].delta="+"+n.toString():this.textData[c].deltaNeg=n.toString())}else{let c=l;if(h){let g=parseFloat(h.thresholdLower.toString()),u=parseFloat(h.thresholdUpper.toString()),p=h.override;if(p.normalStyle){let b=this.getCss(p.normalStyle);b.fill&&(c=b.fill)}if(g!==void 0&&!isNaN(g)&&this.getNumber(n)<g){let b=this.widget.properties?.lowRangeColor;p.lowStyle&&(b=this.getCss(p.lowStyle).fill),b&&(c=b)}if(u!==void 0&&!isNaN(u)&&this.getNumber(n)>u){let b=this.widget.properties?.highRangeColor;p.highStyle&&(b=this.getCss(p.highStyle).fill),b&&(c=b)}}this.textData.push({label:a,value:n,color:l,valueColor:c,dimension:e.Cols[0].tuples[i].dimension})}}this.cd.detectChanges(),setTimeout(()=>this.adjustSize())}onClick(e){this.doDrillthrough("",e.label)}getCss(e){let i={};return e.split(";").filter(r=>r).forEach(r=>{let n=r.split(":");i[n[0]]=n[1]}),i}getNumber(e){return typeof e=="string"?parseFloat(e.replace(/,/g,"").replace(/ /g,"")):e}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-wtext"]],viewQuery:function(i,r){if(i&1&&$i(ep,5),i&2){let n;Ji(n=Qi())&&(r.images=n)}},hostVars:2,hostBindings:function(i,r){i&2&&Ee("flex-direction",r.flexDirection)},inputs:{widget:"widget"},standalone:!0,features:[vt,bt],decls:2,vars:0,consts:[["images",""],[1,"item2",3,"clickable"],[1,"item2",3,"click"],[1,"text-widget"],[2,"font-size","4px","fill","red"],[2,"font-size","4px","fill","green"]],template:function(i,r){i&1&&oe(0,ip,11,8,"div",1,ne),i&2&&ae(r.textData)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-display:row;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial}.inline[_nghost-%COMP%]   label[_ngcontent-%COMP%]{background-color:transparent;background-image:none}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:0}label[_ngcontent-%COMP%]{display:block;flex-shrink:0;height:16px;background-image:linear-gradient(to bottom,#f5f5f5 0,#e8e8e8);width:100%;text-align:center;font-family:monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item2[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 100%;justify-content:center;align-items:center;margin:10px;background-color:#fafafa;padding:10px;min-height:0;min-width:0}.item2.clickable[_ngcontent-%COMP%]{cursor:pointer}.item2[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{height:auto;background:transparent;color:gray;font-size:19px}.item2[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{height:50%;width:100%;display:block}.text-widget[_ngcontent-%COMP%]{height:100%}"]});let o=t;return o})();var to=(()=>{let t=class t extends ye{constructor(){super(),this.widget={},this.isSpinner=!1,this._oldMdx=""}ngAfterViewInit(){this.createPivotTable()}ngOnDestroy(){super.ngOnDestroy()}createPivotTable(){let e=this,i={initialData:this.widget.pivotData,container:this.el.nativeElement,pivotProperties:{},enableListingSelect:!1,enableSearch:!1,dataSource:{pivot:this.widget.dataSource,MDX2JSONSource:this.ds.url.substring(0,this.ds.url.length-1),basicMDX:this.widget.pivotMdx||this.getMDX(),namespace:xs,sendCookies:!0},triggers:{drillDown:r=>this.onDrillDown(r),rowClick:(r,n,l)=>e.drillFilterWidgets?.length?(e.doDrillFilter(l.source.path,e.drills),e.parent?.header?.cd.detectChanges(),!1):!this.widget.kpitype,back:r=>this.onDrillDown(r),cellDrillThrough:(...r)=>this.onDrillThrough(...r),responseHandler:r=>{r.status!==200&&this.showError(r.xhr.responseText)}},loadingMessageHTML:'<img src="assets/img/spinner.svg">',columnResizeAnimation:!0,locale:this.i18n.current,hideButtons:!0,formatNumbers:"#,###.##",controls:this.widget.controls};if(delete this.widget.pivotMdx,this.lpt=new LightPivotTable(i),this.widget.edKey&&this.lpt?.pivotView.displayMessage(""),this.lpt&&this.widget.initialData){let r=this.widget.initialData;setTimeout(()=>{this.lpt?.dataController.setData(this.lpt.dataSource._convert(r))})}}doDrillUp(){this.widget.isDrillthrough&&this.restoreWidgetType?(this.widget.isDrillthrough=!1,this.restoreWidgetType(),this.widget.kpitype&&this.requestData()):this.lpt?.CONTROLS.back(),this.widget.backButton=this.lpt?.DRILL_LEVEL!==0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges()}onDrillThrough(...e){if(!this.canDoDrillthrough)return!1;if(this.widget.kpitype){let{cellData:i,x:r,y:n}=e[0],{info:l,dimensions:a}=e[1];if(!a[0])return;let h=a[0][r-l.leftHeaderColumnsNumber]?.dimension||"",c=a[0][0]?.dimension||"",g=a[1][n-l.topHeaderRowsNumber]?.title||"";if(!h||!c)return;let u=[{name:h,value:i.value,path:""},{name:c,value:g,path:""}];return this._requestKPIData(u)?.then(()=>{this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges()}),!1}return this._oldMdx=this.lpt?.getActualMDX()||"",this.widget.backButton=!0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges(),!0}onDrillDown(e){e.path?(this.doDrillFilter(e.path,this.drills),this.drills.push({path:e.path,name:"",category:""}),this.widget.backButton=!0):(this.drills.pop(),this.doDrillFilter(e.path,this.drills)),this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges(),this.broadcastDependents(e.mdx)}requestData(){let e=this.customDataSource||this.widget.dataSource;if(this.widget.kpitype){this._requestKPIData();return}if(this.lpt){let i=this.getMDX();if(this.lpt.isListing()&&(delete this.lpt.CONFIG.initialData,i.toLowerCase().substr(0,12)!=="drillthrough"&&(i=this.getDrillthroughMdx(i)||"")),i==="")return;this.drillFilter&&(i=i+" %FILTER "+this.drillFilter),this.broadcastDependents(),this.clearError(),this.lpt.changeBasicMDX(i)}}onResize(){this.lpt&&setTimeout(()=>this.lpt?.updateSizes(),100)}print(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=yt({type:t,selectors:[["dsw-pivot"]],inputs:{widget:"widget"},standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},styles:["[_nghost-%COMP%]{height:100%}"]});let o=t;return o})();var eo=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var Jt=eo;var Be={PROPERTYCHANGE:"propertychange"};var io=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},bs=io;function $e(o,t){return o>t?1:o<t?-1:0}function vs(o,t,s){if(o[0]<=t)return 0;let e=o.length;if(t<=o[e-1])return e-1;if(typeof s=="function"){for(let i=1;i<e;++i){let r=o[i];if(r===t)return i;if(r<t)return s(t,o[i-1],r)>0?i-1:i}return e-1}if(s>0){for(let i=1;i<e;++i)if(o[i]<t)return i-1;return e-1}if(s<0){for(let i=1;i<e;++i)if(o[i]<=t)return i;return e-1}for(let i=1;i<e;++i){if(o[i]==t)return i;if(o[i]<t)return o[i-1]-t<t-o[i]?i-1:i}return e-1}function Eh(o,t,s){for(;t<s;){let e=o[t];o[t]=o[s],o[s]=e,++t,--s}}function mi(o,t){let s=Array.isArray(t)?t:[t],e=s.length;for(let i=0;i<e;i++)o[o.length]=s[i]}function he(o,t){let s=o.length;if(s!==t.length)return!1;for(let e=0;e<s;e++)if(o[e]!==t[e])return!1;return!0}function Th(o,t,s){let e=t||$e;return o.every(function(i,r){if(r===0)return!0;let n=e(o[r-1],i);return!(n>0||s&&n===0)})}function xi(){return!0}function yi(){return!1}function Ge(){}function Ah(o){let t=!1,s,e,i;return function(){let r=Array.prototype.slice.call(arguments);return(!t||this!==i||!he(r,e))&&(t=!0,i=this,e=r,s=o.apply(this,arguments)),s}}function Je(o){for(let t in o)delete o[t]}function bi(o){let t;for(t in o)return!1;return!t}var so=class extends bs{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,s){if(!t||!s)return;let e=this.listeners_||(this.listeners_={}),i=e[t]||(e[t]=[]);i.includes(s)||i.push(s)}dispatchEvent(t){let s=typeof t=="string",e=s?t:t.type,i=this.listeners_&&this.listeners_[e];if(!i)return;let r=s?new Jt(t):t;r.target||(r.target=this.eventTarget_||this);let n=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});e in n||(n[e]=0,l[e]=0),++n[e];let a;for(let h=0,c=i.length;h<c;++h)if("handleEvent"in i[h]?a=i[h].handleEvent(r):a=i[h].call(this,r),a===!1||r.propagationStopped){a=!1;break}if(--n[e]===0){let h=l[e];for(delete l[e];h--;)this.removeEventListener(e,Ge);delete n[e]}return a}disposeInternal(){this.listeners_&&Je(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,s){let e=this.listeners_&&this.listeners_[t];if(e){let i=e.indexOf(s);i!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(e[i]=Ge,++this.pendingRemovals_[t]):(e.splice(i,1),e.length===0&&delete this.listeners_[t]))}}},Li=so;var ut={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Mt(o,t,s,e,i){if(e&&e!==o&&(s=s.bind(e)),i){let n=s;s=function(){o.removeEventListener(t,s),n.apply(this,arguments)}}let r={target:o,type:t,listener:s};return o.addEventListener(t,s),r}function Cs(o,t,s,e){return Mt(o,t,s,e,!0)}function At(o){o&&o.target&&(o.target.removeEventListener(o.type,o.listener),Je(o))}var _s=class extends Li{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ut.CHANGE)}getRevision(){return this.revision_}onInternal(t,s){if(Array.isArray(t)){let e=t.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=Mt(this,t[r],s);return i}return Mt(this,t,s)}onceInternal(t,s){let e;if(Array.isArray(t)){let i=t.length;e=new Array(i);for(let r=0;r<i;++r)e[r]=Cs(this,t[r],s)}else e=Cs(this,t,s);return s.ol_key=e,e}unInternal(t,s){let e=s.ol_key;if(e)sp(e);else if(Array.isArray(t))for(let i=0,r=t.length;i<r;++i)this.removeEventListener(t[i],s);else this.removeEventListener(t,s)}};_s.prototype.on;_s.prototype.once;_s.prototype.un;function sp(o){if(Array.isArray(o))for(let t=0,s=o.length;t<s;++t)At(o[t]);else At(o)}var jr=_s;function Et(){throw new Error("Unimplemented abstract method.")}var rp=0;function _t(o){return o.ol_uid||(o.ol_uid=String(++rp))}var Br=class extends Jt{constructor(t,s,e){super(t),this.key=s,this.oldValue=e}},ro=class extends jr{constructor(t){super(),this.on,this.once,this.un,_t(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let s;return this.values_&&this.values_.hasOwnProperty(t)&&(s=this.values_[t]),s}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,s){let e;e=`change:${t}`,this.hasListener(e)&&this.dispatchEvent(new Br(e,t,s)),e=Be.PROPERTYCHANGE,this.hasListener(e)&&this.dispatchEvent(new Br(e,t,s))}addChangeListener(t,s){this.addEventListener(`change:${t}`,s)}removeChangeListener(t,s){this.removeEventListener(`change:${t}`,s)}set(t,s,e){let i=this.values_||(this.values_={});if(e)i[t]=s;else{let r=i[t];i[t]=s,r!==s&&this.notify(t,r)}}setProperties(t,s){for(let e in t)this.set(e,t[e],s)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,s){if(this.values_&&t in this.values_){let e=this.values_[t];delete this.values_[t],bi(this.values_)&&(this.values_=null),s||this.notify(t,e)}}},Ut=ro;var np={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"},no=class extends Error{constructor(t){let s=np[t];super(s),this.code=t,this.name="AssertionError",this.message=s}},Gr=no;var Qt={ADD:"add",REMOVE:"remove"};var Ph={LENGTH:"length"},ws=class extends Jt{constructor(t,s,e){super(t),this.element=s,this.index=e}},oo=class extends Ut{constructor(t,s){if(super(),this.on,this.once,this.un,s=s||{},this.unique_=!!s.unique,this.array_=t||[],this.unique_)for(let e=0,i=this.array_.length;e<i;++e)this.assertUnique_(this.array_[e],e);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let s=0,e=t.length;s<e;++s)this.push(t[s]);return this}forEach(t){let s=this.array_;for(let e=0,i=s.length;e<i;++e)t(s[e],e,s)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Ph.LENGTH)}insertAt(t,s){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(s),this.array_.splice(t,0,s),this.updateLength_(),this.dispatchEvent(new ws(Qt.ADD,s,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);let s=this.getLength();return this.insertAt(s,t),this.getLength()}remove(t){let s=this.array_;for(let e=0,i=s.length;e<i;++e)if(s[e]===t)return this.removeAt(e)}removeAt(t){if(t<0||t>=this.getLength())return;let s=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ws(Qt.REMOVE,s,t)),s}setAt(t,s){let e=this.getLength();if(t>=e){this.insertAt(t,s);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(s,t);let i=this.array_[t];this.array_[t]=s,this.dispatchEvent(new ws(Qt.REMOVE,i,t)),this.dispatchEvent(new ws(Qt.ADD,s,t))}updateLength_(){this.set(Ph.LENGTH,this.array_.length)}assertUnique_(t,s){for(let e=0,i=this.array_.length;e<i;++e)if(this.array_[e]===t&&e!==s)throw new Gr(58)}},se=oo;var Ii=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Dh=Ii.includes("firefox"),op=Ii.includes("safari")&&!Ii.includes("chrom"),Og=op&&(Ii.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ii)),Lh=Ii.includes("webkit")&&!Ii.includes("edge"),ao=Ii.includes("macintosh"),Xr=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ss=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Ih=typeof Image<"u"&&Image.prototype.decode,Wr=function(){let o=!1;try{let t=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return o}();function gt(o,t){if(!o)throw new Gr(t)}var Gg=new Array(6);function ce(){return[1,0,0,1,0,0]}function ap(o,t,s,e,i,r,n){return o[0]=t,o[1]=s,o[2]=e,o[3]=i,o[4]=r,o[5]=n,o}function kh(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o}function Xt(o,t){let s=t[0],e=t[1];return t[0]=o[0]*s+o[2]*e+o[4],t[1]=o[1]*s+o[3]*e+o[5],t}function Oh(o,t,s){return ap(o,t,0,0,s,0,0)}function fe(o,t,s,e,i,r,n,l){let a=Math.sin(r),h=Math.cos(r);return o[0]=e*h,o[1]=i*a,o[2]=-e*a,o[3]=i*h,o[4]=n*e*h-l*e*a+t,o[5]=n*i*a+l*i*h+s,o}function Ms(o,t){let s=lp(t);gt(s!==0,32);let e=t[0],i=t[1],r=t[2],n=t[3],l=t[4],a=t[5];return o[0]=n/s,o[1]=-i/s,o[2]=-r/s,o[3]=e/s,o[4]=(r*a-n*l)/s,o[5]=-(e*a-i*l)/s,o}function lp(o){return o[0]*o[3]-o[1]*o[2]}var Rh;function Yr(o){let t="matrix("+o.join(", ")+")";if(Ss)return t;let s=Rh||(Rh=document.createElement("div"));return s.style.transform=t,s.style.transform}var Ht={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function lo(o){let t=Vt();for(let s=0,e=o.length;s<e;++s)es(t,o[s]);return t}function hp(o,t,s){let e=Math.min.apply(null,o),i=Math.min.apply(null,t),r=Math.max.apply(null,o),n=Math.max.apply(null,t);return Pe(e,i,r,n,s)}function Es(o,t,s){return s?(s[0]=o[0]-t,s[1]=o[1]-t,s[2]=o[2]+t,s[3]=o[3]+t,s):[o[0]-t,o[1]-t,o[2]+t,o[3]+t]}function Ur(o,t){return t?(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t):o.slice()}function Ri(o,t,s){let e,i;return t<o[0]?e=o[0]-t:o[2]<t?e=t-o[2]:e=0,s<o[1]?i=o[1]-s:o[3]<s?i=s-o[3]:i=0,e*e+i*i}function ki(o,t){return Qs(o,t[0],t[1])}function vi(o,t){return o[0]<=t[0]&&t[2]<=o[2]&&o[1]<=t[1]&&t[3]<=o[3]}function Qs(o,t,s){return o[0]<=t&&t<=o[2]&&o[1]<=s&&s<=o[3]}function Vr(o,t){let s=o[0],e=o[1],i=o[2],r=o[3],n=t[0],l=t[1],a=Ht.UNKNOWN;return n<s?a=a|Ht.LEFT:n>i&&(a=a|Ht.RIGHT),l<e?a=a|Ht.BELOW:l>r&&(a=a|Ht.ABOVE),a===Ht.UNKNOWN&&(a=Ht.INTERSECTING),a}function Vt(){return[1/0,1/0,-1/0,-1/0]}function Pe(o,t,s,e,i){return i?(i[0]=o,i[1]=t,i[2]=s,i[3]=e,i):[o,t,s,e]}function ts(o){return Pe(1/0,1/0,-1/0,-1/0,o)}function Fh(o,t){let s=o[0],e=o[1];return Pe(s,e,s,e,t)}function Hr(o,t,s,e,i){let r=ts(i);return ho(r,o,t,s,e)}function Ci(o,t){return o[0]==t[0]&&o[2]==t[2]&&o[1]==t[1]&&o[3]==t[3]}function zh(o,t){return t[0]<o[0]&&(o[0]=t[0]),t[2]>o[2]&&(o[2]=t[2]),t[1]<o[1]&&(o[1]=t[1]),t[3]>o[3]&&(o[3]=t[3]),o}function es(o,t){t[0]<o[0]&&(o[0]=t[0]),t[0]>o[2]&&(o[2]=t[0]),t[1]<o[1]&&(o[1]=t[1]),t[1]>o[3]&&(o[3]=t[1])}function ho(o,t,s,e,i){for(;s<e;s+=i)cp(o,t[s],t[s+1]);return o}function cp(o,t,s){o[0]=Math.min(o[0],t),o[1]=Math.min(o[1],s),o[2]=Math.max(o[2],t),o[3]=Math.max(o[3],s)}function Zr(o,t){let s;return s=t(Ts(o)),s||(s=t(As(o)),s)||(s=t(Ps(o)),s)||(s=t(ke(o)),s)?s:!1}function tr(o){let t=0;return Fi(o)||(t=Pt(o)*de(o)),t}function Ts(o){return[o[0],o[1]]}function As(o){return[o[2],o[1]]}function Qe(o){return[(o[0]+o[2])/2,(o[1]+o[3])/2]}function Nh(o,t){let s;return t==="bottom-left"?s=Ts(o):t==="bottom-right"?s=As(o):t==="top-left"?s=ke(o):t==="top-right"?s=Ps(o):gt(!1,13),s}function er(o,t,s,e,i){let[r,n,l,a,h,c,g,u]=Kr(o,t,s,e);return Pe(Math.min(r,l,h,g),Math.min(n,a,c,u),Math.max(r,l,h,g),Math.max(n,a,c,u),i)}function Kr(o,t,s,e){let i=t*e[0]/2,r=t*e[1]/2,n=Math.cos(s),l=Math.sin(s),a=i*n,h=i*l,c=r*n,g=r*l,u=o[0],p=o[1];return[u-a+g,p-h-c,u-a-g,p-h+c,u+a-g,p+h+c,u+a+g,p+h-c,u-a+g,p-h-c]}function de(o){return o[3]-o[1]}function Oi(o,t,s){let e=s||Vt();return Wt(o,t)?(o[0]>t[0]?e[0]=o[0]:e[0]=t[0],o[1]>t[1]?e[1]=o[1]:e[1]=t[1],o[2]<t[2]?e[2]=o[2]:e[2]=t[2],o[3]<t[3]?e[3]=o[3]:e[3]=t[3]):ts(e),e}function ke(o){return[o[0],o[3]]}function Ps(o){return[o[2],o[3]]}function Pt(o){return o[2]-o[0]}function Wt(o,t){return o[0]<=t[2]&&o[2]>=t[0]&&o[1]<=t[3]&&o[3]>=t[1]}function Fi(o){return o[2]<o[0]||o[3]<o[1]}function jh(o,t){return t?(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t):o}function Bh(o,t,s){let e=!1,i=Vr(o,t),r=Vr(o,s);if(i===Ht.INTERSECTING||r===Ht.INTERSECTING)e=!0;else{let n=o[0],l=o[1],a=o[2],h=o[3],c=t[0],g=t[1],u=s[0],p=s[1],b=(p-g)/(u-c),v,x;r&Ht.ABOVE&&!(i&Ht.ABOVE)&&(v=u-(p-h)/b,e=v>=n&&v<=a),!e&&r&Ht.RIGHT&&!(i&Ht.RIGHT)&&(x=p-(u-a)*b,e=x>=l&&x<=h),!e&&r&Ht.BELOW&&!(i&Ht.BELOW)&&(v=u-(p-l)/b,e=v>=n&&v<=a),!e&&r&Ht.LEFT&&!(i&Ht.LEFT)&&(x=p-(u-n)*b,e=x>=l&&x<=h)}return e}function Gh(o,t,s,e){if(Fi(o))return ts(s);let i=[];if(e>1){let l=o[2]-o[0],a=o[3]-o[1];for(let h=0;h<e;++h)i.push(o[0]+l*h/e,o[1],o[2],o[1]+a*h/e,o[2]-l*h/e,o[3],o[0],o[3]-a*h/e)}else i=[o[0],o[1],o[2],o[1],o[2],o[3],o[0],o[3]];t(i,i,2);let r=[],n=[];for(let l=0,a=i.length;l<a;l+=2)r.push(i[l]),n.push(i[l+1]);return hp(r,n,s)}function co(o,t){let s=t.getExtent(),e=Qe(o);if(t.canWrapX()&&(e[0]<s[0]||e[0]>=s[2])){let i=Pt(s),n=Math.floor((e[0]-s[0])/i)*i;o[0]-=n,o[2]-=n}return o}function Xh(o,t){if(t.canWrapX()){let s=t.getExtent();if(!isFinite(o[0])||!isFinite(o[2]))return[[s[0],o[1],s[2],o[3]]];co(o,t);let e=Pt(s);if(Pt(o)>e)return[[s[0],o[1],s[2],o[3]]];if(o[0]<s[0])return[[o[0]+e,o[1],s[2],o[3]],[s[0],o[1],o[2],o[3]]];if(o[2]>s[2])return[[o[0],o[1],s[2],o[3]],[s[0],o[1],o[2]-e,o[3]]]}return[o]}function Rt(o,t,s){return Math.min(Math.max(o,t),s)}function Wh(o,t,s,e,i,r){let n=i-s,l=r-e;if(n!==0||l!==0){let a=((o-s)*n+(t-e)*l)/(n*n+l*l);a>1?(s=i,e=r):a>0&&(s+=n*a,e+=l*a)}return Xe(o,t,s,e)}function Xe(o,t,s,e){let i=s-o,r=e-t;return i*i+r*r}function Yh(o){let t=o.length;for(let e=0;e<t;e++){let i=e,r=Math.abs(o[e][e]);for(let l=e+1;l<t;l++){let a=Math.abs(o[l][e]);a>r&&(r=a,i=l)}if(r===0)return null;let n=o[i];o[i]=o[e],o[e]=n;for(let l=e+1;l<t;l++){let a=-o[l][e]/o[e][e];for(let h=e;h<t+1;h++)e==h?o[l][h]=0:o[l][h]+=a*o[e][h]}}let s=new Array(t);for(let e=t-1;e>=0;e--){s[e]=o[e][t]/o[e][e];for(let i=e-1;i>=0;i--)o[i][t]-=o[i][e]*s[e]}return s}function Ds(o){return o*Math.PI/180}function _i(o,t){let s=o%t;return s*t<0?s+t:s}function be(o,t,s){return o+s*(t-o)}function qr(o,t){let s=Math.pow(10,t);return Math.round(o*s)/s}function ir(o,t){return Math.floor(qr(o,t))}function sr(o,t){return Math.ceil(qr(o,t))}var dp=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,up=/^([a-z]*)$|^hsla?\(.*\)$/i;function $r(o){return typeof o=="string"?o:uo(o)}function pp(o){let t=document.createElement("div");if(t.style.color=o,t.style.color!==""){document.body.appendChild(t);let s=getComputedStyle(t).color;return document.body.removeChild(t),s}return""}var fp=function(){let t={},s=0;return function(e){let i;if(t.hasOwnProperty(e))i=t[e];else{if(s>=1024){let r=0;for(let n in t)r++&3||(delete t[n],--s)}i=gp(e),t[e]=i,++s}return i}}();function is(o){return Array.isArray(o)?o:fp(o)}function gp(o){let t,s,e,i,r;if(up.exec(o)&&(o=pp(o)),dp.exec(o)){let n=o.length-1,l;n<=4?l=1:l=2;let a=n===4||n===8;t=parseInt(o.substr(1+0*l,l),16),s=parseInt(o.substr(1+1*l,l),16),e=parseInt(o.substr(1+2*l,l),16),a?i=parseInt(o.substr(1+3*l,l),16):i=255,l==1&&(t=(t<<4)+t,s=(s<<4)+s,e=(e<<4)+e,a&&(i=(i<<4)+i)),r=[t,s,e,i/255]}else o.startsWith("rgba(")?(r=o.slice(5,-1).split(",").map(Number),Vh(r)):o.startsWith("rgb(")?(r=o.slice(4,-1).split(",").map(Number),r.push(1),Vh(r)):gt(!1,14);return r}function Vh(o){return o[0]=Rt(o[0]+.5|0,0,255),o[1]=Rt(o[1]+.5|0,0,255),o[2]=Rt(o[2]+.5|0,0,255),o[3]=Rt(o[3],0,1),o}function uo(o){let t=o[0];t!=(t|0)&&(t=t+.5|0);let s=o[1];s!=(s|0)&&(s=s+.5|0);let e=o[2];e!=(e|0)&&(e=e+.5|0);let i=o[3]===void 0?1:Math.round(o[3]*100)/100;return"rgba("+t+","+s+","+e+","+i+")"}var po=class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(let s in this.cache_){let e=this.cache_[s];!(t++&3)&&!e.hasListener()&&(delete this.cache_[s],--this.cacheSize_)}}}get(t,s,e){let i=Uh(t,s,e);return i in this.cache_?this.cache_[i]:null}set(t,s,e,i){let r=Uh(t,s,e);this.cache_[r]=i,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};function Uh(o,t,s){let e=s?$r(s):"null";return t+":"+o+":"+e}var Ls=new po;var It={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var fo=class extends Ut{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;let s=Object.assign({},t);typeof t.properties=="object"&&(delete s.properties,Object.assign(s,t.properties)),s[It.OPACITY]=t.opacity!==void 0?t.opacity:1,gt(typeof s[It.OPACITY]=="number",64),s[It.VISIBLE]=t.visible!==void 0?t.visible:!0,s[It.Z_INDEX]=t.zIndex,s[It.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,s[It.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,s[It.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,s[It.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=s.className!==void 0?s.className:"ol-layer",delete s.className,this.setProperties(s),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){let s=this.state_||{layer:this,managed:t===void 0?!0:t},e=this.getZIndex();return s.opacity=Rt(Math.round(this.getOpacity()*100)/100,0,1),s.visible=this.getVisible(),s.extent=this.getExtent(),s.zIndex=e===void 0&&!s.managed?1/0:e,s.maxResolution=this.getMaxResolution(),s.minResolution=Math.max(this.getMinResolution(),0),s.minZoom=this.getMinZoom(),s.maxZoom=this.getMaxZoom(),this.state_=s,s}getLayersArray(t){return Et()}getLayerStatesArray(t){return Et()}getExtent(){return this.get(It.EXTENT)}getMaxResolution(){return this.get(It.MAX_RESOLUTION)}getMinResolution(){return this.get(It.MIN_RESOLUTION)}getMinZoom(){return this.get(It.MIN_ZOOM)}getMaxZoom(){return this.get(It.MAX_ZOOM)}getOpacity(){return this.get(It.OPACITY)}getSourceState(){return Et()}getVisible(){return this.get(It.VISIBLE)}getZIndex(){return this.get(It.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(It.EXTENT,t)}setMaxResolution(t){this.set(It.MAX_RESOLUTION,t)}setMinResolution(t){this.set(It.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(It.MAX_ZOOM,t)}setMinZoom(t){this.set(It.MIN_ZOOM,t)}setOpacity(t){gt(typeof t=="number",64),this.set(It.OPACITY,t)}setVisible(t){this.set(It.VISIBLE,t)}setZIndex(t){this.set(It.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Jr=fo;var ge={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var Zt={ANIMATING:0,INTERACTING:1};var Oe={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var We={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var go=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||We[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Qr=go;var rr=6378137,Is=Math.PI*rr,mp=[-Is,-Is,Is,Is],xp=[-180,-85,180,85],tn=rr*Math.log(Math.tan(Math.PI/2)),zi=class extends Qr{constructor(t){super({code:t,units:"m",extent:mp,global:!0,worldExtent:xp,getPointResolution:function(s,e){return s/Math.cosh(e[1]/rr)}})}},mo=[new zi("EPSG:3857"),new zi("EPSG:102100"),new zi("EPSG:102113"),new zi("EPSG:900913"),new zi("http://www.opengis.net/def/crs/EPSG/0/3857"),new zi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Hh(o,t,s){let e=o.length;s=s>1?s:2,t===void 0&&(s>2?t=o.slice():t=new Array(e));for(let i=0;i<e;i+=s){t[i]=Is*o[i]/180;let r=rr*Math.log(Math.tan(Math.PI*(+o[i+1]+90)/360));r>tn?r=tn:r<-tn&&(r=-tn),t[i+1]=r}return t}function Zh(o,t,s){let e=o.length;s=s>1?s:2,t===void 0&&(s>2?t=o.slice():t=new Array(e));for(let i=0;i<e;i+=s)t[i]=180*o[i]/Is,t[i+1]=360*Math.atan(Math.exp(o[i+1]/rr))/Math.PI-90;return t}var yp=6378137,Kh=[-180,-90,180,90],bp=Math.PI*yp/180,wi=class extends Qr{constructor(t,s){super({code:t,units:"degrees",extent:Kh,axisOrientation:s,global:!0,metersPerUnit:bp,worldExtent:Kh})}},xo=[new wi("CRS:84"),new wi("EPSG:4326","neu"),new wi("urn:ogc:def:crs:OGC:1.3:CRS84"),new wi("urn:ogc:def:crs:OGC:2:84"),new wi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new wi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new wi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var yo={};function qh(o){return yo[o]||yo[o.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function $h(o,t){yo[o]=t}var Rs={};function nr(o,t,s){let e=o.getCode(),i=t.getCode();e in Rs||(Rs[e]={}),Rs[e][i]=s}function Jh(o,t){let s;return o in Rs&&t in Rs[o]&&(s=Rs[o][t]),s}function Qh(o,t){return o[0]+=+t[0],o[1]+=+t[1],o}function ss(o,t){let s=!0;for(let e=o.length-1;e>=0;--e)if(o[e]!=t[e]){s=!1;break}return s}function ks(o,t){let s=Math.cos(t),e=Math.sin(t),i=o[0]*s-o[1]*e,r=o[1]*s+o[0]*e;return o[0]=i,o[1]=r,o}function tc(o,t){return o[0]*=t,o[1]*=t,o}function en(o,t){if(t.canWrapX()){let s=Pt(t.getExtent()),e=ec(o,t,s);e&&(o[0]-=e*s)}return o}function ec(o,t,s){let e=t.getExtent(),i=0;return t.canWrapX()&&(o[0]<e[0]||o[0]>e[2])&&(s=s||Pt(e),i=Math.floor((o[0]-e[0])/s)),i}var vp=63710088e-1;function bo(o,t,s){s=s||vp;let e=Ds(o[1]),i=Ds(t[1]),r=(i-e)/2,n=Ds(t[0]-o[0])/2,l=Math.sin(r)*Math.sin(r)+Math.sin(n)*Math.sin(n)*Math.cos(e)*Math.cos(i);return 2*s*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}var ic={info:1,warn:2,error:3,none:4},Cp=ic.info;function sn(...o){Cp>ic.warn||console.warn(...o)}var vo=!0;function rc(o){vo=!(o===void 0?!0:o)}function Co(o,t){if(t!==void 0){for(let s=0,e=o.length;s<e;++s)t[s]=o[s];t=t}else t=o.slice();return t}function nc(o,t){if(t!==void 0&&o!==t){for(let s=0,e=o.length;s<e;++s)t[s]=o[s];o=t}return o}function _p(o){$h(o.getCode(),o),nr(o,o,Co)}function wp(o){o.forEach(_p)}function ue(o){return typeof o=="string"?qh(o):o||null}function _o(o,t,s,e){o=ue(o);let i,r=o.getPointResolutionFunc();if(r){if(i=r(t,s),e&&e!==o.getUnits()){let n=o.getMetersPerUnit();n&&(i=i*n/We[e])}}else{let n=o.getUnits();if(n=="degrees"&&!e||e=="degrees")i=t;else{let l=or(o,ue("EPSG:4326"));if(l===nc&&n!=="degrees")i=t*o.getMetersPerUnit();else{let h=[s[0]-t/2,s[1],s[0]+t/2,s[1],s[0],s[1]-t/2,s[0],s[1]+t/2];h=l(h,h,2);let c=bo(h.slice(0,2),h.slice(2,4)),g=bo(h.slice(4,6),h.slice(6,8));i=(c+g)/2}let a=e?We[e]:o.getMetersPerUnit();a!==void 0&&(i/=a)}}return i}function sc(o){wp(o),o.forEach(function(t){o.forEach(function(s){t!==s&&nr(t,s,Co)})})}function Sp(o,t,s,e){o.forEach(function(i){t.forEach(function(r){nr(i,r,s),nr(r,i,e)})})}function rn(o,t){return o?typeof o=="string"?ue(o):o:ue(t)}function Ni(o,t){if(o===t)return!0;let s=o.getUnits()===t.getUnits();return(o.getCode()===t.getCode()||or(o,t)===Co)&&s}function or(o,t){let s=o.getCode(),e=t.getCode(),i=Jh(s,e);return i||(i=nc),i}function rs(o,t){let s=ue(o),e=ue(t);return or(s,e)}function ji(o,t,s){return rs(t,s)(o,void 0,o.length)}function oc(o,t,s,e){let i=rs(t,s);return Gh(o,i,void 0,e)}var Ye=null;function nn(){return Ye}function ar(o,t){return Ye?ji(o,t,Ye):o}function Ve(o,t){return Ye?ji(o,Ye,t):(vo&&!ss(o,[0,0])&&o[0]>=-180&&o[0]<=180&&o[1]>=-90&&o[1]<=90&&(vo=!1,sn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),o)}function Os(o,t){return Ye?oc(o,t,Ye):o}function Ue(o,t){return Ye?oc(o,Ye,t):o}function ac(o,t){if(!Ye)return o;let s=ue(t).getUnits(),e=Ye.getUnits();return s&&e?o*We[s]/We[e]:o}function Mp(){sc(mo),sc(xo),Sp(xo,mo,Hh,Zh)}Mp();function wo(o,t,s){return function(e,i,r,n,l){if(!e)return;if(!i&&!t)return e;let a=t?0:r[0]*i,h=t?0:r[1]*i,c=l?l[0]:0,g=l?l[1]:0,u=o[0]+a/2+c,p=o[2]-a/2+c,b=o[1]+h/2+g,v=o[3]-h/2+g;u>p&&(u=(p+u)/2,p=u),b>v&&(b=(v+b)/2,v=b);let x=Rt(e[0],u,p),m=Rt(e[1],b,v);if(n&&s&&i){let E=30*i;x+=-E*Math.log(1+Math.max(0,u-e[0])/E)+E*Math.log(1+Math.max(0,e[0]-p)/E),m+=-E*Math.log(1+Math.max(0,b-e[1])/E)+E*Math.log(1+Math.max(0,e[1]-v)/E)}return[x,m]}}function lc(o){return o}function So(o,t,s,e){let i=Pt(t)/s[0],r=de(t)/s[1];return e?Math.min(o,Math.max(i,r)):Math.min(o,Math.min(i,r))}function Mo(o,t,s){let e=Math.min(o,t),i=50;return e*=Math.log(1+i*Math.max(0,o/t-1))/i+1,s&&(e=Math.max(e,s),e/=Math.log(1+i*Math.max(0,s/o-1))/i+1),Rt(e,s/2,t*2)}function hc(o,t,s,e){return t=t!==void 0?t:!0,function(i,r,n,l){if(i!==void 0){let a=o[0],h=o[o.length-1],c=s?So(a,s,n,e):a;if(l)return t?Mo(i,c,h):Rt(i,h,c);let g=Math.min(c,i),u=Math.floor(vs(o,g,r));return o[u]>c&&u<o.length-1?o[u+1]:o[u]}}}function cc(o,t,s,e,i,r){return e=e!==void 0?e:!0,s=s!==void 0?s:0,function(n,l,a,h){if(n!==void 0){let c=i?So(t,i,a,r):t;if(h)return e?Mo(n,c,s):Rt(n,s,c);let g=1e-9,u=Math.ceil(Math.log(t/c)/Math.log(o)-g),p=-l*(.5-g)+.5,b=Math.min(c,n),v=Math.floor(Math.log(t/b)/Math.log(o)+p),x=Math.max(u,v),m=t/Math.pow(o,x);return Rt(m,s,c)}}}function Eo(o,t,s,e,i){return s=s!==void 0?s:!0,function(r,n,l,a){if(r!==void 0){let h=e?So(o,e,l,i):o;return!s||!a?Rt(r,t,h):Mo(r,h,t)}}}function Fs(o){if(o!==void 0)return 0}function To(o){if(o!==void 0)return o}function dc(o){let t=2*Math.PI/o;return function(s,e){if(e)return s;if(s!==void 0)return s=Math.floor(s/t+.5)*t,s}}function uc(o){return o=o||Ds(5),function(t,s){if(s)return t;if(t!==void 0)return Math.abs(t)<=o?0:t}}function Ao(o){return Math.pow(o,3)}function Fe(o){return 1-Ao(1-o)}function pc(o){return 3*o*o-2*o*o*o}function fc(o){return o}function ze(o,t,s,e,i,r){r=r||[];let n=0;for(let l=t;l<s;l+=e){let a=o[l],h=o[l+1];r[n++]=i[0]*a+i[2]*h+i[4],r[n++]=i[1]*a+i[3]*h+i[5]}return r&&r.length!=n&&(r.length=n),r}function on(o,t,s,e,i,r,n){n=n||[];let l=Math.cos(i),a=Math.sin(i),h=r[0],c=r[1],g=0;for(let u=t;u<s;u+=e){let p=o[u]-h,b=o[u+1]-c;n[g++]=h+p*l-b*a,n[g++]=c+p*a+b*l;for(let v=u+2;v<u+e;++v)n[g++]=o[v]}return n&&n.length!=g&&(n.length=g),n}function gc(o,t,s,e,i,r,n,l){l=l||[];let a=n[0],h=n[1],c=0;for(let g=t;g<s;g+=e){let u=o[g]-a,p=o[g+1]-h;l[c++]=a+i*u,l[c++]=h+r*p;for(let b=g+2;b<g+e;++b)l[c++]=o[b]}return l&&l.length!=c&&(l.length=c),l}function mc(o,t,s,e,i,r,n){n=n||[];let l=0;for(let a=t;a<s;a+=e){n[l++]=o[a]+i,n[l++]=o[a+1]+r;for(let h=a+2;h<a+e;++h)n[l++]=o[h]}return n&&n.length!=l&&(n.length=l),n}var xc=ce(),Po=class extends Ut{constructor(){super(),this.extent_=Vt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Ah(function(t,s,e){if(!e)return this.getSimplifiedGeometry(s);let i=this.clone();return i.applyTransform(e),i.getSimplifiedGeometry(s)})}simplifyTransformed(t,s){return this.simplifyTransformedInternal(this.getRevision(),t,s)}clone(){return Et()}closestPointXY(t,s,e,i){return Et()}containsXY(t,s){let e=this.getClosestPoint([t,s]);return e[0]===t&&e[1]===s}getClosestPoint(t,s){return s=s||[NaN,NaN],this.closestPointXY(t[0],t[1],s,1/0),s}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Et()}getExtent(t){if(this.extentRevision_!=this.getRevision()){let s=this.computeExtent(this.extent_);(isNaN(s[0])||isNaN(s[1]))&&ts(s),this.extentRevision_=this.getRevision()}return jh(this.extent_,t)}rotate(t,s){Et()}scale(t,s,e){Et()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Et()}getType(){return Et()}applyTransform(t){Et()}intersectsExtent(t){return Et()}translate(t,s){Et()}transform(t,s){let e=ue(t),i=e.getUnits()=="tile-pixels"?function(r,n,l){let a=e.getExtent(),h=e.getWorldExtent(),c=de(h)/de(a);return fe(xc,h[0],h[3],c,-c,0,0,0),ze(r,0,r.length,l,xc,n),rs(e,s)(r,n,l)}:rs(e,s);return this.applyTransform(i),this}},yc=Po;var Do=class extends yc{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Et()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let s=this.getSimplifiedGeometryInternal(t);return s.getFlatCoordinates().length<this.flatCoordinates.length?s:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,s){this.stride=bc(t),this.layout=t,this.flatCoordinates=s}setCoordinates(t,s){Et()}setLayout(t,s,e){let i;if(t)i=bc(t);else{for(let r=0;r<e;++r){if(s.length===0){this.layout="XY",this.stride=2;return}s=s[0]}i=s.length,t=Ep(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,s){let e=this.getFlatCoordinates();if(e){let i=this.getStride();on(e,0,e.length,i,t,s,e),this.changed()}}scale(t,s,e){s===void 0&&(s=t),e||(e=Qe(this.getExtent()));let i=this.getFlatCoordinates();if(i){let r=this.getStride();gc(i,0,i.length,r,t,s,e,i),this.changed()}}translate(t,s){let e=this.getFlatCoordinates();if(e){let i=this.getStride();mc(e,0,e.length,i,t,s,e),this.changed()}}};function Ep(o){let t;return o==2?t="XY":o==3?t="XYZ":o==4&&(t="XYZM"),t}function bc(o){let t;return o=="XY"?t=2:o=="XYZ"||o=="XYM"?t=3:o=="XYZM"&&(t=4),t}function vc(o,t,s){let e=o.getFlatCoordinates();if(!e)return null;let i=o.getStride();return ze(e,0,e.length,i,t,s)}var ti=Do;function Cc(o,t,s,e,i,r,n){let l=o[t],a=o[t+1],h=o[s]-l,c=o[s+1]-a,g;if(h===0&&c===0)g=t;else{let u=((i-l)*h+(r-a)*c)/(h*h+c*c);if(u>1)g=s;else if(u>0){for(let p=0;p<e;++p)n[p]=be(o[t+p],o[s+p],u);n.length=e;return}else g=t}for(let u=0;u<e;++u)n[u]=o[g+u];n.length=e}function Lo(o,t,s,e,i){let r=o[t],n=o[t+1];for(t+=e;t<s;t+=e){let l=o[t],a=o[t+1],h=Xe(r,n,l,a);h>i&&(i=h),r=l,n=a}return i}function Io(o,t,s,e,i){for(let r=0,n=s.length;r<n;++r){let l=s[r];i=Lo(o,t,l,e,i),t=l}return i}function _c(o,t,s,e,i){for(let r=0,n=s.length;r<n;++r){let l=s[r];i=Io(o,t,l,e,i),t=l[l.length-1]}return i}function Ro(o,t,s,e,i,r,n,l,a,h,c){if(t==s)return h;let g,u;if(i===0){if(u=Xe(n,l,o[t],o[t+1]),u<h){for(g=0;g<e;++g)a[g]=o[t+g];return a.length=e,u}return h}c=c||[NaN,NaN];let p=t+e;for(;p<s;)if(Cc(o,p-e,p,e,n,l,c),u=Xe(n,l,c[0],c[1]),u<h){for(h=u,g=0;g<e;++g)a[g]=c[g];a.length=e,p+=e}else p+=e*Math.max((Math.sqrt(u)-Math.sqrt(h))/i|0,1);if(r&&(Cc(o,s-e,t,e,n,l,c),u=Xe(n,l,c[0],c[1]),u<h)){for(h=u,g=0;g<e;++g)a[g]=c[g];a.length=e}return h}function ko(o,t,s,e,i,r,n,l,a,h,c){c=c||[NaN,NaN];for(let g=0,u=s.length;g<u;++g){let p=s[g];h=Ro(o,t,p,e,i,r,n,l,a,h,c),t=p}return h}function wc(o,t,s,e,i,r,n,l,a,h,c){c=c||[NaN,NaN];for(let g=0,u=s.length;g<u;++g){let p=s[g];h=ko(o,t,p,e,i,r,n,l,a,h,c),t=p[p.length-1]}return h}function Sc(o,t,s,e){for(let i=0,r=s.length;i<r;++i)o[t++]=s[i];return t}function lr(o,t,s,e){for(let i=0,r=s.length;i<r;++i){let n=s[i];for(let l=0;l<e;++l)o[t++]=n[l]}return t}function Oo(o,t,s,e,i){i=i||[];let r=0;for(let n=0,l=s.length;n<l;++n){let a=lr(o,t,s[n],e);i[r++]=a,t=a}return i.length=r,i}function Mc(o,t,s,e,i){i=i||[];let r=0;for(let n=0,l=s.length;n<l;++n){let a=Oo(o,t,s[n],e,i[r]);a.length===0&&(a[0]=t),i[r++]=a,t=a[a.length-1]}return i.length=r,i}function Ec(o,t,s,e,i,r,n){let l=(s-t)/e;if(l<3){for(;t<s;t+=e)r[n++]=o[t],r[n++]=o[t+1];return n}let a=new Array(l);a[0]=1,a[l-1]=1;let h=[t,s-e],c=0;for(;h.length>0;){let g=h.pop(),u=h.pop(),p=0,b=o[u],v=o[u+1],x=o[g],m=o[g+1];for(let E=u+e;E<g;E+=e){let L=o[E],S=o[E+1],w=Wh(L,S,b,v,x,m);w>p&&(c=E,p=w)}p>i&&(a[(c-t)/e]=1,u+e<c&&h.push(u,c),c+e<g&&h.push(c,g))}for(let g=0;g<l;++g)a[g]&&(r[n++]=o[t+g*e],r[n++]=o[t+g*e+1]);return n}function Bi(o,t){return t*Math.round(o/t)}function Tp(o,t,s,e,i,r,n){if(t==s)return n;let l=Bi(o[t],i),a=Bi(o[t+1],i);t+=e,r[n++]=l,r[n++]=a;let h,c;do if(h=Bi(o[t],i),c=Bi(o[t+1],i),t+=e,t==s)return r[n++]=h,r[n++]=c,n;while(h==l&&c==a);for(;t<s;){let g=Bi(o[t],i),u=Bi(o[t+1],i);if(t+=e,g==h&&u==c)continue;let p=h-l,b=c-a,v=g-l,x=u-a;if(p*x==b*v&&(p<0&&v<p||p==v||p>0&&v>p)&&(b<0&&x<b||b==x||b>0&&x>b)){h=g,c=u;continue}r[n++]=h,r[n++]=c,l=h,a=c,h=g,c=u}return r[n++]=h,r[n++]=c,n}function Fo(o,t,s,e,i,r,n,l){for(let a=0,h=s.length;a<h;++a){let c=s[a];n=Tp(o,t,c,e,i,r,n),l.push(n),t=c}return n}function Tc(o,t,s,e,i,r,n,l){for(let a=0,h=s.length;a<h;++a){let c=s[a],g=[];n=Fo(o,t,c,e,i,r,n,g),l.push(g),t=c[c.length-1]}return n}function ei(o,t,s,e,i){i=i!==void 0?i:[];let r=0;for(let n=t;n<s;n+=e)i[r++]=o.slice(n,n+e);return i.length=r,i}function zs(o,t,s,e,i){i=i!==void 0?i:[];let r=0;for(let n=0,l=s.length;n<l;++n){let a=s[n];i[r++]=ei(o,t,a,e,i[r]),t=a}return i.length=r,i}function hr(o,t,s,e,i){i=i!==void 0?i:[];let r=0;for(let n=0,l=s.length;n<l;++n){let a=s[n];i[r++]=a.length===1&&a[0]===t?[]:zs(o,t,a,e,i[r]),t=a[a.length-1]}return i.length=r,i}function zo(o,t,s,e){let i=0,r=o[s-e],n=o[s-e+1];for(;t<s;t+=e){let l=o[t],a=o[t+1];i+=n*l-r*a,r=l,n=a}return i/2}function No(o,t,s,e){let i=0;for(let r=0,n=s.length;r<n;++r){let l=s[r];i+=zo(o,t,l,e),t=l}return i}function Ac(o,t,s,e){let i=0;for(let r=0,n=s.length;r<n;++r){let l=s[r];i+=No(o,t,l,e),t=l[l.length-1]}return i}var jo=class o extends ti{constructor(t,s){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,s!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(s,t):this.setCoordinates(t,s)}clone(){return new o(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,s,e,i){return i<Ri(this.getExtent(),t,s)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,s,e,i))}getArea(){return zo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ei(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let s=[];return s.length=Ec(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,s,0),new o(s,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,s){this.setLayout(s,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lr(this.flatCoordinates,0,t,this.stride),this.changed()}},Bo=jo;var Go=class o extends ti{constructor(t,s){super(),this.setCoordinates(t,s)}clone(){let t=new o(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,s,e,i){let r=this.flatCoordinates,n=Xe(t,s,r[0],r[1]);if(n<i){let l=this.stride;for(let a=0;a<l;++a)e[a]=r[a];return e.length=l,n}return i}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return Fh(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Qs(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,s){this.setLayout(s,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sc(this.flatCoordinates,0,t,this.stride),this.changed()}},ii=Go;function Pc(o,t,s,e,i){return!Zr(i,function(n){return!Gi(o,t,s,e,n[0],n[1])})}function Gi(o,t,s,e,i,r){let n=0,l=o[s-e],a=o[s-e+1];for(;t<s;t+=e){let h=o[t],c=o[t+1];a<=r?c>r&&(h-l)*(r-a)-(i-l)*(c-a)>0&&n++:c<=r&&(h-l)*(r-a)-(i-l)*(c-a)<0&&n--,l=h,a=c}return n!==0}function cr(o,t,s,e,i,r){if(s.length===0||!Gi(o,t,s[0],e,i,r))return!1;for(let n=1,l=s.length;n<l;++n)if(Gi(o,s[n-1],s[n],e,i,r))return!1;return!0}function Dc(o,t,s,e,i,r){if(s.length===0)return!1;for(let n=0,l=s.length;n<l;++n){let a=s[n];if(cr(o,t,a,e,i,r))return!0;t=a[a.length-1]}return!1}function Xo(o,t,s,e,i,r,n){let l,a,h,c,g,u,p,b=i[r+1],v=[];for(let E=0,L=s.length;E<L;++E){let S=s[E];for(c=o[S-e],u=o[S-e+1],l=t;l<S;l+=e)g=o[l],p=o[l+1],(b<=u&&p<=b||u<=b&&b<=p)&&(h=(b-u)/(p-u)*(g-c)+c,v.push(h)),c=g,u=p}let x=NaN,m=-1/0;for(v.sort($e),c=v[0],l=1,a=v.length;l<a;++l){g=v[l];let E=Math.abs(g-c);E>m&&(h=(c+g)/2,cr(o,t,s,e,h,b)&&(x=h,m=E)),c=g}return isNaN(x)&&(x=i[r]),n?(n.push(x,b,m),n):[x,b,m]}function Lc(o,t,s,e,i){let r=[];for(let n=0,l=s.length;n<l;++n){let a=s[n];r=Xo(o,t,a,e,i,2*n,r),t=a[a.length-1]}return r}function Ic(o,t,s,e,i){let r;for(t+=e;t<s;t+=e)if(r=i(o.slice(t-e,t),o.slice(t,t+e)),r)return r;return!1}function Rc(o,t,s,e,i){let r=ho(Vt(),o,t,s,e);return Wt(i,r)?vi(i,r)||r[0]>=i[0]&&r[2]<=i[2]||r[1]>=i[1]&&r[3]<=i[3]?!0:Ic(o,t,s,e,function(n,l){return Bh(i,n,l)}):!1}function Wo(o,t,s,e,i){return!!(Rc(o,t,s,e,i)||Gi(o,t,s,e,i[0],i[1])||Gi(o,t,s,e,i[0],i[3])||Gi(o,t,s,e,i[2],i[1])||Gi(o,t,s,e,i[2],i[3]))}function Yo(o,t,s,e,i){if(!Wo(o,t,s[0],e,i))return!1;if(s.length===1)return!0;for(let r=1,n=s.length;r<n;++r)if(Pc(o,s[r-1],s[r],e,i)&&!Rc(o,s[r-1],s[r],e,i))return!1;return!0}function kc(o,t,s,e,i){for(let r=0,n=s.length;r<n;++r){let l=s[r];if(Yo(o,t,l,e,i))return!0;t=l[l.length-1]}return!1}function Oc(o,t,s,e){for(;t<s-e;){for(let i=0;i<e;++i){let r=o[t+i];o[t+i]=o[s-e+i],o[s-e+i]=r}t+=e,s-=e}}function Fc(o,t,s,e){let i=0,r=o[s-e],n=o[s-e+1];for(;t<s;t+=e){let l=o[t],a=o[t+1];i+=(l-r)*(a+n),r=l,n=a}return i===0?void 0:i>0}function Vo(o,t,s,e,i){i=i!==void 0?i:!1;for(let r=0,n=s.length;r<n;++r){let l=s[r],a=Fc(o,t,l,e);if(r===0){if(i&&a||!i&&!a)return!1}else if(i&&!a||!i&&a)return!1;t=l}return!0}function zc(o,t,s,e,i){for(let r=0,n=s.length;r<n;++r){let l=s[r];if(!Vo(o,t,l,e,i))return!1;l.length&&(t=l[l.length-1])}return!0}function an(o,t,s,e,i){i=i!==void 0?i:!1;for(let r=0,n=s.length;r<n;++r){let l=s[r],a=Fc(o,t,l,e);(r===0?i&&a||!i&&!a:i&&!a||!i&&a)&&Oc(o,t,l,e),t=l}return t}function Uo(o,t,s,e,i){for(let r=0,n=s.length;r<n;++r)t=an(o,t,s[r],e,i);return t}var ln=class o extends ti{constructor(t,s,e){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,s!==void 0&&e?(this.setFlatCoordinates(s,t),this.ends_=e):this.setCoordinates(t,s)}appendLinearRing(t){this.flatCoordinates?mi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new o(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,s,e,i){return i<Ri(this.getExtent(),t,s)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Io(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ko(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,s,e,i))}containsXY(t,s){return cr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,s)}getArea(){return No(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let s;return t!==void 0?(s=this.getOrientedFlatCoordinates().slice(),an(s,0,this.ends_,this.stride,t)):s=this.flatCoordinates,zs(s,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let t=Qe(this.getExtent());this.flatInteriorPoint_=Xo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ii(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Bo(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){let t=this.layout,s=this.flatCoordinates,e=this.ends_,i=[],r=0;for(let n=0,l=e.length;n<l;++n){let a=e[n],h=new Bo(s.slice(r,a),t);i.push(h),r=a}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;Vo(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=an(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let s=[],e=[];return s.length=Fo(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),s,0,e),new o(s,"XY",e)}getType(){return"Polygon"}intersectsExtent(t){return Yo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,s){this.setLayout(s,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let e=Oo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=e.length===0?0:e[e.length-1],this.changed()}},Xi=ln;function Ho(o){if(Fi(o))throw new Error("Cannot create polygon from empty extent");let t=o[0],s=o[1],e=o[2],i=o[3],r=[t,s,t,i,e,i,e,s,t,s];return new ln(r,"XY",[r.length])}var Zo=0,qo=class extends Ut{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=rn(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&rc(),t.center&&(t.center=Ve(t.center,this.projection_)),t.extent&&(t.extent=Ue(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){let s=Object.assign({},t);for(let l in Oe)delete s[l];this.setProperties(s,!0);let e=Pp(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=e.minZoom;let i=Ap(t),r=e.constraint,n=Dp(t);this.constraints_={center:i,resolution:r,rotation:n},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let s=this.padding_;this.padding_=t;let e=this.getCenterInternal();if(e){let i=t||[0,0,0,0];s=s||[0,0,0,0];let r=this.getResolution(),n=r/2*(i[3]-s[3]+s[1]-i[1]),l=r/2*(i[0]-s[0]+s[2]-i[2]);this.setCenterInternal([e[0]+n,e[1]-l])}}getUpdatedOptions_(t){let s=this.getProperties();return s.resolution!==void 0?s.resolution=this.getResolution():s.zoom=this.getZoom(),s.center=this.getCenterInternal(),s.rotation=this.getRotation(),Object.assign({},s,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let s=new Array(arguments.length);for(let e=0;e<s.length;++e){let i=arguments[e];i.center&&(i=Object.assign({},i),i.center=Ve(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Ve(i.anchor,this.getProjection())),s[e]=i}this.animateInternal.apply(this,s)}animateInternal(t){let s=arguments.length,e;s>1&&typeof arguments[s-1]=="function"&&(e=arguments[s-1],--s);let i=0;for(;i<s&&!this.isDef();++i){let c=arguments[i];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(i===s){e&&hn(e,!0);return}let r=Date.now(),n=this.targetCenter_.slice(),l=this.targetResolution_,a=this.targetRotation_,h=[];for(;i<s;++i){let c=arguments[i],g={start:r,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||pc,callback:e};if(c.center&&(g.sourceCenter=n,g.targetCenter=c.center.slice(),n=g.targetCenter),c.zoom!==void 0?(g.sourceResolution=l,g.targetResolution=this.getResolutionForZoom(c.zoom),l=g.targetResolution):c.resolution&&(g.sourceResolution=l,g.targetResolution=c.resolution,l=g.targetResolution),c.rotation!==void 0){g.sourceRotation=a;let u=_i(c.rotation-a+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=a+u,a=g.targetRotation}Lp(g)?g.complete=!0:r+=g.duration,h.push(g)}this.animations_.push(h),this.setHint(Zt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Zt.ANIMATING]>0}getInteracting(){return this.hints_[Zt.INTERACTING]>0}cancelAnimations(){this.setHint(Zt.ANIMATING,-this.hints_[Zt.ANIMATING]);let t;for(let s=0,e=this.animations_.length;s<e;++s){let i=this.animations_[s];if(i[0].callback&&hn(i[0].callback,!1),!t)for(let r=0,n=i.length;r<n;++r){let l=i[r];if(!l.complete){t=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let t=Date.now(),s=!1;for(let e=this.animations_.length-1;e>=0;--e){let i=this.animations_[e],r=!0;for(let n=0,l=i.length;n<l;++n){let a=i[n];if(a.complete)continue;let h=t-a.start,c=a.duration>0?h/a.duration:1;c>=1?(a.complete=!0,c=1):r=!1;let g=a.easing(c);if(a.sourceCenter){let u=a.sourceCenter[0],p=a.sourceCenter[1],b=a.targetCenter[0],v=a.targetCenter[1];this.nextCenter_=a.targetCenter;let x=u+g*(b-u),m=p+g*(v-p);this.targetCenter_=[x,m]}if(a.sourceResolution&&a.targetResolution){let u=g===1?a.targetResolution:a.sourceResolution+g*(a.targetResolution-a.sourceResolution);if(a.anchor){let p=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(u,0,p,!0);this.targetCenter_=this.calculateCenterZoom(b,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=u,this.applyTargetState_(!0)}if(a.sourceRotation!==void 0&&a.targetRotation!==void 0){let u=g===1?_i(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+g*(a.targetRotation-a.sourceRotation);if(a.anchor){let p=this.constraints_.rotation(u,!0);this.targetCenter_=this.calculateCenterRotate(p,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=u}if(this.applyTargetState_(!0),s=!0,!a.complete)break}if(r){this.animations_[e]=null,this.setHint(Zt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let n=i[0].callback;n&&hn(n,!0)}}this.animations_=this.animations_.filter(Boolean),s&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,s){let e,i=this.getCenterInternal();return i!==void 0&&(e=[i[0]-s[0],i[1]-s[1]],ks(e,t-this.getRotation()),Qh(e,s)),e}calculateCenterZoom(t,s){let e,i=this.getCenterInternal(),r=this.getResolution();if(i!==void 0&&r!==void 0){let n=s[0]-t*(s[0]-i[0])/r,l=s[1]-t*(s[1]-i[1])/r;e=[n,l]}return e}getViewportSize_(t){let s=this.viewportSize_;if(t){let e=s[0],i=s[1];return[Math.abs(e*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(e*Math.sin(t))+Math.abs(i*Math.cos(t))]}return s}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let t=this.getCenterInternal();return t&&ar(t,this.getProjection())}getCenterInternal(){return this.get(Oe.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){let s=this.calculateExtentInternal(t);return Os(s,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();let s=this.getCenterInternal();gt(s,1);let e=this.getResolution();gt(e!==void 0,2);let i=this.getRotation();return gt(i!==void 0,3),er(s,e,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Oe.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,s){return this.getResolutionForExtentInternal(Ue(t,this.getProjection()),s)}getResolutionForExtentInternal(t,s){s=s||this.getViewportSizeMinusPadding_();let e=Pt(t)/s[0],i=de(t)/s[1];return Math.max(e,i)}getResolutionForValueFunction(t){t=t||2;let s=this.getConstrainedResolution(this.maxResolution_),e=this.minResolution_,i=Math.log(s/e)/Math.log(t);return function(r){return s/Math.pow(t,r*i)}}getRotation(){return this.get(Oe.ROTATION)}getValueForResolutionFunction(t){let s=Math.log(t||2),e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(e/i)/s;return function(n){return Math.log(e/n)/s/r}}getViewportSizeMinusPadding_(t){let s=this.getViewportSize_(t),e=this.padding_;return e&&(s=[s[0]-e[1]-e[3],s[1]-e[0]-e[2]]),s}getState(){let t=this.getProjection(),s=this.getResolution(),e=this.getRotation(),i=this.getCenterInternal(),r=this.padding_;if(r){let n=this.getViewportSizeMinusPadding_();i=Ko(i,this.getViewportSize_(),[n[0]/2+r[3],n[1]/2+r[0]],s,e)}return{center:i.slice(0),projection:t!==void 0?t:null,resolution:s,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:e,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t,s=this.getResolution();return s!==void 0&&(t=this.getZoomForResolution(s)),t}getZoomForResolution(t){let s=this.minZoom_||0,e,i;if(this.resolutions_){let r=vs(this.resolutions_,t,1);s=r,e=this.resolutions_[r],r==this.resolutions_.length-1?i=2:i=e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return s+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let s=Rt(Math.floor(t),0,this.resolutions_.length-2),e=this.resolutions_[s]/this.resolutions_[s+1];return this.resolutions_[s]/Math.pow(e,Rt(t-s,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,s){let e;if(gt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){gt(!Fi(t),25);let i=Ue(t,this.getProjection());e=Ho(i)}else if(t.getType()==="Circle"){let i=Ue(t.getExtent(),this.getProjection());e=Ho(i),e.rotate(this.getRotation(),Qe(i))}else{let i=nn();i?e=t.clone().transform(i,this.getProjection()):e=t}this.fitInternal(e,s)}rotatedExtentForGeometry(t){let s=this.getRotation(),e=Math.cos(s),i=Math.sin(-s),r=t.getFlatCoordinates(),n=t.getStride(),l=1/0,a=1/0,h=-1/0,c=-1/0;for(let g=0,u=r.length;g<u;g+=n){let p=r[g]*e-r[g+1]*i,b=r[g]*i+r[g+1]*e;l=Math.min(l,p),a=Math.min(a,b),h=Math.max(h,p),c=Math.max(c,b)}return[l,a,h,c]}fitInternal(t,s){s=s||{};let e=s.size;e||(e=this.getViewportSizeMinusPadding_());let i=s.padding!==void 0?s.padding:[0,0,0,0],r=s.nearest!==void 0?s.nearest:!1,n;s.minResolution!==void 0?n=s.minResolution:s.maxZoom!==void 0?n=this.getResolutionForZoom(s.maxZoom):n=0;let l=this.rotatedExtentForGeometry(t),a=this.getResolutionForExtentInternal(l,[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]);a=isNaN(a)?n:Math.max(a,n),a=this.getConstrainedResolution(a,r?0:1);let h=this.getRotation(),c=Math.sin(h),g=Math.cos(h),u=Qe(l);u[0]+=(i[1]-i[3])/2*a,u[1]+=(i[0]-i[2])/2*a;let p=u[0]*g-u[1]*c,b=u[1]*g+u[0]*c,v=this.getConstrainedCenter([p,b],a),x=s.callback?s.callback:Ge;s.duration!==void 0?this.animateInternal({resolution:a,center:v,duration:s.duration,easing:s.easing},x):(this.targetResolution_=a,this.targetCenter_=v,this.applyTargetState_(!1,!0),hn(x,!0))}centerOn(t,s,e){this.centerOnInternal(Ve(t,this.getProjection()),s,e)}centerOnInternal(t,s,e){this.setCenterInternal(Ko(t,s,e,this.getResolution(),this.getRotation()))}calculateCenterShift(t,s,e,i){let r,n=this.padding_;if(n&&t){let l=this.getViewportSizeMinusPadding_(-e),a=Ko(t,i,[l[0]/2+n[3],l[1]/2+n[0]],s,e);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){let s=ar(this.targetCenter_,this.getProjection());this.setCenter([s[0]+t[0],s[1]+t[1]])}adjustCenterInternal(t){let s=this.targetCenter_;this.setCenterInternal([s[0]+t[0],s[1]+t[1]])}adjustResolution(t,s){s=s&&Ve(s,this.getProjection()),this.adjustResolutionInternal(t,s)}adjustResolutionInternal(t,s){let e=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,e);s&&(this.targetCenter_=this.calculateCenterZoom(r,s)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,s){this.adjustResolution(Math.pow(this.zoomFactor_,-t),s)}adjustRotation(t,s){s&&(s=Ve(s,this.getProjection())),this.adjustRotationInternal(t,s)}adjustRotationInternal(t,s){let e=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,e);s&&(this.targetCenter_=this.calculateCenterRotate(i,s)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Ve(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,s){return this.hints_[t]+=s,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,s){let e=this.getAnimating()||this.getInteracting()||s,i=this.constraints_.rotation(this.targetRotation_,e),r=this.getViewportSize_(i),n=this.constraints_.resolution(this.targetResolution_,0,r,e),l=this.constraints_.center(this.targetCenter_,n,r,e,this.calculateCenterShift(this.targetCenter_,n,i,r));this.get(Oe.ROTATION)!==i&&this.set(Oe.ROTATION,i),this.get(Oe.RESOLUTION)!==n&&(this.set(Oe.RESOLUTION,n),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(Oe.CENTER)||!ss(this.get(Oe.CENTER),l))&&this.set(Oe.CENTER,l),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,s,e){t=t!==void 0?t:200;let i=s||0,r=this.constraints_.rotation(this.targetRotation_),n=this.getViewportSize_(r),l=this.constraints_.resolution(this.targetResolution_,i,n),a=this.constraints_.center(this.targetCenter_,l,n,!1,this.calculateCenterShift(this.targetCenter_,l,r,n));if(t===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=r,this.targetCenter_=a,this.applyTargetState_();return}e=e||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==r||!this.getCenterInternal()||!ss(this.getCenterInternal(),a))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:l,duration:t,easing:Fe,anchor:e}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Zt.INTERACTING,1)}endInteraction(t,s,e){e=e&&Ve(e,this.getProjection()),this.endInteractionInternal(t,s,e)}endInteractionInternal(t,s,e){this.getInteracting()&&(this.setHint(Zt.INTERACTING,-1),this.resolveConstraints(t,s,e))}getConstrainedCenter(t,s){let e=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,s||this.getResolution(),e)}getConstrainedZoom(t,s){let e=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(e,s))}getConstrainedResolution(t,s){s=s||0;let e=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,s,e)}};function hn(o,t){setTimeout(function(){o(t)},0)}function Ap(o){if(o.extent!==void 0){let s=o.smoothExtentConstraint!==void 0?o.smoothExtentConstraint:!0;return wo(o.extent,o.constrainOnlyCenter,s)}let t=rn(o.projection,"EPSG:3857");if(o.multiWorld!==!0&&t.isGlobal()){let s=t.getExtent().slice();return s[0]=-1/0,s[2]=1/0,wo(s,!1,!1)}return lc}function Pp(o){let t,s,e,n=o.minZoom!==void 0?o.minZoom:Zo,l=o.maxZoom!==void 0?o.maxZoom:28,a=o.zoomFactor!==void 0?o.zoomFactor:2,h=o.multiWorld!==void 0?o.multiWorld:!1,c=o.smoothResolutionConstraint!==void 0?o.smoothResolutionConstraint:!0,g=o.showFullExtent!==void 0?o.showFullExtent:!1,u=rn(o.projection,"EPSG:3857"),p=u.getExtent(),b=o.constrainOnlyCenter,v=o.extent;if(!h&&!v&&u.isGlobal()&&(b=!1,v=p),o.resolutions!==void 0){let x=o.resolutions;s=x[n],e=x[l]!==void 0?x[l]:x[x.length-1],o.constrainResolution?t=hc(x,c,!b&&v,g):t=Eo(s,e,c,!b&&v,g)}else{let m=(p?Math.max(Pt(p),de(p)):360*We.degrees/u.getMetersPerUnit())/256/Math.pow(2,Zo),E=m/Math.pow(2,28-Zo);s=o.maxResolution,s!==void 0?n=0:s=m/Math.pow(a,n),e=o.minResolution,e===void 0&&(o.maxZoom!==void 0?o.maxResolution!==void 0?e=s/Math.pow(a,l):e=m/Math.pow(a,l):e=E),l=n+Math.floor(Math.log(s/e)/Math.log(a)),e=s/Math.pow(a,l-n),o.constrainResolution?t=cc(a,s,e,c,!b&&v,g):t=Eo(s,e,c,!b&&v,g)}return{constraint:t,maxResolution:s,minResolution:e,minZoom:n,zoomFactor:a}}function Dp(o){if(o.enableRotation!==void 0?o.enableRotation:!0){let s=o.constrainRotation;return s===void 0||s===!0?uc():s===!1?To:typeof s=="number"?dc(s):To}return Fs}function Lp(o){return!(o.sourceCenter&&o.targetCenter&&!ss(o.sourceCenter,o.targetCenter)||o.sourceResolution!==o.targetResolution||o.sourceRotation!==o.targetRotation)}function Ko(o,t,s,e,i){let r=Math.cos(-i),n=Math.sin(-i),l=o[0]*r-o[1]*n,a=o[1]*r+o[0]*n;l+=(t[0]/2-s[0])*e,a+=(s[1]-t[1]/2)*e,n=-n;let h=l*r-a*n,c=a*r+l*n;return[h,c]}var De=qo;var $o=class extends Jr{constructor(t){let s=Object.assign({},t);delete s.source,super(s),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(It.SOURCE,this.handleSourcePropertyChange_);let e=t.source?t.source:null;this.setSource(e)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(It.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(At(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let t=this.getSource();t&&(this.sourceChangeKey_=Mt(t,ut.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let s,e=this.getMapInternal();!t&&e&&(t=e.getView()),t instanceof De?s={viewState:t.getState(),extent:t.calculateExtent()}:s=t,!s.layerStatesArray&&e&&(s.layerStatesArray=e.getLayerGroup().getLayerStatesArray());let i;s.layerStatesArray?i=s.layerStatesArray.find(n=>n.layer===this):i=this.getLayerState();let r=this.getExtent();return dr(i,s.viewState)&&(!r||Wt(r,s.extent))}getAttributions(t){if(!this.isVisible(t))return[];let s,e=this.getSource();if(e&&(s=e.getAttributions()),!s)return[];let i=t instanceof De?t.getViewStateAndExtent():t,r=s(i);return Array.isArray(r)||(r=[r]),r}render(t,s){let e=this.getRenderer();return e.prepareFrame(t)?(this.rendered=!0,e.renderFrame(t,s)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(It.MAP,t)}getMapInternal(){return this.get(It.MAP)}setMap(t){this.mapPrecomposeKey_&&(At(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(At(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Mt(t,ge.PRECOMPOSE,function(s){let i=s.frameState.layerStatesArray,r=this.getLayerState(!1);gt(!i.some(function(n){return n.layer===r.layer}),67),i.push(r)},this),this.mapRenderKey_=Mt(this,ut.CHANGE,t.render,t),this.changed())}setSource(t){this.set(It.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function dr(o,t){if(!o.visible)return!1;let s=t.resolution;if(s<o.minResolution||s>=o.maxResolution)return!1;let e=t.zoom;return e>o.minZoom&&e<=o.maxZoom}var ns=$o;var Jo=class extends bs{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,s){Et()}calculateMatrices2D(t){let s=t.viewState,e=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;fe(e,t.size[0]/2,t.size[1]/2,1/s.resolution,-1/s.resolution,-s.rotation,-s.center[0],-s.center[1]),Ms(i,e)}forEachFeatureAtCoordinate(t,s,e,i,r,n,l,a){let h,c=s.viewState;function g(S,w,R,O){return r.call(n,w,S?R:null,O)}let u=c.projection,p=en(t.slice(),u),b=[[0,0]];if(u.canWrapX()&&i){let S=u.getExtent(),w=Pt(S);b.push([-w,0],[w,0])}let v=s.layerStatesArray,x=v.length,m=[],E=[];for(let S=0;S<b.length;S++)for(let w=x-1;w>=0;--w){let R=v[w],O=R.layer;if(O.hasRenderer()&&dr(R,c)&&l.call(a,O)){let I=O.getRenderer(),_=O.getSource();if(I&&_){let P=_.getWrapX()?p:t,F=g.bind(null,R.managed);E[0]=P[0]+b[S][0],E[1]=P[1]+b[S][1],h=I.forEachFeatureAtCoordinate(E,s,e,F,m)}if(h)return h}}if(m.length===0)return;let L=1/m.length;return m.forEach((S,w)=>S.distanceSq+=w*L),m.sort((S,w)=>S.distanceSq-w.distanceSq),m.some(S=>h=S.callback(S.feature,S.layer,S.geometry)),h}hasFeatureAtCoordinate(t,s,e,i,r,n){return this.forEachFeatureAtCoordinate(t,s,e,i,xi,this,r,n)!==void 0}getMap(){return this.map_}renderFrame(t){Et()}flushDeclutterItems(t){}scheduleExpireIconCache(t){Ls.canExpireCache()&&t.postRenderFunctions.push(Ip)}};function Ip(o,t){Ls.expire()}var jc=Jo;var Qo=class extends Jt{constructor(t,s,e,i){super(t),this.inversePixelTransform=s,this.frameState=e,this.context=i}},cn=Qo;var ur="ol-hidden";var Wi="ol-unselectable";var Ns="ol-control",ta="ol-collapsed",Rp=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Bc=["style","variant","weight","size","lineHeight","family"],ea=function(o){let t=o.match(Rp);if(!t)return null;let s={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let e=0,i=Bc.length;e<i;++e){let r=t[e+1];r!==void 0&&(s[Bc[e]]=r)}return s.families=s.family.split(/,\s?/),s};function jt(o,t,s,e){let i;return s&&s.length?i=s.shift():Ss?i=new OffscreenCanvas(o||300,t||300):i=document.createElement("canvas"),o&&(i.width=o),t&&(i.height=t),i.getContext("2d",e)}function os(o){let t=o.canvas;t.width=1,t.height=1,o.clearRect(0,0,1,1)}function ia(o,t){let s=t.parentNode;s&&s.replaceChild(o,t)}function pr(o){return o&&o.parentNode?o.parentNode.removeChild(o):null}function Gc(o){for(;o.lastChild;)o.removeChild(o.lastChild)}function Xc(o,t){let s=o.childNodes;for(let e=0;;++e){let i=s[e],r=t[e];if(!i&&!r)break;if(i!==r){if(!i){o.appendChild(r);continue}if(!r){o.removeChild(i),--e;continue}o.insertBefore(r,i)}}}var un="10px sans-serif",Kt="#000",as="round",ve=[],Ce=0,ri="round",Si=10,Mi="#000",Yi="center",ls="middle",Ei=[0,0,0,0],Ti=1,si=new Ut,js=null,sa,ra={},Wc=function(){let t="32px ",s=["monospace","serif"],e=s.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",r,n;function l(h,c,g){let u=!0;for(let p=0;p<e;++p){let b=s[p];if(n=dn(h+" "+c+" "+t+b,i),g!=b){let v=dn(h+" "+c+" "+t+g+","+b,i);u=u&&v!=n}}return!!u}function a(){let h=!0,c=si.getKeys();for(let g=0,u=c.length;g<u;++g){let p=c[g];si.get(p)<100&&(l.apply(this,p.split(`
`))?(Je(ra),js=null,sa=void 0,si.set(p,100)):(si.set(p,si.get(p)+1,!0),h=!1))}h&&(clearInterval(r),r=void 0)}return function(h){let c=ea(h);if(!c)return;let g=c.families;for(let u=0,p=g.length;u<p;++u){let b=g[u],v=c.style+`
`+c.weight+`
`+b;si.get(v)===void 0&&(si.set(v,100,!0),l(c.style,c.weight,b)||(si.set(v,0,!0),r===void 0&&(r=setInterval(a,32))))}}}(),kp=function(){let o;return function(t){let s=ra[t];if(s==null){if(Ss){let e=ea(t),i=Yc(t,"\u017Dg");s=(isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else o||(o=document.createElement("div"),o.innerHTML="M",o.style.minHeight="0",o.style.maxHeight="none",o.style.height="auto",o.style.padding="0",o.style.border="none",o.style.position="absolute",o.style.display="block",o.style.left="-99999px"),o.style.font=t,document.body.appendChild(o),s=o.offsetHeight,document.body.removeChild(o);ra[t]=s}return s}}();function Yc(o,t){return js||(js=jt(1,1)),o!=sa&&(js.font=o,sa=js.font),js.measureText(t)}function dn(o,t){return Yc(o,t).width}function na(o,t,s){if(t in s)return s[t];let e=t.split(`
`).reduce((i,r)=>Math.max(i,dn(o,r)),0);return s[t]=e,e}function Vc(o,t){let s=[],e=[],i=[],r=0,n=0,l=0,a=0;for(let h=0,c=t.length;h<=c;h+=2){let g=t[h];if(g===`
`||h===c){r=Math.max(r,n),i.push(n),n=0,l+=a;continue}let u=t[h+1]||o.font,p=dn(u,g);s.push(p),n+=p;let b=kp(u);e.push(b),a=Math.max(a,b)}return{width:r,height:l,widths:s,heights:e,lineWidths:i}}function Uc(o,t,s,e,i,r,n,l,a,h,c){o.save(),s!==1&&(o.globalAlpha*=s),t&&o.setTransform.apply(o,t),e.contextInstructions?(o.translate(a,h),o.scale(c[0],c[1]),Op(e,o)):c[0]<0||c[1]<0?(o.translate(a,h),o.scale(c[0],c[1]),o.drawImage(e,i,r,n,l,0,0,n,l)):o.drawImage(e,i,r,n,l,a,h,n*c[0],l*c[1]),o.restore()}function Op(o,t){let s=o.contextInstructions;for(let e=0,i=s.length;e<i;e+=2)Array.isArray(s[e+1])?t[s[e]].apply(t,s[e+1]):t[s[e]]=s[e+1]}var oa=class extends jc{constructor(t){super(t),this.fontChangeListenerKey_=Mt(si,Be.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");let s=this.element_.style;s.position="absolute",s.width="100%",s.height="100%",s.zIndex="0",this.element_.className=Wi+" ol-layers";let e=t.getViewport();e.insertBefore(this.element_,e.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,s){let e=this.getMap();if(e.hasListener(t)){let i=new cn(t,void 0,s);e.dispatchEvent(i)}}disposeInternal(){At(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(ge.PRECOMPOSE,t);let s=t.layerStatesArray.sort(function(n,l){return n.zIndex-l.zIndex}),e=t.viewState;this.children_.length=0;let i=this.declutterLayers_;i.length=0;let r=null;for(let n=0,l=s.length;n<l;++n){let a=s[n];t.layerIndex=n;let h=a.layer,c=h.getSourceState();if(!dr(a,e)||c!="ready"&&c!="undefined"){h.unrender();continue}let g=h.render(t,r);g&&(g!==r&&(this.children_.push(g),r=g),"getDeclutter"in h&&i.push(h))}this.flushDeclutterItems(t),Xc(this.element_,this.children_),this.dispatchRenderEvent(ge.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){let s=this.declutterLayers_;for(let e=s.length-1;e>=0;--e)s[e].renderDeclutter(t);s.length=0}},Hc=oa;var He=class extends Jt{constructor(t,s){super(t),this.layer=s}},aa={LAYERS:"layers"},la=class o extends Jr{constructor(t){t=t||{};let s=Object.assign({},t);delete s.layers;let e=t.layers;super(s),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(aa.LAYERS,this.handleLayersChanged_),e?Array.isArray(e)?e=new se(e.slice(),{unique:!0}):gt(typeof e.getArray=="function",43):e=new se(void 0,{unique:!0}),this.setLayers(e)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(At),this.layersListenerKeys_.length=0;let t=this.getLayers();this.layersListenerKeys_.push(Mt(t,Qt.ADD,this.handleLayersAdd_,this),Mt(t,Qt.REMOVE,this.handleLayersRemove_,this));for(let e in this.listenerKeys_)this.listenerKeys_[e].forEach(At);Je(this.listenerKeys_);let s=t.getArray();for(let e=0,i=s.length;e<i;e++){let r=s[e];this.registerLayerListeners_(r),this.dispatchEvent(new He("addlayer",r))}this.changed()}registerLayerListeners_(t){let s=[Mt(t,Be.PROPERTYCHANGE,this.handleLayerChange_,this),Mt(t,ut.CHANGE,this.handleLayerChange_,this)];t instanceof o&&s.push(Mt(t,"addlayer",this.handleLayerGroupAdd_,this),Mt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[_t(t)]=s}handleLayerGroupAdd_(t){this.dispatchEvent(new He("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new He("removelayer",t.layer))}handleLayersAdd_(t){let s=t.element;this.registerLayerListeners_(s),this.dispatchEvent(new He("addlayer",s)),this.changed()}handleLayersRemove_(t){let s=t.element,e=_t(s);this.listenerKeys_[e].forEach(At),delete this.listenerKeys_[e],this.dispatchEvent(new He("removelayer",s)),this.changed()}getLayers(){return this.get(aa.LAYERS)}setLayers(t){let s=this.getLayers();if(s){let e=s.getArray();for(let i=0,r=e.length;i<r;++i)this.dispatchEvent(new He("removelayer",e[i]))}this.set(aa.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(s){s.getLayersArray(t)}),t}getLayerStatesArray(t){let s=t!==void 0?t:[],e=s.length;this.getLayers().forEach(function(n){n.getLayerStatesArray(s)});let i=this.getLayerState(),r=i.zIndex;!t&&i.zIndex===void 0&&(r=0);for(let n=e,l=s.length;n<l;n++){let a=s[n];a.opacity*=i.opacity,a.visible=a.visible&&i.visible,a.maxResolution=Math.min(a.maxResolution,i.maxResolution),a.minResolution=Math.max(a.minResolution,i.minResolution),a.minZoom=Math.max(a.minZoom,i.minZoom),a.maxZoom=Math.min(a.maxZoom,i.maxZoom),i.extent!==void 0&&(a.extent!==void 0?a.extent=Oi(a.extent,i.extent):a.extent=i.extent),a.zIndex===void 0&&(a.zIndex=r)}return s}getSourceState(){return"ready"}},fr=la;var ha=class extends Jt{constructor(t,s,e){super(t),this.map=s,this.frameState=e!==void 0?e:null}},Vi=ha;var ca=class extends Vi{constructor(t,s,e,i,r,n){super(t,s,r),this.originalEvent=e,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=n}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},ni=ca;var Ft={SINGLECLICK:"singleclick",CLICK:ut.CLICK,DBLCLICK:ut.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var gr={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var da=class extends Li{constructor(t,s){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=s===void 0?1:s,this.down_=null;let e=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=e,this.pointerdownListenerKey_=Mt(e,gr.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Mt(e,gr.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ut.TOUCHMOVE,this.boundHandleTouchMove_,Wr?{passive:!1}:!1)}emulateClick_(t){let s=new ni(Ft.CLICK,this.map_,t);this.dispatchEvent(s),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,s=new ni(Ft.DBLCLICK,this.map_,t),this.dispatchEvent(s)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let e=new ni(Ft.SINGLECLICK,this.map_,t);this.dispatchEvent(e)},250)}updateActivePointers_(t){let s=t,e=s.pointerId;if(s.type==Ft.POINTERUP||s.type==Ft.POINTERCANCEL){delete this.trackedTouches_[e];for(let i in this.trackedTouches_)if(this.trackedTouches_[i].target!==s.target){delete this.trackedTouches_[i];break}}else(s.type==Ft.POINTERDOWN||s.type==Ft.POINTERMOVE)&&(this.trackedTouches_[e]=s);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);let s=new ni(Ft.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(s),this.emulateClicks_&&!s.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(At),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);let s=new ni(Ft.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(s),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){let e=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Mt(e,Ft.POINTERMOVE,this.handlePointerMove_,this),Mt(e,Ft.POINTERUP,this.handlePointerUp_,this),Mt(this.element_,Ft.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==e&&this.dragListenerKeys_.push(Mt(this.element_.getRootNode(),Ft.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;let s=new ni(Ft.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(s)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;let s=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new ni(Ft.POINTERMOVE,this.map_,t,s))}handleTouchMove_(t){let s=this.originalPointerMoveEvent_;(!s||s.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(At(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ut.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(At(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(At),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Zc=da;var oi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var re={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var mr=1/0,ua=class{constructor(t,s){this.priorityFunction_=t,this.keyFunction_=s,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Je(this.queuedElements_)}dequeue(){let t=this.elements_,s=this.priorities_,e=t[0];t.length==1?(t.length=0,s.length=0):(t[0]=t.pop(),s[0]=s.pop(),this.siftUp_(0));let i=this.keyFunction_(e);return delete this.queuedElements_[i],e}enqueue(t){gt(!(this.keyFunction_(t)in this.queuedElements_),31);let s=this.priorityFunction_(t);return s!=mr?(this.elements_.push(t),this.priorities_.push(s),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){let s=this.elements_,e=this.priorities_,i=s.length,r=s[t],n=e[t],l=t;for(;t<i>>1;){let a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),c=h<i&&e[h]<e[a]?h:a;s[t]=s[c],e[t]=e[c],t=c}s[t]=r,e[t]=n,this.siftDown_(l,t)}siftDown_(t,s){let e=this.elements_,i=this.priorities_,r=e[s],n=i[s];for(;s>t;){let l=this.getParentIndex_(s);if(i[l]>n)e[s]=e[l],i[s]=i[l],s=l;else break}e[s]=r,i[s]=n}reprioritize(){let t=this.priorityFunction_,s=this.elements_,e=this.priorities_,i=0,r=s.length,n,l,a;for(l=0;l<r;++l)n=s[l],a=t(n),a==mr?delete this.queuedElements_[this.keyFunction_(n)]:(e[i]=a,s[i++]=n);s.length=i,e.length=i,this.heapify_()}},Kc=ua;var pt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var pa=class extends Kc{constructor(t,s){super(function(e){return t.apply(null,e)},function(e){return e[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=s,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){let s=super.enqueue(t);return s&&t[0].addEventListener(ut.CHANGE,this.boundHandleTileChange_),s}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){let s=t.target,e=s.getState();if(e===pt.LOADED||e===pt.ERROR||e===pt.EMPTY){e!==pt.ERROR&&s.removeEventListener(ut.CHANGE,this.boundHandleTileChange_);let i=s.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,s){let e=0,i,r,n;for(;this.tilesLoading_<t&&e<s&&this.getCount()>0;)r=this.dequeue()[0],n=r.getKey(),i=r.getState(),i===pt.IDLE&&!(n in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++e,r.load())}},qc=pa;function $c(o,t,s,e,i){if(!o||!(s in o.wantedTiles))return mr;if(!o.wantedTiles[s][t.getKey()])return mr;let r=o.viewState.center,n=e[0]-r[0],l=e[1]-r[1];return 65536*Math.log(i)+Math.sqrt(n*n+l*l)/i}var fa=class extends Ut{constructor(t){super();let s=t.element;s&&!t.target&&!s.style.pointerEvents&&(s.style.pointerEvents="auto"),this.element=s||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){pr(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&pr(this.element);for(let s=0,e=this.listenerKeys.length;s<e;++s)At(this.listenerKeys[s]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ge&&this.listenerKeys.push(Mt(t,oi.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}},Bs=fa;var ga=class extends Bs{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let s=t.className!==void 0?t.className:"ol-attribution",e=t.tipLabel!==void 0?t.tipLabel:"Attributions",i=t.expandClassName!==void 0?t.expandClassName:s+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",n=t.collapseClassName!==void 0?t.collapseClassName:s+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=n):this.collapseLabel_=r;let l=t.label!==void 0?t.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=i):this.label_=l;let a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=e,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(ut.CLICK,this.handleClick_.bind(this),!1);let h=s+" "+Wi+" "+Ns+(this.collapsed_&&this.collapsible_?" "+ta:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){let s=Array.from(new Set(this.getMap().getAllLayers().flatMap(i=>i.getAttributions(t)))),e=!this.getMap().getAllLayers().some(i=>i.getSource()&&i.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(e),s}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let s=this.collectSourceAttributions_(t),e=s.length>0;if(this.renderedVisible_!=e&&(this.element.style.display=e?"":"none",this.renderedVisible_=e),!he(s,this.renderedAttributions_)){Gc(this.ulElement_);for(let i=0,r=s.length;i<r;++i){let n=document.createElement("li");n.innerHTML=s[i],this.ulElement_.appendChild(n)}this.renderedAttributions_=s}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ta),this.collapsed_?ia(this.collapseLabel_,this.label_):ia(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},Jc=ga;var ma=class extends Bs{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});let s=t.className!==void 0?t.className:"ol-rotate",e=t.label!==void 0?t.label:"\u21E7",i=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof e=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=e):(this.label_=e,this.label_.classList.add(i));let r=t.tipLabel?t.tipLabel:"Reset rotation",n=document.createElement("button");n.className=s+"-reset",n.setAttribute("type","button"),n.title=r,n.appendChild(this.label_),n.addEventListener(ut.CLICK,this.handleClick_.bind(this),!1);let l=s+" "+Wi+" "+Ns,a=this.element;a.className=l,a.appendChild(n),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ur)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let s=this.getMap().getView();if(!s)return;let e=s.getRotation();e!==void 0&&(this.duration_>0&&e%(2*Math.PI)!==0?s.animate({rotation:0,duration:this.duration_,easing:Fe}):s.setRotation(0))}render(t){let s=t.frameState;if(!s)return;let e=s.viewState.rotation;if(e!=this.rotation_){let i="rotate("+e+"rad)";if(this.autoHide_){let r=this.element.classList.contains(ur);!r&&e===0?this.element.classList.add(ur):r&&e!==0&&this.element.classList.remove(ur)}this.label_.style.transform=i}this.rotation_=e}},Qc=ma;var xa=class extends Bs{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});let s=t.className!==void 0?t.className:"ol-zoom",e=t.delta!==void 0?t.delta:1,i=t.zoomInClassName!==void 0?t.zoomInClassName:s+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:s+"-out",n=t.zoomInLabel!==void 0?t.zoomInLabel:"+",l=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",a=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i,c.setAttribute("type","button"),c.title=a,c.appendChild(typeof n=="string"?document.createTextNode(n):n),c.addEventListener(ut.CLICK,this.handleClick_.bind(this,e),!1);let g=document.createElement("button");g.className=r,g.setAttribute("type","button"),g.title=h,g.appendChild(typeof l=="string"?document.createTextNode(l):l),g.addEventListener(ut.CLICK,this.handleClick_.bind(this,-e),!1);let u=s+" "+Wi+" "+Ns,p=this.element;p.className=u,p.appendChild(c),p.appendChild(g),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,s){s.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){let e=this.getMap().getView();if(!e)return;let i=e.getZoom();if(i!==void 0){let r=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:r,duration:this.duration_,easing:Fe})):e.setZoom(r)}}},td=xa;function xr(o){o=o||{};let t=new se;return(o.zoom!==void 0?o.zoom:!0)&&t.push(new td(o.zoomOptions)),(o.rotate!==void 0?o.rotate:!0)&&t.push(new Qc(o.rotateOptions)),(o.attribution!==void 0?o.attribution:!0)&&t.push(new Jc(o.attributionOptions)),t}var ya={ACTIVE:"active"};var ba=class extends Ut{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ya.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(ya.ACTIVE,t)}setMap(t){this.map_=t}};function ed(o,t,s){let e=o.getCenterInternal();if(e){let i=[e[0]+t[0],e[1]+t[1]];o.animateInternal({duration:s!==void 0?s:250,easing:fc,center:o.getConstrainedCenter(i)})}}function Gs(o,t,s,e){let i=o.getZoom();if(i===void 0)return;let r=o.getConstrainedZoom(i+t),n=o.getResolutionForZoom(r);o.getAnimating()&&o.cancelAnimations(),o.animate({resolution:n,anchor:s,duration:e!==void 0?e:250,easing:Fe})}var ai=ba;var va=class extends ai{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let s=!1;if(t.type==Ft.DBLCLICK){let e=t.originalEvent,i=t.map,r=t.coordinate,n=e.shiftKey?-this.delta_:this.delta_,l=i.getView();Gs(l,n,r,this.duration_),e.preventDefault(),s=!0}return!s}},id=va;var Ca=class extends ai{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let s=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ft.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ft.POINTERUP){let e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==Ft.POINTERDOWN){let e=this.handleDownEvent(t);this.handlingDownUpSequence=e,s=this.stopDown(e)}else t.type==Ft.POINTERMOVE&&this.handleMoveEvent(t);return!s}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Xs(o){let t=o.length,s=0,e=0;for(let i=0;i<t;i++)s+=o[i].clientX,e+=o[i].clientY;return{clientX:s/t,clientY:e/t}}var li=Ca;function yr(o){let t=arguments;return function(s){let e=!0;for(let i=0,r=t.length;i<r&&(e=e&&t[i](s),!!e);++i);return e}}var sd=function(o){let t=o.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Fp=function(o){let t=o.map.getTargetElement(),s=o.map.getOwnerDocument().activeElement;return t.contains(s)},pn=function(o){return o.map.getTargetElement().hasAttribute("tabindex")?Fp(o):!0},rd=xi;var fn=function(o){let t=o.originalEvent;return t.button==0&&!(Lh&&ao&&t.ctrlKey)};var gn=function(o){let t=o.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var nd=function(o){let t=o.originalEvent;return ao?t.metaKey:t.ctrlKey},od=function(o){let t=o.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},mn=function(o){let t=o.originalEvent,s=t.target.tagName;return s!=="INPUT"&&s!=="SELECT"&&s!=="TEXTAREA"&&!t.target.isContentEditable},xn=function(o){let t=o.originalEvent;return gt(t!==void 0,56),t.pointerType=="mouse"};var ad=function(o){let t=o.originalEvent;return gt(t!==void 0,56),t.isPrimary&&t.button===0};var _a=class extends li{constructor(t){super({stopDown:yi}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let s=t.condition?t.condition:yr(gn,ad);this.condition_=t.onFocusOnly?yr(pn,s):s,this.noKinetic_=!1}handleDragEvent(t){let s=t.map;this.panning_||(this.panning_=!0,s.getView().beginInteraction());let e=this.targetPointers,i=s.getEventPixel(Xs(e));if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){let r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],l=t.map.getView();tc(r,l.getResolution()),ks(r,l.getRotation()),l.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){let s=t.map,e=s.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let i=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),n=e.getCenterInternal(),l=s.getPixelFromCoordinateInternal(n),a=s.getCoordinateFromPixelInternal([l[0]-i*Math.cos(r),l[1]-i*Math.sin(r)]);e.animateInternal({center:e.getConstrainedCenter(a),duration:500,easing:Fe})}return this.panning_&&(this.panning_=!1,e.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){let e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},ld=_a;var wa=class extends li{constructor(t){t=t||{},super({stopDown:yi}),this.condition_=t.condition?t.condition:sd,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!xn(t))return;let s=t.map,e=s.getView();if(e.getConstraints().rotation===Fs)return;let i=s.getSize(),r=t.pixel,n=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(this.lastAngle_!==void 0){let l=n-this.lastAngle_;e.adjustRotationInternal(-l)}this.lastAngle_=n}handleUpEvent(t){return xn(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return xn(t)&&fn(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},hd=wa;var Sa=class extends bs{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let t=this.startPixel_,s=this.endPixel_,e="px",i=this.element_.style;i.left=Math.min(t[0],s[0])+e,i.top=Math.min(t[1],s[1])+e,i.width=Math.abs(s[0]-t[0])+e,i.height=Math.abs(s[1]-t[1])+e}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let s=this.element_.style;s.left="inherit",s.top="inherit",s.width="inherit",s.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,s){this.startPixel_=t,this.endPixel_=s,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){let t=this.startPixel_,s=this.endPixel_,i=[t,[t[0],s[1]],s,[s[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Xi([i])}getGeometry(){return this.geometry_}},cd=Sa;var yn={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},br=class extends Jt{constructor(t,s,e){super(t),this.coordinate=s,this.mapBrowserEvent=e}},Ma=class extends li{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new cd(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:fn,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,s,e){let i=e[0]-s[0],r=e[1]-s[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new br(yn.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);let s=this.boxEndCondition_(t,this.startPixel_,t.pixel);return s&&this.onBoxEnd(t),this.dispatchEvent(new br(s?yn.BOXEND:yn.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new br(yn.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}},dd=Ma;var Ea=class extends dd{constructor(t){t=t||{};let s=t.condition?t.condition:od;super({condition:s,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){let e=this.getMap().getView(),i=this.getGeometry();if(this.out_){let r=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(r),l=e.getResolution()/n;i=i.clone(),i.scale(l*l)}e.fitInternal(i,{duration:this.duration_,easing:Fe})}},ud=Ea;var Ui={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var Ta=class extends ai{constructor(t){super(),t=t||{},this.defaultCondition_=function(s){return gn(s)&&mn(s)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let s=!1;if(t.type==ut.KEYDOWN){let e=t.originalEvent,i=e.key;if(this.condition_(t)&&(i==Ui.DOWN||i==Ui.LEFT||i==Ui.RIGHT||i==Ui.UP)){let n=t.map.getView(),l=n.getResolution()*this.pixelDelta_,a=0,h=0;i==Ui.DOWN?h=-l:i==Ui.LEFT?a=-l:i==Ui.RIGHT?a=l:h=l;let c=[a,h];ks(c,n.getRotation()),ed(n,c,this.duration_),e.preventDefault(),s=!0}}return!s}},pd=Ta;var Aa=class extends ai{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(s){return!nd(s)&&mn(s)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let s=!1;if(t.type==ut.KEYDOWN||t.type==ut.KEYPRESS){let e=t.originalEvent,i=e.key;if(this.condition_(t)&&(i==="+"||i==="-")){let r=t.map,n=i==="+"?this.delta_:-this.delta_,l=r.getView();Gs(l,n,void 0,this.duration_),e.preventDefault(),s=!0}}return!s}},fd=Aa;var Pa=class{constructor(t,s,e){this.decay_=t,this.minVelocity_=s,this.delay_=e,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,s){this.points_.push(t,s,Date.now())}end(){if(this.points_.length<6)return!1;let t=Date.now()-this.delay_,s=this.points_.length-3;if(this.points_[s+2]<t)return!1;let e=s-3;for(;e>0&&this.points_[e+2]>t;)e-=3;let i=this.points_[s+2]-this.points_[e+2];if(i<1e3/60)return!1;let r=this.points_[s]-this.points_[e],n=this.points_[s+1]-this.points_[e+1];return this.angle_=Math.atan2(n,r),this.initialVelocity_=Math.sqrt(r*r+n*n)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},gd=Pa;var Da=class extends ai{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;let s=t.condition?t.condition:rd;this.condition_=t.onFocusOnly?yr(pn,s):s,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==ut.WHEEL)return!0;let e=t.map,i=t.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==ut.WHEEL&&(r=i.deltaY,Dh&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=Xr),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;let n=Date.now();this.startTime_===void 0&&(this.startTime_=n),(!this.mode_||n-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");let l=e.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=n,!1;this.totalDelta_+=r;let a=Math.max(this.timeout_-(n-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),a),!1}handleWheelZoom_(t){let s=t.getView();s.getAnimating()&&s.cancelAnimations();let e=-Rt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(s.getConstrainResolution()||this.constrainResolution_)&&(e=e?e>0?1:-1:0),Gs(s,e,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},md=Da;var La=class extends li{constructor(t){t=t||{};let s=t;s.stopDown||(s.stopDown=yi),super(s),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let s=0,e=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-e.clientY,i.clientX-e.clientX);if(this.lastAngle_!==void 0){let a=r-this.lastAngle_;this.rotationDelta_+=a,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),s=a}this.lastAngle_=r;let n=t.map,l=n.getView();l.getConstraints().rotation!==Fs&&(this.anchor_=n.getCoordinateFromPixelInternal(n.getEventPixel(Xs(this.targetPointers))),this.rotating_&&(n.render(),l.adjustRotationInternal(s,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){let s=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||s.getView().beginInteraction(),!0}return!1}},xd=La;var Ia=class extends li{constructor(t){t=t||{};let s=t;s.stopDown||(s.stopDown=yi),super(s),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let s=1,e=this.targetPointers[0],i=this.targetPointers[1],r=e.clientX-i.clientX,n=e.clientY-i.clientY,l=Math.sqrt(r*r+n*n);this.lastDistance_!==void 0&&(s=this.lastDistance_/l),this.lastDistance_=l;let a=t.map,h=a.getView();s!=1&&(this.lastScaleDelta_=s),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Xs(this.targetPointers))),a.render(),h.adjustResolutionInternal(s,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){let e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){let s=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||s.getView().beginInteraction(),!0}return!1}},yd=Ia;function bd(o){o=o||{};let t=new se,s=new gd(-.005,.05,100);return(o.altShiftDragRotate!==void 0?o.altShiftDragRotate:!0)&&t.push(new hd),(o.doubleClickZoom!==void 0?o.doubleClickZoom:!0)&&t.push(new id({delta:o.zoomDelta,duration:o.zoomDuration})),(o.dragPan!==void 0?o.dragPan:!0)&&t.push(new ld({onFocusOnly:o.onFocusOnly,kinetic:s})),(o.pinchRotate!==void 0?o.pinchRotate:!0)&&t.push(new xd),(o.pinchZoom!==void 0?o.pinchZoom:!0)&&t.push(new yd({duration:o.zoomDuration})),(o.keyboard!==void 0?o.keyboard:!0)&&(t.push(new pd),t.push(new fd({delta:o.zoomDelta,duration:o.zoomDuration}))),(o.mouseWheelZoom!==void 0?o.mouseWheelZoom:!0)&&t.push(new md({onFocusOnly:o.onFocusOnly,duration:o.zoomDuration})),(o.shiftDragZoom!==void 0?o.shiftDragZoom:!0)&&t.push(new ud({duration:o.zoomDuration})),t}function Ra(o){return o[0]>0&&o[1]>0}function vd(o,t,s){return s===void 0&&(s=[0,0]),s[0]=o[0]*t+.5|0,s[1]=o[1]*t+.5|0,s}function te(o,t){return Array.isArray(o)?o:(t===void 0?t=[o,o]:(t[0]=o,t[1]=o),t)}function Cd(o){if(o instanceof ns){o.setMapInternal(null);return}o instanceof fr&&o.getLayers().forEach(Cd)}function _d(o,t){if(o instanceof ns){o.setMapInternal(t);return}if(o instanceof fr){let s=o.getLayers().getArray();for(let e=0,i=s.length;e<i;++e)_d(s[e],t)}}var ka=class extends Ut{constructor(t){super(),t=t||{},this.on,this.once,this.un;let s=zp(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Xr,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ce(),this.pixelToCoordinateTransform_=ce(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=s.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=s.controls||xr(),this.interactions=s.interactions||bd({onFocusOnly:!0}),this.overlays_=s.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new qc(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(re.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(re.VIEW,this.handleViewChanged_),this.addChangeListener(re.SIZE,this.handleSizeChanged_),this.addChangeListener(re.TARGET,this.handleTargetChanged_),this.setProperties(s.values);let e=this;t.view&&!(t.view instanceof De)&&t.view.then(function(i){e.setView(new De(i))}),this.controls.addEventListener(Qt.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Qt.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Qt.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Qt.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Qt.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Qt.REMOVE,i=>{let r=i.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){_d(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){let s=t.getId();s!==void 0&&(this.overlayIdIndex_[s.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,s,e){if(!this.frameState_||!this.renderer_)return;let i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};let r=e.hitTolerance!==void 0?e.hitTolerance:0,n=e.layerFilter!==void 0?e.layerFilter:xi,l=e.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,l,s,null,n,null)}getFeaturesAtPixel(t,s){let e=[];return this.forEachFeatureAtPixel(t,function(i){e.push(i)},s),e}getAllLayers(){let t=[];function s(e){e.forEach(function(i){i instanceof fr?s(i.getLayers()):t.push(i)})}return s(this.getLayers()),t}hasFeatureAtPixel(t,s){if(!this.frameState_||!this.renderer_)return!1;let e=this.getCoordinateFromPixelInternal(t);s=s!==void 0?s:{};let i=s.layerFilter!==void 0?s.layerFilter:xi,r=s.hitTolerance!==void 0?s.hitTolerance:0,n=s.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(e,this.frameState_,r,n,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){let e=this.viewport_.getBoundingClientRect(),i=this.getSize(),r=e.width/i[0],n=e.height/i[1],l="changedTouches"in t?t.changedTouches[0]:t;return[(l.clientX-e.left)/r,(l.clientY-e.top)/n]}getTarget(){return this.get(re.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return ar(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){let s=this.frameState_;return s?Xt(s.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){let s=this.overlayIdIndex_[t.toString()];return s!==void 0?s:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(re.LAYERGROUP)}setLayers(t){let s=this.getLayerGroup();if(t instanceof se){s.setLayers(t);return}let e=s.getLayers();e.clear(),e.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let t=this.getLayerGroup().getLayerStatesArray();for(let s=0,e=t.length;s<e;++s){let i=t[s];if(!i.visible)continue;let r=i.layer.getRenderer();if(r&&!r.ready)return!0;let n=i.layer.getSource();if(n&&n.loading)return!0}return!1}getPixelFromCoordinate(t){let s=Ve(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(s)}getPixelFromCoordinateInternal(t){let s=this.frameState_;return s?Xt(s.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(re.SIZE)}getView(){return this.get(re.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,s,e,i){return $c(this.frameState_,t,s,e,i)}handleBrowserEvent(t,s){s=s||t.type;let e=new ni(s,this,t);this.handleMapBrowserEvent(e)}handleMapBrowserEvent(t){if(!this.frameState_)return;let s=t.originalEvent,e=s.type;if(e===gr.POINTERDOWN||e===ut.WHEEL||e===ut.KEYDOWN){let i=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():i,n=s.target;if(this.overlayContainerStopEvent_.contains(n)||!(r===i?i.documentElement:r).contains(n))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){let i=this.getInteractions().getArray().slice();for(let r=i.length-1;r>=0;r--){let n=i[r];if(n.getMap()!==this||!n.getActive()||!this.getTargetElement())continue;if(!n.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){let t=this.frameState_,s=this.tileQueue_;if(!s.isEmpty()){let i=this.maxTilesLoading_,r=i;if(t){let n=t.viewHints;if(n[Zt.ANIMATING]||n[Zt.INTERACTING]){let l=Date.now()-t.time>8;i=l?0:8,r=l?0:2}}s.getTilesLoading()<i&&(s.reprioritize(),s.loadMoreTiles(i,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(ge.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ge.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Vi(oi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Vi(oi.LOADSTART,this,t))));let e=this.postRenderFunctions_;for(let i=0,r=e.length;i<r;++i)e[i](this,t);e.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,i=this.targetChangeHandlerKeys_.length;e<i;++e)At(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ut.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ut.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,pr(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);let e=this.targetElement_.getRootNode();e instanceof ShadowRoot&&this.resizeObserver_.unobserve(e.host),this.setSize(void 0)}let t=this.getTarget(),s=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=s,!s)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{s.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Hc(this)),this.mapBrowserEventHandler_=new Zc(this,this.moveTolerance_);for(let r in Ft)this.mapBrowserEventHandler_.addEventListener(Ft[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ut.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ut.WHEEL,this.boundHandleBrowserEvent_,Wr?{passive:!1}:!1);let e=this.keyboardEventTarget_?this.keyboardEventTarget_:s;this.targetChangeHandlerKeys_=[Mt(e,ut.KEYDOWN,this.handleBrowserEvent,this),Mt(e,ut.KEYPRESS,this.handleBrowserEvent,this)];let i=s.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(s)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(At(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(At(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Mt(t,Be.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Mt(t,ut.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(At),this.layerGroupPropertyListenerKeys_=null);let t=this.getLayerGroup();t&&(this.handleLayerAdd_(new He("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Mt(t,Be.PROPERTYCHANGE,this.render,this),Mt(t,ut.CHANGE,this.render,this),Mt(t,"addlayer",this.handleLayerAdd_,this),Mt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let t=this.getLayerGroup().getLayerStatesArray();for(let s=0,e=t.length;s<e;++s){let i=t[s].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){let t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Cd(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){let s=this.getSize(),e=this.getView(),i=this.frameState_,r=null;if(s!==void 0&&Ra(s)&&e&&e.isDef()){let n=e.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=e.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:er(l.center,l.resolution,l.rotation,s),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:s,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:l,viewHints:n,wantedTiles:{},mapId:_t(this),renderTargets:{}},l.nextCenter&&l.nextResolution){let a=isNaN(l.nextRotation)?l.rotation:l.nextRotation;r.nextExtent=er(l.nextCenter,l.nextResolution,a,s)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i&&(!this.previousExtent_||!Fi(this.previousExtent_)&&!Ci(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Vi(oi.MOVESTART,this,i)),this.previousExtent_=ts(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Zt.ANIMATING]&&!r.viewHints[Zt.INTERACTING]&&!Ci(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Vi(oi.MOVEEND,this,r)),Ur(r.extent,this.previousExtent_))),this.dispatchEvent(new Vi(oi.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(oi.LOADSTART)||this.hasListener(oi.LOADEND)||this.hasListener(ge.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){let s=this.getLayerGroup();s&&this.handleLayerRemove_(new He("removelayer",s)),this.set(re.LAYERGROUP,t)}setSize(t){this.set(re.SIZE,t)}setTarget(t){this.set(re.TARGET,t)}setView(t){if(!t||t instanceof De){this.set(re.VIEW,t);return}this.set(re.VIEW,new De);let s=this;t.then(function(e){s.setView(new De(e))})}updateSize(){let t=this.getTargetElement(),s;if(t){let i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),n=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(r)&&!isNaN(n)&&(s=[r,n],!Ra(s)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&sn("No map visible because the map container's width or height are 0."))}let e=this.getSize();s&&(!e||!he(s,e))&&(this.setSize(s),this.updateViewportSize_())}updateViewportSize_(){let t=this.getView();if(t){let s,e=getComputedStyle(this.viewport_);e.width&&e.height&&(s=[parseInt(e.width,10),parseInt(e.height,10)]),t.setViewportSize(s)}}};function zp(o){let t=null;o.keyboardEventTarget!==void 0&&(t=typeof o.keyboardEventTarget=="string"?document.getElementById(o.keyboardEventTarget):o.keyboardEventTarget);let s={},e=o.layers&&typeof o.layers.getLayers=="function"?o.layers:new fr({layers:o.layers});s[re.LAYERGROUP]=e,s[re.TARGET]=o.target,s[re.VIEW]=o.view instanceof De?o.view:new De;let i;o.controls!==void 0&&(Array.isArray(o.controls)?i=new se(o.controls.slice()):(gt(typeof o.controls.getArray=="function",47),i=o.controls));let r;o.interactions!==void 0&&(Array.isArray(o.interactions)?r=new se(o.interactions.slice()):(gt(typeof o.interactions.getArray=="function",48),r=o.interactions));let n;return o.overlays!==void 0?Array.isArray(o.overlays)?n=new se(o.overlays.slice()):(gt(typeof o.overlays.getArray=="function",49),n=o.overlays):n=new se,{controls:i,interactions:r,keyboardEventTarget:t,overlays:n,values:s}}var wd=ka;var Oa=class o extends Ut{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){let s=t;this.setGeometry(s)}else{let s=t;this.setProperties(s)}}clone(){let t=new o(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let s=this.getGeometry();s&&t.setGeometry(s.clone());let e=this.getStyle();return e&&t.setStyle(e),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(At(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=Mt(t,ut.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?Np(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function Np(o){if(typeof o=="function")return o;let t;return Array.isArray(o)?t=o:(gt(typeof o.getZIndex=="function",41),t=[o]),function(){return t}}var Fa=Oa;var za=class o{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){let t=this.getColor();return new o({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}},hi=za;function Sd(o,t,s,e){let i=o[t],r=o[t+1],n=0;for(let l=t+e;l<s;l+=e){let a=o[l],h=o[l+1];n+=Math.sqrt((a-i)*(a-i)+(h-r)*(h-r)),i=a,r=h}return n}var Na=class o{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){let t=this.getColor();return new o({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}},ci=Na;var Ot={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var ja=class o{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=te(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Et()}getImage(t){return Et()}getHitDetectionImage(){return Et()}getPixelRatio(t){return 1}getImageState(){return Et()}getImageSize(){return Et()}getOrigin(){return Et()}getSize(){return Et()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=te(t)}listenImageChange(t){Et()}load(){Et()}unlistenImageChange(t){Et()}},bn=ja;function _e(o){return Array.isArray(o)?uo(o):o}var Ba=class o extends bn{constructor(t){let s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:s,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){let t=this.getScale(),s=new o({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return s.setOpacity(this.getOpacity()),s}getAnchor(){let t=this.size_;if(!t)return null;let s=this.getDisplacement(),e=this.getScaleArray();return[t[0]/2-s[0]/e[0],t[1]/2+s[1]/e[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let s=this.canvas_[t];if(!s){let e=this.renderOptions_,i=jt(e.size*t,e.size*t);this.draw_(e,i,t),s=i.canvas,this.canvas_[t]=s}return s}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Ot.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,s,e){if(s===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return s;let i=this.radius_,r=this.radius2_===void 0?i:this.radius2_;if(i<r){let R=i;i=r,r=R}let n=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/n,a=r*Math.sin(l),h=Math.sqrt(r*r-a*a),c=i-h,g=Math.sqrt(a*a+c*c),u=g/a;if(t==="miter"&&u<=e)return u*s;let p=s/2/u,b=s/2*(c/g),x=Math.sqrt((i+p)*(i+p)+b*b)-i;if(this.radius2_===void 0||t==="bevel")return x*2;let m=i*Math.sin(l),E=Math.sqrt(i*i-m*m),L=r-E,w=Math.sqrt(m*m+L*L)/m;if(w<=e){let R=w*s/2-r-i;return 2*Math.max(x,R)}return x*2}createRenderOptions(){let t=ri,s=0,e=null,i=0,r,n=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=Mi),r=_e(r),n=this.stroke_.getWidth(),n===void 0&&(n=Ti),e=this.stroke_.getLineDash(),i=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=ri),s=this.stroke_.getMiterLimit(),s===void 0&&(s=Si));let l=this.calculateLineJoinSize_(t,n,s),a=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*a+l);return{strokeStyle:r,strokeWidth:n,size:h,lineDash:e,lineDashOffset:i,lineJoin:t,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,s,e){if(s.scale(e,e),s.translate(t.size/2,t.size/2),this.createPath_(s),this.fill_){let i=this.fill_.getColor();i===null&&(i=Kt),s.fillStyle=_e(i),s.fill()}this.stroke_&&(s.strokeStyle=t.strokeStyle,s.lineWidth=t.strokeWidth,t.lineDash&&(s.setLineDash(t.lineDash),s.lineDashOffset=t.lineDashOffset),s.lineJoin=t.lineJoin,s.miterLimit=t.miterLimit,s.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let s=this.fill_.getColor(),e=0;if(typeof s=="string"&&(s=is(s)),s===null?e=1:Array.isArray(s)&&(e=s.length===4?s[3]:1),e===0){let i=jt(t.size,t.size);this.hitDetectionCanvas_=i.canvas,this.drawHitDetectionCanvas_(t,i)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let s=this.points_,e=this.radius_;if(s===1/0)t.arc(0,0,e,0,2*Math.PI);else{let i=this.radius2_===void 0?e:this.radius2_;this.radius2_!==void 0&&(s*=2);let r=this.angle_-Math.PI/2,n=2*Math.PI/s;for(let l=0;l<s;l++){let a=r+l*n,h=l%2===0?e:i;t.lineTo(h*Math.cos(a),h*Math.sin(a))}t.closePath()}}drawHitDetectionCanvas_(t,s){s.translate(t.size/2,t.size/2),this.createPath_(s),s.fillStyle=Kt,s.fill(),this.stroke_&&(s.strokeStyle=t.strokeStyle,s.lineWidth=t.strokeWidth,t.lineDash&&(s.setLineDash(t.lineDash),s.lineDashOffset=t.lineDashOffset),s.lineJoin=t.lineJoin,s.miterLimit=t.miterLimit,s.stroke())}},vn=Ba;var Ga=class o extends vn{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){let t=this.getScale(),s=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return s.setOpacity(this.getOpacity()),s}setRadius(t){this.radius_=t,this.render()}},Cn=Ga;var _n=class o{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Md,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new o({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(s){return s.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Md,this.geometry_=t}setZIndex(t){this.zIndex_=t}};function Ed(o){let t;if(typeof o=="function")t=o;else{let s;Array.isArray(o)?s=o:(gt(typeof o.getZIndex=="function",41),s=[o]),t=function(){return s}}return t}var Xa=null;function Td(o,t){if(!Xa){let s=new hi({color:"rgba(255,255,255,0.4)"}),e=new ci({color:"#3399CC",width:1.25});Xa=[new _n({image:new Cn({fill:s,stroke:e,radius:5}),fill:s,stroke:e})]}return Xa}function Md(o){return o.getGeometry()}var Ze=_n;var jp="#333",Wa=class o{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=te(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new hi({color:jp}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){let t=this.getScale();return new o({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=te(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}},vr=Wa;var Ld=qt(Ua(),1);function wn(o,t,s){let e=o,i=!0,r=!1,n=!1,l=[Cs(e,ut.LOAD,function(){n=!0,r||t()})];return e.src&&Ih?(r=!0,e.decode().then(function(){i&&t()}).catch(function(a){i&&(n?t():s())})):l.push(Cs(e,ut.ERROR,s)),function(){i=!1,l.forEach(At)}}var Cr=null,Ha=class extends Li{constructor(t,s,e,i,r,n){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=n,this.unlisten_=null,this.imageState_=r,this.size_=e,this.src_=s,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ot.LOADED){Cr||(Cr=jt(1,1,void 0,{willReadFrequently:!0})),Cr.drawImage(this.image_,0,0);try{Cr.getImageData(0,0,1,1),this.tainted_=!1}catch{Cr=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ut.CHANGE)}handleImageError_(){this.imageState_=Ot.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ot.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let t=this.size_[0],s=this.size_[1],e=jt(t,s);e.fillRect(0,0,t,s),this.hitDetectionImage_=e.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ot.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ot.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=wn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Ot.LOADED)return;let s=this.image_,e=document.createElement("canvas");e.width=Math.ceil(s.width*t),e.height=Math.ceil(s.height*t);let i=e.getContext("2d");i.scale(t,t),i.drawImage(s,0,0),i.globalCompositeOperation="multiply",i.fillStyle=$r(this.color_),i.fillRect(0,0,e.width/t,e.height/t),i.globalCompositeOperation="destination-in",i.drawImage(s,0,0),this.canvas_[t]=e}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function Ad(o,t,s,e,i,r){let n=Ls.get(t,e,r);return n||(n=new Ha(o,t,s,e,i,r),Ls.set(t,e,r,n)),n}function Pd(o,t,s,e){return s!==void 0&&e!==void 0?[s/o,e/t]:s!==void 0?s/o:e!==void 0?e/t:1}var Za=class o extends bn{constructor(t){t=t||{};let s=t.opacity!==void 0?t.opacity:1,e=t.rotation!==void 0?t.rotation:0,i=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:s,rotation:e,scale:i,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;let n=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let l=t.src;gt(!(l!==void 0&&n),4),gt(!n||n&&this.imgSize_,5),(l===void 0||l.length===0)&&n&&(l=n.src||_t(n)),gt(l!==void 0&&l.length>0,6),gt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),69);let a=t.src!==void 0?Ot.IDLE:Ot.LOADED;if(this.color_=t.color!==void 0?is(t.color):null,this.iconImage_=Ad(n,l,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,a,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let h,c;if(t.size)[h,c]=t.size;else{let g=this.getImage(1);if(g instanceof HTMLCanvasElement||g.src&&g.complete)h=g.width,c=g.height;else{this.initialOptions_=t;let u=()=>{if(this.unlistenImageChange(u),!this.initialOptions_)return;let p=this.iconImage_.getSize();this.setScale(Pd(p[0],p[1],t.width,t.height))};this.listenImageChange(u);return}}h!==void 0&&this.setScale(Pd(h,c,t.width,t.height))}}clone(){let t,s,e;return this.initialOptions_?(s=this.initialOptions_.width,e=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new o({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:s,height:e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=i[0]),this.anchorYUnits_=="fraction"&&(t[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}let s=this.getDisplacement(),e=this.getScaleArray();return[t[0]-s[0]/e[0],t[1]+s[1]/e[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){let s=this.getSize(),e=this.iconImage_.getSize();if(!s||!e)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=e[0]-s[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=e[1]-s[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){let t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(ut.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ut.CHANGE,t)}},hs=Za;function Ka(o){return new Ze({fill:_r(o,""),stroke:wr(o,""),text:Bp(o),image:Gp(o)})}function _r(o,t){let s=o[t+"fill-color"];if(s)return s==="none"?null:new hi({color:s})}function wr(o,t){let s=o[t+"stroke-width"],e=o[t+"stroke-color"];if(!(!s&&!e))return new ci({width:s,color:e,lineCap:o[t+"stroke-line-cap"],lineJoin:o[t+"stroke-line-join"],lineDash:o[t+"stroke-line-dash"],lineDashOffset:o[t+"stroke-line-dash-offset"],miterLimit:o[t+"stroke-miter-limit"]})}function Bp(o){let t=o["text-value"];return t?new vr({text:t,font:o["text-font"],maxAngle:o["text-max-angle"],offsetX:o["text-offset-x"],offsetY:o["text-offset-y"],overflow:o["text-overflow"],placement:o["text-placement"],repeat:o["text-repeat"],scale:o["text-scale"],rotateWithView:o["text-rotate-with-view"],rotation:o["text-rotation"],textAlign:o["text-align"],justify:o["text-justify"],textBaseline:o["text-baseline"],padding:o["text-padding"],fill:_r(o,"text-"),backgroundFill:_r(o,"text-background-"),stroke:wr(o,"text-"),backgroundStroke:wr(o,"text-background-")}):void 0}function Gp(o){let t=o["icon-src"],s=o["icon-img"];if(t||s)return new hs({src:t,img:s,imgSize:o["icon-img-size"],anchor:o["icon-anchor"],anchorOrigin:o["icon-anchor-origin"],anchorXUnits:o["icon-anchor-x-units"],anchorYUnits:o["icon-anchor-y-units"],color:o["icon-color"],crossOrigin:o["icon-cross-origin"],offset:o["icon-offset"],displacement:o["icon-displacement"],opacity:o["icon-opacity"],scale:o["icon-scale"],width:o["icon-width"],height:o["icon-height"],rotation:o["icon-rotation"],rotateWithView:o["icon-rotate-with-view"],size:o["icon-size"],declutterMode:o["icon-declutter-mode"]});let e=o["shape-points"];if(e){let r="shape-";return new vn({points:e,fill:_r(o,r),stroke:wr(o,r),radius:o["shape-radius"],radius1:o["shape-radius1"],radius2:o["shape-radius2"],angle:o["shape-angle"],displacement:o["shape-displacement"],rotation:o["shape-rotation"],rotateWithView:o["shape-rotate-with-view"],scale:o["shape-scale"],declutterMode:o["shape-declutter-mode"]})}let i=o["circle-radius"];if(i){let r="circle-";return new Cn({radius:i,fill:_r(o,r),stroke:wr(o,r),displacement:o["circle-displacement"],scale:o["circle-scale"],rotation:o["circle-rotation"],rotateWithView:o["circle-rotate-with-view"],declutterMode:o["circle-declutter-mode"]})}}var Dd={RENDER_ORDER:"renderOrder"},qa=class extends ns{constructor(t){t=t||{};let s=Object.assign({},t);delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,super(s),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Dd.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Ld.default(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(Dd.RENDER_ORDER,t)}setStyle(t){let s;if(t===void 0)s=Td;else if(t===null)s=null;else if(typeof t=="function")s=t;else if(t instanceof Ze)s=t;else if(Array.isArray(t)){let e=t.length,i=new Array(e);for(let r=0;r<e;++r){let n=t[r];n instanceof Ze?i[r]=n:i[r]=Ka(n)}s=i}else s=Ka(t);this.style_=s,this.styleFunction_=t===null?void 0:Ed(this.style_),this.changed()}},Id=qa;var Sr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Mr=[Sr.FILL],di=[Sr.STROKE],Ai=[Sr.BEGIN_PATH],$a=[Sr.CLOSE_PATH],mt=Sr;var Ja=class{drawCustom(t,s,e,i){}drawGeometry(t){}setStyle(t){}drawCircle(t,s){}drawFeature(t,s){}drawGeometryCollection(t,s){}drawLineString(t,s){}drawMultiLineString(t,s){}drawMultiPoint(t,s){}drawMultiPolygon(t,s){}drawPoint(t,s){}drawPolygon(t,s){}drawText(t,s){}setFillStrokeStyle(t,s){}setImageStyle(t,s){}setTextStyle(t,s){}},Sn=Ja;var Qa=class extends Sn{constructor(t,s,e,i){super(),this.tolerance=t,this.maxExtent=s,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=e,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){let s=this.pixelRatio;return s==1?t:t.map(function(e){return e*s})}appendFlatPointCoordinates(t,s){let e=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates,n=r.length;for(let l=0,a=t.length;l<a;l+=s)i[0]=t[l],i[1]=t[l+1],ki(e,i)&&(r[n++]=i[0],r[n++]=i[1]);return n}appendFlatLineCoordinates(t,s,e,i,r,n){let l=this.coordinates,a=l.length,h=this.getBufferedMaxExtent();n&&(s+=i);let c=t[s],g=t[s+1],u=this.tmpCoordinate_,p=!0,b,v,x;for(b=s+i;b<e;b+=i)u[0]=t[b],u[1]=t[b+1],x=Vr(h,u),x!==v?(p&&(l[a++]=c,l[a++]=g,p=!1),l[a++]=u[0],l[a++]=u[1]):x===Ht.INTERSECTING?(l[a++]=u[0],l[a++]=u[1],p=!1):p=!0,c=u[0],g=u[1],v=x;return(r&&p||b===s+i)&&(l[a++]=c,l[a++]=g),a}drawCustomCoordinates_(t,s,e,i,r){for(let n=0,l=e.length;n<l;++n){let a=e[n],h=this.appendFlatLineCoordinates(t,s,a,i,!1,!1);r.push(h),s=a}return s}drawCustom(t,s,e,i){this.beginGeometry(t,s);let r=t.getType(),n=t.getStride(),l=this.coordinates.length,a,h,c,g,u;switch(r){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),g=[];let p=t.getEndss();u=0;for(let b=0,v=p.length;b<v;++b){let x=[];u=this.drawCustomCoordinates_(a,u,p[b],n,x),g.push(x)}this.instructions.push([mt.CUSTOM,l,g,t,e,hr]),this.hitDetectionInstructions.push([mt.CUSTOM,l,g,t,i||e,hr]);break;case"Polygon":case"MultiLineString":c=[],a=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(a,0,t.getEnds(),n,c),this.instructions.push([mt.CUSTOM,l,c,t,e,zs]),this.hitDetectionInstructions.push([mt.CUSTOM,l,c,t,i||e,zs]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(a,0,a.length,n,!1,!1),this.instructions.push([mt.CUSTOM,l,h,t,e,ei]),this.hitDetectionInstructions.push([mt.CUSTOM,l,h,t,i||e,ei]);break;case"MultiPoint":a=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(a,n),h>l&&(this.instructions.push([mt.CUSTOM,l,h,t,e,ei]),this.hitDetectionInstructions.push([mt.CUSTOM,l,h,t,i||e,ei]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),h=this.coordinates.length,this.instructions.push([mt.CUSTOM,l,h,t,e]),this.hitDetectionInstructions.push([mt.CUSTOM,l,h,t,i||e]);break;default:}this.endGeometry(s)}beginGeometry(t,s){this.beginGeometryInstruction1_=[mt.BEGIN_GEOMETRY,s,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[mt.BEGIN_GEOMETRY,s,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t=this.hitDetectionInstructions;t.reverse();let s,e=t.length,i,r,n=-1;for(s=0;s<e;++s)i=t[s],r=i[0],r==mt.END_GEOMETRY?n=s:r==mt.BEGIN_GEOMETRY&&(i[2]=s,Eh(this.hitDetectionInstructions,n,s),n=-1)}setFillStrokeStyle(t,s){let e=this.state;if(t){let i=t.getColor();e.fillStyle=_e(i||Kt)}else e.fillStyle=void 0;if(s){let i=s.getColor();e.strokeStyle=_e(i||Mi);let r=s.getLineCap();e.lineCap=r!==void 0?r:as;let n=s.getLineDash();e.lineDash=n?n.slice():ve;let l=s.getLineDashOffset();e.lineDashOffset=l||Ce;let a=s.getLineJoin();e.lineJoin=a!==void 0?a:ri;let h=s.getWidth();e.lineWidth=h!==void 0?h:Ti;let c=s.getMiterLimit();e.miterLimit=c!==void 0?c:Si,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0}createFill(t){let s=t.fillStyle,e=[mt.SET_FILL_STYLE,s];return typeof s!="string"&&e.push(!0),e}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[mt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,s){let e=t.fillStyle;(typeof e!="string"||t.currentFillStyle!=e)&&(e!==void 0&&this.instructions.push(s.call(this,t)),t.currentFillStyle=e)}updateStrokeStyle(t,s){let e=t.strokeStyle,i=t.lineCap,r=t.lineDash,n=t.lineDashOffset,l=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=i||r!=t.currentLineDash&&!he(t.currentLineDash,r)||t.currentLineDashOffset!=n||t.currentLineJoin!=l||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(e!==void 0&&s.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=n,t.currentLineJoin=l,t.currentLineWidth=a,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let s=[mt.END_GEOMETRY,t];this.instructions.push(s),this.hitDetectionInstructions.push(s)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Ur(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;Es(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},ui=Qa;var tl=class extends ui{constructor(t,s,e,i){super(t,s,e,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,s){if(!this.image_)return;this.beginGeometry(t,s);let e=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,n=this.appendFlatPointCoordinates(e,i);this.instructions.push([mt.DRAW_IMAGE,r,n,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([mt.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}drawMultiPoint(t,s){if(!this.image_)return;this.beginGeometry(t,s);let e=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,n=this.appendFlatPointCoordinates(e,i);this.instructions.push([mt.DRAW_IMAGE,r,n,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([mt.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,s){let e=t.getAnchor(),i=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=s}},Rd=tl;var el=class extends ui{constructor(t,s,e,i){super(t,s,e,i)}drawFlatCoordinates_(t,s,e,i){let r=this.coordinates.length,n=this.appendFlatLineCoordinates(t,s,e,i,!1,!1),l=[mt.MOVE_TO_LINE_TO,r,n];return this.instructions.push(l),this.hitDetectionInstructions.push(l),e}drawLineString(t,s){let e=this.state,i=e.strokeStyle,r=e.lineWidth;if(i===void 0||r===void 0)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,s),this.hitDetectionInstructions.push([mt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,ve,Ce],Ai);let n=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(n,0,n.length,l),this.hitDetectionInstructions.push(di),this.endGeometry(s)}drawMultiLineString(t,s){let e=this.state,i=e.strokeStyle,r=e.lineWidth;if(i===void 0||r===void 0)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,s),this.hitDetectionInstructions.push([mt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,ve,Ce],Ai);let n=t.getEnds(),l=t.getFlatCoordinates(),a=t.getStride(),h=0;for(let c=0,g=n.length;c<g;++c)h=this.drawFlatCoordinates_(l,h,n[c],a);this.hitDetectionInstructions.push(di),this.endGeometry(s)}finish(){let t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(di),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(di),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ai)}},kd=el;var il=class extends ui{constructor(t,s,e,i){super(t,s,e,i)}drawFlatCoordinatess_(t,s,e,i){let r=this.state,n=r.fillStyle!==void 0,l=r.strokeStyle!==void 0,a=e.length;this.instructions.push(Ai),this.hitDetectionInstructions.push(Ai);for(let h=0;h<a;++h){let c=e[h],g=this.coordinates.length,u=this.appendFlatLineCoordinates(t,s,c,i,!0,!l),p=[mt.MOVE_TO_LINE_TO,g,u];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push($a),this.hitDetectionInstructions.push($a)),s=c}return n&&(this.instructions.push(Mr),this.hitDetectionInstructions.push(Mr)),l&&(this.instructions.push(di),this.hitDetectionInstructions.push(di)),s}drawCircle(t,s){let e=this.state,i=e.fillStyle,r=e.strokeStyle;if(i===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([mt.SET_FILL_STYLE,Kt]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([mt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,ve,Ce]);let n=t.getFlatCoordinates(),l=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(n,0,n.length,l,!1,!1);let h=[mt.CIRCLE,a];this.instructions.push(Ai,h),this.hitDetectionInstructions.push(Ai,h),e.fillStyle!==void 0&&(this.instructions.push(Mr),this.hitDetectionInstructions.push(Mr)),e.strokeStyle!==void 0&&(this.instructions.push(di),this.hitDetectionInstructions.push(di)),this.endGeometry(s)}drawPolygon(t,s){let e=this.state,i=e.fillStyle,r=e.strokeStyle;if(i===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([mt.SET_FILL_STYLE,Kt]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([mt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,ve,Ce]);let n=t.getEnds(),l=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(l,0,n,a),this.endGeometry(s)}drawMultiPolygon(t,s){let e=this.state,i=e.fillStyle,r=e.strokeStyle;if(i===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,s),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([mt.SET_FILL_STYLE,Kt]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([mt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,ve,Ce]);let n=t.getEndss(),l=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0;for(let c=0,g=n.length;c<g;++c)h=this.drawFlatCoordinatess_(l,h,n[c],a);this.endGeometry(s)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(t!==0){let s=this.coordinates;for(let e=0,i=s.length;e<i;++e)s[e]=Bi(s[e],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}},sl=il;function Od(o,t,s,e,i){let r=[],n=s,l=0,a=t.slice(s,2);for(;l<o&&n+i<e;){let[h,c]=a.slice(-2),g=t[n+i],u=t[n+i+1],p=Math.sqrt((g-h)*(g-h)+(u-c)*(u-c));if(l+=p,l>=o){let b=(o-l+p)/p,v=be(h,g,b),x=be(c,u,b);a.push(v,x),r.push(a),a=[v,x],l==o&&(n+=i),l=0}else if(l<o)a.push(t[n+i],t[n+i+1]),n+=i;else{let b=p-l,v=be(h,g,b/p),x=be(c,u,b/p);a.push(v,x),r.push(a),a=[v,x],l=0,n+=i}}return l>0&&r.push(a),r}function Fd(o,t,s,e,i){let r=s,n=s,l=0,a=0,h=s,c,g,u,p,b,v,x,m,E,L;for(g=s;g<e;g+=i){let S=t[g],w=t[g+1];b!==void 0&&(E=S-b,L=w-v,p=Math.sqrt(E*E+L*L),x!==void 0&&(a+=u,c=Math.acos((x*E+m*L)/(u*p)),c>o&&(a>l&&(l=a,r=h,n=g),a=0,h=g-i)),u=p,x=E,m=L),b=S,v=w}return a+=p,a>l?[h,g]:[r,n]}var Er={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},rl=class extends ui{constructor(t,s,e,i){super(t,s,e,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Kt]={fillStyle:Kt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,s){let e=this.textFillState_,i=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!e&&!i)return;let n=this.coordinates,l=n.length,a=t.getType(),h=null,c=t.getStride();if(r.placement==="line"&&(a=="LineString"||a=="MultiLineString"||a=="Polygon"||a=="MultiPolygon")){if(!Wt(this.getBufferedMaxExtent(),t.getExtent()))return;let g;if(h=t.getFlatCoordinates(),a=="LineString")g=[h.length];else if(a=="MultiLineString")g=t.getEnds();else if(a=="Polygon")g=t.getEnds().slice(0,1);else if(a=="MultiPolygon"){let v=t.getEndss();g=[];for(let x=0,m=v.length;x<m;++x)g.push(v[x][0])}this.beginGeometry(t,s);let u=r.repeat,p=u?void 0:r.textAlign,b=0;for(let v=0,x=g.length;v<x;++v){let m;u?m=Od(u*this.resolution,h,b,g[v],c):m=[h.slice(b,g[v])];for(let E=0,L=m.length;E<L;++E){let S=m[E],w=0,R=S.length;if(p==null){let I=Fd(r.maxAngle,S,0,S.length,2);w=I[0],R=I[1]}for(let I=w;I<R;I+=c)n.push(S[I],S[I+1]);let O=n.length;b=g[v],this.drawChars_(l,O),l=O}}this.endGeometry(s)}else{let g=r.overflow?null:[];switch(a){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),r.overflow||g.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":let m=t.getFlatInteriorPoints();h=[];for(let E=0,L=m.length;E<L;E+=3)r.overflow||g.push(m[E+2]/this.resolution),h.push(m[E],m[E+1]);if(h.length===0)return;c=2;break;default:}let u=this.appendFlatPointCoordinates(h,c);if(u===l)return;if(g&&(u-l)/2!==h.length/c){let m=l/2;g=g.filter((E,L)=>{let S=n[(m+L)*2]===h[L*c]&&n[(m+L)*2+1]===h[L*c+1];return S||--m,S})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,s);let p=r.padding;if(p!=Ei&&(r.scale[0]<0||r.scale[1]<0)){let m=r.padding[0],E=r.padding[1],L=r.padding[2],S=r.padding[3];r.scale[0]<0&&(E=-E,S=-S),r.scale[1]<0&&(m=-m,L=-L),p=[m,E,L,S]}let b=this.pixelRatio;this.instructions.push([mt.DRAW_IMAGE,l,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,p==Ei?Ei:p.map(function(m){return m*b}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);let v=1/b,x=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=Kt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([mt.DRAW_IMAGE,l,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,void 0,this.declutterImageWithText_,p,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Kt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),r.backgroundFill&&(this.state.fillStyle=x,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(s)}}saveTextStates_(){let t=this.textStrokeState_,s=this.textState_,e=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));let r=this.textKey_;r in this.textStates||(this.textStates[r]={font:s.font,textAlign:s.textAlign||Yi,justify:s.justify,textBaseline:s.textBaseline||ls,scale:s.scale});let n=this.fillKey_;e&&(n in this.fillStates||(this.fillStates[n]={fillStyle:e.fillStyle}))}drawChars_(t,s){let e=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,n=this.textKey_,l=this.fillKey_;this.saveTextStates_();let a=this.pixelRatio,h=Er[i.textBaseline],c=this.textOffsetY_*a,g=this.text_,u=e?e.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([mt.DRAW_CHARS,t,s,h,i.overflow,l,i.maxAngle,a,c,r,u*a,g,n,1]),this.hitDetectionInstructions.push([mt.DRAW_CHARS,t,s,h,i.overflow,l&&Kt,i.maxAngle,1,c,r,u,g,n,1/a])}setTextStyle(t,s){let e,i,r;if(!t)this.text_="";else{let n=t.getFill();n?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=_e(n.getColor()||Kt)):(i=null,this.textFillState_=i);let l=t.getStroke();if(!l)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);let b=l.getLineDash(),v=l.getLineDashOffset(),x=l.getWidth(),m=l.getMiterLimit();r.lineCap=l.getLineCap()||as,r.lineDash=b?b.slice():ve,r.lineDashOffset=v===void 0?Ce:v,r.lineJoin=l.getLineJoin()||ri,r.lineWidth=x===void 0?Ti:x,r.miterLimit=m===void 0?Si:m,r.strokeStyle=_e(l.getColor()||Mi)}e=this.textState_;let a=t.getFont()||un;Wc(a);let h=t.getScaleArray();e.overflow=t.getOverflow(),e.font=a,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.repeat=t.getRepeat(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||ls,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||Ei,e.scale=h===void 0?[1,1]:h;let c=t.getOffsetX(),g=t.getOffsetY(),u=t.getRotateWithView(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=g===void 0?0:g,this.textRotateWithView_=u===void 0?!1:u,this.textRotation_=p===void 0?0:p,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:_t(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.repeat||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=i?typeof i.fillStyle=="string"?i.fillStyle:"|"+_t(i.fillStyle):""}this.declutterImageWithText_=s}},zd=rl;var Xp={Circle:sl,Default:ui,Image:Rd,LineString:kd,Polygon:sl,Text:zd},nl=class{constructor(t,s,e,i){this.tolerance_=t,this.maxExtent_=s,this.pixelRatio_=i,this.resolution_=e,this.buildersByZIndex_={}}finish(){let t={};for(let s in this.buildersByZIndex_){t[s]=t[s]||{};let e=this.buildersByZIndex_[s];for(let i in e){let r=e[i].finish();t[s][i]=r}}return t}getBuilder(t,s){let e=t!==void 0?t.toString():"0",i=this.buildersByZIndex_[e];i===void 0&&(i={},this.buildersByZIndex_[e]=i);let r=i[s];if(r===void 0){let n=Xp[s];r=new n(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[s]=r}return r}},ol=nl;var al=class extends jr{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Et()}getData(t){return null}prepareFrame(t){return Et()}renderFrame(t,s){return Et()}loadedTileCallback(t,s,e){t[s]||(t[s]={}),t[s][e.tileCoord.toString()]=e}createLoadedTileFinder(t,s,e){return(i,r)=>{let n=this.loadedTileCallback.bind(this,e,i);return t.forEachLoadedTile(s,i,r,n)}}forEachFeatureAtCoordinate(t,s,e,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){let s=t.target;(s.getState()===Ot.LOADED||s.getState()===Ot.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let s=t.getState();return s!=Ot.LOADED&&s!=Ot.ERROR&&t.addEventListener(ut.CHANGE,this.boundHandleImageChange_),s==Ot.IDLE&&(t.load(),s=t.getState()),s==Ot.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},Nd=al;var hl=[],Ws=null;function Wp(){Ws=jt(1,1,void 0,{willReadFrequently:!0})}var ll=class extends Nd{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=ce(),this.pixelTransform=ce(),this.inversePixelTransform=ce(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,s,e){Ws||Wp(),Ws.clearRect(0,0,1,1);let i;try{Ws.drawImage(t,s,e,1,1,0,0,1,1),i=Ws.getImageData(0,0,1,1).data}catch{return Ws=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return typeof e=="function"&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,s,e){let i=this.getLayer().getClassName(),r,n;if(t&&t.className===i&&(!e||t&&t.style.backgroundColor&&he(is(t.style.backgroundColor),is(e)))){let l=t.firstElementChild;l instanceof HTMLCanvasElement&&(n=l.getContext("2d"))}if(n&&n.canvas.style.transform===s?(this.container=t,this.context=n,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=i;let l=r.style;l.position="absolute",l.width="100%",l.height="100%",n=jt();let a=n.canvas;r.appendChild(a),l=a.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=r,this.context=n}!this.containerReused&&e&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=e)}clipUnrotated(t,s,e){let i=ke(e),r=Ps(e),n=As(e),l=Ts(e);Xt(s.coordinateToPixelTransform,i),Xt(s.coordinateToPixelTransform,r),Xt(s.coordinateToPixelTransform,n),Xt(s.coordinateToPixelTransform,l);let a=this.inversePixelTransform;Xt(a,i),Xt(a,r),Xt(a,n),Xt(a,l),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()}dispatchRenderEvent_(t,s,e){let i=this.getLayer();if(i.hasListener(t)){let r=new cn(t,this.inversePixelTransform,e,s);i.dispatchEvent(r)}}preRender(t,s){this.frameState=s,this.dispatchRenderEvent_(ge.PRERENDER,t,s)}postRender(t,s){this.dispatchRenderEvent_(ge.POSTRENDER,t,s)}getRenderTransform(t,s,e,i,r,n,l){let a=r/2,h=n/2,c=i/s,g=-c,u=-t[0]+l,p=-t[1];return fe(this.tempTransform,a,h,c,g,-e,u,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}},Mn=ll;function jd(o,t,s,e,i,r,n,l,a,h,c,g){let u=o[t],p=o[t+1],b=0,v=0,x=0,m=0;function E(){b=u,v=p,t+=e,u=o[t],p=o[t+1],m+=x,x=Math.sqrt((u-b)*(u-b)+(p-v)*(p-v))}do E();while(t<s-e&&m+x<r);let L=x===0?0:(r-m)/x,S=be(b,u,L),w=be(v,p,L),R=t-e,O=m,I=r+l*a(h,i,c);for(;t<s-e&&m+x<I;)E();L=x===0?0:(I-m)/x;let _=be(b,u,L),P=be(v,p,L),F;if(g){let f=[S,w,_,P];on(f,0,4,2,g,f,f),F=f[0]>f[2]}else F=S>_;let A=Math.PI,D=[],C=R+e===t;t=R,x=0,m=O,u=o[t],p=o[t+1];let d;if(C){E(),d=Math.atan2(p-v,u-b),F&&(d+=d>0?-A:A);let f=(_+S)/2,y=(P+w)/2;return D[0]=[f,y,(I-r)/2,d,i],D}i=i.replace(/\n/g," ");for(let f=0,y=i.length;f<y;){E();let M=Math.atan2(p-v,u-b);if(F&&(M+=M>0?-A:A),d!==void 0){let X=M-d;if(X+=X>A?-2*A:X<-A?2*A:0,Math.abs(X)>n)return null}d=M;let k=f,T=0;for(;f<y;++f){let X=F?y-f-1:f,j=l*a(h,i[X],c);if(t+e<s&&m+x<r+T+j/2)break;T+=j}if(f===k)continue;let z=F?i.substring(y-k,y-f):i.substring(k,f);L=x===0?0:(r+T/2-m)/x;let N=be(b,u,L),G=be(v,p,L);D.push([N,G,T/2,M,z]),r+=T}return D}var Ys=Vt(),Hi=[],Pi=[],Di=[],Zi=[];function Bd(o){return o[3].declutterBox}var Gd=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function cl(o,t){return t==="start"?t=Gd.test(o)?"right":"left":t==="end"&&(t=Gd.test(o)?"left":"right"),Er[t]}function Yp(o,t,s){return s>0&&o.push(`
`,""),o.push(t,""),o}var dl=class{constructor(t,s,e,i){this.overlaps=e,this.pixelRatio=s,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=ce(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}createLabel(t,s,e,i){let r=t+s+e+i;if(this.labels_[r])return this.labels_[r];let n=i?this.strokeStates[i]:null,l=e?this.fillStates[e]:null,a=this.textStates[s],h=this.pixelRatio,c=[a.scale[0]*h,a.scale[1]*h],g=Array.isArray(t),u=a.justify?Er[a.justify]:cl(Array.isArray(t)?t[0]:t,a.textAlign||Yi),p=i&&n.lineWidth?n.lineWidth:0,b=g?t:t.split(`
`).reduce(Yp,[]),{width:v,height:x,widths:m,heights:E,lineWidths:L}=Vc(a,b),S=v+p,w=[],R=(S+2)*c[0],O=(x+p)*c[1],I={width:R<0?Math.floor(R):Math.ceil(R),height:O<0?Math.floor(O):Math.ceil(O),contextInstructions:w};(c[0]!=1||c[1]!=1)&&w.push("scale",c),i&&(w.push("strokeStyle",n.strokeStyle),w.push("lineWidth",p),w.push("lineCap",n.lineCap),w.push("lineJoin",n.lineJoin),w.push("miterLimit",n.miterLimit),w.push("setLineDash",[n.lineDash]),w.push("lineDashOffset",n.lineDashOffset)),e&&w.push("fillStyle",l.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");let _=.5-u,P=u*S+_*p,F=[],A=[],D=0,C=0,d=0,f=0,y;for(let M=0,k=b.length;M<k;M+=2){let T=b[M];if(T===`
`){C+=D,D=0,P=u*S+_*p,++f;continue}let z=b[M+1]||a.font;z!==y&&(i&&F.push("font",z),e&&A.push("font",z),y=z),D=Math.max(D,E[d]);let N=[T,P+_*m[d]+u*(m[d]-L[f]),.5*(p+D)+C];P+=m[d],i&&F.push("strokeText",N),e&&A.push("fillText",N),++d}return Array.prototype.push.apply(w,F),Array.prototype.push.apply(w,A),this.labels_[r]=I,I}replayTextBackground_(t,s,e,i,r,n,l){t.beginPath(),t.moveTo.apply(t,s),t.lineTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),n&&(this.alignFill_=n[2],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())}calculateImageOrLabelDimensions_(t,s,e,i,r,n,l,a,h,c,g,u,p,b,v,x){l*=u[0],a*=u[1];let m=e-l,E=i-a,L=r+h>t?t-h:r,S=n+c>s?s-c:n,w=b[3]+L*u[0]+b[1],R=b[0]+S*u[1]+b[2],O=m-b[3],I=E-b[0];(v||g!==0)&&(Hi[0]=O,Zi[0]=O,Hi[1]=I,Pi[1]=I,Pi[0]=O+w,Di[0]=Pi[0],Di[1]=I+R,Zi[1]=Di[1]);let _;return g!==0?(_=fe(ce(),e,i,1,1,g,-e,-i),Xt(_,Hi),Xt(_,Pi),Xt(_,Di),Xt(_,Zi),Pe(Math.min(Hi[0],Pi[0],Di[0],Zi[0]),Math.min(Hi[1],Pi[1],Di[1],Zi[1]),Math.max(Hi[0],Pi[0],Di[0],Zi[0]),Math.max(Hi[1],Pi[1],Di[1],Zi[1]),Ys)):Pe(Math.min(O,O+w),Math.min(I,I+R),Math.max(O,O+w),Math.max(I,I+R),Ys),p&&(m=Math.round(m),E=Math.round(E)),{drawImageX:m,drawImageY:E,drawImageW:L,drawImageH:S,originX:h,originY:c,declutterBox:{minX:Ys[0],minY:Ys[1],maxX:Ys[2],maxY:Ys[3],value:x},canvasTransform:_,scale:u}}replayImageOrLabel_(t,s,e,i,r,n,l){let a=!!(n||l),h=i.declutterBox,c=t.canvas,g=l?l[2]*i.scale[0]/2:0;return h.minX-g<=c.width/s&&h.maxX+g>=0&&h.minY-g<=c.height/s&&h.maxY+g>=0&&(a&&this.replayTextBackground_(t,Hi,Pi,Di,Zi,n,l),Uc(t,i.canvasTransform,r,e,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){if(this.alignFill_){let s=Xt(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.save(),t.translate(s[0]%e,s[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,s){t.strokeStyle=s[1],t.lineWidth=s[2],t.lineCap=s[3],t.lineJoin=s[4],t.miterLimit=s[5],t.lineDashOffset=s[7],t.setLineDash(s[6])}drawLabelWithPointPlacement_(t,s,e,i){let r=this.textStates[s],n=this.createLabel(t,s,i,e),l=this.strokeStates[e],a=this.pixelRatio,h=cl(Array.isArray(t)?t[0]:t,r.textAlign||Yi),c=Er[r.textBaseline||ls],g=l&&l.lineWidth?l.lineWidth:0,u=n.width/a-2*r.scale[0],p=h*u+2*(.5-h)*g,b=c*n.height/a+2*(.5-c)*g;return{label:n,anchorX:p,anchorY:b}}execute_(t,s,e,i,r,n,l,a){let h;this.pixelCoordinates_&&he(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=ze(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),kh(this.renderedTransform_,e));let c=0,g=i.length,u=0,p,b,v,x,m,E,L,S,w,R,O,I,_=0,P=0,F=null,A=null,D=this.coordinateCache_,C=this.viewRotation_,d=Math.round(Math.atan2(-e[1],e[0])*1e12)/1e12,f={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:C},y=this.instructions!=i||this.overlaps?0:200,M,k,T,z;for(;c<g;){let N=i[c];switch(N[0]){case mt.BEGIN_GEOMETRY:M=N[1],z=N[3],M.getGeometry()?l!==void 0&&!Wt(l,z.getExtent())?c=N[2]+1:++c:c=N[2];break;case mt.BEGIN_PATH:_>y&&(this.fill_(t),_=0),P>y&&(t.stroke(),P=0),!_&&!P&&(t.beginPath(),x=NaN,m=NaN),++c;break;case mt.CIRCLE:u=N[1];let X=h[u],j=h[u+1],B=h[u+2],W=h[u+3],Y=B-X,U=W-j,q=Math.sqrt(Y*Y+U*U);t.moveTo(X+q,j),t.arc(X,j,q,0,2*Math.PI,!0),++c;break;case mt.CLOSE_PATH:t.closePath(),++c;break;case mt.CUSTOM:u=N[1],p=N[2];let H=N[3],V=N[4],Z=N.length==6?N[5]:void 0;f.geometry=H,f.feature=M,c in D||(D[c]=[]);let K=D[c];Z?Z(h,u,p,2,K):(K[0]=h[u],K[1]=h[u+1],K.length=2),V(K,f),++c;break;case mt.DRAW_IMAGE:u=N[1],p=N[2],S=N[3],b=N[4],v=N[5];let J=N[6],tt=N[7],$=N[8],Q=N[9],et=N[10],it=N[11],st=N[12],rt=N[13],nt=N[14],ot=N[15];if(!S&&N.length>=20){w=N[19],R=N[20],O=N[21],I=N[22];let Se=this.drawLabelWithPointPlacement_(w,R,O,I);S=Se.label,N[3]=S;let ps=N[23];b=(Se.anchorX-ps)*this.pixelRatio,N[4]=b;let Ie=N[24];v=(Se.anchorY-Ie)*this.pixelRatio,N[5]=v,J=S.height,N[6]=J,rt=S.width,N[13]=rt}let at;N.length>25&&(at=N[25]);let ct,ht,lt;N.length>17?(ct=N[16],ht=N[17],lt=N[18]):(ct=Ei,ht=!1,lt=!1),et&&d?it+=C:!et&&!d&&(it-=C);let xt=0;for(;u<p;u+=2){if(at&&at[xt++]<rt/this.pixelRatio)continue;let Se=this.calculateImageOrLabelDimensions_(S.width,S.height,h[u],h[u+1],rt,J,b,v,$,Q,it,st,r,ct,ht||lt,M),ps=[t,s,S,Se,tt,ht?F:null,lt?A:null];if(a){if(nt==="none")continue;if(nt==="obstacle"){a.insert(Se.declutterBox);continue}else{let Ie,fi;if(ot){let Me=p-u;if(!ot[Me]){ot[Me]=ps;continue}if(Ie=ot[Me],delete ot[Me],fi=Bd(Ie),a.collides(fi))continue}if(a.collides(Se.declutterBox))continue;Ie&&(a.insert(fi),this.replayImageOrLabel_.apply(this,Ie)),a.insert(Se.declutterBox)}}this.replayImageOrLabel_.apply(this,ps)}++c;break;case mt.DRAW_CHARS:let wt=N[1],dt=N[2],Ct=N[3],ft=N[4];I=N[5];let Tt=N[6],zt=N[7],pe=N[8];O=N[9];let ee=N[10];w=N[11],R=N[12];let we=[N[13],N[13]],$n=this.textStates[R],Zs=$n.font,Ks=[$n.scale[0]*zt,$n.scale[1]*zt],qs;Zs in this.widths_?qs=this.widths_[Zs]:(qs={},this.widths_[Zs]=qs);let Ql=Sd(h,wt,dt,2),th=Math.abs(Ks[0])*na(Zs,w,qs);if(ft||th<=Ql){let Se=this.textStates[R].textAlign,ps=(Ql-th)*cl(w,Se),Ie=jd(h,wt,dt,2,w,ps,Tt,Math.abs(Ks[0]),na,Zs,qs,d?0:this.viewRotation_);t:if(Ie){let fi=[],Me,Or,Fr,me,Re;if(O)for(Me=0,Or=Ie.length;Me<Or;++Me){Re=Ie[Me],Fr=Re[4],me=this.createLabel(Fr,R,"",O),b=Re[2]+(Ks[0]<0?-ee:ee),v=Ct*me.height+(.5-Ct)*2*ee*Ks[1]/Ks[0]-pe;let gi=this.calculateImageOrLabelDimensions_(me.width,me.height,Re[0],Re[1],me.width,me.height,b,v,0,0,Re[3],we,!1,Ei,!1,M);if(a&&a.collides(gi.declutterBox))break t;fi.push([t,s,me,gi,1,null,null])}if(I)for(Me=0,Or=Ie.length;Me<Or;++Me){Re=Ie[Me],Fr=Re[4],me=this.createLabel(Fr,R,I,""),b=Re[2],v=Ct*me.height-pe;let gi=this.calculateImageOrLabelDimensions_(me.width,me.height,Re[0],Re[1],me.width,me.height,b,v,0,0,Re[3],we,!1,Ei,!1,M);if(a&&a.collides(gi.declutterBox))break t;fi.push([t,s,me,gi,1,null,null])}a&&a.load(fi.map(Bd));for(let gi=0,tp=fi.length;gi<tp;++gi)this.replayImageOrLabel_.apply(this,fi[gi])}}++c;break;case mt.END_GEOMETRY:if(n!==void 0){M=N[1];let Se=n(M,z);if(Se)return Se}++c;break;case mt.FILL:y?_++:this.fill_(t),++c;break;case mt.MOVE_TO_LINE_TO:for(u=N[1],p=N[2],k=h[u],T=h[u+1],E=k+.5|0,L=T+.5|0,(E!==x||L!==m)&&(t.moveTo(k,T),x=E,m=L),u+=2;u<p;u+=2)k=h[u],T=h[u+1],E=k+.5|0,L=T+.5|0,(u==p-2||E!==x||L!==m)&&(t.lineTo(k,T),x=E,m=L);++c;break;case mt.SET_FILL_STYLE:F=N,this.alignFill_=N[2],_&&(this.fill_(t),_=0,P&&(t.stroke(),P=0)),t.fillStyle=N[1],++c;break;case mt.SET_STROKE_STYLE:A=N,P&&(t.stroke(),P=0),this.setStrokeStyle_(t,N),++c;break;case mt.STROKE:y?P++:t.stroke(),++c;break;default:++c;break}}_&&this.fill_(t),P&&t.stroke()}execute(t,s,e,i,r,n){this.viewRotation_=i,this.execute_(t,s,e,this.instructions,r,void 0,void 0,n)}executeHitDetection(t,s,e,i,r){return this.viewRotation_=e,this.execute_(t,1,s,this.hitDetectionInstructions,!0,i,r)}},Xd=dl;var ul=["Polygon","Circle","LineString","Image","Text","Default"],fl=class{constructor(t,s,e,i,r,n){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=e,this.resolution_=s,this.renderBuffer_=n,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ce(),this.createExecutors_(r)}clip(t,s){let e=this.getClipCoords(s);t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.lineTo(e[6],e[7]),t.clip()}createExecutors_(t){for(let s in t){let e=this.executorsByZIndex_[s];e===void 0&&(e={},this.executorsByZIndex_[s]=e);let i=t[s];for(let r in i){let n=i[r];e[r]=new Xd(this.resolution_,this.pixelRatio_,this.overlaps_,n)}}}hasExecutors(t){for(let s in this.executorsByZIndex_){let e=this.executorsByZIndex_[s];for(let i=0,r=t.length;i<r;++i)if(t[i]in e)return!0}return!1}forEachFeatureAtCoordinate(t,s,e,i,r,n){i=Math.round(i);let l=i*2+1,a=fe(this.hitDetectionTransform_,i+.5,i+.5,1/s,-1/s,-e,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=jt(l,l,void 0,{willReadFrequently:!0}));let c=this.hitDetectionContext_;c.canvas.width!==l||c.canvas.height!==l?(c.canvas.width=l,c.canvas.height=l):h||c.clearRect(0,0,l,l);let g;this.renderBuffer_!==void 0&&(g=Vt(),es(g,t),Es(g,s*(this.renderBuffer_+i),g));let u=Vp(i),p;function b(w,R){let O=c.getImageData(0,0,l,l).data;for(let I=0,_=u.length;I<_;I++)if(O[u[I]]>0){if(!n||p!=="Image"&&p!=="Text"||n.includes(w)){let P=(u[I]-3)/4,F=i-P%l,A=i-(P/l|0),D=r(w,R,F*F+A*A);if(D)return D}c.clearRect(0,0,l,l);break}}let v=Object.keys(this.executorsByZIndex_).map(Number);v.sort($e);let x,m,E,L,S;for(x=v.length-1;x>=0;--x){let w=v[x].toString();for(E=this.executorsByZIndex_[w],m=ul.length-1;m>=0;--m)if(p=ul[m],L=E[p],L!==void 0&&(S=L.executeHitDetection(c,a,e,b,g),S))return S}}getClipCoords(t){let s=this.maxExtent_;if(!s)return null;let e=s[0],i=s[1],r=s[2],n=s[3],l=[e,i,e,n,r,n,r,i];return ze(l,0,8,2,t,l),l}isEmpty(){return bi(this.executorsByZIndex_)}execute(t,s,e,i,r,n,l){let a=Object.keys(this.executorsByZIndex_).map(Number);a.sort($e),this.maxExtent_&&(t.save(),this.clip(t,e)),n=n||ul;let h,c,g,u,p,b;for(l&&a.reverse(),h=0,c=a.length;h<c;++h){let v=a[h].toString();for(p=this.executorsByZIndex_[v],g=0,u=n.length;g<u;++g){let x=n[g];b=p[x],b!==void 0&&b.execute(t,s,e,i,r,l)}}this.maxExtent_&&t.restore()}},pl={};function Vp(o){if(pl[o]!==void 0)return pl[o];let t=o*2+1,s=o*o,e=new Array(s+1);for(let r=0;r<=o;++r)for(let n=0;n<=o;++n){let l=r*r+n*n;if(l>s)break;let a=e[l];a||(a=[],e[l]=a),a.push(((o+r)*t+(o+n))*4+3),r>0&&a.push(((o-r)*t+(o+n))*4+3),n>0&&(a.push(((o+r)*t+(o-n))*4+3),r>0&&a.push(((o-r)*t+(o-n))*4+3))}let i=[];for(let r=0,n=e.length;r<n;++r)e[r]&&i.push(...e[r]);return pl[o]=i,i}var gl=fl;var ml=class extends Sn{constructor(t,s,e,i,r,n,l){super(),this.context_=t,this.pixelRatio_=s,this.extent_=e,this.transform_=i,this.transformRotation_=i?qr(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=n,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ce()}drawImages_(t,s,e,i){if(!this.image_)return;let r=ze(t,s,e,i,this.transform_,this.pixelCoordinates_),n=this.context_,l=this.tmpLocalTransform_,a=n.globalAlpha;this.imageOpacity_!=1&&(n.globalAlpha=a*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,g=r.length;c<g;c+=2){let u=r[c]-this.imageAnchorX_,p=r[c+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let b=u+this.imageAnchorX_,v=p+this.imageAnchorY_;fe(l,b,v,1,1,h,-b,-v),n.setTransform.apply(n,l),n.translate(b,v),n.scale(this.imageScale_[0],this.imageScale_[1]),n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),n.setTransform(1,0,0,1,0,0)}else n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(n.globalAlpha=a)}drawText_(t,s,e,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let r=ze(t,s,e,i,this.transform_,this.pixelCoordinates_),n=this.context_,l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);s<e;s+=i){let a=r[s]+this.textOffsetX_,h=r[s+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(n.translate(a-this.textOffsetX_,h-this.textOffsetY_),n.rotate(l),n.translate(this.textOffsetX_,this.textOffsetY_),n.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&n.strokeText(this.text_,0,0),this.textFillState_&&n.fillText(this.text_,0,0),n.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&n.strokeText(this.text_,a,h),this.textFillState_&&n.fillText(this.text_,a,h))}}moveToLineTo_(t,s,e,i,r){let n=this.context_,l=ze(t,s,e,i,this.transform_,this.pixelCoordinates_);n.moveTo(l[0],l[1]);let a=l.length;r&&(a-=2);for(let h=2;h<a;h+=2)n.lineTo(l[h],l[h+1]);return r&&n.closePath(),e}drawRings_(t,s,e,i){for(let r=0,n=e.length;r<n;++r)s=this.moveToLineTo_(t,s,e[r],i,!0);return s}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let s=vc(t,this.transform_,this.pixelCoordinates_),e=s[2]-s[0],i=s[3]-s[1],r=Math.sqrt(e*e+i*i),n=this.context_;n.beginPath(),n.arc(s[0],s[1],r,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,s){let e=s.getGeometryFunction()(t);e&&(this.setStyle(s),this.drawGeometry(e))}drawGeometryCollection(t){let s=t.getGeometriesArray();for(let e=0,i=s.length;e<i;++e)this.drawGeometry(s[e])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let s=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(s,0,s.length,e),this.text_!==""&&this.drawText_(s,0,s.length,e)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let s=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(s,0,s.length,e),this.text_!==""&&this.drawText_(s,0,s.length,e)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let s=this.context_,e=t.getFlatCoordinates();s.beginPath(),this.moveToLineTo_(e,0,e.length,t.getStride(),!1),s.stroke()}if(this.text_!==""){let s=t.getFlatMidpoint();this.drawText_(s,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let s=t.getExtent();if(Wt(this.extent_,s)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates(),r=0,n=t.getEnds(),l=t.getStride();e.beginPath();for(let a=0,h=n.length;a<h;++a)r=this.moveToLineTo_(i,r,n[a],l,!1);e.stroke()}if(this.text_!==""){let e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let s=this.context_;s.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(this.text_!==""){let s=t.getFlatInteriorPoint();this.drawText_(s,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let s=this.context_,e=t.getOrientedFlatCoordinates(),i=0,r=t.getEndss(),n=t.getStride();s.beginPath();for(let l=0,a=r.length;l<a;++l){let h=r[l];i=this.drawRings_(e,i,h,n)}this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(this.text_!==""){let s=t.getFlatInteriorPoints();this.drawText_(s,0,s.length,2)}}}setContextFillState_(t){let s=this.context_,e=this.contextFillState_;e?e.fillStyle!=t.fillStyle&&(e.fillStyle=t.fillStyle,s.fillStyle=t.fillStyle):(s.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let s=this.context_,e=this.contextStrokeState_;e?(e.lineCap!=t.lineCap&&(e.lineCap=t.lineCap,s.lineCap=t.lineCap),he(e.lineDash,t.lineDash)||s.setLineDash(e.lineDash=t.lineDash),e.lineDashOffset!=t.lineDashOffset&&(e.lineDashOffset=t.lineDashOffset,s.lineDashOffset=t.lineDashOffset),e.lineJoin!=t.lineJoin&&(e.lineJoin=t.lineJoin,s.lineJoin=t.lineJoin),e.lineWidth!=t.lineWidth&&(e.lineWidth=t.lineWidth,s.lineWidth=t.lineWidth),e.miterLimit!=t.miterLimit&&(e.miterLimit=t.miterLimit,s.miterLimit=t.miterLimit),e.strokeStyle!=t.strokeStyle&&(e.strokeStyle=t.strokeStyle,s.strokeStyle=t.strokeStyle)):(s.lineCap=t.lineCap,s.setLineDash(t.lineDash),s.lineDashOffset=t.lineDashOffset,s.lineJoin=t.lineJoin,s.lineWidth=t.lineWidth,s.miterLimit=t.miterLimit,s.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let s=this.context_,e=this.contextTextState_,i=t.textAlign?t.textAlign:Yi;e?(e.font!=t.font&&(e.font=t.font,s.font=t.font),e.textAlign!=i&&(e.textAlign=i,s.textAlign=i),e.textBaseline!=t.textBaseline&&(e.textBaseline=t.textBaseline,s.textBaseline=t.textBaseline)):(s.font=t.font,s.textAlign=i,s.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,s){if(!t)this.fillState_=null;else{let e=t.getColor();this.fillState_={fillStyle:_e(e||Kt)}}if(!s)this.strokeState_=null;else{let e=s.getColor(),i=s.getLineCap(),r=s.getLineDash(),n=s.getLineDashOffset(),l=s.getLineJoin(),a=s.getWidth(),h=s.getMiterLimit(),c=r||ve;this.strokeState_={lineCap:i!==void 0?i:as,lineDash:this.pixelRatio_===1?c:c.map(g=>g*this.pixelRatio_),lineDashOffset:(n||Ce)*this.pixelRatio_,lineJoin:l!==void 0?l:ri,lineWidth:(a!==void 0?a:Ti)*this.pixelRatio_,miterLimit:h!==void 0?h:Si,strokeStyle:_e(e||Mi)}}}setImageStyle(t){let s;if(!t||!(s=t.getSize())){this.image_=null;return}let e=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*e,this.imageAnchorY_=i[1]*e,this.imageHeight_=s[1]*e,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let n=t.getScaleArray();this.imageScale_=[n[0]*this.pixelRatio_/e,n[1]*this.pixelRatio_/e],this.imageWidth_=s[0]*e}setTextStyle(t){if(!t)this.text_="";else{let s=t.getFill();if(!s)this.textFillState_=null;else{let p=s.getColor();this.textFillState_={fillStyle:_e(p||Kt)}}let e=t.getStroke();if(!e)this.textStrokeState_=null;else{let p=e.getColor(),b=e.getLineCap(),v=e.getLineDash(),x=e.getLineDashOffset(),m=e.getLineJoin(),E=e.getWidth(),L=e.getMiterLimit();this.textStrokeState_={lineCap:b!==void 0?b:as,lineDash:v||ve,lineDashOffset:x||Ce,lineJoin:m!==void 0?m:ri,lineWidth:E!==void 0?E:Ti,miterLimit:L!==void 0?L:Si,strokeStyle:_e(p||Mi)}}let i=t.getFont(),r=t.getOffsetX(),n=t.getOffsetY(),l=t.getRotateWithView(),a=t.getRotation(),h=t.getScaleArray(),c=t.getText(),g=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:i!==void 0?i:un,textAlign:g!==void 0?g:Yi,textBaseline:u!==void 0?u:ls},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,b,v)=>p+=v%2?" ":b,""):c:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=n!==void 0?this.pixelRatio_*n:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=a!==void 0?a:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}},Wd=ml;var Ke=.5;function Yd(o,t,s,e,i,r,n){let l=o[0]*Ke,a=o[1]*Ke,h=jt(l,a);h.imageSmoothingEnabled=!1;let c=h.canvas,g=new Wd(h,Ke,i,null,n),u=s.length,p=Math.floor((256*256*256-1)/u),b={};for(let x=1;x<=u;++x){let m=s[x-1],E=m.getStyleFunction()||e;if(!E)continue;let L=E(m,r);if(!L)continue;Array.isArray(L)||(L=[L]);let w=(x*p).toString(16).padStart(7,"#00000");for(let R=0,O=L.length;R<O;++R){let I=L[R],_=I.getGeometryFunction()(m);if(!_||!Wt(i,_.getExtent()))continue;let P=I.clone(),F=P.getFill();F&&F.setColor(w);let A=P.getStroke();A&&(A.setColor(w),A.setLineDash(null)),P.setText(void 0);let D=I.getImage();if(D){let y=D.getImageSize();if(!y)continue;let M=jt(y[0],y[1],void 0,{alpha:!1}),k=M.canvas;M.fillStyle=w,M.fillRect(0,0,k.width,k.height),P.setImage(new hs({img:k,imgSize:y,anchor:D.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}let C=P.getZIndex()||0,d=b[C];d||(d={},b[C]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[]);let f=_.getType();if(f==="GeometryCollection"){let y=_.getGeometriesArrayRecursive();for(let M=0,k=y.length;M<k;++M){let T=y[M];d[T.getType().replace("Multi","")].push(T,P)}}else d[f.replace("Multi","")].push(_,P)}}let v=Object.keys(b).map(Number).sort($e);for(let x=0,m=v.length;x<m;++x){let E=b[v[x]];for(let L in E){let S=E[L];for(let w=0,R=S.length;w<R;w+=2){g.setStyle(S[w+1]);for(let O=0,I=t.length;O<I;++O)g.setTransform(t[O]),g.drawGeometry(S[w])}}}return h.getImageData(0,0,c.width,c.height)}function Vd(o,t,s){let e=[];if(s){let i=Math.floor(Math.round(o[0])*Ke),r=Math.floor(Math.round(o[1])*Ke),n=(Rt(i,0,s.width-1)+Rt(r,0,s.height-1)*s.width)*4,l=s.data[n],a=s.data[n+1],c=s.data[n+2]+256*(a+256*l),g=Math.floor((256*256*256-1)/t.length);c&&c%g===0&&e.push(t[c/g-1])}return e}var Up=.5,Ud={Point:Qp,LineString:qp,Polygon:ef,MultiPoint:tf,MultiLineString:$p,MultiPolygon:Jp,GeometryCollection:Kp,Circle:Hp};function Hd(o,t){return parseInt(_t(o),10)-parseInt(_t(t),10)}function Zd(o,t){let s=En(o,t);return s*s}function En(o,t){return Up*o/t}function Hp(o,t,s,e,i){let r=s.getFill(),n=s.getStroke();if(r||n){let a=o.getBuilder(s.getZIndex(),"Circle");a.setFillStrokeStyle(r,n),a.drawCircle(t,e)}let l=s.getText();if(l&&l.getText()){let a=(i||o).getBuilder(s.getZIndex(),"Text");a.setTextStyle(l),a.drawText(t,e)}}function xl(o,t,s,e,i,r,n){let l=!1,a=s.getImage();if(a){let h=a.getImageState();h==Ot.LOADED||h==Ot.ERROR?a.unlistenImageChange(i):(h==Ot.IDLE&&a.load(),a.listenImageChange(i),l=!0)}return Zp(o,t,s,e,r,n),l}function Zp(o,t,s,e,i,r){let n=s.getGeometryFunction()(t);if(!n)return;let l=n.simplifyTransformed(e,i);if(s.getRenderer())Kd(o,l,s,t);else{let h=Ud[l.getType()];h(o,l,s,t,r)}}function Kd(o,t,s,e){if(t.getType()=="GeometryCollection"){let r=t.getGeometries();for(let n=0,l=r.length;n<l;++n)Kd(o,r[n],s,e);return}o.getBuilder(s.getZIndex(),"Default").drawCustom(t,e,s.getRenderer(),s.getHitDetectionRenderer())}function Kp(o,t,s,e,i){let r=t.getGeometriesArray(),n,l;for(n=0,l=r.length;n<l;++n){let a=Ud[r[n].getType()];a(o,r[n],s,e,i)}}function qp(o,t,s,e,i){let r=s.getStroke();if(r){let l=o.getBuilder(s.getZIndex(),"LineString");l.setFillStrokeStyle(null,r),l.drawLineString(t,e)}let n=s.getText();if(n&&n.getText()){let l=(i||o).getBuilder(s.getZIndex(),"Text");l.setTextStyle(n),l.drawText(t,e)}}function $p(o,t,s,e,i){let r=s.getStroke();if(r){let l=o.getBuilder(s.getZIndex(),"LineString");l.setFillStrokeStyle(null,r),l.drawMultiLineString(t,e)}let n=s.getText();if(n&&n.getText()){let l=(i||o).getBuilder(s.getZIndex(),"Text");l.setTextStyle(n),l.drawText(t,e)}}function Jp(o,t,s,e,i){let r=s.getFill(),n=s.getStroke();if(n||r){let a=o.getBuilder(s.getZIndex(),"Polygon");a.setFillStrokeStyle(r,n),a.drawMultiPolygon(t,e)}let l=s.getText();if(l&&l.getText()){let a=(i||o).getBuilder(s.getZIndex(),"Text");a.setTextStyle(l),a.drawText(t,e)}}function Qp(o,t,s,e,i){let r=s.getImage(),n=s.getText(),l;if(r){if(r.getImageState()!=Ot.LOADED)return;let a=o;if(i){let c=r.getDeclutterMode();if(c!=="none")if(a=i,c==="obstacle"){let g=o.getBuilder(s.getZIndex(),"Image");g.setImageStyle(r,l),g.drawPoint(t,e)}else n&&n.getText()&&(l={})}let h=a.getBuilder(s.getZIndex(),"Image");h.setImageStyle(r,l),h.drawPoint(t,e)}if(n&&n.getText()){let a=o;i&&(a=i);let h=a.getBuilder(s.getZIndex(),"Text");h.setTextStyle(n,l),h.drawText(t,e)}}function tf(o,t,s,e,i){let r=s.getImage(),n=s.getText(),l;if(r){if(r.getImageState()!=Ot.LOADED)return;let a=o;if(i){let c=r.getDeclutterMode();if(c!=="none")if(a=i,c==="obstacle"){let g=o.getBuilder(s.getZIndex(),"Image");g.setImageStyle(r,l),g.drawMultiPoint(t,e)}else n&&n.getText()&&(l={})}let h=a.getBuilder(s.getZIndex(),"Image");h.setImageStyle(r,l),h.drawMultiPoint(t,e)}if(n&&n.getText()){let a=o;i&&(a=i);let h=a.getBuilder(s.getZIndex(),"Text");h.setTextStyle(n,l),h.drawText(t,e)}}function ef(o,t,s,e,i){let r=s.getFill(),n=s.getStroke();if(r||n){let a=o.getBuilder(s.getZIndex(),"Polygon");a.setFillStrokeStyle(r,n),a.drawPolygon(t,e)}let l=s.getText();if(l&&l.getText()){let a=(i||o).getBuilder(s.getZIndex(),"Text");a.setTextStyle(l),a.drawText(t,e)}}var yl=class extends Mn{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Vt(),this.wrappedRenderedExtent_=Vt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,s,e){let i=s.extent,r=s.viewState,n=r.center,l=r.resolution,a=r.projection,h=r.rotation,c=a.getExtent(),g=this.getLayer().getSource(),u=s.pixelRatio,p=s.viewHints,b=!(p[Zt.ANIMATING]||p[Zt.INTERACTING]),v=this.compositionContext_,x=Math.round(s.size[0]*u),m=Math.round(s.size[1]*u),E=g.getWrapX()&&a.canWrapX(),L=E?Pt(c):null,S=E?Math.ceil((i[2]-c[2])/L)+1:1,w=E?Math.floor((i[0]-c[0])/L):0;do{let R=this.getRenderTransform(n,l,h,u,x,m,w*L);t.execute(v,1,R,h,b,void 0,e)}while(++w<S)}setupCompositionContext_(){if(this.opacity_!==1){let t=jt(this.context.canvas.width,this.context.canvas.height,hl);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){let t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,os(this.compositionContext_),hl.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,s){let e=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];Oh(this.pixelTransform,1/e,1/e),Ms(this.inversePixelTransform,this.pixelTransform);let r=Yr(this.pixelTransform);this.useContainer(s,r,this.getBackground(t));let n=this.context,l=n.canvas,a=this.replayGroup_,h=this.declutterExecutorGroup,c=a&&!a.isEmpty()||h&&!h.isEmpty();if(!c&&!(this.getLayer().hasListener(ge.PRERENDER)||this.getLayer().hasListener(ge.POSTRENDER)))return null;let g=Math.round(t.size[0]*e),u=Math.round(t.size[1]*e);l.width!=g||l.height!=u?(l.width=g,l.height=u,l.style.transform!==r&&(l.style.transform=r)):this.containerReused||n.clearRect(0,0,g,u),this.preRender(n,t);let p=t.viewState,b=p.projection;this.opacity_=i.opacity,this.setupCompositionContext_();let v=!1;if(c&&i.extent&&this.clipping){let x=Ue(i.extent,b);c=Wt(x,t.extent),v=c&&!vi(x,t.extent),v&&this.clipUnrotated(this.compositionContext_,t,x)}return c&&this.renderWorlds(a,t),v&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(n,t),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(s=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let e=[this.context.canvas.width,this.context.canvas.height];Xt(this.pixelTransform,e);let i=this.renderedCenter_,r=this.renderedResolution_,n=this.renderedRotation_,l=this.renderedProjection_,a=this.wrappedRenderedExtent_,h=this.getLayer(),c=[],g=e[0]*Ke,u=e[1]*Ke;c.push(this.getRenderTransform(i,r,n,Ke,g,u,0).slice());let p=h.getSource(),b=l.getExtent();if(p.getWrapX()&&l.canWrapX()&&!vi(b,a)){let v=a[0],x=Pt(b),m=0,E;for(;v<b[0];)--m,E=x*m,c.push(this.getRenderTransform(i,r,n,Ke,g,u,E).slice()),v+=x;for(m=0,v=a[2];v>b[2];)++m,E=x*m,c.push(this.getRenderTransform(i,r,n,Ke,g,u,E).slice()),v-=x}this.hitDetectionImageData_=Yd(e,c,this.renderedFeatures_,h.getStyleFunction(),a,r,n)}s(Vd(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,s,e,i,r){if(!this.replayGroup_)return;let n=s.viewState.resolution,l=s.viewState.rotation,a=this.getLayer(),h={},c=function(p,b,v){let x=_t(p),m=h[x];if(m){if(m!==!0&&v<m.distanceSq){if(v===0)return h[x]=!0,r.splice(r.lastIndexOf(m),1),i(p,a,b);m.geometry=b,m.distanceSq=v}}else{if(v===0)return h[x]=!0,i(p,a,b);r.push(h[x]={feature:p,layer:a,geometry:b,distanceSq:v,callback:i})}},g,u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some(p=>g=p.forEachFeatureAtCoordinate(t,n,l,e,c,p===this.declutterExecutorGroup&&s.declutterTree?s.declutterTree.all().map(b=>b.value):null)),g}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){let s=this.getLayer(),e=s.getSource();if(!e)return!1;let i=t.viewHints[Zt.ANIMATING],r=t.viewHints[Zt.INTERACTING],n=s.getUpdateWhileAnimating(),l=s.getUpdateWhileInteracting();if(this.ready&&!n&&i||!l&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let a=t.extent,h=t.viewState,c=h.projection,g=h.resolution,u=t.pixelRatio,p=s.getRevision(),b=s.getRenderBuffer(),v=s.getRenderOrder();v===void 0&&(v=Hd);let x=h.center.slice(),m=Es(a,b*g),E=m.slice(),L=[m.slice()],S=c.getExtent();if(e.getWrapX()&&c.canWrapX()&&!vi(S,t.extent)){let f=Pt(S),y=Math.max(Pt(m)/2,f);m[0]=S[0]-y,m[2]=S[2]+y,en(x,c);let M=co(L[0],c);M[0]<S[0]&&M[2]<S[2]?L.push([M[0]+f,M[1],M[2]+f,M[3]]):M[0]>S[0]&&M[2]>S[2]&&L.push([M[0]-f,M[1],M[2]-f,M[3]])}if(this.ready&&this.renderedResolution_==g&&this.renderedRevision_==p&&this.renderedRenderOrder_==v&&vi(this.wrappedRenderedExtent_,m))return he(this.renderedExtent_,E)||(this.hitDetectionImageData_=null,this.renderedExtent_=E),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let w=new ol(En(g,u),m,g,u),R;this.getLayer().getDeclutter()&&(R=new ol(En(g,u),m,g,u));let O=nn(),I;if(O){for(let f=0,y=L.length;f<y;++f){let M=L[f],k=Os(M,c);e.loadFeatures(k,ac(g,c),O)}I=or(O,c)}else for(let f=0,y=L.length;f<y;++f)e.loadFeatures(L[f],g,c);let _=Zd(g,u),P=!0,F=f=>{let y,M=f.getStyleFunction()||s.getStyleFunction();if(M&&(y=M(f,g)),y){let k=this.renderFeature(f,_,y,w,I,R);P=P&&!k}},A=Os(m,c),D=e.getFeaturesInExtent(A);v&&D.sort(v);for(let f=0,y=D.length;f<y;++f)F(D[f]);this.renderedFeatures_=D,this.ready=P;let C=w.finish(),d=new gl(m,g,u,e.getOverlaps(),C,s.getRenderBuffer());return R&&(this.declutterExecutorGroup=new gl(m,g,u,e.getOverlaps(),R.finish(),s.getRenderBuffer())),this.renderedResolution_=g,this.renderedRevision_=p,this.renderedRenderOrder_=v,this.renderedExtent_=E,this.wrappedRenderedExtent_=m,this.renderedCenter_=x,this.renderedProjection_=c,this.replayGroup_=d,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,s,e,i,r,n){if(!e)return!1;let l=!1;if(Array.isArray(e))for(let a=0,h=e.length;a<h;++a)l=xl(i,t,e[a],s,this.boundHandleStyleImageChange_,r,n)||l;else l=xl(i,t,e,s,this.boundHandleStyleImageChange_,r,n);return l}},qd=yl;var bl=class extends Id{constructor(t){super(t)}createRenderer(){return new qd(this)}},Tr=bl;var $d=qt(Ua(),1);var vl=class{constructor(t){this.rbush_=new $d.default(t),this.items_={}}insert(t,s){let e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:s};this.rbush_.insert(e),this.items_[_t(s)]=e}load(t,s){let e=new Array(s.length);for(let i=0,r=s.length;i<r;i++){let n=t[i],l=s[i],a={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:l};e[i]=a,this.items_[_t(l)]=a}this.rbush_.load(e)}remove(t){let s=_t(t),e=this.items_[s];return delete this.items_[s],this.rbush_.remove(e)!==null}update(t,s){let e=this.items_[_t(s)],i=[e.minX,e.minY,e.maxX,e.maxY];Ci(i,t)||(this.remove(s),this.insert(t,s))}getAll(){return this.rbush_.all().map(function(s){return s.value})}getInExtent(t){let s={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(s).map(function(i){return i.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,s){return this.forEach_(this.getInExtent(t),s)}forEach_(t,s){let e;for(let i=0,r=t.length;i<r;i++)if(e=s(t[i]),e)return e;return e}isEmpty(){return bi(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let s=this.rbush_.toJSON();return Pe(s.minX,s.minY,s.maxX,s.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(let s in t.items_)this.items_[s]=t.items_[s]}},Cl=vl;var _l=class extends Ut{constructor(t){super(),this.projection=ue(t.projection),this.attributions_=Jd(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;let s=this;this.viewPromise_=new Promise(function(e,i){s.viewResolver=e,s.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Jd(t),this.changed()}setState(t){this.state_=t,this.changed()}};function Jd(o){return o?Array.isArray(o)?function(t){return o}:typeof o=="function"?o:function(t){return[o]}:null}var Tn=_l;var Ne={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Qd(o,t){return[[-1/0,-1/0,1/0,1/0]]}var sf=!1;function rf(o,t,s,e,i,r,n){let l=new XMLHttpRequest;l.open("GET",typeof o=="function"?o(s,e,i):o,!0),t.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=sf,l.onload=function(a){if(!l.status||l.status>=200&&l.status<300){let h=t.getType(),c;h=="json"||h=="text"?c=l.responseText:h=="xml"?(c=l.responseXML,c||(c=new DOMParser().parseFromString(l.responseText,"application/xml"))):h=="arraybuffer"&&(c=l.response),c?r(t.readFeatures(c,{extent:s,featureProjection:i}),t.readProjection(c)):n()}else n()},l.onerror=n,l.send()}function wl(o,t){return function(s,e,i,r,n){let l=this;rf(o,t,s,e,i,function(a,h){l.addFeatures(a),r!==void 0&&r(a)},n||Ge)}}var pi=class extends Jt{constructor(t,s,e){super(t),this.feature=s,this.features=e}},Sl=class extends Tn{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ge,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(gt(this.format_,7),this.loader_=wl(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Qd;let s=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=s?new Cl:null,this.loadedExtentsRtree_=new Cl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let e,i;Array.isArray(t.features)?i=t.features:t.features&&(e=t.features,i=e.getArray()),!s&&e===void 0&&(e=new se(i)),i!==void 0&&this.addFeaturesInternal(i),e!==void 0&&this.bindFeaturesCollection_(e)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let s=_t(t);if(!this.addToIndex_(s,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(s,t);let e=t.getGeometry();if(e){let i=e.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[s]=t;this.dispatchEvent(new pi(Ne.ADDFEATURE,t))}setupChangeEvents_(t,s){this.featureChangeKeys_[t]=[Mt(s,ut.CHANGE,this.handleFeatureChange_,this),Mt(s,Be.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,s){let e=!0,i=s.getId();return i!==void 0&&(i.toString()in this.idIndex_?e=!1:this.idIndex_[i.toString()]=s),e&&(gt(!(t in this.uidIndex_),30),this.uidIndex_[t]=s),e}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let s=[],e=[],i=[];for(let r=0,n=t.length;r<n;r++){let l=t[r],a=_t(l);this.addToIndex_(a,l)&&e.push(l)}for(let r=0,n=e.length;r<n;r++){let l=e[r],a=_t(l);this.setupChangeEvents_(a,l);let h=l.getGeometry();if(h){let c=h.getExtent();s.push(c),i.push(l)}else this.nullGeometryFeatures_[a]=l}if(this.featuresRtree_&&this.featuresRtree_.load(s,i),this.hasListener(Ne.ADDFEATURE))for(let r=0,n=e.length;r<n;r++)this.dispatchEvent(new pi(Ne.ADDFEATURE,e[r]))}bindFeaturesCollection_(t){let s=!1;this.addEventListener(Ne.ADDFEATURE,function(e){s||(s=!0,t.push(e.feature),s=!1)}),this.addEventListener(Ne.REMOVEFEATURE,function(e){s||(s=!0,t.remove(e.feature),s=!1)}),t.addEventListener(Qt.ADD,e=>{s||(s=!0,this.addFeature(e.element),s=!1)}),t.addEventListener(Qt.REMOVE,e=>{s||(s=!0,this.removeFeature(e.element),s=!1)}),this.featuresCollection_=t}clear(t){if(t){for(let e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(At);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let e=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(e);for(let i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let s=new pi(Ne.CLEAR);this.dispatchEvent(s),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,s){let e=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsCoordinate(t))return s(i)})}forEachFeatureInExtent(t,s){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,s);this.featuresCollection_&&this.featuresCollection_.forEach(s)}forEachFeatureIntersectingExtent(t,s){return this.forEachFeatureInExtent(t,function(e){if(e.getGeometry().intersectsExtent(t)){let r=s(e);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),bi(this.nullGeometryFeatures_)||mi(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let s=[];return this.forEachFeatureAtCoordinateDirect(t,function(e){s.push(e)}),s}getFeaturesInExtent(t,s){if(this.featuresRtree_){if(!(s&&s.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);let i=Xh(t,s);return[].concat(...i.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,s){let e=t[0],i=t[1],r=null,n=[NaN,NaN],l=1/0,a=[-1/0,-1/0,1/0,1/0];return s=s||xi,this.featuresRtree_.forEachInExtent(a,function(h){if(s(h)){let c=h.getGeometry(),g=l;if(l=c.closestPointXY(e,i,n,l),l<g){r=h;let u=Math.sqrt(l);a[0]=e-u,a[1]=i-u,a[2]=e+u,a[3]=i+u}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let s=this.idIndex_[t.toString()];return s!==void 0?s:null}getFeatureByUid(t){let s=this.uidIndex_[t];return s!==void 0?s:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let s=t.target,e=_t(s),i=s.getGeometry();if(!i)e in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(s),this.nullGeometryFeatures_[e]=s);else{let n=i.getExtent();e in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[e],this.featuresRtree_&&this.featuresRtree_.insert(n,s)):this.featuresRtree_&&this.featuresRtree_.update(n,s)}let r=s.getId();if(r!==void 0){let n=r.toString();this.idIndex_[n]!==s&&(this.removeFromIdIndex_(s),this.idIndex_[n]=s)}else this.removeFromIdIndex_(s),this.uidIndex_[e]=s;this.changed(),this.dispatchEvent(new pi(Ne.CHANGEFEATURE,s))}hasFeature(t){let s=t.getId();return s!==void 0?s in this.idIndex_:_t(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&bi(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,s,e){let i=this.loadedExtentsRtree_,r=this.strategy_(t,s,e);for(let n=0,l=r.length;n<l;++n){let a=r[n];i.forEachInExtent(a,function(c){return vi(c.extent,a)})||(++this.loadingExtentsCount_,this.dispatchEvent(new pi(Ne.FEATURESLOADSTART)),this.loader_.call(this,a,s,e,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new pi(Ne.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new pi(Ne.FEATURESLOADERROR))}),i.insert(a,{extent:a.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let s=this.loadedExtentsRtree_,e;s.forEachInExtent(t,function(i){if(Ci(i.extent,t))return e=i,!0}),e&&s.remove(e)}removeFeature(t){if(!t)return;let s=_t(t);s in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[s]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let s=_t(t),e=this.featureChangeKeys_[s];if(!e)return;e.forEach(At),delete this.featureChangeKeys_[s];let i=t.getId();return i!==void 0&&delete this.idIndex_[i.toString()],delete this.uidIndex_[s],this.dispatchEvent(new pi(Ne.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let s=!1;for(let e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e],s=!0;break}return s}setLoader(t){this.loader_=t}setUrl(t){gt(this.format_,7),this.url_=t,this.setLoader(wl(t,this.format_))}},Ar=Sl;var Ml=class o extends ti{constructor(t,s){super(),s&&!Array.isArray(t[0])?this.setFlatCoordinates(s,t):this.setCoordinates(t,s)}appendPoint(t){this.flatCoordinates?mi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){let t=new o(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,s,e,i){if(i<Ri(this.getExtent(),t,s))return i;let r=this.flatCoordinates,n=this.stride;for(let l=0,a=r.length;l<a;l+=n){let h=Xe(t,s,r[l],r[l+1]);if(h<i){i=h;for(let c=0;c<n;++c)e[c]=r[l+c];e.length=n}}return i}getCoordinates(){return ei(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){let s=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||s<=t?null:new ii(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){let t=this.flatCoordinates,s=this.layout,e=this.stride,i=[];for(let r=0,n=t.length;r<n;r+=e){let l=new ii(t.slice(r,r+e),s);i.push(l)}return i}getType(){return"MultiPoint"}intersectsExtent(t){let s=this.flatCoordinates,e=this.stride;for(let i=0,r=s.length;i<r;i+=e){let n=s[i],l=s[i+1];if(Qs(t,n,l))return!0}return!1}setCoordinates(t,s){this.setLayout(s,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lr(this.flatCoordinates,0,t,this.stride),this.changed()}},tu=Ml;function eu(o,t,s,e){let i=[],r=Vt();for(let n=0,l=s.length;n<l;++n){let a=s[n];r=Hr(o,t,a[0],e),i.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=a[a.length-1]}return i}var El=class o extends ti{constructor(t,s,e){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!e&&!Array.isArray(t[0])){let i=this.getLayout(),r=t,n=[],l=[];for(let a=0,h=r.length;a<h;++a){let c=r[a];a===0&&(i=c.getLayout());let g=n.length,u=c.getEnds();for(let p=0,b=u.length;p<b;++p)u[p]+=g;mi(n,c.getFlatCoordinates()),l.push(u)}s=i,t=n,e=l}s!==void 0&&e?(this.setFlatCoordinates(s,t),this.endss_=e):this.setCoordinates(t,s)}appendPolygon(t){let s;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),s=t.getEnds().slice(),this.endss_.push();else{let e=this.flatCoordinates.length;mi(this.flatCoordinates,t.getFlatCoordinates()),s=t.getEnds().slice();for(let i=0,r=s.length;i<r;++i)s[i]+=e}this.endss_.push(s),this.changed()}clone(){let t=this.endss_.length,s=new Array(t);for(let i=0;i<t;++i)s[i]=this.endss_[i].slice();let e=new o(this.flatCoordinates.slice(),this.layout,s);return e.applyProperties(this),e}closestPointXY(t,s,e,i){return i<Ri(this.getExtent(),t,s)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_c(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),wc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,s,e,i))}containsXY(t,s){return Dc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,s)}getArea(){return Ac(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let s;return t!==void 0?(s=this.getOrientedFlatCoordinates().slice(),Uo(s,0,this.endss_,this.stride,t)):s=this.flatCoordinates,hr(s,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let t=eu(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Lc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new tu(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;zc(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Uo(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let s=[],e=[];return s.length=Tc(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),s,0,e),new o(s,"XY",e)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let s;if(t===0)s=0;else{let r=this.endss_[t-1];s=r[r.length-1]}let e=this.endss_[t].slice(),i=e[e.length-1];if(s!==0)for(let r=0,n=e.length;r<n;++r)e[r]-=s;return new Xi(this.flatCoordinates.slice(s,i),this.layout,e)}getPolygons(){let t=this.layout,s=this.flatCoordinates,e=this.endss_,i=[],r=0;for(let n=0,l=e.length;n<l;++n){let a=e[n].slice(),h=a[a.length-1];if(r!==0)for(let g=0,u=a.length;g<u;++g)a[g]-=r;let c=new Xi(s.slice(r,h),t,a);i.push(c),r=h}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return kc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,s){this.setLayout(s,t,3),this.flatCoordinates||(this.flatCoordinates=[]);let e=Mc(this.flatCoordinates,0,t,this.stride,this.endss_);if(e.length===0)this.flatCoordinates.length=0;else{let i=e[e.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}},Tl=El;var Al=class extends Li{constructor(t,s,e){super(),e=e||{},this.tileCoord=t,this.state=s,this.interimTile=null,this.key="",this.transition_=e.transition===void 0?250:e.transition,this.transitionStarts_={},this.interpolate=!!e.interpolate}changed(){this.dispatchEvent(ut.CHANGE)}release(){this.state===pt.ERROR&&this.setState(pt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==pt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,s=this;do{if(t.getState()==pt.LOADED){t.interimTile=null;break}else t.getState()==pt.LOADING?s=t:t.getState()==pt.IDLE?s.interimTile=t.interimTile:s=t;t=s.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==pt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Et()}getAlpha(t,s){if(!this.transition_)return 1;let e=this.transitionStarts_[t];if(!e)e=s,this.transitionStarts_[t]=e;else if(e===-1)return 1;let i=s-e+1e3/60;return i>=this.transition_?1:Ao(i/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}},An=Al;var Pl=class extends An{constructor(t,s,e,i,r,n){super(t,s,n),this.crossOrigin_=i,this.src_=e,this.key=e,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=pt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=pt.ERROR,this.unlistenImage_(),this.image_=nf(),this.changed()}handleImageLoad_(){let t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=pt.LOADED:this.state=pt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==pt.ERROR&&(this.state=pt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==pt.IDLE&&(this.state=pt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=wn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function nf(){let o=jt(1,1);return o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,1,1),o.canvas}var Pn=Pl;var of=10,iu=.25,Dl=class{constructor(t,s,e,i,r,n){this.sourceProj_=t,this.targetProj_=s;let l={},a=rs(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){let L=E[0]+"/"+E[1];return l[L]||(l[L]=a(E)),l[L]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Pt(i)>=Pt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Pt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Pt(this.targetProj_.getExtent()):null;let h=ke(e),c=Ps(e),g=As(e),u=Ts(e),p=this.transformInv_(h),b=this.transformInv_(c),v=this.transformInv_(g),x=this.transformInv_(u),m=of+(n?Math.max(0,Math.ceil(Math.log2(tr(e)/(n*n*256*256)))):0);if(this.addQuad_(h,c,g,u,p,b,v,x,m),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(L,S,w){E=Math.min(E,L.source[0][0],L.source[1][0],L.source[2][0])}),this.triangles_.forEach(L=>{if(Math.max(L.source[0][0],L.source[1][0],L.source[2][0])-E>this.sourceWorldWidth_/2){let S=[[L.source[0][0],L.source[0][1]],[L.source[1][0],L.source[1][1]],[L.source[2][0],L.source[2][1]]];S[0][0]-E>this.sourceWorldWidth_/2&&(S[0][0]-=this.sourceWorldWidth_),S[1][0]-E>this.sourceWorldWidth_/2&&(S[1][0]-=this.sourceWorldWidth_),S[2][0]-E>this.sourceWorldWidth_/2&&(S[2][0]-=this.sourceWorldWidth_);let w=Math.min(S[0][0],S[1][0],S[2][0]);Math.max(S[0][0],S[1][0],S[2][0])-w<this.sourceWorldWidth_/2&&(L.source=S)}})}l={}}addTriangle_(t,s,e,i,r,n){this.triangles_.push({source:[i,r,n],target:[t,s,e]})}addQuad_(t,s,e,i,r,n,l,a,h){let c=lo([r,n,l,a]),g=this.sourceWorldWidth_?Pt(c)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&g>.5&&g<1,b=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let x=lo([t,s,e,i]);b=Pt(x)/this.targetWorldWidth_>iu||b}!p&&this.sourceProj_.isGlobal()&&g&&(b=g>iu||b)}if(!b&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Wt(c,this.maxSourceExtent_))return;let v=0;if(!b&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(n[0])||!isFinite(n[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1]))){if(h>0)b=!0;else if(v=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(n[0])||!isFinite(n[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(a[0])||!isFinite(a[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(h>0){if(!b){let x=[(t[0]+e[0])/2,(t[1]+e[1])/2],m=this.transformInv_(x),E;p?E=(_i(r[0],u)+_i(l[0],u))/2-_i(m[0],u):E=(r[0]+l[0])/2-m[0];let L=(r[1]+l[1])/2-m[1];b=E*E+L*L>this.errorThresholdSquared_}if(b){if(Math.abs(t[0]-e[0])<=Math.abs(t[1]-e[1])){let x=[(s[0]+e[0])/2,(s[1]+e[1])/2],m=this.transformInv_(x),E=[(i[0]+t[0])/2,(i[1]+t[1])/2],L=this.transformInv_(E);this.addQuad_(t,s,x,E,r,n,m,L,h-1),this.addQuad_(E,x,e,i,L,m,l,a,h-1)}else{let x=[(t[0]+s[0])/2,(t[1]+s[1])/2],m=this.transformInv_(x),E=[(e[0]+i[0])/2,(e[1]+i[1])/2],L=this.transformInv_(E);this.addQuad_(t,x,E,i,r,m,L,a,h-1),this.addQuad_(x,s,e,E,m,n,l,L,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}v&11||this.addTriangle_(t,e,i,r,l,a),v&14||this.addTriangle_(t,e,s,r,l,n),v&&(v&13||this.addTriangle_(s,i,t,n,a,r),v&7||this.addTriangle_(s,i,e,n,a,l))}calculateSourceExtent(){let t=Vt();return this.triangles_.forEach(function(s,e,i){let r=s.source;es(t,r[0]),es(t,r[1]),es(t,r[2])}),t}getTriangles(){return this.triangles_}},su=Dl;var Ll,cs=[];function ru(o,t,s,e,i){o.beginPath(),o.moveTo(0,0),o.lineTo(t,s),o.lineTo(e,i),o.closePath(),o.save(),o.clip(),o.fillRect(0,0,Math.max(t,e)+1,Math.max(s,i)),o.restore()}function Il(o,t){return Math.abs(o[t*4]-210)>2||Math.abs(o[t*4+3]-.75*255)>2}function af(){if(Ll===void 0){let o=jt(6,6,cs);o.globalCompositeOperation="lighter",o.fillStyle="rgba(210, 0, 0, 0.75)",ru(o,4,5,4,0),ru(o,4,5,0,5);let t=o.getImageData(0,0,3,3).data;Ll=Il(t,0)||Il(t,4)||Il(t,8),os(o),cs.push(o.canvas)}return Ll}function nu(o,t,s,e){let i=ji(s,t,o),r=_o(t,e,s),n=t.getMetersPerUnit();n!==void 0&&(r*=n);let l=o.getMetersPerUnit();l!==void 0&&(r/=l);let a=o.getExtent();if(!a||ki(a,i)){let h=_o(o,r,i)/r;isFinite(h)&&h>0&&(r/=h)}return r}function ou(o,t,s,e){let i=Qe(s),r=nu(o,t,i,e);return(!isFinite(r)||r<=0)&&Zr(s,function(n){return r=nu(o,t,n,e),isFinite(r)&&r>0}),r}function au(o,t,s,e,i,r,n,l,a,h,c,g){let u=jt(Math.round(s*o),Math.round(s*t),cs);if(g||(u.imageSmoothingEnabled=!1),a.length===0)return u.canvas;u.scale(s,s);function p(S){return Math.round(S*s)/s}u.globalCompositeOperation="lighter";let b=Vt();a.forEach(function(S,w,R){zh(b,S.extent)});let v=Pt(b),x=de(b),m=jt(Math.round(s*v/e),Math.round(s*x/e),cs);g||(m.imageSmoothingEnabled=!1);let E=s/e;a.forEach(function(S,w,R){let O=S.extent[0]-b[0],I=-(S.extent[3]-b[3]),_=Pt(S.extent),P=de(S.extent);S.image.width>0&&S.image.height>0&&m.drawImage(S.image,h,h,S.image.width-2*h,S.image.height-2*h,O*E,I*E,_*E,P*E)});let L=ke(n);return l.getTriangles().forEach(function(S,w,R){let O=S.source,I=S.target,_=O[0][0],P=O[0][1],F=O[1][0],A=O[1][1],D=O[2][0],C=O[2][1],d=p((I[0][0]-L[0])/r),f=p(-(I[0][1]-L[1])/r),y=p((I[1][0]-L[0])/r),M=p(-(I[1][1]-L[1])/r),k=p((I[2][0]-L[0])/r),T=p(-(I[2][1]-L[1])/r),z=_,N=P;_=0,P=0,F-=z,A-=N,D-=z,C-=N;let G=[[F,A,0,0,y-d],[D,C,0,0,k-d],[0,0,F,A,M-f],[0,0,D,C,T-f]],X=Yh(G);if(X){if(u.save(),u.beginPath(),af()||!g){u.moveTo(y,M);let j=4,B=d-y,W=f-M;for(let Y=0;Y<j;Y++)u.lineTo(y+p((Y+1)*B/j),M+p(Y*W/(j-1))),Y!=j-1&&u.lineTo(y+p((Y+1)*B/j),M+p((Y+1)*W/(j-1)));u.lineTo(k,T)}else u.moveTo(y,M),u.lineTo(d,f),u.lineTo(k,T);u.clip(),u.transform(X[0],X[2],X[1],X[3],d,f),u.translate(b[0]-z,b[3]-N),u.scale(e/s,-e/s),u.drawImage(m.canvas,0,0),u.restore()}}),os(m),cs.push(m.canvas),c&&(u.save(),u.globalCompositeOperation="source-over",u.strokeStyle="black",u.lineWidth=1,l.getTriangles().forEach(function(S,w,R){let O=S.target,I=(O[0][0]-L[0])/r,_=-(O[0][1]-L[1])/r,P=(O[1][0]-L[0])/r,F=-(O[1][1]-L[1])/r,A=(O[2][0]-L[0])/r,D=-(O[2][1]-L[1])/r;u.beginPath(),u.moveTo(P,F),u.lineTo(I,_),u.lineTo(A,D),u.closePath(),u.stroke()}),u.restore()),u.canvas}var Rl=class extends An{constructor(t,s,e,i,r,n,l,a,h,c,g,u){super(r,pt.IDLE,{interpolate:!!u}),this.renderEdges_=g!==void 0?g:!1,this.pixelRatio_=l,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=s,this.targetTileGrid_=i,this.wrappedTileCoord_=n||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let p=i.getTileCoordExtent(this.wrappedTileCoord_),b=this.targetTileGrid_.getExtent(),v=this.sourceTileGrid_.getExtent(),x=b?Oi(p,b):p;if(tr(x)===0){this.state=pt.EMPTY;return}let m=t.getExtent();m&&(v?v=Oi(v,m):v=m);let E=i.getResolution(this.wrappedTileCoord_[0]),L=ou(t,e,x,E);if(!isFinite(L)||L<=0){this.state=pt.EMPTY;return}let S=c!==void 0?c:.5;if(this.triangulation_=new su(t,e,x,v,L*S,E),this.triangulation_.getTriangles().length===0){this.state=pt.EMPTY;return}this.sourceZ_=s.getZForResolution(L);let w=this.triangulation_.calculateSourceExtent();if(v&&(t.canWrapX()?(w[1]=Rt(w[1],v[1],v[3]),w[3]=Rt(w[3],v[1],v[3])):w=Oi(w,v)),!tr(w))this.state=pt.EMPTY;else{let R=s.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let O=R.minX;O<=R.maxX;O++)for(let I=R.minY;I<=R.maxY;I++){let _=h(this.sourceZ_,O,I,l);_&&this.sourceTiles_.push(_)}this.sourceTiles_.length===0&&(this.state=pt.EMPTY)}}getImage(){return this.canvas_}reproject_(){let t=[];if(this.sourceTiles_.forEach(s=>{s&&s.getState()==pt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(s.tileCoord),image:s.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=pt.ERROR;else{let s=this.wrappedTileCoord_[0],e=this.targetTileGrid_.getTileSize(s),i=typeof e=="number"?e:e[0],r=typeof e=="number"?e:e[1],n=this.targetTileGrid_.getResolution(s),l=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=au(i,r,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),n,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=pt.LOADED}this.changed()}load(){if(this.state==pt.IDLE){this.state=pt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(s=>{let e=s.getState();if(e==pt.IDLE||e==pt.LOADING){t++;let i=Mt(s,ut.CHANGE,function(r){let n=s.getState();(n==pt.LOADED||n==pt.ERROR||n==pt.EMPTY)&&(At(i),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(s,e,i){s.getState()==pt.IDLE&&s.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(At),this.sourcesListenerKeys_=null}release(){this.canvas_&&(os(this.canvas_.getContext("2d")),cs.push(this.canvas_),this.canvas_=null),super.release()}},Pr=Rl;var Dn=class{constructor(t,s,e,i){this.minX=t,this.maxX=s,this.minY=e,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,s){return this.minX<=t&&t<=this.maxX&&this.minY<=s&&s<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}};function ds(o,t,s,e,i){return i!==void 0?(i.minX=o,i.maxX=t,i.minY=s,i.maxY=e,i):new Dn(o,t,s,e)}var Ln=Dn;var kl=class extends Mn{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Vt(),this.tmpTileRange_=new Ln(0,0,0,0)}isDrawableTile(t){let s=this.getLayer(),e=t.getState(),i=s.getUseInterimTilesOnError();return e==pt.LOADED||e==pt.EMPTY||e==pt.ERROR&&!i}getTile(t,s,e,i){let r=i.pixelRatio,n=i.viewState.projection,l=this.getLayer(),h=l.getSource().getTile(t,s,e,r,n);return h.getState()==pt.ERROR&&l.getUseInterimTilesOnError()&&l.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(h)||(h=h.getInterimTile()),h}getData(t){let s=this.frameState;if(!s)return null;let e=this.getLayer(),i=Xt(s.pixelToCoordinateTransform,t.slice()),r=e.getExtent();if(r&&!ki(r,i))return null;let n=s.pixelRatio,l=s.viewState.projection,a=s.viewState,h=e.getRenderSource(),c=h.getTileGridForProjection(a.projection),g=h.getTilePixelRatio(s.pixelRatio);for(let u=c.getZForResolution(a.resolution);u>=c.getMinZoom();--u){let p=c.getTileCoordForCoordAndZ(i,u),b=h.getTile(u,p[1],p[2],n,l);if(!(b instanceof Pn||b instanceof Pr)||b instanceof Pr&&b.getState()===pt.EMPTY)return null;if(b.getState()!==pt.LOADED)continue;let v=c.getOrigin(u),x=te(c.getTileSize(u)),m=c.getResolution(u),E=Math.floor(g*((i[0]-v[0])/m-p[1]*x[0])),L=Math.floor(g*((v[1]-i[1])/m-p[2]*x[1])),S=Math.round(g*h.getGutterForProjection(a.projection));return this.getImageData(b.getImage(),E+S,L+S)}return null}loadedTileCallback(t,s,e){return this.isDrawableTile(e)?super.loadedTileCallback(t,s,e):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,s){let e=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,n=i.resolution,l=i.center,a=i.rotation,h=t.pixelRatio,c=this.getLayer(),g=c.getSource(),u=g.getRevision(),p=g.getTileGridForProjection(r),b=p.getZForResolution(n,g.zDirection),v=p.getResolution(b),x=t.extent,m=t.viewState.resolution,E=g.getTilePixelRatio(h),L=Math.round(Pt(x)/m*h),S=Math.round(de(x)/m*h),w=e.extent&&Ue(e.extent,r);w&&(x=Oi(x,Ue(e.extent,r)));let R=v*L/2/E,O=v*S/2/E,I=[l[0]-R,l[1]-O,l[0]+R,l[1]+O],_=p.getTileRangeForExtentAndZ(x,b),P={};P[b]={};let F=this.createLoadedTileFinder(g,r,P),A=this.tmpExtent,D=this.tmpTileRange_;this.newTiles_=!1;let C=a?Kr(i.center,m,a,t.size):void 0;for(let G=_.minX;G<=_.maxX;++G)for(let X=_.minY;X<=_.maxY;++X){if(a&&!p.tileCoordIntersectsViewport([b,G,X],C))continue;let j=this.getTile(b,G,X,t);if(this.isDrawableTile(j)){let Y=_t(this);if(j.getState()==pt.LOADED){P[b][j.tileCoord.toString()]=j;let U=j.inTransition(Y);U&&e.opacity!==1&&(j.endTransition(Y),U=!1),!this.newTiles_&&(U||!this.renderedTiles.includes(j))&&(this.newTiles_=!0)}if(j.getAlpha(Y,t.time)===1)continue}let B=p.getTileCoordChildTileRange(j.tileCoord,D,A),W=!1;B&&(W=F(b+1,B)),W||p.forEachTileCoordParentTileRange(j.tileCoord,F,D,A)}let d=v/n*h/E;fe(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,a,-L/2,-S/2);let f=Yr(this.pixelTransform);this.useContainer(s,f,this.getBackground(t));let y=this.context,M=y.canvas;Ms(this.inversePixelTransform,this.pixelTransform),fe(this.tempTransform,L/2,S/2,d,d,0,-L/2,-S/2),M.width!=L||M.height!=S?(M.width=L,M.height=S):this.containerReused||y.clearRect(0,0,L,S),w&&this.clipUnrotated(y,t,w),g.getInterpolate()||(y.imageSmoothingEnabled=!1),this.preRender(y,t),this.renderedTiles.length=0;let k=Object.keys(P).map(Number);k.sort($e);let T,z,N;e.opacity===1&&(!this.containerReused||g.getOpaque(t.viewState.projection))?k=k.reverse():(T=[],z=[]);for(let G=k.length-1;G>=0;--G){let X=k[G],j=g.getTilePixelSize(X,h,r),W=p.getResolution(X)/v,Y=j[0]*W*d,U=j[1]*W*d,q=p.getTileCoordForCoordAndZ(ke(I),X),H=p.getTileCoordExtent(q),V=Xt(this.tempTransform,[E*(H[0]-I[0])/v,E*(I[3]-H[3])/v]),Z=E*g.getGutterForProjection(r),K=P[X];for(let J in K){let tt=K[J],$=tt.tileCoord,Q=q[1]-$[1],et=Math.round(V[0]-(Q-1)*Y),it=q[2]-$[2],st=Math.round(V[1]-(it-1)*U),rt=Math.round(V[0]-Q*Y),nt=Math.round(V[1]-it*U),ot=et-rt,at=st-nt,ct=b===X,ht=ct&&tt.getAlpha(_t(this),t.time)!==1,lt=!1;if(!ht)if(T){N=[rt,nt,rt+ot,nt,rt+ot,nt+at,rt,nt+at];for(let xt=0,wt=T.length;xt<wt;++xt)if(b!==X&&X<z[xt]){let dt=T[xt];Wt([rt,nt,rt+ot,nt+at],[dt[0],dt[3],dt[4],dt[7]])&&(lt||(y.save(),lt=!0),y.beginPath(),y.moveTo(N[0],N[1]),y.lineTo(N[2],N[3]),y.lineTo(N[4],N[5]),y.lineTo(N[6],N[7]),y.moveTo(dt[6],dt[7]),y.lineTo(dt[4],dt[5]),y.lineTo(dt[2],dt[3]),y.lineTo(dt[0],dt[1]),y.clip())}T.push(N),z.push(X)}else y.clearRect(rt,nt,ot,at);this.drawTileImage(tt,t,rt,nt,ot,at,Z,ct),T&&!ht?(lt&&y.restore(),this.renderedTiles.unshift(tt)):this.renderedTiles.push(tt),this.updateUsedTiles(t.usedTiles,g,tt)}}return this.renderedRevision=u,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Ci(this.renderedExtent_,I),this.renderedExtent_=I,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(t,g,p,h,r,x,b,c.getPreload()),this.scheduleExpireCache(t,g),this.postRender(y,t),e.extent&&y.restore(),y.imageSmoothingEnabled=!0,f!==M.style.transform&&(M.style.transform=f),this.container}drawTileImage(t,s,e,i,r,n,l,a){let h=this.getTileImage(t);if(!h)return;let c=_t(this),g=s.layerStatesArray[s.layerIndex],u=g.opacity*(a?t.getAlpha(c,s.time):1),p=u!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(h,l,l,h.width-2*l,h.height-2*l,e,i,r,n),p&&this.context.restore(),u!==g.opacity?s.animate=!0:a&&t.endTransition(c)}getImage(){let t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,s){if(s.canExpireCache()){let e=(function(i,r,n){let l=_t(i);l in n.usedTiles&&i.expireCache(n.viewState.projection,n.usedTiles[l])}).bind(null,s);t.postRenderFunctions.push(e)}}updateUsedTiles(t,s,e){let i=_t(s);i in t||(t[i]={}),t[i][e.getKey()]=!0}manageTilePyramid(t,s,e,i,r,n,l,a,h){let c=_t(s);c in t.wantedTiles||(t.wantedTiles[c]={});let g=t.wantedTiles[c],u=t.tileQueue,p=e.getMinZoom(),b=t.viewState.rotation,v=b?Kr(t.viewState.center,t.viewState.resolution,b,t.size):void 0,x=0,m,E,L,S,w,R;for(R=p;R<=l;++R)for(E=e.getTileRangeForExtentAndZ(n,R,E),L=e.getResolution(R),S=E.minX;S<=E.maxX;++S)for(w=E.minY;w<=E.maxY;++w)b&&!e.tileCoordIntersectsViewport([R,S,w],v)||(l-R<=a?(++x,m=s.getTile(R,S,w,i,r),m.getState()==pt.IDLE&&(g[m.getKey()]=!0,u.isKeyQueued(m.getKey())||u.enqueue([m,c,e.getTileCoordCenter(m.tileCoord),L])),h!==void 0&&h(m)):s.useTile(R,S,w,r));s.updateCacheSize(x,r)}},lu=kl;var Dr={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Ol=class{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let s=this.oldest_;for(;s;)t(s.value_,s.key_,this),s=s.newer}get(t,s){let e=this.entries_[t];return gt(e!==void 0,15),e===this.newest_||(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e),e.value_}remove(t){let s=this.entries_[t];return gt(s!==void 0,15),s===this.newest_?(this.newest_=s.older,this.newest_&&(this.newest_.newer=null)):s===this.oldest_?(this.oldest_=s.newer,this.oldest_&&(this.oldest_.older=null)):(s.newer.older=s.older,s.older.newer=s.newer),delete this.entries_[t],--this.count_,s.value_}getCount(){return this.count_}getKeys(){let t=new Array(this.count_),s=0,e;for(e=this.newest_;e;e=e.older)t[s++]=e.key_;return t}getValues(){let t=new Array(this.count_),s=0,e;for(e=this.newest_;e;e=e.older)t[s++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){let t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,s){this.get(t),this.entries_[t].value_=s}set(t,s){gt(!(t in this.entries_),16);let e={key_:t,newer:null,older:this.newest_,value_:s};this.newest_?this.newest_.newer=e:this.oldest_=e,this.newest_=e,this.entries_[t]=e,++this.count_}setSize(t){this.highWaterMark=t}},hu=Ol;function Fl(o,t,s,e){return e!==void 0?(e[0]=o,e[1]=t,e[2]=s,e):[o,t,s]}function us(o,t,s){return o+"/"+t+"/"+s}function In(o){return us(o[0],o[1],o[2])}function cu(o){return o.split("/").map(Number)}function du(o){return(o[1]<<o[0])+o[2]}function uu(o,t){let s=o[0],e=o[1],i=o[2];if(t.getMinZoom()>s||s>t.getMaxZoom())return!1;let r=t.getFullTileRange(s);return r?r.containsXY(e,i):!0}var zl=class extends hu{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let t=this.peekFirstKey(),e=cu(t)[0];this.forEach(i=>{i.tileCoord[0]!==e&&(this.remove(In(i.tileCoord)),i.release())})}},Rn=zl;var Vs=[0,0,0],Ki=5,Nl=class{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,gt(Th(this.resolutions_,function(i,r){return r-i},!0),17);let s;if(!t.origins){for(let i=0,r=this.resolutions_.length-1;i<r;++i)if(!s)s=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==s){s=void 0;break}}this.zoomFactor_=s,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,gt(this.origins_.length==this.resolutions_.length,20));let e=t.extent;e!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ke(e)),gt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,gt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:256,gt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=e!==void 0?e:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(i,r){let n=new Ln(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(e){let l=this.getTileRangeForExtentAndZ(e,r);n.minX=Math.max(l.minX,n.minX),n.maxX=Math.min(l.maxX,n.maxX),n.minY=Math.max(l.minY,n.minY),n.maxY=Math.min(l.maxY,n.maxY)}return n},this):e&&this.calculateTileRanges_(e)}forEachTileCoord(t,s,e){let i=this.getTileRangeForExtentAndZ(t,s);for(let r=i.minX,n=i.maxX;r<=n;++r)for(let l=i.minY,a=i.maxY;l<=a;++l)e([s,r,l])}forEachTileCoordParentTileRange(t,s,e,i){let r,n,l,a=null,h=t[0]-1;for(this.zoomFactor_===2?(n=t[1],l=t[2]):a=this.getTileCoordExtent(t,i);h>=this.minZoom;){if(this.zoomFactor_===2?(n=Math.floor(n/2),l=Math.floor(l/2),r=ds(n,n,l,l,e)):r=this.getTileRangeForExtentAndZ(a,h,e),s(h,r))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,s,e){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){let r=t[1]*2,n=t[2]*2;return ds(r,r+1,n,n+1,s)}let i=this.getTileCoordExtent(t,e||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,s)}return null}getTileRangeForTileCoordAndZ(t,s,e){if(s>this.maxZoom||s<this.minZoom)return null;let i=t[0],r=t[1],n=t[2];if(s===i)return ds(r,n,r,n,e);if(this.zoomFactor_){let a=Math.pow(this.zoomFactor_,s-i),h=Math.floor(r*a),c=Math.floor(n*a);if(s<i)return ds(h,h,c,c,e);let g=Math.floor(a*(r+1))-1,u=Math.floor(a*(n+1))-1;return ds(h,g,c,u,e)}let l=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,s,e)}getTileRangeForExtentAndZ(t,s,e){this.getTileCoordForXYAndZ_(t[0],t[3],s,!1,Vs);let i=Vs[1],r=Vs[2];this.getTileCoordForXYAndZ_(t[2],t[1],s,!0,Vs);let n=Vs[1],l=Vs[2];return ds(i,n,r,l,e)}getTileCoordCenter(t){let s=this.getOrigin(t[0]),e=this.getResolution(t[0]),i=te(this.getTileSize(t[0]),this.tmpSize_);return[s[0]+(t[1]+.5)*i[0]*e,s[1]-(t[2]+.5)*i[1]*e]}getTileCoordExtent(t,s){let e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=te(this.getTileSize(t[0]),this.tmpSize_),n=e[0]+t[1]*r[0]*i,l=e[1]-(t[2]+1)*r[1]*i,a=n+r[0]*i,h=l+r[1]*i;return Pe(n,l,a,h,s)}getTileCoordForCoordAndResolution(t,s,e){return this.getTileCoordForXYAndResolution_(t[0],t[1],s,!1,e)}getTileCoordForXYAndResolution_(t,s,e,i,r){let n=this.getZForResolution(e),l=e/this.getResolution(n),a=this.getOrigin(n),h=te(this.getTileSize(n),this.tmpSize_),c=l*(t-a[0])/e/h[0],g=l*(a[1]-s)/e/h[1];return i?(c=sr(c,Ki)-1,g=sr(g,Ki)-1):(c=ir(c,Ki),g=ir(g,Ki)),Fl(n,c,g,r)}getTileCoordForXYAndZ_(t,s,e,i,r){let n=this.getOrigin(e),l=this.getResolution(e),a=te(this.getTileSize(e),this.tmpSize_),h=(t-n[0])/l/a[0],c=(n[1]-s)/l/a[1];return i?(h=sr(h,Ki)-1,c=sr(c,Ki)-1):(h=ir(h,Ki),c=ir(c,Ki)),Fl(e,h,c,r)}getTileCoordForCoordAndZ(t,s,e){return this.getTileCoordForXYAndZ_(t[0],t[1],s,!1,e)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,s){let e=vs(this.resolutions_,t,s||0);return Rt(e,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,s){return Wo(s,0,s.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){let s=this.resolutions_.length,e=new Array(s);for(let i=this.minZoom;i<s;++i)e[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=e}},jl=Nl;var kn={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function On(o){let t=o.getDefaultTileGrid();return t||(t=hf(o),o.setDefaultTileGrid(t)),t}function pu(o,t,s){let e=t[0],i=o.getTileCoordCenter(t),r=Fn(s);if(!ki(r,i)){let n=Pt(r),l=Math.ceil((r[0]-i[0])/n);return i[0]+=n*l,o.getTileCoordForCoordAndZ(i,e)}return t}function lf(o,t,s,e){e=e!==void 0?e:"top-left";let i=gu(o,t,s);return new jl({extent:o,origin:Nh(o,e),resolutions:i,tileSize:s})}function fu(o){let t=o||{},s=t.extent||ue("EPSG:3857").getExtent(),e={extent:s,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:gu(s,t.maxZoom,t.tileSize,t.maxResolution)};return new jl(e)}function gu(o,t,s,e){t=t!==void 0?t:42,s=te(s!==void 0?s:256);let i=de(o),r=Pt(o);e=e>0?e:Math.max(r/s[0],i/s[1]);let n=t+1,l=new Array(n);for(let a=0;a<n;++a)l[a]=e/Math.pow(2,a);return l}function hf(o,t,s,e){let i=Fn(o);return lf(i,t,s,e)}function Fn(o){o=ue(o);let t=o.getExtent();if(!t){let s=180*We.degrees/o.getMetersPerUnit();t=Pe(-s,-s,s,s)}return t}var Bl=class extends Tn{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;let s=[256,256];this.tileGrid&&te(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),s),this.tileCache=new Rn(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,s){let e=this.getTileCacheForProjection(t);e&&e.expireCache(s)}forEachLoadedTile(t,s,e,i){let r=this.getTileCacheForProjection(t);if(!r)return!1;let n=!0,l,a,h;for(let c=e.minX;c<=e.maxX;++c)for(let g=e.minY;g<=e.maxY;++g)a=us(s,c,g),h=!1,r.containsKey(a)&&(l=r.get(a),h=l.getState()===pt.LOADED,h&&(h=i(l)!==!1)),h||(n=!1);return n}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){let s=t?this.getTileGridForProjection(t):this.tileGrid;return s?s.getResolutions():null}getTile(t,s,e,i,r){return Et()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:On(t)}getTileCacheForProjection(t){let s=this.getProjection();return gt(s===null||Ni(s,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,s,e){let i=this.getTileGridForProjection(e),r=this.getTilePixelRatio(s),n=te(i.getTileSize(t),this.tmpSize);return r==1?n:vd(n,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,s){s=s!==void 0?s:this.getProjection();let e=this.getTileGridForProjection(s);return this.getWrapX()&&s.isGlobal()&&(t=pu(e,t,s)),uu(t,e)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,s){let e=this.getTileCacheForProjection(s);t>e.highWaterMark&&(e.highWaterMark=t)}useTile(t,s,e,i){}},zn=class extends Jt{constructor(t,s){super(t),this.tile=s}},mu=Bl;function cf(o,t){let s=/\{z\}/g,e=/\{x\}/g,i=/\{y\}/g,r=/\{-y\}/g;return function(n,l,a){if(n)return o.replace(s,n[0].toString()).replace(e,n[1].toString()).replace(i,n[2].toString()).replace(r,function(){let h=n[0],c=t.getFullTileRange(h);return gt(c,55),(c.getHeight()-n[2]-1).toString()})}}function xu(o,t){let s=o.length,e=new Array(s);for(let i=0;i<s;++i)e[i]=cf(o[i],t);return df(e)}function df(o){return o.length===1?o[0]:function(t,s,e){if(!t)return;let i=du(t),r=_i(i,o.length);return o[r](t,s,e)}}function yu(o){let t=[],s=/\{([a-z])-([a-z])\}/.exec(o);if(s){let e=s[1].charCodeAt(0),i=s[2].charCodeAt(0),r;for(r=e;r<=i;++r)t.push(o.replace(s[0],String.fromCharCode(r)));return t}if(s=/\{(\d+)-(\d+)\}/.exec(o),s){let e=parseInt(s[2],10);for(let i=parseInt(s[1],10);i<=e;i++)t.push(o.replace(s[0],i.toString()));return t}return t.push(o),t}var Gl=class o extends mu{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===o.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){let s=t.target,e=_t(s),i=s.getState(),r;i==pt.LOADING?(this.tileLoadingKeys_[e]=!0,r=kn.TILELOADSTART):e in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[e],r=i==pt.ERROR?kn.TILELOADERROR:i==pt.LOADED?kn.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new zn(r,s))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,s){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof s<"u"?this.setKey(s):this.changed()}setUrl(t){let s=yu(t);this.urls=s,this.setUrls(s)}setUrls(t){this.urls=t;let s=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(xu(t,this.tileGrid),s):this.setKey(s)}tileUrlFunction(t,s,e){}useTile(t,s,e){let i=us(t,s,e);this.tileCache.containsKey(i)&&this.tileCache.get(i)}},bu=Gl;var Xl=class extends ns{constructor(t){t=t||{};let s=Object.assign({},t);delete s.preload,delete s.useInterimTilesOnError,super(s),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(Dr.PRELOAD)}setPreload(t){this.set(Dr.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Dr.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Dr.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}},vu=Xl;var Wl=class extends vu{constructor(t){super(t)}createRenderer(){return new lu(this)}},Yl=Wl;var Vl=class extends bu{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:uf,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Pn,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,s){let e=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==e?s:{});for(let i in this.tileCacheForProjection){let r=this.tileCacheForProjection[i];r.expireCache(r==e?s:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Ni(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Ni(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){let s=this.getProjection();if(this.tileGrid&&(!s||Ni(s,t)))return this.tileGrid;let e=_t(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=On(t)),this.tileGridForProjection[e]}getTileCacheForProjection(t){let s=this.getProjection();if(!s||Ni(s,t))return this.tileCache;let e=_t(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new Rn(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}createTile_(t,s,e,i,r,n){let l=[t,s,e],a=this.getTileCoordForTileUrlFunction(l,r),h=a?this.tileUrlFunction(a,i,r):void 0,c=new this.tileClass(l,h!==void 0?pt.IDLE:pt.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=n,c.addEventListener(ut.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,s,e,i,r){let n=this.getProjection();if(!n||!r||Ni(n,r))return this.getTileInternal(t,s,e,i,n||r);let l=this.getTileCacheForProjection(r),a=[t,s,e],h,c=In(a);l.containsKey(c)&&(h=l.get(c));let g=this.getKey();if(h&&h.key==g)return h;let u=this.getTileGridForProjection(n),p=this.getTileGridForProjection(r),b=this.getTileCoordForTileUrlFunction(a,r),v=new Pr(n,u,r,p,a,b,this.getTilePixelRatio(i),this.getGutter(),(x,m,E,L)=>this.getTileInternal(x,m,E,L,n),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return v.key=g,h?(v.interimTile=h,v.refreshInterimChain(),l.replace(c,v)):l.set(c,v),v}getTileInternal(t,s,e,i,r){let n=null,l=us(t,s,e),a=this.getKey();if(!this.tileCache.containsKey(l))n=this.createTile_(t,s,e,i,r,a),this.tileCache.set(l,n);else if(n=this.tileCache.get(l),n.key!=a){let h=n;n=this.createTile_(t,s,e,i,r,a),h.getState()==pt.IDLE?n.interimTile=h.interimTile:n.interimTile=h,n.refreshInterimChain(),this.tileCache.replace(l,n)}return n}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(let s in this.tileCacheForProjection)this.tileCacheForProjection[s].clear();this.changed()}}setTileGridForProjection(t,s){let e=ue(t);if(e){let i=_t(e);i in this.tileGridForProjection||(this.tileGridForProjection[i]=s)}}clear(){super.clear();for(let t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};function uf(o,t){o.getImage().src=t}var Cu=Vl;var Ul=class extends Cu{constructor(t){t=t||{};let s=t.projection!==void 0?t.projection:"EPSG:3857",e=t.tileGrid!==void 0?t.tileGrid:fu({extent:Fn(s),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:s,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:e,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}},_u=Ul;var pf='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Hl=class extends _u{constructor(t){t=t||{};let s;t.attributions!==void 0?s=t.attributions:s=[pf];let e=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",i=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:s,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:e,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}},Zl=Hl;var ff=["popup"],gf=["tooltip"],Nn=(()=>{let t=class t extends ye{constructor(){super(...arguments),this.tooltipData={visible:!1,content:"",name:"",items:[]},this.preventColFilteringBasedOnDataProperties=!0,this.CLUSTER_RANGE=1,this.isRGBColor=!1,this._selectedFeature=null,this.featureOverlay=null,this.mapData=null,this.hintTimeout=null,this.popupElement=null,this.polyData=null,this.isGeoJSON=!1}ngOnInit(){super.ngOnInit(),this.popupElement=this.popupEl.nativeElement,this.tooltipData.name="",this.tooltipData.items=[],this.widget.isMap=!0,this.requestPolygons(),this.us.isEmbedded()&&(this.onMessage=e=>{let i=e.data;switch(i.type){case"map.applyStyle":this.applyStyle(i);break}},window.addEventListener("message",this.onMessage))}applyStyle(e){let{selector:i,style:r,value:n}=e,l=this.map?.getTargetElement();(l&&l.querySelectorAll(i))?.forEach(h=>{h.style[r]=n})}ngAfterViewInit(){this.createMap()}ngOnDestroy(){this.us.isEmbedded()&&window.removeEventListener("message",this.onMessage),this.tooltip?.nativeElement?.remove(),super.ngOnDestroy()}createMap(){let e=this.ss.getAppSettings(),i;i=this.getDataPropValue("tileUrl");let r=new Zl({wrapX:!0,url:i}),n=new wd({layers:[new Yl({source:r})],controls:xr({attributionOptions:{collapsible:!1}}),target:this.el.nativeElement,view:new De({center:[0,0],zoom:2})});n.getViewport().addEventListener("mouseout",l=>{this.hideTooltip()},!1),this.map=n,this.initialize()}hideTooltip(){this.hintTimeout&&clearTimeout(this.hintTimeout),this.tooltip&&(this.tooltip.nativeElement.style.display="none")}rejectTooltipCreation(){clearTimeout(this.hintTimeout)}showTooltip(e,i,r){this.hintTimeout&&clearTimeout(this.hintTimeout),this.hintTimeout=setTimeout(()=>{let n=this.tooltip?.nativeElement,l=this.getDataPropValue("tooltipStyles");if(l){let a=JSON.parse(l);for(let h in a)n.style.setProperty(h,a[h])}n.innerHTML=e,n.style.left=i.toString()+"px",n.style.top=r.toString()+"px",n.style.display="block"},600)}showPopup(){let e=this.popupElement,i=this.getDataPropValue("popupStyles");if(i){let r=JSON.parse(i);for(let n in r)e.style.setProperty(n,r[n])}this.popupElement&&(this.popupElement.style.visibility="hidden"),setTimeout(()=>{this.popupElement&&(this.popupElement.style.visibility="visible"),this.map?.render()},0)}hidePopup(){this.popupElement&&(this.popupElement.style.visibility="hidden")}doDrillUp(){this.hideTooltip(),this.hidePopup(),this.doDrill()}displayAsPivot(e){this.hideTooltip(),this.rejectTooltipCreation(),this.widget.type==="pivot"?(this.widget.isDrillthrough=!1,this.restoreWidgetType()):(this.widget.pivotMdx=e||this.getMDX(),this.changeWidgetType("pivot"))}requestPolygons(){let e=this.widget.name;this.widget.name.indexOf(".")===-1&&(e+=".js"),e=this.getDataPropValue("coordsJsFile")||e;let r=(this.ss.serverSettings.DefaultApp||"/csp")+"/"+e;this.ds.getFile(r).then(n=>this.onPolyFileLoaded(n)).finally(()=>this.hideLoading())}onPolyFileLoaded(e){this.isGeoJSON=!1;try{let n=JSON.parse(e);this.polyData=n,this.isGeoJSON=!0,this.buildPolygons();return}catch{}var i={};e="("+e+")(polys)",window["eval"](e),this.polyData=i,this.buildPolygons()}onPolyJSONFileLoaded(e){this.polyData=e,this.buildPolygons()}getFeatureColor(e,i){let r=this.mapData.Cols[1].tuples.filter(b=>b.caption===e);if(r.length===0)return;r=r[0];let n,l=this.mapData.Cols[1].tuples.indexOf(r),a=this.mapData.Cols[0].tuples.length,h="ColorExplicitValue";h=this.getDataPropValue("colorProperty")||h;let c;isNaN(parseInt(h,10))?c=this.mapData.Cols[0].tuples.filter(b=>b.caption===h):c=this.mapData.Cols[0].tuples.slice(h,1),c=c[0];let g=this.mapData.Cols[0].tuples.indexOf(c),u=this.mapData.Data[l*a+g];if(isNaN(parseFloat(u)))return u.toString().indexOf("rgb")!==-1&&u.toString().indexOf("rgba")===-1&&(u=u.replace("rgb","rgba"),u=u.substr(0,u.length-1)+", 0)"),n=u.split(","),n[3]="0.4)",n.join(",");{let b=this.getDataPropValue("colorFormula")||"hsl((255-x)/255 * 120, 100%, 50%)";this.isRGBColor&&(b="rgb(x, 255-x, 0)");let v=b.indexOf("("),x=b.substring(0,v).toLowerCase();b=b.substring(v+1,b.length-1),n=b.split(",");let m=i||0;var p;for(let E=0;E<n.length;E++){if(n[E].indexOf("x")===-1)continue;n[E]=n[E].replace(/x/g,m.toString()),window["eval"]("tmp = "+n[E]+";"),p>255&&(p=255),p<0&&(p=0),n[E]=Math.floor(p).toString()}return x.indexOf("a")===-1?x+"a("+n.join(",")+", 0.45)":x+"("+n.join(",")+")"}}centerView(e,i){let r,n,l;if(this.widget.properties&&(r=parseFloat(this.widget.properties.latitude),n=parseFloat(this.widget.properties.longitude),l=parseFloat(this.widget.properties.zoom)),this.drills.length===0&&!isNaN(r)&&!isNaN(n)&&!isNaN(l)&&r!==void 0&&n!==void 0&&l!==void 0)this.map?.getView().setCenter(ji([n,r],"EPSG:4326","EPSG:900913")),this.map?.getView().setZoom(l);else{if(Math.abs(e[0]-i[0])<1e-8&&Math.abs(e[1]-i[1])<1e-8)return;let a=ji([e[0],e[1]],"EPSG:4326","EPSG:900913"),h=ji([i[0],i[1]],"EPSG:4326","EPSG:900913");this.map?.getView().fit([a[0],a[1],h[0],h[1]],this.map?.getSize())}this.getDataPropValue("fixMaxZoom")==="1"&&this.map?.getView().setMaxZoom(this.map?.getView().getZoom()||1),this.getDataPropValue("fixMinZoom")==="1"&&this.map?.getView().setMinZoom(this.map?.getView().getZoom()||1),this.getDataPropValue("maxZoom")&&this.map?.getView().setMaxZoom(parseFloat(this.getDataPropValue("maxZoom")||"1"))}buildPolygons(){let e,i,r,n,l,a,h,c,g,u,p,b;this.isRGBColor=!1;let v=this.getDataPropValue("colorProperty")||"ColorHSLValue",x=this.getDataPropValue("coordsProperty")||"CoordKeyValue";if(!this.polyData||!this.map||!this.mapData)return;let m=[];h=this.mapData.Cols[0].tuples.length;let E=Number.MAX_VALUE,L=Number.MIN_VALUE,S=0;for(isNaN(parseInt(v))?(b=this.mapData.Cols[0].tuples.filter(I=>I.caption===v),S=this.mapData.Cols[0].tuples.indexOf(b[0]),S===-1&&(this.isRGBColor=!0,v="ColorRGBValue",b=this.mapData.Cols[0].tuples.filter(I=>I.caption===v),S=this.mapData.Cols[0].tuples.indexOf(b[0]))):S=parseInt(this.widget.properties.colorProperty,10)||0,c=0;c<this.mapData.Cols[1].tuples.length;c++)g=this.mapData.Data[c*h+S],g<E&&(E=g),g>L&&(L=g);let w=[99999999,99999999],R=[-99999999,-99999999],O=0;for(p=-1,b=this.mapData.Cols[0].tuples.filter(I=>I.caption===x),b.length===0&&(b=this.mapData.Cols[0].tuples.filter(I=>I.caption==="Key")),b.length!==0&&(p=this.mapData.Cols[0].tuples.indexOf(b[0])),c=0;c<this.mapData.Cols[1].tuples.length;c++){let I=this.mapData.Cols[1].tuples[c].caption,_=I;if(p!==-1&&(_=this.mapData.Data[c*h+p]),u=this.getPartsByKey(_,x),!u)continue;let P=[];O++;let F=this.getDataPropValue("dataLabels");if(this.isGeoJSON){let y=this.convertCoordinatesOfGEOJson(u,w,R);P=y.poly,w=y.min,R=y.max}else for(a=0;a<u.length;a++){let y=[];if(!u[a])continue;let M=u[a];typeof M=="string"&&(M=M.split(" "));let k=[];for(n in M){if(!M[n])continue;let T=M[n];if(typeof T=="string"&&(T=T.split(",")),T.length<2)continue;if(e=parseFloat(T[0]),i=parseFloat(T[1]),isNaN(e)||isNaN(i)){console.warn("Wrong poly coordinates: ",M[n]);continue}let z=new ii([e,i]);z.transform("EPSG:4326","EPSG:3857");let N=e;N<0&&(N+=360),parseFloat(N)<w[0]&&(w[0]=parseFloat(N)),parseFloat(i)<w[1]&&(w[1]=parseFloat(i)),parseFloat(N)>R[0]&&(R[0]=parseFloat(N)),parseFloat(i)>R[1]&&(R[1]=parseFloat(i)),k.push(z.getCoordinates())}if(y.push(k),y.length>300){let T=[];for(n=0;n<y.length;n+=2)T.push(y[n]);y=T}P.push(k)}let A=I,D=this.getDataPropValue("polygonTitleProperty");if(D){let y=this.mapData.Cols[0].tuples.filter(M=>M.caption===D);if(y.length!==0){let M=this.mapData.Cols[0].tuples.indexOf(y[0]);M!==-1&&(A=this.mapData.Data[c*h+M])}}let C=Xi;if(this.isGeoJSON){switch(u.type.toLowerCase()){}C=Tl}let d=new Fa({geometry:new C(P),key:I,title:A,dataIdx:c*h,path:this.mapData.Cols[1].tuples[c].path,desc:this.mapData.Cols[1].tuples[c].title}),f;if(isNaN(parseFloat(A))||(A=this.formatNumber(A,"")),F){let y=JSON.parse(F),M=y.size||12,k=y.font||"Calibri,Arial,sans-serif",T=y.color||"#000",z=y.stroke||"#fff",N=y.strokeWidth||2;f=new vr({font:`${M}px ${k}`,fill:new hi({color:T}),stroke:new ci({color:z,width:N}),text:A+""})}g=this.mapData.Data[c*h+S],d.setStyle(new Ze({zIndex:0,fill:new hi({color:this.getFeatureColor(I,(g-E)*255/(L-E))||"none"}),stroke:new ci({color:"rgba(0, 0, 0, 0.3)",width:1}),text:f})),m.push(d)}this.featureOverlay.getSource().clear(),this.polys.clear(),this.polys.addFeatures(m),setTimeout(()=>{this.centerView(w,R)})}retrieveData(e){if(setTimeout(()=>{this.map?.updateSize()},0),e.Error){this.showError(e.Error);return}e.Info&&(this.dataInfo=e.Info),this.hideTooltip(),this.markers.clear(),this.mapData=e,this.buildPolygons();let i=[Number.MAX_VALUE,Number.MAX_VALUE],r=[-Number.MAX_VALUE,-Number.MAX_VALUE];if(e&&this.map){let n=e.Cols[0].tuples.length,l=0,a=[],h="latitude";this.widget.properties&&this.widget.properties.latitudeProperty&&(h=this.widget.properties.latitudeProperty);let c="longitude";this.widget.properties&&this.widget.properties.longitudeProperty&&(c=this.widget.properties.longitudeProperty);let g=-1,u=-1,p=e.Cols[0].tuples.filter(v=>v.caption.toLowerCase()===h);if(p.length!==0&&(u=e.Cols[0].tuples.indexOf(p[0])),p=e.Cols[0].tuples.filter(v=>v.caption.toLowerCase()===c),p.length!==0&&(g=e.Cols[0].tuples.indexOf(p[0])),u===-1||g===-1)return;let b=e.Cols[1].tuples;b[0]?.children&&(b=b[0]?.children);for(let v=0;v<b.length;v++){if(e.Data[l+g]===""||e.Data[l+g]===void 0||e.Data[l+u]===""||e.Data[l+u]===void 0)continue;let x=parseFloat(e.Data[l+g]||0),m=parseFloat(e.Data[l+u]||0),E=b[v].caption,L=new ii([x,m]);L.transform("EPSG:4326","EPSG:900913");let S=[],w=[];for(let O=2;O<e.Cols[0].tuples.length;O++)S.push(e.Cols[0].tuples[O].caption),w.push(e.Data[l+O]);let R=new Fa({geometry:L,name:E,labels:S,values:w,dataIdx:l,path:b[v].path,desc:b[v].title});parseFloat(m.toString())<i[1]&&(i[1]=parseFloat(m.toString())),parseFloat(x.toString())<i[0]&&(i[0]=parseFloat(x.toString())),parseFloat(m.toString())>r[1]&&(r[1]=parseFloat(m.toString())),parseFloat(x.toString())>r[0]&&(r[0]=parseFloat(x.toString())),i[0]==r[0]&&(i[0]-=.25,r[0]+=.25),i[1]==r[1]&&(i[1]-=.25,r[1]+=.25),a.push(R),l+=n}a.length!==0&&(this.markers.addFeatures(a),this.centerView(i,r)),this.centerView(i,r)}}initialize(){this.iconStyle=new Ze({zIndex:100,image:new hs({anchor:[.5,40],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:1,src:"assets/img/map-marker-red.png"})});let e=this.map,i=new Ze({zIndex:0,stroke:new ci({color:"rgba(0, 0, 0, 0.5)",width:1})});this.polyStyle=i,this.hoverStyle=new Ze({zIndex:1,stroke:new ci({color:"blue",width:2})}),this.polys=new Ar({features:[]});let r=new Tr({source:this.polys,style:this.polyStyle});r.setZIndex(1),this.map?.addLayer(r),this.markers=new Ar({features:[]});let n=new se;this.featureOverlay=new Tr({map:this.map,source:new Ar({features:n,useSpatialIndex:!1}),style:this.hoverStyle,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.featureOverlay.setZIndex(10),this.featureOverlay.setMap(this.map),this.markers&&(r=new Tr({source:this.markers,style:this.iconStyle}),r.setZIndex(100),this.map?.addLayer(r)),this.map?.on("click",l=>this.onMapClick(l)),this.map?.on("pointermove",l=>this.onPointerMove(l))}onPointerMove(e){if(Ae.mobile&&e.originalEvent.touches&&e.originalEvent.touches.length!==1)return;this.hideTooltip();let i=this.map?.forEachFeatureAtPixel(e.pixel,(n,l)=>n);if(i){let n=i.get("dataIdx"),l,a="TooltipValue",h="",c=this.getDataProp("tooltipProperty");c&&(a=c.dataValue,h=c.format),l=this.getDataByColumnName(this.mapData,a||"Name",n,h),!l&&this.widget.properties?.polygonTitleProperty&&i.get("title")&&(l=i.get("title")),l||(l=this.getDataByColumnName(this.mapData,"Name",n)),l||(l=(this.mapData.Cols[1].tuples[0]?.children||this.mapData.Cols[1].tuples)[Math.floor(n/this.mapData.Cols[0].tuples.length)].caption||""),l&&this.showTooltip(l,e.pixel[0],e.pixel[1])}if(e.dragging){this.hideTooltip();return}let r=this.map?.getEventPixel(e.originalEvent);if(r){let n=this.map?.hasFeatureAtPixel(r);(this.map?.getTarget()).style.cursor=n?"pointer":""}this.featureOverlay?.getSource().clear(),i&&this.featureOverlay?.getSource().addFeature(i)}getTooltipData(e){if(!this.mapData)return;let i=[],r=this.mapData.Cols[1].tuples.filter(c=>c.caption===e);if(r.length===0)return;r=r[0];let n=this.mapData.Cols[1].tuples.indexOf(r),l=this.mapData.Cols[0].tuples.length,a=this.mapData.Cols[0].tuples.filter(c=>c.caption==="tooltip");if(a.length===0)return;a=a[0];let h=this.mapData.Cols[0].tuples.indexOf(a);return i.push({label:"",value:this.mapData?.Data[n*l+h].split(":")[1]||""}),i}onMapClick(e){if(this.hidePopup(),Ae.mobile&&e.originalEvent.touches&&e.originalEvent.touches.length!==1)return;let i=this.map?.forEachFeatureAtPixel(e.pixel,(n,l)=>n);if(i){if(this.hideTooltip(),Ae.mobile&&this._selectedFeature!==i){this._selectedFeature=i,this.onPointerMove(e);return}this.doDrill(i.get("path"),i.get("name")||i.get("title"),void 0,()=>{r(i)})}else this.hideTooltip();let r=n=>{let l=n.get("dataIdx"),a,h,c="PopupValue",g="",u=this.getDataProp("popupProperty");if(u&&(c=u.dataValue,g=u.format),c?(h="<b>"+(n.get("key")||n.values_.title)+"</b><br/>",h+=c+": ",h+=this.getDataByColumnName(this.mapData,c,l,g)):h=this.mapData?.Cols[1].tuples[Math.floor(l/this.mapData?.Cols[0].tuples.length)].caption||this.mapData?.Cols[1].tuples[Math.floor(l/this.mapData?.Cols[0].tuples.length)].desc||"",!h)if(h="<b>"+(n.get("name")||n.values_.title)+"</b><br/>",this.mapData?.Cols[0].tuples.length)for(let p=0;p<this.mapData?.Cols[0].tuples.length;p++){let b=this.mapData?.Cols[0].tuples[p].caption;if(b.toLowerCase()==="latitude"||b.toLowerCase()==="longitude")continue;let v=this.getDataByColumnName(this.mapData,b,l);h+=`${b}: <span style="opacity: 0.6">${v}</span>`,p!==this.mapData?.Cols[0].tuples.length-1&&(h+="<br/>")}else h=this.getDataByColumnName(this.mapData,"Name",l);h&&(this.tooltipData.content=h,this.popupElement&&(this.popupElement.style.left=e.pixel[0]+"px",this.popupElement.style.top=e.pixel[1]-10+"px",this.popupElement.innerHTML=h),this.showPopup())}}onResize(){this.map&&this.map.updateSize()}buildGeoJSON(e){}getPartsByKey(e,i="Key"){if(this.isGeoJSON){let r=this.polyData?.features.find(n=>n.properties[i]===e);return r?r.geometry:void 0}else if(this.polyData?.[e])return this.polyData[e]?.split(";")}convertCoordinatesOfGEOJson(e,i,r){let n=JSON.parse(JSON.stringify(e.coordinates));for(let l=0;l<n.length;l++)for(let a=0;a<n[l].length;a++)for(let h=0;h<n[l][a].length;h++){let c=n[l][a][h][0],g=n[l][a][h][1],u=new ii([c,g]);u.transform("EPSG:4326","EPSG:3857"),n[l][a][h][0]=u.getCoordinates()[0],n[l][a][h][1]=u.getCoordinates()[1];let p=c;p<0&&(p+=360),parseFloat(p)<i[0]&&(i[0]=parseFloat(p)),parseFloat(g)<i[1]&&(i[1]=parseFloat(g)),parseFloat(p)>r[0]&&(r[0]=parseFloat(p)),parseFloat(g)>r[1]&&(r[1]=parseFloat(g))}return{poly:n,min:i,max:r}}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-map-widget"]],viewQuery:function(i,r){if(i&1&&($i(ff,7),$i(gf,7)),i&2){let n;Ji(n=Qi())&&(r.popupEl=n.first),Ji(n=Qi())&&(r.tooltip=n.first)}},standalone:!0,features:[vt,bt],decls:7,vars:0,consts:[["popup",""],["tooltip",""],[1,"panel","panel-default","map-popup",2,"visibility","hidden"],["ng-bind-html","model.tooltip.content | sanitize"],[1,"arrow_box"],[1,"tooltip",2,"display","none"]],template:function(i,r){i&1&&(Lt(0,"div",2,0)(2,"div"),le(3,"div",3),kt(),le(4,"div",4),kt(),le(5,"div",5,1))},styles:['[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]{margin-top:24px;z-index:1000;position:absolute;border:solid 1px #000000;color:#000;background-color:#ffffe1;white-space:nowrap;font-family:Tahoma,sans-serif;font-size:13px;-moz-box-shadow:2px 2px 4px #7f7f7f;box-shadow:2px 2px 4px #7f7f7f;padding:2px 3px}.map-popup[_ngcontent-%COMP%]{transform:translateY(-100%) translate(-50%);z-index:1;position:absolute;background-color:var(--cl-widget-filter-bg);margin-bottom:0;border-color:#b0b0b0;padding:4px;-webkit-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);-moz-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);box-shadow:1px 1px 9px #32323280;color:var(--cl-widget-header-txt)}.map-popup[_ngcontent-%COMP%]:after{content:" ";display:block;width:0;height:0;border-style:solid;border-width:8px 4px 0 4px;bottom:-8px;left:calc(50% - 4px);position:absolute;border-color:var(--cl-widget-filter-bg) transparent transparent transparent}']});let o=t;return o})();var Le=qt(Jn()),Iu=qt(wu()),Ru=qt(Su()),ku=qt(Mu()),Ou=qt(Eu()),Fu=qt(Tu()),zu=qt(Au()),Nu=qt(Pu()),ju=qt(Du());(0,Ru.default)(Le.default);(0,ju.default)(Le.default);(0,Iu.default)(Le.default);(0,ku.default)(Le.default);(0,Ou.default)(Le.default);(0,Fu.default)(Le.default);(0,zu.default)(Le.default);(0,Nu.default)(Le.default);var Ir=20;var Lr={treemap:{showLines:!1,showText:!1},pie:{showLines:!1}},Bt=(()=>{let t=class t extends ye{constructor(){super(...arguments),this.widgetData=null,this.seriesTypes=[],this.firstRun=!0,this.baseSeriesType="bar",this.sbs=$t(zr),this.wts=$t(Lu),this.zone=$t(lh),this.axisLabelListeners=[],this.seriesVisibility=[]}ngOnInit(){super.ngOnInit(),this.widget.isChart=!0,this.setupHeaderButtons(),this.override?.seriesTypes&&(this.seriesTypes=this.override?.seriesTypes.split(",")),this.subPrint=this.bs.subscribe("print:"+this.widget.name,()=>{if(this.chart){let e=new Blob([this.chart.getSVG()],{type:"image/svg+xml"}),i=window.open(URL.createObjectURL(e),"_blank");i&&(i.onload=()=>{let r=i?.document.querySelector("svg");r?.setAttribute("width","100%"),r?.setAttribute("height","100%"),r&&(r.style.height="auto"),i?.print()},i.onafterprint=()=>{i?.close()})}}),this.setupChart(),this.widget.inline&&this.setupInline(),this.subColorsConfig=this.bs.subscribe("charts:update-colors",e=>this.updateColors(e))}ngAfterViewInit(){this.createChart(),setTimeout(()=>{this.chart?.reflow()})}createChart(){this.chartConfig.chart&&(this.chartConfig.chart.renderTo=this.el.nativeElement),this.chartConfig?.chart?.type==="map"?this.chart=Le.default.mapChart(this.chartConfig):this.widget.type.toLowerCase()==="timechart"?this.chart=Le.default.stockChart(this.chartConfig):this.chart=Le.default.chart(this.chartConfig)}clearSeries(e){let i=e||this.chart;if(i)for(;i.series.length>0;)i.series[0].remove(!1)}onHeaderButton(e){switch(super.onHeaderButton(e),e.name){case"isLegend":this.toggleLegend(e.state);break;case"showValues":{(this.chartConfig?.plotOptions?.series?.dataLabels).enabled=e.state,this.chartConfig.plotOptions?.pie?.dataLabels&&(this.chartConfig.plotOptions.pie.dataLabels.enabled=e.state),this.updateChart(),this.chart?.legend.update({enabled:this.widget.isLegend},!0);break}case"showZero":this.showZeroOnAxis();break;case"isTop":this.limitSeriesAndData();break;case"chartConfig":this.showChartConfig();break}}updateChart(e=!1,i=!1){this.chart&&this.chart.update(this.chartConfig,e,!1,i)}hasOption(e){let i=this.ss.getWidgetsSettings(this.widget.dashboard);return!(!i[this.widget.name]||i[this.widget.name][e]===void 0||i[this.widget.name][e]===!1)}setYAxisMinToZero(){if(this.chartConfig.yAxis instanceof Array)for(let e=0;e<this.chartConfig.yAxis.length;e++)this.chartConfig.yAxis[e].prevMin=this.chartConfig.yAxis[e].min,this.chartConfig.yAxis[e].min=0;else this.chartConfig.yAxis.prevMin=this.chartConfig.yAxis.min,this.chartConfig.yAxis.min=0;this.updateChart(!0)}showZeroOnAxis(){if(this.widget.showZero)this.setYAxisMinToZero();else{if(this.chartConfig.yAxis instanceof Array)for(let e=0;e<this.chartConfig.yAxis.length;e++){let i=this.chartConfig.yAxis[e].prevMin;this.chartConfig.yAxis[e].min=i,this.chart&&(this.chart.yAxis[e].min=i)}else{let e=this.chartConfig.yAxis.prevMin;this.chartConfig.yAxis.min=e,this.chart&&(this.chart.yAxis.min=e)}this.updateChart(!0)}}limitSeriesAndData(){this.requestData()}toggleLegend(e){this.chart&&this.chart.legend.update({enabled:e})}initFormatForSeries(e){let i=n=>{if(!n||!n.Info)return"";let l="";for(let a=0;a<n.Info.numericGroupSize;a++)l+="#";return l+=",#.##",l},r=this.chartConfig.series;if(r)for(let n=0;n<r.length;n++)r[n]&&(!r[n]).format&&(r[n].format=i(e))}retrieveData2(e){this.hideLoading(),this.addSeries({data:[{y:1,name:"test"}]}),this.updateChart(!0)}retrieveData(e){if(this.hideLoading(),this.seriesVisibility=this.chart?.series?.map(i=>i.visible)??[],this.clearSeries(),this.widgetData=JSON.parse(JSON.stringify(e)),e.Error){this.showError(e.Error);return}if(e){let i=this.getMinValue(e.Data);if(i>0&&i<=10&&(this.chartConfig.yAxis.min=-10),!e.Cols)return;if(e.Cols[0].tuples.length===0&&e.Data.length!==0&&e.Cols[0].tuples.push({caption:this.i18n.get("count")}),this.parseData(e),this.widget.showZero&&this.setYAxisMinToZero(),this.firstRun){let r=this.ss.getWidgetsSettings(this.widget.dashboard);if(this.us.isEmbedded()){let n=this.route.snapshot.queryParamMap.get("hiddenSeries"),l=[];n&&(l=n.split(",")),l.forEach(a=>{this.chartConfig?.series?.[a]&&(this.chartConfig.series[a].visible=!1)})}else if(r[this.widget.name]&&r[this.widget.name].series)for(let n=0;n<(this.chartConfig?.series?.length||0);n++)r[this.widget.name].series[n]===!1&&this.chartConfig.series&&(this.chartConfig.series[n].visible=!1);this.firstRun=!1,this.onResize()}}(this.chart?.series?.length??0)<2&&!this.hasOption("isLegend")&&(this.widget.isLegend=!1,this.parent?.header?.cd?.detectChanges(),this.chart?.legend.update({enabled:!1}))}buildAxisTitles(e){if(this.chartConfig?.chart?.type!=="column")return;let i=!1,r=!1,n=this.getMDX(),l=n.indexOf("ON"),a=-1;l!==-1&&(a=n.indexOf("FROM",l),a!==-1&&(r=n.substring(l,a).toLowerCase().lastIndexOf(".members")!==-1)),a!==-1&&(l=a,a=n.indexOf("FROM",l),i=n.substring(l,a).toLowerCase().lastIndexOf(".members")!==-1),this.chartConfig.yAxis&&e.Cols[0]&&e.Cols[0].tuples&&e.Cols[0].tuples.length&&(this.chartConfig.yAxis.title={text:e.Cols[0].tuples.map(h=>h.caption||"").join(" & ")}),this.chartConfig.xAxis&&e.Cols[1]&&e.Cols[1].tuples&&e.Cols[1].tuples.length&&(this.chartConfig.xAxis.title={text:e.Cols[1].tuples.map(h=>h.caption||"").join(" & ")})}addSeries(e,i,r,n=!1){let l=i||this.chart;if(!l)return;let a=(l.options||this.chartConfig).series?.length??-1;if(e&&e.data&&e.data.length!==0){let u=!0,p=!1;for(let b=0;b<e.data.length;b++){let v=e.data[b];if(typeof v=="object"&&!(v instanceof Array)&&(p=!0,v.y===""&&(v.y=0),v.y!==0&&v.y!==""&&v.y!==null&&v.y!==void 0)){u=!1;break}}u&&p&&(e.showInLegend=!1)}let h=this.tc?.hcColors||Le.default.getOptions().colors||["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"];if(e.color=h[l.series.length%h.length||0],this.widget?.seriesTypes){let u=this.widget?.seriesTypes[a]||this.baseSeriesType;u&&(e.type=u)}if(this.override?.markerShapes){let u=this.override?.markerShapes.split(",")[a];if(!u)return;switch(u){case"up":u="triangle";break;case"down":u="triangle-down";break}e.marker={symbol:u}}let c=(r||this.chart||this.chartConfig)?.series?.length;if(this.seriesTypes&&c!==void 0&&this.seriesTypes[c]&&(e.type=this.seriesTypes[c]),e.visible=!0,this.widgetsSettings&&this.widgetsSettings[this.widget.name]&&this.widgetsSettings[this.widget.name].series&&this.widgetsSettings[this.widget.name].series?.[e.name||""]===!1&&(e.visible=!1),this.widget.type.toLowerCase()==="combochart"&&(e.type||(e.type=c===0?"bar":"line"),this.override)){let u=[];this.override.seriesYAxes&&(u=this.override.seriesYAxes.split(",").map(b=>parseInt(b,10)));let p=(this.chart||this.chartConfig).series?.length||-1;e.yAxis=u[p]||0}e.showInLegend=!0,l.addSeries(e,n,!1);let g=this.seriesVisibility[l.series.length-1];g!==void 0&&(l.series[l.series.length-1].visible=g)}enableStacking(){let e={plotOptions:{series:{stacking:"normal"}}};this.us.mergeRecursive(this.chartConfig,e)}getMinValue(e){let i=1/0;for(let r=0;r<e.length;r++)e[r]<i&&(i=e[r]);return i}limitData(e){let i,r,n,a=(this.widget.controls||[]).filter(c=>c.action==="setRowCount")[0],h=a&&parseInt(a.value.toString())||Ir;if(this.chartConfig?.plotOptions?.series?.stacking==="normal"||!this.chartConfig?.plotOptions?.series?.stacking){let c=e.Cols[1].tuples,g=e.Cols[0].tuples;if(this.widget.isTop)if(g.length===1){let u=!0;for(;u;){u=!1;let p;for(p=0;p<e.Data.length-1;p++)if(e.Data[p]<e.Data[p+1]){u=!0;let b=e.Data[p];e.Data[p]=e.Data[p+1],e.Data[p+1]=b,b=e.Cols[1].tuples[p],e.Cols[1].tuples[p]=e.Cols[1].tuples[p+1],e.Cols[1].tuples[p+1]=b}}e.Cols[1].tuples.splice(h,e.Cols[1].tuples.length-h)}else{e.Cols[1].tuples.splice(h,e.Cols[1].tuples.length-h);return}}}parseData(e){return Yt(this,null,function*(){let i=e;this.route.snapshot.queryParamMap.get("autodrill")==="1"&&(yield this.checkForAutoDrill(e))||(i.Cols[1]||(i.Cols[1]={tuples:[]}),i.Cols[1].tuples.length===0&&i.Cols[1].tuples.push({caption:this.i18n.get("count")}),this.limitData(e),e&&e.Info&&(this.dataInfo=e.Info),this.sortTuplesBasedOnLabels(i),this.setupAxisMinMax(i.Data),this.buildSeries(i),this.updateChart(!0))})}onResize(){super.onResize(),this.chart&&this.chart.reflow()}setElColor(e,i=""){if(!e)return;e.setAttribute("fill",i),e.setAttribute("stroke",i);let r=e.children;r&&Array.from(r).forEach(n=>this.setElColor(n,i))}updateColors(e){this.zone.runOutsideAngular(()=>{let i=this.chart;if(!i)return;let r=i.options?.chart?.type;if(e.hcColors)if(r==="treemap"||r==="pie"){let l=i.options.plotOptions?.[r];l&&(l.colors=e.hcColors);for(let a=0;a<i.series[0]?.points.length;a++){let h=i.series[0].points[a],c=e.hcColors[(h.colorIndex||0)%e.hcColors.length];h.color=c,h.graphic?.element.setAttribute("fill",c),this.setElColor(h?.legendItem?.symbol?.element,c)}}else for(let l=0;l<i.series.length;l++){let a=i.series[l],h=e.hcColors[l%e.hcColors.length],c=a.graph?.element;c&&c.setAttribute("stroke",h),this.setElColor(a?.area?.element,h),this.setElColor(a?.bar?.element,h),this.setElColor(a?.markerGroup?.element,h),this.setElColor(a?.legendItem?.symbol?.element,h),this.setElColor(a?.legendItem?.line?.element,h),this.setElColor(a?.legendItem?.group?.element,h),a.data.forEach(u=>{u.color=h,this.setElColor(u.graphic?.element,h)});let g=i.legend.allItems[l];g&&g.legendSymbol&&[g.legendSymbol.element,g.legendLine.element].forEach(u=>{u&&(u.setAttribute("fill",h),u.setAttribute("stroke",h))}),i.series[l].color=h}if(e.hcBorderColor&&Lr[r||""]?.showBorder!==!1)for(let l=0;l<i?.series.length;l++)(i?.series[l]).data.forEach(h=>{let c=h.graphic?.element;c&&c.setAttribute("stroke",e.hcBorderColor)});if(e.hcBackground&&Lr[r||""]?.showBackground!==!1){let l=i.chartBackground.element;l.setAttribute("fill",e.hcBackground),l.setAttribute("stroke",e.hcBackground),i.options.chart&&(i.options.chart.backgroundColor=e.hcBackground)}if(e.hcLineColor&&Lr[r||""]?.showLines!==!1){let l=e.hcLineColor;i.yAxis.forEach(a=>{i.yAxis[0].options.minorGridLineColor=l,a.gridGroup.element.setAttribute("stroke",l),a.gridGroup.element.childNodes.forEach(h=>{h.setAttribute("stroke",l)})}),i?.xAxis.forEach(a=>{a.axisGroup.element.setAttribute("stroke",l),a.axisGroup.element.childNodes.forEach(h=>{h.setAttribute("stroke",l)})})}let n=e.hcTextColor;if(n&&Lr[r||""]?.showText!==!1){let l=a=>{if(a.labelGroup){a.labelGroup.element.setAttribute("fill",n);for(let h=0;h<a.labelGroup.element.children.length;h++){let c=a.labelGroup.element.children[h];c.setAttribute("fill",n),c.setAttribute("color",n),c.style.color=n,c.style.fill=n}}};i?.xAxis.forEach(l),i?.yAxis.forEach(l),i?.options?.legend?.itemStyle&&(i.options.legend.itemStyle.color=n),i?.legend.allItems.forEach(a=>{a.options.color=n,a.legendItem&&(a.legendItem?.group?.element?.setAttribute("color",n),a.legendItem?.group?.element?.setAttribute("fill",n),a.legendItem?.label?.element?.setAttribute("color",n),a.legendItem?.label?.element?.setAttribute("fill",n))}),i?.series.forEach(a=>a.data.forEach(h=>{let c=h.dataLabel?.element?.children[0]?.style;c&&(c.color=n,c.fill=n)}))}})}fixData(e){for(let i=0;i<e.length;i++)!e[i].y&&e[i].y!==0&&(e[i].y=null),(e[i].y===""||e[i].y===void 0)&&(e[i].y=null)}ngOnDestroy(){this.subPrint?.unsubscribe(),this.removeAxisListeners(),super.ngOnDestroy()}onLegendItemHover(e){}onLegendItemOut(e){}buildAxis(e,i=0){let r=[];return e.tuples?.forEach((n,l)=>{i&&l>i-1||((n.children?.length??0)>1?n.children?.forEach(a=>{a.caption=n.caption+"/"+a.caption,r.push(a)}):r.push(n))}),r}buildSeries(e){this.chartConfig.series=[];let i=this.widget.controls.find(a=>a.action.toLowerCase()==="setcolumncount"),r=this.buildAxis(e.Cols[1],i?.value||0),n=this.buildAxis(e.Cols[0]);n.forEach((a,h)=>{let c=[];r.forEach((g,u)=>{c.push({y:+e.Data[u*n.length+h],drilldown:!0,cube:e.Info?.cubeName||"",path:g.path,name:g.caption,title:g.title})}),this.fixData(c),this.addSeries({data:c,name:a.caption,format:a.format,path:a.path})});let l=this.chartConfig.xAxis;l.categories=r.map(a=>a.caption)}removeAxisListeners(){this.axisLabelListeners.forEach(e=>{e.element.removeEventListener(e.event,e.func)})}saveSeriesVisiblilityState(e,i){let r=this.ss.getWidgetsSettings(this.widget.dashboard);r[this.widget.name]||(r[this.widget.name]={});let n=r[this.widget.name];n.series||(n.series={}),n.series[e]=i,this.ss.setWidgetsSettings(r,this.widget.dashboard)}setupChart(){let e=this,i=this.wts.getDesc(this.widget.type);function r(){let n=this.value,l=e.override,a=l?.valueLabelFormat,h=e.baseType;return(l?.yAxisList[0]?.axisType==="percent"||l?.xAxis.axisType==="percent"&&(h==="barChart"||h==="barChartStacked"))&&(n=e.formatNumber(n,"#%")),n}if(this.chartConfig={accessibility:{enabled:!1},drilldown:{activeAxisLabelStyle:{color:this.tc?.hcTextColor||void 0},activeDataLabelStyle:{color:this.tc?.hcTextColor||void 0}},legend:xe({enabled:this.widget.isLegend,align:"left"},this.tc?.hcTextColor?{itemStyle:{color:this.tc?.hcTextColor}}:{}),navigation:{buttonOptions:{align:"center"}},chart:{type:i?.chart||"column",backgroundColor:this.tc?.hcBackground||"transparent",events:{redraw:n=>{e.removeAxisListeners(),n.target?.series?.forEach(l=>{e.chartConfig.chart?.type==="pie"&&e.chart?.legend.allItems.forEach(a=>{let h=u=>{this.onLegendItemHover({series:a.series,index:a.index})},c=u=>{this.onLegendItemOut({series:a.series,index:a.index})},g=a.legendItem?.group.element;g&&(g.addEventListener("mouseover",h),e.axisLabelListeners.push({event:"mouseover",element:g,func:h}),g.addEventListener("mouseout",c),e.axisLabelListeners.push({event:"out",element:g,func:c}))}),l.data.forEach((a,h)=>{let c="contextmenu",g=a.graphic?.element;if(!g)return;let u=p=>{p.preventDefault(),p.stopImmediatePropagation();let b=e._currentData?.Cols[1]?.tuples;if(!b||!b[h])return;let v=l.userOptions.path,x=b[h].path;v&&(x=v),this.bs.broadcast("contextmenu",{widget:this.widget,event:p,ctxData:{canDrillthrough:this.canDoDrillthrough,canDrill:!0,drillPath:x,drillTitle:b[h].caption||b[h].title}})};a.graphic?.element?.addEventListener(c,u),this.axisLabelListeners.push({event:c,element:g,func:u})})}),e.chartConfig?.chart?.type==="pie"?e.chart?.legend?.allItems.forEach(l=>{let a=l.dataLabel?.element;if(!a)return;let h=()=>{e.showLoading(),e.doDrillOnly(l.options.path,l.name.toString(),l.name.toString()).finally(()=>{e.hideLoading()})};a.addEventListener("click",h),this.axisLabelListeners.push({event:"click",element:a,func:h})}):e.chart?.xAxis[0]?.labelGroup?.element?.childNodes?.forEach((l,a)=>{let h=()=>{let c=e._currentData?.Cols[1]?.tuples,g=e._currentData?.Cols[1]?.tuples[0]?.children;g?.length&&(a=Math.floor(a/g?.length)),!(!c||!c[a])&&(e.showLoading(),e.doDrillOnly(c[a].path,c[a].caption||c[a].title,c[a].caption||c[a].title).finally(()=>{e.hideLoading()}))};l.addEventListener("click",h),this.axisLabelListeners.push({event:"click",element:l,func:h})})}}},credits:{enabled:!1},tooltip:{formatter(){let n=e.override,l=this,a=n?.valueLabelFormat||l.series.options.format,h=l.y;h=e.formatNumber(h,a);let c=l.point.title;c===l.point.name&&(c="");let g=(l.point.name||l.x||"")+"<br>"+(c?c+"<br>":"")+l.series.name+": <b>"+h+"</b><br>";return l.point.percentage&&(g+=e.formatNumber(this.point.percentage,e.getDataPropByDataValue(this.series?.userOptions?.name||"")?.format||"#.##")+"%"),g}},exporting:{enabled:!1},plotOptions:{column:{borderColor:this.tc?.hcBorderColor||void 0},bar:{borderColor:this.tc?.hcBorderColor||void 0},pie:{borderColor:this.tc?.hcBorderColor,colors:this.tc?.hcColors},treemap:{colors:this.tc?.hcColors},series:{opacity:this.tc?.hcOpacity,cursor:"pointer",point:{events:{click(n){if(e.drillFilterWidgets?.length){e.doDrillFilter(n.point.path,e.drills),e.parent?.header?.cd.detectChanges();return}if(!n.point)return;if(Ae.mobile&&e._selectedPoint!==n.point){e._selectedPoint=n.point;return}let l=n.point.series.userOptions.path,a=[n.point.path];l&&a.push(l),e.showLoading(),e.doDrillthrough(a,n.point.name,n.point.category).finally(()=>{e.hideLoading()})}}},dataLabels:{color:this.tc?.hcTextColor||void 0,enabled:this.widget.showValues===!0,formatter(){let n=e.override,l=this,a=n?.valueLabelFormat||l.series.options.format,h=l.y;return h=e.formatNumber(h,a),h}},events:{hide:n=>this.saveSeriesVisiblilityState(n.target.name,n.target.visible),show:n=>this.saveSeriesVisiblilityState(n.target.name,n.target.visible)}}},yAxis:{events:{},title:{text:""},labels:{style:{color:this.tc?.hcTextColor||void 0,textOverflow:"none"},formatter:r},minorGridLineColor:this.tc?.hcLineColor||"#e6e6e6",gridLineColor:this.tc?.hcLineColor||"#e6e6e6",lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor},xAxis:{events:{},title:{text:""},labels:{style:{color:this.tc?.hcTextColor||void 0,textOverflow:"none",cursor:"pointer"}},minorGridLineColor:this.tc?.hcLineColor||"#e6e6e6",gridLineColor:this.tc?.hcLineColor||"#e6e6e6",lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor},series:[],title:{text:""}},this.setup3DChart(),this.chartConfig.navigator={outlineColor:this.tc?.hcLineColor,xAxis:{gridLineColor:this.tc?.hcLineColor},yAxis:{gridLineColor:this.tc?.hcLineColor}},this.widget.type.toLowerCase()==="combochart"&&(this.chartConfig.yAxis=[{events:{},gridLineColor:this.tc?.hcLineColor,lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor,labels:{style:{color:this.tc?.hcTextColor||void 0}}},{events:{},opposite:!0,gridLineColor:this.tc?.hcLineColor,lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor,labels:{style:{color:this.tc?.hcTextColor||void 0}}}],this.widget.overrides&&this.widget.overrides[0]&&this.widget.overrides[0]._type==="comboChart")){let l=this.widget.overrides.find(a=>a._type.toLowerCase()==="combochart")?.yAxisList;if(l&&l.length)for(let a=0;a<l.length;a++)l[a].title&&(this.chartConfig.yAxis[a].title||(this.chartConfig.yAxis[a].title={}),this.chartConfig.yAxis[a].title.text=l[a].title),l[a].axisType&&(this.chartConfig.yAxis[a].type=l[a].axisType,l[a].axisType==="percent"&&(this.chartConfig.yAxis[a].min=0,this.chartConfig.yAxis[a].max=1,this.chartConfig.yAxis[a].endOnTick=!1,this.chartConfig.yAxis[a].labels={formatter(){return(this.value*100).toFixed(0)+"%"}})),l[a].maxValue!==void 0&&(this.chartConfig.yAxis[a].max=l[a].maxValue),l[a].minValue!==void 0&&(this.chartConfig.yAxis[a].min=l[a].minValue)}}setupHeaderButtons(){this.widget.isBtnZero===void 0&&(this.widget.isBtnZero=!1),this.widget.isBtnValues===void 0&&(this.widget.isBtnValues=!1),this.widget.isLegend===void 0&&(this.widget.isLegend=!0)}setupInline(){if(this.chartConfig.chart&&(this.chartConfig.chart.backgroundColor=""),this.chartConfig.plotOptions={series:{enableMouseTracking:!1}},this.chartConfig.legend={enabled:!1},this.widget.tile){let e={xAxis:{events:{},labels:{style:{color:window.getComputedStyle(document.querySelector("."+Ae.const.fontColors[this.widget.tile.fontColor])).getPropertyValue("color")}}},yAxis:{events:{},labels:{style:{color:window.getComputedStyle(document.querySelector("."+Ae.const.fontColors[this.widget.tile.fontColor])).getPropertyValue("color")}}}};this.us.mergeRecursive(this.chartConfig,e)}}showChartConfig(){let e=this.widget.name,i=this.ss.getWidgetsSettings(this.widget.dashboard)||{},r=()=>{this.ss.setWidgetsSettings(i,this.widget.dashboard)};i[e]||(i[e]={}),i[e].themeColors||(i[e].themeColors={});let n=Lr[this.chart?.options?.chart?.type||""]||{};this.sbs.showComponent({component:import("./chunk-XKBPBU2N.js"),inputs:{widgetSettings:i[e],appearance:n,onSave:r,onUpdate:l=>this.updateColors(l),chart:this.chart}})}setupAxisMinMax(e){let i=this.override,r=this.chartConfig.yAxis,n=this.chartConfig.xAxis,l=i?.yAxisList[0];e.some(a=>a<0)||(r.min=0),(this.baseType==="barChart"||this.baseType==="barChartStacked")&&(l=i?.xAxis),l?.minValue!==void 0&&(r.min=l.minValue),l?.maxValue!==void 0&&(r.max=l.maxValue)}removeUndefinedColors(e){let i=(r,n)=>{r[n]===void 0&&delete r[n]};i(e.plotOptions?.column,"borderColor"),i(e.plotOptions?.bar,"borderColor"),i(e.plotOptions?.pie,"borderColor"),i(e.plotOptions?.treemap,"borderColor"),i(e.plotOptions?.treemap,"borderColor"),i(e.drilldown?.activeAxisLabelStyle,"color"),i(e.drilldown?.activeDataLabelStyle,"color"),i(e.legend?.itemStyle,"color"),i(e.chart,"backgroundColor"),i(e.plotOptions?.series,"opacity"),i(e.plotOptions?.series?.dataLabels,"color"),i(e.yAxis?.labels?.style,"color"),i(e.yAxis,"minorGridLineColor"),i(e.yAxis,"gridLineColor"),i(e.yAxis,"lineColor"),i(e.yAxis,"tickColor"),i(e.xAxis?.labels?.style,"color"),i(e.xAxis,"minorGridLineColor"),i(e.xAxis,"gridLineColor"),i(e.xAxis,"lineColor"),i(e.xAxis,"tickColor"),this.removeEmptyObjects(e)}removeEmptyObjects(e){let i=!0;for(;i;)i=!1,Object.keys(e).forEach(r=>{typeof e[r]=="object"&&!Array.isArray(e[r])&&(Object.keys(e[r]).length===0?(i=!0,delete e[r]):this.removeEmptyObjects(e[r]))})}setup3DChart(){this.widget?.type.toLowerCase().includes("3d")&&(this.chartConfig.chart&&(this.chartConfig.chart.options3d={enabled:!0,alpha:0,beta:8,depth:50,viewDistance:8}),this.chartConfig.plotOptions?.column&&(this.chartConfig.plotOptions.column.depth=25),this.chartConfig.plotOptions?.bar&&(this.chartConfig.plotOptions.bar.depth=25),this.chartConfig.plotOptions?.pie&&(this.chartConfig.plotOptions.pie.depth=25))}sortTuplesArray(e,i){let r=new Map;i.forEach((n,l)=>{r.set(n,l)}),e.forEach((n,l)=>{n.originalIndex=l}),e.sort((n,l)=>{let a=r.get(n.dimension),h=r.get(l.dimension);return a!==void 0&&h!==void 0?a-h:a!==void 0?-1:h!==void 0?1:0})}sortTuplesBasedOnLabels(e){if(!e.Cols[0].tuples?.length)return;let i=this.widget.overrides?.find(n=>n._type==="chartLegend");if(!i)return;let r=i.legendLabels?.split(",");r&&this.sortTuplesArray(e.Cols[0].tuples,r)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["ng-component"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Hn=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0,this.widget.type.toLowerCase()==="columnchartstacked"&&this.enableStacking()}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-column-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Zn=(()=>{let t=class t extends ye{constructor(){super(...arguments),this.isSpinner=!1}ngOnInit(){this.widget.title=this.i18n.get("filters"),this.widget.toolbar=!0,this.widget.viewSize=this.getViewSize()}requestData(){}onHeaderButton(e){switch(e.name){case"setDefault":this.setFiltersToDefaults();break;case"byRows":this.setViewSize(0);break;case"by2columns":this.setViewSize(1);break;case"by3columns":this.setViewSize(2);break;case"by4columns":this.setViewSize(3);break;case"by5columns":this.setViewSize(4);break;case"by6columns":this.setViewSize(5);break}}setFiltersToDefaults(){for(let e=0;e<this.model.filters.length;e++){let i=this.fs.getFilter(e);i&&(i.isInterval=!1,i.isExclude=i.defaultExclude,i.fromIdx=-1,i.toIdx=-1,i.values.forEach(function(r){r.checked=r.default===!0}),this.fs.applyFilter(i,!0))}this.bs.broadcast("filterAll")}setViewSize(e){this.widget.viewSize=e,this.saveViewSize()}getViewSize(){let e=this.ss.getWidgetsSettings(this.widget.dashboard),i=this.widget.name;return!e[i]||e[i].viewSize===void 0?0:e[i].viewSize}saveViewSize(){let e=this.ss.getWidgetsSettings(this.widget.dashboard),i=this.widget.name;e[i]||(e[i]={}),e[i].viewSize=this.widget.viewSize,this.ss.setWidgetsSettings(e,this.widget.dashboard)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-empty-widget"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Bu=(()=>{let t=class t extends Bt{constructor(){super(...arguments),this.isPercent=!0,this.totalSum=0,this.prevData=null,this.baseSeriesType="treemap"}ngOnInit(){super.ngOnInit(),this.totalSum=0,this.widget.overrides&&this.widget.overrides[0]&&this.widget.overrides[0].showPercentage===0&&(this.isPercent=!1);let e=this,i={levels:[{level:1,layoutAlgorithm:"sliceAndDice",dataLabels:{enabled:!0,align:"left",verticalAlign:"top",style:{fontSize:"15px",fontWeight:"bold"}}}],legend:{enabled:this.widget.isLegend},plotOptions:{series:{animation:!1,colorByPoint:!0,legendType:"point"},treemap:{dataLabels:{enabled:!0,formatter(){if(e.totalSum){let r=this.point.value/e.totalSum*100;return r=e.formatNumber(r,e.getDataPropByDataValue(this.series?.userOptions?.dimension)?.format||"#.##"),`${this.point.caption}<br>${r}%`}else return`${this.point.caption}`}}}},tooltip:{formatter(){let r=this.series.userOptions.caption,n=this.series.userOptions.format,l=this.point.value;return l=e.formatNumber(l,n),this.point.caption+"<br>"+r+": <b>"+l+"</b>"}}};this.us.mergeRecursive(this.chartConfig,i),delete this.chartConfig.plotOptions?.series?.dataLabels}parseData(e){return Yt(this,null,function*(){this.prevData=e,e&&e.Info&&(this.dataInfo=e.Info);let i=[];if(e.Cols[0].tuples.length){if(e.Cols[0].tuples[0].children)console.error("Data converter for this treemap chart not implemented!");else{if(yield this.checkForAutoDrill(e))return;i=[];let r=0;for(let a=0;a<e.Data.length;a++)r+=parseFloat(e.Data[a]);for(let a=0;a<e.Cols[1].tuples.length;a++)i.push({caption:e.Cols[1].tuples[a].caption,id:e.Cols[1].tuples[a].caption+"<br>"+parseFloat(parseFloat(e.Data[a])/r*100).toFixed(2).toString()+"%",value:parseFloat(e.Data[a]),y:parseFloat(e.Data[a]),path:e.Cols[1].tuples[a].path,name:e.Cols[1].tuples[a].caption});let n="",l="";e.Cols[0].tuples[0]&&(n=e.Cols[0].tuples[0].caption,l=e.Cols[0].tuples[0].format),this.totalSum=e.Data.map(a=>parseFloat(a)||0).reduce((a,h)=>a+h,0),this.addSeries({data:i,name:"",layoutAlgorithm:"squarified",caption:n,dimension:e.Cols[0].tuples[0].dimension,format:l,dataLabels:{enabled:!0}},void 0,void 0,!0)}this.toggleLegend(this.widget.isLegend)}})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-tree-map"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Kn=qt(ys());var Gu=(()=>{let t=class t extends Bt{constructor(){super(...arguments),this.thirdTitle=""}ngOnInit(){super.ngOnInit();let e=this,i={plotOptions:{bubble:{minSize:"5%",maxSize:"35%",sizeBy:"width"},series:{cursor:null,point:{events:{click:null}}}},chart:{zoomType:"xy"},xAxis:{tickWidth:10,title:{enabled:!0}},tooltip:{formatter:function(){let r=this.series.userOptions.format1,n=this.series.userOptions.format2,l=this.series.userOptions.format3,a=this.x,h=this.y,c=this.point.z;r&&(a=(0,Kn.default)(a).format(r)),n&&(h=(0,Kn.default)(h).format(n)),l&&(c=(0,Kn.default)(c).format(l));let g=e.thirdTitle||"radius";return this.series.name+"<br/>"+e.chartConfig.xAxis.title.text+":<b>"+a+"</b><br/>"+e.chartConfig.yAxis.title.text+":<b>"+h+"</b>"+(c?"<br>"+g+": <b>"+c.toString()+"</b>":"")}}};this.us.mergeRecursive(this.chartConfig,i)}getSeriesNames(e){let i={};if(e.Cols[0].tuples.length==4)for(let r=3;r<e.Data.length;r+=4)i[e.Data[r]]=!0;return Object.keys(i)}mapBySeries(e,i){let r={};if(e.Cols[0].tuples.length==4)for(let n in i)i.hasOwnProperty(n)&&(r[i[n]]=[]);else{let n="default";e.Cols[1]&&e.Cols[1].tuples[0]&&(n=e.Cols[1].tuples[0].caption),r[n]=[]}return r}parseData(e){return Yt(this,null,function*(){let i=this.getSeriesNames(e);this.clearSeries(),e.Cols[0].tuples.length>=1&&(this.chartConfig.xAxis.title.text=e.Cols[0].tuples[0].caption),e.Cols[0].tuples.length>=2&&(this.chartConfig.yAxis.title.text=e.Cols[0].tuples[1].caption),e.Cols[0].tuples.length>=3&&(this.thirdTitle=e.Cols[0].tuples[2].caption);let r=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this bubble chart not implemented!");else{let n=e.Cols[0].tuples.length,l="",a="",h="";e.Cols[0].tuples[0]&&(l=e.Cols[0].tuples[0].format),e.Cols[0].tuples[1]&&(a=e.Cols[0].tuples[1].format),e.Cols[0].tuples[2]&&(h=e.Cols[0].tuples[2].format);let c={},g=!1,u;if(this.hasOption("isTop")){g=!0;let v=(this.widget.controls||[]).filter(function(x){return x.action==="setRowCount"})[0];u=v?v.value||Ir:Ir}let p=g?u:e.Data.length;p>e.Data.length&&(p=e.Data.length);for(let b=0;b<p;b+=n){let v=e.Cols[1].tuples[Math.floor(b/n)].caption;c[v]||(c[v]=[]);let x={x:e.Data[b],y:e.Data[b+1],z:e.Data[b+2]};c[v].push(x)}for(let b in c)this.addSeries({data:c[b],name:b,format1:l,format2:a,format3:h})}this.updateChart(!0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-bubble-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var qn=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={};this.widget.type.toLowerCase()!=="combochart"&&(e={plotOptions:{series:{lineWidth:3,marker:{enabled:!1}}}}),this.widget.type.toLowerCase()==="linechartmarkers"&&(e={series:{marker:{enabled:!0}}}),this.us.mergeRecursive(this.chartConfig,e)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-line-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Kl=qt(ys());var Xu=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit();let e={series:{fillColor:"#dddddF"},plotOptions:{boxplot:{fillColor:"#fafafF",whiskerLength:0,colorByPoint:!0,lineWidth:3,stemWidth:0}},tooltip:{formatter:function(){let i=this.series.userOptions.caption1||"Minimum",r=this.series.userOptions.caption2||"Maximum",n=this.series.userOptions.format1,l=this.series.userOptions.format2,a=this.point.low,h=this.point.high;return n&&(a=(0,Kl.default)(a).format(n)),l&&(h=(0,Kl.default)(h).format(l)),this.key+"<br/>"+r+":<b>"+h+"</b><br/>"+i+":<b>"+a+"</b>"}}};this.us.mergeRecursive(this.chartConfig,e)}parseData(e){return Yt(this,null,function*(){let i=this.chartConfig.xAxis;i.categories=[];for(let n=0;n<e.Cols[1].tuples.length;n++)i.categories.push(e.Cols[1].tuples[n].caption.toString());this.chartConfig.series=[];let r=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this hi-low chart not implemented!");else{for(let c=0;c<e.Cols[1].tuples.length;c++)r.push({q1:e.Data[c*2],q3:e.Data[c*2+1],low:e.Data[c*2],high:e.Data[c*2+1],cube:e.Info.cubeName,path:e.Cols[1].tuples[c].path});let n="",l="",a="",h="";e.Cols[0].tuples[0]&&(n=e.Cols[0].tuples[0].caption,a=e.Cols[0].tuples[0].format),e.Cols[0].tuples[1]&&(l=e.Cols[0].tuples[1].caption,h=e.Cols[0].tuples[1].format),this.addSeries({data:r,caption1:n,caption2:l,format1:a,format2:h})}this.updateChart(!0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-hi-low-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Wu=qt(ys()),Yu=qt(Jn());var mf=["charts"];function xf(o,t){o&1&&le(0,"div",null,0)}var ql=(()=>{let t=class t extends Bt{constructor(){super(...arguments),this.confs=[],this.charts=[]}ngOnInit(){super.ngOnInit();let e={title:{verticalAlign:"bottom",style:{fontFamily:_h}},tooltip:{enabled:!1},legend:{enabled:!1},chart:{plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1},plotOptions:{series:{dataLabels:{enabled:!0,formatter:function(){let i=this.point.y,r=this.series.userOptions.format||"#.##";return r&&(i=(0,Wu.default)(i).format(r.replace(",","."))),i}}}},pane:{startAngle:-150,endAngle:150,background:[{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#333"]]},borderWidth:0,outerRadius:"109%"},{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#333"],[1,"#FFF"]]},borderWidth:1,outerRadius:"107%"},{},{backgroundColor:"#DDD",borderWidth:0,outerRadius:"105%",innerRadius:"103%"}]}};this.chartConfig.yAxis={minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666"},this.chartConfig.chart?.type==="solidgauge"&&(e.pane={center:["50%","85%"],size:"140%",startAngle:-90,endAngle:90,background:[{backgroundColor:"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}]}),this.us.mergeRecursive(this.chartConfig,e)}ngAfterViewInit(){}createChart(){let e=this.chartsEl?.toArray().map(i=>i.nativeElement);this.charts=[],this.confs.forEach((i,r)=>{i.chart&&(i.chart.renderTo=e?.[r]),this.charts.push(Yu.default.chart(i))})}retrieveData(e){let i;if(this.hideLoading(),this.charts.forEach(r=>{for(;r.series.length>0;)r.series[0].remove()}),this.widgetData=JSON.parse(JSON.stringify(e)),e.Error){this.showError(e.Error);return}if(e){if(!e.Cols)return;e.Cols[0].tuples.length===0&&e.Data.length!==0&&e.Cols[0].tuples.push({caption:this.i18n.get("count")}),this.parseData(e)}}parseData(e){return Yt(this,null,function*(){if(this.confs.length===0){for(let i=0;i<e.Cols[0].tuples.length;i++){let r=e.Cols[0].tuples[i].caption,n=this.widget.dataProperties.find(a=>a.dataValue===e.Cols[0].tuples[i].dimension);n&&n.label&&n.label!=="$auto"&&(r=n.label),this.confs.push(this.us.mergeRecursive({},this.chartConfig));let l=this.confs[this.confs.length-1];l.title&&(l.title.text=r)}this.cd.markForCheck(),this.cd.detectChanges(),setTimeout(()=>{this.createChart(),this.parseData(e)});return}for(let i=0;i<e.Cols[0].tuples.length;i++){let r=e.Data[i];r||(r=0),this.charts[i]&&this.clearSeries(this.charts[i]);let n=this.confs[i].yAxis;if(parseFloat(r)<1)n.min=0,n.max=1;else if(parseInt(r,10)===0)n.min=0,n.max=10;else{r=parseInt(r,10);let c=r.toString().length;n.max=Math.pow(10,c),n.min=0}let l=this.widget.dataProperties[i];if(l){let c=parseFloat(l.rangeLower),g=parseFloat(l.rangeUpper);isNaN(c)||(n.min=c),isNaN(g)||(n.max=g);let u=parseFloat(l.thresholdLower),p=parseFloat(l.thresholdUpper);if(isNaN(u)&&(u=n.min||0),isNaN(p)&&(p=n.max||0),u<n.min&&(u=n.min),p>n.max&&(p=n.max),n.plotBands=[],u!==n.min&&n.plotBands.push({from:n.min,to:u,color:"rgba(255, 0, 0, 0.4)",zIndex:5}),p!==n.max&&n.plotBands.push({from:p,to:n.max,color:"rgba(255, 0, 0, 0.4)",zIndex:5}),l.targetValue){let b=parseFloat(l.targetValue);n.plotLines=[{value:b,color:"rgba(0, 180, 0, 0.4)",width:3,zIndex:5}]}}let a="";this.widget.properties&&this.widget.properties.format&&(a=this.widget.properties.format),e.Cols[0].tuples[i].format&&(a=e.Cols[0].tuples[i].format);let h=e.Cols[0].tuples[i].caption;l&&l.label&&l.label!=="$auto"&&(h=l.label),this.addSeries({data:[e.Data[i]||0],name:h,format:a},this.charts[i],this.confs[i]),this.charts[i]&&this.charts[i].update(this.confs[i])}})}onResize(){super.onResize(),this.charts.forEach(e=>e.reflow())}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-speedometer-chart"]],viewQuery:function(i,r){if(i&1&&$i(mf,5),i&2){let n;Ji(n=Qi())&&(r.chartsEl=n)}},standalone:!0,features:[vt,bt],decls:2,vars:0,consts:[["charts",""]],template:function(i,r){i&1&&oe(0,xf,2,0,"div",null,ne),i&2&&ae(r.confs)},styles:["[_nghost-%COMP%]{display:flex}div[_ngcontent-%COMP%]{flex:1 1 100%}"]});let o=t;return o})();var Vu=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={plotOptions:{series:{colorByPoint:!1},area:{stacking:"normal",marker:{enabled:!1}}}};this.us.mergeRecursive(this.chartConfig,e)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-area-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Uu=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={plotOptions:{series:{cursor:null,point:{events:{click:null}}},pie:{allowPointSelect:!1,dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.series.options.size}}}},tooltip:{formatter:function(){return this.key+": <b>"+this.y+"</b><br/>"}}};this.us.mergeRecursive(this.chartConfig,e)}parseData(e){return Yt(this,null,function*(){let i=[];this.clearSeries();let r=Math.max.apply(null,e.Data);for(let n=0;n<e.Cols[1].tuples.length;n++)i.push([e.Cols[1].tuples[n].caption,e.Data[n]]),this.addSeries({innerSize:"0%",size:Math.floor(e.Data[n]/r*100).toString()+"%",data:[[e.Cols[1].tuples[n].caption,e.Data[n]]],borderWidth:2});this.updateChart(!0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-area-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Rr=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit(),this.widget.isBtnValues=!0;let e={series:{allowPointSelect:!0,stickyTracking:!1}};this.chartConfig.plotOptions||(this.chartConfig.plotOptions={}),this.us.mergeRecursive(this.chartConfig.plotOptions,e),(this.widget.type==="donutChart"||this.widget.type==="donutChart3D")&&(e={plotOptions:{pie:{innerSize:"20%"}}},this.us.mergeRecursive(this.chartConfig,e)),(this.widget.type==="pieChart3D"||this.widget.type==="donutChart3D")&&(e={chart:{options3d:{enabled:!0,alpha:55,beta:0}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35}}},this.us.mergeRecursive(this.chartConfig,e));let i=this,r={plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,formatter:function(){let n=i.override,l=this,a=n?.valueLabelFormat||l.series.options.format,h=this.point.name,c=i.formatNumber(this.y,a);i.widget.showValues||(c=""),i.widget["btn.ShowAnnotations"]===!1&&(h="");let g=i.formatNumber(this.point.percentage,i.getDataPropByDataValue(this.series?.userOptions?.name)?.format||"#.##")+"%";return i.widget["btn.ShowPercents"]||(g=""),[h,c,g].filter(u=>u).join(", ")}},showInLegend:!0},series:{dataLabels:{formatter:function(){let n=this,l=n.series.options.format,a=n.y;return l&&(a=i.formatNumber(a,l)),n.key+", "+a}},point:{events:{legendItemClick:function(){let n=this.path,l=this.name,a=this.visible;i.chart?.series.forEach(h=>{h.data.forEach(c=>{(n&&c.path===n||l&&c.name===l)&&(c!==this&&c.update({visible:!a}),a&&c.setState("normal"))})})},mouseOut:function(){let n=[],l=this.series,a=this.index;l.chart.series.forEach(h=>{h!==l&&n.push(h.points[a])}),n.forEach(h=>{h.setState("")})},mouseOver:function(){let n=[],l=this.series,a=this.index;l.chart.series.forEach(h=>{h!==l&&n.push(h.points[a])}),n.forEach(h=>{h.setState("hover")})}}}}}};this.us.mergeRecursive(this.chartConfig,r),this.chartConfig?.plotOptions?.series?.dataLabels||(this.chartConfig.plotOptions.series.dataLabels={}),(this.chartConfig?.plotOptions?.pie?.dataLabels).enabled=this.isValuesVisible(),this.widget.showValues,this.updateChart(!0,!0)}isValuesVisible(){return this.widget.showValues||this.widget["btn.ShowAnnotations"]}onHeaderButton(e){(e.name==="ShowValues"||e.name==="btn.ShowAnnotations"||e.name==="btn.ShowPercents")&&((this.chartConfig.plotOptions?.pie?.dataLabels).enabled=this.isValuesVisible(),this.updateChart(!0),this.chart?.series.forEach((i,r)=>{r!==0&&(i.options.showInLegend=!1)}),(this.chart?.series.length??0)>1&&this.chartConfig.legend&&this.chart?.legend.update(this.chartConfig.legend,!0)),super.onHeaderButton(e)}addSeries(e,i,r,n=!1){let l=this._currentData?.Cols[0]?.tuples?.length||1,a=this._currentData?.Cols[1]?.tuples?.length||1;if(l!==1){let h=100/l,c=this.chart?.series.length||0;e.center=[(h/2+c*h).toString()+"%","50%"],c>a&&(e.showInLegend=!1)}super.addSeries(e,i,r,n),this.chart&&this.chart.series.length>1&&(this.chart.series[this.chart.series.length-1].options.showInLegend=!1)}updateSeriesVisibilityAndPositionForMultiplePies(){this.chart?.series.forEach((e,i)=>{e.options.showInLegend=i===0})}onLegendItemHover(e){super.onLegendItemHover(e),(this.chart?.series?.length??0)>1&&this.chart?.series.forEach(i=>{i!==e.series&&i.setState("inactive",!0)}),this.chartConfig.plotOptions.series.point.events.mouseOver.call(e)}onLegendItemOut(e){super.onLegendItemOut(e),(this.chart?.series?.length??0)>1&&this.chart?.series.forEach(i=>{i!==e.series&&i.setState("normal",!0)}),this.chartConfig.plotOptions.series.point.events.mouseOut.call(e)}parseData(e){return Yt(this,null,function*(){yield eh(t.prototype,this,"parseData").call(this,e),this.toggleLegend(this.widget.isLegend)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-line-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var $l=qt(ys());var Hu=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit(),this.chartConfig.plotOptions={series:{lineWidth:3,marker:{enabled:!0}}};let e=this;this.chartConfig.tooltip={formatter(){let i=this.series.userOptions,r=i.format1,n=i.format2,l=this.y,a=this.x;r&&(l=(0,$l.default)(l).format(r)),n&&(a=(0,$l.default)(a).format(n));let h=e.chartConfig.yAxis,c=e.chartConfig.xAxis;return h.title?.text+":<b>"+l+"</b><br/>"+c.title?.text+":<b>"+a+"</b>"}},this.updateChart()}parseData(e){return Yt(this,null,function*(){let i="",r="";if(e.Cols[0].tuples.length>=1){let l=this.chartConfig.xAxis;l?.title&&(l.title.text=e.Cols[0].tuples[0].caption),i=e.Cols[0].tuples[0].format}if(e.Cols[0].tuples.length>=2){let l=this.chartConfig.yAxis;l?.title!==void 0&&(l.title.text=e.Cols[0]?.tuples[1]?.caption),i=e.Cols[0].tuples[1].format}this.chartConfig.series=[];let n=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this xy chart not implemented!");else{for(let l=0;l<e.Cols[1].tuples.length;l++)n.push([parseFloat(e.Data[l*2]),parseFloat(e.Data[l*2+1])]);this.addSeries({data:n,name:"",format1:i,format2:r}),(this.chartConfig?.xAxis).tickInterval=Math.round((n[n.length-1][0]-n[0][0])/10)}this.updateChart(!0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-line-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Zu=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit(),this.widget.isBtnValues=!0;let e=this;function i(){let n,l,a,h=this,c=new Date(h.x),g=c.toLocaleDateString();if(c.getHours()!==0&&c.getMinutes()!==0&&c.getSeconds()!==0&&(g+=" "+c.toLocaleTimeString()),h.series)return l=h.series.options.format,a=h.y,a=e.formatNumber(a,l),n="<b>"+g+'</b><br><span style="color:'+h.series.color+'">\u25CF</span>'+h.series.name+":<b> "+a,n;n="<b>"+g+"</b><br>";for(let u=h.points.length-1;u>-1;u--)l=h.points[u].series.options.format,a=h.points[u].y,a=e.formatNumber(a,l),n+='<span style="color:'+h.points[u].series.color+'">\u25CF</span>'+h.points[u].series.name+":<b> "+a+"<br>";return n}let r={options:{chart:{zoomType:"x"},tooltip:{formatter:i},navigator:{enabled:!0},scrollbar:{enabled:!1}},series:[],useHighStocks:!0,loading:!0};this.us.mergeRecursive(this.chartConfig,r)}parseData(e){return Yt(this,null,function*(){e&&e.Info&&(this.dataInfo=e.Info),this.chartConfig.yAxis.min=this.getMinValue(e.Data),this.clearSeries();let i=[],r,n;if(e.Cols[0].tuples[0].children){let l=0;for(let a=0;a<e.Cols[0].tuples.length;a++)for(let h=0;h<e.Cols[0].tuples[a].children.length;h++){i=[];for(let c=0;c<e.Cols[1].tuples.length;c++)r=this.convertDateFromCache(this.extractValue(e.Cols[1].tuples[c].path)),i.push([r,+e.Data[e.Cols[0].tuples.length*e.Cols[0].tuples[a].children.length*c+a*e.Cols[0].tuples[a].children.length+h]||0]),i[i.length-1][1]===""&&(i[i.length-1][1]=null),l++;this.addSeries({data:i,name:e.Cols[0].tuples[a].caption+"/"+e.Cols[0].tuples[a].children[h].caption,format:e.Cols[0].tuples[a].format})}}else for(let l=e.Cols[0].tuples.length-1;l>=0;l--){for(i=[],n=0;n<e.Cols[1].tuples.length;n++){r=this.convertDateFromCache(this.extractValue(e.Cols[1].tuples[n].path));let a=+e.Data[n*e.Cols[0].tuples.length+l];a!==void 0&&i.push([r,a||0])}this.addSeries({data:i,name:e.Cols[0].tuples[l].caption,format:e.Cols[0].tuples[l].format})}this.initFormatForSeries(e),this.updateChart(!0)})}addDays(e,i){let r=new Date(e);return r.setDate(e.getDate()+i),r}extractValue(e){let i=e.indexOf("&[");return i==-1?"":e.substring(i+2,e.length-1)}getDate(e){let i=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],r=Date.parse(e);if(!isNaN(r))return r;if(e.split("-").length==2){let n=e.split("-"),l=i.indexOf(n[0].toLowerCase());if(l!=-1)return Date.parse((l+1).toString()+"/01/"+n[1])}else if(e.split(" ").length==2&&(e.split(" ")[1].split(":").length===0&&(e+=":00"),r=Date.parse(e.replace(/-/g,"/")),!isNaN(r)))return r;return 0}convertDateFromCache(e){let i,r;if(e===""&&e===void 0||e===null)return null;let n=e.toString();if(e.length===7&&e.charAt(4)==="W")return r=1+(parseInt(e.substring(5,7))-1)*7,i=parseInt(e.substring(0,4)),Date.parse(new Date(i,0,r));if(n.length==4)return this.getDate(e);if(n.indexOf("-")!=-1)return this.getDate(e);if(n.indexOf(" ")!=-1)return this.getDate(e);if(n.length==6){i=n.substr(0,4);let l=n.substr(4,2);return Date.parse(new Date(parseInt(i),parseInt(l)-1,1))}if(n.length==5&&!isNaN(parseInt(n))){let l=new Date(1840,11,31),a=n.toString().split(",");r=parseInt(a[0]);let h;return a.length>1&&(h=parseInt(a[1])),l=this.addDays(l,parseInt(r)),h&&l.setSeconds(h),Date.parse(l)}else return this.getDate(e)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-line-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Jl=(()=>{let t=class t extends Bt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0,this.widget.type.toLowerCase()==="barchartstacked"&&this.enableStacking()}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-bar-chart"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();var Ku=qt(Jn());function yf(o,t){if(o&1&&(Lt(0,"div",2)(1,"div",4),ie(2),kt(),le(3,"span")(4,"span")(5,"span")(6,"span"),Lt(7,"div",4),ie(8),kt()()),o&2){let s=Nt().$implicit;Dt(2),Te(s.rangeLower||"0"),Dt(6),Te(s.rangeUpper||"0")}}function bf(o,t){if(o&1&&(Lt(0,"div"),ie(1),kt()),o&2){let s=Nt().$implicit;je("align-left",s.display==="label"),Dt(),ms(" ",s.label," ")}}function vf(o,t){if(o&1&&(Lt(0,"td"),$s(1,yf,9,2,"div",2)(2,bf,2,3,"div",3),kt()),o&2){let s,e=t.$implicit;je("plotbox-cell",e.display==="plotBox"),Dt(),Js((s=e.display)==="plotBox"?1:2)}}function Cf(o,t){if(o&1&&(Lt(0,"div"),le(1,"img",7),kt()),o&2){let s=Nt().$index,e=Nt().$index,i=Nt();Dt(),gs("src",i.data[e][s],fs)}}function _f(o,t){if(o&1&&le(0,"span",10),o&2){let s=Nt(2).$index,e=Nt().$index,i=Nt();Ee("left",i.targets[e][s],"%")}}function wf(o,t){if(o&1&&(Lt(0,"div",8),$s(1,_f,1,2,"span",9),kt()),o&2){let s=Nt().$index,e=Nt().$index,i=Nt();Ee("background-color",i.color)("width",i.data[e][s],"%"),Dt(),Js(i.targets[e][s]?1:-1)}}function Sf(o,t){if(o&1&&(Lt(0,"div"),ie(1),kt()),o&2){let s=Nt().$index,e=Nt().$index,i=Nt();Dt(),ms(" ",i.data[e]?i.data[e][s]:""," ")}}function Mf(o,t){if(o&1&&(Lt(0,"td"),$s(1,Cf,2,1,"div")(2,wf,2,5,"div",6)(3,Sf,2,1,"div"),kt()),o&2){let s,e=t.$implicit,i=Nt(2);Ee("width",e.display==="plotBox"?100/i.props.length*2:null,"%"),je("align-left",e.display==="label")("align-center",e.display==="itemNo"),Dt(),Js((s=e.display)==="trendLine"?1:s==="plotBox"?2:3)}}function Ef(o,t){if(o&1&&(Lt(0,"tr"),oe(1,Mf,4,7,"td",5,ne),kt()),o&2){let s=Nt();Dt(),ae(s.props)}}function Tf(o,t){if(o&1&&(Lt(0,"td"),ie(1),kt()),o&2){let s=t.$implicit;Dt(),ms(" ",s," ")}}function Af(o,t){if(o&1&&(Lt(0,"tr",1),oe(1,Tf,2,1,"td",null,ne),kt()),o&2){let s=Nt();Dt(),ae(s.footerValues)}}var qu=(()=>{let t=class t extends ye{constructor(){super(...arguments),this.widget={},this.columns=[],this.rows=[],this.data=[],this.targets=[],this.color="",this.props=[],this.hasFooter=!1,this.footerValues=[],this.san=$t(uh),this.sbs=$t(zr),this.totalByColumn={},this.originalData=[]}ngOnInit(){super.ngOnInit(),this.color=Ku.default.getOptions().colors?.[0],this.tc&&this.tc.hcColors&&(this.color=this.tc.hcColors[0]),this.subColorsConfig=this.bs.subscribe("charts:update-colors",e=>this.updateColors(e)),this.prepareProps(),this.props?.length||this.override?.columns?.length&&(this.props=this.override.columns)}ngOnDestroy(){this.subColorsConfig?.unsubscribe(),super.ngOnDestroy()}retrieveData(e){super.retrieveData(e),!e.Error&&(this.originalData=e.Data,this.columns=e.Cols[0].tuples,this.rows=e.Cols[1]?.tuples||[{}],this.prepareData(e.Data),this.cd.detectChanges())}prepareProps(){this.props=this.widget.dataProperties,this.props&&this.props.forEach(e=>e.label=e.label.replace("\\n",`
`))}onHeaderButton(e){switch(super.onHeaderButton(e),e.name){case"chartConfig":this.showChartConfig();break}}getValue(e,i,r,n,l){switch(r.display||""){case"itemNo":return(i+1).toString();case"label":return this.rows[i].caption;case"":case"value":case"plotBox":{let a=r.format,h=this.getPropValue(e,i,r);if(r.display==="plotBox"){let c=r.rangeLower||0,g=r.rangeUpper||0;return n!==void 0&&(c=n),l!==void 0&&(g=l),r.showAs==="target%"?parseFloat(h)/parseFloat(this.getPropValue(e,i,r,"targetValue"))*100:g-c===0?0:(h-c)/(g-c)*100}else{if(h==="")return"";if(r.showAs==="target%"){let c=this.getPropValue(e,i,r,"targetValue");return this.formatNumber(h/c,a)}return r.showAs==="sum%"?this.formatNumber(h/this.totalByColumn[r.dataValue],a||"#.##%"):this.formatNumber(h,a)}}case"trendLine":{let a=this.getColumnIndex(r.dataValue),h="";return a!==-1&&(h=e[i*this.columns.length+a]),this.getSvgForTrendLine(r,h)}}return 0}prepareFooter(){if(this.hasFooter=this.props.some(e=>e.summary==="sum"),this.footerValues=[],!!this.hasFooter)for(let e=0;e<this.props.length;e++){let i=this.props[e].format,r=this.props[e].summary;this.footerValues[e]="",r&&(this.footerValues[e]=this.formatNumber(this.calcTotal(e,r),i))}}updateColors(e){this.tc=e,this.color=e?.hcColors[0],this.originalData&&this.prepareData(this.originalData),this.cd.detectChanges()}showChartConfig(){let e=this.widget.name,i=this.ss.getWidgetsSettings(this.widget.dashboard)||{},r=()=>{this.ss.setWidgetsSettings(i,this.widget.dashboard)};i[e]||(i[e]={}),i[e].themeColors||(i[e].themeColors={}),this.sbs.showComponent({component:import("./chunk-XKBPBU2N.js"),inputs:{appearance:{showSeries:[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],showBackground:!1,showLines:!1,showText:!1,showBorder:!1},widgetSettings:i[e],onSave:r,onUpdate:n=>this.updateColors(n)}})}getPropValue(e,i,r,n="dataValue"){let l=!isNaN(parseFloat(r[n])),a=r[n];if(!l){let h=this.getColumnIndex(r[n]);h===-1?a=0:a=e[i*this.columns.length+h]}return a}getColumnIndex(e){return this.columns.findIndex(r=>r.dimension?e.split("/").includes(r.dimension):/^Properties\(\"([^)]+)\"\)/.exec(r.valueID)?.[1]===e)}prepareData(e){let i=[];for(let r=0;r<this.props.length;r++){let n,l;if(this.props[r].rangeLower!==void 0&&this.props[r].rangeLower!==""&&(n=this.props[r].rangeLower),this.props[r].rangeUpper!==void 0&&this.props[r].rangeUpper!==""&&(l=this.props[r].rangeUpper),n!==void 0&&l!==void 0&&!isNaN(n)&&!isNaN(l)){i.push({min:n,max:l});continue}if(this.props[r].display==="plotBox"){let a=this.getColumnIndex(this.props[r].dataValue),h=e.filter((c,g)=>(g+a)%this.columns.length===0);l=Math.max(...h),n=Math.min(...h)}n=0,i.push({min:n,max:l}),this.props[r].rangeLower||(this.props[r].rangeLower=n),this.props[r].rangeUpper||(this.props[r].rangeUpper=l)}this.preparePercentageSums(e),this.data=[],this.targets=[];for(let r=0;r<this.rows.length;r++){this.data[r]||(this.data[r]=[],this.targets[r]=[]);for(let n=0;n<this.props.length;n++){let l=i[n].min,a=i[n].max;if(this.props[n].rangeLower&&typeof this.props[n].rangeLower=="string"&&(l=this.getPropValue(e,r,this.props[n],"rangeLower")),this.props[n].rangeUpper&&typeof this.props[n].rangeUpper=="string"&&(a=this.getPropValue(e,r,this.props[n],"rangeUpper")),this.data[r][n]=this.getValue(e,r,this.props[n],l,a),this.props[n].showAs!=="target%"&&this.props[n].targetValue&&a-l!==0){let h=1e4;this.targets[r][n]=h*1/this.data[r][n]*(this.getPropValue(e,r,this.props[n],"targetValue")-l)/(a-l)}}}this.prepareFooter()}getSvgForTrendLine(e,i){let n=[];typeof i=="string"?n=i.split(",").map(u=>{if(!u)return 0;let p=parseFloat(u);return isNaN(p)?0:p}):typeof i=="number"?n=[i]:Array.isArray(i);let l=Math.max(...n),a=Math.min(...n),h=(n.length-1)*4,c=`<svg xmlns="http://www.w3.org/2000/svg" width="${h}px" height="40px" viewBox="0 0 ${h}px 40px">
                        <path vector-effect="non-scaling-stroke" stroke-width="2" stroke="${this.color}" fill="none" d="`,g=0;for(let u=0;u<n.length;u++){let p=parseFloat(n[u]||"0");p=35-p/(l-a)*30,u===0?c+=`M ${g} ${p} `:c+=`L ${g} ${p} `,g+=4}return c+='"/></svg>',this.san.bypassSecurityTrustUrl("data:image/svg+xml;base64,"+btoa(c))}calcTotal(e,i){let r=this.getColumnIndex(this.props[e].dataValue);if(r===-1)return 0;let n=0;for(let l=0;l<this.rows.length;l++)n+=parseFloat(this.originalData[l*this.columns.length+r]);return i==="avg"&&(n=n/this.rows.length),n}preparePercentageSums(e){if(this.totalByColumn={},!this.override)return;let i=this.override.columns?.filter(r=>r.showAs==="sum%");i?.length&&i.forEach(r=>{let n=this.columns.findIndex(l=>l.dimension===r.dataValue);this.totalByColumn[r.dataValue]=e.reduce((l,a,h)=>{if(h%this.columns.length!==n||a==="")return l;let c=parseFloat(a);return isNaN(c)?l:l+c},0)})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-scorecard"]],inputs:{widget:"widget"},standalone:!0,features:[vt,bt],decls:9,vars:1,consts:[[3,"plotbox-cell"],[1,"footer"],[1,"axis"],[3,"align-left"],[1,"label"],[3,"width","align-left","align-center"],[1,"box",3,"background-color","width"],[3,"src"],[1,"box"],[1,"target",3,"left"],[1,"target"]],template:function(i,r){i&1&&(Lt(0,"table")(1,"thead")(2,"tr"),oe(3,vf,3,3,"td",0,ne),kt()(),Lt(5,"tbody"),oe(6,Ef,3,0,"tr",null,ne),$s(8,Af,3,0,"tr",1),kt()()),i&2&&(Dt(3),ae(r.props),Dt(3),ae(r.rows),Dt(2),Js(r.hasFooter?8:-1))},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{overflow-y:auto}table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;width:100%}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{color:#686868}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{position:relative;z-index:2}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{white-space:pre;text-align:right;position:sticky;top:0;padding:0 10px;height:40px;background-color:var(--cl-widget-filter-bg);border-bottom:1px solid var(--cl-header-border)}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-left[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-center[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:6px 10px;text-align:right}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-left[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-center[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:30px}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#00000003}.box[_ngcontent-%COMP%]{height:18px;flex-shrink:0;flex-grow:0;position:relative}.boxes-container[_ngcontent-%COMP%]{display:flex}.boxes-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:40px;flex-shrink:0;flex-grow:0;margin-right:10px}.axis[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:10px;border-bottom:1px solid gray;height:6px;border-left:1px solid gray;margin-top:28px;position:relative}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]{position:absolute;text-align:center;top:-14px}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]:first-child{left:0;transform:translate(-50%)}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]:last-child{right:0;transform:translate(50%)}.axis[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;border-right:1px solid gray}.footer[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{color:var(--cl-txt);background-color:var(--cl-widget-filter-bg);border-top:1px solid var(--cl-header-border);position:sticky;bottom:0}.target[_ngcontent-%COMP%]{display:inline-block;width:2px;transform:translate(-1);background-color:#1c1d20;height:calc(100% + 4px);position:absolute;top:-2px}.plotbox-cell[_ngcontent-%COMP%]{z-index:1}"]});let o=t;return o})();var Us=(()=>{let t=class t extends ye{constructor(){super(...arguments),this.data=[]}retrieveData(e){this.hideLoading(),this.prepareMeterData(e),this.cd.markForCheck(),this.cd.detectChanges()}prepareMeterData(e){if(this.data=[],!e)return;let i=!!this.widget?.dataProperties?.length,r=i?this.widget?.dataProperties:e.Cols[0].tuples;for(let n=0;n<r.length;n++){let l;i?l=r[n]:l=this.getDataPropByDataValue(r[n].dimension);let a,h="";if(i){let v=e.Cols[0].tuples.findIndex(x=>x.dimension===l.dataValue);h=e.Cols[0].tuples[v].caption,a=e.Data[v]}else h=r[n].caption,a=e.Data[n];let c=1,g=parseFloat(l.rangeLower.toString()),u=parseFloat(l.rangeUpper.toString());isNaN(g)&&(g=0),isNaN(u)&&(u=100);let p=g,b=u;isNaN(p)&&(p=33.33333),isNaN(b)&&(b=66.66666),a<p&&(c=0),a>=b&&(c=2),this.data.push({caption:h,state:c,value:a,min:g,max:u})}}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["ng-component"]],standalone:!0,features:[vt,bt],decls:0,vars:0,template:function(i,r){},encapsulation:2});let o=t;return o})();function Pf(o,t){if(o&1&&(Lt(0,"div",0),le(1,"img",1),Lt(2,"label"),ie(3),kt()()),o&2){let s=t.$implicit;Dt(),gs("src","assets/img/smiley/"+(s.state===1?"smile-yellow.svg":s.state===0?"smile-red.svg":"smile-green.svg"),fs),Dt(2),Te(s.caption)}}var $u=(()=>{let t=class t extends Us{constructor(){super(...arguments),this.widget={}}get gridColumns(){return"repeat("+(this.data?.length>=3?3:this.data?.length||0).toString()+", 1fr)"}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-wsmiley"]],hostVars:2,hostBindings:function(i,r){i&2&&Ee("grid-template-columns",r.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[vt,bt],decls:2,vars:0,consts:[[1,"card"],[3,"src"]],template:function(i,r){i&1&&oe(0,Pf,4,2,"div",0,ne),i&2&&ae(r.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center}img[_ngcontent-%COMP%]{width:100%;max-height:calc(100% - 24px);max-width:100%}.card[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let o=t;return o})();function Df(o,t){if(o&1&&le(0,"div",3),o&2){let s=t.$implicit,e=Nt().$implicit;je("filled",e.progress>=s+1)}}function Lf(o,t){if(o&1&&(Lt(0,"div",0)(1,"div",1),oe(2,Df,1,2,"div",2,ne),kt(),Lt(4,"label"),ie(5),kt()()),o&2){let s=t.$implicit,e=Nt();Dt(),je("high",s.state===2)("low",s.state===0),Dt(),ae(e.dots),Dt(3),Te(s.caption)}}var Ju=(()=>{let t=class t extends Us{constructor(){super(...arguments),this.widget={},this.data=[],this.dots=[0,1,2,3,4,5,6,7,8,9]}get gridColumns(){return"repeat("+(this.data?.length>=5?2:1).toString()+", 1fr)"}prepareMeterData(e){super.prepareMeterData(e),this.data.forEach(i=>{i.progress=(i.value-i.min)/(i.max-i.min)*10,isNaN(i.progress)&&(i.progress=0)}),console.log(this.data)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-light-bar"]],hostVars:2,hostBindings:function(i,r){i&2&&Ee("grid-template-columns",r.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[vt,bt],decls:2,vars:0,consts:[[1,"holder"],[1,"bar"],[1,"dot",3,"filled"],[1,"dot"]],template:function(i,r){i&1&&oe(0,Lf,6,5,"div",0,ne),i&2&&ae(r.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center;gap:20px}.holder[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bar[_ngcontent-%COMP%]{display:flex;width:100%;height:24px;border:1px solid var(--cl-accent);border-radius:1000px;padding-left:3px;padding-right:3px;gap:4px;justify-content:space-between;align-items:center}.dot[_ngcontent-%COMP%]{background:var(--cl-hover);border-radius:1000px;width:100%;height:100%;max-width:18px;max-height:18px}.dot.filled[_ngcontent-%COMP%]{background:var(--cl-accent)}.bar.high[_ngcontent-%COMP%] > .dot[_ngcontent-%COMP%]:last-child{background-color:#e07d86}.bar.low[_ngcontent-%COMP%] > .dot[_ngcontent-%COMP%]:first-child{background-color:#175ab8}"],changeDetection:0});let o=t;return o})();function If(o,t){if(o&1&&(Lt(0,"div",0),le(1,"img",1),Lt(2,"label"),ie(3),kt()()),o&2){let s=t.$implicit;Dt(),gs("src","assets/img/traffic-light/"+(s.state===1?"yellow.svg":s.state===0?"red.svg":"green.svg"),fs),Dt(2),Te(s.caption)}}var Qu=(()=>{let t=class t extends Us{constructor(){super(...arguments),this.widget={}}get gridColumns(){return"repeat("+(this.data?.length>=3?3:this.data?.length||0).toString()+", 1fr)"}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=St(t)))(r||t)}})(),t.\u0275cmp=yt({type:t,selectors:[["dsw-traffic-light"]],hostVars:2,hostBindings:function(i,r){i&2&&Ee("grid-template-columns",r.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[vt,bt],decls:2,vars:0,consts:[[1,"card"],[3,"src"]],template:function(i,r){i&1&&oe(0,If,4,2,"div",0,ne),i&2&&ae(r.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center;gap:20px}img[_ngcontent-%COMP%]{width:100%;max-height:calc(100% - 24px);max-width:100%}.card[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let o=t;return o})();var kr=[{id:"btn.ShowAnnotations",text:"Show annotations",tooltip:"Show annotations",icon:"assets/img/icons/text.svg",defValue:!0},{id:"btn.ShowPercents",text:"Show percents",tooltip:"Show percents",icon:"assets/img/icons/percent.svg"}],Hs={regular:{label:"Scorecard chart",class:qu,allowShowAsPivot:!0},fuelGauge:{class:ql,type:"chart",chart:"solidgauge",allowShowAsPivot:!0},bullseyeChart:{label:"Bullseye chart",class:Uu,type:"chart",chart:"pie",headerButtons:kr,allowShowAsPivot:!0},speedometer:{class:ql,type:"chart",chart:"gauge",allowShowAsPivot:!0,disableLegend:!0},bubbleChart:{label:"Bubble chart",class:Gu,type:"chart",chart:"bubble",allowShowAsPivot:!0},treeMapChart:{label:"Tree map chart",class:Bu,type:"chart",chart:"treemap",allowShowAsPivot:!0},hilowChart:{label:"Hi-low chart",class:Xu,type:"chart",chart:"boxplot",allowShowAsPivot:!0},pieChart3D:{label:"Pie chart 3D",class:Rr,type:"chart",chart:"pie",headerButtons:kr,allowShowAsPivot:!0},donutChart3D:{label:"Donut chart 3D",class:Rr,type:"chart",chart:"pie",headerButtons:kr,allowShowAsPivot:!0},donutChart:{label:"Donut chart",class:Rr,type:"chart",chart:"pie",headerButtons:kr,allowShowAsPivot:!0},pieChart:{label:"Pie chart",class:Rr,type:"chart",chart:"pie",headerButtons:kr,allowShowAsPivot:!0},areaChart:{label:"Area chart",class:Vu,type:"chart",chart:"area",allowShowAsPivot:!0},barChart:{label:"Bar chart",class:Jl,type:"chart",chart:"bar",allowShowAsPivot:!0},barChartStacked:{label:"Bar chart stacked",class:Jl,type:"chart",chart:"bar",allowShowAsPivot:!0},lineChart:{label:"Linear chart",class:qn,type:"chart",chart:"line",allowShowAsPivot:!0},lineChartMarkers:{label:"Linear chart with markers",class:qn,type:"chart",chart:"line",allowShowAsPivot:!0},comboChart:{label:"Combo chart",class:qn,type:"chart",chart:"line",allowShowAsPivot:!0},columnChart:{label:"Column chart",class:Hn,type:"chart",chart:"column",allowShowAsPivot:!0},columnChart3D:{label:"Column chart 3D",class:Hn,type:"chart",chart:"column",allowShowAsPivot:!0},columnChartStacked:{label:"Column chart stacked",class:Hn,type:"chart",chart:"column",allowShowAsPivot:!0},xyChart:{label:"XY chart",class:Hu,type:"chart",chart:"scatter",allowShowAsPivot:!0},timeChart:{label:"Time chart",class:Zu,type:"chart",allowShowAsPivot:!0},pivot:{label:"Table",class:to,type:"pivot"},"deepsee.lightpivottable":{class:to,type:"pivot"},textMeter:{label:"Text meter",class:Mh,type:"text",allowShowAsPivot:!0},map:{label:"World map",class:Nn,type:"map",allowShowAsPivot:!0},"deepsee.enhancedmapportlet":{class:Nn,type:"map",allowShowAsPivot:!0},"rf.mapportlet":{class:Nn,type:"map",allowShowAsPivot:!0},horizontalControls:{class:Zn,type:"empty"},verticalControls:{class:Zn,type:"empty"},smiley:{class:$u,allowShowAsPivot:!1},lightBar:{class:Ju,allowShowAsPivot:!1},trafficLight:{class:Qu,allowShowAsPivot:!1}};Hs[Ae.const.emptyWidgetClass]={class:Zn,type:"empty"};var Lu=(()=>{let t=class t{constructor(){}initialize(){let e=Ae.addons;if(e&&e&&e.length)for(let i=0;i<e.length;i++){let r=e[i].split("/").pop();r=Sh+r;try{}catch{console.error(`Can't register addon: ${r}. Be aware that all names is case sensitive!`)}}}register(e,i,r,n){Hs[e]=xe({class:r,type:i},n)}getClass(e){let i=e.toLowerCase();if(Hs[i]||(i=i.replace(/dsw.addons./ig,"")),!!Hs[i])return Hs[i].class}getDesc(e){return Hs[e.replace(/dsw.addons./ig,"")]}getType(e){return this.getDesc(e)?.type||""}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ih({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();export{wh as a,ye as b,Mh as c,Hs as d,Lu as e,Bt as f};
