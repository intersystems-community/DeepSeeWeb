import{a as Co}from"./chunk-HCCYM72S.js";import{a as qr}from"./chunk-G7BOERRR.js";import{a as Wh}from"./chunk-LHKEQOZH.js";import{a as Gh,b as Xh}from"./chunk-YXJIS4KQ.js";import{E as zh,F as ue,H as jh,I as Nh,J as Bh,K as Ss,r as Oh,u as Fh}from"./chunk-6SIX57SD.js";import{Aa as Dh,Cb as rr,Ea as Lh,Eb as he,Fb as ce,Gb as de,Hb as Dt,Ib as It,Jb as Ht,Kc as Rh,Nb as Ih,Rb as kh,Sb as Nt,X as Mh,Xb as Si,Ya as Cs,Yb as Mi,Zb as Ei,ab as Lt,ba as Qt,bc as ne,cc as Fe,dc as ws,fa as bt,lb as Ct,lc as vt,qa as Eh,ra as Ph,rb as sr,sa as Th,ta as Ah,ua as _t,xb as _s,yb as Oe,zb as Ze}from"./chunk-ZEAAPN4P.js";import{a as re,b as oi,d as ai,f as Jt,g as Sh,h as Ft}from"./chunk-MG3ERZGY.js";var Ms=ai((Vh,$r)=>{"use strict";(function(n,t){typeof define=="function"&&define.amd?define(t):typeof $r=="object"&&$r.exports?$r.exports=t():n.numeral=t()})(Vh,function(){var n,t,e="2.0.6",i={},s={},r={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},o={currentLocale:r.currentLocale,zeroFormat:r.zeroFormat,nullFormat:r.nullFormat,defaultFormat:r.defaultFormat,scalePercentBy100:r.scalePercentBy100};function a(l,h){this._input=l,this._value=h}return n=function(l){var h,c,g,d;if(n.isNumeral(l))h=l.value();else if(l===0||typeof l>"u")h=0;else if(l===null||t.isNaN(l))h=null;else if(typeof l=="string")if(o.zeroFormat&&l===o.zeroFormat)h=0;else if(o.nullFormat&&l===o.nullFormat||!l.replace(/[^0-9]+/g,"").length)h=null;else{for(c in i)if(d=typeof i[c].regexps.unformat=="function"?i[c].regexps.unformat():i[c].regexps.unformat,d&&l.match(d)){g=i[c].unformat;break}g=g||n._.stringToNumber,h=g(l)}else h=Number(l)||null;return new a(l,h)},n.version=e,n.isNumeral=function(l){return l instanceof a},n._=t={numberToFormat:function(l,h,c){var g=s[n.options.currentLocale],d=!1,p=!1,y=0,b="",x=1e12,f=1e9,M=1e6,L=1e3,_="",w=!1,k,z,O,C,A,F,S,T,D,P;if(l=l||0,z=Math.abs(l),n._.includes(h,"(")?(d=!0,h=h.replace(/[\(|\)]/g,"")):(n._.includes(h,"+")||n._.includes(h,"-"))&&(T=n._.includes(h,"+")?h.indexOf("+"):l<0?h.indexOf("-"):-1,h=h.replace(/[\+|\-]/g,"")),n._.includes(h,"a")&&(k=h.match(/a(k|m|b|t)?/),k=k?k[1]:!1,n._.includes(h," a")&&(b=" "),h=h.replace(new RegExp(b+"a[kmbt]?"),""),z>=x&&!k||k==="t"?(b+=g.abbreviations.trillion,l=l/x):z<x&&z>=f&&!k||k==="b"?(b+=g.abbreviations.billion,l=l/f):z<f&&z>=M&&!k||k==="m"?(b+=g.abbreviations.million,l=l/M):(z<M&&z>=L&&!k||k==="k")&&(b+=g.abbreviations.thousand,l=l/L)),n._.includes(h,"[.]")&&(p=!0,h=h.replace("[.]",".")),F=l.toString().split(".")[0],S=h.split(".")[1],D=h.indexOf(","),y=(h.split(".")[0].split(",")[0].match(/0/g)||[]).length,S?(n._.includes(S,"[")?(S=S.replace("]",""),S=S.split("["),_=n._.toFixed(l,S[0].length+S[1].length,c,S[1].length)):_=n._.toFixed(l,S.length,c),F=_.split(".")[0],n._.includes(_,".")?_=g.delimiters.decimal+_.split(".")[1]:_="",p&&Number(_.slice(1))===0&&(_="")):F=n._.toFixed(l,0,c),b&&!k&&Number(F)>=1e3&&b!==g.abbreviations.trillion)switch(F=String(Number(F)/1e3),b){case g.abbreviations.thousand:b=g.abbreviations.million;break;case g.abbreviations.million:b=g.abbreviations.billion;break;case g.abbreviations.billion:b=g.abbreviations.trillion;break}if(n._.includes(F,"-")&&(F=F.slice(1),w=!0),F.length<y)for(var m=y-F.length;m>0;m--)F="0"+F;return D>-1&&(F=F.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g.delimiters.thousands)),h.indexOf(".")===0&&(F=""),P=F+_+(b||""),d?P=(d&&w?"(":"")+P+(d&&w?")":""):T>=0?P=T===0?(w?"-":"+")+P:P+(w?"-":"+"):w&&(P="-"+P),P},stringToNumber:function(l){var h=s[o.currentLocale],c=l,g={thousand:3,million:6,billion:9,trillion:12},d,p,y,b;if(o.zeroFormat&&l===o.zeroFormat)p=0;else if(o.nullFormat&&l===o.nullFormat||!l.replace(/[^0-9]+/g,"").length)p=null;else{p=1,h.delimiters.decimal!=="."&&(l=l.replace(/\./g,"").replace(h.delimiters.decimal,"."));for(d in g)if(b=new RegExp("[^a-zA-Z]"+h.abbreviations[d]+"(?:\\)|(\\"+h.currency.symbol+")?(?:\\))?)?$"),c.match(b)){p*=Math.pow(10,g[d]);break}p*=(l.split("-").length+Math.min(l.split("(").length-1,l.split(")").length-1))%2?1:-1,l=l.replace(/[^0-9\.]+/g,""),p*=Number(l)}return p},isNaN:function(l){return typeof l=="number"&&isNaN(l)},includes:function(l,h){return l.indexOf(h)!==-1},insert:function(l,h,c){return l.slice(0,c)+h+l.slice(c)},reduce:function(l,h){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof h!="function")throw new TypeError(h+" is not a function");var c=Object(l),g=c.length>>>0,d=0,p;if(arguments.length===3)p=arguments[2];else{for(;d<g&&!(d in c);)d++;if(d>=g)throw new TypeError("Reduce of empty array with no initial value");p=c[d++]}for(;d<g;d++)d in c&&(p=h(p,c[d],d,c));return p},multiplier:function(l){var h=l.toString().split(".");return h.length<2?1:Math.pow(10,h[1].length)},correctionFactor:function(){var l=Array.prototype.slice.call(arguments);return l.reduce(function(h,c){var g=t.multiplier(c);return h>g?h:g},1)},toFixed:function(l,h,c,g){var d=l.toString().split("."),p=h-(g||0),y,b,x,f;return d.length===2?y=Math.min(Math.max(d[1].length,p),h):y=p,x=Math.pow(10,y),f=(c(l+"e+"+y)/x).toFixed(y),g>h-y&&(b=new RegExp("\\.?0{1,"+(g-(h-y))+"}$"),f=f.replace(b,"")),f}},n.options=o,n.formats=i,n.locales=s,n.locale=function(l){return l&&(o.currentLocale=l.toLowerCase()),o.currentLocale},n.localeData=function(l){if(!l)return s[o.currentLocale];if(l=l.toLowerCase(),!s[l])throw new Error("Unknown locale : "+l);return s[l]},n.reset=function(){for(var l in r)o[l]=r[l]},n.zeroFormat=function(l){o.zeroFormat=typeof l=="string"?l:null},n.nullFormat=function(l){o.nullFormat=typeof l=="string"?l:null},n.defaultFormat=function(l){o.defaultFormat=typeof l=="string"?l:"0.0"},n.register=function(l,h,c){if(h=h.toLowerCase(),this[l+"s"][h])throw new TypeError(h+" "+l+" already registered.");return this[l+"s"][h]=c,c},n.validate=function(l,h){var c,g,d,p,y,b,x,f;if(typeof l!="string"&&(l+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",l)),l=l.trim(),l.match(/^\d+$/))return!0;if(l==="")return!1;try{x=n.localeData(h)}catch{x=n.localeData(n.locale())}return d=x.currency.symbol,y=x.abbreviations,c=x.delimiters.decimal,x.delimiters.thousands==="."?g="\\.":g=x.delimiters.thousands,f=l.match(/^[^\d]+/),f!==null&&(l=l.substr(1),f[0]!==d)||(f=l.match(/[^\d]+$/),f!==null&&(l=l.slice(0,-1),f[0]!==y.thousand&&f[0]!==y.million&&f[0]!==y.billion&&f[0]!==y.trillion))?!1:(b=new RegExp(g+"{2}"),l.match(/[^\d.,]/g)?!1:(p=l.split(c),p.length>2?!1:p.length<2?!!p[0].match(/^\d+.*\d$/)&&!p[0].match(b):p[0].length===1?!!p[0].match(/^\d+$/)&&!p[0].match(b)&&!!p[1].match(/^\d+$/):!!p[0].match(/^\d+.*\d$/)&&!p[0].match(b)&&!!p[1].match(/^\d+$/)))},n.fn=a.prototype={clone:function(){return n(this)},format:function(l,h){var c=this._value,g=l||o.defaultFormat,d,p,y;if(h=h||Math.round,c===0&&o.zeroFormat!==null)p=o.zeroFormat;else if(c===null&&o.nullFormat!==null)p=o.nullFormat;else{for(d in i)if(g.match(i[d].regexps.format)){y=i[d].format;break}y=y||n._.numberToFormat,p=y(c,g,h)}return p},value:function(){return this._value},input:function(){return this._input},set:function(l){return this._value=Number(l),this},add:function(l){var h=t.correctionFactor.call(null,this._value,l);function c(g,d,p,y){return g+Math.round(h*d)}return this._value=t.reduce([this._value,l],c,0)/h,this},subtract:function(l){var h=t.correctionFactor.call(null,this._value,l);function c(g,d,p,y){return g-Math.round(h*d)}return this._value=t.reduce([l],c,Math.round(this._value*h))/h,this},multiply:function(l){function h(c,g,d,p){var y=t.correctionFactor(c,g);return Math.round(c*y)*Math.round(g*y)/Math.round(y*y)}return this._value=t.reduce([this._value,l],h,1),this},divide:function(l){function h(c,g,d,p){var y=t.correctionFactor(c,g);return Math.round(c*y)/Math.round(g*y)}return this._value=t.reduce([this._value,l],h),this},difference:function(l){return Math.abs(n(this._value).subtract(l).value())}},n.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(l){var h=l%10;return~~(l%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th"},currency:{symbol:"$"}}),function(){n.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(l,h,c){var g=n._.includes(h," BPS")?" ":"",d;return l=l*1e4,h=h.replace(/\s?BPS/,""),d=n._.numberToFormat(l,h,c),n._.includes(d,")")?(d=d.split(""),d.splice(-1,0,g+"BPS"),d=d.join("")):d=d+g+"BPS",d},unformat:function(l){return+(n._.stringToNumber(l)*1e-4).toFixed(15)}})}(),function(){var l={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},h={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},c=l.suffixes.concat(h.suffixes.filter(function(d){return l.suffixes.indexOf(d)<0})),g=c.join("|");g="("+g.replace("B","B(?!PS)")+")",n.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(g)},format:function(d,p,y){var b,x=n._.includes(p,"ib")?h:l,f=n._.includes(p," b")||n._.includes(p," ib")?" ":"",M,L,_;for(p=p.replace(/\s?i?b/,""),M=0;M<=x.suffixes.length;M++)if(L=Math.pow(x.base,M),_=Math.pow(x.base,M+1),d===null||d===0||d>=L&&d<_){f+=x.suffixes[M],L>0&&(d=d/L);break}return b=n._.numberToFormat(d,p,y),b+f},unformat:function(d){var p=n._.stringToNumber(d),y,b;if(p){for(y=l.suffixes.length-1;y>=0;y--){if(n._.includes(d,l.suffixes[y])){b=Math.pow(l.base,y);break}if(n._.includes(d,h.suffixes[y])){b=Math.pow(h.base,y);break}}p*=b||1}return p}})}(),function(){n.register("format","currency",{regexps:{format:/(\$)/},format:function(l,h,c){var g=n.locales[n.options.currentLocale],d={before:h.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:h.match(/([\+|\-|\)|\s|\$]*)$/)[0]},p,y,b;for(h=h.replace(/\s?\$\s?/,""),p=n._.numberToFormat(l,h,c),l>=0?(d.before=d.before.replace(/[\-\(]/,""),d.after=d.after.replace(/[\-\)]/,"")):l<0&&!n._.includes(d.before,"-")&&!n._.includes(d.before,"(")&&(d.before="-"+d.before),b=0;b<d.before.length;b++)switch(y=d.before[b],y){case"$":p=n._.insert(p,g.currency.symbol,b);break;case" ":p=n._.insert(p," ",b+g.currency.symbol.length-1);break}for(b=d.after.length-1;b>=0;b--)switch(y=d.after[b],y){case"$":p=b===d.after.length-1?p+g.currency.symbol:n._.insert(p,g.currency.symbol,-(d.after.length-(1+b)));break;case" ":p=b===d.after.length-1?p+" ":n._.insert(p," ",-(d.after.length-(1+b)+g.currency.symbol.length-1));break}return p}})}(),function(){n.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(l,h,c){var g,d=typeof l=="number"&&!n._.isNaN(l)?l.toExponential():"0e+0",p=d.split("e");return h=h.replace(/e[\+|\-]{1}0/,""),g=n._.numberToFormat(Number(p[0]),h,c),g+"e"+p[1]},unformat:function(l){var h=n._.includes(l,"e+")?l.split("e+"):l.split("e-"),c=Number(h[0]),g=Number(h[1]);g=n._.includes(l,"e-")?g*=-1:g;function d(p,y,b,x){var f=n._.correctionFactor(p,y),M=p*f*(y*f)/(f*f);return M}return n._.reduce([c,Math.pow(10,g)],d,1)}})}(),function(){n.register("format","ordinal",{regexps:{format:/(o)/},format:function(l,h,c){var g=n.locales[n.options.currentLocale],d,p=n._.includes(h," o")?" ":"";return h=h.replace(/\s?o/,""),p+=g.ordinal(l),d=n._.numberToFormat(l,h,c),d+p}})}(),function(){n.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(l,h,c){var g=n._.includes(h," %")?" ":"",d;return n.options.scalePercentBy100&&(l=l*100),h=h.replace(/\s?\%/,""),d=n._.numberToFormat(l,h,c),n._.includes(d,")")?(d=d.split(""),d.splice(-1,0,g+"%"),d=d.join("")):d=d+g+"%",d},unformat:function(l){var h=n._.stringToNumber(l);return n.options.scalePercentBy100?h*.01:h}})}(),function(){n.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(l,h,c){var g=Math.floor(l/60/60),d=Math.floor((l-g*60*60)/60),p=Math.round(l-g*60*60-d*60);return g+":"+(d<10?"0"+d:d)+":"+(p<10?"0"+p:p)},unformat:function(l){var h=l.split(":"),c=0;return h.length===3?(c=c+Number(h[0])*60*60,c=c+Number(h[1])*60,c=c+Number(h[2])):h.length===2&&(c=c+Number(h[0])*60,c=c+Number(h[1])),Number(c)}})}(),n})});var yl=ai((ml,xl)=>{"use strict";(function(n,t){typeof ml=="object"&&typeof xl<"u"?xl.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self).RBush=t()})(ml,function(){"use strict";function n(x,f,M,L,_){(function w(k,z,O,C,A){for(;C>O;){if(C-O>600){var F=C-O+1,S=z-O+1,T=Math.log(F),D=.5*Math.exp(2*T/3),P=.5*Math.sqrt(T*D*(F-D)/F)*(S-F/2<0?-1:1),m=Math.max(O,Math.floor(z-S*D/F+P)),u=Math.min(C,Math.floor(z+(F-S)*D/F+P));w(k,z,m,u,A)}var v=k[z],I=O,E=C;for(t(k,O,z),A(k[C],v)>0&&t(k,O,C);I<E;){for(t(k,I,E),I++,E--;A(k[I],v)<0;)I++;for(;A(k[E],v)>0;)E--}A(k[O],v)===0?t(k,O,E):t(k,++E,C),E<=z&&(O=E+1),z<=E&&(C=E-1)}})(x,f,M||0,L||x.length-1,_||e)}function t(x,f,M){var L=x[f];x[f]=x[M],x[M]=L}function e(x,f){return x<f?-1:x>f?1:0}var i=function(x){x===void 0&&(x=9),this._maxEntries=Math.max(4,x),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(x,f,M){if(!M)return f.indexOf(x);for(var L=0;L<f.length;L++)if(M(x,f[L]))return L;return-1}function r(x,f){o(x,0,x.children.length,f,x)}function o(x,f,M,L,_){_||(_=y(null)),_.minX=1/0,_.minY=1/0,_.maxX=-1/0,_.maxY=-1/0;for(var w=f;w<M;w++){var k=x.children[w];a(_,x.leaf?L(k):k)}return _}function a(x,f){return x.minX=Math.min(x.minX,f.minX),x.minY=Math.min(x.minY,f.minY),x.maxX=Math.max(x.maxX,f.maxX),x.maxY=Math.max(x.maxY,f.maxY),x}function l(x,f){return x.minX-f.minX}function h(x,f){return x.minY-f.minY}function c(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}function g(x){return x.maxX-x.minX+(x.maxY-x.minY)}function d(x,f){return x.minX<=f.minX&&x.minY<=f.minY&&f.maxX<=x.maxX&&f.maxY<=x.maxY}function p(x,f){return f.minX<=x.maxX&&f.minY<=x.maxY&&f.maxX>=x.minX&&f.maxY>=x.minY}function y(x){return{children:x,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(x,f,M,L,_){for(var w=[f,M];w.length;)if(!((M=w.pop())-(f=w.pop())<=L)){var k=f+Math.ceil((M-f)/L/2)*L;n(x,k,f,M,_),w.push(f,k,k,M)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(x){var f=this.data,M=[];if(!p(x,f))return M;for(var L=this.toBBox,_=[];f;){for(var w=0;w<f.children.length;w++){var k=f.children[w],z=f.leaf?L(k):k;p(x,z)&&(f.leaf?M.push(k):d(x,z)?this._all(k,M):_.push(k))}f=_.pop()}return M},i.prototype.collides=function(x){var f=this.data;if(!p(x,f))return!1;for(var M=[];f;){for(var L=0;L<f.children.length;L++){var _=f.children[L],w=f.leaf?this.toBBox(_):_;if(p(x,w)){if(f.leaf||d(x,w))return!0;M.push(_)}}f=M.pop()}return!1},i.prototype.load=function(x){if(!x||!x.length)return this;if(x.length<this._minEntries){for(var f=0;f<x.length;f++)this.insert(x[f]);return this}var M=this._build(x.slice(),0,x.length-1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var L=this.data;this.data=M,M=L}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this},i.prototype.insert=function(x){return x&&this._insert(x,this.data.height-1),this},i.prototype.clear=function(){return this.data=y([]),this},i.prototype.remove=function(x,f){if(!x)return this;for(var M,L,_,w=this.data,k=this.toBBox(x),z=[],O=[];w||z.length;){if(w||(w=z.pop(),L=z[z.length-1],M=O.pop(),_=!0),w.leaf){var C=s(x,w.children,f);if(C!==-1)return w.children.splice(C,1),z.push(w),this._condense(z),this}_||w.leaf||!d(w,k)?L?(M++,w=L.children[M],_=!1):w=null:(z.push(w),O.push(M),M=0,L=w,w=w.children[0])}return this},i.prototype.toBBox=function(x){return x},i.prototype.compareMinX=function(x,f){return x.minX-f.minX},i.prototype.compareMinY=function(x,f){return x.minY-f.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(x){return this.data=x,this},i.prototype._all=function(x,f){for(var M=[];x;)x.leaf?f.push.apply(f,x.children):M.push.apply(M,x.children),x=M.pop();return f},i.prototype._build=function(x,f,M,L){var _,w=M-f+1,k=this._maxEntries;if(w<=k)return r(_=y(x.slice(f,M+1)),this.toBBox),_;L||(L=Math.ceil(Math.log(w)/Math.log(k)),k=Math.ceil(w/Math.pow(k,L-1))),(_=y([])).leaf=!1,_.height=L;var z=Math.ceil(w/k),O=z*Math.ceil(Math.sqrt(k));b(x,f,M,O,this.compareMinX);for(var C=f;C<=M;C+=O){var A=Math.min(C+O-1,M);b(x,C,A,z,this.compareMinY);for(var F=C;F<=A;F+=z){var S=Math.min(F+z-1,A);_.children.push(this._build(x,F,S,L-1))}}return r(_,this.toBBox),_},i.prototype._chooseSubtree=function(x,f,M,L){for(;L.push(f),!f.leaf&&L.length-1!==M;){for(var _=1/0,w=1/0,k=void 0,z=0;z<f.children.length;z++){var O=f.children[z],C=c(O),A=(F=x,S=O,(Math.max(S.maxX,F.maxX)-Math.min(S.minX,F.minX))*(Math.max(S.maxY,F.maxY)-Math.min(S.minY,F.minY))-C);A<w?(w=A,_=C<_?C:_,k=O):A===w&&C<_&&(_=C,k=O)}f=k||f.children[0]}var F,S;return f},i.prototype._insert=function(x,f,M){var L=M?x:this.toBBox(x),_=[],w=this._chooseSubtree(L,this.data,f,_);for(w.children.push(x),a(w,L);f>=0&&_[f].children.length>this._maxEntries;)this._split(_,f),f--;this._adjustParentBBoxes(L,_,f)},i.prototype._split=function(x,f){var M=x[f],L=M.children.length,_=this._minEntries;this._chooseSplitAxis(M,_,L);var w=this._chooseSplitIndex(M,_,L),k=y(M.children.splice(w,M.children.length-w));k.height=M.height,k.leaf=M.leaf,r(M,this.toBBox),r(k,this.toBBox),f?x[f-1].children.push(k):this._splitRoot(M,k)},i.prototype._splitRoot=function(x,f){this.data=y([x,f]),this.data.height=x.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(x,f,M){for(var L,_,w,k,z,O,C,A=1/0,F=1/0,S=f;S<=M-f;S++){var T=o(x,0,S,this.toBBox),D=o(x,S,M,this.toBBox),P=(_=T,w=D,k=void 0,z=void 0,O=void 0,C=void 0,k=Math.max(_.minX,w.minX),z=Math.max(_.minY,w.minY),O=Math.min(_.maxX,w.maxX),C=Math.min(_.maxY,w.maxY),Math.max(0,O-k)*Math.max(0,C-z)),m=c(T)+c(D);P<A?(A=P,L=S,F=m<F?m:F):P===A&&m<F&&(F=m,L=S)}return L||M-f},i.prototype._chooseSplitAxis=function(x,f,M){var L=x.leaf?this.compareMinX:l,_=x.leaf?this.compareMinY:h;this._allDistMargin(x,f,M,L)<this._allDistMargin(x,f,M,_)&&x.children.sort(L)},i.prototype._allDistMargin=function(x,f,M,L){x.children.sort(L);for(var _=this.toBBox,w=o(x,0,f,_),k=o(x,M-f,M,_),z=g(w)+g(k),O=f;O<M-f;O++){var C=x.children[O];a(w,x.leaf?_(C):C),z+=g(w)}for(var A=M-f-1;A>=f;A--){var F=x.children[A];a(k,x.leaf?_(F):F),z+=g(k)}return z},i.prototype._adjustParentBBoxes=function(x,f,M){for(var L=M;L>=0;L--)a(f[L],x)},i.prototype._condense=function(x){for(var f=x.length-1,M=void 0;f>=0;f--)x[f].children.length===0?f>0?(M=x[f-1].children).splice(M.indexOf(x[f]),1):this.clear():r(x[f],this.toBBox)},i})});var Uu=ai((ZT,ao)=>{"use strict";(function(n){typeof ao=="object"&&ao.exports?(n.default=n,ao.exports=n):typeof define=="function"&&define.amd?define("highcharts/modules/map",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n(typeof Highcharts<"u"?Highcharts:void 0)})(function(n){"use strict";var t=n?n._modules:{};function e(i,s,r,o){i.hasOwnProperty(s)||(i[s]=o.apply(null,r),typeof CustomEvent=="function"&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:i[s]}})))}e(t,"Core/Axis/Color/ColorAxisComposition.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(i,s){var r;let{parse:o}=i,{addEvent:a,extend:l,merge:h,pick:c,splat:g}=s;return function(d){let p;function y(){let{userOptions:O}=this;this.colorAxis=[],O.colorAxis&&(O.colorAxis=g(O.colorAxis),O.colorAxis.map(C=>new p(this,C)))}function b(O){let C=this.chart.colorAxis||[],A=D=>{let P=O.allItems.indexOf(D);P!==-1&&(this.destroyItem(O.allItems[P]),O.allItems.splice(P,1))},F=[],S,T;for(C.forEach(function(D){(S=D.options)&&S.showInLegend&&(S.dataClasses&&S.visible?F=F.concat(D.getDataClassLegendSymbols()):S.visible&&F.push(D),D.series.forEach(function(P){(!P.options.showInLegend||S.dataClasses)&&(P.options.legendType==="point"?P.points.forEach(function(m){A(m)}):A(P))}))}),T=F.length;T--;)O.allItems.unshift(F[T])}function x(O){O.visible&&O.item.legendColor&&O.item.legendItem.symbol.attr({fill:O.item.legendColor})}function f(O){this.chart.colorAxis?.forEach(C=>{C.update({},O.redraw)})}function M(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function L(){let O=this.axisTypes;O?O.indexOf("colorAxis")===-1&&O.push("colorAxis"):this.axisTypes=["colorAxis"]}function _(O){let C=this,A=O?"show":"hide";C.visible=C.options.visible=!!O,["graphic","dataLabel"].forEach(function(F){C[F]&&C[F][A]()}),this.series.buildKDTree()}function w(){let O=this,C=this.getPointsCollection(),A=this.options.nullColor,F=this.colorAxis,S=this.colorKey;C.forEach(T=>{let D=T.getNestedProperty(S),P=T.options.color||(T.isNull||T.value===null?A:F&&D!==void 0?F.toColor(D,T):T.color||O.color);P&&T.color!==P&&(T.color=P,O.options.legendType==="point"&&T.legendItem&&T.legendItem.label&&O.chart.legend.colorizeItem(T,T.visible))})}function k(){this.elem.attr("fill",o(this.start).tweenTo(o(this.end),this.pos),void 0,!0)}function z(){this.elem.attr("stroke",o(this.start).tweenTo(o(this.end),this.pos),void 0,!0)}d.compose=function(O,C,A,F,S){let T=C.prototype,D=A.prototype,P=S.prototype;T.collectionsWithUpdate.includes("colorAxis")||(p=O,T.collectionsWithUpdate.push("colorAxis"),T.collectionsWithInit.colorAxis=[T.addColorAxis],a(C,"afterGetAxes",y),function(m){let u=m.prototype.createAxis;m.prototype.createAxis=function(v,I){if(v!=="colorAxis")return u.apply(this,arguments);let E=new p(this,h(I.axis,{index:this[v].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(R=>{R.series=[]}),this.series.forEach(R=>{R.bindAxes(),R.isDirtyData=!0}),c(I.redraw,!0)&&this.redraw(I.animation),E}}(C),D.fillSetter=k,D.strokeSetter=z,a(F,"afterGetAllItems",b),a(F,"afterColorizeItem",x),a(F,"afterUpdate",f),l(P,{optionalAxis:"colorAxis",translateColors:w}),l(P.pointClass.prototype,{setVisible:_}),a(S,"afterTranslate",M,{order:1}),a(S,"bindAxes",L))},d.pointSetVisible=_}(r||(r={})),r}),e(t,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0}}),e(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(i,s){var r,o;let{parse:a}=i,{merge:l}=s;return(o=r||(r={})).initDataClasses=function(h){let c=this.chart,g=this.legendItem=this.legendItem||{},d=this.options,p=h.dataClasses||[],y,b,x=c.options.chart.colorCount,f=0,M;this.dataClasses=b=[],g.labels=[];for(let L=0,_=p.length;L<_;++L)y=l(y=p[L]),b.push(y),(c.styledMode||!y.color)&&(d.dataClassColor==="category"?(c.styledMode||(x=(M=c.options.colors||[]).length,y.color=M[f]),y.colorIndex=f,++f===x&&(f=0)):y.color=a(d.minColor).tweenTo(a(d.maxColor),_<2?.5:L/(_-1)))},o.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let g=0,d=c.length;g<d;++g)c[g].color=a(c[g][1])},o.normalizedValue=function(h){let c=this.max||0,g=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-g||1)},o.toColor=function(h,c){let g,d,p,y,b,x,f=this.dataClasses,M=this.stops;if(f){for(x=f.length;x--;)if(d=(b=f[x]).from,p=b.to,(d===void 0||h>=d)&&(p===void 0||h<=p)){y=b.color,c&&(c.dataClass=x,c.colorIndex=b.colorIndex);break}}else{for(g=this.normalizedValue(h),x=M.length;x--&&!(g>M[x][0]););d=M[x]||M[x+1],g=1-((p=M[x+1]||d)[0]-g)/(p[0]-d[0]||1),y=d.color.tweenTo(p.color,g)}return y},r}),e(t,"Core/Axis/Color/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Axis/Color/ColorAxisComposition.js"],t["Core/Axis/Color/ColorAxisDefaults.js"],t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Defaults.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c){let{defaultOptions:g}=a,{series:d}=h,{defined:p,extend:y,fireEvent:b,isArray:x,isNumber:f,merge:M,pick:L,relativeLength:_}=c;g.colorAxis=M(g.xAxis,r);class w extends i{static compose(z,O,C,A){s.compose(w,z,O,C,A)}constructor(z,O){super(z,O),this.coll="colorAxis",this.visible=!0,this.init(z,O)}init(z,O){let C=z.options.legend||{},A=O.layout?O.layout!=="vertical":C.layout!=="vertical";this.side=O.side||A?2:1,this.reversed=O.reversed||!A,this.opposite=!A,super.init(z,O,"colorAxis"),this.userOptions=O,x(z.userOptions.colorAxis)&&(z.userOptions.colorAxis[this.index]=O),O.dataClasses&&this.initDataClasses(O),this.initStops(),this.horiz=A,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(z){let O=M(g.colorAxis,z,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&z.visible!==!1});super.setOptions(O),this.options.crosshair=this.options.marker}setAxisSize(){let z=this.chart,O=this.legendItem?.symbol,{width:C,height:A}=this.getSize();O&&(this.left=+O.attr("x"),this.top=+O.attr("y"),this.width=C=+O.attr("width"),this.height=A=+O.attr("height"),this.right=z.chartWidth-this.left-C,this.bottom=z.chartHeight-this.top-A,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?C:A)||w.defaultLegendLength}getOffset(){let z=this.legendItem?.group,O=this.chart.axisOffset[this.side];if(z){this.axisParent=z,super.getOffset();let C=this.chart.legend;C.allItems.forEach(function(A){A instanceof w&&A.drawLegendSymbol(C,A)}),C.render(),this.chart.getMargins(!0),this.chart.series.some(A=>A.isDrilling)||(this.isDirty=!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=O}}setLegendColor(){let z=this.horiz,O=this.reversed,C=O?1:0,A=O?0:1,F=z?[C,0,A,0]:[0,A,0,C];this.legendColor={linearGradient:{x1:F[0],y1:F[1],x2:F[2],y2:F[3]},stops:this.stops}}drawLegendSymbol(z,O){let C=O.legendItem||{},A=z.padding,F=z.options,S=this.options.labels,T=L(F.itemDistance,10),D=this.horiz,{width:P,height:m}=this.getSize(),u=L(F.labelPadding,D?16:30);this.setLegendColor(),C.symbol||(C.symbol=this.chart.renderer.symbol("roundedRect").attr({r:F.symbolRadius??3,zIndex:1}).add(C.group)),C.symbol.attr({x:0,y:(z.baseline||0)-11,width:P,height:m}),C.labelWidth=P+A+(D?T:L(S.x,S.distance)+(this.maxLabelLength||0)),C.labelHeight=m+A+(D?u:0)}setState(z){this.series.forEach(function(O){O.setState(z)})}setVisible(){}getSeriesExtremes(){let z=this.series,O,C,A,F,S,T,D=z.length,P,m;for(this.dataMin=1/0,this.dataMax=-1/0;D--;){if(C=(T=z[D]).colorKey=L(T.options.colorKey,T.colorKey,T.pointValKey,T.zoneAxis,"y"),F=T.pointArrayMap,S=T[C+"Min"]&&T[C+"Max"],T[C+"Data"])O=T[C+"Data"];else if(F){if(O=[],A=F.indexOf(C),P=T.yData,A>=0&&P)for(m=0;m<P.length;m++)O.push(L(P[m][A],P[m]))}else O=T.yData;if(S)T.minColorValue=T[C+"Min"],T.maxColorValue=T[C+"Max"];else{let u=d.prototype.getExtremes.call(T,O);T.minColorValue=u.dataMin,T.maxColorValue=u.dataMax}p(T.minColorValue)&&p(T.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,T.minColorValue),this.dataMax=Math.max(this.dataMax,T.maxColorValue)),S||d.prototype.applyExtremes.call(T)}}drawCrosshair(z,O){let C,A=this.legendItem||{},F=O&&O.plotX,S=O&&O.plotY,T=this.pos,D=this.len;O&&((C=this.toPixels(O.getNestedProperty(O.series.colorKey)))<T?C=T-2:C>T+D&&(C=T+D+2),O.plotX=C,O.plotY=this.len-C,super.drawCrosshair(z,O),O.plotX=F,O.plotY=S,this.cross&&!this.cross.addedToColorAxis&&A.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(A.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||typeof this.crosshair!="object"||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(z){let O=this.left,C=z.translatedValue,A=this.top;return f(C)?this.horiz?[["M",C-4,A-6],["L",C+4,A-6],["L",C,A],["Z"]]:[["M",O,C],["L",O-6,C+6],["L",O-6,C-6],["Z"]]:super.getPlotLinePath(z)}update(z,O){let C=this.chart.legend;this.series.forEach(A=>{A.isDirtyData=!0}),(z.dataClasses&&C.allItems||this.dataClasses)&&this.destroyItems(),super.update(z,O),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),C.colorizeItem(this,!0))}destroyItems(){let z=this.chart,O=this.legendItem||{};if(O.label)z.legend.destroyItem(this);else if(O.labels)for(let C of O.labels)z.legend.destroyItem(C);z.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(z){this.destroyItems(),super.remove(z)}getDataClassLegendSymbols(){let z,O=this,C=O.chart,A=O.legendItem&&O.legendItem.labels||[],F=C.options.legend,S=L(F.valueDecimals,-1),T=L(F.valueSuffix,""),D=P=>O.series.reduce((m,u)=>(m.push(...u.points.filter(v=>v.dataClass===P)),m),[]);return A.length||O.dataClasses.forEach((P,m)=>{let u=P.from,v=P.to,{numberFormatter:I}=C,E=!0;z="",u===void 0?z="< ":v===void 0&&(z="> "),u!==void 0&&(z+=I(u,S)+T),u!==void 0&&v!==void 0&&(z+=" - "),v!==void 0&&(z+=I(v,S)+T),A.push(y({chart:C,name:z,options:{},drawLegendSymbol:l.rectangle,visible:!0,isDataClass:!0,setState:R=>{for(let j of D(m))j.setState(R)},setVisible:function(){this.visible=E=O.visible=!E;let R=[];for(let j of D(m))j.setVisible(E),j.hiddenInDataClass=!E,R.indexOf(j.series)===-1&&R.push(j.series);C.legend.colorizeItem(this,E),R.forEach(j=>{b(j,"afterDataClassLegendClick")})}},P))}),A}getSize(){let{chart:z,horiz:O}=this,{height:C,width:A}=this.options,{legend:F}=z.options;return{width:L(p(A)?_(A,z.chartWidth):void 0,F?.symbolWidth,O?w.defaultLegendLength:12),height:L(p(C)?_(C,z.chartHeight):void 0,F?.symbolHeight,O?12:w.defaultLegendLength)}}}return w.defaultLegendLength=200,w.keepProps=["legendItem"],y(w.prototype,o),Array.prototype.push.apply(i.keepProps,w.keepProps),w}),e(t,"masters/modules/coloraxis.src.js",[t["Core/Globals.js"],t["Core/Axis/Color/ColorAxis.js"]],function(i,s){return i.ColorAxis=i.ColorAxis||s,i.ColorAxis.compose(i.Chart,i.Fx,i.Legend,i.Series),i}),e(t,"Maps/MapNavigationDefaults.js",[],function(){return{lang:{zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation:{buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}}}),e(t,"Maps/MapPointer.js",[t["Core/Utilities.js"]],function(i){var s;let{defined:r,extend:o,pick:a,wrap:l}=i;return function(h){let c,g=0;function d(x){let f=this.chart;x=this.normalize(x),f.options.mapNavigation.enableDoubleClickZoomTo?f.pointer.inClass(x.target,"highcharts-tracker")&&f.hoverPoint&&f.hoverPoint.zoomTo():f.isInsidePlot(x.chartX-f.plotLeft,x.chartY-f.plotTop)&&f.mapZoom(.5,void 0,void 0,x.chartX,x.chartY)}function p(x){let f=this.chart,M=r((x=this.normalize(x)).wheelDelta)&&-x.wheelDelta/120||x.deltaY||x.detail;Math.abs(M)>=1&&(g+=Math.abs(M),c&&clearTimeout(c),c=setTimeout(()=>{g=0},50)),g<10&&f.isInsidePlot(x.chartX-f.plotLeft,x.chartY-f.plotTop)&&f.mapView&&f.mapView.zoomBy(-((f.options.mapNavigation.mouseWheelSensitivity-1)*M),void 0,[x.chartX,x.chartY],!(1>Math.abs(M))&&void 0)}function y(x,f,M){let L=this.chart;if(f=x.call(this,f,M),L&&L.mapView){let _=L.mapView.pixelsToLonLat({x:f.chartX-L.plotLeft,y:f.chartY-L.plotTop});_&&o(f,_)}return f}function b(x){let f=this.chart.options.mapNavigation;f&&a(f.enableTouchZoom,f.enabled)&&(this.chart.zooming.pinchType="xy"),x.apply(this,[].slice.call(arguments,1))}h.compose=function(x){let f=x.prototype;f.onContainerDblClick||(o(f,{onContainerDblClick:d,onContainerMouseWheel:p}),l(f,"normalize",y),l(f,"zoomOption",b))}}(s||(s={})),s}),e(t,"Maps/MapSymbols.js",[],function(){let i;function s(o,a,l,h,c){if(c){let g=c?.r||0;c.brBoxY=a-g,c.brBoxHeight=h+g}return i.roundedRect(o,a,l,h,c)}function r(o,a,l,h,c){if(c){let g=c?.r||0;c.brBoxHeight=h+g}return i.roundedRect(o,a,l,h,c)}return{compose:function(o){(i=o.prototype.symbols).bottombutton=s,i.topbutton=r}}}),e(t,"Maps/MapNavigation.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Maps/MapNavigationDefaults.js"],t["Maps/MapPointer.js"],t["Maps/MapSymbols.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{setOptions:h}=i,{composed:c}=s,{addEvent:g,extend:d,merge:p,objectEach:y,pick:b,pushUnique:x}=l;function f(L){L&&(L.preventDefault&&L.preventDefault(),L.stopPropagation&&L.stopPropagation(),L.cancelBubble=!0)}class M{static compose(_,w,k){o.compose(w),a.compose(k),x(c,"Map.Navigation")&&(g(_,"beforeRender",function(){this.mapNavigation=new M(this),this.mapNavigation.update()}),h(r))}constructor(_){this.chart=_,this.navButtons=[]}update(_){let w=this,k=w.chart,z=w.navButtons,O=function(A){this.handler.call(k,A),f(A)},C=k.options.mapNavigation;for(_&&(C=k.options.mapNavigation=p(k.options.mapNavigation,_));z.length;)z.pop().destroy();if(!k.renderer.forExport&&b(C.enableButtons,C.enabled)){w.navButtonsGroup||(w.navButtonsGroup=k.renderer.g().attr({zIndex:7}).add()),y(C.buttons,(F,S)=>{let T={padding:(F=p(C.buttonOptions,F)).padding};!k.styledMode&&F.theme&&(d(T,F.theme),T.style=p(F.theme.style,F.style));let{text:D,width:P=0,height:m=0,padding:u=0}=F,v=k.renderer.button(D!=="+"&&D!=="-"&&D||"",0,0,O,T,void 0,void 0,void 0,S==="zoomIn"?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[S]).attr({width:P,height:m,title:k.options.lang[S],zIndex:5}).add(w.navButtonsGroup);if(D==="+"||D==="-"){let I=P+1,E=[["M",u+3,u+m/2],["L",u+I-3,u+m/2]];D==="+"&&E.push(["M",u+I/2,u+3],["L",u+I/2,u+m-3]),k.renderer.path(E).addClass("highcharts-button-symbol").attr(k.styledMode?{}:{stroke:F.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(v)}if(v.handler=F.onclick,g(v.element,"dblclick",f),z.push(v),d(F,{width:v.width,height:2*(v.height||0)}),k.hasLoaded)v.align(F,!1,F.alignTo);else{let I=g(k,"load",()=>{v.element&&v.align(F,!1,F.alignTo),I()})}});let A=(F,S)=>!(S.x>=F.x+F.width||S.x+S.width<=F.x||S.y>=F.y+F.height||S.y+S.height<=F.y);k.hasLoaded||g(k,"render",function(){let F=k.exportingGroup&&k.exportingGroup.getBBox();if(F){let S=w.navButtonsGroup.getBBox();if(A(F,S)){let T=-S.y-S.height+F.y-5,D=F.y+F.height-S.y+5,P=C.buttonOptions&&C.buttonOptions.verticalAlign;w.navButtonsGroup.attr({translateY:P==="bottom"?T:D})}}})}this.updateEvents(C)}updateEvents(_){let w=this.chart;b(_.enableDoubleClickZoom,_.enabled)||_.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||g(w.container,"dblclick",function(k){w.pointer.onContainerDblClick(k)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),b(_.enableMouseWheelZoom,_.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||g(w.container,"wheel",function(k){return w.pointer.inClass(k.target,"highcharts-no-mousewheel")||(w.pointer.onContainerMouseWheel(k),f(k)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}}return M}),e(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(i,s,r){var o;let{column:{prototype:a}}=i.seriesTypes,{addEvent:l,defined:h}=r;return function(c){function g(d){let p=this.series,y=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new s(y,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),d?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${y.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(d){let p={};return h(d.color)&&(!d.state||d.state==="normal")&&(p[this.colorProp||"fill"]=d.color),p},pointAttribs:a.pointAttribs},c.compose=function(d){return l(d.prototype.pointClass,"afterSetState",g),d}}(o||(o={})),o}),e(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(i,s,r,o){var a;let{getOptions:l}=s,{isNumber:h,merge:c,pick:g}=o;class d extends i{init(y,b){let x=l().credits,f=c({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:g(x.mapText,' \xA9 <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:g(x.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},y);super.init(f,b)}mapZoom(y,b,x,f,M){this.mapView&&(h(y)&&(y=Math.log(y)/Math.log(.5)),this.mapView.zoomBy(y,h(b)&&h(x)?this.mapView.projection.inverse([b,x]):void 0,h(f)&&h(M)?[f,M]:void 0))}update(y){y.chart&&"map"in y.chart&&this.mapView?.recommendMapView(this,[y.chart.map,...(this.options.series||[]).map(b=>b.mapData)],!0),super.update.apply(this,arguments)}}return(a=d||(d={})).maps={},a.mapChart=function(p,y,b){return new a(p,y,b)},a.splitPath=function(p){let y;return y=typeof p=="string"?(p=p.replace(/([A-Z])/gi," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(b=>/[A-Z]/i.test(b)?b:parseFloat(b)):p,r.prototype.pathToSegments(y)},d}),e(t,"Maps/MapUtilities.js",[],function(){return{boundsFromPath:function(i){let s=-Number.MAX_VALUE,r=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=Number.MAX_VALUE,l;if(i.forEach(h=>{let c=h[h.length-2],g=h[h.length-1];typeof c=="number"&&typeof g=="number"&&(r=Math.min(r,c),s=Math.max(s,c),a=Math.min(a,g),o=Math.max(o,g),l=!0)}),l)return{x1:r,y1:a,x2:s,y2:o}}}}),e(t,"Series/Map/MapPoint.js",[t["Series/ColorMapComposition.js"],t["Maps/MapUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{boundsFromPath:a}=s,l=r.seriesTypes.scatter.prototype.pointClass,{extend:h,isNumber:c,pick:g}=o;class d extends l{static getProjectedPath(y,b){return y.projectedPath||(b&&y.geometry?(b.hasCoordinates=!0,y.projectedPath=b.path(y.geometry)):y.projectedPath=y.path),y.projectedPath||[]}applyOptions(y,b){let x=this.series,f=super.applyOptions(y,b),M=x.joinBy;if(x.mapData&&x.mapMap){let L=M[1],_=super.getNestedProperty(L),w=_!==void 0&&x.mapMap[_];w?h(f,oi(re({},w),{name:f.name??w.name})):x.pointArrayMap.indexOf("value")!==-1&&(f.value=f.value||null)}return f}getProjectedBounds(y){let b=a(d.getProjectedPath(this,y)),x=this.properties,f=this.series.chart.mapView;if(b){let M=x&&x["hc-middle-lon"],L=x&&x["hc-middle-lat"];if(f&&c(M)&&c(L)){let _=y.forward([M,L]);b.midX=_[0],b.midY=_[1]}else{let _=x&&x["hc-middle-x"],w=x&&x["hc-middle-y"];b.midX=b.x1+(b.x2-b.x1)*g(this.middleX,c(_)?_:.5);let k=g(this.middleY,c(w)?w:.5);this.geometry||(k=1-k),b.midY=b.y2-(b.y2-b.y1)*k}return b}}onMouseOver(y){o.clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,y):this.series.onMouseOut()}setVisible(y){this.visible=this.options.visible=!!y,this.dataLabel&&this.dataLabel[y?"show":"hide"](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(y){let b=this.series.chart,x=b.mapView,f=this.bounds;if(x&&f){let M=c(this.insetIndex)&&x.insets[this.insetIndex];if(M){let L=M.projectedUnitsToPixels({x:f.x1,y:f.y1}),_=M.projectedUnitsToPixels({x:f.x2,y:f.y2}),w=x.pixelsToProjectedUnits({x:L.x,y:L.y}),k=x.pixelsToProjectedUnits({x:_.x,y:_.y});f={x1:w.x,y1:w.y,x2:k.x,y2:k.y}}x.fitToBounds(f,void 0,!1),this.series.isDirty=!0,b.redraw(y)}}}return h(d.prototype,{dataLabelOnNull:i.pointMembers.dataLabelOnNull,moveToTopOnHover:i.pointMembers.moveToTopOnHover,isValid:i.pointMembers.isValid}),d}),e(t,"Series/Map/MapSeriesDefaults.js",[t["Core/Utilities.js"]],function(i){let{isNumber:s}=i;return{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){let{numberFormatter:r}=this.series.chart,{value:o}=this.point;return s(o)?r(o,-1):this.point.name},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}}),e(t,"Maps/MapViewDefaults.js",[],function(){return{center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}}}),e(t,"Maps/GeoJSONComposition.js",[t["Core/Globals.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(i,s,r){var o;let{win:a}=i,{format:l}=s,{error:h,extend:c,merge:g,wrap:d}=r;return function(p){function y(_){return this.mapView&&this.mapView.lonLatToProjectedUnits(_)}function b(_){return this.mapView&&this.mapView.projectedUnitsToLonLat(_)}function x(_,w){let k=this.options.chart.proj4||a.proj4;if(!k){h(21,!1,this);return}let{jsonmarginX:z=0,jsonmarginY:O=0,jsonres:C=1,scale:A=1,xoffset:F=0,xpan:S=0,yoffset:T=0,ypan:D=0}=w,P=k(w.crs,[_.lon,_.lat]),m=w.cosAngle||w.rotation&&Math.cos(w.rotation),u=w.sinAngle||w.rotation&&Math.sin(w.rotation),v=w.rotation?[P[0]*m+P[1]*u,-P[0]*u+P[1]*m]:P;return{x:((v[0]-F)*A+S)*C+z,y:-(((T-v[1])*A+D)*C-O)}}function f(_,w){let k=this.options.chart.proj4||a.proj4;if(!k){h(21,!1,this);return}if(_.y===null)return;let{jsonmarginX:z=0,jsonmarginY:O=0,jsonres:C=1,scale:A=1,xoffset:F=0,xpan:S=0,yoffset:T=0,ypan:D=0}=w,P={x:((_.x-z)/C-S)/A+F,y:((_.y-O)/C+D)/A+T},m=w.cosAngle||w.rotation&&Math.cos(w.rotation),u=w.sinAngle||w.rotation&&Math.sin(w.rotation),v=k(w.crs,"WGS84",w.rotation?{x:P.x*m+-(P.y*u),y:P.x*u+P.y*m}:P);return{lat:v.y,lon:v.x}}function M(_,w){w||(w=Object.keys(_.objects)[0]);let k=_.objects[w];if(k["hc-decoded-geojson"]&&k["hc-decoded-geojson"].title===_.title)return k["hc-decoded-geojson"];let z=_.arcs;if(_.transform){let S,T,D,P=_.arcs,{scale:m,translate:u}=_.transform;z=[];for(let v=0,I=P.length;v<I;++v){let E=P[v];z.push(S=[]),T=0,D=0;for(let R=0,j=E.length;R<j;++R)S.push([(T+=E[R][0])*m[0]+u[0],(D+=E[R][1])*m[1]+u[1]])}}let O=S=>typeof S[0]=="number"?S.reduce((T,D,P)=>{let m=D<0?z[~D]:z[D];return D<0?(m=m.slice(0,P===0?m.length:m.length-1)).reverse():P&&(m=m.slice(1)),T.concat(m)},[]):S.map(O),C=k.geometries,A=[];for(let S=0,T=C.length;S<T;++S)A.push({type:"Feature",properties:C[S].properties,geometry:{type:C[S].type,coordinates:C[S].coordinates||O(C[S].arcs)}});let F={type:"FeatureCollection",copyright:_.copyright,copyrightShort:_.copyrightShort,copyrightUrl:_.copyrightUrl,features:A,"hc-recommended-mapview":k["hc-recommended-mapview"],bbox:_.bbox,title:_.title};return k["hc-decoded-geojson"]=F,F}function L(_,w){w=g(!0,this.options.credits,w),_.call(this,w),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}p.compose=function(_){let w=_.prototype;w.transformFromLatLon||(w.fromLatLonToPoint=y,w.fromPointToLatLon=b,w.transformFromLatLon=x,w.transformToLatLon=f,d(w,"addCredits",L))},p.geojson=function(_,w="map",k){let z=[],O=_.type==="Topology"?M(_):_,C=O.features;for(let A=0,F=C.length;A<F;++A){let S,T=C[A],D=T.geometry||{},P=D.type,m=D.coordinates,u=T.properties;if((w==="map"||w==="mapbubble")&&(P==="Polygon"||P==="MultiPolygon")?m.length&&(S={geometry:{coordinates:m,type:P}}):w==="mapline"&&(P==="LineString"||P==="MultiLineString")?m.length&&(S={geometry:{coordinates:m,type:P}}):w==="mappoint"&&P==="Point"&&m.length&&(S={geometry:{coordinates:m,type:P}}),S){let v=u&&(u.name||u.NAME),I=u&&u.lon,E=u&&u.lat;z.push(c(S,{lat:typeof E=="number"?E:void 0,lon:typeof I=="number"?I:void 0,name:typeof v=="string"?v:void 0,properties:u}))}}return k&&O.copyrightShort&&(k.chart.mapCredits=l(k.chart.options.credits?.mapText,{geojson:O}),k.chart.mapCreditsFull=l(k.chart.options.credits?.mapTextFull,{geojson:O})),z},p.topo2geo=M}(o||(o={})),o}),e(t,"Core/Geometry/PolygonClip.js",[],function(){function i(o,a,l=!0){let h=a[a.length-1],c,g,d,p=o;for(let y=0;y<a.length;y++){let b=p;c=a[y],p=[],g=l?b[b.length-1]:b[0];for(let x=0;x<b.length;x++)s(h,c,d=b[x])?(s(h,c,g)||p.push(r(h,c,g,d)),p.push(d)):s(h,c,g)&&p.push(r(h,c,g,d)),g=d;h=c}return p}function s(o,a,l){return(a[0]-o[0])*(l[1]-o[1])>(a[1]-o[1])*(l[0]-o[0])}function r(o,a,l,h){let c=[o[0]-a[0],o[1]-a[1]],g=[l[0]-h[0],l[1]-h[1]],d=o[0]*a[1]-o[1]*a[0],p=l[0]*h[1]-l[1]*h[0],y=1/(c[0]*g[1]-c[1]*g[0]),b=[(d*g[0]-p*c[0])*y,(d*g[1]-p*c[1])*y];return b.isIntersection=!0,b}return{clipLineString:function(o,a){let l=[],h=i(o,a,!1);for(let c=1;c<h.length;c++)h[c].isIntersection&&h[c-1].isIntersection&&(l.push(h.splice(0,c)),c=0),c===h.length-1&&l.push(h);return l},clipPolygon:i}}),e(t,"Maps/Projections/LambertConformalConic.js",[],function(){let i=Math.sign||(a=>a===0?0:a>0?1:-1),s=Math.PI/180,r=Math.PI/2,o=a=>Math.tan((r+a)/2);return class{constructor(a){let l=(a.parallels||[]).map(p=>p*s),h=l[0]||0,c=l[1]??h,g=Math.cos(h);typeof a.projectedBounds=="object"&&(this.projectedBounds=a.projectedBounds);let d=h===c?Math.sin(h):Math.log(g/Math.cos(c))/Math.log(o(c)/o(h));1e-10>Math.abs(d)&&(d=1e-10*(i(d)||1)),this.n=d,this.c=g*Math.pow(o(h),d)/d}forward(a){let{c:l,n:h,projectedBounds:c}=this,g=a[0]*s,d=a[1]*s;l>0?d<-r+1e-6&&(d=-r+1e-6):d>r-1e-6&&(d=r-1e-6);let p=l/Math.pow(o(d),h),y=p*Math.sin(h*g)*63.78137,b=(l-p*Math.cos(h*g))*63.78137,x=[y,b];return c&&(y<c.x1||y>c.x2||b<c.y1||b>c.y2)&&(x.outside=!0),x}inverse(a){let{c:l,n:h}=this,c=a[0]/63.78137,g=l-a[1]/63.78137,d=i(h)*Math.sqrt(c*c+g*g),p=Math.atan2(c,Math.abs(g))*i(g);return g*h<0&&(p-=Math.PI*i(c)*i(g)),[p/h/s,(2*Math.atan(Math.pow(l/d,1/h))-r)/s]}}}),e(t,"Maps/Projections/EqualEarth.js",[],function(){let i=Math.sqrt(3)/2;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(s){let r=Math.PI/180,o=Math.asin(i*Math.sin(s[1]*r)),a=o*o,l=a*a*a;return[s[0]*r*Math.cos(o)*74.03120656864502/(i*(1.340264+-.24331799999999998*a+l*(.0062510000000000005+.034164*a))),74.03120656864502*o*(1.340264+-.081106*a+l*(893e-6+.003796*a))]}inverse(s){let r=s[0]/74.03120656864502,o=s[1]/74.03120656864502,a=180/Math.PI,l=o,h,c,g,d;for(let b=0;b<12&&(c=(h=l*l)*h*h,g=l*(1.340264+-.081106*h+c*(893e-6+.003796*h))-o,l-=d=g/(1.340264+-.24331799999999998*h+c*(.0062510000000000005+.034164*h)),!(1e-9>Math.abs(d)));++b);c=(h=l*l)*h*h;let p=a*i*r*(1.340264+-.24331799999999998*h+c*(.0062510000000000005+.034164*h))/Math.cos(l),y=a*Math.asin(Math.sin(l)/i);return Math.abs(p)>180?[NaN,NaN]:[p,y]}}}),e(t,"Maps/Projections/Miller.js",[],function(){let i=Math.PI/4,s=Math.PI/180;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(r){return[r[0]*s*63.78137,79.7267125*Math.log(Math.tan(i+.4*r[1]*s))]}inverse(r){return[r[0]/63.78137/s,2.5*(Math.atan(Math.exp(.8*(r[1]/63.78137)))-i)/s]}}}),e(t,"Maps/Projections/Orthographic.js",[],function(){let i=Math.PI/180;return class{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}forward(s){let r=s[0],o=s[1]*i,a=[Math.cos(o)*Math.sin(r*i)*63.78460826781007,63.78460826781007*Math.sin(o)];return(r<-90||r>90)&&(a.outside=!0),a}inverse(s){let r=s[0]/63.78460826781007,o=s[1]/63.78460826781007,a=Math.sqrt(r*r+o*o),l=Math.asin(a),h=Math.sin(l);return[Math.atan2(r*h,a*Math.cos(l))/i,Math.asin(a&&o*h/a)/i]}}}),e(t,"Maps/Projections/WebMercator.js",[],function(){let i=Math.PI/180;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(s){let r=Math.sin(s[1]*i),o=[63.78137*s[0]*i,63.78137*Math.log((1+r)/(1-r))/2];return Math.abs(s[1])>this.maxLatitude&&(o.outside=!0),o}inverse(s){return[s[0]/(63.78137*i),(2*Math.atan(Math.exp(s[1]/63.78137))-Math.PI/2)/i]}}}),e(t,"Maps/Projections/ProjectionRegistry.js",[t["Maps/Projections/LambertConformalConic.js"],t["Maps/Projections/EqualEarth.js"],t["Maps/Projections/Miller.js"],t["Maps/Projections/Orthographic.js"],t["Maps/Projections/WebMercator.js"]],function(i,s,r,o,a){return{EqualEarth:s,LambertConformalConic:i,Miller:r,Orthographic:o,WebMercator:a}}),e(t,"Maps/Projection.js",[t["Core/Geometry/PolygonClip.js"],t["Maps/Projections/ProjectionRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{clipLineString:o,clipPolygon:a}=i,{clamp:l,erase:h}=r,c=2*Math.PI/360,g=b=>(b<-180&&(b+=360),b>180&&(b-=360),b),d=b=>(1-Math.cos(b))/2,p=(b,x)=>{let f=Math.cos,M=b[1]*c,L=b[0]*c,_=x[1]*c,w=x[0]*c;return d(_-M)+f(M)*f(_)*d(w-L)};class y{static add(x,f){y.registry[x]=f}static distance(x,f){let{atan2:M,sqrt:L}=Math,_=p(x,f);return 6371e3*(2*M(L(_),L(1-_)))}static geodesic(x,f,M,L=5e5){let{atan2:_,cos:w,sin:k,sqrt:z}=Math,O=y.distance,C=x[1]*c,A=x[0]*c,F=f[1]*c,S=f[0]*c,T=w(C)*w(A),D=w(F)*w(S),P=w(C)*k(A),m=w(F)*k(S),u=k(C),v=k(F),I=O(x,f),E=I/6371e3,R=k(E),j=Math.round(I/L),G=[];if(M&&G.push(x),j>1){let W=1/j;for(let N=W;N<.999;N+=W){let B=k((1-N)*E)/R,X=k(N*E)/R,V=B*T+X*D,H=B*P+X*m,K=_(B*u+X*v,z(V*V+H*H)),U=_(H,V);G.push([U/c,K/c])}}return M&&G.push(f),G}static insertGeodesics(x){let f=x.length-1;for(;f--;)if(Math.max(Math.abs(x[f][0]-x[f+1][0]),Math.abs(x[f][1]-x[f+1][1]))>10){let M=y.geodesic(x[f],x[f+1]);M.length&&x.splice(f+1,0,...M)}}static toString(x){let{name:f,rotation:M}=x||{};return[f,M&&M.join(",")].join(";")}constructor(x={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90,this.options=x;let{name:f,projectedBounds:M,rotation:L}=x;this.rotator=L?this.getRotator(L):void 0;let _=f?y.registry[f]:void 0;_&&(this.def=new _(x));let{def:w,rotator:k}=this;w&&(this.maxLatitude=w.maxLatitude||90,this.hasGeoProjection=!0),k&&w?(this.forward=z=>w.forward(k.forward(z)),this.inverse=z=>k.inverse(w.inverse(z))):w?(this.forward=z=>w.forward(z),this.inverse=z=>w.inverse(z)):k&&(this.forward=k.forward,this.inverse=k.inverse),this.bounds=M==="world"?w&&w.bounds:M}lineIntersectsBounds(x){let{x1:f,x2:M,y1:L,y2:_}=this.bounds||{},w=(O,C,A)=>{let[F,S]=O,T=C?0:1;if(typeof A=="number"&&F[C]>=A!=S[C]>=A){let D=(A-F[C])/(S[C]-F[C]),P=F[T]+D*(S[T]-F[T]);return C?[P,A]:[A,P]}},k,z=x[0];return((k=w(x,0,f))||(k=w(x,0,M)))&&(z=k,x[1]=k),((k=w(x,1,L))||(k=w(x,1,_)))&&(z=k),z}getRotator(x){let f=x[0]*c,M=(x[1]||0)*c,L=(x[2]||0)*c,_=Math.cos(M),w=Math.sin(M),k=Math.cos(L),z=Math.sin(L);if(f!==0||M!==0||L!==0)return{forward:O=>{let C=O[0]*c+f,A=O[1]*c,F=Math.cos(A),S=Math.cos(C)*F,T=Math.sin(C)*F,D=Math.sin(A),P=D*_+S*w;return[Math.atan2(T*k-P*z,S*_-D*w)/c,Math.asin(P*k+T*z)/c]},inverse:O=>{let C=O[0]*c,A=O[1]*c,F=Math.cos(A),S=Math.cos(C)*F,T=Math.sin(C)*F,D=Math.sin(A),P=D*k-T*z;return[(Math.atan2(T*k+D*z,S*_+P*w)-f)/c,Math.asin(P*_-S*w)/c]}}}forward(x){return x}inverse(x){return x}cutOnAntimeridian(x,f){let M,L=[],_=[x];for(let w=0,k=x.length;w<k;++w){let z=x[w],O=x[w-1];if(!w){if(!f)continue;O=x[x.length-1]}let C=O[0],A=z[0];if((C<-90||C>90)&&(A<-90||A>90)&&C>0!=A>0){let F=l((180-(C+360)%360)/((A+360)%360-(C+360)%360),0,1),S=O[1]+F*(z[1]-O[1]);L.push({i:w,lat:S,direction:C<0?1:-1,previousLonLat:O,lonLat:z})}}if(L.length)if(f){L.length%2==1&&(M=L.slice().sort((k,z)=>Math.abs(z.lat)-Math.abs(k.lat))[0],h(L,M));let w=L.length-2;for(;w>=0;){let k=L[w].i,z=g(180+1e-6*L[w].direction),O=g(180-1e-6*L[w].direction),C=x.splice(k,L[w+1].i-k,...y.geodesic([z,L[w].lat],[z,L[w+1].lat],!0));C.push(...y.geodesic([O,L[w+1].lat],[O,L[w].lat],!0)),_.push(C),w-=2}if(M)for(let k=0;k<_.length;k++){let{direction:z,lat:O}=M,C=_[k],A=C.indexOf(M.lonLat);if(A>-1){let F=(O<0?-1:1)*this.maxLatitude,S=g(180+1e-6*z),T=g(180-1e-6*z),D=y.geodesic([S,O],[S,F],!0);for(let P=S+120*z;P>-180&&P<180;P+=120*z)D.push([P,F]);D.push(...y.geodesic([T,F],[T,M.lat],!0)),C.splice(A,0,...D);break}}}else{let w=L.length;for(;w--;){let k=L[w].i,z=x.splice(k,x.length,[g(180+1e-6*L[w].direction),L[w].lat]);z.unshift([g(180-1e-6*L[w].direction),L[w].lat]),_.push(z)}}return _}path(x){let f,{bounds:M,def:L,rotator:_}=this,w=[],k=x.type==="Polygon"||x.type==="MultiPolygon",z=this.hasGeoProjection,O=!L||L.antimeridianCutting!==!1,C=O?_:void 0,A=O&&L||this;M&&(f=[[M.x1,M.y1],[M.x2,M.y1],[M.x2,M.y2],[M.x1,M.y2]]);let F=S=>{let T=S.map(P=>{if(O){C&&(P=C.forward(P));let m=P[0];1e-6>Math.abs(m-180)&&(m=m<180?179.999999:180.000001),P=[m,P[1]]}return P}),D=[T];z&&(y.insertGeodesics(T),O&&(D=this.cutOnAntimeridian(T,k))),D.forEach(P=>{let m,u;if(P.length<2)return;let v=!1,I=!1,E=W=>{v?w.push(["L",W[0],W[1]]):(w.push(["M",W[0],W[1]]),v=!0)},R=!1,j=!1,G=P.map(W=>{let N=A.forward(W);return N.outside?R=!0:j=!0,N[1]===1/0?N[1]=1e10:N[1]===-1/0&&(N[1]=-1e10),N});if(O){if(k&&G.push(G[0]),R){if(!j)return;if(f){if(k)G=a(G,f);else if(M){o(G,f).forEach(W=>{v=!1,W.forEach(E)});return}}}G.forEach(E)}else for(let W=0;W<G.length;W++){let N=P[W],B=G[W];B.outside?I=!0:(k&&!m&&(m=N,P.push(N),G.push(B)),I&&u&&(k&&z?y.geodesic(u,N).forEach(X=>E(A.forward(X))):v=!1),E(B),u=N,I=!1)}})};return x.type==="LineString"?F(x.coordinates):x.type==="MultiLineString"?x.coordinates.forEach(S=>F(S)):x.type==="Polygon"?(x.coordinates.forEach(S=>F(S)),w.length&&w.push(["Z"])):x.type==="MultiPolygon"&&(x.coordinates.forEach(S=>{S.forEach(T=>F(T))}),w.length&&w.push(["Z"])),w}}return y.registry=s,y}),e(t,"Maps/MapView.js",[t["Core/Globals.js"],t["Maps/MapViewDefaults.js"],t["Maps/GeoJSONComposition.js"],t["Core/Geometry/GeometryUtilities.js"],t["Maps/MapUtilities.js"],t["Maps/Projection.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h){let{composed:c}=i,{pointInPolygon:g}=o,{topo2geo:d}=r,{boundsFromPath:p}=a,{addEvent:y,clamp:b,crisp:x,fireEvent:f,isArray:M,isNumber:L,isObject:_,isString:w,merge:k,pick:z,pushUnique:O,relativeLength:C}=h,A={};function F(P,m){let{width:u,height:v}=m;return Math.log(400.979322/Math.max((P.x2-P.x1)/(u/256),(P.y2-P.y1)/(v/256)))/Math.log(2)}function S(P){P.seriesOptions.mapData&&this.mapView?.recommendMapView(this,[this.options.chart.map,P.seriesOptions.mapData],this.options.drilldown?.mapZooming)}class T{static compose(m){O(c,"MapView")&&(A=m.maps,y(m,"afterInit",function(){this.mapView=new T(this,this.options.mapView)},{order:0}),y(m,"addSeriesAsDrilldown",S),y(m,"afterDrillUp",S))}static compositeBounds(m){if(m.length)return m.slice(1).reduce((u,v)=>(u.x1=Math.min(u.x1,v.x1),u.y1=Math.min(u.y1,v.y1),u.x2=Math.max(u.x2,v.x2),u.y2=Math.max(u.y2,v.y2),u),k(m[0]))}static mergeInsets(m,u){let v=E=>{let R={};return E.forEach((j,G)=>{R[j&&j.id||`i${G}`]=j}),R},I=k(v(m),v(u));return Object.keys(I).map(E=>I[E])}constructor(m,u){this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],this.recommendedMapView={},this instanceof D||this.recommendMapView(m,[m.options.chart.map,...(m.options.series||[]).map(R=>R.mapData)]),this.userOptions=u||{};let v=k(s,this.recommendedMapView,u),I=this.recommendedMapView?.insets,E=u&&u.insets;I&&E&&(v.insets=T.mergeInsets(I,E)),this.chart=m,this.center=v.center,this.options=v,this.projection=new l(v.projection),this.playingField=m.plotBox,this.zoom=v.zoom||0,this.minZoom=v.minZoom,this.createInsets(),this.eventsToUnbind.push(y(m,"afterSetChartSize",()=>{this.playingField=this.getField(),(this.minZoom===void 0||this.minZoom===this.zoom)&&(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&L(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&k(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){let m=this.options,u=m.insets;u&&u.forEach(v=>{let I=new D(this,k(m.insetOptions,v));this.insets.push(I)})}fitToBounds(m,u,v=!0,I){let E=m||this.getProjectedBounds();if(E){let R=z(u,m?0:this.options.padding),j=this.getField(!1),G=M(R)?R:[R,R,R,R];this.padding=[C(G[0],j.height),C(G[1],j.width),C(G[2],j.height),C(G[3],j.width)],this.playingField=this.getField();let W=F(E,this.playingField);m||(this.minZoom=W);let N=this.projection.inverse([(E.x2+E.x1)/2,(E.y2+E.y1)/2]);this.setView(N,W,v,I)}}getField(m=!0){let u=m?this.padding:[0,0,0,0];return{x:u[3],y:u[0],width:this.chart.plotWidth-u[1]-u[3],height:this.chart.plotHeight-u[0]-u[2]}}getGeoMap(m){if(w(m))return A[m]&&A[m].type==="Topology"?d(A[m]):A[m];if(_(m,!0)){if(m.type==="FeatureCollection")return m;if(m.type==="Topology")return d(m)}}getMapBBox(){let m=this.getProjectedBounds(),u=this.getScale();if(m){let v=this.padding,I=this.projectedUnitsToPixels({x:m.x1,y:m.y2});return{width:(m.x2-m.x1)*u+v[1]+v[3],height:(m.y2-m.y1)*u+v[0]+v[2],x:I.x-v[3],y:I.y-v[0]}}}getProjectedBounds(){let m=this.projection,u=this.chart.series.reduce((I,E)=>{let R=E.getProjectedBounds&&E.getProjectedBounds();return R&&E.options.affectsMapView!==!1&&I.push(R),I},[]),v=this.options.fitToGeometry;if(v){if(!this.fitToGeometryCache)if(v.type==="MultiPoint"){let I=v.coordinates.map(j=>m.forward(j)),E=I.map(j=>j[0]),R=I.map(j=>j[1]);this.fitToGeometryCache={x1:Math.min.apply(0,E),x2:Math.max.apply(0,E),y1:Math.min.apply(0,R),y2:Math.max.apply(0,R)}}else this.fitToGeometryCache=p(m.path(v));return this.fitToGeometryCache}return this.projection.bounds||T.compositeBounds(u)}getScale(){return 256/400.979322*Math.pow(2,this.zoom)}getSVGTransform(){let{x:m,y:u,width:v,height:I}=this.playingField,E=this.projection.forward(this.center),R=this.projection.hasCoordinates?-1:1,j=this.getScale(),G=j*R,W=m+v/2-E[0]*j,N=u+I/2-E[1]*G;return{scaleX:j,scaleY:G,translateX:W,translateY:N}}lonLatToPixels(m){let u=this.lonLatToProjectedUnits(m);if(u)return this.projectedUnitsToPixels(u)}lonLatToProjectedUnits(m){let u=this.chart,v=u.mapTransforms;if(v){for(let E in v)if(Object.hasOwnProperty.call(v,E)&&v[E].hitZone){let R=u.transformFromLatLon(m,v[E]);if(R&&g(R,v[E].hitZone.coordinates[0]))return R}return u.transformFromLatLon(m,v.default)}for(let E of this.insets)if(E.options.geoBounds&&g({x:m.lon,y:m.lat},E.options.geoBounds.coordinates[0])){let R=E.projection.forward([m.lon,m.lat]),j=E.projectedUnitsToPixels({x:R[0],y:R[1]});return this.pixelsToProjectedUnits(j)}let I=this.projection.forward([m.lon,m.lat]);if(!I.outside)return{x:I[0],y:I[1]}}projectedUnitsToLonLat(m){let u=this.chart,v=u.mapTransforms;if(v){for(let R in v)if(Object.hasOwnProperty.call(v,R)&&v[R].hitZone&&g(m,v[R].hitZone.coordinates[0]))return u.transformToLatLon(m,v[R]);return u.transformToLatLon(m,v.default)}let I=this.projectedUnitsToPixels(m);for(let R of this.insets)if(R.hitZone&&g(I,R.hitZone.coordinates[0])){let j=R.pixelsToProjectedUnits(I),G=R.projection.inverse([j.x,j.y]);return{lon:G[0],lat:G[1]}}let E=this.projection.inverse([m.x,m.y]);return{lon:E[0],lat:E[1]}}recommendMapView(m,u,v=!1){this.recommendedMapView={};let I=u.map(j=>this.getGeoMap(j)),E=[];I.forEach(j=>{if(j&&(Object.keys(this.recommendedMapView).length||(this.recommendedMapView=j["hc-recommended-mapview"]||{}),j.bbox)){let[G,W,N,B]=j.bbox;E.push({x1:G,y1:W,x2:N,y2:B})}});let R=E.length&&T.compositeBounds(E);f(this,"onRecommendMapView",{geoBounds:R,chart:m},function(){if(R&&this.recommendedMapView){if(!this.recommendedMapView.projection){let{x1:j,y1:G,x2:W,y2:N}=R;this.recommendedMapView.projection=W-j>180&&N-G>90?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[G,N],rotation:[-(j+W)/2]}}this.recommendedMapView.insets||(this.recommendedMapView.insets=void 0)}}),this.geoMap=I[0],v&&m.hasRendered&&!m.userOptions.mapView?.projection&&this.recommendedMapView&&this.update(this.recommendedMapView)}redraw(m){this.chart.series.forEach(u=>{u.useMapGeometry&&(u.isDirty=!0)}),this.chart.redraw(m)}setView(m,u,v=!0,I){m&&(this.center=m),typeof u=="number"&&(typeof this.minZoom=="number"&&(u=Math.max(u,this.minZoom)),typeof this.options.maxZoom=="number"&&(u=Math.min(u,this.options.maxZoom)),L(u)&&(this.zoom=u));let E=this.getProjectedBounds();if(E){let R=this.projection.forward(this.center),{x:j,y:G,width:W,height:N}=this.playingField,B=this.getScale(),X=this.projectedUnitsToPixels({x:E.x1,y:E.y1}),V=this.projectedUnitsToPixels({x:E.x2,y:E.y2}),H=[(E.x1+E.x2)/2,(E.y1+E.y2)/2];if(!this.chart.series.some(K=>K.isDrilling)){let K=X.x,U=V.y,Y=V.x,Z=X.y;Y-K<W?R[0]=H[0]:K<j&&Y<j+W?R[0]+=Math.max(K-j,Y-W-j)/B:Y>j+W&&K>j&&(R[0]+=Math.min(Y-W-j,K-j)/B),Z-U<N?R[1]=H[1]:U<G&&Z<G+N?R[1]-=Math.max(U-G,Z-N-G)/B:Z>G+N&&U>G&&(R[1]-=Math.min(Z-N-G,U-G)/B),this.center=this.projection.inverse(R)}this.insets.forEach(K=>{K.options.field&&(K.hitZone=K.getHitZone(),K.playingField=K.getField())}),this.render()}f(this,"afterSetView"),v&&this.redraw(I)}projectedUnitsToPixels(m){let u=this.getScale(),v=this.projection.forward(this.center),I=this.playingField,E=I.x+I.width/2,R=I.y+I.height/2;return{x:E-u*(v[0]-m.x),y:R+u*(v[1]-m.y)}}pixelsToLonLat(m){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(m))}pixelsToProjectedUnits(m){let{x:u,y:v}=m,I=this.getScale(),E=this.projection.forward(this.center),R=this.playingField,j=R.x+R.width/2,G=R.y+R.height/2;return{x:E[0]+(u-j)/I,y:E[1]-(v-G)/I}}setUpEvents(){let m,u,v,{chart:I}=this,E=R=>{let{lastTouches:j,pinchDown:G}=I.pointer,W=this.projection,N=R.touches,{mouseDownX:B,mouseDownY:X}=I,V=0;if(G?.length===1?(B=G[0].chartX,X=G[0].chartY):G?.length===2&&(B=(G[0].chartX+G[1].chartX)/2,X=(G[0].chartY+G[1].chartY)/2),N?.length===2&&j&&(V=Math.log(Math.sqrt(Math.pow(j[0].chartX-j[1].chartX,2)+Math.pow(j[0].chartY-j[1].chartY,2))/Math.sqrt(Math.pow(N[0].chartX-N[1].chartX,2)+Math.pow(N[0].chartY-N[1].chartY,2)))/Math.log(.5)),L(B)&&L(X)){let H=`${B},${X}`,{chartX:K,chartY:U}=R.originalEvent;N?.length===2&&(K=(N[0].chartX+N[1].chartX)/2,U=(N[0].chartY+N[1].chartY)/2),H!==u&&(u=H,m=this.projection.forward(this.center),v=(this.projection.options.rotation||[0,0]).slice());let Y=W.def&&W.def.bounds,Z=Y&&F(Y,this.playingField)||-1/0;if(W.options.name==="Orthographic"&&2>(N?.length||0)&&(this.minZoom||1/0)<1.3*Z){let q=440/(this.getScale()*Math.min(I.plotWidth,I.plotHeight));if(v){let J=(B-K)*q-v[0],Q=b(-v[1]-(X-U)*q,-80,80),$=this.zoom;this.update({projection:{rotation:[-J,-Q]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=$,I.redraw(!1)}}else if(L(K)&&L(U)){let q=this.getScale(),J=this.projection.hasCoordinates?1:-1,Q=this.projection.inverse([m[0]+(B-K)/q,m[1]-(X-U)/q*J]);isNaN(Q[0]+Q[1])||this.zoomBy(V,Q,void 0,!1)}R.preventDefault()}};y(I,"pan",E),y(I,"touchpan",E),y(I,"selection",R=>{if(R.resetSelection)this.zoomBy();else{let j=R.x-I.plotLeft,G=R.y-I.plotTop,{y:W,x:N}=this.pixelsToProjectedUnits({x:j,y:G}),{y:B,x:X}=this.pixelsToProjectedUnits({x:j+R.width,y:G+R.height});this.fitToBounds({x1:N,y1:W,x2:X,y2:B},void 0,!0,!R.originalEvent.touches&&void 0),/^touch/.test(R.originalEvent.type)||I.showResetZoom(),R.preventDefault()}})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(m,u=!0,v){let I=m.projection,E=I&&l.toString(I)!==l.toString(this.options.projection),R=!1;k(!0,this.userOptions,m),k(!0,this.options,m),"insets"in m&&(this.insets.forEach(j=>j.destroy()),this.insets.length=0,R=!0),(E||"fitToGeometry"in m)&&delete this.fitToGeometryCache,(E||R)&&(this.chart.series.forEach(j=>{let G=j.transformGroups;if(j.clearBounds&&j.clearBounds(),j.isDirty=!0,j.isDirtyData=!0,R&&G)for(;G.length>1;){let W=G.pop();W&&W.destroy()}}),E&&(this.projection=new l(this.options.projection)),R&&this.createInsets(),!m.center&&Object.hasOwnProperty.call(m,"zoom")&&!L(m.zoom)&&this.fitToBounds(void 0,void 0,!1)),m.center||L(m.zoom)?this.setView(this.options.center,m.zoom,!1):"fitToGeometry"in m&&this.fitToBounds(void 0,void 0,!1),u&&this.chart.redraw(v)}zoomBy(m,u,v,I){let E=this.chart,R=this.projection.forward(this.center);if(typeof m=="number"){let j,G,W,N=this.zoom+m;if(v){let[B,X]=v,V=this.getScale(),H=B-E.plotLeft-E.plotWidth/2,K=X-E.plotTop-E.plotHeight/2;G=R[0]+H/V,W=R[1]+K/V}if(typeof G=="number"&&typeof W=="number"){let B=1-Math.pow(2,this.zoom)/Math.pow(2,N),X=R[0]-G,V=R[1]-W;R[0]-=X*B,R[1]+=V*B,j=this.projection.inverse(R)}this.setView(u||j,N,void 0,I)}else this.fitToBounds(void 0,void 0,void 0,I)}}class D extends T{constructor(m,u){if(super(m.chart,u),this.id=u.id,this.mapView=m,this.options=k({center:[0,0]},m.options.insetOptions,u),this.allBounds=[],this.options.geoBounds){let v=m.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=p(v),this.geoBoundsProjectedPolygon=v.map(I=>[I[1]||0,I[2]||0])}}getField(m=!0){let u=this.hitZone;if(u){let v=m?this.padding:[0,0,0,0],I=u.coordinates[0],E=I.map(B=>B[0]),R=I.map(B=>B[1]),j=Math.min.apply(0,E)+v[3],G=Math.max.apply(0,E)-v[1],W=Math.min.apply(0,R)+v[0],N=Math.max.apply(0,R)-v[2];if(L(j)&&L(W))return{x:j,y:W,width:G-j,height:N-W}}return super.getField.call(this,m)}getHitZone(){let{chart:m,mapView:u,options:v}=this,{coordinates:I}=v.field||{};if(I){let E=I[0];if(v.units==="percent"){let R=v.relativeTo==="mapBoundingBox"&&u.getMapBBox()||k(m.plotBox,{x:0,y:0});E=E.map(j=>[C(`${j[0]}%`,R.width,R.x),C(`${j[1]}%`,R.height,R.y)])}return{type:"Polygon",coordinates:[E]}}}getProjectedBounds(){return T.compositeBounds(this.allBounds)}isInside(m){let{geoBoundsProjectedBox:u,geoBoundsProjectedPolygon:v}=this;return!!(u&&m.x>=u.x1&&m.x<=u.x2&&m.y>=u.y1&&m.y<=u.y2&&v&&g(m,v))}render(){let{chart:m,mapView:u,options:v}=this,I=v.borderPath||v.field;if(I&&u.group){let E=!0;this.border||(this.border=m.renderer.path().addClass("highcharts-mapview-inset-border").add(u.group),E=!1),m.styledMode||this.border.attr({stroke:v.borderColor,"stroke-width":v.borderWidth});let R=this.border.strokeWidth(),j=v.relativeTo==="mapBoundingBox"&&u.getMapBBox()||u.playingField,G=(I.coordinates||[]).reduce((W,N)=>N.reduce((B,X,V)=>{let[H,K]=X;return v.units==="percent"&&(H=m.plotLeft+C(`${H}%`,j.width,j.x),K=m.plotTop+C(`${K}%`,j.height,j.y)),H=x(H,R),K=x(K,R),B.push(V===0?["M",H,K]:["L",H,K]),B},W),[]);this.border[E?"animate":"attr"]({d:G})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(m=>m())}setUpEvents(){}}return T}),e(t,"Series/Map/MapSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/ColorMapComposition.js"],t["Series/CenteredUtilities.js"],t["Core/Globals.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Series/Map/MapSeriesDefaults.js"],t["Maps/MapView.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c,g,d){let{animObject:p,stop:y}=i,{noop:b}=o,{splitPath:x}=a,{column:f,scatter:M}=g.seriesTypes,{extend:L,find:_,fireEvent:w,getNestedProperty:k,isArray:z,defined:O,isNumber:C,isObject:A,merge:F,objectEach:S,pick:T,splat:D}=d;class P extends M{constructor(){super(...arguments),this.processedData=[]}animate(u){let{chart:v,group:I}=this,E=p(this.options.animation);u?I.attr({translateX:v.plotLeft+v.plotWidth/2,translateY:v.plotTop+v.plotHeight/2,scaleX:.001,scaleY:.001}):I.animate({translateX:v.plotLeft,translateY:v.plotTop,scaleX:1,scaleY:1},E)}clearBounds(){this.points.forEach(u=>{delete u.bounds,delete u.insetIndex,delete u.projectedPath}),delete this.bounds}doFullTranslate(){return!!(this.isDirtyData||this.chart.isResizing||!this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}drawPoints(){let u=this,{chart:v,group:I,transformGroups:E=[]}=this,{mapView:R,renderer:j}=v;if(R){this.transformGroups=E,E[0]||(E[0]=j.g().add(I));for(let G=0,W=R.insets.length;G<W;++G)E[G+1]||E.push(j.g().add(I));this.doFullTranslate()&&(this.points.forEach(G=>{let{graphic:W}=G;G.group=E[typeof G.insetIndex=="number"?G.insetIndex+1:0],W&&W.parentGroup!==G.group&&W.add(G.group)}),f.prototype.drawPoints.apply(this),this.points.forEach(G=>{let W=G.graphic;if(W){let N=W.animate,B="";G.name&&(B+="highcharts-name-"+G.name.replace(/ /g,"-").toLowerCase()),G.properties&&G.properties["hc-key"]&&(B+=" highcharts-key-"+G.properties["hc-key"].toString().toLowerCase()),B&&W.addClass(B),v.styledMode&&W.css(this.pointAttribs(G,G.selected&&"select"||void 0)),W.attr({visibility:!G.visible&&(G.visible||G.isNull)?"hidden":"inherit"}),W.animate=function(X,V,H){let K=C(X["stroke-width"])&&!C(W["stroke-width"]),U=C(W["stroke-width"])&&!C(X["stroke-width"]);if(K||U){let Y=T(u.getStrokeWidth(u.options),1)/(v.mapView&&v.mapView.getScale()||1);K&&(W["stroke-width"]=Y),U&&(X["stroke-width"]=Y)}return N.call(W,X,V,U?function(){W.element.removeAttribute("stroke-width"),delete W["stroke-width"],H&&H.apply(this,arguments)}:H)}}})),E.forEach((G,W)=>{let N=(W===0?R:R.insets[W-1]).getSVGTransform(),B=T(this.getStrokeWidth(this.options),1),X=N.scaleX,V=N.scaleY>0?1:-1,H=K=>{(u.points||[]).forEach(U=>{let Y,Z=U.graphic;Z&&Z["stroke-width"]&&(Y=this.getStrokeWidth(U.options))&&Z.attr({"stroke-width":Y/K})})};if(j.globalAnimation&&v.hasRendered&&R.allowTransformAnimation){let K=Number(G.attr("translateX")),U=Number(G.attr("translateY")),Y=Number(G.attr("scaleX")),Z=(Q,$)=>{let tt=Y+(X-Y)*$.pos;G.attr({translateX:K+(N.translateX-K)*$.pos,translateY:U+(N.translateY-U)*$.pos,scaleX:tt,scaleY:tt*V,"stroke-width":B/tt}),H(tt)},q=F(p(j.globalAnimation)),J=q.step;q.step=function(){J&&J.apply(this,arguments),Z.apply(this,arguments)},G.attr({animator:0}).animate({animator:1},q,function(){typeof j.globalAnimation!="boolean"&&j.globalAnimation.complete&&j.globalAnimation.complete({applyDrilldown:!0}),w(this,"mapZoomComplete")}.bind(this))}else y(G),G.attr(F(N,{"stroke-width":B/X})),H(X)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){let{insets:u,projection:v}=this.chart.mapView,I=[];(this.points||[]).forEach(E=>{if(E.path||E.geometry){if(typeof E.path=="string"?E.path=x(E.path):z(E.path)&&E.path[0]==="M"&&(E.path=this.chart.renderer.pathToSegments(E.path)),!E.bounds){let R=E.getProjectedBounds(v);if(R){E.labelrank=T(E.labelrank,(R.x2-R.x1)*(R.y2-R.y1));let{midX:j,midY:G}=R;if(u&&C(j)&&C(G)){let W=_(u,N=>N.isInside({x:j,y:G}));W&&(delete E.projectedPath,(R=E.getProjectedBounds(W.projection))&&W.allBounds.push(R),E.insetIndex=u.indexOf(W))}E.bounds=R}}E.bounds&&E.insetIndex===void 0&&I.push(E.bounds)}}),this.bounds=c.compositeBounds(I)}return this.bounds}getStrokeWidth(u){let v=this.pointAttrToOptions;return u[v&&v["stroke-width"]||"borderWidth"]}hasData(){return!!this.processedXData.length}pointAttribs(u,v){let{mapView:I,styledMode:E}=u.series.chart,R=E?this.colorAttribs(u):f.prototype.pointAttribs.call(this,u,v),j=this.getStrokeWidth(u.options);if(v){let W=F(this.options.states&&this.options.states[v],u.options.states&&u.options.states[v]||{}),N=this.getStrokeWidth(W);O(N)&&(j=N),R.stroke=W.borderColor??u.color}j&&I&&(j/=I.getScale());let G=this.getStrokeWidth(this.options);return R.dashstyle&&I&&C(G)&&(j=G/I.getScale()),u.visible||(R.fill=this.options.nullColor),O(j)?R["stroke-width"]=j:delete R["stroke-width"],R["stroke-linecap"]=R["stroke-linejoin"]=this.options.linecap,R}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(u,v=!0,I,E){delete this.bounds,super.setData(u,!1,void 0,E),this.processData(),this.generatePoints(),v&&this.chart.redraw(I)}processData(){let u,v,I,E=this.options,R=E.data,j=this.chart,G=j.options.chart,W=this.joinBy,N=E.keys||this.pointArrayMap,B=[],X={},V=this.chart.mapView,H=V&&(A(E.mapData,!0)?V.getGeoMap(E.mapData):V.geoMap),K=j.mapTransforms=G.mapTransforms||H&&H["hc-transform"]||j.mapTransforms;K&&S(K,Y=>{Y.rotation&&(Y.cosAngle=Math.cos(Y.rotation),Y.sinAngle=Math.sin(Y.rotation))}),z(E.mapData)?I=E.mapData:H&&H.type==="FeatureCollection"&&(this.mapTitle=H.title,I=o.geojson(H,this.type,this)),this.processedData=[];let U=this.processedData;if(R){let Y;for(let Z=0,q=R.length;Z<q;++Z){if(C(Y=R[Z]))U[Z]={value:Y};else if(z(Y)){let J=0;U[Z]={},!E.keys&&Y.length>N.length&&typeof Y[0]=="string"&&(U[Z]["hc-key"]=Y[0],++J);for(let Q=0;Q<N.length;++Q,++J)N[Q]&&Y[J]!==void 0&&(N[Q].indexOf(".")>0?l.prototype.setNestedProperty(U[Z],Y[J],N[Q]):U[Z][N[Q]]=Y[J])}else U[Z]=R[Z];W&&W[0]==="_i"&&(U[Z]._i=Z)}}if(I){this.mapData=I,this.mapMap={};for(let Y=0;Y<I.length;Y++)v=(u=I[Y]).properties,u._i=Y,W[0]&&v&&v[W[0]]&&(u[W[0]]=v[W[0]]),X[u[W[0]]]=u;if(this.mapMap=X,W[1]){let Y=W[1];U.forEach(Z=>{let q=k(Y,Z);X[q]&&B.push(X[q])})}if(E.allAreas){if(W[1]){let Z=W[1];U.forEach(q=>{B.push(k(Z,q))})}let Y="|"+B.map(function(Z){return Z&&Z[W[0]]}).join("|")+"|";I.forEach(Z=>{W[0]&&Y.indexOf("|"+Z[W[0]]+"|")!==-1||U.push(F(Z,{value:null}))})}}this.processedXData=Array(U.length)}setOptions(u){let v=super.setOptions(u),I=v.joinBy;return v.joinBy===null&&(I="_i"),(I=this.joinBy=D(I))[1]||(I[1]=I[0]),v}translate(){let u=this.doFullTranslate(),v=this.chart.mapView,I=v&&v.projection;if(this.chart.hasRendered&&(this.isDirtyData||!this.hasRendered)&&(this.processData(),this.generatePoints(),delete this.bounds,!v||v.userOptions.center||C(v.userOptions.zoom)||v.zoom!==v.minZoom?this.getProjectedBounds():v.fitToBounds(void 0,void 0,!1)),v){let E=v.getSVGTransform();this.points.forEach(R=>{let j=C(R.insetIndex)&&v.insets[R.insetIndex].getSVGTransform()||E;j&&R.bounds&&C(R.bounds.midX)&&C(R.bounds.midY)&&(R.plotX=R.bounds.midX*j.scaleX+j.translateX,R.plotY=R.bounds.midY*j.scaleY+j.translateY),u&&(R.shapeType="path",R.shapeArgs={d:l.getProjectedPath(R,I)}),R.hiddenInDataClass||(R.projectedPath&&!R.projectedPath.length?R.setVisible(!1):R.visible||R.setVisible(!0))})}w(this,"afterTranslate")}update(u){u.mapData&&this.chart.mapView?.recommendMapView(this.chart,[this.chart.options.chart.map,...(this.chart.options.series||[]).map((v,I)=>I===this._i?u.mapData:v.mapData)],!0),super.update.apply(this,arguments)}}return P.defaultOptions=F(M.defaultOptions,h),L(P.prototype,{type:"map",axisTypes:s.seriesMembers.axisTypes,colorAttribs:s.seriesMembers.colorAttribs,colorKey:s.seriesMembers.colorKey,directTouch:!0,drawDataLabels:b,drawGraph:b,forceDL:!0,getCenter:r.getCenter,getExtremesFromAll:!0,getSymbol:b,isCartesian:!1,parallelArrays:s.seriesMembers.parallelArrays,pointArrayMap:s.seriesMembers.pointArrayMap,pointClass:l,preserveAspectRatio:!0,searchPoint:b,trackerGroups:s.seriesMembers.trackerGroups,useMapGeometry:!0}),s.compose(P),g.registerSeriesType("map",P),P}),e(t,"Series/MapLine/MapLineSeriesDefaults.js",[],function(){return{lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"}}),e(t,"Series/MapLine/MapLineSeries.js",[t["Series/MapLine/MapLineSeriesDefaults.js"],t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{extend:a,merge:l}=o;class h extends s{pointAttribs(g,d){let p=super.pointAttribs(g,d);return p.fill=this.options.fillColor,p}}return h.defaultOptions=l(s.defaultOptions,i),a(h.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),r.registerSeriesType("mapline",h),h}),e(t,"Series/MapPoint/MapPointPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s){let{scatter:r}=i.seriesTypes,{isNumber:o}=s;class a extends r.prototype.pointClass{isValid(){return!!(this.options.geometry||o(this.x)&&o(this.y)||o(this.options.lon)&&o(this.options.lat))}}return a}),e(t,"Series/MapPoint/MapPointSeriesDefaults.js",[],function(){return{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"}}),e(t,"Series/MapPoint/MapPointSeries.js",[t["Core/Globals.js"],t["Series/MapPoint/MapPointPoint.js"],t["Series/MapPoint/MapPointSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{noop:h}=i,{map:c,scatter:g}=o.seriesTypes,{extend:d,fireEvent:p,isNumber:y,merge:b}=l;class x extends g{constructor(){super(...arguments),this.clearBounds=c.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}projectPoint(M){let L=this.chart.mapView;if(L){let{geometry:_,lon:w,lat:k}=M,z=_&&_.type==="Point"&&_.coordinates;if(y(w)&&y(k)&&(z=[w,k]),z)return L.lonLatToProjectedUnits({lon:z[0],lat:z[1]})}}translate(){let M=this.chart.mapView;if(this.processedXData||this.processData(),this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),M){let L=M.getSVGTransform(),{hasCoordinates:_}=M.projection;this.points.forEach(w=>{let k,{x:z,y:O}=w,C=y(w.insetIndex)&&M.insets[w.insetIndex].getSVGTransform()||L,A=this.projectPoint(w.options)||w.properties&&this.projectPoint(w.properties);if(A?(z=A.x,O=A.y):w.bounds&&(z=w.bounds.midX,O=w.bounds.midY,C&&y(z)&&y(O)&&(w.plotX=z*C.scaleX+C.translateX,w.plotY=O*C.scaleY+C.translateY,k=!0)),y(z)&&y(O)){if(!k){let F=M.projectedUnitsToPixels({x:z,y:O});w.plotX=F.x,w.plotY=_?F.y:this.chart.plotHeight-F.y}}else w.y=w.plotX=w.plotY=void 0;w.isInside=this.isPointInside(w),w.zone=this.zones.length?w.getZone():void 0})}p(this,"afterTranslate")}}return x.defaultOptions=b(g.defaultOptions,r),a.prototype.symbols.mapmarker=(f,M,L,_,w)=>{let k,z,O=w&&w.context==="legend";O?(k=f+L/2,z=M+_):w&&typeof w.anchorX=="number"&&typeof w.anchorY=="number"?(k=w.anchorX,z=w.anchorY):(k=f+L/2,z=M+_/2,M-=_);let C=O?_/3:_/2;return[["M",k,z],["C",k,z,k-C,M+1.5*C,k-C,M+C],["A",C,C,1,1,1,k+C,M+C],["C",k+C,M+1.5*C,k,z,k,z],["Z"]]},d(x.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:s,searchPoint:h,useMapGeometry:!0}),o.registerSeriesType("mappoint",x),x}),e(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),e(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{parse:a}=i,{noop:l}=r,{arrayMax:h,arrayMin:c,isNumber:g,merge:d,pick:p,stableSort:y}=o;return class{constructor(b,x){this.setState=l,this.init(b,x)}init(b,x){this.options=b,this.visible=!0,this.chart=x.chart,this.legend=x}addToLegend(b){b.splice(this.options.legendIndex,0,this)}drawLegendSymbol(b){let x,f=p(b.options.itemDistance,20),M=this.legendItem||{},L=this.options,_=L.ranges,w=L.connectorDistance;if(!_||!_.length||!g(_[0].value)){b.options.bubbleLegend.autoRanges=!0;return}y(_,function(C,A){return A.value-C.value}),this.ranges=_,this.setOptions(),this.render();let k=this.getMaxLabelSize(),z=this.ranges[0].radius,O=2*z;x=(x=w-z+k.width)>0?x:0,this.maxLabel=k,this.movementX=L.labels.align==="left"?x:0,M.labelWidth=O+x+f,M.labelHeight=O+k.height/2}setOptions(){let b=this.ranges,x=this.options,f=this.chart.series[x.seriesIndex],M=this.legend.baseline,L={zIndex:x.zIndex,"stroke-width":x.borderWidth},_={zIndex:x.zIndex,"stroke-width":x.connectorWidth},w={align:this.legend.options.rtl||x.labels.align==="left"?"right":"left",zIndex:x.zIndex},k=f.options.marker.fillOpacity,z=this.chart.styledMode;b.forEach(function(O,C){z||(L.stroke=p(O.borderColor,x.borderColor,f.color),L.fill=p(O.color,x.color,k!==1?a(f.color).setOpacity(k).get("rgba"):f.color),_.stroke=p(O.connectorColor,x.connectorColor,f.color)),b[C].radius=this.getRangeRadius(O.value),b[C]=d(b[C],{center:b[0].radius-b[C].radius+M}),z||d(!0,b[C],{bubbleAttribs:d(L),connectorAttribs:d(_),labelAttribs:w})},this)}getRangeRadius(b){let x=this.options,f=this.options.seriesIndex,M=this.chart.series[f],L=x.ranges[0].value,_=x.ranges[x.ranges.length-1].value,w=x.minSize,k=x.maxSize;return M.getRadius.call(this,_,L,w,k,b)}render(){let b=this.legendItem||{},x=this.chart.renderer,f=this.options.zThreshold;for(let M of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),b.symbol=x.g("bubble-legend"),b.label=x.g("bubble-legend-item").css(this.legend.itemStyle||{}),b.symbol.translateX=0,b.symbol.translateY=0,b.symbol.add(b.label),b.label.add(b.group),this.ranges))M.value>=f&&this.renderRange(M);this.hideOverlappingLabels()}renderRange(b){let x=this.ranges[0],f=this.legend,M=this.options,L=M.labels,_=this.chart,w=_.series[M.seriesIndex],k=_.renderer,z=this.symbols,O=z.labels,C=b.center,A=Math.abs(b.radius),F=M.connectorDistance||0,S=L.align,T=f.options.rtl,D=M.borderWidth,P=M.connectorWidth,m=x.radius||0,u=C-A-D/2+P/2,v=(u%1?1:.5)-(P%2?0:.5),I=k.styledMode,E=T||S==="left"?-F:F;S==="center"&&(E=0,M.connectorDistance=0,b.labelAttribs.align="center"),z.bubbleItems.push(k.circle(m,C+v,A).attr(I?{}:b.bubbleAttribs).addClass((I?"highcharts-color-"+w.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(M.className||"")).add(this.legendItem.symbol)),z.connectors.push(k.path(k.crispLine([["M",m,u],["L",m+E,u]],M.connectorWidth)).attr(I?{}:b.connectorAttribs).addClass((I?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(M.connectorClassName||"")).add(this.legendItem.symbol));let R=k.text(this.formatLabel(b)).attr(I?{}:b.labelAttribs).css(I?{}:L.style).addClass("highcharts-bubble-legend-labels "+(M.labels.className||"")).add(this.legendItem.symbol),j={x:m+E+M.labels.x,y:u+M.labels.y+.4*R.getBBox().height};R.attr(j),O.push(R),R.placed=!0,R.alignAttr=j}getMaxLabelSize(){let b,x;return this.symbols.labels.forEach(function(f){x=f.getBBox(!0),b=b?x.width>b.width?x:b:x}),b||{}}formatLabel(b){let x=this.options,f=x.labels.formatter,M=x.labels.format,{numberFormatter:L}=this.chart;return M?s.format(M,b):f?f.call(b):L(b.value,1)}hideOverlappingLabels(){let b=this.chart,x=this.options.labels.allowOverlap,f=this.symbols;!x&&f&&(b.hideOverlappingLabels(f.labels),f.labels.forEach(function(M,L){M.newOpacity?M.newOpacity!==M.oldOpacity&&f.connectors[L].show():f.connectors[L].hide()}))}getRanges(){let b=this.legend.bubbleLegend,x=b.chart.series,f=b.options.ranges,M,L,_=Number.MAX_VALUE,w=-Number.MAX_VALUE;return x.forEach(function(k){k.isBubble&&!k.ignoreSeries&&(L=k.zData.filter(g)).length&&(_=p(k.options.zMin,Math.min(_,Math.max(c(L),k.options.displayNegative===!1?k.options.zThreshold:-Number.MAX_VALUE))),w=p(k.options.zMax,Math.max(w,h(L))))}),M=_===w?[{value:w}]:[{value:_},{value:(_+w)/2},{value:w,autoRanges:!0}],f.length&&f[0].radius&&M.reverse(),M.forEach(function(k,z){f&&f[z]&&(M[z]=d(f[z],k))}),M}predictBubbleSizes(){let b=this.chart,x=b.legend.options,f=x.floating,M=x.layout==="horizontal",L=M?b.legend.lastLineHeight:0,_=b.plotSizeX,w=b.plotSizeY,k=b.series[this.options.seriesIndex],z=k.getPxExtremes(),O=Math.ceil(z.minPxSize),C=Math.ceil(z.maxPxSize),A=Math.min(w,_),F,S=k.options.maxSize;return f||!/%$/.test(S)?F=C:(F=(A+L)*(S=parseFloat(S))/100/(S/100+1),(M&&w-F>=_||!M&&_-F>=w)&&(F=C)),[O,Math.ceil(F)]}updateRanges(b,x){let f=this.legend.options.bubbleLegend;f.minSize=b,f.maxSize=x,f.ranges=this.getRanges()}correctSizes(){let b=this.legend,x=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(x.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,x.maxPxSize),b.render())}}}),e(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r,o,a){let{setOptions:l}=r,{composed:h}=o,{addEvent:c,objectEach:g,pushUnique:d,wrap:p}=a;function y(_,w,k){let z,O,C,A=this.legend,F=b(this)>=0;A&&A.options.enabled&&A.bubbleLegend&&A.options.bubbleLegend.autoRanges&&F?(z=A.bubbleLegend.options,O=A.bubbleLegend.predictBubbleSizes(),A.bubbleLegend.updateRanges(O[0],O[1]),z.placed||(A.group.placed=!1,A.allItems.forEach(S=>{(C=S.legendItem||{}).group&&(C.group.translateY=void 0)})),A.render(),z.placed||(this.getMargins(),this.axes.forEach(function(S){S.visible&&S.render(),z.placed||(S.setScale(),S.updateNames(),g(S.ticks,function(T){T.isNew=!0,T.isNewLabel=!0}))}),this.getMargins()),z.placed=!0,_.call(this,w,k),A.bubbleLegend.correctSizes(),L(A,x(A))):(_.call(this,w,k),A&&A.options.enabled&&A.bubbleLegend&&(A.render(),L(A,x(A))))}function b(_){let w=_.series,k=0;for(;k<w.length;){if(w[k]&&w[k].isBubble&&w[k].visible&&w[k].zData.length)return k;k++}return-1}function x(_){let w=_.allItems,k=[],z=w.length,O,C,A,F=0,S=0;for(F=0;F<z;F++)if(C=w[F].legendItem||{},A=(w[F+1]||{}).legendItem||{},C.labelHeight&&(w[F].itemHeight=C.labelHeight),w[F]===w[z-1]||C.y!==A.y){for(k.push({height:0}),O=k[k.length-1];S<=F;S++)w[S].itemHeight>O.height&&(O.height=w[S].itemHeight);O.step=F}return k}function f(_){let w=this.bubbleLegend,k=this.options,z=k.bubbleLegend,O=b(this.chart);w&&w.ranges&&w.ranges.length&&(z.ranges.length&&(z.autoRanges=!!z.ranges[0].autoRanges),this.destroyItem(w)),O>=0&&k.enabled&&z.enabled&&(z.seriesIndex=O,this.bubbleLegend=new s(z,this),this.bubbleLegend.addToLegend(_.allItems))}function M(_){let w;if(_.defaultPrevented)return!1;let k=_.legendItem,z=this.chart,O=k.visible;this&&this.bubbleLegend&&(k.visible=!O,k.ignoreSeries=O,w=b(z)>=0,this.bubbleLegend.visible!==w&&(this.update({bubbleLegend:{enabled:w}}),this.bubbleLegend.visible=w),k.visible=O)}function L(_,w){let k=_.allItems,z=_.options.rtl,O,C,A,F,S=0;k.forEach((T,D)=>{(F=T.legendItem||{}).group&&(O=F.group.translateX||0,C=F.y||0,((A=T.movementX)||z&&T.ranges)&&(A=z?O-T.options.maxSize/2:O+A,F.group.attr({translateX:A})),D>w[S].step&&S++,F.group.attr({translateY:Math.round(C+w[S].height/2)}),F.y=C+w[S].height/2)})}return{compose:function(_,w){d(h,"Series.BubbleLegend")&&(l({legend:{bubbleLegend:i}}),p(_.prototype,"drawChartBox",y),c(w,"afterGetAllItems",f),c(w,"itemClick",M))}}}),e(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{seriesTypes:{scatter:{prototype:{pointClass:o}}}}=s,{extend:a}=r;class l extends o{haloPath(c){let g=(c&&this.marker&&this.marker.radius||0)+c;if(this.series.chart.inverted){let d=this.pos()||[0,0],{xAxis:p,yAxis:y,chart:b}=this.series;return b.renderer.symbols.circle(p.len-d[1]-g,y.len-d[0]-g,2*g,2*g)}return i.prototype.haloPath.call(this,g)}}return a(l.prototype,{ttBelow:!1}),l}),e(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{parse:h}=r,{composed:c,noop:g}=o,{series:d,seriesTypes:{column:{prototype:p},scatter:y}}=a,{addEvent:b,arrayMax:x,arrayMin:f,clamp:M,extend:L,isNumber:_,merge:w,pick:k,pushUnique:z}=l;function O(){let A=this.len,{coll:F,isXAxis:S,min:T}=this,D=S?"xData":"yData",P=(this.max||0)-(T||0),m=0,u=A,v=A/P,I;(F==="xAxis"||F==="yAxis")&&(this.series.forEach(E=>{if(E.bubblePadding&&E.reserveSpace()){this.allowZoomOutside=!0,I=!0;let R=E[D];if(S&&((E.onPoint||E).getRadii(0,0,E),E.onPoint&&(E.radii=E.onPoint.radii)),P>0){let j=R.length;for(;j--;)if(_(R[j])&&this.dataMin<=R[j]&&R[j]<=this.max){let G=E.radii&&E.radii[j]||0;m=Math.min((R[j]-T)*v-G,m),u=Math.max((R[j]-T)*v+G,u)}}}}),I&&P>0&&!this.logarithmic&&(u-=A,v*=(A+Math.max(0,m)-Math.min(u,A))/A,[["min","userMin",m],["max","userMax",u]].forEach(E=>{k(this.options[E[0]],this[E[1]])===void 0&&(this[E[0]]+=E[2]/v)})))}class C extends y{static compose(F,S,T){i.compose(S,T),z(c,"Series.Bubble")&&b(F,"foundExtremes",O)}animate(F){!F&&this.points.length<this.options.animationLimit&&this.points.forEach(function(S){let{graphic:T,plotX:D=0,plotY:P=0}=S;T&&T.width&&(this.hasRendered||T.attr({x:D,y:P,width:1,height:1}),T.animate(this.markerAttribs(S),this.options.animation))},this)}getRadii(){let F=this.zData,S=this.yData,T=[],D,P,m,u=this.chart.bubbleZExtremes,{minPxSize:v,maxPxSize:I}=this.getPxExtremes();if(!u){let E,R=Number.MAX_VALUE,j=-Number.MAX_VALUE;this.chart.series.forEach(G=>{if(G.bubblePadding&&G.reserveSpace()){let W=(G.onPoint||G).getZExtremes();W&&(R=Math.min(k(R,W.zMin),W.zMin),j=Math.max(k(j,W.zMax),W.zMax),E=!0)}}),E?(u={zMin:R,zMax:j},this.chart.bubbleZExtremes=u):u={zMin:0,zMax:0}}for(P=0,D=F.length;P<D;P++)m=F[P],T.push(this.getRadius(u.zMin,u.zMax,v,I,m,S&&S[P]));this.radii=T}getRadius(F,S,T,D,P,m){let u=this.options,v=u.sizeBy!=="width",I=u.zThreshold,E=S-F,R=.5;if(m===null||P===null)return null;if(_(P)){if(u.sizeByAbsoluteValue&&(P=Math.abs(P-I),S=E=Math.max(S-I,Math.abs(F-I)),F=0),P<F)return T/2-1;E>0&&(R=(P-F)/E)}return v&&R>=0&&(R=Math.sqrt(R)),Math.ceil(T+R*(D-T))/2}hasData(){return!!this.processedXData.length}markerAttribs(F,S){let T=super.markerAttribs(F,S),{height:D=0,width:P=0}=T;return this.chart.inverted?L(T,{x:(F.plotX||0)-P/2,y:(F.plotY||0)-D/2}):T}pointAttribs(F,S){let T=this.options.marker.fillOpacity,D=d.prototype.pointAttribs.call(this,F,S);return T!==1&&(D.fill=h(D.fill).setOpacity(T).get("rgba")),D}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:F,options:S,radii:T}=this,{minPxSize:D}=this.getPxExtremes(),P=F.length;for(;P--;){let m=F[P],u=T?T[P]:0;this.zoneAxis==="z"&&(m.negative=(m.z||0)<(S.zThreshold||0)),_(u)&&u>=D/2?(m.marker=L(m.marker,{radius:u,width:2*u,height:2*u}),m.dlBox={x:m.plotX-u,y:m.plotY-u,width:2*u,height:2*u}):(m.shapeArgs=m.plotY=m.dlBox=void 0,m.isInside=!1)}}getPxExtremes(){let F=Math.min(this.chart.plotWidth,this.chart.plotHeight),S=P=>{let m;return typeof P=="string"&&(m=/%$/.test(P),P=parseInt(P,10)),m?F*P/100:P},T=S(k(this.options.minSize,8)),D=Math.max(S(k(this.options.maxSize,"20%")),T);return{minPxSize:T,maxPxSize:D}}getZExtremes(){let F=this.options,S=(this.zData||[]).filter(_);if(S.length){let T=k(F.zMin,M(f(S),F.displayNegative===!1?F.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),D=k(F.zMax,x(S));if(_(T)&&_(D))return{zMin:T,zMax:D}}}}return C.defaultOptions=w(y.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:A}=this.series.chart,{z:F}=this.point;return _(F)?A(F,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),L(C.prototype,{alignDataLabel:p.alignDataLabel,applyZones:g,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:s,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),b(C,"updatedData",A=>{delete A.target.chart.bubbleZExtremes}),b(C,"remove",A=>{delete A.target.chart.bubbleZExtremes}),a.registerSeriesType("bubble",C),C}),e(t,"Series/MapBubble/MapBubblePoint.js",[t["Series/Bubble/BubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{seriesTypes:{map:{prototype:{pointClass:{prototype:o}}}}}=s,{extend:a}=r;class l extends i{isValid(){return typeof this.z=="number"}}return a(l.prototype,{applyOptions:o.applyOptions,getProjectedBounds:o.getProjectedBounds}),l}),e(t,"Series/MapBubble/MapBubbleSeries.js",[t["Series/Bubble/BubbleSeries.js"],t["Series/MapBubble/MapBubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{seriesTypes:{map:{prototype:a},mappoint:{prototype:l}}}=r,{extend:h,merge:c}=o;class g extends i{constructor(){super(...arguments),this.clearBounds=a.clearBounds}searchPoint(p,y){return this.searchKDTree({plotX:p.chartX-this.chart.plotLeft,plotY:p.chartY-this.chart.plotTop},y,p)}translate(){l.translate.call(this),this.getRadii(),this.translateBubble()}updateParallelArrays(p,y,b){super.updateParallelArrays.call(this,p,y,b);let x=this.processedXData,f=this.xData;x&&f&&(x.length=f.length)}}return g.defaultOptions=c(i.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),h(g.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:a.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:s,processData:a.processData,projectPoint:l.projectPoint,kdAxisArray:["plotX","plotY"],setData:a.setData,setOptions:a.setOptions,updateData:a.updateData,useMapGeometry:!0,xyFromShape:!0}),r.registerSeriesType("mapbubble",g),g}),e(t,"Series/Heatmap/HeatmapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s){let{scatter:{prototype:{pointClass:r}}}=i.seriesTypes,{clamp:o,defined:a,extend:l,pick:h}=s;class c extends r{applyOptions(d,p){return(this.isNull||this.value===null)&&delete this.color,super.applyOptions(d,p),this.formatPrefix=this.isNull||this.value===null?"null":"point",this}getCellAttributes(){let d=this.series,p=d.options,y=(p.colsize||1)/2,b=(p.rowsize||1)/2,x=d.xAxis,f=d.yAxis,M=this.options.marker||d.options.marker,L=d.pointPlacementToXValue(),_=h(this.pointPadding,p.pointPadding,0),w={x1:o(Math.round(x.len-x.translate(this.x-y,!1,!0,!1,!0,-L)),-x.len,2*x.len),x2:o(Math.round(x.len-x.translate(this.x+y,!1,!0,!1,!0,-L)),-x.len,2*x.len),y1:o(Math.round(f.translate(this.y-b,!1,!0,!1,!0)),-f.len,2*f.len),y2:o(Math.round(f.translate(this.y+b,!1,!0,!1,!0)),-f.len,2*f.len)};for(let k of[["width","x"],["height","y"]]){let z=k[0],O=k[1],C=O+"1",A=O+"2",F=Math.abs(w[C]-w[A]),S=M&&M.lineWidth||0,T=Math.abs(w[C]+w[A])/2,D=M&&M[z];if(a(D)&&D<F){let P=D/2+S/2;w[C]=T-P,w[A]=T+P}_&&((O==="x"&&x.reversed||O==="y"&&!f.reversed)&&(C=A,A=O+"1"),w[C]+=_,w[A]-=_)}return w}haloPath(d){if(!d)return[];let{x:p=0,y=0,width:b=0,height:x=0}=this.shapeArgs||{};return[["M",p-d,y-d],["L",p-d,y+x+d],["L",p+b+d,y+x+d],["L",p+b+d,y-d],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}return l(c.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),c}),e(t,"Series/Heatmap/HeatmapSeriesDefaults.js",[t["Core/Utilities.js"]],function(i){let{isNumber:s}=i;return{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:o}=this.point;return s(o)?r(o,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}}),e(t,"Series/InterpolationUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let{doc:r}=i,{defined:o,pick:a}=s;return{colorFromPoint:function(l,h){let c=h.series.colorAxis;if(c){let g=c.toColor(l||0,h).split(")")[0].split("(")[1].split(",").map(d=>a(parseFloat(d),parseInt(d,10)));return g[3]=255*a(g[3],1),o(l)&&h.visible||(g[3]=0),g}return[0,0,0,0]},getContext:function(l){let{canvas:h,context:c}=l;return h&&c?(c.clearRect(0,0,h.width,h.height),c):(l.canvas=r.createElement("canvas"),l.context=l.canvas.getContext("2d",{willReadFrequently:!0})||void 0,l.context)}}}),e(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Series/Heatmap/HeatmapSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"],t["Series/InterpolationUtilities.js"]],function(i,s,r,o,a,l,h,c){let{series:g,seriesTypes:{column:d,scatter:p}}=a,{prototype:{symbols:y}}=l,{addEvent:b,extend:x,fireEvent:f,isNumber:M,merge:L,pick:_}=h,{colorFromPoint:w,getContext:k}=c;class z extends p{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let C=this,A=C.options,F=A.interpolation,S=A.marker||{};if(F){let{image:T,chart:D,xAxis:P,yAxis:m}=C,{reversed:u=!1,len:v}=P,{reversed:I=!1,len:E}=m,R={width:v,height:E};if(!T||C.isDirtyData||C.isDirtyCanvas){let j=k(C),{canvas:G,options:{colsize:W=1,rowsize:N=1},points:B,points:{length:X}}=C,V=D.colorAxis&&D.colorAxis[0];if(G&&j&&V){let{min:H,max:K}=P.getExtremes(),{min:U,max:Y}=m.getExtremes(),Z=K-H,q=Y-U,J=Math.round(Z/W/8*8),Q=Math.round(q/N/8*8),[$,tt]=[[J,J/Z,u,"ceil"],[Q,Q/q,!I,"floor"]].map(([ot,at,ct,ht])=>ct?lt=>Math[ht](ot-at*lt):lt=>Math[ht](at*lt)),it=G.width=J+1,et=it*(G.height=Q+1),st=(X-1)/et,rt=new Uint8ClampedArray(4*et),nt=(ot,at)=>4*Math.ceil(it*tt(at-U)+$(ot-H));C.buildKDTree();for(let ot=0;ot<et;ot++){let at=B[Math.ceil(st*ot)],{x:ct,y:ht}=at;rt.set(w(at.value,at),nt(ct,ht))}j.putImageData(new ImageData(rt,it),0,0),T?T.attr(oi(re({},R),{href:G.toDataURL("image/png",1)})):(C.directTouch=!1,C.image=D.renderer.image(G.toDataURL("image/png",1)).attr(R).add(C.group))}C.isDirtyCanvas=!1}else(T.width!==v||T.height!==E)&&T.attr(R)}else(S.enabled||C._hasPointMarkers)&&(g.prototype.drawPoints.call(C),C.points.forEach(T=>{T.graphic&&(T.graphic[C.chart.styledMode?"css":"animate"](C.colorAttribs(T)),T.value===null&&T.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:C,dataMax:A}=g.prototype.getExtremes.call(this,this.valueData);return M(C)&&(this.valueMin=C),M(A)&&(this.valueMax=A),g.prototype.getExtremes.call(this)}getValidPoints(C,A){return g.prototype.getValidPoints.call(this,C,A,!0)}hasData(){return!!this.xData}init(){super.init.apply(this,arguments);let C=this.options;C.pointRange=_(C.pointRange,C.colsize||1),this.yAxis.axisPointRange=C.rowsize||1,y.ellipse=y.circle,C.marker&&M(C.borderRadius)&&(C.marker.r=C.borderRadius)}markerAttribs(C,A){let F=C.shapeArgs||{};if(C.hasImage)return{x:C.plotX,y:C.plotY};if(A&&A!=="normal"){let S=C.options.marker||{},T=this.options.marker||{},D=T.states&&T.states[A]||{},P=S.states&&S.states[A]||{},m=(P.width||D.width||F.width||0)+(P.widthPlus||D.widthPlus||0),u=(P.height||D.height||F.height||0)+(P.heightPlus||D.heightPlus||0);return{x:(F.x||0)+((F.width||0)-m)/2,y:(F.y||0)+((F.height||0)-u)/2,width:m,height:u}}return F}pointAttribs(C,A){let F=g.prototype.pointAttribs.call(this,C,A),S=this.options||{},T=this.chart.options.plotOptions||{},D=T.series||{},P=T.heatmap||{},m=C&&C.options.borderColor||S.borderColor||P.borderColor||D.borderColor,u=C&&C.options.borderWidth||S.borderWidth||P.borderWidth||D.borderWidth||F["stroke-width"];if(F.stroke=C&&C.marker&&C.marker.lineColor||S.marker&&S.marker.lineColor||m||this.color,F["stroke-width"]=u,A&&A!=="normal"){let v=L(S.states&&S.states[A],S.marker&&S.marker.states&&S.marker.states[A],C&&C.options.states&&C.options.states[A]||{});F.fill=v.color||i.parse(F.fill).brighten(v.brightness||0).get(),F.stroke=v.lineColor||F.stroke}return F}translate(){let{borderRadius:C,marker:A}=this.options,F=A&&A.symbol||"rect",S=y[F]?F:"rect",T=["circle","square"].indexOf(S)!==-1;if(!this.processedXData){let{xData:D,yData:P}=this.getProcessedData();this.processedXData=D,this.processedYData=P}for(let D of(this.generatePoints(),this.points)){let P=D.getCellAttributes(),m=Math.min(P.x1,P.x2),u=Math.min(P.y1,P.y2),v=Math.max(Math.abs(P.x2-P.x1),0),I=Math.max(Math.abs(P.y2-P.y1),0);if(D.hasImage=(D.marker&&D.marker.symbol||F||"").indexOf("url")===0,T){let E=Math.abs(v-I);m=Math.min(P.x1,P.x2)+(v<I?0:E/2),u=Math.min(P.y1,P.y2)+(v<I?E/2:0),v=I=Math.min(v,I)}D.hasImage&&(D.marker={width:v,height:I}),D.plotX=D.clientX=(P.x1+P.x2)/2,D.plotY=(P.y1+P.y2)/2,D.shapeType="path",D.shapeArgs=L(!0,{x:m,y:u,width:v,height:I},{d:y[S](m,u,v,I,{r:M(C)?C:0})})}f(this,"afterTranslate")}}return z.defaultOptions=L(p.defaultOptions,o),b(z,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),x(z.prototype,{axisTypes:s.seriesMembers.axisTypes,colorKey:s.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:s.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:r,specialGroup:"group",trackerGroups:s.seriesMembers.trackerGroups,alignDataLabel:d.prototype.alignDataLabel,colorAttribs:s.seriesMembers.colorAttribs,getSymbol:g.prototype.getSymbol}),s.compose(z),a.registerSeriesType("heatmap",z),z}),e(t,"masters/modules/map.src.js",[t["Core/Globals.js"],t["Maps/MapNavigation.js"],t["Series/ColorMapComposition.js"],t["Series/MapBubble/MapBubbleSeries.js"],t["Maps/GeoJSONComposition.js"],t["Core/Chart/MapChart.js"],t["Maps/MapView.js"],t["Maps/Projection.js"]],function(i,s,r,o,a,l,h,c){return i.ColorMapComposition=r,i.MapChart=i.MapChart||l,i.MapNavigation=i.MapNavigation||s,i.MapView=i.MapView||h,i.Projection=i.Projection||c,i.mapChart=i.Map=i.MapChart.mapChart,i.maps=i.MapChart.maps,i.geojson=a.geojson,i.topo2geo=a.topo2geo,a.compose(i.Chart),o.compose(i.Axis,i.Chart,i.Legend),s.compose(l,i.Pointer,i.SVGRenderer),h.compose(l),i})})});var Hu=ai((iA,lo)=>{"use strict";(function(n){typeof lo=="object"&&lo.exports?(n.default=n,lo.exports=n):typeof define=="function"&&define.amd?define("highcharts/highcharts-more",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n(typeof Highcharts<"u"?Highcharts:void 0)})(function(n){"use strict";var t=n?n._modules:{};function e(i,s,r,o){i.hasOwnProperty(s)||(i[s]=o.apply(null,r),typeof CustomEvent=="function"&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:i[s]}})))}e(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(i){let{addEvent:s,correctFloat:r,defined:o,pick:a}=i;function l(p){let y,b=this;return p&&b.pane.forEach(x=>{h(p.chartX-b.plotLeft,p.chartY-b.plotTop,x.center)&&(y=x)}),y}function h(p,y,b,x,f){let M=!0,L=b[0],_=b[1],w=Math.sqrt(Math.pow(p-L,2)+Math.pow(y-_,2));if(o(x)&&o(f)){let k=Math.atan2(r(y-_,8),r(p-L,8));f!==x&&(M=x>f?k>=x&&k<=Math.PI||k<=f&&k>=-Math.PI:k>=x&&k<=r(f,8))}return w<=Math.ceil(b[2]/2)&&M}function c(p){this.polar&&(p.options.inverted&&([p.x,p.y]=[p.y,p.x]),p.isInsidePlot=this.pane.some(y=>h(p.x,p.y,y.center,y.axis&&y.axis.normalizedStartAngleRad,y.axis&&y.axis.normalizedEndAngleRad)))}function g(p){let y=this.chart;p.hoverPoint&&p.hoverPoint.plotX&&p.hoverPoint.plotY&&y.hoverPane&&!h(p.hoverPoint.plotX,p.hoverPoint.plotY,y.hoverPane.center)&&(p.hoverPoint=void 0)}function d(p){let y=this.chart;y.polar?(y.hoverPane=y.getHoverPane(p),p.filter=function(b){return b.visible&&!(!p.shared&&b.directTouch)&&a(b.options.enableMouseTracking,!0)&&(!y.hoverPane||b.xAxis.pane===y.hoverPane)}):y.hoverPane=void 0}return{compose:function(p,y){let b=p.prototype;b.getHoverPane||(b.collectionsWithUpdate.push("pane"),b.getHoverPane=l,s(p,"afterIsInsidePlot",c),s(y,"afterGetHoverData",g),s(y,"beforeGetHoverData",d))}}}),e(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),e(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{extend:a,merge:l,splat:h}=o;class c{constructor(d,p){this.coll="pane",this.init(d,p)}init(d,p){this.chart=p,this.background=[],p.pane.push(this),this.setOptions(d)}setOptions(d){this.options=d=l(r.pane,this.chart.angular?{background:{}}:void 0,d)}render(){let d=this.options,p=this.chart.renderer;this.group||(this.group=p.g("pane-group").attr({zIndex:d.zIndex||0}).add()),this.updateCenter();let y=this.options.background;if(y){let b=Math.max((y=h(y)).length,this.background.length||0);for(let x=0;x<b;x++)y[x]&&this.axis?this.renderBackground(l(r.background,y[x]),x):this.background[x]&&(this.background[x]=this.background[x].destroy(),this.background.splice(x,1))}}renderBackground(d,p){let y={class:"highcharts-pane "+(d.className||"")},b="animate";this.chart.styledMode||a(y,{fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":d.borderWidth}),this.background[p]||(this.background[p]=this.chart.renderer.path().add(this.group),b="attr"),this.background[p][b]({d:this.axis.getPlotBandPath(d.from,d.to,d)}).attr(y)}updateCenter(d){this.center=(d||this.axis||{}).center=i.getCenter.call(this)}update(d,p){l(!0,this.options,d),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(y){y.pane===this&&(y.pane=null,y.update({},p))},this)}}return c.compose=s.compose,c}),e(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s){let{area:{prototype:{pointClass:r,pointClass:{prototype:o}}}}=i.seriesTypes,{defined:a,isNumber:l}=s;return class extends r{setState(){let h=this.state,c=this.series,g=c.chart.polar;a(this.plotHigh)||(this.plotHigh=c.yAxis.toPixels(this.high,!0)),a(this.plotLow)||(this.plotLow=this.plotY=c.yAxis.toPixels(this.low,!0)),c.lowerStateMarkerGraphic=c.stateMarkerGraphic,c.stateMarkerGraphic=c.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,g&&l(this.plotHighX)&&(this.plotX=this.plotHighX),o.setState.apply(this,arguments),this.state=h,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],g&&l(this.plotLowX)&&(this.plotX=this.plotLowX),c.upperStateMarkerGraphic=c.stateMarkerGraphic,c.stateMarkerGraphic=c.lowerStateMarkerGraphic,c.lowerStateMarkerGraphic=void 0;let d=c.modifyMarkerSettings();o.setState.apply(this,arguments),c.restoreMarkerSettings(d)}haloPath(){let h=this.series.chart.polar,c=[];return this.plotY=this.plotLow,h&&l(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(c=o.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,h&&l(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(c=c.concat(o.haloPath.apply(this,arguments))),c}isValid(){return l(this.low)&&l(this.high)}}}),e(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{noop:a}=s,{area:l,area:{prototype:h},column:{prototype:c}}=r.seriesTypes,{addEvent:g,defined:d,extend:p,isArray:y,isNumber:b,pick:x,merge:f}=o;class M extends l{toYData(_){return[_.low,_.high]}highToXY(_){let w=this.chart,k=this.xAxis.postTranslate(_.rectPlotX||0,this.yAxis.len-(_.plotHigh||0));_.plotHighX=k.x-w.plotLeft,_.plotHigh=k.y-w.plotTop,_.plotLowX=_.plotX}getGraphPath(_){let w=[],k=[],z=h.getGraphPath,O=this.options,C=this.chart.polar,A=C&&O.connectEnds!==!1,F=O.connectNulls,S,T,D,P=O.step;for(S=(_=_||this.points).length;S--;){T=_[S];let E=C?{plotX:T.rectPlotX,plotY:T.yBottom,doCurve:!1}:{plotX:T.plotX,plotY:T.plotY,doCurve:!1};T.isNull||A||F||_[S+1]&&!_[S+1].isNull||k.push(E),D={polarPlotY:T.polarPlotY,rectPlotX:T.rectPlotX,yBottom:T.yBottom,plotX:x(T.plotHighX,T.plotX),plotY:T.plotHigh,isNull:T.isNull},k.push(D),w.push(D),T.isNull||A||F||_[S-1]&&!_[S-1].isNull||k.push(E)}let m=z.call(this,_);P&&(P===!0&&(P="left"),O.step={left:"right",center:"center",right:"left"}[P]);let u=z.call(this,w),v=z.call(this,k);O.step=P;let I=[].concat(m,u);return!this.chart.polar&&v[0]&&v[0][0]==="M"&&(v[0]=["L",v[0][1],v[0][2]]),this.graphPath=I,this.areaPath=m.concat(v),I.isArea=!0,I.xMap=m.xMap,this.areaPath.xMap=m.xMap,I}drawDataLabels(){let _,w,k,z,O,C=this.points,A=C.length,F=[],S=this.options.dataLabels,T=this.chart.inverted;if(S){if(y(S)?(z=S[0]||{enabled:!1},O=S[1]||{enabled:!1}):((z=p({},S)).x=S.xHigh,z.y=S.yHigh,(O=p({},S)).x=S.xLow,O.y=S.yLow),z.enabled||this.hasDataLabels?.()){for(_=A;_--;)if(w=C[_]){let{plotHigh:D=0,plotLow:P=0}=w;k=z.inside?D<P:D>P,w.y=w.high,w._plotY=w.plotY,w.plotY=D,F[_]=w.dataLabel,w.dataLabel=w.dataLabelUpper,w.below=k,T?z.align||(z.align=k?"right":"left"):z.verticalAlign||(z.verticalAlign=k?"top":"bottom")}for(this.options.dataLabels=z,h.drawDataLabels&&h.drawDataLabels.apply(this,arguments),_=A;_--;)(w=C[_])&&(w.dataLabelUpper=w.dataLabel,w.dataLabel=F[_],delete w.dataLabels,w.y=w.low,w.plotY=w._plotY)}if(O.enabled||this.hasDataLabels?.()){for(_=A;_--;)if(w=C[_]){let{plotHigh:D=0,plotLow:P=0}=w;k=O.inside?D<P:D>P,w.below=!k,T?O.align||(O.align=k?"left":"right"):O.verticalAlign||(O.verticalAlign=k?"bottom":"top")}this.options.dataLabels=O,h.drawDataLabels&&h.drawDataLabels.apply(this,arguments)}if(z.enabled)for(_=A;_--;)(w=C[_])&&(w.dataLabels=[w.dataLabelUpper,w.dataLabel].filter(function(D){return!!D}));this.options.dataLabels=S}}alignDataLabel(){c.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let _={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:w,lowMarker:k}}=this;this.options.marker=f(w,k),k.symbol&&(this.symbol=k.symbol)}return _}restoreMarkerSettings(_){this.options.marker=_.marker,this.symbol=_.symbol}drawPoints(){let _,w,k=this.points.length,z=this.modifyMarkerSettings();for(h.drawPoints.apply(this,arguments),this.restoreMarkerSettings(z),_=0;_<k;)(w=this.points[_]).graphics=w.graphics||[],w.origProps={plotY:w.plotY,plotX:w.plotX,isInside:w.isInside,negative:w.negative,zone:w.zone,y:w.y},(w.graphic||w.graphics[0])&&(w.graphics[0]=w.graphic),w.graphic=w.graphics[1],w.plotY=w.plotHigh,d(w.plotHighX)&&(w.plotX=w.plotHighX),w.y=x(w.high,w.origProps.y),w.negative=w.y<(this.options.threshold||0),this.zones.length&&(w.zone=w.getZone()),this.chart.polar||(w.isInside=w.isTopInside=w.plotY!==void 0&&w.plotY>=0&&w.plotY<=this.yAxis.len&&w.plotX>=0&&w.plotX<=this.xAxis.len),_++;for(h.drawPoints.apply(this,arguments),_=0;_<k;)(w=this.points[_]).graphics=w.graphics||[],(w.graphic||w.graphics[1])&&(w.graphics[1]=w.graphic),w.graphic=w.graphics[0],w.origProps&&(p(w,w.origProps),delete w.origProps),_++}hasMarkerChanged(_,w){let k=_.lowMarker,z=w.lowMarker||{};return k&&(k.enabled===!1||z.symbol!==k.symbol||z.height!==k.height||z.width!==k.width)||super.hasMarkerChanged(_,w)}}return M.defaultOptions=f(l.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),g(M,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(L=>{let _=L.high,w=L.plotY;L.isNull?L.plotY=void 0:(L.plotLow=w,L.plotHigh=b(_)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(_):_,!1,!0,void 0,!0):void 0,this.dataModify&&(L.yBottom=L.plotHigh))})},{order:0}),g(M,"afterTranslate",function(){this.points.forEach(L=>{if(this.chart.polar)this.highToXY(L),L.plotLow=L.plotY,L.tooltipPos=[((L.plotHighX||0)+(L.plotLowX||0))/2,((L.plotHigh||0)+(L.plotLow||0))/2];else{let _=L.pos(!1,L.plotLow),w=L.pos(!1,L.plotHigh);_&&w&&(_[0]=(_[0]+w[0])/2,_[1]=(_[1]+w[1])/2),L.tooltipPos=_}})},{order:3}),p(M.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:i,pointValKey:"low",setStackedPoints:a}),r.registerSeriesType("arearange",M),M}),e(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{spline:{prototype:o}}=s.seriesTypes,{merge:a,extend:l}=r;class h extends i{}return h.defaultOptions=a(i.defaultOptions),l(h.prototype,{getPointSpline:o.getPointSpline}),s.registerSeriesType("areasplinerange",h),h}),e(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),e(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a){let{noop:l}=r,{crisp:h,extend:c,merge:g,pick:d}=a;class p extends s{pointAttribs(){return{}}translate(){let b=this.yAxis,x=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(f){x.forEach(function(M){f[M]!==null&&(f[M+"Plot"]=b.translate(f[M],0,1,0,1))}),f.plotHigh=f.highPlot})}drawPoints(){let b,x,f,M,L,_,w,k,z,O,C,A,F,S=this.points,T=this.options,D=this.chart,P=D.renderer,m=this.doQuartiles!==!1,u=this.options.whiskerLength;for(let v of S){let I=(k=v.graphic)?"animate":"attr",E=v.shapeArgs,R={},j={},G={},W={},N=v.color||this.color;if(v.plotY!==void 0){let B;z=E.width,C=(O=E.x)+z,A=z/2,b=m?v.q1Plot:v.lowPlot,x=m?v.q3Plot:v.lowPlot,f=v.highPlot,M=v.lowPlot,k||(v.graphic=k=P.g("point").add(this.group),v.stem=P.path().addClass("highcharts-boxplot-stem").add(k),u&&(v.whiskers=P.path().addClass("highcharts-boxplot-whisker").add(k)),m&&(v.box=P.path(w).addClass("highcharts-boxplot-box").add(k)),v.medianShape=P.path(_).addClass("highcharts-boxplot-median").add(k)),D.styledMode||(j.stroke=v.stemColor||T.stemColor||N,j["stroke-width"]=d(v.stemWidth,T.stemWidth,T.lineWidth),j.dashstyle=v.stemDashStyle||T.stemDashStyle||T.dashStyle,v.stem.attr(j),u&&(G.stroke=v.whiskerColor||T.whiskerColor||N,G["stroke-width"]=d(v.whiskerWidth,T.whiskerWidth,T.lineWidth),G.dashstyle=v.whiskerDashStyle||T.whiskerDashStyle||T.dashStyle,v.whiskers.attr(G)),m&&(R.fill=v.fillColor||T.fillColor||N,R.stroke=T.lineColor||N,R["stroke-width"]=T.lineWidth||0,R.dashstyle=v.boxDashStyle||T.boxDashStyle||T.dashStyle,v.box.attr(R)),W.stroke=v.medianColor||T.medianColor||N,W["stroke-width"]=d(v.medianWidth,T.medianWidth,T.lineWidth),W.dashstyle=v.medianDashStyle||T.medianDashStyle||T.dashStyle,v.medianShape.attr(W));let X=h((v.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,v.stem.strokeWidth());if(B=[["M",X,x],["L",X,f],["M",X,b],["L",X,M]],v.stem[I]({d:B}),m){let V=v.box.strokeWidth();b=h(b,V),x=h(x,V),B=[["M",O=h(O,V),x],["L",O,b],["L",C=h(C,V),b],["L",C,x],["L",O,x],["Z"]],v.box[I]({d:B})}if(u){let V=v.whiskers.strokeWidth();f=h(v.highPlot,V),M=h(v.lowPlot,V),B=[["M",h(X-(F=typeof u=="string"&&/%$/.test(u)?A*parseFloat(u)/100:Number(u)/2)),f],["L",h(X+F),f],["M",h(X-F),M],["L",h(X+F),M]],v.whiskers[I]({d:B})}B=[["M",O,L=h(v.medianPlot,v.medianShape.strokeWidth())],["L",C,L]],v.medianShape[I]({d:B})}}}toYData(b){return[b.low,b.q1,b.median,b.q3,b.high]}}return p.defaultOptions=g(s.defaultOptions,i),c(p.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:l,setStackedPoints:l}),o.registerSeriesType("boxplot",p),p}),e(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),e(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{parse:a}=i,{noop:l}=r,{arrayMax:h,arrayMin:c,isNumber:g,merge:d,pick:p,stableSort:y}=o;return class{constructor(b,x){this.setState=l,this.init(b,x)}init(b,x){this.options=b,this.visible=!0,this.chart=x.chart,this.legend=x}addToLegend(b){b.splice(this.options.legendIndex,0,this)}drawLegendSymbol(b){let x,f=p(b.options.itemDistance,20),M=this.legendItem||{},L=this.options,_=L.ranges,w=L.connectorDistance;if(!_||!_.length||!g(_[0].value)){b.options.bubbleLegend.autoRanges=!0;return}y(_,function(C,A){return A.value-C.value}),this.ranges=_,this.setOptions(),this.render();let k=this.getMaxLabelSize(),z=this.ranges[0].radius,O=2*z;x=(x=w-z+k.width)>0?x:0,this.maxLabel=k,this.movementX=L.labels.align==="left"?x:0,M.labelWidth=O+x+f,M.labelHeight=O+k.height/2}setOptions(){let b=this.ranges,x=this.options,f=this.chart.series[x.seriesIndex],M=this.legend.baseline,L={zIndex:x.zIndex,"stroke-width":x.borderWidth},_={zIndex:x.zIndex,"stroke-width":x.connectorWidth},w={align:this.legend.options.rtl||x.labels.align==="left"?"right":"left",zIndex:x.zIndex},k=f.options.marker.fillOpacity,z=this.chart.styledMode;b.forEach(function(O,C){z||(L.stroke=p(O.borderColor,x.borderColor,f.color),L.fill=p(O.color,x.color,k!==1?a(f.color).setOpacity(k).get("rgba"):f.color),_.stroke=p(O.connectorColor,x.connectorColor,f.color)),b[C].radius=this.getRangeRadius(O.value),b[C]=d(b[C],{center:b[0].radius-b[C].radius+M}),z||d(!0,b[C],{bubbleAttribs:d(L),connectorAttribs:d(_),labelAttribs:w})},this)}getRangeRadius(b){let x=this.options,f=this.options.seriesIndex,M=this.chart.series[f],L=x.ranges[0].value,_=x.ranges[x.ranges.length-1].value,w=x.minSize,k=x.maxSize;return M.getRadius.call(this,_,L,w,k,b)}render(){let b=this.legendItem||{},x=this.chart.renderer,f=this.options.zThreshold;for(let M of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),b.symbol=x.g("bubble-legend"),b.label=x.g("bubble-legend-item").css(this.legend.itemStyle||{}),b.symbol.translateX=0,b.symbol.translateY=0,b.symbol.add(b.label),b.label.add(b.group),this.ranges))M.value>=f&&this.renderRange(M);this.hideOverlappingLabels()}renderRange(b){let x=this.ranges[0],f=this.legend,M=this.options,L=M.labels,_=this.chart,w=_.series[M.seriesIndex],k=_.renderer,z=this.symbols,O=z.labels,C=b.center,A=Math.abs(b.radius),F=M.connectorDistance||0,S=L.align,T=f.options.rtl,D=M.borderWidth,P=M.connectorWidth,m=x.radius||0,u=C-A-D/2+P/2,v=(u%1?1:.5)-(P%2?0:.5),I=k.styledMode,E=T||S==="left"?-F:F;S==="center"&&(E=0,M.connectorDistance=0,b.labelAttribs.align="center"),z.bubbleItems.push(k.circle(m,C+v,A).attr(I?{}:b.bubbleAttribs).addClass((I?"highcharts-color-"+w.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(M.className||"")).add(this.legendItem.symbol)),z.connectors.push(k.path(k.crispLine([["M",m,u],["L",m+E,u]],M.connectorWidth)).attr(I?{}:b.connectorAttribs).addClass((I?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(M.connectorClassName||"")).add(this.legendItem.symbol));let R=k.text(this.formatLabel(b)).attr(I?{}:b.labelAttribs).css(I?{}:L.style).addClass("highcharts-bubble-legend-labels "+(M.labels.className||"")).add(this.legendItem.symbol),j={x:m+E+M.labels.x,y:u+M.labels.y+.4*R.getBBox().height};R.attr(j),O.push(R),R.placed=!0,R.alignAttr=j}getMaxLabelSize(){let b,x;return this.symbols.labels.forEach(function(f){x=f.getBBox(!0),b=b?x.width>b.width?x:b:x}),b||{}}formatLabel(b){let x=this.options,f=x.labels.formatter,M=x.labels.format,{numberFormatter:L}=this.chart;return M?s.format(M,b):f?f.call(b):L(b.value,1)}hideOverlappingLabels(){let b=this.chart,x=this.options.labels.allowOverlap,f=this.symbols;!x&&f&&(b.hideOverlappingLabels(f.labels),f.labels.forEach(function(M,L){M.newOpacity?M.newOpacity!==M.oldOpacity&&f.connectors[L].show():f.connectors[L].hide()}))}getRanges(){let b=this.legend.bubbleLegend,x=b.chart.series,f=b.options.ranges,M,L,_=Number.MAX_VALUE,w=-Number.MAX_VALUE;return x.forEach(function(k){k.isBubble&&!k.ignoreSeries&&(L=k.zData.filter(g)).length&&(_=p(k.options.zMin,Math.min(_,Math.max(c(L),k.options.displayNegative===!1?k.options.zThreshold:-Number.MAX_VALUE))),w=p(k.options.zMax,Math.max(w,h(L))))}),M=_===w?[{value:w}]:[{value:_},{value:(_+w)/2},{value:w,autoRanges:!0}],f.length&&f[0].radius&&M.reverse(),M.forEach(function(k,z){f&&f[z]&&(M[z]=d(f[z],k))}),M}predictBubbleSizes(){let b=this.chart,x=b.legend.options,f=x.floating,M=x.layout==="horizontal",L=M?b.legend.lastLineHeight:0,_=b.plotSizeX,w=b.plotSizeY,k=b.series[this.options.seriesIndex],z=k.getPxExtremes(),O=Math.ceil(z.minPxSize),C=Math.ceil(z.maxPxSize),A=Math.min(w,_),F,S=k.options.maxSize;return f||!/%$/.test(S)?F=C:(F=(A+L)*(S=parseFloat(S))/100/(S/100+1),(M&&w-F>=_||!M&&_-F>=w)&&(F=C)),[O,Math.ceil(F)]}updateRanges(b,x){let f=this.legend.options.bubbleLegend;f.minSize=b,f.maxSize=x,f.ranges=this.getRanges()}correctSizes(){let b=this.legend,x=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(x.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,x.maxPxSize),b.render())}}}),e(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r,o,a){let{setOptions:l}=r,{composed:h}=o,{addEvent:c,objectEach:g,pushUnique:d,wrap:p}=a;function y(_,w,k){let z,O,C,A=this.legend,F=b(this)>=0;A&&A.options.enabled&&A.bubbleLegend&&A.options.bubbleLegend.autoRanges&&F?(z=A.bubbleLegend.options,O=A.bubbleLegend.predictBubbleSizes(),A.bubbleLegend.updateRanges(O[0],O[1]),z.placed||(A.group.placed=!1,A.allItems.forEach(S=>{(C=S.legendItem||{}).group&&(C.group.translateY=void 0)})),A.render(),z.placed||(this.getMargins(),this.axes.forEach(function(S){S.visible&&S.render(),z.placed||(S.setScale(),S.updateNames(),g(S.ticks,function(T){T.isNew=!0,T.isNewLabel=!0}))}),this.getMargins()),z.placed=!0,_.call(this,w,k),A.bubbleLegend.correctSizes(),L(A,x(A))):(_.call(this,w,k),A&&A.options.enabled&&A.bubbleLegend&&(A.render(),L(A,x(A))))}function b(_){let w=_.series,k=0;for(;k<w.length;){if(w[k]&&w[k].isBubble&&w[k].visible&&w[k].zData.length)return k;k++}return-1}function x(_){let w=_.allItems,k=[],z=w.length,O,C,A,F=0,S=0;for(F=0;F<z;F++)if(C=w[F].legendItem||{},A=(w[F+1]||{}).legendItem||{},C.labelHeight&&(w[F].itemHeight=C.labelHeight),w[F]===w[z-1]||C.y!==A.y){for(k.push({height:0}),O=k[k.length-1];S<=F;S++)w[S].itemHeight>O.height&&(O.height=w[S].itemHeight);O.step=F}return k}function f(_){let w=this.bubbleLegend,k=this.options,z=k.bubbleLegend,O=b(this.chart);w&&w.ranges&&w.ranges.length&&(z.ranges.length&&(z.autoRanges=!!z.ranges[0].autoRanges),this.destroyItem(w)),O>=0&&k.enabled&&z.enabled&&(z.seriesIndex=O,this.bubbleLegend=new s(z,this),this.bubbleLegend.addToLegend(_.allItems))}function M(_){let w;if(_.defaultPrevented)return!1;let k=_.legendItem,z=this.chart,O=k.visible;this&&this.bubbleLegend&&(k.visible=!O,k.ignoreSeries=O,w=b(z)>=0,this.bubbleLegend.visible!==w&&(this.update({bubbleLegend:{enabled:w}}),this.bubbleLegend.visible=w),k.visible=O)}function L(_,w){let k=_.allItems,z=_.options.rtl,O,C,A,F,S=0;k.forEach((T,D)=>{(F=T.legendItem||{}).group&&(O=F.group.translateX||0,C=F.y||0,((A=T.movementX)||z&&T.ranges)&&(A=z?O-T.options.maxSize/2:O+A,F.group.attr({translateX:A})),D>w[S].step&&S++,F.group.attr({translateY:Math.round(C+w[S].height/2)}),F.y=C+w[S].height/2)})}return{compose:function(_,w){d(h,"Series.BubbleLegend")&&(l({legend:{bubbleLegend:i}}),p(_.prototype,"drawChartBox",y),c(w,"afterGetAllItems",f),c(w,"itemClick",M))}}}),e(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{seriesTypes:{scatter:{prototype:{pointClass:o}}}}=s,{extend:a}=r;class l extends o{haloPath(c){let g=(c&&this.marker&&this.marker.radius||0)+c;if(this.series.chart.inverted){let d=this.pos()||[0,0],{xAxis:p,yAxis:y,chart:b}=this.series;return b.renderer.symbols.circle(p.len-d[1]-g,y.len-d[0]-g,2*g,2*g)}return i.prototype.haloPath.call(this,g)}}return a(l.prototype,{ttBelow:!1}),l}),e(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{parse:h}=r,{composed:c,noop:g}=o,{series:d,seriesTypes:{column:{prototype:p},scatter:y}}=a,{addEvent:b,arrayMax:x,arrayMin:f,clamp:M,extend:L,isNumber:_,merge:w,pick:k,pushUnique:z}=l;function O(){let A=this.len,{coll:F,isXAxis:S,min:T}=this,D=S?"xData":"yData",P=(this.max||0)-(T||0),m=0,u=A,v=A/P,I;(F==="xAxis"||F==="yAxis")&&(this.series.forEach(E=>{if(E.bubblePadding&&E.reserveSpace()){this.allowZoomOutside=!0,I=!0;let R=E[D];if(S&&((E.onPoint||E).getRadii(0,0,E),E.onPoint&&(E.radii=E.onPoint.radii)),P>0){let j=R.length;for(;j--;)if(_(R[j])&&this.dataMin<=R[j]&&R[j]<=this.max){let G=E.radii&&E.radii[j]||0;m=Math.min((R[j]-T)*v-G,m),u=Math.max((R[j]-T)*v+G,u)}}}}),I&&P>0&&!this.logarithmic&&(u-=A,v*=(A+Math.max(0,m)-Math.min(u,A))/A,[["min","userMin",m],["max","userMax",u]].forEach(E=>{k(this.options[E[0]],this[E[1]])===void 0&&(this[E[0]]+=E[2]/v)})))}class C extends y{static compose(F,S,T){i.compose(S,T),z(c,"Series.Bubble")&&b(F,"foundExtremes",O)}animate(F){!F&&this.points.length<this.options.animationLimit&&this.points.forEach(function(S){let{graphic:T,plotX:D=0,plotY:P=0}=S;T&&T.width&&(this.hasRendered||T.attr({x:D,y:P,width:1,height:1}),T.animate(this.markerAttribs(S),this.options.animation))},this)}getRadii(){let F=this.zData,S=this.yData,T=[],D,P,m,u=this.chart.bubbleZExtremes,{minPxSize:v,maxPxSize:I}=this.getPxExtremes();if(!u){let E,R=Number.MAX_VALUE,j=-Number.MAX_VALUE;this.chart.series.forEach(G=>{if(G.bubblePadding&&G.reserveSpace()){let W=(G.onPoint||G).getZExtremes();W&&(R=Math.min(k(R,W.zMin),W.zMin),j=Math.max(k(j,W.zMax),W.zMax),E=!0)}}),E?(u={zMin:R,zMax:j},this.chart.bubbleZExtremes=u):u={zMin:0,zMax:0}}for(P=0,D=F.length;P<D;P++)m=F[P],T.push(this.getRadius(u.zMin,u.zMax,v,I,m,S&&S[P]));this.radii=T}getRadius(F,S,T,D,P,m){let u=this.options,v=u.sizeBy!=="width",I=u.zThreshold,E=S-F,R=.5;if(m===null||P===null)return null;if(_(P)){if(u.sizeByAbsoluteValue&&(P=Math.abs(P-I),S=E=Math.max(S-I,Math.abs(F-I)),F=0),P<F)return T/2-1;E>0&&(R=(P-F)/E)}return v&&R>=0&&(R=Math.sqrt(R)),Math.ceil(T+R*(D-T))/2}hasData(){return!!this.processedXData.length}markerAttribs(F,S){let T=super.markerAttribs(F,S),{height:D=0,width:P=0}=T;return this.chart.inverted?L(T,{x:(F.plotX||0)-P/2,y:(F.plotY||0)-D/2}):T}pointAttribs(F,S){let T=this.options.marker.fillOpacity,D=d.prototype.pointAttribs.call(this,F,S);return T!==1&&(D.fill=h(D.fill).setOpacity(T).get("rgba")),D}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:F,options:S,radii:T}=this,{minPxSize:D}=this.getPxExtremes(),P=F.length;for(;P--;){let m=F[P],u=T?T[P]:0;this.zoneAxis==="z"&&(m.negative=(m.z||0)<(S.zThreshold||0)),_(u)&&u>=D/2?(m.marker=L(m.marker,{radius:u,width:2*u,height:2*u}),m.dlBox={x:m.plotX-u,y:m.plotY-u,width:2*u,height:2*u}):(m.shapeArgs=m.plotY=m.dlBox=void 0,m.isInside=!1)}}getPxExtremes(){let F=Math.min(this.chart.plotWidth,this.chart.plotHeight),S=P=>{let m;return typeof P=="string"&&(m=/%$/.test(P),P=parseInt(P,10)),m?F*P/100:P},T=S(k(this.options.minSize,8)),D=Math.max(S(k(this.options.maxSize,"20%")),T);return{minPxSize:T,maxPxSize:D}}getZExtremes(){let F=this.options,S=(this.zData||[]).filter(_);if(S.length){let T=k(F.zMin,M(f(S),F.displayNegative===!1?F.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),D=k(F.zMax,x(S));if(_(T)&&_(D))return{zMin:T,zMax:D}}}}return C.defaultOptions=w(y.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:A}=this.series.chart,{z:F}=this.point;return _(F)?A(F,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),L(C.prototype,{alignDataLabel:p.alignDataLabel,applyZones:g,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:s,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),b(C,"updatedData",A=>{delete A.target.chart.bubbleZExtremes}),b(C,"remove",A=>{delete A.target.chart.bubbleZExtremes}),a.registerSeriesType("bubble",C),C}),e(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s){let{seriesTypes:{column:{prototype:{pointClass:{prototype:r}}},arearange:{prototype:{pointClass:o}}}}=i,{extend:a,isNumber:l}=s;class h extends o{isValid(){return l(this.low)}}return a(h.prototype,{setState:r.setState}),h}),e(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{noop:a}=s,{seriesTypes:{arearange:l,column:h,column:{prototype:c}}}=r,{addEvent:g,clamp:d,extend:p,isNumber:y,merge:b,pick:x}=o;class f extends l{setOptions(){return b(!0,arguments[0],{stacking:void 0}),l.prototype.setOptions.apply(this,arguments)}translate(){return c.translate.apply(this)}pointAttribs(){return c.pointAttribs.apply(this,arguments)}translate3dPoints(){return c.translate3dPoints.apply(this,arguments)}translate3dShapes(){return c.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let L,_,w,k,z=this.yAxis,O=this.xAxis,C=O.startAngleRad,A=this.chart,F=this.xAxis.isRadial,S=Math.max(A.chartWidth,A.chartHeight)+999;this.points.forEach(T=>{let D=T.shapeArgs||{},P=this.options.minPointLength,m=T.plotY,u=z.translate(T.high,0,1,0,1);if(y(u)&&y(m))if(T.plotHigh=d(u,-S,S),T.plotLow=d(m,-S,S),k=T.plotHigh,Math.abs(L=x(T.rectPlotY,T.plotY)-T.plotHigh)<P?(_=P-L,L+=_,k-=_/2):L<0&&(L*=-1,k-=L),F&&this.polar)w=T.barX+C,T.shapeType="arc",T.shapeArgs=this.polar.arc(k+L,k,w,w+T.pointWidth);else{D.height=L,D.y=k;let{x:v=0,width:I=0}=D;T.shapeArgs=b(T.shapeArgs,this.crispCol(v,k,I,L)),T.tooltipPos=A.inverted?[z.len+z.pos-A.plotLeft-k-L/2,O.len+O.pos-A.plotTop-v-I/2,L]:[O.left-A.plotLeft+v+I/2,z.pos-A.plotTop+k+L/2,L]}})}}return f.defaultOptions=b(h.defaultOptions,l.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),g(f,"afterColumnTranslate",function(){f.prototype.afterColumnTranslate.apply(this)},{order:5}),p(f.prototype,{directTouch:!0,pointClass:i,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:c.adjustForMissingColumns,animate:c.animate,crispCol:c.crispCol,drawGraph:a,drawPoints:c.drawPoints,getSymbol:a,drawTracker:c.drawTracker,getColumnMetrics:c.getColumnMetrics}),r.registerSeriesType("columnrange",f),f}),e(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),e(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{column:o}=s.seriesTypes,{clamp:a,merge:l,pick:h}=r;class c extends o{translate(){let d=this.chart,p=this.options,y=this.dense=this.closestPointRange*this.xAxis.transA<2,b=this.borderWidth=h(p.borderWidth,y?0:1),x=this.yAxis,f=p.threshold,M=h(p.minPointLength,5),L=this.getColumnMetrics(),_=L.width,w=this.pointXOffset=L.offset,k=this.translatedThreshold=x.getThreshold(f),z=this.barW=Math.max(_,1+2*b);for(let O of(d.inverted&&(k-=.5),p.pointPadding&&(z=Math.ceil(z)),super.translate(),this.points)){let C=h(O.yBottom,k),A=999+Math.abs(C),F=a(O.plotY,-A,x.len+A),S=z/2,T=Math.min(F,C),D=Math.max(F,C)-T,P=O.plotX+w,m,u,v,I,E,R,j,G,W,N,B;p.centerInCategory&&(P=this.adjustForMissingColumns(P,_,O,L)),O.barX=P,O.pointWidth=_,O.tooltipPos=d.inverted?[x.len+x.pos-d.plotLeft-F,this.xAxis.len-P-S,D]:[P+S,F+x.pos-d.plotTop,D],m=f+(O.total||O.y),p.stacking==="percent"&&(m=f+(O.y<0)?-100:100);let X=x.toPixels(m,!0);v=(u=d.plotHeight-X-(d.plotHeight-k))?S*(T-X)/u:0,I=u?S*(T+D-X)/u:0,R=P-v+S,j=P+v+S,G=P+I+S,W=P-I+S,N=T-M,B=T+D,O.y<0&&(N=T,B=T+D+M),d.inverted&&(E=x.width-T,u=X-(x.width-k),v=S*(X-E)/u,I=S*(X-(E-D))/u,j=(R=P+S+v)-2*v,G=P-I+S,W=P+I+S,N=T,B=T+D-M,O.y<0&&(B=T+D+M)),O.shapeType="path",O.shapeArgs={x:R,y:N,width:j-R,height:D,d:[["M",R,N],["L",j,N],["L",G,B],["L",W,B],["Z"]]}}}}return c.defaultOptions=l(o.defaultOptions,i),s.registerSeriesType("columnpyramid",c),c}),e(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),e(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a){let{arearange:l}=o.seriesTypes,{addEvent:h,merge:c,extend:g}=a;class d extends i{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||s.prototype.getColumnMetrics.call(this)}drawDataLabels(){let y=this.pointValKey;if(l)for(let b of(l.prototype.drawDataLabels.call(this),this.points))b.y=b[y]}toYData(y){return[y.low,y.high]}}return d.defaultOptions=c(i.defaultOptions,r),h(d,"afterTranslate",function(){for(let p of this.points)p.plotLow=p.plotY},{order:0}),g(d.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),o.registerSeriesType("errorbar",d),d}),e(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(i){let{series:{prototype:{pointClass:s}}}=i;return class extends s{setState(r){this.state=r}}}),e(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{noop:a}=s,{series:l,seriesTypes:{column:h}}=r,{clamp:c,isNumber:g,extend:d,merge:p,pick:y,pInt:b,defined:x}=o;class f extends l{translate(){let L=this.yAxis,_=this.options,w=L.center;this.generatePoints(),this.points.forEach(k=>{let z=p(_.dial,k.dial),O=b(z.radius)*w[2]/200,C=b(z.baseLength)*O/100,A=b(z.rearLength)*O/100,F=z.baseWidth,S=z.topWidth,T=_.overshoot,D=L.startAngleRad+L.translate(k.y,void 0,void 0,void 0,!0);(g(T)||_.wrap===!1)&&(T=g(T)?T/180*Math.PI:0,D=c(D,L.startAngleRad-T,L.endAngleRad+T)),D=180*D/Math.PI,k.shapeType="path";let P=z.path||[["M",-A,-F/2],["L",C,-F/2],["L",O,-S/2],["L",O,S/2],["L",C,F/2],["L",-A,F/2],["Z"]];k.shapeArgs={d:P,translateX:w[0],translateY:w[1],rotation:D},k.plotX=w[0],k.plotY=w[1],x(k.y)&&L.max-L.min&&(k.percentage=(k.y-L.min)/(L.max-L.min)*100)})}drawPoints(){let L=this,_=L.chart,w=L.yAxis.center,k=L.pivot,z=L.options,O=z.pivot,C=_.renderer;L.points.forEach(A=>{let F=A.graphic,S=A.shapeArgs,T=S.d,D=p(z.dial,A.dial);F?(F.animate(S),S.d=T):A.graphic=C[A.shapeType](S).addClass("highcharts-dial").add(L.group),_.styledMode||A.graphic[F?"animate":"attr"]({stroke:D.borderColor,"stroke-width":D.borderWidth,fill:D.backgroundColor})}),k?k.animate({translateX:w[0],translateY:w[1]}):O&&(L.pivot=C.circle(0,0,O.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(w[0],w[1]).add(L.group),_.styledMode||L.pivot.attr({fill:O.backgroundColor,stroke:O.borderColor,"stroke-width":O.borderWidth}))}animate(L){let _=this;L||_.points.forEach(w=>{let k=w.graphic;k&&(k.attr({rotation:180*_.yAxis.startAngleRad/Math.PI}),k.animate({rotation:w.shapeArgs.rotation},_.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),l.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(L,_){l.prototype.setData.call(this,L,!1),this.processData(),this.generatePoints(),y(_,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return f.defaultOptions=p(l.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),d(f.prototype,{angular:!0,directTouch:!0,drawGraph:a,drawTracker:h.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:i,trackerGroups:["group","dataLabelsGroup"]}),r.registerSeriesType("gauge",f),f}),e(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let{composed:r}=i,{addEvent:o,pushUnique:a}=s;function l(){let h,c,g,d=this;d.container&&(h=o(d.container,"mousedown",p=>{let y=d.hoverPoint;y&&y.series&&y.series.hasDraggableNodes&&y.series.options.draggable&&(y.series.onMouseDown(y,p),c=o(d.container,"mousemove",b=>y&&y.series&&y.series.onMouseMove(y,b)),g=o(d.container.ownerDocument,"mouseup",b=>(c(),g(),y&&y.series&&y.series.onMouseUp(y,b))))})),o(d,"destroy",function(){h()})}return{compose:function(h){a(r,"DragNodes")&&o(h,"load",l)},onMouseDown:function(h,c){let g=this.chart.pointer?.normalize(c)||c;h.fixedPosition={chartX:g.chartX,chartY:g.chartY,plotX:h.plotX,plotY:h.plotY},h.inDragMode=!0},onMouseMove:function(h,c){if(h.fixedPosition&&h.inDragMode){let g,d,p=this.chart,y=p.pointer?.normalize(c)||c,b=h.fixedPosition.chartX-y.chartX,x=h.fixedPosition.chartY-y.chartY,f=p.graphLayoutsLookup;(Math.abs(b)>5||Math.abs(x)>5)&&(g=h.fixedPosition.plotX-b,d=h.fixedPosition.plotY-x,p.isInsidePlot(g,d)&&(h.plotX=g,h.plotY=d,h.hasDragged=!0,this.redrawHalo(h),f.forEach(M=>{M.restartSimulation()})))}},onMouseUp:function(h){h.fixedPosition&&(h.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),h.inDragMode=h.hasDragged=!1,this.options.fixedDraggable||delete h.fixedPosition)},redrawHalo:function(h){h&&this.halo&&this.halo.attr({d:h.haloPath(this.options.states.hover.halo.size)})}}}),e(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r){let{setAnimation:o}=i,{composed:a}=s,{addEvent:l,pushUnique:h}=r;function c(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(y=>{y.updateSimulation()}),this.redraw())}function g(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(y=>{y.updateSimulation(!1)}),this.redraw())}function d(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(y=>{y.stop()})}function p(){let y,b=!1,x=f=>{f.maxIterations--&&isFinite(f.temperature)&&!f.isStable()&&!f.enableSimulation&&(f.beforeStep&&f.beforeStep(),f.step(),y=!1,b=!0)};if(this.graphLayoutsLookup){for(o(!1,this),this.graphLayoutsLookup.forEach(f=>f.start());!y;)y=!0,this.graphLayoutsLookup.forEach(x);b&&this.series.forEach(f=>{f&&f.layout&&f.render()})}}return{compose:function(y){h(a,"GraphLayout")&&(l(y,"afterPrint",c),l(y,"beforePrint",g),l(y,"predraw",d),l(y,"render",p))},integrations:{},layouts:{}}}),e(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(i,s,r){let{seriesTypes:{bubble:{prototype:{pointClass:o}}}}=r;return class extends o{destroy(){return this.series?.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),s.prototype.destroy.apply(this,arguments)}firePointEvent(){let a=this.series.options;if(this.isParentNode&&a.parentNode){let l=a.allowPointSelect;a.allowPointSelect=a.parentNode.allowPointSelect,s.prototype.firePointEvent.apply(this,arguments),a.allowPointSelect=l}else s.prototype.firePointEvent.apply(this,arguments)}select(){let a=this.series.chart;this.isParentNode?(a.getSelectedPoints=a.getSelectedParentNodes,s.prototype.select.apply(this,arguments),a.getSelectedPoints=i.prototype.getSelectedPoints):s.prototype.select.apply(this,arguments)}}}),e(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(i){let{isNumber:s}=i;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:o}=this.point;return s(o)?r(o,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),e(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(i,s,r){let o=i.getMass(),a=-r.x*s*this.diffTemperature,l=-r.y*s*this.diffTemperature;i.fromNode.fixedPosition||(i.fromNode.plotX-=a*o.fromNode/i.fromNode.degree,i.fromNode.plotY-=l*o.fromNode/i.fromNode.degree),i.toNode.fixedPosition||(i.toNode.plotX+=a*o.toNode/i.toNode.degree,i.toNode.plotY+=l*o.toNode/i.toNode.degree)},attractiveForceFunction:function(i,s){return(s-i)/i},barycenter:function(){let i=this.options.gravitationalConstant||0,s=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*i,r=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*i;this.nodes.forEach(function(o){o.fixedPosition||(o.plotX-=s/o.mass/o.degree,o.plotY-=r/o.mass/o.degree)})},getK:function(i){return Math.pow(i.box.width*i.box.height/i.nodes.length,.5)},integrate:function(i,s){let r=-i.options.friction,o=i.options.maxSpeed,a=s.prevX,l=s.prevY,h=(s.plotX+s.dispX-a)*r,c=(s.plotY+s.dispY-l)*r,g=Math.abs,d=g(h)/(h||1),p=g(c)/(c||1),y=d*Math.min(o,Math.abs(h)),b=p*Math.min(o,Math.abs(c));s.prevX=s.plotX+s.dispX,s.prevY=s.plotY+s.dispY,s.plotX+=y,s.plotY+=b,s.temperature=i.vectorLength({x:y,y:b})},repulsive:function(i,s,r){let o=s*this.diffTemperature/i.mass/i.degree;i.fixedPosition||(i.plotX+=r.x*o,i.plotY+=r.y*o)},repulsiveForceFunction:function(i,s){return(s-i)/i*(s>i?1:0)}}}),e(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(i,s){let{noop:r}=i;return{barycenter:function(){let o,a,l=this.options.gravitationalConstant,h=this.box,c=this.nodes;for(let g of c)this.options.splitSeries&&!g.isParentNode?(o=g.series.parentNode.plotX,a=g.series.parentNode.plotY):(o=h.width/2,a=h.height/2),g.fixedPosition||(g.plotX-=(g.plotX-o)*l/(g.mass*Math.sqrt(c.length)),g.plotY-=(g.plotY-a)*l/(g.mass*Math.sqrt(c.length)))},getK:r,integrate:s.integrate,repulsive:function(o,a,l,h){let c=a*this.diffTemperature/o.mass/o.degree,g=l.x*c,d=l.y*c;o.fixedPosition||(o.plotX+=g,o.plotY+=d),h.fixedPosition||(h.plotX-=g,h.plotY-=d)},repulsiveForceFunction:function(o,a,l,h){return Math.min(o,(l.marker.radius+h.marker.radius)/2)}}}),e(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(i,s,r,o){let a=i.getMass(),l=r.x/o*s,h=r.y/o*s;i.fromNode.fixedPosition||(i.fromNode.dispX-=l*a.fromNode/i.fromNode.degree,i.fromNode.dispY-=h*a.fromNode/i.fromNode.degree),i.toNode.fixedPosition||(i.toNode.dispX+=l*a.toNode/i.toNode.degree,i.toNode.dispY+=h*a.toNode/i.toNode.degree)},attractiveForceFunction:function(i,s){return i*i/s},barycenter:function(){let i=this.options.gravitationalConstant,s=this.barycenter.xFactor,r=this.barycenter.yFactor;this.nodes.forEach(function(o){if(!o.fixedPosition){let a=o.getDegree(),l=a*(1+a/2);o.dispX+=(s-o.plotX)*i*l/o.degree,o.dispY+=(r-o.plotY)*i*l/o.degree}})},getK:function(i){return Math.pow(i.box.width*i.box.height/i.nodes.length,.3)},integrate:function(i,s){s.dispX+=s.dispX*i.options.friction,s.dispY+=s.dispY*i.options.friction;let r=s.temperature=i.vectorLength({x:s.dispX,y:s.dispY});r!==0&&(s.plotX+=s.dispX/r*Math.min(Math.abs(s.dispX),i.temperature),s.plotY+=s.dispY/r*Math.min(Math.abs(s.dispY),i.temperature))},repulsive:function(i,s,r,o){i.dispX+=r.x/o*s/i.degree,i.dispY+=r.y/o*s/i.degree},repulsiveForceFunction:function(i,s){return s*s/i}}}),e(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class i{constructor(r){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=r,this.boxSize=Math.min(r.width,r.height)}divideBox(){let r=this.box.width/2,o=this.box.height/2;this.nodes[0]=new i({left:this.box.left,top:this.box.top,width:r,height:o}),this.nodes[1]=new i({left:this.box.left+r,top:this.box.top,width:r,height:o}),this.nodes[2]=new i({left:this.box.left+r,top:this.box.top+o,width:r,height:o}),this.nodes[3]=new i({left:this.box.left,top:this.box.top+o,width:r,height:o})}getBoxPosition(r){let o=r.plotX<this.box.left+this.box.width/2,a=r.plotY<this.box.top+this.box.height/2;return o?a?0:3:a?1:2}insert(r,o){let a;this.isInternal?this.nodes[this.getBoxPosition(r)].insert(r,o-1):(this.isEmpty=!1,this.body?o?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,o-1),this.body=!0),this.nodes[this.getBoxPosition(r)].insert(r,o-1)):((a=new i({top:r.plotX||NaN,left:r.plotY||NaN,width:.1,height:.1})).body=r,a.isInternal=!1,this.nodes.push(a)):(this.isInternal=!1,this.body=r))}updateMassAndCenter(){let r=0,o=0,a=0;if(this.isInternal){for(let l of this.nodes)l.isEmpty||(r+=l.mass,o+=l.plotX*l.mass,a+=l.plotY*l.mass);o/=r,a/=r}else this.body&&(r=this.body.mass,o=this.body.plotX,a=this.body.plotY);this.mass=r,this.plotX=o,this.plotY=a}}return i}),e(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(i){return class{constructor(s,r,o,a){this.box={left:s,top:r,width:o,height:a},this.maxDepth=25,this.root=new i(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(s){s.updateMassAndCenter()})}insertNodes(s){for(let r of s)this.root.insert(r,this.maxDepth)}visitNodeRecursive(s,r,o){let a;if(s||(s=this.root),s===this.root&&r&&(a=r(s)),a!==!1){for(let l of s.nodes){if(l.isInternal){if(r&&(a=r(l)),a===!1)continue;this.visitNodeRecursive(l,r,o)}else l.body&&r&&r(l.body);o&&o(l)}s===this.root&&o&&o(s)}}}}),e(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(i,s,r,o,a,l){let{win:h}=s,{clamp:c,defined:g,isFunction:d,fireEvent:p,pick:y}=a;class b{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(f){r.compose(f),r.integrations.euler=i,r.integrations.verlet=l,r.layouts["reingold-fruchterman"]=b}init(f){this.options=f,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=r.integrations[f.integration],this.enableSimulation=f.enableSimulation,this.attractiveForce=y(f.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=y(f.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=f.approximation}updateSimulation(f){this.enableSimulation=y(f,this.options.enableSimulation)}start(){let f=this.series,M=this.options;this.currentStep=0,this.forces=f[0]&&f[0].forces||[],this.chart=f[0]&&f[0].chart,this.initialRendering&&(this.initPositions(),f.forEach(function(L){L.finishedAnimating=!0,L.render()})),this.setK(),this.resetSimulation(M),this.enableSimulation&&this.step()}step(){let f=this.series;for(let M of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[M+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let M of f)M.chart&&M.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&h.cancelAnimationFrame(this.simulation),this.simulation=h.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(M=>{p(M,"afterSimulation")}))}}stop(){this.simulation&&h.cancelAnimationFrame(this.simulation)}setArea(f,M,L,_){this.box={left:f,top:M,width:L,height:_}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(f,M){for(let L of f)M.indexOf(L)===-1&&M.push(L)}removeElementFromCollection(f,M){let L=M.indexOf(f);L!==-1&&M.splice(L,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(f){this.maxIterations=y(f,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(f){this.initialRendering=f}createQuadTree(){this.quadTree=new o(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let f=this.options.initialPositions;if(d(f))for(let M of(f.call(this),this.nodes))g(M.prevX)||(M.prevX=M.plotX),g(M.prevY)||(M.prevY=M.plotY),M.dispX=0,M.dispY=0;else f==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let f,M=this.box,L=this.nodes,_=2*Math.PI/(L.length+1),w=L.filter(function(A){return A.linksTo.length===0}),k={},z=this.options.initialPositionRadius,O=A=>{for(let F of A.linksFrom||[])k[F.toNode.id]||(k[F.toNode.id]=!0,C.push(F.toNode),O(F.toNode))},C=[];for(let A of w)C.push(A),O(A);if(C.length)for(let A of L)C.indexOf(A)===-1&&C.push(A);else C=L;for(let A=0,F=C.length;A<F;++A)(f=C[A]).plotX=f.prevX=y(f.plotX,M.width/2+z*Math.cos(A*_)),f.plotY=f.prevY=y(f.plotY,M.height/2+z*Math.sin(A*_)),f.dispX=0,f.dispY=0}setRandomPositions(){let f,M=this.box,L=this.nodes,_=L.length+1,w=k=>{let z=k*k/Math.PI;return z-Math.floor(z)};for(let k=0,z=L.length;k<z;++k)(f=L[k]).plotX=f.prevX=y(f.plotX,M.width*w(k)),f.plotY=f.prevY=y(f.plotY,M.height*w(_+k)),f.dispX=0,f.dispY=0}force(f,...M){this.integration[f].apply(this,M)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let f=0,M=0,L=0;for(let _ of this.nodes)M+=_.plotX*_.mass,L+=_.plotY*_.mass,f+=_.mass;return this.barycenter={x:M,y:L,xFactor:M/f,yFactor:L/f},this.barycenter}barnesHutApproximation(f,M){let L,_,w=this.getDistXY(f,M),k=this.vectorLength(w);return f!==M&&k!==0&&(M.isInternal?M.boxSize/k<this.options.theta&&k!==0?(_=this.repulsiveForce(k,this.k),this.force("repulsive",f,_*M.mass,w,k),L=!1):L=!0:(_=this.repulsiveForce(k,this.k),this.force("repulsive",f,_*M.mass,w,k))),L}repulsiveForces(){if(this.approximation==="barnes-hut")for(let f of this.nodes)this.quadTree.visitNodeRecursive(null,M=>this.barnesHutApproximation(f,M));else{let f,M,L;for(let _ of this.nodes)for(let w of this.nodes)_===w||_.fixedPosition||(L=this.getDistXY(_,w),(M=this.vectorLength(L))!==0&&(f=this.repulsiveForce(M,this.k),this.force("repulsive",_,f*w.mass,L,M)))}}attractiveForces(){let f,M,L;for(let _ of this.links)_.fromNode&&_.toNode&&(f=this.getDistXY(_.fromNode,_.toNode),(M=this.vectorLength(f))!==0&&(L=this.attractiveForce(M,this.k),this.force("attractive",_,L,f,M)))}applyLimits(){for(let f of this.nodes)f.fixedPosition||(this.integration.integrate(this,f),this.applyLimitBox(f,this.box),f.dispX=0,f.dispY=0)}applyLimitBox(f,M){let L=f.radius;f.plotX=c(f.plotX,M.left+L,M.width-L),f.plotY=c(f.plotY,M.top+L,M.height-L)}coolDown(f,M,L){return f-M*L}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let f=0;for(let M of this.nodes)f+=M.temperature;return f}vectorLength(f){return Math.sqrt(f.x*f.x+f.y*f.y)}getDistR(f,M){let L=this.getDistXY(f,M);return this.vectorLength(L)}getDistXY(f,M){let L=f.plotX-M.plotX,_=f.plotY-M.plotY;return{x:L,y:_,absX:Math.abs(L),absY:Math.abs(_)}}}return b}),e(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{addEvent:a,pick:l}=o;function h(){let d=this.series,p=[];return d.forEach(y=>{y.parentNode&&y.parentNode.selected&&p.push(y.parentNode)}),p}function c(){this.allDataPoints&&delete this.allDataPoints}class g extends r{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(p){r.compose(p),i.integrations.packedbubble=s,i.layouts.packedbubble=g;let y=p.prototype;y.getSelectedParentNodes||(a(p,"beforeRedraw",c),y.getSelectedParentNodes=h)}beforeStep(){this.options.marker&&this.series.forEach(p=>{p&&p.calculateParentRadius()})}isStable(){let p=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&p<1e-5||this.temperature<=0}setCircularPositions(){let p=this.box,y=this.nodes,b=2*Math.PI/(y.length+1),x=this.options.initialPositionRadius,f,M,L=0;for(let _ of y)this.options.splitSeries&&!_.isParentNode?(f=_.series.parentNode.plotX,M=_.series.parentNode.plotY):(f=p.width/2,M=p.height/2),_.plotX=_.prevX=l(_.plotX,f+x*Math.cos(_.index||L*b)),_.plotY=_.prevY=l(_.plotY,M+x*Math.sin(_.index||L*b)),_.dispX=0,_.dispY=0,L++}repulsiveForces(){let p,y,b,x=this,f=x.options.bubblePadding,M=x.nodes;M.forEach(L=>{L.degree=L.mass,L.neighbours=0,M.forEach(_=>{p=0,L!==_&&!L.fixedPosition&&(x.options.seriesInteraction||L.series===_.series)&&(b=x.getDistXY(L,_),(y=x.vectorLength(b)-(L.marker.radius+_.marker.radius+f))<0&&(L.degree+=.01,L.neighbours++,p=x.repulsiveForce(-y/Math.sqrt(L.neighbours),x.k,L,_)),x.force("repulsive",L,p*_.mass,b,_,y))})})}applyLimitBox(p,y){let b,x;this.options.splitSeries&&!p.isParentNode&&this.options.parentNodeLimit&&(b=this.getDistXY(p,p.series.parentNode),(x=p.series.parentNodeRadius-p.marker.radius-this.vectorLength(b))<0&&x>-2*p.marker.radius&&(p.plotX-=.01*b.x,p.plotY-=.01*b.y)),super.applyLimitBox(p,y)}}return i.layouts.packedbubble=g,g}),e(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(i,s){let{merge:r,syncTimeout:o}=i,{animObject:a}=s;return{initDataLabels:function(){let l=this.options.dataLabels;if(!this.dataLabelsGroup){let h=this.initDataLabelsGroup();return!this.chart.styledMode&&l?.style&&h.css(l.style),h.attr({opacity:0}),this.visible&&h.show(),h}return this.dataLabelsGroup.attr(r({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){let l=this.options.dataLabels;l?.defer&&this.options.layoutAlgorithm?.enableSimulation?o(()=>{this.deferDataLabels=!1},l?a(l.animation).defer:0):this.deferDataLabels=!1}}}),e(t,"Extensions/TextPath.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let{deg2rad:r}=i,{addEvent:o,merge:a,uniqueKey:l,defined:h,extend:c}=s;function g(y,b){b=a(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},b);let x=this.renderer.url,f=this.text||this,M=f.textPath,{attributes:L,enabled:_}=b;if(y=y||M&&M.path,M&&M.undo(),y&&_){let w=o(f,"afterModifyTree",k=>{if(y&&_){let z=y.attr("id");z||y.attr("id",z=l());let O={x:0,y:0};h(L.dx)&&(O.dx=L.dx,delete L.dx),h(L.dy)&&(O.dy=L.dy,delete L.dy),f.attr(O),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let C=k.nodes.slice(0);k.nodes.length=0,k.nodes[0]={tagName:"textPath",attributes:c(L,{"text-anchor":L.textAnchor,href:`${x}#${z}`}),children:C}}});f.textPath={path:y,undo:w}}else f.attr({dx:0,dy:0}),delete f.textPath;return this.added&&(f.textCache="",this.renderer.buildText(f)),this}function d(y){let b=y.bBox,x=this.element?.querySelector("textPath");if(x){let f=[],{b:M,h:L}=this.renderer.fontMetrics(this.element),_=L-M,w=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),k=x.innerHTML.replace(w,"").split(/<tspan class="highcharts-br"[^>]*>/),z=k.length,O=(C,A)=>{let{x:F,y:S}=A,T=(x.getRotationOfChar(C)-90)*r,D=Math.cos(T),P=Math.sin(T);return[[F-_*D,S-_*P],[F+M*D,S+M*P]]};for(let C=0,A=0;A<z;A++){let F=k[A].length;for(let S=0;S<F;S+=5)try{let T=C+S+A,[D,P]=O(T,x.getStartPositionOfChar(T));S===0?(f.push(P),f.push(D)):(A===0&&f.unshift(P),A===z-1&&f.push(D))}catch{break}C+=F-1;try{let S=C+A,T=x.getEndPositionOfChar(S),[D,P]=O(S,T);f.unshift(P),f.unshift(D)}catch{break}}f.length&&f.push(f[0].slice()),b.polygon=f}return b}function p(y){let b=y.labelOptions,x=y.point,f=b[x.formatPrefix+"TextPath"]||b.textPath;f&&!b.useHTML&&(this.setTextPath(x.getDataLabelPath?.(this)||x.graphic,f),x.dataLabelPath&&!f.enabled&&(x.dataLabelPath=x.dataLabelPath.destroy()))}return{compose:function(y){o(y,"afterGetBBox",d),o(y,"beforeAddingDataLabel",p);let b=y.prototype;b.setTextPath||(b.setTextPath=g)}}}),e(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(i,s,r,o,a,l,h,c,g,d,p,y){let{parse:b}=i,{noop:x}=o,{series:{prototype:f},seriesTypes:{bubble:M}}=c,{initDataLabels:L,initDataLabelsDefer:_}=g,{addEvent:w,clamp:k,defined:z,extend:O,fireEvent:C,isArray:A,isNumber:F,merge:S,pick:T}=d;y.compose(p);class D extends M{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(m,u,v){M.compose(m,u,v),s.compose(u),h.compose(u)}accumulateAllPoints(){let m,u=this.chart,v=[];for(let I of u.series)if(I.is("packedbubble")&&I.reserveSpace()){m=I.yData||[];for(let E=0;E<m.length;E++)v.push([null,null,m[E],I.index,E,{id:E,marker:{radius:0}}])}return v}addLayout(){let m=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},u=m.type||"packedbubble",v=this.chart.options.chart,I=this.chart.graphLayoutsStorage,E=this.chart.graphLayoutsLookup,R;I||(this.chart.graphLayoutsStorage=I={},this.chart.graphLayoutsLookup=E=[]),(R=I[u])||(m.enableSimulation=z(v.forExport)?!v.forExport:m.enableSimulation,I[u]=R=new r.layouts[u],R.init(m),E.splice(R.index,0,R)),this.layout=R,this.points.forEach(j=>{j.mass=2,j.degree=1,j.collisionNmb=1}),R.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),R.addElementsToCollection([this],R.series),R.addElementsToCollection(this.points,R.nodes)}addSeriesLayout(){let m=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},u=m.type||"packedbubble",v=this.chart.graphLayoutsStorage,I=this.chart.graphLayoutsLookup,E=S(m,m.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),R=v[u+"-series"];R||(v[u+"-series"]=R=new r.layouts[u],R.init(E),I.splice(R.index,0,R)),this.parentNodeLayout=R,this.createParentNodes()}calculateParentRadius(){let m=this.seriesBox();this.parentNodeRadius=k(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,m?Math.max(Math.sqrt(Math.pow(m.width,2)+Math.pow(m.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let m=this.chart.series,u=this.options.zMin,v=this.options.zMax,I=1/0,E=-1/0;return u&&v?[u,v]:(m.forEach(R=>{R.yData.forEach(j=>{z(j)&&(j>E&&(E=j),j<I&&(I=j))})}),[u=T(u,I),v=T(v,E)])}checkOverlap(m,u){let v=m[0]-u[0],I=m[1]-u[1];return Math.sqrt(v*v+I*I)-Math.abs(m[2]+u[2])<-.001}createParentNodes(){let m=this.pointClass,u=this.chart,v=this.parentNodeLayout,I=this.layout.options,E,R=this.parentNode,j={radius:this.parentNodeRadius,lineColor:this.color,fillColor:b(this.color).brighten(.4).get()};I.parentNodeOptions&&(j=S(I.parentNodeOptions.marker||{},j)),this.parentNodeMass=0,this.points.forEach(G=>{this.parentNodeMass+=Math.PI*Math.pow(G.marker.radius,2)}),this.calculateParentRadius(),v.nodes.forEach(G=>{G.seriesIndex===this.index&&(E=!0)}),v.setArea(0,0,u.plotWidth,u.plotHeight),E||(R||(R=new m(this,{mass:this.parentNodeRadius/2,marker:j,dataLabels:{inside:!1},states:{normal:{marker:j},hover:{marker:j}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(R.plotX=this.parentNode.plotX,R.plotY=this.parentNode.plotY),this.parentNode=R,v.addElementsToCollection([this],v.series),v.addElementsToCollection([R],v.nodes))}deferLayout(){let m=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),m.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(m=>{m.removeElementFromCollection(this,m.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),f.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(f.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",f.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){if(!this.layout||!this.layout.options.splitSeries)return;let m=this.chart,u=this.layout.options.parentNodeOptions.marker,v={fill:u.fillColor||b(this.color).brighten(.4).get(),opacity:u.fillOpacity,stroke:u.lineColor||this.color,"stroke-width":T(u.lineWidth,this.options.lineWidth)},I={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,m.seriesGroup),this.group?.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&z(this.parentNode.plotX)&&z(this.parentNode.plotY)&&z(this.parentNodeRadius)&&(I=S({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},v),this.parentNode.graphic||(this.graph=this.parentNode.graphic=m.renderer.symbol(v.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(I))}drawTracker(){let m,u=this.parentNode;super.drawTracker(),u&&(m=A(u.dataLabels)?u.dataLabels:u.dataLabel?[u.dataLabel]:[],u.graphic&&(u.graphic.element.point=u),m.forEach(v=>{(v.div||v.element).point=u}))}getPointRadius(){let m,u,v,I,E=this.chart,R=E.plotWidth,j=E.plotHeight,G=this.options,W=G.useSimulation,N=Math.min(R,j),B={},X=[],V=E.allDataPoints||[],H=V.length;["minSize","maxSize"].forEach(U=>{let Y=parseInt(G[U],10),Z=/%$/.test(G[U]);B[U]=Z?N*Y/100:Y*Math.sqrt(H)}),E.minRadius=m=B.minSize/Math.sqrt(H),E.maxRadius=u=B.maxSize/Math.sqrt(H);let K=W?this.calculateZExtremes():[m,u];V.forEach((U,Y)=>{v=W?k(U[2],K[0],K[1]):U[2],(I=this.getRadius(K[0],K[1],m,u,v))===0&&(I=null),V[Y][2]=I,X.push(I)}),this.radii=X}init(){return f.init.apply(this,arguments),_.call(this),this.eventsToUnbind.push(w(this,"updatedData",function(){this.chart.series.forEach(m=>{m.type===this.type&&(m.isDirty=!0)},this)})),this}onMouseUp(m){if(m.fixedPosition&&!m.removed){let u,v=this.layout,I=this.parentNodeLayout;I&&v.options.dragBetweenSeries&&I.nodes.forEach(E=>{m&&m.marker&&E!==m.series.parentNode&&(u=v.getDistXY(m,E),v.vectorLength(u)-E.marker.radius-m.marker.radius<0&&(E.series.addPoint(S(m.options,{plotX:m.plotX,plotY:m.plotY}),!1),v.removeElementFromCollection(m,v.nodes),m.remove()))}),s.onMouseUp.apply(this,arguments)}}placeBubbles(m){let u=this.checkOverlap,v=this.positionBubble,I=[],E=1,R=0,j=0,G,W=[],N,B=m.sort((X,V)=>V[2]-X[2]);if(B.length){if(I.push([[0,0,B[0][2],B[0][3],B[0][4]]]),B.length>1)for(I.push([[0,0-B[1][2]-B[0][2],B[1][2],B[1][3],B[1][4]]]),N=2;N<B.length;N++)B[N][2]=B[N][2]||1,u(G=v(I[E][R],I[E-1][j],B[N]),I[E][0])?(I.push([]),j=0,I[E+1].push(v(I[E][R],I[E][0],B[N])),E++,R=0):E>1&&I[E-1][j+1]&&u(G,I[E-1][j+1])?(j++,I[E].push(v(I[E][R],I[E-1][j],B[N])),R++):(R++,I[E].push(G));this.chart.stages=I,this.chart.rawPositions=[].concat.apply([],I),this.resizeRadius(),W=this.chart.rawPositions}return W}pointAttribs(m,u){let v=this.options,I=m&&m.isParentNode,E=v.marker;I&&v.layoutAlgorithm&&v.layoutAlgorithm.parentNodeOptions&&(E=v.layoutAlgorithm.parentNodeOptions.marker);let R=E.fillOpacity,j=f.pointAttribs.call(this,m,u);return R!==1&&(j["fill-opacity"]=R),j}positionBubble(m,u,v){let I=Math.asin,E=Math.acos,R=Math.pow,j=Math.abs,G=(0,Math.sqrt)(R(m[0]-u[0],2)+R(m[1]-u[1],2)),W=E((R(G,2)+R(v[2]+u[2],2)-R(v[2]+m[2],2))/(2*(v[2]+u[2])*G)),N=I(j(m[0]-u[0])/G),B=(m[1]-u[1]<0?0:Math.PI)+W+N*((m[0]-u[0])*(m[1]-u[1])<0?1:-1),X=Math.cos(B),V=Math.sin(B);return[u[0]+(u[2]+v[2])*V,u[1]-(u[2]+v[2])*X,v[2],v[3],v[4]]}render(){let m=[];f.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(u=>{A(u.dataLabels)&&u.dataLabels.forEach(v=>{m.push(v)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(m))}resizeRadius(){let m,u,v,I,E,R=this.chart,j=R.rawPositions,G=Math.min,W=Math.max,N=R.plotLeft,B=R.plotTop,X=R.plotHeight,V=R.plotWidth;for(let Y of(m=v=Number.POSITIVE_INFINITY,u=I=Number.NEGATIVE_INFINITY,j))E=Y[2],m=G(m,Y[0]-E),u=W(u,Y[0]+E),v=G(v,Y[1]-E),I=W(I,Y[1]+E);let H=[u-m,I-v],K=[(V-N)/H[0],(X-B)/H[1]],U=G.apply([],K);if(Math.abs(U-1)>1e-10){for(let Y of j)Y[2]*=U;this.placeBubbles(j)}else R.diffY=X/2+B-v-(I-v)/2,R.diffX=V/2+N-m-(u-m)/2}seriesBox(){let m,u=this.chart,v=this.data,I=Math.max,E=Math.min,R=[u.plotLeft,u.plotLeft+u.plotWidth,u.plotTop,u.plotTop+u.plotHeight];return v.forEach(j=>{z(j.plotX)&&z(j.plotY)&&j.marker.radius&&(m=j.marker.radius,R[0]=E(R[0],j.plotX-m),R[1]=I(R[1],j.plotX+m),R[2]=E(R[2],j.plotY-m),R[3]=I(R[3],j.plotY+m))}),F(R.width/R.height)?R:null}setVisible(){let m=this;f.setVisible.apply(m,arguments),m.parentNodeLayout&&m.graph?m.visible?(m.graph.show(),m.parentNode.dataLabel&&m.parentNode.dataLabel.show()):(m.graph.hide(),m.parentNodeLayout.removeElementFromCollection(m.parentNode,m.parentNodeLayout.nodes),m.parentNode.dataLabel&&m.parentNode.dataLabel.hide()):m.layout&&(m.visible?m.layout.addElementsToCollection(m.points,m.layout.nodes):m.points.forEach(u=>{m.layout.removeElementFromCollection(u,m.layout.nodes)}))}translate(){let m,u,v,I=this.chart,E=this.data,R=this.index,j=this.options.useSimulation;for(let G of(this.processedXData=this.xData,this.generatePoints(),z(I.allDataPoints)||(I.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),j?v=I.allDataPoints:(v=this.placeBubbles(I.allDataPoints),this.options.draggable=!1),v))G[3]===R&&(m=E[G[4]],u=T(G[2],void 0),j||(m.plotX=G[0]-I.plotLeft+I.diffX,m.plotY=G[1]-I.plotTop+I.diffY),F(u)&&(m.marker=O(m.marker,{radius:u,width:2*u,height:2*u}),m.radius=u));j&&this.deferLayout(),C(this,"afterTranslate")}}return D.defaultOptions=S(M.defaultOptions,l),O(D.prototype,{pointClass:a,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:L,alignDataLabel:f.alignDataLabel,indexateNodes:x,onMouseDown:s.onMouseDown,onMouseMove:s.onMouseMove,redrawHalo:s.redrawHalo,searchPoint:x}),c.registerSeriesType("packedbubble",D),D}),e(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),e(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{noop:a}=i,{area:l,line:h,scatter:c}=r.seriesTypes,{extend:g,merge:d}=o;class p extends c{getGraphPath(){let b=h.prototype.getGraphPath.call(this),x=b.length+1;for(;x--;)(x===b.length||b[x][0]==="M")&&x>0&&b.splice(x,0,["Z"]);return this.areaPath=b,b}drawGraph(){this.options.fillColor=this.color,l.prototype.drawGraph.call(this)}}return p.defaultOptions=d(c.defaultOptions,s),g(p.prototype,{type:"polygon",drawTracker:h.prototype.drawTracker,setStackedPoints:a}),r.registerSeriesType("polygon",p),p}),e(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),e(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r,o){var a;let{defaultOptions:l}=s,{composed:h,noop:c}=r,{addEvent:g,correctFloat:d,defined:p,extend:y,fireEvent:b,isObject:x,merge:f,pick:M,pushUnique:L,relativeLength:_,wrap:w}=o;return function(k){function z(){this.autoConnect=this.isCircular&&M(this.userMax,this.options.max)===void 0&&d(this.endAngleRad-this.startAngleRad)===d(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function O(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(Y=>this.ticks[Y]&&this.ticks[Y].label).filter(Y=>!!Y)}}function C(){return c}function A(Y,Z,q){let J=this.pane.center,Q=Y.value,$,tt,it;return this.isCircular?(p(Q)?Y.point&&(Y.point.shapeArgs||{}).start&&(Q=this.chart.inverted?this.translate(Y.point.rectPlotY,!0):Y.point.x):(tt=Y.chartX||0,it=Y.chartY||0,Q=this.translate(Math.atan2(it-q,tt-Z)-this.startAngleRad,!0)),tt=($=this.getPosition(Q)).x,it=$.y):(p(Q)||(tt=Y.chartX,it=Y.chartY),p(tt)&&p(it)&&(q=J[1]+this.chart.plotTop,Q=this.translate(Math.min(Math.sqrt(Math.pow(tt-Z,2)+Math.pow(it-q,2)),J[2]/2)-J[3]/2,!0))),[Q,tt||0,it||0]}function F(Y,Z,q){let J=this.pane.center,Q=this.chart,$=this.left||0,tt=this.top||0,it,et=M(Z,J[2]/2-this.offset),st;return q===void 0&&(q=this.horiz?0:this.center&&-this.center[3]/2),q&&(et+=q),this.isCircular||Z!==void 0?((st=this.chart.renderer.symbols.arc($+J[0],tt+J[1],et,et,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[$+J[0]],st.yBounds=[tt+J[1]-et]):(it=this.postTranslate(this.angleRad,et),st=[["M",this.center[0]+Q.plotLeft,this.center[1]+Q.plotTop],["L",it.x,it.y]]),st}function S(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function T(Y,Z,q){let J=this.chart,Q=Pt=>{if(typeof Pt=="string"){let Yt=parseInt(Pt,10);return nt.test(Pt)&&(Yt=Yt*it/100),Yt}return Pt},$=this.center,tt=this.startAngleRad,it=$[2]/2,et=Math.min(this.offset,0),st=this.left||0,rt=this.top||0,nt=/%$/,ot=this.isCircular,at,ct,ht,lt,yt,Et,dt=M(Q(q.outerRadius),it),St=Q(q.innerRadius),mt=M(Q(q.thickness),10);if(this.options.gridLineInterpolation==="polygon")Et=this.getPlotLinePath({value:Y}).concat(this.getPlotLinePath({value:Z,reverse:!0}));else{Y=Math.max(Y,this.min),Z=Math.min(Z,this.max);let Pt=this.translate(Y),Yt=this.translate(Z);ot||(dt=Pt||0,St=Yt||0),q.shape!=="circle"&&ot?(at=tt+(Pt||0),ct=tt+(Yt||0)):(at=-Math.PI/2,ct=1.5*Math.PI,yt=!0),dt-=et,mt-=et,Et=J.renderer.symbols.arc(st+$[0],rt+$[1],dt,dt,{start:Math.min(at,ct),end:Math.max(at,ct),innerR:M(St,dt-mt),open:yt,borderRadius:q.borderRadius}),ot&&(ht=(ct+at)/2,lt=st+$[0]+$[2]/2*Math.cos(ht),Et.xBounds=ht>-Math.PI/2&&ht<Math.PI/2?[lt,J.plotWidth]:[0,lt],Et.yBounds=[rt+$[1]+$[2]/2*Math.sin(ht)],Et.yBounds[0]+=ht>-Math.PI&&ht<0||ht>Math.PI?-10:10)}return Et}function D(Y){let Z=this.pane.center,q=this.chart,J=q.inverted,Q=Y.reverse,$=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},tt=$.innerRadius||"0%",it=$.outerRadius||"100%",et=Z[0]+q.plotLeft,st=Z[1]+q.plotTop,rt=this.height,nt=Y.isCrosshair,ot=Z[3]/2,at=Y.value,ct,ht,lt,yt,Et,dt,St,mt,Pt,Yt=this.getPosition(at),xe=Yt.x,se=Yt.y;if(nt&&(at=(mt=this.getCrosshairPosition(Y,et,st))[0],xe=mt[1],se=mt[2]),this.isCircular)ht=Math.sqrt(Math.pow(xe-et,2)+Math.pow(se-st,2)),lt=typeof tt=="string"?_(tt,1):tt/ht,yt=typeof it=="string"?_(it,1):it/ht,Z&&ot&&(lt<(ct=ot/ht)&&(lt=ct),yt<ct&&(yt=ct)),Pt=[["M",et+lt*(xe-et),st-lt*(st-se)],["L",xe-(1-yt)*(xe-et),se+(1-yt)*(st-se)]];else if((at=this.translate(at))&&(at<0||at>rt)&&(at=0),this.options.gridLineInterpolation==="circle")Pt=this.getLinePath(0,at,ot);else if(Pt=[],q[J?"yAxis":"xAxis"].forEach(Ie=>{Ie.pane===this.pane&&(Et=Ie)}),Et){St=Et.tickPositions,Et.autoConnect&&(St=St.concat([St[0]])),Q&&(St=St.slice().reverse()),at&&(at+=ot);for(let Ie=0;Ie<St.length;Ie++)dt=Et.getPosition(St[Ie],at),Pt.push(Ie?["L",dt.x,dt.y]:["M",dt.x,dt.y])}return Pt}function P(Y,Z){let q=this.translate(Y);return this.postTranslate(this.isCircular?q:this.angleRad,M(this.isCircular?Z:q<0?0:q,this.center[2]/2)-this.offset)}function m(){let Y=this.center,Z=this.chart,q=this.options.title;return{x:Z.plotLeft+Y[0]+(q.x||0),y:Z.plotTop+Y[1]-{high:.5,middle:.25,low:0}[q.align]*Y[2]+(q.y||0)}}function u(Y){Y.beforeSetTickPositions=z,Y.createLabelCollector=O,Y.getCrosshairPosition=A,Y.getLinePath=F,Y.getOffset=S,Y.getPlotBandPath=T,Y.getPlotLinePath=D,Y.getPosition=P,Y.getTitlePosition=m,Y.postTranslate=B,Y.setAxisSize=V,Y.setAxisTranslation=H,Y.setOptions=K}function v(){let Y=this.chart,Z=this.options,q=Y.angular&&this.isXAxis,J=this.pane,Q=J&&J.options;if(!q&&J&&(Y.angular||Y.polar)){let $=2*Math.PI,tt=(M(Q.startAngle,0)-90)*Math.PI/180,it=(M(Q.endAngle,M(Q.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(Z.angle||0)*Math.PI/180,this.startAngleRad=tt,this.endAngleRad=it,this.offset=Z.offset||0;let et=(tt%$+$)%$,st=(it%$+$)%$;et>Math.PI&&(et-=$),st>Math.PI&&(st-=$),this.normalizedStartAngleRad=et,this.normalizedEndAngleRad=st}}function I(Y){this.isRadial&&(Y.align=void 0,Y.preventDefault())}function E(){if(this.chart&&this.chart.labelCollectors){let Y=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;Y>=0&&this.chart.labelCollectors.splice(Y,1)}}function R(Y){let Z,q=this.chart,J=q.angular,Q=q.polar,$=this.isXAxis,tt=this.coll,it=Y.userOptions.pane||0,et=this.pane=q.pane&&q.pane[it];if(tt==="colorAxis"){this.isRadial=!1;return}J?(J&&$?(this.isHidden=!0,this.createLabelCollector=C,this.getOffset=c,this.redraw=X,this.render=X,this.setScale=c,this.setCategories=c,this.setTitle=c):u(this),Z=!$):Q&&(u(this),Z=this.horiz),J||Q?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&q.labelCollectors.push(this.labelCollector)):this.isRadial=!1,et&&Z&&(et.axis=this),this.isCircular=Z}function j(){this.isRadial&&this.beforeSetTickPositions()}function G(Y){let Z=this.label;if(!Z)return;let q=this.axis,J=Z.getBBox(),Q=q.options.labels,$=(q.translate(this.pos)+q.startAngleRad+Math.PI/2)/Math.PI*180%360,tt=Math.round($),it=p(Q.y)?0:-(.3*J.height),et=Q.y,st,rt=20,nt=Q.align,ot="end",at=tt<0?tt+360:tt,ct=at,ht=0,lt=0;q.isRadial&&(st=q.getPosition(this.pos,q.center[2]/2+_(M(Q.distance,-25),q.center[2]/2,-q.center[2]/2)),Q.rotation==="auto"?Z.attr({rotation:$}):p(et)||(et=q.chart.renderer.fontMetrics(Z).b-J.height/2),p(nt)||(q.isCircular?(J.width>q.len*q.tickInterval/(q.max-q.min)&&(rt=0),nt=$>rt&&$<180-rt?"left":$>180+rt&&$<360-rt?"right":"center"):nt="center",Z.attr({align:nt})),nt==="auto"&&q.tickPositions.length===2&&q.isCircular&&(at>90&&at<180?at=180-at:at>270&&at<=360&&(at=540-at),ct>180&&ct<=360&&(ct=360-ct),(q.pane.options.startAngle===tt||q.pane.options.startAngle===tt+360||q.pane.options.startAngle===tt-360)&&(ot="start"),nt=tt>=-90&&tt<=90||tt>=-360&&tt<=-270||tt>=270&&tt<=360?ot==="start"?"right":"left":ot==="start"?"left":"right",ct>70&&ct<110&&(nt="center"),at<15||at>=180&&at<195?ht=.3*J.height:at>=15&&at<=35?ht=ot==="start"?0:.75*J.height:at>=195&&at<=215?ht=ot==="start"?.75*J.height:0:at>35&&at<=90?ht=ot==="start"?-(.25*J.height):J.height:at>215&&at<=270&&(ht=ot==="start"?J.height:-(.25*J.height)),ct<15?lt=ot==="start"?-(.15*J.height):.15*J.height:ct>165&&ct<=180&&(lt=ot==="start"?.15*J.height:-(.15*J.height)),Z.attr({align:nt}),Z.translate(lt,ht+it)),Y.pos.x=st.x+(Q.x||0),Y.pos.y=st.y+(et||0))}function W(Y){this.axis.getPosition&&y(Y.pos,this.axis.getPosition(this.pos))}function N({options:Y}){Y.xAxis&&f(!0,k.radialDefaultOptions.circular,Y.xAxis),Y.yAxis&&f(!0,k.radialDefaultOptions.radialGauge,Y.yAxis)}function B(Y,Z){let q=this.chart,J=this.center;return Y=this.startAngleRad+Y,{x:q.plotLeft+J[0]+Math.cos(Y)*Z,y:q.plotTop+J[1]+Math.sin(Y)*Z}}function X(){this.isDirty=!1}function V(){let Y,Z;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),Y=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(Z=this.postTranslate(this.angleRad,Y[3]/2),Y[0]=Z.x-this.chart.plotLeft,Y[1]=Z.y-this.chart.plotTop),this.len=this.width=this.height=(Y[2]-Y[3])*M(this.sector,1)/2)}function H(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function K(Y){let{coll:Z}=this,{angular:q,inverted:J,polar:Q}=this.chart,$={};q?this.isXAxis||($=f(l.yAxis,k.radialDefaultOptions.radialGauge)):Q&&($=this.horiz?f(l.xAxis,k.radialDefaultOptions.circular):f(Z==="xAxis"?l.xAxis:l.yAxis,k.radialDefaultOptions.radial)),J&&Z==="yAxis"&&($.stackLabels=x(l.yAxis,!0)?l.yAxis.stackLabels:{},$.reversedStacks=!0);let tt=this.options=f($,Y);tt.plotBands||(tt.plotBands=[]),b(this,"afterSetOptions")}function U(Y,Z,q,J,Q,$,tt){let it,et=this.axis;return et.isRadial?["M",Z,q,"L",(it=et.getPosition(this.pos,et.center[2]/2+J)).x,it.y]:Y.call(this,Z,q,J,Q,$,tt)}k.radialDefaultOptions=f(i),k.compose=function(Y,Z){return L(h,"Axis.Radial")&&(g(Y,"afterInit",v),g(Y,"autoLabelAlign",I),g(Y,"destroy",E),g(Y,"init",R),g(Y,"initialAxisTranslation",j),g(Z,"afterGetLabelPosition",G),g(Z,"afterGetPosition",W),g(r,"setOptions",N),w(Z.prototype,"getMarkPath",U)),Y}}(a||(a={})),a}),e(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{animObject:h}=i,{composed:c}=s,{addEvent:g,defined:d,find:p,isNumber:y,merge:b,pick:x,pushUnique:f,relativeLength:M,splat:L,uniqueKey:_,wrap:w}=l;function k(){(this.pane||[]).forEach(N=>{N.render()})}function z(N){let B=N.args[0].xAxis,X=N.args[0].yAxis,V=N.args[0].chart;B&&X&&(X.gridLineInterpolation==="polygon"?(B.startOnTick=!0,B.endOnTick=!0):B.gridLineInterpolation==="polygon"&&V.inverted&&(X.startOnTick=!0,X.endOnTick=!0))}function O(){this.pane||(this.pane=[]),this.options.pane=L(this.options.pane),this.options.pane.forEach(N=>{new o(N,this)},this)}function C(N){let B=N.args.marker,X=this.chart.xAxis[0],V=this.chart.yAxis[0],H=this.chart.inverted,K=H?V:X,U=H?X:V;if(this.chart.polar){N.preventDefault();let Y=(B.attr?B.attr("start"):B.start)-K.startAngleRad,Z=B.attr?B.attr("r"):B.r,q=(B.attr?B.attr("end"):B.end)-K.startAngleRad,J=B.attr?B.attr("innerR"):B.innerR;N.result.x=Y+K.pos,N.result.width=q-Y,N.result.y=U.len+U.pos-Z,N.result.height=Z-J}}function A(N){let B=this.chart;if(B.polar&&B.hoverPane&&B.hoverPane.axis){N.preventDefault();let X=B.hoverPane.center,V=B.mouseDownX||0,H=B.mouseDownY||0,K=N.args.chartY,U=N.args.chartX,Y=2*Math.PI,Z=B.hoverPane.axis.startAngleRad,q=B.hoverPane.axis.endAngleRad,J=B.inverted?B.xAxis[0]:B.yAxis[0],Q={},$="arc";if(Q.x=X[0]+B.plotLeft,Q.y=X[1]+B.plotTop,this.zoomHor){let tt=Z>0?q-Z:Math.abs(Z)+Math.abs(q),it=Math.atan2(H-B.plotTop-X[1],V-B.plotLeft-X[0])-Z,et=Math.atan2(K-B.plotTop-X[1],U-B.plotLeft-X[0])-Z;Q.r=X[2]/2,Q.innerR=X[3]/2,it<=0&&(it+=Y),et<=0&&(et+=Y),et<it&&(et=[it,it=et][0]),tt<Y&&Z+et>q+(Y-tt)/2&&(et=it,it=Z<=0?Z:0);let st=Q.start=Math.max(it+Z,Z),rt=Q.end=Math.min(et+Z,q);if(J.options.gridLineInterpolation==="polygon"){let nt=B.hoverPane.axis,ot=st-nt.startAngleRad+nt.pos,at=J.getPlotLinePath({value:J.max}),ct=nt.toValue(ot),ht=nt.toValue(ot+(rt-st));if(ct<nt.getExtremes().min){let{min:lt,max:yt}=nt.getExtremes();ct=yt-(lt-ct)}if(ht<nt.getExtremes().min){let{min:lt,max:yt}=nt.getExtremes();ht=yt-(lt-ht)}ht<ct&&(ht=[ct,ct=ht][0]),(at=D(at,ct,ht,nt)).push(["L",X[0]+B.plotLeft,B.plotTop+X[1]]),Q.d=at,$="path"}}if(this.zoomVert){let tt=B.inverted?B.xAxis[0]:B.yAxis[0],it=Math.sqrt(Math.pow(V-B.plotLeft-X[0],2)+Math.pow(H-B.plotTop-X[1],2)),et=Math.sqrt(Math.pow(U-B.plotLeft-X[0],2)+Math.pow(K-B.plotTop-X[1],2));if(et<it&&(it=[et,et=it][0]),et>X[2]/2&&(et=X[2]/2),it<X[3]/2&&(it=X[3]/2),this.zoomHor||(Q.start=Z,Q.end=q),Q.r=et,Q.innerR=it,tt.options.gridLineInterpolation==="polygon"){let st=tt.toValue(tt.len+tt.pos-it),rt=tt.toValue(tt.len+tt.pos-et),nt=tt.getPlotLinePath({value:rt}).concat(tt.getPlotLinePath({value:st,reverse:!0}));Q.d=nt,$="path"}}if(this.zoomHor&&this.zoomVert&&J.options.gridLineInterpolation==="polygon"){let tt=B.hoverPane.axis,it=Q.start||0,et=Q.end||0,st=it-tt.startAngleRad+tt.pos,rt=tt.toValue(st),nt=tt.toValue(st+(et-it));if(Q.d instanceof Array){let ot=Q.d.slice(0,Q.d.length/2),at=Q.d.slice(Q.d.length/2,Q.d.length);at=[...at].reverse();let ct=B.hoverPane.axis;ot=D(ot,rt,nt,ct),(at=D(at,rt,nt,ct))&&(at[0][0]="L"),at=[...at].reverse(),Q.d=ot.concat(at),$="path"}}N.attrs=Q,N.shapeType=$}}function F(){let N=this.chart;N.polar&&(this.polar=new W(this),N.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function S(){if(this.chart.polar&&this.xAxis){let{xAxis:N,yAxis:B}=this,X=this.chart;this.kdByAngle=X.tooltip&&X.tooltip.shared,this.kdByAngle||X.inverted?this.searchPoint=T:this.options.findNearestPointBy="xy";let V=this.points,H=V.length;for(;H--;)this.is("column")||this.is("columnrange")||this.polar.toXY(V[H]),X.hasParallelCoordinates||this.yAxis.reversed||(x(V[H].y,Number.MIN_VALUE)<B.min||V[H].x<N.min||V[H].x>N.max?(V[H].isNull=!0,V[H].plotY=NaN):V[H].isNull=V[H].isValid&&!V[H].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(g(this,"afterRender",function(){let K;X.polar&&this.options.clip!==!1&&(K=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:K[0],y:K[1],r:K[2]/2,innerR:K[3]/2}):this.clipCircle=function(U,Y,Z,q,J){let Q=_(),$=U.createElement("clipPath").attr({id:Q}).add(U.defs),tt=J?U.arc(Y,Z,q,J,0,2*Math.PI).add($):U.circle(Y,Z,q).add($);return tt.id=Q,tt.clipPath=$,tt}(X.renderer,K[0],K[1],K[2]/2,K[3]/2),this.group.clip(this.clipCircle),this.setClip=s.noop)})))}}function T(N){let B=this.chart,X=this.xAxis,V=this.yAxis,H=X.pane&&X.pane.center,K=N.chartX-(H&&H[0]||0)-B.plotLeft,U=N.chartY-(H&&H[1]||0)-B.plotTop,Y=B.inverted?{clientX:N.chartX-V.pos,plotY:N.chartY-X.pos}:{clientX:180+-180/Math.PI*Math.atan2(K,U)};return this.searchKDTree(Y)}function D(N,B,X,V){let H=V.tickInterval,K=V.tickPositions,U=p(K,Z=>Z>=X),Y=p([...K].reverse(),Z=>Z<=B);return d(U)||(U=K[K.length-1]),d(Y)||(Y=K[0],U+=H,N[0][0]="L",N.unshift(N[N.length-3])),(N=N.slice(K.indexOf(Y),K.indexOf(U)+1))[0][0]="M",N}function P(N,B){return p(this.pane||[],X=>X.options.id===B)||N.call(this,B)}function m(N,B,X,V,H,K){let U,Y,Z,q=this.chart,J=x(V.inside,!!this.options.stacking);if(q.polar){if(U=B.rectPlotX/Math.PI*180,q.inverted)this.forceDL=q.isInsidePlot(B.plotX,B.plotY),J&&B.shapeArgs?(Y=B.shapeArgs,H=b(H,{x:(Z=this.yAxis.postTranslate(((Y.start||0)+(Y.end||0))/2-this.xAxis.startAngleRad,B.barX+B.pointWidth/2)).x-q.plotLeft,y:Z.y-q.plotTop})):B.tooltipPos&&(H=b(H,{x:B.tooltipPos[0],y:B.tooltipPos[1]})),V.align=x(V.align,"center"),V.verticalAlign=x(V.verticalAlign,"middle");else{var Q;let $,tt;(Q=V).align===null&&($=U>20&&U<160?"left":U>200&&U<340?"right":"center",Q.align=$),Q.verticalAlign===null&&(tt=U<45||U>315?"bottom":U>135&&U<225?"top":"middle",Q.verticalAlign=tt),V=Q}r.prototype.alignDataLabel.call(this,B,X,V,H,K),this.isRadialBar&&B.shapeArgs&&B.shapeArgs.start===B.shapeArgs.end?X.hide():X.show()}else N.call(this,B,X,V,H,K)}function u(){let N=this.options,B=N.stacking,X=this.chart,V=this.xAxis,H=this.yAxis,K=H.reversed,U=H.center,Y=V.startAngleRad,Z=V.endAngleRad-Y,q=N.threshold,J=0,Q,$,tt,it,et,st=0,rt=0,nt,ot,at,ct,ht,lt,yt,Et;if(V.isRadial)for(tt=(Q=this.points).length,it=H.translate(H.min),et=H.translate(H.max),q=N.threshold||0,X.inverted&&y(q)&&d(J=H.translate(q))&&(J<0?J=0:J>Z&&(J=Z),this.translatedThreshold=J+Y);tt--;){if(lt=($=Q[tt]).barX,ot=$.x,at=$.y,$.shapeType="arc",X.inverted){$.plotY=H.translate(at),B&&H.stacking?(ht=H.stacking.stacks[(at<0?"-":"")+this.stackKey],this.visible&&ht&&ht[ot]&&!$.isNull&&(ct=ht[ot].points[this.getStackIndicator(void 0,ot,this.index).key],st=H.translate(ct[0]),rt=H.translate(ct[1]),d(st)&&(st=l.clamp(st,0,Z)))):(st=J,rt=$.plotY),st>rt&&(rt=[st,st=rt][0]),K?rt>it?rt=it:st<et?st=et:(st>it||rt<et)&&(st=rt=Z):st<it?st=it:rt>et?rt=et:(rt<it||st>et)&&(st=rt=0),H.min>H.max&&(st=rt=K?Z:0),st+=Y,rt+=Y,U&&($.barX=lt+=U[3]/2),yt=Math.max(lt,0),Et=Math.max(lt+$.pointWidth,0);let dt=N.borderRadius,St=M((typeof dt=="object"?dt.radius:dt)||0,Et-yt);$.shapeArgs={x:U[0],y:U[1],r:Et,innerR:yt,start:st,end:rt,borderRadius:St},$.opacity=st===rt?0:void 0,$.plotY=(d(this.translatedThreshold)&&(st<this.translatedThreshold?st:rt))-Y}else st=lt+Y,$.shapeArgs=this.polar.arc($.yBottom,$.plotY,st,st+$.pointWidth),$.shapeArgs.borderRadius=0;this.polar.toXY($),X.inverted?(nt=H.postTranslate($.rectPlotY,lt+$.pointWidth/2),$.tooltipPos=[nt.x-X.plotLeft,nt.y-X.plotTop]):$.tooltipPos=[$.plotX,$.plotY],U&&($.ttBelow=$.plotY>U[1])}}function v(N,B){let X,V,H=this;if(this.chart.polar){B=B||this.points;for(let U=0;U<B.length;U++)if(!B[U].isNull){X=U;break}this.options.connectEnds!==!1&&X!==void 0&&(this.connectEnds=!0,B.splice(B.length,0,B[X]),V=!0),B.forEach(U=>{U.polarPlotY===void 0&&H.polar.toXY(U)})}let K=N.apply(this,[].slice.call(arguments,1));return V&&B.pop(),K}function I(N,B){let X=this.chart,V={xAxis:[],yAxis:[]};return X.polar?X.axes.forEach(H=>{if(H.coll==="colorAxis")return;let K=H.isXAxis,U=H.center,Y=B.chartX-U[0]-X.plotLeft,Z=B.chartY-U[1]-X.plotTop;V[K?"xAxis":"yAxis"].push({axis:H,value:H.translate(K?Math.PI-Math.atan2(Y,Z):Math.sqrt(Math.pow(Y,2)+Math.pow(Z,2)),!0)})}):V=N.call(this,B),V}function E(N,B){this.chart.polar||N.call(this,B)}function R(N,B){let X=this,V=this.chart,H=this.group,K=this.markerGroup,U=this.xAxis&&this.xAxis.center,Y=V.plotLeft,Z=V.plotTop,q=this.options.animation,J,Q,$,tt,it,et;V.polar?X.isRadialBar?B||(X.startAngleRad=x(X.translatedThreshold,X.xAxis.startAngleRad),s.seriesTypes.pie.prototype.animate.call(X,B)):(q=h(q),X.is("column")?B||(Q=U[3]/2,X.points.forEach(st=>{$=st.graphic,it=(tt=st.shapeArgs)&&tt.r,et=tt&&tt.innerR,$&&tt&&($.attr({r:Q,innerR:Q}),$.animate({r:it,innerR:et},X.options.animation))})):B?(J={translateX:U[0]+Y,translateY:U[1]+Z,scaleX:.001,scaleY:.001},H.attr(J),K&&K.attr(J)):(J={translateX:Y,translateY:Z,scaleX:1,scaleY:1},H.animate(J,q),K&&K.animate(J,q))):N.call(this,B)}function j(N,B,X,V){let H,K;if(this.chart.polar)if(V){let U=(K=function Z(q,J,Q,$){let tt,it,et,st,rt,nt,ot=$?1:0,at=(tt=J>=0&&J<=q.length-1?J:J<0?q.length-1+J:0)-1<0?q.length-(1+ot):tt-1,ct=tt+1>q.length-1?ot:tt+1,ht=q[at],lt=q[ct],yt=ht.plotX,Et=ht.plotY,dt=lt.plotX,St=lt.plotY,mt=q[tt].plotX,Pt=q[tt].plotY;it=(1.5*mt+yt)/2.5,et=(1.5*Pt+Et)/2.5,st=(1.5*mt+dt)/2.5,rt=(1.5*Pt+St)/2.5;let Yt=Math.sqrt(Math.pow(it-mt,2)+Math.pow(et-Pt,2)),xe=Math.sqrt(Math.pow(st-mt,2)+Math.pow(rt-Pt,2)),se=Math.atan2(et-Pt,it-mt);nt=Math.PI/2+(se+Math.atan2(rt-Pt,st-mt))/2,Math.abs(se-nt)>Math.PI/2&&(nt-=Math.PI),it=mt+Math.cos(nt)*Yt,et=Pt+Math.sin(nt)*Yt;let Ie={rightContX:st=mt+Math.cos(Math.PI+nt)*xe,rightContY:rt=Pt+Math.sin(Math.PI+nt)*xe,leftContX:it,leftContY:et,plotX:mt,plotY:Pt};return Q&&(Ie.prevPointCont=Z(q,at,!1,$)),Ie}(B,V,!0,this.connectEnds)).prevPointCont&&K.prevPointCont.rightContX,Y=K.prevPointCont&&K.prevPointCont.rightContY;H=["C",y(U)?U:K.plotX,y(Y)?Y:K.plotY,y(K.leftContX)?K.leftContX:K.plotX,y(K.leftContY)?K.leftContY:K.plotY,K.plotX,K.plotY]}else H=["M",X.plotX,X.plotY];else H=N.call(this,B,X,V);return H}function G(N,B,X=this.plotY){if(!this.destroyed){let{plotX:V,series:H}=this,{chart:K}=H;return K.polar&&y(V)&&y(X)?[V+(B?K.plotLeft:0),X+(B?K.plotTop:0)]:N.call(this,B,X)}}class W{static compose(B,X,V,H,K,U,Y,Z,q,J){if(o.compose(X,V),a.compose(B,K),f(c,"Polar")){let Q=X.prototype,$=U.prototype,tt=V.prototype,it=H.prototype;if(g(X,"afterDrawChartBox",k),g(X,"getAxes",O),g(X,"init",z),w(Q,"get",P),w(tt,"getCoordinates",I),w(tt,"pinch",E),g(V,"getSelectionMarkerAttrs",A),g(V,"getSelectionBox",C),g(H,"afterInit",F),g(H,"afterTranslate",S,{order:2}),g(H,"afterColumnTranslate",u,{order:4}),w(it,"animate",R),w($,"pos",G),Z){let et=Z.prototype;w(et,"alignDataLabel",m),w(et,"animate",R)}if(q&&w(q.prototype,"getGraphPath",v),J){let et=J.prototype;w(et,"getPointSpline",j),Y&&(Y.prototype.getPointSpline=et.getPointSpline)}}}constructor(B){this.series=B}arc(B,X,V,H){let K=this.series,U=K.xAxis.center,Y=K.yAxis.len,Z=U[3]/2,q=Y-X+Z,J=Y-x(B,Y)+Z;return K.yAxis.reversed&&(q<0&&(q=Z),J<0&&(J=Z)),{x:U[0],y:U[1],r:q,innerR:J,start:V,end:H}}toXY(B){let X=this.series,V=X.chart,H=X.xAxis,K=X.yAxis,U=B.plotX,Y=V.inverted,Z=B.y,q=B.plotY,J=Y?U:K.len-q,Q;if(Y&&X&&!X.isRadialBar&&(B.plotY=q=y(Z)?K.translate(Z):0),B.rectPlotX=U,B.rectPlotY=q,K.center&&(J+=K.center[3]/2),y(q)){let $=Y?K.postTranslate(q,J):H.postTranslate(U,J);B.plotX=B.polarPlotX=$.x-V.plotLeft,B.plotY=B.polarPlotY=$.y-V.plotTop}X.kdByAngle?((Q=(U/Math.PI*180+H.pane.options.startAngle)%360)<0&&(Q+=360),B.clientX=Q):B.clientX=B.plotX}}return W}),e(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(i,s,r){var o;let{composed:a}=i,{addEvent:l,objectEach:h,pushUnique:c}=r;return function(g){function d(){let f=this.waterfall.stacks;f&&(f.changed=!1,delete f.alreadyChanged)}function p(){let f=this.options.stackLabels;f&&f.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function y(){this.waterfall||(this.waterfall=new x(this))}function b(){let f=this.axes;for(let M of this.series)if(M.options.stacking){for(let L of f)L.isXAxis||(L.waterfall.stacks.changed=!0);break}}g.compose=function(f,M){c(a,"Axis.Waterfall")&&(l(f,"init",y),l(f,"afterBuildStacks",d),l(f,"afterRender",p),l(M,"beforeRedraw",b))};class x{constructor(M){this.axis=M,this.stacks={changed:!1}}renderStackTotals(){let M=this.axis,L=M.waterfall.stacks,_=M.stacking&&M.stacking.stackTotalGroup,w=new s(M,M.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=w,_&&h(L,k=>{h(k,(z,O)=>{w.total=z.stackTotal,w.x=+O,z.label&&(w.label=z.label),s.prototype.render.call(w,_),z.label=w.label,delete w.label})}),w.total=null}}g.Composition=x}(o||(o={})),o}),e(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(i,s,r){let{isNumber:o}=r;class a extends i.prototype.pointClass{getClassName(){let h=s.prototype.getClassName.call(this);return this.isSum?h+=" highcharts-sum":this.isIntermediateSum&&(h+=" highcharts-intermediate-sum"),h}isValid(){return o(this.y)||this.isSum||!!this.isIntermediateSum}}return a}),e(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),e(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(i,s,r,o,a){let{column:l,line:h}=i.seriesTypes,{addEvent:c,arrayMax:g,arrayMin:d,correctFloat:p,crisp:y,extend:b,isNumber:x,merge:f,objectEach:M,pick:L}=s;function _(k,z){return Object.hasOwnProperty.call(k,z)}class w extends l{generatePoints(){l.prototype.generatePoints.apply(this);for(let z=0,O=this.points.length;z<O;z++){let C=this.points[z],A=this.processedYData[z];x(A)&&(C.isIntermediateSum||C.isSum)&&(C.y=p(A))}}processData(z){let O,C,A,F,S,T,D=this.options,P=this.yData,m=D.data,u=P.length,v=D.threshold||0;A=C=F=S=0;for(let I=0;I<u;I++)T=P[I],O=m&&m[I]?m[I]:{},T==="sum"||O.isSum?P[I]=p(A):T==="intermediateSum"||O.isIntermediateSum?(P[I]=p(C),C=0):(A+=T,C+=T),F=Math.min(A,F),S=Math.max(A,S);super.processData.call(this,z),D.stacking||(this.dataMin=F+v,this.dataMax=S)}toYData(z){return z.isSum?"sum":z.isIntermediateSum?"intermediateSum":z.y}updateParallelArrays(z,O){super.updateParallelArrays.call(this,z,O),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(z,O){let C=this.options.upColor;C&&!z.options.color&&x(z.y)&&(z.color=z.y>0?C:void 0);let A=l.prototype.pointAttribs.call(this,z,O);return delete A.dashstyle,A}getGraphPath(){return[["M",0,0]]}getCrispPath(){let z=this.data.filter(P=>x(P.y)),O=this.yAxis,C=z.length,A=this.graph?.strokeWidth()||0,F=this.xAxis.reversed,S=this.yAxis.reversed,T=this.options.stacking,D=[];for(let P=1;P<C;P++){if(!(this.options.connectNulls||x(this.data[z[P].index-1].y)))continue;let m=z[P].box,u=z[P-1],v=u.y||0,I=z[P-1].box;if(!m||!I)continue;let E=O.waterfall.stacks[this.stackKey],R=v>0?-I.height:0;if(E&&I&&m){let j,G=E[P-1];if(T){let W=G.connectorThreshold;j=y(O.translate(W,!1,!0,!1,!0)+(S?R:0),A)}else j=y(I.y+(u.minPointLengthOffset||0),A);D.push(["M",(I.x||0)+(F?0:I.width||0),j],["L",(m.x||0)+(F&&m.width||0),j])}if(I&&D.length&&(!T&&v<0&&!S||v>0&&S)){let j=D[D.length-2];j&&typeof j[2]=="number"&&(j[2]+=I.height||0);let G=D[D.length-1];G&&typeof G[2]=="number"&&(G[2]+=I.height||0)}}return D}drawGraph(){h.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(z){let O=this.options,C=z.waterfall?.stacks,A=O.threshold||0,F=this.stackKey,S=this.xData,T=S.length,D=A,P=D,m,u=0,v=0,I=0,E,R,j,G,W,N,B,X,V=(H,K,U,Y)=>{if(m){if(E)for(;U<E;U++)m.stackState[U]+=Y;else m.stackState[0]=H,E=m.stackState.length;m.stackState.push(m.stackState[E-1]+K)}};if(z.stacking&&C&&this.reserveSpace()){X=C.changed,(B=C.alreadyChanged)&&0>B.indexOf(F)&&(X=!0),C[F]||(C[F]={});let H=C[F];if(H)for(let K=0;K<T;K++)(!H[N=S[K]]||X)&&(H[N]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:X&&H[N]?H[N].label:void 0}),m=H[N],(W=this.yData[K])>=0?m.posTotal+=W:m.negTotal+=W,G=O.data[K],R=m.absolutePos=m.posTotal,j=m.absoluteNeg=m.negTotal,m.stackTotal=R+j,E=m.stackState.length,G&&G.isIntermediateSum?(V(I,v,0,I),I=v,v=A,D^=P,P^=D,D^=P):G&&G.isSum?(V(A,u,E,0),D=A):(V(D,W,0,u),G&&(u+=W,v+=W)),m.stateIndex++,m.threshold=D,D+=m.stackTotal;C.changed=!1,C.alreadyChanged||(C.alreadyChanged=[]),C.alreadyChanged.push(F)}}getExtremes(){let z,O,C,A=this.options.stacking;return A?(z=this.yAxis.waterfall.stacks,O=this.stackedYNeg=[],C=this.stackedYPos=[],A==="overlap"?M(z[this.stackKey],function(F){O.push(d(F.stackState)),C.push(g(F.stackState))}):M(z[this.stackKey],function(F){O.push(F.negTotal+F.threshold),C.push(F.posTotal+F.threshold)}),{dataMin:d(O),dataMax:g(C)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return w.defaultOptions=f(l.defaultOptions,a),w.compose=r.compose,b(w.prototype,{pointValKey:"y",showLine:!0,pointClass:o}),c(w,"afterColumnTranslate",function(){let{options:k,points:z,yAxis:O}=this,C=L(k.minPointLength,5),A=C/2,F=k.threshold||0,S=k.stacking,T=O.waterfall.stacks[this.stackKey],D=F,P=F,m,u,v,I;for(let E=0;E<z.length;E++){let R=z[E],j=this.processedYData[E],G=b({x:0,y:0,width:0,height:0},R.shapeArgs||{});R.box=G;let W=[0,j],N=R.y||0;if(S){if(T){let V=T[E];S==="overlap"?(u=V.stackState[V.stateIndex--],m=N>=0?u:u-N,_(V,"absolutePos")&&delete V.absolutePos,_(V,"absoluteNeg")&&delete V.absoluteNeg):(N>=0?(u=V.threshold+V.posTotal,V.posTotal-=N,m=u):(u=V.threshold+V.negTotal,V.negTotal-=N,m=u-N),!V.posTotal&&x(V.absolutePos)&&_(V,"absolutePos")&&(V.posTotal=V.absolutePos,delete V.absolutePos),!V.negTotal&&x(V.absoluteNeg)&&_(V,"absoluteNeg")&&(V.negTotal=V.absoluteNeg,delete V.absoluteNeg)),R.isSum||(V.connectorThreshold=V.threshold+V.stackTotal),O.reversed?(v=N>=0?m-N:m+N,I=m):(v=m,I=m-N),R.below=v<=F,G.y=O.translate(v,!1,!0,!1,!0),G.height=Math.abs(G.y-O.translate(I,!1,!0,!1,!0));let H=O.waterfall.dummyStackItem;H&&(H.x=E,H.label=T[E].label,H.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[E],this.stackedYPos[E],void 0,this.xAxis))}}else m=Math.max(P,P+N)+W[0],G.y=O.translate(m,!1,!0,!1,!0),R.isSum?(G.y=O.translate(W[1],!1,!0,!1,!0),G.height=Math.min(O.translate(W[0],!1,!0,!1,!0),O.len)-G.y,R.below=W[1]<=F):R.isIntermediateSum?(N>=0?(v=W[1]+D,I=D):(v=D,I=W[1]+D),O.reversed&&(v^=I,I^=v,v^=I),G.y=O.translate(v,!1,!0,!1,!0),G.height=Math.abs(G.y-Math.min(O.translate(I,!1,!0,!1,!0),O.len)),D+=W[1],R.below=v<=F):(G.height=j>0?O.translate(P,!1,!0,!1,!0)-G.y:O.translate(P,!1,!0,!1,!0)-O.translate(P-j,!1,!0,!1,!0),P+=j,R.below=P<F),G.height<0&&(G.y+=G.height,G.height*=-1);R.plotY=G.y,R.yBottom=G.y+G.height,G.height<=C&&!R.isNull?(G.height=C,G.y-=A,R.yBottom=G.y+G.height,R.plotY=G.y,N<0?R.minPointLengthOffset=-A:R.minPointLengthOffset=A):(R.isNull&&(G.width=0),R.minPointLengthOffset=0);let B=R.plotY+(R.negative?G.height:0);R.below&&(R.plotY+=G.height),R.tooltipPos&&(this.chart.inverted?R.tooltipPos[0]=O.len-B:R.tooltipPos[1]=B),R.isInside=this.isPointInside(R);let X=y(R.yBottom,this.borderWidth);G.y=y(G.y,this.borderWidth),G.height=X-G.y,f(!0,R.shapeArgs,G)}},{order:2}),i.registerSeriesType("waterfall",w),w}),e(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(i,s,r,o,a,l,h,c){return i.RadialAxis=h,o.compose(i.Axis,i.Chart,i.Legend),a.compose(i.Axis,i.Chart,i.Legend),r.compose(i.Chart,i.Pointer),l.compose(i.Axis,i.Chart,i.Pointer,i.Series,i.Tick,i.Point,s.seriesTypes.areasplinerange,s.seriesTypes.column,s.seriesTypes.line,s.seriesTypes.spline),c.compose(i.Axis,i.Chart),i})})});var Zu=ai((lA,ho)=>{"use strict";(function(n){typeof ho=="object"&&ho.exports?(n.default=n,ho.exports=n):typeof define=="function"&&define.amd?define("highcharts/modules/treemap",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n(typeof Highcharts<"u"?Highcharts:void 0)})(function(n){"use strict";var t=n?n._modules:{};function e(i,s,r,o){i.hasOwnProperty(s)||(i[s]=o.apply(null,r),typeof CustomEvent=="function"&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:i[s]}})))}e(t,"Extensions/Breadcrumbs/BreadcrumbsDefaults.js",[],function(){return{lang:{mainBreadcrumb:"Main"},options:{buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#334eff"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",style:{color:"#666666",fontSize:"0.8em"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7}}}),e(t,"Extensions/Breadcrumbs/Breadcrumbs.js",[t["Extensions/Breadcrumbs/BreadcrumbsDefaults.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{format:a}=s,{composed:l}=r,{addEvent:h,defined:c,extend:g,fireEvent:d,isString:p,merge:y,objectEach:b,pick:x,pushUnique:f}=o;function M(){if(this.breadcrumbs){let O=this.resetZoomButton&&this.resetZoomButton.getBBox(),C=this.breadcrumbs.options;O&&C.position.align==="right"&&C.relativeTo==="plotBox"&&this.breadcrumbs.alignBreadcrumbsGroup(-O.width-C.buttonSpacing)}}function L(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}function _(){let O=this.breadcrumbs;if(O&&!O.options.floating&&O.level){let C=O.options,A=C.buttonTheme,F=(A.height||0)+2*(A.padding||0)+C.buttonSpacing,S=C.position.verticalAlign;S==="bottom"?(this.marginBottom=(this.marginBottom||0)+F,O.yOffset=F):S!=="middle"?(this.plotTop+=F,O.yOffset=-F):O.yOffset=void 0}}function w(){this.breadcrumbs&&this.breadcrumbs.redraw()}function k(O){O.resetSelection===!0&&this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()}class z{static compose(C,A){f(l,"Breadcrumbs")&&(h(C,"destroy",L),h(C,"afterShowResetZoom",M),h(C,"getMargins",_),h(C,"redraw",w),h(C,"selection",k),g(A.lang,i.lang))}constructor(C,A){this.elementList={},this.isDirty=!0,this.level=0,this.list=[];let F=y(C.options.drilldown&&C.options.drilldown.drillUpButton,z.defaultOptions,C.options.navigation&&C.options.navigation.breadcrumbs,A);this.chart=C,this.options=F||{}}updateProperties(C){this.setList(C),this.setLevel(),this.isDirty=!0}setList(C){this.list=C}setLevel(){this.level=this.list.length&&this.list.length-1}getLevel(){return this.level}getButtonText(C){let A=this.chart,F=this.options,S=A.options.lang,T=x(F.format,F.showFullPath?"{level.name}":"\u2190 {level.name}"),D=S&&x(S.drillUpText,S.mainBreadcrumb),P=F.formatter&&F.formatter(C)||a(T,{level:C.levelOptions},A)||"";return(p(P)&&!P.length||P==="\u2190 ")&&c(D)&&(P=F.showFullPath?D:"\u2190 "+D),P}redraw(){this.isDirty&&this.render(),this.group&&this.group.align(),this.isDirty=!1}render(){let C=this.chart,A=this.options;!this.group&&A&&(this.group=C.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:A.zIndex}).add()),A.showFullPath?this.renderFullPathButtons():this.renderSingleButton(),this.alignBreadcrumbsGroup()}renderFullPathButtons(){this.destroySingleButton(),this.resetElementListState(),this.updateListElements(),this.destroyListElements()}renderSingleButton(){let C=this.chart,A=this.list,F=this.options.buttonSpacing;this.destroyListElements();let S=this.group?this.group.getBBox().width:F,T=A[A.length-2];!C.drillUpButton&&this.level>0?C.drillUpButton=this.renderButton(T,S,F):C.drillUpButton&&(this.level>0?this.updateSingleButton():this.destroySingleButton())}alignBreadcrumbsGroup(C){if(this.group){let A=this.options,F=A.buttonTheme,S=A.position,T=A.relativeTo==="chart"||A.relativeTo==="spacingBox"?void 0:"plotBox",D=this.group.getBBox(),P=2*(F.padding||0)+A.buttonSpacing;S.width=D.width+P,S.height=D.height+P;let m=y(S);C&&(m.x+=C),this.options.rtl&&(m.x+=S.width),m.y=x(m.y,this.yOffset,0),this.group.align(m,!0,T)}}renderButton(C,A,F){let S=this,T=this.chart,D=S.options,P=y(D.buttonTheme),m=T.renderer.button(S.getButtonText(C),A,F,function(u){let v,I=D.events&&D.events.click;I&&(v=I.call(S,u,C)),v!==!1&&(D.showFullPath?u.newLevel=C.level:u.newLevel=S.level-1,d(S,"up",u))},P).addClass("highcharts-breadcrumbs-button").add(S.group);return T.styledMode||m.attr(D.style),m}renderSeparator(C,A){let F=this.chart,S=this.options.separator,T=F.renderer.label(S.text,C,A,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group);return F.styledMode||T.css(S.style),T}update(C){y(!0,this.options,C),this.destroy(),this.isDirty=!0}updateSingleButton(){let C=this.chart,A=this.list[this.level-1];C.drillUpButton&&C.drillUpButton.attr({text:this.getButtonText(A)})}destroy(){this.destroySingleButton(),this.destroyListElements(!0),this.group&&this.group.destroy(),this.group=void 0}destroyListElements(C){let A=this.elementList;b(A,(F,S)=>{(C||!A[S].updated)&&((F=A[S]).button&&F.button.destroy(),F.separator&&F.separator.destroy(),delete F.button,delete F.separator,delete A[S])}),C&&(this.elementList={})}destroySingleButton(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)}resetElementListState(){b(this.elementList,C=>{C.updated=!1})}updateListElements(){let C=this.elementList,A=this.options.buttonSpacing,F=this.list,S=this.options.rtl,T=S?-1:1,D=function(I,E){return T*I.getBBox().width+T*E},P=function(I,E,R){I.translate(E-I.getBBox().width,R)},m=this.group?D(this.group,A):A,u,v;for(let I=0,E=F.length;I<E;++I){let R,j,G=I===E-1;C[(v=F[I]).level]?(R=(u=C[v.level]).button,u.separator||G?u.separator&&G&&(u.separator.destroy(),delete u.separator):(m+=T*A,u.separator=this.renderSeparator(m,A),S&&P(u.separator,m,A),m+=D(u.separator,A)),C[v.level].updated=!0):(R=this.renderButton(v,m,A),S&&P(R,m,A),m+=D(R,A),G||(j=this.renderSeparator(m,A),S&&P(j,m,A),m+=D(j,A)),C[v.level]={button:R,separator:j,updated:!0}),R&&R.setState(G?2:0)}}}return z.defaultOptions=i.options,z}),e(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(i,s,r){var o;let{column:{prototype:a}}=i.seriesTypes,{addEvent:l,defined:h}=r;return function(c){function g(d){let p=this.series,y=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new s(y,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),d?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${y.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(d){let p={};return h(d.color)&&(!d.state||d.state==="normal")&&(p[this.colorProp||"fill"]=d.color),p},pointAttribs:a.pointAttribs},c.compose=function(d){return l(d.prototype.pointClass,"afterSetState",g),d}}(o||(o={})),o}),e(t,"Series/Treemap/TreemapAlgorithmGroup.js",[],function(){return class{constructor(i,s,r,o){this.height=i,this.width=s,this.plot=o,this.direction=r,this.startDirection=r,this.total=0,this.nW=0,this.lW=0,this.nH=0,this.lH=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(a,l){return Math.max(a/l,l/a)}}}addElement(i){this.lP.total=this.elArr[this.elArr.length-1],this.total=this.total+i,this.direction===0?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(i)}reset(){this.nW=0,this.lW=0,this.elArr=[],this.total=0}}}),e(t,"Series/Treemap/TreemapNode.js",[],function(){return class{constructor(){this.childrenTotal=0,this.visible=!1}init(i,s,r,o,a,l,h){return this.id=i,this.i=s,this.children=r,this.height=o,this.level=a,this.series=l,this.parent=h,this}}}),e(t,"Series/DrawPointUtilities.js",[],function(){return{draw:function(i,s){let{animatableAttribs:r,onComplete:o,css:a,renderer:l}=s,h=i.series&&i.series.chart.hasRendered?void 0:i.series&&i.series.options.animation,c=i.graphic;if(s.attribs=oi(re({},s.attribs),{class:i.getClassName()}),i.shouldDraw())c||(c=s.shapeType==="text"?l.text():s.shapeType==="image"?l.image(s.imageUrl||"").attr(s.shapeArgs||{}):l[s.shapeType](s.shapeArgs||{}),i.graphic=c,c.add(s.group)),a&&c.css(a),c.attr(s.attribs).animate(r,!s.isNew&&h,o);else if(c){let g=()=>{i.graphic=c=c&&c.destroy(),typeof o=="function"&&o()};Object.keys(r).length?c.animate(r,void 0,()=>g()):g()}}}}),e(t,"Series/Treemap/TreemapPoint.js",[t["Series/DrawPointUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{pie:{prototype:{pointClass:o}},scatter:{prototype:{pointClass:a}}}=s.seriesTypes,{extend:l,isNumber:h,pick:c}=r;class g extends a{constructor(){super(...arguments),this.shapeType="rect"}draw(p){i.draw(this,p)}getClassName(){let p=this.series,y=p.options,b=super.getClassName();return this.node.level<=p.nodeMap[p.rootNode].level&&this.node.children.length?b+=" highcharts-above-level":this.node.isLeaf||c(y.interactByLeaf,!y.allowTraversingTree)?this.node.isLeaf||(b+=" highcharts-internal-node"):b+=" highcharts-internal-node-interactive",b}isValid(){return!!(this.id||h(this.value))}setState(p){super.setState.apply(this,arguments),this.graphic&&this.graphic.attr({zIndex:p==="hover"?1:0})}shouldDraw(){return h(this.plotY)&&this.y!==null}}return l(g.prototype,{setVisible:o.prototype.setVisible}),g}),e(t,"Series/Treemap/TreemapSeriesDefaults.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s){let{isString:r}=s;return{allowTraversingTree:!1,animationLimit:250,borderRadius:0,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{defer:!1,enabled:!0,formatter:function(){let o=this&&this.point?this.point:{};return r(o.name)?o.name:""},inside:!0,verticalAlign:"middle"},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:"#999999",brightness:i.seriesTypes.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}},legendSymbol:"rectangle",traverseToLeaf:!1}}),e(t,"Series/Treemap/TreemapUtilities.js",[],function(){var i;return(i||(i={})).recursive=function s(r,o,a){let l=o.call(a||this,r);l!==!1&&s(l,o,a)},i}),e(t,"Series/TreeUtilities.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(i,s){let{extend:r,isArray:o,isNumber:a,isObject:l,merge:h,pick:c,relativeLength:g}=s;return{getColor:function(d,p){let y,b,x,f,M,L,_=p.index,w=p.mapOptionsToLevel,k=p.parentColor,z=p.parentColorIndex,O=p.series,C=p.colors,A=p.siblings,F=O.points,S=O.chart.options.chart;return d&&(y=F[d.i],b=w[d.level]||{},y&&b.colorByPoint&&(f=y.index%(C?C.length:S.colorCount),x=C&&C[f]),O.chart.styledMode||(M=c(y&&y.options.color,b&&b.color,x,k&&(T=>{let D=b&&b.colorVariation;return D&&D.key==="brightness"&&_&&A?i.parse(T).brighten(D.to*(_/A)).get():T})(k),O.color)),L=c(y&&y.options.colorIndex,b&&b.colorIndex,f,z,p.colorIndex)),{color:M,colorIndex:L}},getLevelOptions:function(d){let p,y,b,x,f,M,L={};if(l(d))for(x=a(d.from)?d.from:1,M=d.levels,y={},p=l(d.defaults)?d.defaults:{},o(M)&&(y=M.reduce((_,w)=>{let k,z,O;return l(w)&&a(w.level)&&(z=c((O=h({},w)).levelIsConstant,p.levelIsConstant),delete O.levelIsConstant,delete O.level,l(_[k=w.level+(z?0:x-1)])?h(!0,_[k],O):_[k]=O),_},{})),f=a(d.to)?d.to:1,b=0;b<=f;b++)L[b]=h({},p,l(y[b])?y[b]:{});return L},getNodeWidth:function(d,p){let{chart:y,options:b}=d,{nodeDistance:x=0,nodeWidth:f=0}=b,{plotSizeX:M=1}=y;if(f==="auto"){if(typeof x=="string"&&/%$/.test(x))return M/(p+parseFloat(x)/100*(p-1));let L=Number(x);return(M+L)/(p||1)-L}return g(f,M)},setTreeValues:function d(p,y){let b=y.before,x=y.idRoot,f=y.mapIdToNode[x],M=y.levelIsConstant!==!1,L=y.points[p.i],_=L&&L.options||{},w=[],k=0;p.levelDynamic=p.level-(M?0:f.level),p.name=c(L&&L.name,""),p.visible=x===p.id||y.visible===!0,typeof b=="function"&&(p=b(p,y)),p.children.forEach((O,C)=>{let A=r({},y);r(A,{index:C,siblings:p.children.length,visible:p.visible}),O=d(O,A),w.push(O),O.visible&&(k+=O.val)});let z=c(_.value,k);return p.visible=z>=0&&(k>0||p.visible),p.children=w,p.childrenTotal=k,p.isLeaf=p.visible&&!k,p.val=z,p},updateRootId:function(d){let p,y;return l(d)&&(y=l(d.options)?d.options:{},p=c(d.rootNode,y.rootId,""),l(d.userOptions)&&(d.userOptions.rootId=p),d.rootNode=p),p}}}),e(t,"Series/Treemap/TreemapSeries.js",[t["Extensions/Breadcrumbs/Breadcrumbs.js"],t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Treemap/TreemapAlgorithmGroup.js"],t["Series/Treemap/TreemapNode.js"],t["Series/Treemap/TreemapPoint.js"],t["Series/Treemap/TreemapSeriesDefaults.js"],t["Series/Treemap/TreemapUtilities.js"],t["Series/TreeUtilities.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c,g,d,p,y){let{parse:b}=s,{composed:x,noop:f}=o,{column:M,scatter:L}=a.seriesTypes,{getColor:_,getLevelOptions:w,updateRootId:k}=p,{addEvent:z,correctFloat:O,crisp:C,defined:A,error:F,extend:S,fireEvent:T,isArray:D,isObject:P,isString:m,merge:u,pick:v,pushUnique:I,stableSort:E}=y,R=!1;function j(){let W,N=this.xAxis,B=this.yAxis;N&&B&&(this.is("treemap")?(W={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,minPadding:0,max:100,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]},S(B.options,W),S(N.options,W),R=!0):R&&(B.setOptions(B.userOptions),N.setOptions(N.userOptions),R=!1))}class G extends L{static compose(N){I(x,"TreemapSeries")&&z(N,"afterBindAxes",j)}algorithmCalcPoints(N,B,X,V){let H=X.plot,K=X.elArr.length-1,U,Y,Z,q,J=X.lW,Q=X.lH,$,tt=0;for(let it of(B?(J=X.nW,Q=X.nH):$=X.elArr[K],X.elArr))(B||tt<K)&&(X.direction===0?(U=H.x,Y=H.y,q=it/(Z=J)):(U=H.x,Y=H.y,Z=it/(q=Q)),V.push({x:U,y:Y,width:Z,height:O(q)}),X.direction===0?H.y=H.y+q:H.x=H.x+Z),tt+=1;X.reset(),X.direction===0?X.width=X.width-J:X.height=X.height-Q,H.y=H.parent.y+(H.parent.height-X.height),H.x=H.parent.x+(H.parent.width-X.width),N&&(X.direction=1-X.direction),B||X.addElement($)}algorithmFill(N,B,X){let V=[],H,K=B.direction,U=B.x,Y=B.y,Z=B.width,q=B.height,J,Q,$,tt;for(let it of X)H=B.width*B.height*(it.val/B.val),J=U,Q=Y,K===0?(Z-=$=H/(tt=q),U+=$):(q-=tt=H/($=Z),Y+=tt),V.push({x:J,y:Q,width:$,height:tt}),N&&(K=1-K);return V}algorithmLowAspectRatio(N,B,X){let V=[],H={x:B.x,y:B.y,parent:B},K=B.direction,U=X.length-1,Y=new l(B.height,B.width,K,H),Z,q=0;for(let J of X)Z=B.width*B.height*(J.val/B.val),Y.addElement(Z),Y.lP.nR>Y.lP.lR&&this.algorithmCalcPoints(N,!1,Y,V,H),q===U&&this.algorithmCalcPoints(N,!0,Y,V,H),++q;return V}alignDataLabel(N,B,X){let V=X.style;V&&!A(V.textOverflow)&&B.text&&B.getBBox().width>(B.text.textWidth||0)&&B.css({textOverflow:"ellipsis",width:V.width+="px"}),M.prototype.alignDataLabel.apply(this,arguments),N.dataLabel&&N.dataLabel.attr({zIndex:(N.node.zIndex||0)+1})}calculateChildrenAreas(N,B){let X=this.options,V=this.mapOptionsToLevel[N.level+1],H=v(this[V&&V.layoutAlgorithm]&&V.layoutAlgorithm,X.layoutAlgorithm),K=X.alternateStartingDirection,U=N.children.filter(q=>!q.ignore),Y=[];V&&V.layoutStartingDirection&&(B.direction=V.layoutStartingDirection==="vertical"?0:1),Y=this[H](B,U);let Z=-1;for(let q of U){let J=Y[++Z];q.values=u(J,{val:q.childrenTotal,direction:K?1-B.direction:B.direction}),q.pointValues=u(J,{x:J.x/this.axisRatio,y:100-J.y-J.height,width:J.width/this.axisRatio}),q.children.length&&this.calculateChildrenAreas(q,q.values)}}createList(N){let B=this.chart,X=B.breadcrumbs,V=[];if(X){let H=0;V.push({level:H,levelOptions:B.series[0]});let K=N.target.nodeMap[N.newRootId],U=[];for(;K.parent||K.parent==="";)U.push(K),K=N.target.nodeMap[K.parent];for(let Y of U.reverse())V.push({level:++H,levelOptions:Y});V.length<=1&&(V.length=0)}return V}drawDataLabels(){let N,B,X=this.mapOptionsToLevel;for(let V of this.points.filter(function(H){return H.node.visible}))B=X[V.node.level],N={style:{}},V.node.isLeaf||(N.enabled=!1),B&&B.dataLabels&&(N=u(N,B.dataLabels),this.hasDataLabels=()=>!0),V.shapeArgs&&(N.style.width=V.shapeArgs.width,V.dataLabel&&V.dataLabel.css({width:V.shapeArgs.width+"px"})),V.dlOptions=u(N,V.options.dataLabels);super.drawDataLabels()}drawPoints(N=this.points){let B=this.chart,X=B.renderer,V=B.styledMode,H=this.options,K=V?{}:H.shadow,U=H.borderRadius,Y=B.pointCount<H.animationLimit,Z=H.allowTraversingTree;for(let q of N){let J=q.node.levelDynamic,Q={},$={},tt={},it="level-group-"+q.node.level,et=!!q.graphic,st=Y&&et,rt=q.shapeArgs;q.shouldDraw()&&(q.isInside=!0,U&&($.r=U),u(!0,st?Q:$,et?rt:{},V?{}:this.pointAttribs(q,q.selected?"select":void 0)),this.colorAttribs&&V&&S(tt,this.colorAttribs(q)),this[it]||(this[it]=X.g(it).attr({zIndex:1e3-(J||0)}).add(this.group),this[it].survive=!0)),q.draw({animatableAttribs:Q,attribs:$,css:tt,group:this[it],imageUrl:q.imageUrl,renderer:X,shadow:K,shapeArgs:rt,shapeType:q.shapeType}),Z&&q.graphic&&(q.drillId=H.interactByLeaf?this.drillToByLeaf(q):this.drillToByGroup(q))}}drillToByGroup(N){let B=!1;return N.node.isLeaf||N.node.level-this.nodeMap[this.rootNode].level!=1||(B=N.id),B}drillToByLeaf(N){let{traverseToLeaf:B}=N.series.options,X=!1,V;if(N.node.parent!==this.rootNode&&N.node.isLeaf)if(B)X=N.id;else for(V=N.node;!X;)V.parent!==void 0&&(V=this.nodeMap[V.parent]),V.parent===this.rootNode&&(X=V.id);return X}drillToNode(N,B){F(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"}),this.setRootNode(N,B)}drillUp(){let N=this.nodeMap[this.rootNode];N&&m(N.parent)&&this.setRootNode(N.parent,!0,{trigger:"traverseUpButton"})}getExtremes(){let{dataMin:N,dataMax:B}=super.getExtremes(this.colorValueData);return this.valueMin=N,this.valueMax=B,super.getExtremes()}getListOfParents(N,B){let X=D(N)?N:[],V=D(B)?B:[],H=X.reduce(function(K,U,Y){let Z=v(U.parent,"");return K[Z]===void 0&&(K[Z]=[]),K[Z].push(Y),K},{"":[]});for(let K of Object.keys(H)){let U=H[K];if(K!==""&&V.indexOf(K)===-1){for(let Y of U)H[""].push(Y);delete H[K]}}return H}getTree(){let N=this.data.map(function(X){return X.id}),B=this.getListOfParents(this.data,N);return this.nodeMap={},this.nodeList=[],this.buildTree("",-1,0,B)}buildTree(N,B,X,V,H){let K=[],U=this.points[B],Y=0,Z;for(let J of V[N]||[])Y=Math.max((Z=this.buildTree(this.points[J].id,J,X+1,V,N)).height+1,Y),K.push(Z);let q=new this.NodeClass().init(N,B,K,Y,X,this,H);for(let J of K)J.parentNode=q;return this.nodeMap[q.id]=q,this.nodeList.push(q),U&&(U.node=q,q.point=U),q}hasData(){return!!this.processedXData.length}init(N,B){let X=this,V=u(B.drillUpButton,B.breadcrumbs),H=z(X,"setOptions",K=>{let U=K.userOptions;A(U.allowDrillToNode)&&!A(U.allowTraversingTree)&&(U.allowTraversingTree=U.allowDrillToNode,delete U.allowDrillToNode),A(U.drillUpButton)&&!A(U.traverseUpButton)&&(U.traverseUpButton=U.drillUpButton,delete U.drillUpButton)});super.init(N,B),delete X.opacity,X.eventsToUnbind.push(H),X.options.allowTraversingTree&&(X.eventsToUnbind.push(z(X,"click",X.onClickDrillToNode)),X.eventsToUnbind.push(z(X,"setRootNode",function(K){let U=X.chart;U.breadcrumbs&&U.breadcrumbs.updateProperties(X.createList(K))})),X.eventsToUnbind.push(z(X,"update",function(K,U){let Y=this.chart.breadcrumbs;Y&&K.options.breadcrumbs&&Y.update(K.options.breadcrumbs)})),X.eventsToUnbind.push(z(X,"destroy",function(K){let U=this.chart;U.breadcrumbs&&!K.keepEventsForUpdate&&(U.breadcrumbs.destroy(),U.breadcrumbs=void 0)}))),N.breadcrumbs||(N.breadcrumbs=new i(N,V)),X.eventsToUnbind.push(z(N.breadcrumbs,"up",function(K){let U=this.level-K.newLevel;for(let Y=0;Y<U;Y++)X.drillUp()}))}onClickDrillToNode(N){let B=N.point,X=B&&B.drillId;m(X)&&(B.setState(""),this.setRootNode(X,!0,{trigger:"click"}))}pointAttribs(N,B){let X,V=P(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},H=N&&V[N.node.level]||{},K=this.options,U=B&&K.states&&K.states[B]||{},Y=N&&N.getClassName()||"",Z={stroke:N&&N.borderColor||H.borderColor||U.borderColor||K.borderColor,"stroke-width":v(N&&N.borderWidth,H.borderWidth,U.borderWidth,K.borderWidth),dashstyle:N&&N.borderDashStyle||H.borderDashStyle||U.borderDashStyle||K.borderDashStyle,fill:N&&N.color||this.color};return Y.indexOf("highcharts-above-level")!==-1?(Z.fill="none",Z["stroke-width"]=0):Y.indexOf("highcharts-internal-node-interactive")!==-1?(X=v(U.opacity,K.opacity),Z.fill=b(Z.fill).setOpacity(X).get(),Z.cursor="pointer"):Y.indexOf("highcharts-internal-node")!==-1?Z.fill="none":B&&(Z.fill=b(Z.fill).brighten(U.brightness).get()),Z}setColorRecursive(N,B,X,V,H){let K=this&&this.chart,U=K&&K.options&&K.options.colors;if(N){let Y=_(N,{colors:U,index:V,mapOptionsToLevel:this.mapOptionsToLevel,parentColor:B,parentColorIndex:X,series:this,siblings:H}),Z=this.points[N.i];Z&&(Z.color=Y.color,Z.colorIndex=Y.colorIndex);let q=-1;for(let J of N.children||[])this.setColorRecursive(J,Y.color,Y.colorIndex,++q,N.children.length)}}setPointValues(){let N=this,{points:B,xAxis:X,yAxis:V}=N,H=N.chart.styledMode,K=U=>H?0:N.pointAttribs(U)["stroke-width"]||0;for(let U of B){let{pointValues:Y,visible:Z}=U.node;if(Y&&Z){let{height:q,width:J,x:Q,y:$}=Y,tt=K(U),it=C(X.toPixels(Q,!0),tt,!0),et=C(X.toPixels(Q+J,!0),tt,!0),st=C(V.toPixels($,!0),tt,!0),rt=C(V.toPixels($+q,!0),tt,!0),nt={x:Math.min(it,et),y:Math.min(st,rt),width:Math.abs(et-it),height:Math.abs(rt-st)};U.plotX=nt.x+nt.width/2,U.plotY=nt.y+nt.height/2,U.shapeArgs=nt}else delete U.plotX,delete U.plotY}}setRootNode(N,B,X){T(this,"setRootNode",S({newRootId:N,previousRootId:this.rootNode,redraw:v(B,!0),series:this},X),function(V){let H=V.series;H.idPreviousRoot=V.previousRootId,H.rootNode=V.newRootId,H.isDirty=!0,V.redraw&&H.chart.redraw()})}setState(N){this.options.inactiveOtherPoints=!0,super.setState(N,!1),this.options.inactiveOtherPoints=!1}setTreeValues(N){let B=this.options,X=this.rootNode,V=this.nodeMap[X],H=typeof B.levelIsConstant!="boolean"||B.levelIsConstant,K=[],U=this.points[N.i],Y=0;for(let q of N.children)q=this.setTreeValues(q),K.push(q),q.ignore||(Y+=q.val);E(K,(q,J)=>(q.sortIndex||0)-(J.sortIndex||0));let Z=v(U&&U.options.value,Y);return U&&(U.value=Z),S(N,{children:K,childrenTotal:Y,ignore:!(v(U&&U.visible,!0)&&Z>0),isLeaf:N.visible&&!Y,levelDynamic:N.level-(H?0:V.level),name:v(U&&U.name,""),sortIndex:v(U&&U.sortIndex,-Z),val:Z}),N}sliceAndDice(N,B){return this.algorithmFill(!0,N,B)}squarified(N,B){return this.algorithmLowAspectRatio(!0,N,B)}strip(N,B){return this.algorithmLowAspectRatio(!1,N,B)}stripes(N,B){return this.algorithmFill(!1,N,B)}translate(){let N=this,B=N.options,X=k(N),V,H,K,U;super.translate();let Y=N.tree=N.getTree();V=N.nodeMap[X],X===""||V||(N.setRootNode("",!1),X=N.rootNode,V=N.nodeMap[X]),N.mapOptionsToLevel=w({from:V.level+1,levels:B.levels,to:Y.height,defaults:{levelIsConstant:N.options.levelIsConstant,colorByPoint:B.colorByPoint}}),d.recursive(N.nodeMap[N.rootNode],Z=>{let q=Z.parent,J=!1;return Z.visible=!0,(q||q==="")&&(J=N.nodeMap[q]),J}),d.recursive(N.nodeMap[N.rootNode].children,Z=>{let q=!1;for(let J of Z)J.visible=!0,J.children.length&&(q=(q||[]).concat(J.children));return q}),N.setTreeValues(Y),N.axisRatio=N.xAxis.len/N.yAxis.len,N.nodeMap[""].pointValues=H={x:0,y:0,width:100,height:100},N.nodeMap[""].values=K=u(H,{width:H.width*N.axisRatio,direction:B.layoutStartingDirection==="vertical"?0:1,val:Y.val}),N.calculateChildrenAreas(Y,K),N.colorAxis||B.colorByPoint||N.setColorRecursive(N.tree),B.allowTraversingTree&&(U=V.pointValues,N.xAxis.setExtremes(U.x,U.x+U.width,!1),N.yAxis.setExtremes(U.y,U.y+U.height,!1),N.xAxis.setScale(),N.yAxis.setScale()),N.setPointValues()}}return G.defaultOptions=u(L.defaultOptions,g),S(G.prototype,{buildKDTree:f,colorAttribs:r.seriesMembers.colorAttribs,colorKey:"colorValue",directTouch:!0,getExtremesFromAll:!0,getSymbol:f,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value"],pointClass:c,NodeClass:h,trackerGroups:["group","dataLabelsGroup"],utils:d}),r.compose(G),a.registerSeriesType("treemap",G),G}),e(t,"masters/modules/treemap.src.js",[t["Core/Globals.js"],t["Extensions/Breadcrumbs/Breadcrumbs.js"],t["Series/Treemap/TreemapSeries.js"]],function(i,s,r){return i.Breadcrumbs=i.Breadcrumbs||s,i.Breadcrumbs.compose(i.Chart,i.defaultOptions),r.compose(i.Series),i})})});var Ku=ai((uA,co)=>{"use strict";(function(n){typeof co=="object"&&co.exports?(n.default=n,co.exports=n):typeof define=="function"&&define.amd?define("highcharts/modules/heatmap",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n(typeof Highcharts<"u"?Highcharts:void 0)})(function(n){"use strict";var t=n?n._modules:{};function e(i,s,r,o){i.hasOwnProperty(s)||(i[s]=o.apply(null,r),typeof CustomEvent=="function"&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:i[s]}})))}e(t,"Core/Axis/Color/ColorAxisComposition.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(i,s){var r;let{parse:o}=i,{addEvent:a,extend:l,merge:h,pick:c,splat:g}=s;return function(d){let p;function y(){let{userOptions:O}=this;this.colorAxis=[],O.colorAxis&&(O.colorAxis=g(O.colorAxis),O.colorAxis.map(C=>new p(this,C)))}function b(O){let C=this.chart.colorAxis||[],A=D=>{let P=O.allItems.indexOf(D);P!==-1&&(this.destroyItem(O.allItems[P]),O.allItems.splice(P,1))},F=[],S,T;for(C.forEach(function(D){(S=D.options)&&S.showInLegend&&(S.dataClasses&&S.visible?F=F.concat(D.getDataClassLegendSymbols()):S.visible&&F.push(D),D.series.forEach(function(P){(!P.options.showInLegend||S.dataClasses)&&(P.options.legendType==="point"?P.points.forEach(function(m){A(m)}):A(P))}))}),T=F.length;T--;)O.allItems.unshift(F[T])}function x(O){O.visible&&O.item.legendColor&&O.item.legendItem.symbol.attr({fill:O.item.legendColor})}function f(O){this.chart.colorAxis?.forEach(C=>{C.update({},O.redraw)})}function M(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function L(){let O=this.axisTypes;O?O.indexOf("colorAxis")===-1&&O.push("colorAxis"):this.axisTypes=["colorAxis"]}function _(O){let C=this,A=O?"show":"hide";C.visible=C.options.visible=!!O,["graphic","dataLabel"].forEach(function(F){C[F]&&C[F][A]()}),this.series.buildKDTree()}function w(){let O=this,C=this.getPointsCollection(),A=this.options.nullColor,F=this.colorAxis,S=this.colorKey;C.forEach(T=>{let D=T.getNestedProperty(S),P=T.options.color||(T.isNull||T.value===null?A:F&&D!==void 0?F.toColor(D,T):T.color||O.color);P&&T.color!==P&&(T.color=P,O.options.legendType==="point"&&T.legendItem&&T.legendItem.label&&O.chart.legend.colorizeItem(T,T.visible))})}function k(){this.elem.attr("fill",o(this.start).tweenTo(o(this.end),this.pos),void 0,!0)}function z(){this.elem.attr("stroke",o(this.start).tweenTo(o(this.end),this.pos),void 0,!0)}d.compose=function(O,C,A,F,S){let T=C.prototype,D=A.prototype,P=S.prototype;T.collectionsWithUpdate.includes("colorAxis")||(p=O,T.collectionsWithUpdate.push("colorAxis"),T.collectionsWithInit.colorAxis=[T.addColorAxis],a(C,"afterGetAxes",y),function(m){let u=m.prototype.createAxis;m.prototype.createAxis=function(v,I){if(v!=="colorAxis")return u.apply(this,arguments);let E=new p(this,h(I.axis,{index:this[v].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(R=>{R.series=[]}),this.series.forEach(R=>{R.bindAxes(),R.isDirtyData=!0}),c(I.redraw,!0)&&this.redraw(I.animation),E}}(C),D.fillSetter=k,D.strokeSetter=z,a(F,"afterGetAllItems",b),a(F,"afterColorizeItem",x),a(F,"afterUpdate",f),l(P,{optionalAxis:"colorAxis",translateColors:w}),l(P.pointClass.prototype,{setVisible:_}),a(S,"afterTranslate",M,{order:1}),a(S,"bindAxes",L))},d.pointSetVisible=_}(r||(r={})),r}),e(t,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0}}),e(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(i,s){var r,o;let{parse:a}=i,{merge:l}=s;return(o=r||(r={})).initDataClasses=function(h){let c=this.chart,g=this.legendItem=this.legendItem||{},d=this.options,p=h.dataClasses||[],y,b,x=c.options.chart.colorCount,f=0,M;this.dataClasses=b=[],g.labels=[];for(let L=0,_=p.length;L<_;++L)y=l(y=p[L]),b.push(y),(c.styledMode||!y.color)&&(d.dataClassColor==="category"?(c.styledMode||(x=(M=c.options.colors||[]).length,y.color=M[f]),y.colorIndex=f,++f===x&&(f=0)):y.color=a(d.minColor).tweenTo(a(d.maxColor),_<2?.5:L/(_-1)))},o.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let g=0,d=c.length;g<d;++g)c[g].color=a(c[g][1])},o.normalizedValue=function(h){let c=this.max||0,g=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-g||1)},o.toColor=function(h,c){let g,d,p,y,b,x,f=this.dataClasses,M=this.stops;if(f){for(x=f.length;x--;)if(d=(b=f[x]).from,p=b.to,(d===void 0||h>=d)&&(p===void 0||h<=p)){y=b.color,c&&(c.dataClass=x,c.colorIndex=b.colorIndex);break}}else{for(g=this.normalizedValue(h),x=M.length;x--&&!(g>M[x][0]););d=M[x]||M[x+1],g=1-((p=M[x+1]||d)[0]-g)/(p[0]-d[0]||1),y=d.color.tweenTo(p.color,g)}return y},r}),e(t,"Core/Axis/Color/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Axis/Color/ColorAxisComposition.js"],t["Core/Axis/Color/ColorAxisDefaults.js"],t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Defaults.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c){let{defaultOptions:g}=a,{series:d}=h,{defined:p,extend:y,fireEvent:b,isArray:x,isNumber:f,merge:M,pick:L,relativeLength:_}=c;g.colorAxis=M(g.xAxis,r);class w extends i{static compose(z,O,C,A){s.compose(w,z,O,C,A)}constructor(z,O){super(z,O),this.coll="colorAxis",this.visible=!0,this.init(z,O)}init(z,O){let C=z.options.legend||{},A=O.layout?O.layout!=="vertical":C.layout!=="vertical";this.side=O.side||A?2:1,this.reversed=O.reversed||!A,this.opposite=!A,super.init(z,O,"colorAxis"),this.userOptions=O,x(z.userOptions.colorAxis)&&(z.userOptions.colorAxis[this.index]=O),O.dataClasses&&this.initDataClasses(O),this.initStops(),this.horiz=A,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(z){let O=M(g.colorAxis,z,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&z.visible!==!1});super.setOptions(O),this.options.crosshair=this.options.marker}setAxisSize(){let z=this.chart,O=this.legendItem?.symbol,{width:C,height:A}=this.getSize();O&&(this.left=+O.attr("x"),this.top=+O.attr("y"),this.width=C=+O.attr("width"),this.height=A=+O.attr("height"),this.right=z.chartWidth-this.left-C,this.bottom=z.chartHeight-this.top-A,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?C:A)||w.defaultLegendLength}getOffset(){let z=this.legendItem?.group,O=this.chart.axisOffset[this.side];if(z){this.axisParent=z,super.getOffset();let C=this.chart.legend;C.allItems.forEach(function(A){A instanceof w&&A.drawLegendSymbol(C,A)}),C.render(),this.chart.getMargins(!0),this.chart.series.some(A=>A.isDrilling)||(this.isDirty=!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=O}}setLegendColor(){let z=this.horiz,O=this.reversed,C=O?1:0,A=O?0:1,F=z?[C,0,A,0]:[0,A,0,C];this.legendColor={linearGradient:{x1:F[0],y1:F[1],x2:F[2],y2:F[3]},stops:this.stops}}drawLegendSymbol(z,O){let C=O.legendItem||{},A=z.padding,F=z.options,S=this.options.labels,T=L(F.itemDistance,10),D=this.horiz,{width:P,height:m}=this.getSize(),u=L(F.labelPadding,D?16:30);this.setLegendColor(),C.symbol||(C.symbol=this.chart.renderer.symbol("roundedRect").attr({r:F.symbolRadius??3,zIndex:1}).add(C.group)),C.symbol.attr({x:0,y:(z.baseline||0)-11,width:P,height:m}),C.labelWidth=P+A+(D?T:L(S.x,S.distance)+(this.maxLabelLength||0)),C.labelHeight=m+A+(D?u:0)}setState(z){this.series.forEach(function(O){O.setState(z)})}setVisible(){}getSeriesExtremes(){let z=this.series,O,C,A,F,S,T,D=z.length,P,m;for(this.dataMin=1/0,this.dataMax=-1/0;D--;){if(C=(T=z[D]).colorKey=L(T.options.colorKey,T.colorKey,T.pointValKey,T.zoneAxis,"y"),F=T.pointArrayMap,S=T[C+"Min"]&&T[C+"Max"],T[C+"Data"])O=T[C+"Data"];else if(F){if(O=[],A=F.indexOf(C),P=T.yData,A>=0&&P)for(m=0;m<P.length;m++)O.push(L(P[m][A],P[m]))}else O=T.yData;if(S)T.minColorValue=T[C+"Min"],T.maxColorValue=T[C+"Max"];else{let u=d.prototype.getExtremes.call(T,O);T.minColorValue=u.dataMin,T.maxColorValue=u.dataMax}p(T.minColorValue)&&p(T.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,T.minColorValue),this.dataMax=Math.max(this.dataMax,T.maxColorValue)),S||d.prototype.applyExtremes.call(T)}}drawCrosshair(z,O){let C,A=this.legendItem||{},F=O&&O.plotX,S=O&&O.plotY,T=this.pos,D=this.len;O&&((C=this.toPixels(O.getNestedProperty(O.series.colorKey)))<T?C=T-2:C>T+D&&(C=T+D+2),O.plotX=C,O.plotY=this.len-C,super.drawCrosshair(z,O),O.plotX=F,O.plotY=S,this.cross&&!this.cross.addedToColorAxis&&A.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(A.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||typeof this.crosshair!="object"||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(z){let O=this.left,C=z.translatedValue,A=this.top;return f(C)?this.horiz?[["M",C-4,A-6],["L",C+4,A-6],["L",C,A],["Z"]]:[["M",O,C],["L",O-6,C+6],["L",O-6,C-6],["Z"]]:super.getPlotLinePath(z)}update(z,O){let C=this.chart.legend;this.series.forEach(A=>{A.isDirtyData=!0}),(z.dataClasses&&C.allItems||this.dataClasses)&&this.destroyItems(),super.update(z,O),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),C.colorizeItem(this,!0))}destroyItems(){let z=this.chart,O=this.legendItem||{};if(O.label)z.legend.destroyItem(this);else if(O.labels)for(let C of O.labels)z.legend.destroyItem(C);z.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(z){this.destroyItems(),super.remove(z)}getDataClassLegendSymbols(){let z,O=this,C=O.chart,A=O.legendItem&&O.legendItem.labels||[],F=C.options.legend,S=L(F.valueDecimals,-1),T=L(F.valueSuffix,""),D=P=>O.series.reduce((m,u)=>(m.push(...u.points.filter(v=>v.dataClass===P)),m),[]);return A.length||O.dataClasses.forEach((P,m)=>{let u=P.from,v=P.to,{numberFormatter:I}=C,E=!0;z="",u===void 0?z="< ":v===void 0&&(z="> "),u!==void 0&&(z+=I(u,S)+T),u!==void 0&&v!==void 0&&(z+=" - "),v!==void 0&&(z+=I(v,S)+T),A.push(y({chart:C,name:z,options:{},drawLegendSymbol:l.rectangle,visible:!0,isDataClass:!0,setState:R=>{for(let j of D(m))j.setState(R)},setVisible:function(){this.visible=E=O.visible=!E;let R=[];for(let j of D(m))j.setVisible(E),j.hiddenInDataClass=!E,R.indexOf(j.series)===-1&&R.push(j.series);C.legend.colorizeItem(this,E),R.forEach(j=>{b(j,"afterDataClassLegendClick")})}},P))}),A}getSize(){let{chart:z,horiz:O}=this,{height:C,width:A}=this.options,{legend:F}=z.options;return{width:L(p(A)?_(A,z.chartWidth):void 0,F?.symbolWidth,O?w.defaultLegendLength:12),height:L(p(C)?_(C,z.chartHeight):void 0,F?.symbolHeight,O?12:w.defaultLegendLength)}}}return w.defaultLegendLength=200,w.keepProps=["legendItem"],y(w.prototype,o),Array.prototype.push.apply(i.keepProps,w.keepProps),w}),e(t,"masters/modules/coloraxis.src.js",[t["Core/Globals.js"],t["Core/Axis/Color/ColorAxis.js"]],function(i,s){return i.ColorAxis=i.ColorAxis||s,i.ColorAxis.compose(i.Chart,i.Fx,i.Legend,i.Series),i}),e(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(i,s,r){var o;let{column:{prototype:a}}=i.seriesTypes,{addEvent:l,defined:h}=r;return function(c){function g(d){let p=this.series,y=p.chart.renderer;this.moveToTopOnHover&&this.graphic&&(p.stateMarkerGraphic||(p.stateMarkerGraphic=new s(y,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),d?.state==="hover"?(this.graphic.attr({id:this.id}),p.stateMarkerGraphic.attr({href:`${y.url}#${this.id}`,visibility:"visible"})):p.stateMarkerGraphic.attr({href:""}))}c.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},c.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(d){let p={};return h(d.color)&&(!d.state||d.state==="normal")&&(p[this.colorProp||"fill"]=d.color),p},pointAttribs:a.pointAttribs},c.compose=function(d){return l(d.prototype.pointClass,"afterSetState",g),d}}(o||(o={})),o}),e(t,"Series/Heatmap/HeatmapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s){let{scatter:{prototype:{pointClass:r}}}=i.seriesTypes,{clamp:o,defined:a,extend:l,pick:h}=s;class c extends r{applyOptions(d,p){return(this.isNull||this.value===null)&&delete this.color,super.applyOptions(d,p),this.formatPrefix=this.isNull||this.value===null?"null":"point",this}getCellAttributes(){let d=this.series,p=d.options,y=(p.colsize||1)/2,b=(p.rowsize||1)/2,x=d.xAxis,f=d.yAxis,M=this.options.marker||d.options.marker,L=d.pointPlacementToXValue(),_=h(this.pointPadding,p.pointPadding,0),w={x1:o(Math.round(x.len-x.translate(this.x-y,!1,!0,!1,!0,-L)),-x.len,2*x.len),x2:o(Math.round(x.len-x.translate(this.x+y,!1,!0,!1,!0,-L)),-x.len,2*x.len),y1:o(Math.round(f.translate(this.y-b,!1,!0,!1,!0)),-f.len,2*f.len),y2:o(Math.round(f.translate(this.y+b,!1,!0,!1,!0)),-f.len,2*f.len)};for(let k of[["width","x"],["height","y"]]){let z=k[0],O=k[1],C=O+"1",A=O+"2",F=Math.abs(w[C]-w[A]),S=M&&M.lineWidth||0,T=Math.abs(w[C]+w[A])/2,D=M&&M[z];if(a(D)&&D<F){let P=D/2+S/2;w[C]=T-P,w[A]=T+P}_&&((O==="x"&&x.reversed||O==="y"&&!f.reversed)&&(C=A,A=O+"1"),w[C]+=_,w[A]-=_)}return w}haloPath(d){if(!d)return[];let{x:p=0,y=0,width:b=0,height:x=0}=this.shapeArgs||{};return[["M",p-d,y-d],["L",p-d,y+x+d],["L",p+b+d,y+x+d],["L",p+b+d,y-d],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}return l(c.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),c}),e(t,"Series/Heatmap/HeatmapSeriesDefaults.js",[t["Core/Utilities.js"]],function(i){let{isNumber:s}=i;return{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:r}=this.series.chart,{value:o}=this.point;return s(o)?r(o,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}}),e(t,"Series/InterpolationUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let{doc:r}=i,{defined:o,pick:a}=s;return{colorFromPoint:function(l,h){let c=h.series.colorAxis;if(c){let g=c.toColor(l||0,h).split(")")[0].split("(")[1].split(",").map(d=>a(parseFloat(d),parseInt(d,10)));return g[3]=255*a(g[3],1),o(l)&&h.visible||(g[3]=0),g}return[0,0,0,0]},getContext:function(l){let{canvas:h,context:c}=l;return h&&c?(c.clearRect(0,0,h.width,h.height),c):(l.canvas=r.createElement("canvas"),l.context=l.canvas.getContext("2d",{willReadFrequently:!0})||void 0,l.context)}}}),e(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Series/Heatmap/HeatmapSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"],t["Series/InterpolationUtilities.js"]],function(i,s,r,o,a,l,h,c){let{series:g,seriesTypes:{column:d,scatter:p}}=a,{prototype:{symbols:y}}=l,{addEvent:b,extend:x,fireEvent:f,isNumber:M,merge:L,pick:_}=h,{colorFromPoint:w,getContext:k}=c;class z extends p{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let C=this,A=C.options,F=A.interpolation,S=A.marker||{};if(F){let{image:T,chart:D,xAxis:P,yAxis:m}=C,{reversed:u=!1,len:v}=P,{reversed:I=!1,len:E}=m,R={width:v,height:E};if(!T||C.isDirtyData||C.isDirtyCanvas){let j=k(C),{canvas:G,options:{colsize:W=1,rowsize:N=1},points:B,points:{length:X}}=C,V=D.colorAxis&&D.colorAxis[0];if(G&&j&&V){let{min:H,max:K}=P.getExtremes(),{min:U,max:Y}=m.getExtremes(),Z=K-H,q=Y-U,J=Math.round(Z/W/8*8),Q=Math.round(q/N/8*8),[$,tt]=[[J,J/Z,u,"ceil"],[Q,Q/q,!I,"floor"]].map(([ot,at,ct,ht])=>ct?lt=>Math[ht](ot-at*lt):lt=>Math[ht](at*lt)),it=G.width=J+1,et=it*(G.height=Q+1),st=(X-1)/et,rt=new Uint8ClampedArray(4*et),nt=(ot,at)=>4*Math.ceil(it*tt(at-U)+$(ot-H));C.buildKDTree();for(let ot=0;ot<et;ot++){let at=B[Math.ceil(st*ot)],{x:ct,y:ht}=at;rt.set(w(at.value,at),nt(ct,ht))}j.putImageData(new ImageData(rt,it),0,0),T?T.attr(oi(re({},R),{href:G.toDataURL("image/png",1)})):(C.directTouch=!1,C.image=D.renderer.image(G.toDataURL("image/png",1)).attr(R).add(C.group))}C.isDirtyCanvas=!1}else(T.width!==v||T.height!==E)&&T.attr(R)}else(S.enabled||C._hasPointMarkers)&&(g.prototype.drawPoints.call(C),C.points.forEach(T=>{T.graphic&&(T.graphic[C.chart.styledMode?"css":"animate"](C.colorAttribs(T)),T.value===null&&T.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:C,dataMax:A}=g.prototype.getExtremes.call(this,this.valueData);return M(C)&&(this.valueMin=C),M(A)&&(this.valueMax=A),g.prototype.getExtremes.call(this)}getValidPoints(C,A){return g.prototype.getValidPoints.call(this,C,A,!0)}hasData(){return!!this.xData}init(){super.init.apply(this,arguments);let C=this.options;C.pointRange=_(C.pointRange,C.colsize||1),this.yAxis.axisPointRange=C.rowsize||1,y.ellipse=y.circle,C.marker&&M(C.borderRadius)&&(C.marker.r=C.borderRadius)}markerAttribs(C,A){let F=C.shapeArgs||{};if(C.hasImage)return{x:C.plotX,y:C.plotY};if(A&&A!=="normal"){let S=C.options.marker||{},T=this.options.marker||{},D=T.states&&T.states[A]||{},P=S.states&&S.states[A]||{},m=(P.width||D.width||F.width||0)+(P.widthPlus||D.widthPlus||0),u=(P.height||D.height||F.height||0)+(P.heightPlus||D.heightPlus||0);return{x:(F.x||0)+((F.width||0)-m)/2,y:(F.y||0)+((F.height||0)-u)/2,width:m,height:u}}return F}pointAttribs(C,A){let F=g.prototype.pointAttribs.call(this,C,A),S=this.options||{},T=this.chart.options.plotOptions||{},D=T.series||{},P=T.heatmap||{},m=C&&C.options.borderColor||S.borderColor||P.borderColor||D.borderColor,u=C&&C.options.borderWidth||S.borderWidth||P.borderWidth||D.borderWidth||F["stroke-width"];if(F.stroke=C&&C.marker&&C.marker.lineColor||S.marker&&S.marker.lineColor||m||this.color,F["stroke-width"]=u,A&&A!=="normal"){let v=L(S.states&&S.states[A],S.marker&&S.marker.states&&S.marker.states[A],C&&C.options.states&&C.options.states[A]||{});F.fill=v.color||i.parse(F.fill).brighten(v.brightness||0).get(),F.stroke=v.lineColor||F.stroke}return F}translate(){let{borderRadius:C,marker:A}=this.options,F=A&&A.symbol||"rect",S=y[F]?F:"rect",T=["circle","square"].indexOf(S)!==-1;if(!this.processedXData){let{xData:D,yData:P}=this.getProcessedData();this.processedXData=D,this.processedYData=P}for(let D of(this.generatePoints(),this.points)){let P=D.getCellAttributes(),m=Math.min(P.x1,P.x2),u=Math.min(P.y1,P.y2),v=Math.max(Math.abs(P.x2-P.x1),0),I=Math.max(Math.abs(P.y2-P.y1),0);if(D.hasImage=(D.marker&&D.marker.symbol||F||"").indexOf("url")===0,T){let E=Math.abs(v-I);m=Math.min(P.x1,P.x2)+(v<I?0:E/2),u=Math.min(P.y1,P.y2)+(v<I?E/2:0),v=I=Math.min(v,I)}D.hasImage&&(D.marker={width:v,height:I}),D.plotX=D.clientX=(P.x1+P.x2)/2,D.plotY=(P.y1+P.y2)/2,D.shapeType="path",D.shapeArgs=L(!0,{x:m,y:u,width:v,height:I},{d:y[S](m,u,v,I,{r:M(C)?C:0})})}f(this,"afterTranslate")}}return z.defaultOptions=L(p.defaultOptions,o),b(z,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),x(z.prototype,{axisTypes:s.seriesMembers.axisTypes,colorKey:s.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:s.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:r,specialGroup:"group",trackerGroups:s.seriesMembers.trackerGroups,alignDataLabel:d.prototype.alignDataLabel,colorAttribs:s.seriesMembers.colorAttribs,getSymbol:g.prototype.getSymbol}),s.compose(z),a.registerSeriesType("heatmap",z),z}),e(t,"masters/modules/heatmap.src.js",[t["Core/Globals.js"]],function(i){return i})})});var qu=ai((fA,uo)=>{"use strict";(function(n){typeof uo=="object"&&uo.exports?(n.default=n,uo.exports=n):typeof define=="function"&&define.amd?define("highcharts/highcharts-3d",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n(typeof Highcharts<"u"?Highcharts:void 0)})(function(n){"use strict";var t=n?n._modules:{};function e(i,s,r,o){i.hasOwnProperty(s)||(i[s]=o.apply(null,r),typeof CustomEvent=="function"&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:i[s]}})))}e(t,"Core/Math3D.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let{deg2rad:r}=i,{pick:o}=s;function a(c,g,d,p){let y=g.options.chart.options3d,b=o(p,!!d&&g.inverted),x={x:g.plotWidth/2,y:g.plotHeight/2,z:y.depth/2,vd:o(y.depth,1)*o(y.viewDistance,0)},f=g.scale3d||1,M=r*y.beta*(b?-1:1),L=r*y.alpha*(b?-1:1),_={cosA:Math.cos(L),cosB:Math.cos(-M),sinA:Math.sin(L),sinB:Math.sin(-M)};return d||(x.x+=g.plotLeft,x.y+=g.plotTop),c.map(function(w){var k,z,O;let C=(k=(b?w.y:w.x)-x.x,z=(b?w.x:w.y)-x.y,O=(w.z||0)-x.z,{x:_.cosB*k-_.sinB*O,y:-_.sinA*_.sinB*k+_.cosA*z-_.cosB*_.sinA*O,z:_.cosA*_.sinB*k+_.sinA*z+_.cosA*_.cosB*O}),A=l(C,x,x.vd);return A.x=A.x*f+x.x,A.y=A.y*f+x.y,A.z=C.z*f+x.z,{x:b?A.y:A.x,y:b?A.x:A.y,z:A.z}})}function l(c,g,d){let p=d>0&&d<Number.POSITIVE_INFINITY?d/(c.z+g.z+d):1;return{x:c.x*p,y:c.y*p}}function h(c){let g=0,d,p;for(d=0;d<c.length;d++)p=(d+1)%c.length,g+=c[d].x*c[p].y-c[p].x*c[d].y;return g/2}return{perspective:a,perspective3D:l,pointCameraDistance:function(c,g){let d=g.options.chart.options3d,p={x:g.plotWidth/2,y:g.plotHeight/2,z:o(d.depth,1)*o(d.viewDistance,0)+d.depth};return Math.sqrt(Math.pow(p.x-o(c.plotX,c.x),2)+Math.pow(p.y-o(c.plotY,c.y),2)+Math.pow(p.z-o(c.plotZ,c.z),2))},shapeArea:h,shapeArea3D:function(c,g,d){return h(a(c,g,d))}}}),e(t,"Core/Chart/Chart3D.js",[t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Math3D.js"],t["Core/Utilities.js"]],function(i,s,r,o){var a;let{parse:l}=i,{defaultOptions:h}=s,{perspective:c,shapeArea3D:g}=r,{addEvent:d,isArray:p,merge:y,pick:b,wrap:x}=o;return function(f){function M(D){this.is3d()&&D.options.type==="scatter"&&(D.options.type="scatter3d")}function L(){if(this.chart3d&&this.is3d()){let D=this.renderer,P=this.options.chart.options3d,m=this.chart3d.get3dFrame(),u=this.plotLeft,v=this.plotLeft+this.plotWidth,I=this.plotTop,E=this.plotTop+this.plotHeight,R=P.depth,j=u-(m.left.visible?m.left.size:0),G=v+(m.right.visible?m.right.size:0),W=I-(m.top.visible?m.top.size:0),N=E+(m.bottom.visible?m.bottom.size:0),B=0-(m.front.visible?m.front.size:0),X=R+(m.back.visible?m.back.size:0),V=this.hasRendered?"animate":"attr";this.chart3d.frame3d=m,this.frameShapes||(this.frameShapes={bottom:D.polyhedron().add(),top:D.polyhedron().add(),left:D.polyhedron().add(),right:D.polyhedron().add(),back:D.polyhedron().add(),front:D.polyhedron().add()}),this.frameShapes.bottom[V]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:m.bottom.frontFacing?-1e3:1e3,faces:[{fill:l(m.bottom.color).brighten(.1).get(),vertexes:[{x:j,y:N,z:B},{x:G,y:N,z:B},{x:G,y:N,z:X},{x:j,y:N,z:X}],enabled:m.bottom.visible},{fill:l(m.bottom.color).brighten(.1).get(),vertexes:[{x:u,y:E,z:R},{x:v,y:E,z:R},{x:v,y:E,z:0},{x:u,y:E,z:0}],enabled:m.bottom.visible},{fill:l(m.bottom.color).brighten(-.1).get(),vertexes:[{x:j,y:N,z:B},{x:j,y:N,z:X},{x:u,y:E,z:R},{x:u,y:E,z:0}],enabled:m.bottom.visible&&!m.left.visible},{fill:l(m.bottom.color).brighten(-.1).get(),vertexes:[{x:G,y:N,z:X},{x:G,y:N,z:B},{x:v,y:E,z:0},{x:v,y:E,z:R}],enabled:m.bottom.visible&&!m.right.visible},{fill:l(m.bottom.color).get(),vertexes:[{x:G,y:N,z:B},{x:j,y:N,z:B},{x:u,y:E,z:0},{x:v,y:E,z:0}],enabled:m.bottom.visible&&!m.front.visible},{fill:l(m.bottom.color).get(),vertexes:[{x:j,y:N,z:X},{x:G,y:N,z:X},{x:v,y:E,z:R},{x:u,y:E,z:R}],enabled:m.bottom.visible&&!m.back.visible}]}),this.frameShapes.top[V]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:m.top.frontFacing?-1e3:1e3,faces:[{fill:l(m.top.color).brighten(.1).get(),vertexes:[{x:j,y:W,z:X},{x:G,y:W,z:X},{x:G,y:W,z:B},{x:j,y:W,z:B}],enabled:m.top.visible},{fill:l(m.top.color).brighten(.1).get(),vertexes:[{x:u,y:I,z:0},{x:v,y:I,z:0},{x:v,y:I,z:R},{x:u,y:I,z:R}],enabled:m.top.visible},{fill:l(m.top.color).brighten(-.1).get(),vertexes:[{x:j,y:W,z:X},{x:j,y:W,z:B},{x:u,y:I,z:0},{x:u,y:I,z:R}],enabled:m.top.visible&&!m.left.visible},{fill:l(m.top.color).brighten(-.1).get(),vertexes:[{x:G,y:W,z:B},{x:G,y:W,z:X},{x:v,y:I,z:R},{x:v,y:I,z:0}],enabled:m.top.visible&&!m.right.visible},{fill:l(m.top.color).get(),vertexes:[{x:j,y:W,z:B},{x:G,y:W,z:B},{x:v,y:I,z:0},{x:u,y:I,z:0}],enabled:m.top.visible&&!m.front.visible},{fill:l(m.top.color).get(),vertexes:[{x:G,y:W,z:X},{x:j,y:W,z:X},{x:u,y:I,z:R},{x:v,y:I,z:R}],enabled:m.top.visible&&!m.back.visible}]}),this.frameShapes.left[V]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:m.left.frontFacing?-1e3:1e3,faces:[{fill:l(m.left.color).brighten(.1).get(),vertexes:[{x:j,y:N,z:B},{x:u,y:E,z:0},{x:u,y:E,z:R},{x:j,y:N,z:X}],enabled:m.left.visible&&!m.bottom.visible},{fill:l(m.left.color).brighten(.1).get(),vertexes:[{x:j,y:W,z:X},{x:u,y:I,z:R},{x:u,y:I,z:0},{x:j,y:W,z:B}],enabled:m.left.visible&&!m.top.visible},{fill:l(m.left.color).brighten(-.1).get(),vertexes:[{x:j,y:N,z:X},{x:j,y:W,z:X},{x:j,y:W,z:B},{x:j,y:N,z:B}],enabled:m.left.visible},{fill:l(m.left.color).brighten(-.1).get(),vertexes:[{x:u,y:I,z:R},{x:u,y:E,z:R},{x:u,y:E,z:0},{x:u,y:I,z:0}],enabled:m.left.visible},{fill:l(m.left.color).get(),vertexes:[{x:j,y:N,z:B},{x:j,y:W,z:B},{x:u,y:I,z:0},{x:u,y:E,z:0}],enabled:m.left.visible&&!m.front.visible},{fill:l(m.left.color).get(),vertexes:[{x:j,y:W,z:X},{x:j,y:N,z:X},{x:u,y:E,z:R},{x:u,y:I,z:R}],enabled:m.left.visible&&!m.back.visible}]}),this.frameShapes.right[V]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:m.right.frontFacing?-1e3:1e3,faces:[{fill:l(m.right.color).brighten(.1).get(),vertexes:[{x:G,y:N,z:X},{x:v,y:E,z:R},{x:v,y:E,z:0},{x:G,y:N,z:B}],enabled:m.right.visible&&!m.bottom.visible},{fill:l(m.right.color).brighten(.1).get(),vertexes:[{x:G,y:W,z:B},{x:v,y:I,z:0},{x:v,y:I,z:R},{x:G,y:W,z:X}],enabled:m.right.visible&&!m.top.visible},{fill:l(m.right.color).brighten(-.1).get(),vertexes:[{x:v,y:I,z:0},{x:v,y:E,z:0},{x:v,y:E,z:R},{x:v,y:I,z:R}],enabled:m.right.visible},{fill:l(m.right.color).brighten(-.1).get(),vertexes:[{x:G,y:N,z:B},{x:G,y:W,z:B},{x:G,y:W,z:X},{x:G,y:N,z:X}],enabled:m.right.visible},{fill:l(m.right.color).get(),vertexes:[{x:G,y:W,z:B},{x:G,y:N,z:B},{x:v,y:E,z:0},{x:v,y:I,z:0}],enabled:m.right.visible&&!m.front.visible},{fill:l(m.right.color).get(),vertexes:[{x:G,y:N,z:X},{x:G,y:W,z:X},{x:v,y:I,z:R},{x:v,y:E,z:R}],enabled:m.right.visible&&!m.back.visible}]}),this.frameShapes.back[V]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:m.back.frontFacing?-1e3:1e3,faces:[{fill:l(m.back.color).brighten(.1).get(),vertexes:[{x:G,y:N,z:X},{x:j,y:N,z:X},{x:u,y:E,z:R},{x:v,y:E,z:R}],enabled:m.back.visible&&!m.bottom.visible},{fill:l(m.back.color).brighten(.1).get(),vertexes:[{x:j,y:W,z:X},{x:G,y:W,z:X},{x:v,y:I,z:R},{x:u,y:I,z:R}],enabled:m.back.visible&&!m.top.visible},{fill:l(m.back.color).brighten(-.1).get(),vertexes:[{x:j,y:N,z:X},{x:j,y:W,z:X},{x:u,y:I,z:R},{x:u,y:E,z:R}],enabled:m.back.visible&&!m.left.visible},{fill:l(m.back.color).brighten(-.1).get(),vertexes:[{x:G,y:W,z:X},{x:G,y:N,z:X},{x:v,y:E,z:R},{x:v,y:I,z:R}],enabled:m.back.visible&&!m.right.visible},{fill:l(m.back.color).get(),vertexes:[{x:u,y:I,z:R},{x:v,y:I,z:R},{x:v,y:E,z:R},{x:u,y:E,z:R}],enabled:m.back.visible},{fill:l(m.back.color).get(),vertexes:[{x:j,y:N,z:X},{x:G,y:N,z:X},{x:G,y:W,z:X},{x:j,y:W,z:X}],enabled:m.back.visible}]}),this.frameShapes.front[V]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:m.front.frontFacing?-1e3:1e3,faces:[{fill:l(m.front.color).brighten(.1).get(),vertexes:[{x:j,y:N,z:B},{x:G,y:N,z:B},{x:v,y:E,z:0},{x:u,y:E,z:0}],enabled:m.front.visible&&!m.bottom.visible},{fill:l(m.front.color).brighten(.1).get(),vertexes:[{x:G,y:W,z:B},{x:j,y:W,z:B},{x:u,y:I,z:0},{x:v,y:I,z:0}],enabled:m.front.visible&&!m.top.visible},{fill:l(m.front.color).brighten(-.1).get(),vertexes:[{x:j,y:W,z:B},{x:j,y:N,z:B},{x:u,y:E,z:0},{x:u,y:I,z:0}],enabled:m.front.visible&&!m.left.visible},{fill:l(m.front.color).brighten(-.1).get(),vertexes:[{x:G,y:N,z:B},{x:G,y:W,z:B},{x:v,y:I,z:0},{x:v,y:E,z:0}],enabled:m.front.visible&&!m.right.visible},{fill:l(m.front.color).get(),vertexes:[{x:v,y:I,z:0},{x:u,y:I,z:0},{x:u,y:E,z:0},{x:v,y:E,z:0}],enabled:m.front.visible},{fill:l(m.front.color).get(),vertexes:[{x:G,y:N,z:B},{x:j,y:N,z:B},{x:j,y:W,z:B},{x:G,y:W,z:B}],enabled:m.front.visible}]})}}function _(){this.styledMode&&[{name:"darker",slope:.6},{name:"brighter",slope:1.4}].forEach(function(D){this.renderer.definition({tagName:"filter",attributes:{id:"highcharts-"+D.name},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",attributes:{type:"linear",slope:D.slope}},{tagName:"feFuncG",attributes:{type:"linear",slope:D.slope}},{tagName:"feFuncB",attributes:{type:"linear",slope:D.slope}}]}]})},this)}function w(){let D=this.options;this.is3d()&&(D.series||[]).forEach(function(P){(P.type||D.chart.type||D.chart.defaultSeriesType)==="scatter"&&(P.type="scatter3d")})}function k(){let D=this.options.chart.options3d;if(this.chart3d&&this.is3d()){D&&(D.alpha=D.alpha%360+(D.alpha>=0?0:360),D.beta=D.beta%360+(D.beta>=0?0:360));let P=this.inverted,m=this.clipBox,u=this.margin;m[P?"y":"x"]=-(u[3]||0),m[P?"x":"y"]=-(u[0]||0),m[P?"height":"width"]=this.chartWidth+(u[3]||0)+(u[1]||0),m[P?"width":"height"]=this.chartHeight+(u[0]||0)+(u[2]||0),this.scale3d=1,D.fitToPlot===!0&&(this.scale3d=this.chart3d.getScale(D.depth)),this.chart3d.frame3d=this.chart3d.get3dFrame()}}function z(){this.is3d()&&(this.isDirtyBox=!0)}function O(){this.chart3d&&this.is3d()&&(this.chart3d.frame3d=this.chart3d.get3dFrame())}function C(){this.chart3d||(this.chart3d=new T(this))}function A(D){return this.is3d()||D.apply(this,[].slice.call(arguments,1))}function F(D){let P,m=this.series.length;if(this.is3d())for(;m--;)(P=this.series[m]).translate(),P.render();else D.call(this)}function S(D){D.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}f.defaultOptions={chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:null,frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}},f.compose=function(D,P){let m=D.prototype,u=P.prototype;m.is3d=function(){return!!this.options.chart.options3d?.enabled},m.propsRequireDirtyBox.push("chart.options3d"),m.propsRequireUpdateSeries.push("chart.options3d"),u.matrixSetter=function(){let v;if(this.pos<1&&(p(this.start)||p(this.end))){let I=this.start||[1,0,0,1,0,0],E=this.end||[1,0,0,1,0,0];v=[];for(let R=0;R<6;R++)v.push(this.pos*E[R]+(1-this.pos)*I[R])}else v=this.end;this.elem.attr(this.prop,v,null,!0)},y(!0,h,f.defaultOptions),d(D,"init",C),d(D,"addSeries",M),d(D,"afterDrawChartBox",L),d(D,"afterGetContainer",_),d(D,"afterInit",w),d(D,"afterSetChartSize",k),d(D,"beforeRedraw",z),d(D,"beforeRender",O),x(m,"isInsidePlot",A),x(m,"renderSeries",F),x(m,"setClassName",S)};class T{constructor(P){this.chart=P}get3dFrame(){let P=this.chart,m=P.options.chart.options3d,u=m.frame,v=P.plotLeft,I=P.plotLeft+P.plotWidth,E=P.plotTop,R=P.plotTop+P.plotHeight,j=m.depth,G=function(Q){let $=g(Q,P);return $>.5?1:$<-.5?-1:0},W=G([{x:v,y:R,z:j},{x:I,y:R,z:j},{x:I,y:R,z:0},{x:v,y:R,z:0}]),N=G([{x:v,y:E,z:0},{x:I,y:E,z:0},{x:I,y:E,z:j},{x:v,y:E,z:j}]),B=G([{x:v,y:E,z:0},{x:v,y:E,z:j},{x:v,y:R,z:j},{x:v,y:R,z:0}]),X=G([{x:I,y:E,z:j},{x:I,y:E,z:0},{x:I,y:R,z:0},{x:I,y:R,z:j}]),V=G([{x:v,y:R,z:0},{x:I,y:R,z:0},{x:I,y:E,z:0},{x:v,y:E,z:0}]),H=G([{x:v,y:E,z:j},{x:I,y:E,z:j},{x:I,y:R,z:j},{x:v,y:R,z:j}]),K=!1,U=!1,Y=!1,Z=!1;[].concat(P.xAxis,P.yAxis,P.zAxis).forEach(function(Q){Q&&(Q.horiz?Q.opposite?U=!0:K=!0:Q.opposite?Z=!0:Y=!0)});let q=function(Q,$,tt){let it=["size","color","visible"],et={};for(let rt=0;rt<it.length;rt++){let nt=it[rt];for(let ot=0;ot<Q.length;ot++)if(typeof Q[ot]=="object"){let at=Q[ot][nt];if(at!=null){et[nt]=at;break}}}let st=tt;return et.visible===!0||et.visible===!1?st=et.visible:et.visible==="auto"&&(st=$>0),{size:b(et.size,1),color:b(et.color,"none"),frontFacing:$>0,visible:st}},J={axes:{},bottom:q([u.bottom,u.top,u],W,K),top:q([u.top,u.bottom,u],N,U),left:q([u.left,u.right,u.side,u],B,Y),right:q([u.right,u.left,u.side,u],X,Z),back:q([u.back,u.front,u],H,!0),front:q([u.front,u.back,u],V,!1)};if(m.axisLabelPosition==="auto"){let Q=function(nt,ot){return nt.visible!==ot.visible||nt.visible&&ot.visible&&nt.frontFacing!==ot.frontFacing},$=[];Q(J.left,J.front)&&$.push({y:(E+R)/2,x:v,z:0,xDir:{x:1,y:0,z:0}}),Q(J.left,J.back)&&$.push({y:(E+R)/2,x:v,z:j,xDir:{x:0,y:0,z:-1}}),Q(J.right,J.front)&&$.push({y:(E+R)/2,x:I,z:0,xDir:{x:0,y:0,z:1}}),Q(J.right,J.back)&&$.push({y:(E+R)/2,x:I,z:j,xDir:{x:-1,y:0,z:0}});let tt=[];Q(J.bottom,J.front)&&tt.push({x:(v+I)/2,y:R,z:0,xDir:{x:1,y:0,z:0}}),Q(J.bottom,J.back)&&tt.push({x:(v+I)/2,y:R,z:j,xDir:{x:-1,y:0,z:0}});let it=[];Q(J.top,J.front)&&it.push({x:(v+I)/2,y:E,z:0,xDir:{x:1,y:0,z:0}}),Q(J.top,J.back)&&it.push({x:(v+I)/2,y:E,z:j,xDir:{x:-1,y:0,z:0}});let et=[];Q(J.bottom,J.left)&&et.push({z:(0+j)/2,y:R,x:v,xDir:{x:0,y:0,z:-1}}),Q(J.bottom,J.right)&&et.push({z:(0+j)/2,y:R,x:I,xDir:{x:0,y:0,z:1}});let st=[];Q(J.top,J.left)&&st.push({z:(0+j)/2,y:E,x:v,xDir:{x:0,y:0,z:-1}}),Q(J.top,J.right)&&st.push({z:(0+j)/2,y:E,x:I,xDir:{x:0,y:0,z:1}});let rt=function(nt,ot,at){if(nt.length===0)return null;if(nt.length===1)return nt[0];let ct=c(nt,P,!1),ht=0;for(let lt=1;lt<ct.length;lt++)(at*ct[lt][ot]>at*ct[ht][ot]||at*ct[lt][ot]==at*ct[ht][ot]&&ct[lt].z<ct[ht].z)&&(ht=lt);return nt[ht]};J.axes={y:{left:rt($,"x",-1),right:rt($,"x",1)},x:{top:rt(it,"y",-1),bottom:rt(tt,"y",1)},z:{top:rt(st,"y",-1),bottom:rt(et,"y",1)}}}else J.axes={y:{left:{x:v,z:0,xDir:{x:1,y:0,z:0}},right:{x:I,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:E,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:R,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:Y?I:v,y:E,xDir:Y?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:Y?I:v,y:R,xDir:Y?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}};return J}getScale(P){let m=this.chart,u=m.plotLeft,v=m.plotWidth+u,I=m.plotTop,E=m.plotHeight+I,R=u+m.plotWidth/2,j=I+m.plotHeight/2,G={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE},W,N=1;return W=[{x:u,y:I,z:0},{x:u,y:I,z:P}],[0,1].forEach(function(B){W.push({x:v,y:W[B].y,z:W[B].z})}),[0,1,2,3].forEach(function(B){W.push({x:W[B].x,y:E,z:W[B].z})}),(W=c(W,m,!1)).forEach(function(B){G.minX=Math.min(G.minX,B.x),G.maxX=Math.max(G.maxX,B.x),G.minY=Math.min(G.minY,B.y),G.maxY=Math.max(G.maxY,B.y)}),u>G.minX&&(N=Math.min(N,1-Math.abs((u+R)/(G.minX+R))%1)),v<G.maxX&&(N=Math.min(N,(v-R)/(G.maxX-R))),I>G.minY&&(N=G.minY<0?Math.min(N,(I+j)/(-G.minY+I+j)):Math.min(N,1-(I+j)/(G.minY+j)%1)),E<G.maxY&&(N=Math.min(N,Math.abs((E-j)/(G.maxY-j)))),N}}f.Additions=T}(a||(a={})),a}),e(t,"Series/Area3D/Area3DSeries.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{composed:a}=i,{perspective:l}=s,{line:{prototype:h}}=r.seriesTypes,{pushUnique:c,wrap:g}=o;function d(p){let y=p.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d())return y;let b=h.getGraphPath,x=this.options,f=Math.round(this.yAxis.getThreshold(x.threshold)),M=[];if(this.rawPointsX)for(let w=0;w<this.points.length;w++)M.push({x:this.rawPointsX[w],y:x.stacking?this.points[w].yBottom:f,z:this.zPadding});let L=this.chart.options.chart.options3d;M=l(M,this.chart,!0).map(w=>({plotX:w.x,plotY:w.y,plotZ:w.z})),this.group&&L&&L.depth&&L.beta&&(this.markerGroup&&(this.markerGroup.add(this.group),this.markerGroup.attr({translateX:0,translateY:0})),this.group.attr({zIndex:Math.max(1,L.beta>270||L.beta<90?L.depth-Math.round(this.zPadding||0):Math.round(this.zPadding||0))})),M.reversed=!0;let _=b.call(this,M,!0,!0);if(_[0]&&_[0][0]==="M"&&(_[0]=["L",_[0][1],_[0][2]]),this.areaPath){let w=this.areaPath.splice(0,this.areaPath.length/2).concat(_);w.xMap=this.areaPath.xMap,this.areaPath=w}return this.graphPath=y,y}return{compose:function(p){c(a,"Area3DSeries")&&g(p.prototype,"getGraphPath",d)}}}),e(t,"Core/Axis/Axis3DDefaults.js",[],function(){return{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}}),e(t,"Core/Axis/Tick3DComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let{composed:r}=i,{addEvent:o,extend:a,pushUnique:l,wrap:h}=s;function c(d){let p=this.axis.axis3D;p&&a(d.pos,p.fix3dPosition(d.pos))}function g(d){let p=this.axis.axis3D,y=d.apply(this,[].slice.call(arguments,1));if(p){let b=y[0],x=y[1];if(b[0]==="M"&&x[0]==="L"){let f=[p.fix3dPosition({x:b[1],y:b[2],z:0}),p.fix3dPosition({x:x[1],y:x[2],z:0})];return this.axis.chart.renderer.toLineSegments(f)}}return y}return{compose:function(d){l(r,"Axis.Tick3D")&&(o(d,"afterGetLabelPosition",c),h(d.prototype,"getMarkPath",g))}}}),e(t,"Core/Axis/Axis3DComposition.js",[t["Core/Axis/Axis3DDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Axis/Tick3DComposition.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{defaultOptions:h}=s,{deg2rad:c}=r,{perspective:g,perspective3D:d,shapeArea:p}=o,{addEvent:y,merge:b,pick:x,wrap:f}=l;function M(){let F=this.chart,S=this.options;F.is3d&&F.is3d()&&this.coll!=="colorAxis"&&(S.tickWidth=x(S.tickWidth,0),S.gridLineWidth=x(S.gridLineWidth,1))}function L(F){this.chart.is3d()&&this.coll!=="colorAxis"&&F.point&&(F.point.crosshairPos=this.isXAxis?F.point.axisXpos:this.len-F.point.axisYpos)}function _(){this.axis3D||(this.axis3D=new A(this))}function w(F){return this.chart.is3d()&&this.coll!=="colorAxis"?[]:F.apply(this,[].slice.call(arguments,1))}function k(F){if(!this.chart.is3d()||this.coll==="colorAxis")return F.apply(this,[].slice.call(arguments,1));let S=arguments,T=S[1],D=S[2],P=[],m=this.getPlotLinePath({value:T}),u=this.getPlotLinePath({value:D});if(m&&u)for(let v=0;v<m.length;v+=2){let I=m[v],E=m[v+1],R=u[v],j=u[v+1];I[0]==="M"&&E[0]==="L"&&R[0]==="M"&&j[0]==="L"&&P.push(I,E,j,["L",R[1],R[2]],["Z"])}return P}function z(F){let S=this.axis3D,T=this.chart,D=F.apply(this,[].slice.call(arguments,1));if(this.coll==="colorAxis"||!T.chart3d||!T.is3d()||D===null)return D;let P=T.options.chart.options3d,m=this.isZAxis?T.plotWidth:P.depth,u=T.chart3d.frame3d,v=D[0],I=D[1],E,R=[];return v[0]==="M"&&I[0]==="L"&&(E=[S.swapZ({x:v[1],y:v[2],z:0}),S.swapZ({x:v[1],y:v[2],z:m}),S.swapZ({x:I[1],y:I[2],z:0}),S.swapZ({x:I[1],y:I[2],z:m})],this.horiz?(this.isZAxis?(u.left.visible&&R.push(E[0],E[2]),u.right.visible&&R.push(E[1],E[3])):(u.front.visible&&R.push(E[0],E[2]),u.back.visible&&R.push(E[1],E[3])),u.top.visible&&R.push(E[0],E[1]),u.bottom.visible&&R.push(E[2],E[3])):(u.front.visible&&R.push(E[0],E[2]),u.back.visible&&R.push(E[1],E[3]),u.left.visible&&R.push(E[0],E[1]),u.right.visible&&R.push(E[2],E[3])),R=g(R,this.chart,!1)),T.renderer.toLineSegments(R)}function O(F,S){let{chart:T,gridGroup:D,tickPositions:P,ticks:m}=this;if(this.categories&&T.frameShapes&&T.is3d()&&D&&S&&S.label){let u,v,I,E=D.element.childNodes[0].getBBox(),R=T.frameShapes.left.getBBox(),j=T.options.chart.options3d,G={x:T.plotWidth/2,y:T.plotHeight/2,z:j.depth/2,vd:x(j.depth,1)*x(j.viewDistance,0)},W=P.indexOf(S.pos),N=m[P[W-1]],B=m[P[W+1]];return N?.label?.xy&&(v=d({x:N.label.xy.x,y:N.label.xy.y,z:null},G,G.vd)),B&&B.label&&B.label.xy&&(I=d({x:B.label.xy.x,y:B.label.xy.y,z:null},G,G.vd)),u=d(u={x:S.label.xy.x,y:S.label.xy.y,z:null},G,G.vd),Math.abs(v?u.x-v.x:I?I.x-u.x:E.x-R.x)}return F.apply(this,[].slice.call(arguments,1))}function C(F){let S=F.apply(this,[].slice.call(arguments,1));return this.axis3D?this.axis3D.fix3dPosition(S,!0):S}class A{static compose(S,T){if(a.compose(T),!S.keepProps.includes("axis3D")){b(!0,h.xAxis,i),S.keepProps.push("axis3D"),y(S,"init",_),y(S,"afterSetOptions",M),y(S,"drawCrosshair",L);let D=S.prototype;f(D,"getLinePath",w),f(D,"getPlotBandPath",k),f(D,"getPlotLinePath",z),f(D,"getSlotWidth",O),f(D,"getTitlePosition",C)}}constructor(S){this.axis=S}fix3dPosition(S,T){let D=this.axis,P=D.chart;if(D.coll==="colorAxis"||!P.chart3d||!P.is3d())return S;let m=c*P.options.chart.options3d.alpha,u=c*P.options.chart.options3d.beta,v=x(T&&D.options.title.position3d,D.options.labels.position3d),I=x(T&&D.options.title.skew3d,D.options.labels.skew3d),E=P.chart3d.frame3d,R=P.plotLeft,j=P.plotWidth+R,G=P.plotTop,W=P.plotHeight+G,N=0,B=0,X,V={x:0,y:1,z:0},H=!1;if(S=D.axis3D.swapZ({x:S.x,y:S.y,z:0}),D.isZAxis)if(D.opposite){if(E.axes.z.top===null)return{};B=S.y-G,S.x=E.axes.z.top.x,S.y=E.axes.z.top.y,X=E.axes.z.top.xDir,H=!E.top.frontFacing}else{if(E.axes.z.bottom===null)return{};B=S.y-W,S.x=E.axes.z.bottom.x,S.y=E.axes.z.bottom.y,X=E.axes.z.bottom.xDir,H=!E.bottom.frontFacing}else if(D.horiz)if(D.opposite){if(E.axes.x.top===null)return{};B=S.y-G,S.y=E.axes.x.top.y,S.z=E.axes.x.top.z,X=E.axes.x.top.xDir,H=!E.top.frontFacing}else{if(E.axes.x.bottom===null)return{};B=S.y-W,S.y=E.axes.x.bottom.y,S.z=E.axes.x.bottom.z,X=E.axes.x.bottom.xDir,H=!E.bottom.frontFacing}else if(D.opposite){if(E.axes.y.right===null)return{};N=S.x-j,S.x=E.axes.y.right.x,S.z=E.axes.y.right.z,X={x:(X=E.axes.y.right.xDir).z,y:X.y,z:-X.x}}else{if(E.axes.y.left===null)return{};N=S.x-R,S.x=E.axes.y.left.x,S.z=E.axes.y.left.z,X=E.axes.y.left.xDir}if(v!=="chart")if(v==="flap")if(D.horiz){let U=Math.sin(m),Y=Math.cos(m);D.opposite&&(U=-U),H&&(U=-U),V={x:X.z*U,y:Y,z:-X.x*U}}else X={x:Math.cos(u),y:0,z:Math.sin(u)};else if(v==="ortho")if(D.horiz){let U=Math.sin(m),Y=Math.cos(m),Z={x:Math.sin(u)*Y,y:-U,z:-Y*Math.cos(u)},q=1/Math.sqrt((V={x:X.y*Z.z-X.z*Z.y,y:X.z*Z.x-X.x*Z.z,z:X.x*Z.y-X.y*Z.x}).x*V.x+V.y*V.y+V.z*V.z);H&&(q=-q),V={x:q*V.x,y:q*V.y,z:q*V.z}}else X={x:Math.cos(u),y:0,z:Math.sin(u)};else D.horiz?V={x:Math.sin(u)*Math.sin(m),y:Math.cos(m),z:-Math.cos(u)*Math.sin(m)}:X={x:Math.cos(u),y:0,z:Math.sin(u)};S.x+=N*X.x+B*V.x,S.y+=N*X.y+B*V.y,S.z+=N*X.z+B*V.z;let K=g([S],D.chart)[0];if(I){0>p(g([S,{x:S.x+X.x,y:S.y+X.y,z:S.z+X.z},{x:S.x+V.x,y:S.y+V.y,z:S.z+V.z}],D.chart))&&(X={x:-X.x,y:-X.y,z:-X.z});let U=g([{x:S.x,y:S.y,z:S.z},{x:S.x+X.x,y:S.y+X.y,z:S.z+X.z},{x:S.x+V.x,y:S.y+V.y,z:S.z+V.z}],D.chart);K.matrix=[U[1].x-U[0].x,U[1].y-U[0].y,U[2].x-U[0].x,U[2].y-U[0].y,K.x,K.y],K.matrix[4]-=K.x*K.matrix[0]+K.y*K.matrix[2],K.matrix[5]-=K.x*K.matrix[1]+K.y*K.matrix[3]}return K}swapZ(S,T){let D=this.axis;if(D.isZAxis){let P=T?0:D.chart.plotLeft;return{x:P+S.z,y:S.y,z:S.x-P}}return S}}return A}),e(t,"Core/Series/Series3D.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{composed:a}=i,{perspective:l}=s,{addEvent:h,extend:c,isNumber:g,merge:d,pick:p,pushUnique:y}=o;class b extends r{static compose(f){y(a,"Core.Series3D")&&(h(f,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),c(f.prototype,{translate3dPoints:b.prototype.translate3dPoints}))}translate3dPoints(){let f,M,L=this,_=L.options,w=L.chart,k=p(L.zAxis,w.options.zAxis[0]),z=[],O=[],C=_.stacking?g(_.stack)?_.stack:0:L.index||0;L.zPadding=C*(_.depth||0+(_.groupZPadding||1)),L.data.forEach(F=>{k&&k.translate?(M=k.logarithmic&&k.val2lin?k.val2lin(F.z):F.z,F.plotZ=k.translate(M),F.isInside=!!F.isInside&&M>=k.min&&M<=k.max):F.plotZ=L.zPadding,F.axisXpos=F.plotX,F.axisYpos=F.plotY,F.axisZpos=F.plotZ,z.push({x:F.plotX,y:F.plotY,z:F.plotZ}),O.push(F.plotX||0)}),L.rawPointsX=O;let A=l(z,w,!0);L.data.forEach((F,S)=>{f=A[S],F.plotX=f.x,F.plotY=f.y,F.plotZ=f.z})}}return b.defaultOptions=d(r.defaultOptions),b}),e(t,"Core/Renderer/SVG/SVGElement3D.js",[t["Core/Color/Color.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{parse:o}=i,{Element:a}=s.getRendererType().prototype,{defined:l,pick:h}=r;class c extends a{constructor(){super(...arguments),this.parts=["front","top","side"],this.pathType="cuboid"}initArgs(d){let p=this.renderer,y=p[this.pathType+"Path"](d),b=y.zIndexes;for(let x of this.parts){let f={class:"highcharts-3d-"+x,zIndex:b[x]||0};p.styledMode&&(x==="top"?f.filter="url(#highcharts-brighter)":x==="side"&&(f.filter="url(#highcharts-darker)")),this[x]=p.path(y[x]).attr(f).add(this)}this.attr({"stroke-linejoin":"round",zIndex:b.group}),this.forcedSides=y.forcedSides}singleSetterForParts(d,p,y,b,x,f){let M={},L=[null,null,b||"attr",x,f],_=y&&y.zIndexes;if(y){for(let w of(_&&_.group&&this.attr({zIndex:_.group}),Object.keys(y)))M[w]={},M[w][d]=y[w],_&&(M[w].zIndex=y.zIndexes[w]||0);L[1]=M}else M[d]=p,L[0]=M;return this.processParts.apply(this,L)}processParts(d,p,y,b,x){for(let f of this.parts)p&&(d=h(p[f],!1)),d!==!1&&this[f][y](d,b,x);return this}destroy(){return this.processParts(null,null,"destroy"),super.destroy()}attr(d,p,y,b){if(typeof d=="string"&&p!==void 0){let x=d;(d={})[x]=p}return d.shapeArgs||l(d.x)?this.singleSetterForParts("d",null,this.renderer[this.pathType+"Path"](d.shapeArgs||d)):super.attr(d,void 0,y,b)}animate(d,p,y){if(l(d.x)&&l(d.y)){let b=this.renderer[this.pathType+"Path"](d),x=b.forcedSides;this.singleSetterForParts("d",null,b,"animate",p,y),this.attr({zIndex:b.zIndexes.group}),x===this.forcedSides||(this.forcedSides=x,this.renderer.styledMode||this.fillSetter(this.fill))}else super.animate(d,p,y);return this}fillSetter(d){return this.forcedSides=this.forcedSides||[],this.singleSetterForParts("fill",null,{front:d,top:o(d).brighten(this.forcedSides.indexOf("top")>=0?0:.1).get(),side:o(d).brighten(this.forcedSides.indexOf("side")>=0?0:-.1).get()}),this.color=this.fill=d,this}}return c.types={base:c,cuboid:c},c}),e(t,"Core/Renderer/SVG/SVGRenderer3D.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Renderer/SVG/SVGElement3D.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){var h;let{animObject:c}=i,{parse:g}=s,{charts:d,deg2rad:p}=r,{perspective:y,shapeArea:b}=o,{defined:x,extend:f,merge:M,pick:L}=l,_=Math.cos,w=Math.sin,k=Math.PI,z=4*(Math.sqrt(2)-1)/3/(k/2);function O(C,A,F,S,T,D,P,m){let u=D-T,v=[];return D>T&&D-T>Math.PI/2+1e-4?v=(v=v.concat(O(C,A,F,S,T,T+Math.PI/2,P,m))).concat(O(C,A,F,S,T+Math.PI/2,D,P,m)):D<T&&T-D>Math.PI/2+1e-4?v=(v=v.concat(O(C,A,F,S,T,T-Math.PI/2,P,m))).concat(O(C,A,F,S,T-Math.PI/2,D,P,m)):[["C",C+F*Math.cos(T)-F*z*u*Math.sin(T)+P,A+S*Math.sin(T)+S*z*u*Math.cos(T)+m,C+F*Math.cos(D)+F*z*u*Math.sin(D)+P,A+S*Math.sin(D)-S*z*u*Math.cos(D)+m,C+F*Math.cos(D)+P,A+S*Math.sin(D)+m]]}return function(C){function A(I,E){let R=[];for(let j of I)R.push(["L",j.x,j.y]);return I.length&&(R[0][0]="M",E&&R.push(["Z"])),R}function F(I){let E=[],R=!0;for(let j of I)E.push(R?["M",j.x,j.y]:["L",j.x,j.y]),R=!R;return E}function S(I){let E=this,R=E.Element.prototype,j=E.createElement("path");return j.vertexes=[],j.insidePlotArea=!1,j.enabled=!0,j.attr=function(G){if(typeof G=="object"&&(x(G.enabled)||x(G.vertexes)||x(G.insidePlotArea))){this.enabled=L(G.enabled,this.enabled),this.vertexes=L(G.vertexes,this.vertexes),this.insidePlotArea=L(G.insidePlotArea,this.insidePlotArea),delete G.enabled,delete G.vertexes,delete G.insidePlotArea;let W=d[E.chartIndex],N=y(this.vertexes,W,this.insidePlotArea),B=E.toLinePath(N,!0),X=b(N);G.d=B,G.visibility=this.enabled&&X>0?"inherit":"hidden"}return R.attr.apply(this,arguments)},j.animate=function(G){if(typeof G=="object"&&(x(G.enabled)||x(G.vertexes)||x(G.insidePlotArea))){this.enabled=L(G.enabled,this.enabled),this.vertexes=L(G.vertexes,this.vertexes),this.insidePlotArea=L(G.insidePlotArea,this.insidePlotArea),delete G.enabled,delete G.vertexes,delete G.insidePlotArea;let W=d[E.chartIndex],N=y(this.vertexes,W,this.insidePlotArea),B=E.toLinePath(N,!0),X=b(N),V=this.enabled&&X>0?"visible":"hidden";G.d=B,this.attr("visibility",V)}return R.animate.apply(this,arguments)},j.attr(I)}function T(I){let E=this,R=E.Element.prototype,j=E.g(),G=j.destroy;return this.styledMode||j.attr({"stroke-linejoin":"round"}),j.faces=[],j.destroy=function(){for(let W=0;W<j.faces.length;W++)j.faces[W].destroy();return G.call(this)},j.attr=function(W,N,B,X){if(typeof W=="object"&&x(W.faces)){for(;j.faces.length>W.faces.length;)j.faces.pop().destroy();for(;j.faces.length<W.faces.length;)j.faces.push(E.face3d().add(j));for(let V=0;V<W.faces.length;V++)E.styledMode&&delete W.faces[V].fill,j.faces[V].attr(W.faces[V],null,B,X);delete W.faces}return R.attr.apply(this,arguments)},j.animate=function(W,N,B){if(W&&W.faces){for(;j.faces.length>W.faces.length;)j.faces.pop().destroy();for(;j.faces.length<W.faces.length;)j.faces.push(E.face3d().add(j));for(let X=0;X<W.faces.length;X++)j.faces[X].animate(W.faces[X],N,B);delete W.faces}return R.animate.apply(this,arguments)},j.attr(I)}function D(I,E){let R=new a.types[I](this,"g");return R.initArgs(E),R}function P(I){return this.element3d("cuboid",I)}function m(I){let E=I.x||0,R=I.y||0,j=I.z||0,G=I.height||0,W=I.width||0,N=I.depth||0,B=d[this.chartIndex],X=B.options.chart.options3d.alpha,V=[],H,K=0,U=[{x:E,y:R,z:j},{x:E+W,y:R,z:j},{x:E+W,y:R+G,z:j},{x:E,y:R+G,z:j},{x:E,y:R+G,z:j+N},{x:E+W,y:R+G,z:j+N},{x:E+W,y:R,z:j+N},{x:E,y:R,z:j+N}];U=y(U,B,I.insidePlotArea);let Y=st=>G===0&&st>1&&st<6?{x:U[st].x,y:U[st].y+10,z:U[st].z}:U[0].x===U[7].x&&st>=4?{x:U[st].x+10,y:U[st].y,z:U[st].z}:N===0&&st<2||st>5?{x:U[st].x,y:U[st].y,z:U[st].z+10}:U[st],Z=st=>U[st],q=(st,rt,nt)=>{let ot=st.map(Z),at=rt.map(Z),ct=st.map(Y),ht=rt.map(Y),lt=[[],-1];return 0>b(ot)?lt=[ot,0]:0>b(at)?lt=[at,1]:nt&&(V.push(nt),lt=0>b(ct)?[ot,0]:0>b(ht)?[at,1]:[ot,0]),lt},J=(H=q([3,2,1,0],[7,6,5,4],"front"))[0],Q=H[1],$=(H=q([1,6,7,0],[4,5,2,3],"top"))[0],tt=H[1],it=(H=q([1,2,5,6],[0,7,4,3],"side"))[0],et=H[1];return et===1?K+=1e6*(B.plotWidth-E):et||(K+=1e6*E),K+=10*(!tt||X>=0&&X<=180||X<360&&X>357.5?B.plotHeight-R:10+R),Q===1?K+=100*j:Q||(K+=100*(1e3-j)),{front:this.toLinePath(J,!0),top:this.toLinePath($,!0),side:this.toLinePath(it,!0),zIndexes:{group:Math.round(K)},forcedSides:V,isFront:Q,isTop:tt}}function u(I){let E=this.g(),R=this.Element.prototype,j=["x","y","r","innerR","start","end","depth"];function G(W){let N={},B=!1,X;for(X in W=M(W))j.indexOf(X)!==-1&&(N[X]=W[X],delete W[X],B=!0);return!!B&&[N,W]}for(let W of((I=M(I)).alpha=(I.alpha||0)*p,I.beta=(I.beta||0)*p,E.top=this.path(),E.side1=this.path(),E.side2=this.path(),E.inn=this.path(),E.out=this.path(),E.onAdd=function(){let N=E.parentGroup,B=E.attr("class");for(let X of(E.top.add(E),["out","inn","side1","side2"]))E[X].attr({class:B+" highcharts-3d-side"}).add(N)},["addClass","removeClass"]))E[W]=function(){let N=arguments;for(let B of["top","out","inn","side1","side2"])E[B][W].apply(E[B],N)};for(let W of(E.setPaths=function(N){let B=E.renderer.arc3dPath(N),X=100*B.zTop;E.attribs=N,E.top.attr({d:B.top,zIndex:B.zTop}),E.inn.attr({d:B.inn,zIndex:B.zInn}),E.out.attr({d:B.out,zIndex:B.zOut}),E.side1.attr({d:B.side1,zIndex:B.zSide1}),E.side2.attr({d:B.side2,zIndex:B.zSide2}),E.zIndex=X,E.attr({zIndex:X}),N.center&&(E.top.setRadialReference(N.center),delete N.center)},E.setPaths(I),E.fillSetter=function(N){let B=g(N).brighten(-.1).get();return this.fill=N,this.side1.attr({fill:B}),this.side2.attr({fill:B}),this.inn.attr({fill:B}),this.out.attr({fill:B}),this.top.attr({fill:N}),this},["opacity","translateX","translateY","visibility"]))E[W+"Setter"]=function(N,B){for(let X of(E[B]=N,["out","inn","side1","side2","top"]))E[X].attr(B,N)};return E.attr=function(W){let N,B;return typeof W=="object"&&(B=G(W))&&(N=B[0],arguments[0]=B[1],f(E.attribs,N),E.setPaths(E.attribs)),R.attr.apply(E,arguments)},E.animate=function(W,N,B){let X,V,H=this.attribs,K="data-"+Math.random().toString(26).substring(2,9);delete W.center,delete W.z,delete W.alpha,delete W.beta;let U=c(L(N,this.renderer.globalAnimation));return U.duration&&(X=G(W),E[K]=0,W[K]=1,E[K+"Setter"]=r.noop,X&&(V=X[0],U.step=function(Y,Z){let q=J=>H[J]+(L(V[J],H[J])-H[J])*Z.pos;Z.prop===K&&Z.elem.setPaths(M(H,{x:q("x"),y:q("y"),r:q("r"),innerR:q("innerR"),start:q("start"),end:q("end"),depth:q("depth")}))}),N=U),R.animate.call(this,W,N,B)},E.destroy=function(){return this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),R.destroy.call(this)},E.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},E.show=function(W){this.top.show(W),this.out.show(W),this.inn.show(W),this.side1.show(W),this.side2.show(W)},E}function v(I){let E=I.x||0,R=I.y||0,j=I.start||0,G=(I.end||0)-1e-5,W=I.r||0,N=I.innerR||0,B=I.depth||0,X=I.alpha||0,V=I.beta||0,H=Math.cos(j),K=Math.sin(j),U=Math.cos(G),Y=Math.sin(G),Z=W*Math.cos(V),q=W*Math.cos(X),J=N*Math.cos(V),Q=N*Math.cos(X),$=B*Math.sin(V),tt=B*Math.sin(X),it=[["M",E+Z*H,R+q*K]];(it=it.concat(O(E,R,Z,q,j,G,0,0))).push(["L",E+J*U,R+Q*Y]),(it=it.concat(O(E,R,J,Q,G,j,0,0))).push(["Z"]);let et=V>0?Math.PI/2:0,st=X>0?0:Math.PI/2,rt=j>-et?j:G>-et?-et:j,nt=G<k-st?G:j<k-st?k-st:G,ot=2*k-st,at=[["M",E+Z*_(rt),R+q*w(rt)]];at=at.concat(O(E,R,Z,q,rt,nt,0,0)),G>ot&&j<ot?(at.push(["L",E+Z*_(nt)+$,R+q*w(nt)+tt]),(at=at.concat(O(E,R,Z,q,nt,ot,$,tt))).push(["L",E+Z*_(ot),R+q*w(ot)]),(at=at.concat(O(E,R,Z,q,ot,G,0,0))).push(["L",E+Z*_(G)+$,R+q*w(G)+tt]),(at=at.concat(O(E,R,Z,q,G,ot,$,tt))).push(["L",E+Z*_(ot),R+q*w(ot)]),at=at.concat(O(E,R,Z,q,ot,nt,0,0))):G>k-st&&j<k-st&&(at.push(["L",E+Z*Math.cos(nt)+$,R+q*Math.sin(nt)+tt]),(at=at.concat(O(E,R,Z,q,nt,G,$,tt))).push(["L",E+Z*Math.cos(G),R+q*Math.sin(G)]),at=at.concat(O(E,R,Z,q,G,nt,0,0))),at.push(["L",E+Z*Math.cos(nt)+$,R+q*Math.sin(nt)+tt]),(at=at.concat(O(E,R,Z,q,nt,rt,$,tt))).push(["Z"]);let ct=[["M",E+J*H,R+Q*K]];(ct=ct.concat(O(E,R,J,Q,j,G,0,0))).push(["L",E+J*Math.cos(G)+$,R+Q*Math.sin(G)+tt]),(ct=ct.concat(O(E,R,J,Q,G,j,$,tt))).push(["Z"]);let ht=[["M",E+Z*H,R+q*K],["L",E+Z*H+$,R+q*K+tt],["L",E+J*H+$,R+Q*K+tt],["L",E+J*H,R+Q*K],["Z"]],lt=[["M",E+Z*U,R+q*Y],["L",E+Z*U+$,R+q*Y+tt],["L",E+J*U+$,R+Q*Y+tt],["L",E+J*U,R+Q*Y],["Z"]],yt=Math.atan2(tt,-$),Et=Math.abs(G+yt),dt=Math.abs(j+yt),St=Math.abs((j+G)/2+yt);function mt(se){return(se%=2*Math.PI)>Math.PI&&(se=2*Math.PI-se),se}Et=mt(Et),dt=mt(dt);let Pt=1e5*(St=mt(St)),Yt=1e5*dt,xe=1e5*Et;return{top:it,zTop:1e5*Math.PI+1,out:at,zOut:Math.max(Pt,Yt,xe),inn:ct,zInn:Math.max(Pt,Yt,xe),side1:ht,zSide1:.99*xe,side2:lt,zSide2:.99*Yt}}C.compose=function(I){let E=I.prototype;E.element3d||f(E,{Element3D:a,arc3d:u,arc3dPath:v,cuboid:P,cuboidPath:m,element3d:D,face3d:S,polyhedron:T,toLinePath:A,toLineSegments:F})}}(h||(h={})),h}),e(t,"Core/Axis/ZAxis.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(i,s,r){let{defaultOptions:o}=s,{addEvent:a,merge:l,pick:h,splat:c}=r;function g(y){return new p(this,y)}function d(){let y=this.options.zAxis=c(this.options.zAxis||{});this.is3d()&&(this.zAxis=[],y.forEach(b=>{this.addZAxis(b).setScale()}))}class p extends i{constructor(){super(...arguments),this.isZAxis=!0}static compose(b){let x=b.prototype;x.addZAxis||(o.zAxis=l(o.xAxis,{offset:0,lineWidth:0}),x.addZAxis=g,x.collectionsWithInit.zAxis=[x.addZAxis],x.collectionsWithUpdate.push("zAxis"),a(b,"afterGetAxes",d))}init(b,x){this.isZAxis=!0,super.init(b,x,"zAxis")}getSeriesExtremes(){this.hasVisibleSeries=!1,this.dataMin=this.dataMax=this.ignoreMinPadding=this.ignoreMaxPadding=void 0,this.stacking&&this.stacking.buildStacks(),this.series.forEach(b=>{if(b.reserveSpace()){let x=b.options.threshold;this.hasVisibleSeries=!0,this.positiveValuesOnly&&x<=0&&(x=void 0);let f=b.zData;f.length&&(this.dataMin=Math.min(h(this.dataMin,f[0]),Math.min.apply(null,f)),this.dataMax=Math.max(h(this.dataMax,f[0]),Math.max.apply(null,f)))}})}setAxisSize(){let b=this.chart;super.setAxisSize(),this.width=this.len=b.options.chart.options3d&&b.options.chart.options3d.depth||0,this.right=b.chartWidth-this.width-this.left}}return p}),e(t,"Series/Column3D/Column3DComposition.js",[t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Utilities.js"]],function(i,s,r){let{composed:o}=i,{perspective:a}=s,{addEvent:l,extend:h,pick:c,pushUnique:g,wrap:d}=r;function p(){let C=this.chart,A=this.options,F=A.depth,S=(A.stacking?A.stack||0:this.index)*(F+(A.groupZPadding||1)),T=this.borderWidth%2?.5:0,D;for(let P of(C.inverted&&!this.yAxis.reversed&&(T*=-1),A.grouping!==!1&&(S=0),S+=A.groupZPadding||1,this.points))if(P.outside3dPlot=null,P.y!==null){let m,u=h({x:0,y:0,width:0,height:0},P.shapeArgs||{}),v=[["x","width"],["y","height"]],I=P.tooltipPos;for(let E of v)if((m=u[E[0]]-T)<0&&(u[E[1]]+=u[E[0]]+T,u[E[0]]=-T,m=0),m+u[E[1]]>this[E[0]+"Axis"].len&&u[E[1]]!==0&&(u[E[1]]=this[E[0]+"Axis"].len-u[E[0]]),u[E[1]]!==0&&(u[E[0]]>=this[E[0]+"Axis"].len||u[E[0]]+u[E[1]]<=T)){for(let R in u)u[R]=R==="y"?-9999:0;P.outside3dPlot=!0}if(P.shapeType==="roundedRect"&&(P.shapeType="cuboid"),P.shapeArgs=h(u,{z:S,depth:F,insidePlotArea:!0}),D={x:u.x+u.width/2,y:u.y,z:S+F/2},C.inverted&&(D.x=u.height,D.y=P.clientX||0),P.axisXpos=D.x,P.axisYpos=D.y,P.axisZpos=D.z,P.plot3d=a([D],C,!0,!1)[0],I){let E=a([{x:I[0],y:I[1],z:S+F/2}],C,!0,!1)[0];P.tooltipPos=[E.x,E.y]}}this.z=S}function y(){if(this.chart.is3d()){let C=this.options,A=C.grouping,F=C.stacking,S=this.yAxis.options.reversedStacks,T=0;if(!(A!==void 0&&!A)){let D,P=function(u,v){let I=u.series,E={totalStacks:0},R,j=1;return I.forEach(function(G){E[R=c(G.options.stack,v?0:I.length-1-G.index)]?E[R].series.push(G):(E[R]={series:[G],position:j},j++)}),E.totalStacks=j+1,E}(this.chart,F),m=C.stack||0;for(D=0;D<P[m].series.length&&P[m].series[D]!==this;D++);T=10*(P.totalStacks-P[m].position)+(S?D:-D),this.xAxis.reversed||(T=10*P.totalStacks-T)}C.depth=C.depth||25,this.z=this.z||0,C.zIndex=T}}function b(C,...A){return this.series.chart.is3d()?this.graphic&&this.graphic.element.nodeName!=="g":C.apply(this,A)}function x(C){if(this.chart.is3d()){let A=arguments,F=A[1],S=this.yAxis,T=this.yAxis.reversed;if(F)for(let D of this.points)D.y===null||(D.height=D.shapeArgs.height,D.shapey=D.shapeArgs.y,D.shapeArgs.height=1,T||(D.stackY?D.shapeArgs.y=D.plotY+S.translate(D.stackY):D.shapeArgs.y=D.plotY+(D.negative?-D.height:D.height)));else{for(let D of this.points)D.y!==null&&(D.shapeArgs.height=D.height,D.shapeArgs.y=D.shapey,D.graphic&&D.graphic[D.outside3dPlot?"attr":"animate"](D.shapeArgs,this.options.animation));this.drawDataLabels()}}else C.apply(this,[].slice.call(arguments,1))}function f(C,A,F,S,T,D){return A!=="dataLabelsGroup"&&A!=="markerGroup"&&this.chart.is3d()&&(this[A]&&delete this[A],D&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(D)),this[A]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[A].survive=!0,A==="group"&&(arguments[3]="visible"))),C.apply(this,Array.prototype.slice.call(arguments,1))}function M(C){let A=C.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(A.stroke=this.options.edgeColor||A.fill,A["stroke-width"]=c(this.options.edgeWidth,1)),A}function L(C,A,F){let S=this.chart.is3d&&this.chart.is3d();S&&(this.options.inactiveOtherPoints=!0),C.call(this,A,F),S&&(this.options.inactiveOtherPoints=!1)}function _(C,A){if(this.chart.is3d())for(let F of this.points)F.visible=F.options.visible=A=A===void 0?!c(this.visible,F.visible):A,this.options.data[this.data.indexOf(F)]=F.options,F.graphic&&F.graphic.attr({visibility:A?"visible":"hidden"});C.apply(this,Array.prototype.slice.call(arguments,1))}function w(C){C.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}function k(C,A,F,S,T){let D=this.chart;if(S.outside3dPlot=A.outside3dPlot,D.is3d()&&this.is("column")){let P=this.options,m=c(S.inside,!!this.options.stacking),u=D.options.chart.options3d,v=A.pointWidth/2||0,I={x:T.x+v,y:T.y,z:this.z+P.depth/2};D.inverted&&(m&&(T.width=0,I.x+=A.shapeArgs.height/2),u.alpha>=90&&u.alpha<=270&&(I.y+=A.shapeArgs.width)),I=a([I],D,!0,!1)[0],T.x=I.x-v,T.y=A.outside3dPlot?-9e9:I.y}C.apply(this,[].slice.call(arguments,1))}function z(C){return!arguments[2].outside3dPlot&&C.apply(this,[].slice.call(arguments,1))}function O(C,A){let F=C.apply(this,[].slice.call(arguments,1)),S=this.axis.chart,{width:T}=A;if(S.is3d()&&this.base){let D=+this.base.split(",")[0],P=S.series[D],m=S.options.chart.options3d;if(P&&P.type==="column"){let u={x:F.x+(S.inverted?F.height:T/2),y:F.y,z:P.options.depth/2};S.inverted&&(F.width=0,m.alpha>=90&&m.alpha<=270&&(u.y+=T)),u=a([u],S,!0,!1)[0],F.x=u.x-T/2,F.y=u.y}}return F}return{compose:function(C,A){if(g(o,"Column3D")){let F=C.prototype,S=A.prototype,{column:T,columnRange:D}=C.types;if(d(F,"alignDataLabel",k),d(F,"justifyDataLabel",z),d(S,"getStackBox",O),T){let P=T.prototype,m=P.pointClass.prototype;P.translate3dPoints=()=>{},P.translate3dShapes=p,l(P,"afterInit",y),d(m,"hasNewShapeType",b),d(P,"animate",x),d(P,"plotGroup",f),d(P,"pointAttribs",M),d(P,"setState",L),d(P,"setVisible",_),d(P,"translate",w)}if(D){let P=D.prototype;d(P.pointClass.prototype,"hasNewShapeType",b),d(P,"plotGroup",f),d(P,"pointAttribs",M),d(P,"setState",L),d(P,"setVisible",_)}}}}}),e(t,"Series/Pie3D/Pie3DPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(i){let{pie:{prototype:{pointClass:s}}}=i.seriesTypes;return class extends s{haloPath(){return this.series?.chart.is3d()?[]:super.haloPath.apply(this,arguments)}}}),e(t,"Series/Pie3D/Pie3DSeries.js",[t["Core/Globals.js"],t["Series/Pie3D/Pie3DPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{composed:a,deg2rad:l}=i,{pie:h}=r.seriesTypes,{extend:c,pick:g,pushUnique:d}=o;class p extends h{static compose(b){d(a,"Pie3D")&&(b.types.pie=p)}addPoint(){super.addPoint.apply(this,arguments),this.chart.is3d()&&this.update(this.userOptions,!0)}animate(b){if(this.chart.is3d()){let x=this.center,f=this.group,M=this.markerGroup,L=this.options.animation,_;L===!0&&(L={}),b?(f.oldtranslateX=g(f.oldtranslateX,f.translateX),f.oldtranslateY=g(f.oldtranslateY,f.translateY),_={translateX:x[0],translateY:x[1],scaleX:.001,scaleY:.001},f.attr(_),M&&(M.attrSetters=f.attrSetters,M.attr(_))):(_={translateX:f.oldtranslateX,translateY:f.oldtranslateY,scaleX:1,scaleY:1},f.animate(_,L),M&&M.animate(_,L))}else super.animate.apply(this,arguments)}getDataLabelPosition(b,x){let f=super.getDataLabelPosition(b,x);if(this.chart.is3d()){let M=this.chart.options.chart.options3d,L=b.shapeArgs,_=L.r,w=(L.alpha||M?.alpha)*l,k=(L.beta||M?.beta)*l,z=(L.start+L.end)/2,O=f.connectorPosition,C=-_*(1-Math.cos(w))*Math.sin(z),A=_*(Math.cos(k)-1)*Math.cos(z);for(let F of[f?.natural,O.breakAt,O.touchingSliceAt])F.x+=A,F.y+=C}return f}pointAttribs(b){let x=super.pointAttribs.apply(this,arguments),f=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(x.stroke=f.edgeColor||b.color||this.color,x["stroke-width"]=g(f.edgeWidth,1)),x}translate(){if(super.translate.apply(this,arguments),!this.chart.is3d())return;let b=this.options,x=b.depth||0,f=this.chart.options.chart.options3d,M=f.alpha,L=f.beta,_=b.stacking?(b.stack||0)*x:this._i*x;for(let w of(_+=x/2,b.grouping!==!1&&(_=0),this.points)){let k=w.shapeArgs;w.shapeType="arc3d",k.z=_,k.depth=.75*x,k.alpha=M,k.beta=L,k.center=this.center;let z=(k.end+k.start)/2;w.slicedTranslation={translateX:Math.round(Math.cos(z)*b.slicedOffset*Math.cos(M*l)),translateY:Math.round(Math.sin(z)*b.slicedOffset*Math.cos(M*l))}}}drawTracker(){if(super.drawTracker.apply(this,arguments),this.chart.is3d()){for(let b of this.points)if(b.graphic)for(let x of["out","inn","side1","side2"])b.graphic&&(b.graphic[x].element.point=b)}}}return c(p.prototype,{pointClass:s}),p}),e(t,"Series/Scatter3D/Scatter3DPoint.js",[t["Series/Scatter/ScatterSeries.js"],t["Core/Utilities.js"]],function(i,s){let{pointClass:r}=i.prototype,{defined:o}=s;return class extends r{applyOptions(){return super.applyOptions.apply(this,arguments),o(this.z)||(this.z=0),this}}}),e(t,"Series/Scatter3D/Scatter3DSeriesDefaults.js",[],function(){return{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}}}),e(t,"Series/Scatter3D/Scatter3DSeries.js",[t["Core/Math3D.js"],t["Series/Scatter3D/Scatter3DPoint.js"],t["Series/Scatter3D/Scatter3DSeriesDefaults.js"],t["Series/Scatter/ScatterSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{pointCameraDistance:h}=i,{extend:c,merge:g}=l;class d extends o{pointAttribs(y){let b=super.pointAttribs.apply(this,arguments);return this.chart.is3d()&&y&&(b.zIndex=h(y,this.chart)),b}}return d.defaultOptions=g(o.defaultOptions,r),c(d.prototype,{axisTypes:["xAxis","yAxis","zAxis"],directTouch:!0,parallelArrays:["x","y","z"],pointArrayMap:["x","y","z"],pointClass:s}),a.registerSeriesType("scatter3d",d),d}),e(t,"masters/highcharts-3d.src.js",[t["Core/Globals.js"],t["Core/Chart/Chart3D.js"],t["Series/Area3D/Area3DSeries.js"],t["Core/Axis/Axis3DComposition.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series3D.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Renderer/SVG/SVGRenderer3D.js"],t["Core/Axis/ZAxis.js"],t["Series/Column3D/Column3DComposition.js"],t["Series/Pie3D/Pie3DSeries.js"]],function(i,s,r,o,a,l,h,c,g,d,p){return r.compose(i.seriesTypes.area),o.compose(i.Axis,i.Tick),s.compose(i.Chart,i.Fx),d.compose(i.Series,h),p.compose(i.Series),l.compose(i.Series),c.compose(a.getRendererType()),g.compose(i.Chart),i})})});var $u=ai((xA,po)=>{"use strict";(function(n){typeof po=="object"&&po.exports?(n.default=n,po.exports=n):typeof define=="function"&&define.amd?define("highcharts/modules/exporting",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n(typeof Highcharts<"u"?Highcharts:void 0)})(function(n){"use strict";var t=n?n._modules:{};function e(i,s,r,o){i.hasOwnProperty(s)||(i[s]=o.apply(null,r),typeof CustomEvent=="function"&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:i[s]}})))}e(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var i;return function(s){s.compose=function(o){return o.navigation||(o.navigation=new r(o)),o};class r{constructor(a){this.updates=[],this.chart=a}addUpdate(a){this.chart.navigation.updates.push(a)}update(a,l){this.updates.forEach(h=>{h.call(this.chart,a,l)})}}s.Additions=r}(i||(i={})),i}),e(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(i){let{isTouchDevice:s}=i;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:s?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),e(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var i;return function(s){let r=[];function o(l,h,c,g){return[["M",l,h+2.5],["L",l+c,h+2.5],["M",l,h+g/2+.5],["L",l+c,h+g/2+.5],["M",l,h+g-1.5],["L",l+c,h+g-1.5]]}function a(l,h,c,g){let d=g/3-2;return[].concat(this.circle(c-d,h,d,d),this.circle(c-d,h+d+4,d,d),this.circle(c-d,h+2*(d+4),d,d))}s.compose=function(l){if(r.indexOf(l)===-1){r.push(l);let h=l.prototype.symbols;h.menu=o,h.menuball=a.bind(h)}}}(i||(i={})),i}),e(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r){let{composed:o}=s,{addEvent:a,fireEvent:l,pushUnique:h}=r;function c(){this.fullscreen=new g(this)}class g{static compose(p){h(o,"Fullscreen")&&a(p,"beforeRender",c)}constructor(p){this.chart=p,this.isOpen=!1;let y=p.renderTo;!this.browserProps&&(typeof y.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:y.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:y.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:y.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let p=this,y=p.chart,b=y.options.chart;l(y,"fullscreenClose",null,function(){p.isOpen&&p.browserProps&&y.container.ownerDocument instanceof Document&&y.container.ownerDocument[p.browserProps.exitFullscreen](),p.unbindFullscreenEvent&&(p.unbindFullscreenEvent=p.unbindFullscreenEvent()),y.setSize(p.origWidth,p.origHeight,!1),p.origWidth=void 0,p.origHeight=void 0,b.width=p.origWidthOption,b.height=p.origHeightOption,p.origWidthOption=void 0,p.origHeightOption=void 0,p.isOpen=!1,p.setButtonText()})}open(){let p=this,y=p.chart,b=y.options.chart;l(y,"fullscreenOpen",null,function(){if(b&&(p.origWidthOption=b.width,p.origHeightOption=b.height),p.origWidth=y.chartWidth,p.origHeight=y.chartHeight,p.browserProps){let x=a(y.container.ownerDocument,p.browserProps.fullscreenChange,function(){p.isOpen?(p.isOpen=!1,p.close()):(y.setSize(null,null,!1),p.isOpen=!0,p.setButtonText())}),f=a(y,"destroy",x);p.unbindFullscreenEvent=()=>{x(),f()};let M=y.renderTo[p.browserProps.requestFullscreen]();M&&M.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let p=this.chart,y=p.exportDivElements,b=p.options.exporting,x=b&&b.buttons&&b.buttons.contextButton.menuItems,f=p.options.lang;if(b&&b.menuItemDefinitions&&f&&f.exitFullscreen&&f.viewFullscreen&&x&&y){let M=y[x.indexOf("viewFullscreen")];M&&i.setElementHTML(M,this.isOpen?f.exitFullscreen:b.menuItemDefinitions.viewFullscreen.text||f.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return g}),e(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let{win:r}=i,{discardElement:o,objectEach:a}=s,l={ajax:function(h){let c={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},g=new XMLHttpRequest;function d(p,y){h.error&&h.error(p,y)}if(!h.url)return!1;g.open((h.type||"get").toUpperCase(),h.url,!0),h.headers&&h.headers["Content-Type"]||g.setRequestHeader("Content-Type",c[h.dataType||"json"]||c.text),a(h.headers,function(p,y){g.setRequestHeader(y,p)}),h.responseType&&(g.responseType=h.responseType),g.onreadystatechange=function(){let p;if(g.readyState===4){if(g.status===200){if(h.responseType!=="blob"&&(p=g.responseText,h.dataType==="json"))try{p=JSON.parse(p)}catch(y){if(y instanceof Error)return d(g,y)}return h.success&&h.success(p,g)}d(g,g.responseText)}},h.data&&typeof h.data!="string"&&(h.data=JSON.stringify(h.data)),g.send(h.data)},getJSON:function(h,c){l.ajax({url:h,success:c,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(h,c,g){let d=new r.FormData;a(c,function(b,x){d.append(x,b)}),d.append("b64","true");let{filename:p,type:y}=c;return r.fetch(h,re({method:"POST",body:d},g)).then(b=>{b.ok&&b.text().then(x=>{let f=document.createElement("a");f.href=`data:${y};base64,${x}`,f.download=p,f.click(),o(f)})})}};return l}),e(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c,g,d){var p;let{defaultOptions:y}=o,{doc:b,SVG_NS:x,win:f}=c,{addEvent:M,css:L,createElement:_,discardElement:w,extend:k,find:z,fireEvent:O,isObject:C,merge:A,objectEach:F,pick:S,removeEvent:T,uniqueKey:D}=d;return function(P){let m,u=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],v=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];P.inlineAllowlist=[];let I=["clipPath","defs","desc"];function E($){let tt,it,et=this,st=et.renderer,rt=A(et.options.navigation.buttonOptions,$),nt=rt.onclick,ot=rt.menuItems,at=rt.symbolSize||12;if(et.btnCount||(et.btnCount=0),et.exportDivElements||(et.exportDivElements=[],et.exportSVGElements=[]),rt.enabled===!1||!rt.theme)return;let ct=et.styledMode?{}:rt.theme;nt?it=function(lt){lt&&lt.stopPropagation(),nt.call(et,lt)}:ot&&(it=function(lt){lt&&lt.stopPropagation(),et.contextMenu(ht.menuClassName,ot,ht.translateX||0,ht.translateY||0,ht.width||0,ht.height||0,ht),ht.setState(2)}),rt.text&&rt.symbol?ct.paddingLeft=S(ct.paddingLeft,30):rt.text||k(ct,{width:rt.width,height:rt.height,padding:0});let ht=st.button(rt.text,0,0,it,ct,void 0,void 0,void 0,void 0,rt.useHTML).addClass($.className).attr({title:S(et.options.lang[rt._titleKey||rt.titleKey],"")});ht.menuClassName=$.menuClassName||"highcharts-menu-"+et.btnCount++,rt.symbol&&(tt=st.symbol(rt.symbol,Math.round((rt.symbolX||0)-at/2),Math.round((rt.symbolY||0)-at/2),at,at,{width:at,height:at}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(ht),et.styledMode||tt.attr({stroke:rt.symbolStroke,fill:rt.symbolFill,"stroke-width":rt.symbolStrokeWidth||1})),ht.add(et.exportingGroup).align(k(rt,{width:ht.width,x:S(rt.x,et.buttonOffset)}),!0,"spacingBox"),et.buttonOffset+=((ht.width||0)+rt.buttonSpacing)*(rt.align==="right"?-1:1),et.exportSVGElements.push(ht,tt)}function R(){if(!this.printReverseInfo)return;let{childNodes:$,origDisplay:tt,resetParams:it}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call($,function(et,st){et.nodeType===1&&(et.style.display=tt[st]||"")}),this.isPrinting=!1,it&&this.setSize.apply(this,it),delete this.printReverseInfo,m=void 0,O(this,"afterPrint")}function j(){let $=b.body,tt=this.options.exporting.printMaxWidth,it={childNodes:$.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,this.pointer?.reset(void 0,0),O(this,"beforePrint"),tt&&this.chartWidth>tt&&(it.resetParams=[this.options.chart.width,void 0,!1],this.setSize(tt,void 0,!1)),[].forEach.call(it.childNodes,function(et,st){et.nodeType===1&&(it.origDisplay[st]=et.style.display,et.style.display="none")}),this.moveContainers($),this.printReverseInfo=it}function G($){$.renderExporting(),M($,"redraw",$.renderExporting),M($,"destroy",$.destroyExport)}function W($,tt,it,et,st,rt,nt){let ot=this,at=ot.options.navigation,ct=ot.chartWidth,ht=ot.chartHeight,lt="cache-"+$,yt=Math.max(st,rt),Et,dt=ot[lt];dt||(ot.exportContextMenu=ot[lt]=dt=_("div",{className:$},re({position:"absolute",zIndex:1e3,padding:yt+"px",pointerEvents:"auto"},ot.renderer.style),ot.scrollablePlotArea?.fixedDiv||ot.container),Et=_("ul",{className:"highcharts-menu"},ot.styledMode?{}:{listStyle:"none",margin:0,padding:0},dt),ot.styledMode||L(Et,k({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},at.menuStyle)),dt.hideMenu=function(){L(dt,{display:"none"}),nt&&nt.setState(0),ot.openMenu=!1,L(ot.renderTo,{overflow:"hidden"}),L(ot.container,{overflow:"hidden"}),d.clearTimeout(dt.hideTimer),O(ot,"exportMenuHidden")},ot.exportEvents.push(M(dt,"mouseleave",function(){dt.hideTimer=f.setTimeout(dt.hideMenu,500)}),M(dt,"mouseenter",function(){d.clearTimeout(dt.hideTimer)}),M(b,"mouseup",function(mt){ot.pointer?.inClass(mt.target,$)||dt.hideMenu()}),M(dt,"click",function(){ot.openMenu&&dt.hideMenu()})),tt.forEach(function(mt){if(typeof mt=="string"&&(mt=ot.options.exporting.menuItemDefinitions[mt]),C(mt,!0)){let Pt;mt.separator?Pt=_("hr",void 0,void 0,Et):(mt.textKey==="viewData"&&ot.isDataTableVisible&&(mt.textKey="hideData"),Pt=_("li",{className:"highcharts-menu-item",onclick:function(Yt){Yt&&Yt.stopPropagation(),dt.hideMenu(),typeof mt!="string"&&mt.onclick&&mt.onclick.apply(ot,arguments)}},void 0,Et),i.setElementHTML(Pt,mt.text||ot.options.lang[mt.textKey]),ot.styledMode||(Pt.onmouseover=function(){L(this,at.menuItemHoverStyle)},Pt.onmouseout=function(){L(this,at.menuItemStyle)},L(Pt,k({cursor:"pointer"},at.menuItemStyle||{})))),ot.exportDivElements.push(Pt)}}),ot.exportDivElements.push(Et,dt),ot.exportMenuWidth=dt.offsetWidth,ot.exportMenuHeight=dt.offsetHeight);let St={display:"block"};it+(ot.exportMenuWidth||0)>ct?St.right=ct-it-st-yt+"px":St.left=it-yt+"px",et+rt+(ot.exportMenuHeight||0)>ht&&nt.alignOptions?.verticalAlign!=="top"?St.bottom=ht-et-yt+"px":St.top=et+rt-yt+"px",L(dt,St),L(ot.renderTo,{overflow:""}),L(ot.container,{overflow:""}),ot.openMenu=!0,O(ot,"exportMenuShown")}function N($){let tt,it=$?$.target:this,et=it.exportSVGElements,st=it.exportDivElements,rt=it.exportEvents;et&&(et.forEach((nt,ot)=>{nt&&(nt.onclick=nt.ontouchstart=null,it[tt="cache-"+nt.menuClassName]&&delete it[tt],et[ot]=nt.destroy())}),et.length=0),it.exportingGroup&&(it.exportingGroup.destroy(),delete it.exportingGroup),st&&(st.forEach(function(nt,ot){nt&&(d.clearTimeout(nt.hideTimer),T(nt,"mouseleave"),st[ot]=nt.onmouseout=nt.onmouseover=nt.ontouchstart=nt.onclick=null,w(nt))}),st.length=0),rt&&(rt.forEach(function(nt){nt()}),rt.length=0)}function B($,tt){let it=this.getSVGForExport($,tt);$=A(this.options.exporting,$),g.post($.url,{filename:$.filename?$.filename.replace(/\//g,"-"):this.getFilename(),type:$.type,width:$.width,scale:$.scale,svg:it},$.fetchOptions)}function X(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function V(){let $=this.userOptions.title&&this.userOptions.title.text,tt=this.options.exporting.filename;return tt?tt.replace(/\//g,"-"):(typeof $=="string"&&(tt=$.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!tt||tt.length<5)&&(tt="chart"),tt)}function H($){let tt,it,et=A(this.options,$);et.plotOptions=A(this.userOptions.plotOptions,$&&$.plotOptions),et.time=A(this.userOptions.time,$&&$.time);let st=_("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},b.body),rt=this.renderTo.style.width,nt=this.renderTo.style.height,ot=et.exporting.sourceWidth||et.chart.width||/px$/.test(rt)&&parseInt(rt,10)||(et.isGantt?800:600),at=et.exporting.sourceHeight||et.chart.height||/px$/.test(nt)&&parseInt(nt,10)||400;k(et.chart,{animation:!1,renderTo:st,forExport:!0,renderer:"SVGRenderer",width:ot,height:at}),et.exporting.enabled=!1,delete et.data,et.series=[],this.series.forEach(function(lt){(it=A(lt.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:lt.visible})).isInternal||et.series.push(it)});let ct={};this.axes.forEach(function(lt){lt.userOptions.internalKey||(lt.userOptions.internalKey=D()),lt.options.isInternal||(ct[lt.coll]||(ct[lt.coll]=!0,et[lt.coll]=[]),et[lt.coll].push(A(lt.userOptions,{visible:lt.visible,type:lt.type,uniqueNames:lt.uniqueNames})))}),et.colorAxis=this.userOptions.colorAxis;let ht=new this.constructor(et,this.callback);return $&&["xAxis","yAxis","series"].forEach(function(lt){let yt={};$[lt]&&(yt[lt]=$[lt],ht.update(yt))}),this.axes.forEach(function(lt){let yt=z(ht.axes,function(mt){return mt.options.internalKey===lt.userOptions.internalKey}),Et=lt.getExtremes(),dt=Et.userMin,St=Et.userMax;yt&&(dt!==void 0&&dt!==yt.min||St!==void 0&&St!==yt.max)&&yt.setExtremes(dt,St,!0,!1)}),tt=ht.getChartHTML(),O(this,"getSVG",{chartCopy:ht}),tt=this.sanitizeSVG(tt,et),et=null,ht.destroy(),w(st),tt}function K($,tt){let it=this.options.exporting;return this.getSVG(A({chart:{borderRadius:0}},it.chartOptions,tt,{exporting:{sourceWidth:$&&$.sourceWidth||it.sourceWidth,sourceHeight:$&&$.sourceHeight||it.sourceHeight}}))}function U(){let $,tt=P.inlineAllowlist,it={},et=b.createElement("iframe");L(et,{width:"1px",height:"1px",visibility:"hidden"}),b.body.appendChild(et);let st=et.contentWindow&&et.contentWindow.document;st&&st.body.appendChild(st.createElementNS(x,"svg")),function rt(nt){let ot,at,ct,ht,lt,yt,Et={};if(st&&nt.nodeType===1&&I.indexOf(nt.nodeName)===-1){if(ot=f.getComputedStyle(nt,null),at=nt.nodeName==="svg"?{}:f.getComputedStyle(nt.parentNode,null),!it[nt.nodeName]){$=st.getElementsByTagName("svg")[0],ct=st.createElementNS(nt.namespaceURI,nt.nodeName),$.appendChild(ct);let dt=f.getComputedStyle(ct,null),St={};for(let mt in dt)mt.length<1e3&&typeof dt[mt]=="string"&&!/^\d+$/.test(mt)&&(St[mt]=dt[mt]);it[nt.nodeName]=St,nt.nodeName==="text"&&delete it.text.fill,$.removeChild(ct)}for(let dt in ot)(c.isFirefox||c.isMS||c.isSafari||Object.hasOwnProperty.call(ot,dt))&&function(St,mt){if(ht=lt=!1,tt.length){for(yt=tt.length;yt--&&!lt;)lt=tt[yt].test(mt);ht=!lt}for(mt==="transform"&&St==="none"&&(ht=!0),yt=u.length;yt--&&!ht;){if(mt.length>1e3)throw Error("Input too long");ht=u[yt].test(mt)||typeof St=="function"}!ht&&(at[mt]!==St||nt.nodeName==="svg")&&it[nt.nodeName][mt]!==St&&(v&&v.indexOf(mt)===-1?Et[mt]=St:St&&nt.setAttribute(mt.replace(/[A-Z]/g,function(Pt){return"-"+Pt.toLowerCase()}),St))}(ot[dt],dt);if(L(nt,Et),nt.nodeName==="svg"&&nt.setAttribute("stroke-width","1px"),nt.nodeName==="text")return;[].forEach.call(nt.children||nt.childNodes,rt)}}(this.container.querySelector("svg")),$.parentNode.removeChild($),et.parentNode.removeChild(et)}function Y($){let{scrollablePlotArea:tt}=this;(tt?[tt.fixedDiv,tt.scrollingContainer]:[this.container]).forEach(function(it){$.appendChild(it)})}function Z(){let $=this,tt=(it,et,st)=>{$.isDirtyExporting=!0,A(!0,$.options[it],et),S(st,!0)&&$.redraw()};$.exporting={update:function(it,et){tt("exporting",it,et)}},r.compose($).navigation.addUpdate((it,et)=>{tt("navigation",it,et)})}function q(){let $=this;$.isPrinting||(m=$,c.isSafari||$.beforePrint(),setTimeout(()=>{f.focus(),f.print(),c.isSafari||setTimeout(()=>{$.afterPrint()},1e3)},1))}function J(){let $=this,tt=$.options.exporting,it=tt.buttons,et=$.isDirtyExporting||!$.exportSVGElements;$.buttonOffset=0,$.isDirtyExporting&&$.destroyExport(),et&&tt.enabled!==!1&&($.exportEvents=[],$.exportingGroup=$.exportingGroup||$.renderer.g("exporting-group").attr({zIndex:3}).add(),F(it,function(st){$.addButton(st)}),$.isDirtyExporting=!1)}function Q($,tt){let it=$.indexOf("</svg>")+6,et=$.substr(it);return $=$.substr(0,it),tt&&tt.exporting&&tt.exporting.allowHTML&&et&&(et='<foreignObject x="0" y="0" width="'+tt.chart.width+'" height="'+tt.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+et.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",$=$.replace("</svg>",et+"</svg>")),$=$.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ \d]+,[ \d]+,[ \d]+),([ \d\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xA0").replace(/&shy;/g,"\xAD")}P.compose=function($,tt){l.compose(tt),h.compose($);let it=$.prototype;it.exportChart||(it.afterPrint=R,it.exportChart=B,it.inlineStyles=U,it.print=q,it.sanitizeSVG=Q,it.getChartHTML=X,it.getSVG=H,it.getSVGForExport=K,it.getFilename=V,it.moveContainers=Y,it.beforePrint=j,it.contextMenu=W,it.addButton=E,it.destroyExport=N,it.renderExporting=J,it.callbacks.push(G),M($,"init",Z),c.isSafari&&f.matchMedia("print").addListener(function(et){m&&(et.matches?m.beforePrint():m.afterPrint())}),y.exporting=A(a.exporting,y.exporting),y.lang=A(a.lang,y.lang),y.navigation=A(a.navigation,y.navigation))}}(p||(p={})),p}),e(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(i,s,r){return i.HttpUtilities=i.HttpUtilities||r,i.ajax=i.HttpUtilities.ajax,i.getJSON=i.HttpUtilities.getJSON,i.post=i.HttpUtilities.post,s.compose(i.Chart,i.Renderer),i})})});var Ju=ai((bA,fo)=>{"use strict";(function(n){typeof fo=="object"&&fo.exports?(n.default=n,fo.exports=n):typeof define=="function"&&define.amd?define("highcharts/modules/stock",["highcharts"],function(t){return n(t),n.Highcharts=t,n}):n(typeof Highcharts<"u"?Highcharts:void 0)})(function(n){"use strict";var t=n?n._modules:{};function e(i,s,r,o){i.hasOwnProperty(s)||(i[s]=o.apply(null,r),typeof CustomEvent=="function"&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:i[s]}})))}e(t,"Series/DataModifyComposition.js",[t["Core/Axis/Axis.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(i,s,r,o){var a;let{tooltipFormatter:l}=s.prototype,{addEvent:h,arrayMax:c,arrayMin:g,correctFloat:d,defined:p,isArray:y,isNumber:b,isString:x,pick:f}=o;return function(M){function L(T,D,P){!this.isXAxis&&(this.series.forEach(function(m){T==="compare"&&typeof D!="boolean"?m.setCompare(D,!1):T!=="cumulative"||x(D)||m.setCumulative(D,!1)}),f(P,!0)&&this.chart.redraw())}function _(T){let D=this,{numberFormatter:P}=D.series.chart,m=function(u){T=T.replace("{point."+u+"}",(D[u]>0&&u==="change"?"+":"")+P(D[u],f(D.series.tooltipOptions.changeDecimals,2)))};return p(D.change)&&m("change"),p(D.cumulativeSum)&&m("cumulativeSum"),l.apply(this,[T])}function w(){let T,D=this.options.compare;(D==="percent"||D==="value"||this.options.cumulative)&&(T=new S(this),D==="percent"||D==="value"?T.initCompare(D):T.initCumulative()),this.dataModify=T}function k(T){let D=T.dataExtremes,P=D.activeYData;if(this.dataModify&&D){let m;this.options.compare?m=[this.dataModify.modifyValue(D.dataMin),this.dataModify.modifyValue(D.dataMax)]:this.options.cumulative&&y(P)&&P.length>=2&&(m=S.getCumulativeExtremes(P)),m&&(D.dataMin=g(m),D.dataMax=c(m))}}function z(T,D){this.options.compare=this.userOptions.compare=T,this.update({},f(D,!0)),this.dataModify&&(T==="value"||T==="percent")?this.dataModify.initCompare(T):this.points.forEach(P=>{delete P.change})}function O(){if(this.xAxis&&this.processedYData&&this.dataModify){let T=this.processedXData,D=this.processedYData,P=D.length,m=this.options.compareStart===!0?0:1,u=-1,v;for(this.pointArrayMap&&(u=this.pointArrayMap.indexOf(this.options.pointValKey||this.pointValKey||"y")),v=0;v<P-m;v++){let I=D[v]&&u>-1?D[v][u]:D[v];if(b(I)&&I!==0&&T[v+m]>=(this.xAxis.min||0)){this.dataModify.compareValue=I;break}}}}function C(T,D){this.setModifier("compare",T,D)}function A(T,D){T=f(T,!1),this.options.cumulative=this.userOptions.cumulative=T,this.update({},f(D,!0)),this.dataModify?this.dataModify.initCumulative():this.points.forEach(P=>{delete P.cumulativeSum})}function F(T,D){this.setModifier("cumulative",T,D)}M.compose=function(T,D,P){let m=D.prototype,u=P.prototype,v=T.prototype;return v.setCompare||(v.setCompare=z,v.setCumulative=A,h(T,"afterInit",w),h(T,"afterGetExtremes",k),h(T,"afterProcessData",O)),m.setCompare||(m.setCompare=C,m.setModifier=L,m.setCumulative=F,u.tooltipFormatter=_),T};class S{constructor(D){this.series=D}modifyValue(){return 0}static getCumulativeExtremes(D){let P=1/0,m=-1/0;return D.reduce((u,v)=>{let I=u+v;return P=Math.min(P,I,u),m=Math.max(m,I,u),I}),[P,m]}initCompare(D){this.modifyValue=function(P,m){P===null&&(P=0);let u=this.compareValue;if(P!==void 0&&u!==void 0){if(D==="value"?P-=u:P=P/u*100-(this.series.options.compareBase===100?0:100),m!==void 0){let v=this.series.points[m];v&&(v.change=P)}return P}return 0}}initCumulative(){this.modifyValue=function(D,P){if(D===null&&(D=0),D!==void 0&&P!==void 0){let m=P>0?this.series.points[P-1]:null;m&&m.cumulativeSum&&(D=d(m.cumulativeSum+D));let u=this.series.points[P],v=u.series.options.cumulativeStart,I=u.x<=this.series.xAxis.max&&u.x>=this.series.xAxis.min;return u&&(!v||I?u.cumulativeSum=D:u.cumulativeSum=void 0),D}return 0}}}M.Additions=S}(a||(a={})),a}),e(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let r,{isTouchDevice:o}=i,{addEvent:a,merge:l,pick:h}=s,c=[];function g(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function d(){let M,L,_,w=this.legend,k=this.navigator;if(k){M=w&&w.options,L=k.xAxis,_=k.yAxis;let{scrollbarHeight:z,scrollButtonSize:O}=k;this.inverted?(k.left=k.opposite?this.chartWidth-z-k.height:this.spacing[3]+z,k.top=this.plotTop+O):(k.left=h(L.left,this.plotLeft+O),k.top=k.navigatorOptions.top||this.chartHeight-k.height-z-(this.scrollbar?.options.margin||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(M&&M.verticalAlign==="bottom"&&M.layout!=="proximate"&&M.enabled&&!M.floating?w.legendHeight+h(M.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),L&&_&&(this.inverted?L.options.left=_.options.left=k.left:L.options.top=_.options.top=k.top,L.setAxisSize(),_.setAxisSize())}}function p(M){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new r(this),h(M.redraw,!0)&&this.redraw(M.animation))}function y(){let M=this.options;(M.navigator.enabled||M.scrollbar.enabled)&&(this.scroller=this.navigator=new r(this))}function b(){let M=this.options,L=M.navigator,_=M.rangeSelector;if((L&&L.enabled||_&&_.enabled)&&(!o&&this.zooming.type==="x"||o&&this.zooming.pinchType==="x"))return!1}function x(M){let L=M.navigator;if(L&&M.xAxis[0]){let _=M.xAxis[0].getExtremes();L.render(_.min,_.max)}}function f(M){let L=M.options.navigator||{},_=M.options.scrollbar||{};!this.navigator&&!this.scroller&&(L.enabled||_.enabled)&&(l(!0,this.options.navigator,L),l(!0,this.options.scrollbar,_),delete M.options.navigator,delete M.options.scrollbar)}return{compose:function(M,L){if(s.pushUnique(c,M)){let _=M.prototype;r=L,_.callbacks.push(x),a(M,"afterAddSeries",g),a(M,"afterSetChartSize",d),a(M,"afterUpdate",p),a(M,"beforeRender",y),a(M,"beforeShowResetZoom",b),a(M,"update",f)}}}}),e(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){let{isTouchDevice:r}=i,{addEvent:o,correctFloat:a,defined:l,isNumber:h,pick:c}=s;function g(){this.navigatorAxis||(this.navigatorAxis=new p(this))}function d(y){let b,x=this.chart,f=x.options,M=f.navigator,L=this.navigatorAxis,_=x.zooming.pinchType,w=f.rangeSelector,k=x.zooming.type;if(this.isXAxis&&(M?.enabled||w?.enabled)){if(k==="y"&&y.trigger==="zoom")b=!1;else if((y.trigger==="zoom"&&k==="xy"||r&&_==="xy")&&this.options.range){let z=L.previousZoom;l(y.min)?L.previousZoom=[this.min,this.max]:z&&(y.min=z[0],y.max=z[1],L.previousZoom=void 0)}}b!==void 0&&y.preventDefault()}class p{static compose(b){b.keepProps.includes("navigatorAxis")||(b.keepProps.push("navigatorAxis"),o(b,"init",g),o(b,"setExtremes",d))}constructor(b){this.axis=b}destroy(){this.axis=void 0}toFixedRange(b,x,f,M){let L=this.axis,_=(L.pointRange||0)/2,w=c(f,L.translate(b,!0,!L.horiz)),k=c(M,L.translate(x,!0,!L.horiz));return l(f)||(w=a(w+_)),l(M)||(k=a(k-_)),h(w)&&h(k)||(w=k=void 0),{min:w,max:k}}}return p}),e(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(i,s){let{parse:r}=i,{seriesTypes:o}=s;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:r("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:o.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),e(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(i,s){let{relativeLength:r}=s;return{"navigator-handle":function(o,a,l,h,c={}){let g=c.width?c.width/2:l,d=r(c.borderRadius||0,Math.min(2*g,h));return[["M",-1.5,(h=c.height||h)/2-3.5],["L",-1.5,h/2+4.5],["M",.5,h/2-3.5],["L",.5,h/2+4.5],...i.rect(-g-1,.5,2*g+1,h,{r:d})]}}}),e(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(i){let{defined:s}=i;return{setFixedRange:function(r){let o=this.xAxis[0];s(o.dataMax)&&s(o.dataMin)&&r?this.fixedRange=Math.min(r,o.dataMax-o.dataMin):this.fixedRange=r}}}),e(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c){let{setOptions:g}=i,{composed:d}=s,{getRendererType:p}=l,{setFixedRange:y}=h,{addEvent:b,extend:x,pushUnique:f}=c;function M(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(L,_,w){r.compose(_),f(d,"Navigator")&&(L.prototype.setFixedRange=y,x(p().prototype.symbols,a),b(w,"afterUpdate",M),g({navigator:o}))}}}),e(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s){var r;let{composed:o}=i,{addEvent:a,defined:l,pick:h,pushUnique:c}=s;return function(g){let d;function p(f){let M=h(f.options&&f.options.min,f.min),L=h(f.options&&f.options.max,f.max);return{axisMin:M,axisMax:L,scrollMin:l(f.dataMin)?Math.min(M,f.min,f.dataMin,h(f.threshold,1/0)):M,scrollMax:l(f.dataMax)?Math.max(L,f.max,f.dataMax,h(f.threshold,-1/0)):L}}function y(){let f=this.scrollbar,M=f&&!f.options.opposite,L=this.horiz?2:M?3:1;f&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[L]+=f.size+(f.options.margin||0))}function b(){let f=this;f.options&&f.options.scrollbar&&f.options.scrollbar.enabled&&(f.options.scrollbar.vertical=!f.horiz,f.options.startOnTick=f.options.endOnTick=!1,f.scrollbar=new d(f.chart.renderer,f.options.scrollbar,f.chart),a(f.scrollbar,"changed",function(M){let L,_,{axisMin:w,axisMax:k,scrollMin:z,scrollMax:O}=p(f),C=O-z;if(l(w)&&l(k))if(f.horiz&&!f.reversed||!f.horiz&&f.reversed?(L=z+C*this.to,_=z+C*this.from):(L=z+C*(1-this.from),_=z+C*(1-this.to)),this.shouldUpdateExtremes(M.DOMType)){let A=M.DOMType!=="mousemove"&&M.DOMType!=="touchmove"&&void 0;f.setExtremes(_,L,!0,A,M)}else this.setRange(this.from,this.to)}))}function x(){let f,M,L,{scrollMin:_,scrollMax:w}=p(this),k=this.scrollbar,z=this.axisTitleMargin+(this.titleOffset||0),O=this.chart.scrollbarsOffsets,C=this.options.margin||0;if(k&&O){if(this.horiz)this.opposite||(O[1]+=z),k.position(this.left,this.top+this.height+2+O[1]-(this.opposite?C:0),this.width,this.height),this.opposite||(O[1]+=C),f=1;else{let A;this.opposite&&(O[0]+=z),A=k.options.opposite?this.left+this.width+2+O[0]-(this.opposite?0:C):this.opposite?0:C,k.position(A,this.top,this.width,this.height),this.opposite&&(O[0]+=C),f=0}if(O[f]+=k.size+(k.options.margin||0),isNaN(_)||isNaN(w)||!l(this.min)||!l(this.max)||this.dataMin===this.dataMax)k.setRange(0,1);else if(this.min===this.max){let A=this.pointRange/(this.dataMax+1);M=A*this.min,L=A*(this.max+1),k.setRange(M,L)}else M=(this.min-_)/(w-_),L=(this.max-_)/(w-_),this.horiz&&!this.reversed||!this.horiz&&this.reversed?k.setRange(M,L):k.setRange(1-L,1-M)}}g.compose=function(f,M){c(o,"Axis.Scrollbar")&&(d=M,a(f,"afterGetOffset",y),a(f,"afterInit",b),a(f,"afterRender",x))}}(r||(r={})),r}),e(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),e(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(i,s,r,o,a){let{defaultOptions:l}=i,{addEvent:h,correctFloat:c,crisp:g,defined:d,destroyObjectProperties:p,fireEvent:y,merge:b,pick:x,removeEvent:f}=a;class M{static compose(_){r.compose(_,M)}static swapXY(_,w){return w&&_.forEach(k=>{let z,O=k.length;for(let C=0;C<O;C+=2)typeof(z=k[C+1])=="number"&&(k[C+1]=k[C+2],k[C+2]=z)}),_}constructor(_,w,k){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(_,w,k)}addEvents(){let _=this.options.inverted?[1,0]:[0,1],w=this.scrollbarButtons,k=this.scrollbarGroup.element,z=this.track.element,O=this.mouseDownHandler.bind(this),C=this.mouseMoveHandler.bind(this),A=this.mouseUpHandler.bind(this),F=[[w[_[0]].element,"click",this.buttonToMinClick.bind(this)],[w[_[1]].element,"click",this.buttonToMaxClick.bind(this)],[z,"click",this.trackClick.bind(this)],[k,"mousedown",O],[k.ownerDocument,"mousemove",C],[k.ownerDocument,"mouseup",A],[k,"touchstart",O],[k.ownerDocument,"touchmove",C],[k.ownerDocument,"touchend",A]];F.forEach(function(S){h.apply(null,S)}),this._events=F}buttonToMaxClick(_){let w=(this.to-this.from)*x(this.options.step,.2);this.updatePosition(this.from+w,this.to+w),y(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:_})}buttonToMinClick(_){let w=c(this.to-this.from)*x(this.options.step,.2);this.updatePosition(c(this.from-w),c(this.to-w)),y(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:_})}cursorToScrollbarPosition(_){let w=this.options,k=w.minWidth>this.calculatedWidth?w.minWidth:0;return{chartX:(_.chartX-this.x-this.xOffset)/(this.barWidth-k),chartY:(_.chartY-this.y-this.yOffset)/(this.barWidth-k)}}destroy(){let _=this,w=_.chart.scroller;_.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(k){_[k]&&_[k].destroy&&(_[k]=_[k].destroy())}),w&&_===w.scrollbar&&(w.scrollbar=null,p(w.scrollbarButtons))}drawScrollbarButton(_){let w=this.renderer,k=this.scrollbarButtons,z=this.options,O=this.size,C=w.g().add(this.group);if(k.push(C),z.buttonsEnabled){let A=w.rect().addClass("highcharts-scrollbar-button").add(C);this.chart.styledMode||A.attr({stroke:z.buttonBorderColor,"stroke-width":z.buttonBorderWidth,fill:z.buttonBackgroundColor}),A.attr(A.crisp({x:-.5,y:-.5,width:O,height:O,r:z.buttonBorderRadius},A.strokeWidth()));let F=w.path(M.swapXY([["M",O/2+(_?-1:1),O/2-3],["L",O/2+(_?-1:1),O/2+3],["L",O/2+(_?2:-2),O/2]],z.vertical)).addClass("highcharts-scrollbar-arrow").add(k[_]);this.chart.styledMode||F.attr({fill:z.buttonArrowColor})}}init(_,w,k){this.scrollbarButtons=[],this.renderer=_,this.userOptions=w,this.options=b(o,l.scrollbar,w),this.options.margin=x(this.options.margin,10),this.chart=k,this.size=x(this.options.size,this.options.height),w.enabled&&(this.render(),this.addEvents())}mouseDownHandler(_){let w=this.chart.pointer?.normalize(_)||_,k=this.cursorToScrollbarPosition(w);this.chartX=k.chartX,this.chartY=k.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(_){let w,k=this.chart.pointer?.normalize(_)||_,z=this.options.vertical?"chartY":"chartX",O=this.initPositions||[];this.grabbedCenter&&(!_.touches||_.touches[0][z]!==0)&&(w=this.cursorToScrollbarPosition(k)[z]-this[z],this.hasDragged=!0,this.updatePosition(O[0]+w,O[1]+w),this.hasDragged&&y(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:_.type,DOMEvent:_}))}mouseUpHandler(_){this.hasDragged&&y(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:_.type,DOMEvent:_}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(_,w,k,z){let{buttonsEnabled:O,margin:C=0,vertical:A}=this.options,F=this.rendered?"animate":"attr",S=z,T=0;this.group.show(),this.x=_,this.y=w+this.trackBorderWidth,this.width=k,this.height=z,this.xOffset=S,this.yOffset=T,A?(this.width=this.yOffset=k=T=this.size,this.xOffset=S=0,this.yOffset=T=O?this.size:0,this.barWidth=z-(O?2*k:0),this.x=_+=C):(this.height=z=this.size,this.xOffset=S=O?this.size:0,this.barWidth=k-(O?2*z:0),this.y=this.y+C),this.group[F]({translateX:_,translateY:this.y}),this.track[F]({width:k,height:z}),this.scrollbarButtons[1][F]({translateX:A?0:k-S,translateY:A?z-T:0})}removeEvents(){this._events.forEach(function(_){f.apply(null,_)}),this._events.length=0}render(){let _=this.renderer,w=this.options,k=this.size,z=this.chart.styledMode,O=_.g("scrollbar").attr({zIndex:w.zIndex}).hide().add();this.group=O,this.track=_.rect().addClass("highcharts-scrollbar-track").attr({r:w.trackBorderRadius||0,height:k,width:k}).add(O),z||this.track.attr({fill:w.trackBackgroundColor,stroke:w.trackBorderColor,"stroke-width":w.trackBorderWidth});let C=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-g(0,C),y:-g(0,C)}),this.scrollbarGroup=_.g().add(O),this.scrollbar=_.rect().addClass("highcharts-scrollbar-thumb").attr({height:k-C,width:k-C,r:w.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=_.path(M.swapXY([["M",-3,k/4],["L",-3,2*k/3],["M",0,k/4],["L",0,2*k/3],["M",3,k/4],["L",3,2*k/3]],w.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),z||(this.scrollbar.attr({fill:w.barBackgroundColor,stroke:w.barBorderColor,"stroke-width":w.barBorderWidth}),this.scrollbarRifles.attr({stroke:w.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-g(0,this.scrollbarStrokeWidth),-g(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(_,w){let k,z,O=this.options,C=O.vertical,A=O.minWidth,F=this.barWidth,S=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!d(F))return;let T=F*Math.min(w,1);k=Math.ceil(F*(_=Math.max(_,0))),this.calculatedWidth=z=c(T-k),z<A&&(k=(F-A+z)*_,z=A);let D=Math.floor(k+this.xOffset+this.yOffset),P=z/2-.5;this.from=_,this.to=w,C?(this.scrollbarGroup[S]({translateY:D}),this.scrollbar[S]({height:z}),this.scrollbarRifles[S]({translateY:P}),this.scrollbarTop=D,this.scrollbarLeft=0):(this.scrollbarGroup[S]({translateX:D}),this.scrollbar[S]({width:z}),this.scrollbarRifles[S]({translateX:P}),this.scrollbarLeft=D,this.scrollbarTop=0),z<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),O.showFull===!1&&(_<=0&&w>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(_){return x(this.options.liveRedraw,s.svg&&!s.isTouchDevice&&!this.chart.boosted)||_==="mouseup"||_==="touchend"||!d(_)}trackClick(_){let w=this.chart.pointer?.normalize(_)||_,k=this.to-this.from,z=this.y+this.scrollbarTop,O=this.x+this.scrollbarLeft;this.options.vertical&&w.chartY>z||!this.options.vertical&&w.chartX>O?this.updatePosition(this.from+k,this.to+k):this.updatePosition(this.from-k,this.to-k),y(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:_})}update(_){this.destroy(),this.init(this.chart.renderer,b(!0,this.options,_),this.chart)}updatePosition(_,w){w>1&&(_=c(1-c(w-_)),w=1),_<0&&(w=c(w-_),_=0),this.from=_,this.to=w}}return M.defaultOptions=o,l.scrollbar=b(!0,M.defaultOptions,l.scrollbar),M}),e(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c,g){let{defaultOptions:d}=r,{isTouchDevice:p}=o,{prototype:{symbols:y}}=c,{addEvent:b,clamp:x,correctFloat:f,defined:M,destroyObjectProperties:L,erase:_,extend:w,find:k,fireEvent:z,isArray:O,isNumber:C,merge:A,pick:F,removeEvent:S,splat:T}=g;function D(m,...u){let v=[].filter.call(u,C);if(v.length)return Math[m].apply(0,v)}class P{static compose(u,v,I){s.compose(u,P),l.compose(u,v,I)}constructor(u){this.isDirty=!1,this.scrollbarHeight=0,this.init(u)}drawHandle(u,v,I,E){let R=this.navigatorOptions.handles.height;this.handles[v][E](I?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(u,10)+.5-R)}:{translateX:Math.round(this.left+parseInt(u,10)),translateY:Math.round(this.top+this.height/2-R/2-1)})}drawOutline(u,v,I,E){let R=this.navigatorOptions.maskInside,j=this.outline.strokeWidth(),G=j/2,W=j%2/2,N=this.scrollButtonSize,B=this.size,X=this.top,V=this.height,H=X-G,K=X+V,U=this.left,Y,Z;I?(Y=X+v+W,v=X+u+W,Z=[["M",U+V,X-N-W],["L",U+V,Y],["L",U,Y],["M",U,v],["L",U+V,v],["L",U+V,X+B+N]],R&&Z.push(["M",U+V,Y-G],["L",U+V,v+G])):(U-=N,u+=U+N-W,v+=U+N-W,Z=[["M",U,H],["L",u,H],["L",u,K],["M",v,K],["L",v,H],["L",U+B+2*N,H]],R&&Z.push(["M",u-G,H],["L",v+G,H])),this.outline[E]({d:Z})}drawMasks(u,v,I,E){let R,j,G,W,N=this.left,B=this.top,X=this.height;I?(G=[N,N,N],W=[B,B+u,B+v],j=[X,X,X],R=[u,v-u,this.size-v]):(G=[N,N+u,N+v],W=[B,B,B],j=[u,v-u,this.size-v],R=[X,X,X]),this.shades.forEach((V,H)=>{V[E]({x:G[H],y:W[H],width:j[H],height:R[H]})})}renderElements(){let u=this,v=u.navigatorOptions,I=v.maskInside,E=u.chart,R=E.inverted,j=E.renderer,G={cursor:R?"ns-resize":"ew-resize"},W=u.navigatorGroup??(u.navigatorGroup=j.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!I,I,!I].forEach((N,B)=>{let X=u.shades[B]??(u.shades[B]=j.rect().addClass("highcharts-navigator-mask"+(B===1?"-inside":"-outside")).add(W));E.styledMode||(X.attr({fill:N?v.maskFill:"rgba(0,0,0,0)"}),B===1&&X.css(G))}),u.outline||(u.outline=j.path().addClass("highcharts-navigator-outline").add(W)),E.styledMode||u.outline.attr({"stroke-width":v.outlineWidth,stroke:v.outlineColor}),v.handles?.enabled){let N=v.handles,{height:B,width:X}=N;[0,1].forEach(V=>{let H=N.symbols[V];if(u.handles[V]&&u.handles[V].symbolUrl===H){if(!u.handles[V].isImg&&u.handles[V].symbolName!==H){let K=y[H].call(y,-X/2-1,0,X,B);u.handles[V].attr({d:K}),u.handles[V].symbolName=H}}else u.handles[V]?.destroy(),u.handles[V]=j.symbol(H,-X/2-1,0,X,B,N),u.handles[V].attr({zIndex:7-V}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][V]).add(W),u.addMouseEvents();E.inverted&&u.handles[V].attr({rotation:90,rotationOriginX:Math.floor(-X/2),rotationOriginY:(B+X)/2}),E.styledMode||u.handles[V].attr({fill:N.backgroundColor,stroke:N.borderColor,"stroke-width":N.lineWidth,width:N.width,height:N.height,x:-X/2-1,y:0}).css(G)})}}update(u,v=!1){let I=this.chart,E=I.options.chart.inverted!==I.scrollbar?.options.vertical;if(A(!0,I.options.navigator,u),this.navigatorOptions=I.options.navigator||{},this.setOpposite(),M(u.enabled)||E)return this.destroy(),this.navigatorEnabled=u.enabled||this.navigatorEnabled,this.init(I);if(this.navigatorEnabled&&(this.isDirty=!0,u.adaptToUpdatedData===!1&&this.baseSeries.forEach(R=>{S(R,"updatedData",this.updatedDataHandler)},this),u.adaptToUpdatedData&&this.baseSeries.forEach(R=>{R.eventsToUnbind.push(b(R,"updatedData",this.updatedDataHandler))},this),(u.series||u.baseSeries)&&this.setBaseSeries(void 0,!1),u.height||u.xAxis||u.yAxis)){this.height=u.height??this.height;let R=this.getXAxisOffsets();this.xAxis.update(oi(re({},u.xAxis),{offsets:R,[I.inverted?"width":"height"]:this.height,[I.inverted?"height":"width"]:void 0}),!1),this.yAxis.update(oi(re({},u.yAxis),{[I.inverted?"width":"height"]:this.height}),!1)}v&&I.redraw()}render(u,v,I,E){let R=this.chart,j=this.xAxis,G=j.pointRange||0,W=j.navigatorAxis.fake?R.xAxis[0]:j,N=this.navigatorEnabled,B=this.rendered,X=R.inverted,V=R.xAxis[0].minRange,H=R.xAxis[0].options.maxRange,K=this.scrollButtonSize,U,Y,Z,q=this.scrollbarHeight,J,Q;if(this.hasDragged&&!M(I))return;if(this.isDirty&&this.renderElements(),u=f(u-G/2),v=f(v+G/2),!C(u)||!C(v)){if(!B)return;I=0,E=F(j.width,W.width)}this.left=F(j.left,R.plotLeft+K+(X?R.plotWidth:0));let $=this.size=J=F(j.len,(X?R.plotHeight:R.plotWidth)-2*K);U=X?q:J+2*K,I=F(I,j.toPixels(u,!0)),E=F(E,j.toPixels(v,!0)),C(I)&&Math.abs(I)!==1/0||(I=0,E=U);let tt=j.toValue(I,!0),it=j.toValue(E,!0),et=Math.abs(f(it-tt));et<V?this.grabbedLeft?I=j.toPixels(it-V-G,!0):this.grabbedRight&&(E=j.toPixels(tt+V+G,!0)):M(H)&&f(et-G)>H&&(this.grabbedLeft?I=j.toPixels(it-H-G,!0):this.grabbedRight&&(E=j.toPixels(tt+H+G,!0))),this.zoomedMax=x(Math.max(I,E),0,$),this.zoomedMin=x(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(I,E),0,$),this.range=this.zoomedMax-this.zoomedMin,$=Math.round(this.zoomedMax);let st=Math.round(this.zoomedMin);N&&(this.navigatorGroup.attr({visibility:"inherit"}),Q=B&&!this.hasDragged?"animate":"attr",this.drawMasks(st,$,X,Q),this.drawOutline(st,$,X,Q),this.navigatorOptions.handles.enabled&&(this.drawHandle(st,0,X,Q),this.drawHandle($,1,X,Q))),this.scrollbar&&(X?(Z=this.top-K,Y=this.left-q+(N||!W.opposite?0:(W.titleOffset||0)+W.axisTitleMargin),q=J+2*K):(Z=this.top+(N?this.height:-q),Y=this.left-K),this.scrollbar.position(Y,Z,U,q),this.scrollbar.setRange(this.zoomedMin/(J||1),this.zoomedMax/(J||1))),this.rendered=!0,this.isDirty=!1,z(this,"afterRender")}addMouseEvents(){let u=this,v=u.chart,I=v.container,E=[],R,j;u.mouseMoveHandler=R=function(G){u.onMouseMove(G)},u.mouseUpHandler=j=function(G){u.onMouseUp(G)},(E=u.getPartsEvents("mousedown")).push(b(v.renderTo,"mousemove",R),b(I.ownerDocument,"mouseup",j),b(v.renderTo,"touchmove",R),b(I.ownerDocument,"touchend",j)),E.concat(u.getPartsEvents("touchstart")),u.eventsToUnbind=E,u.series&&u.series[0]&&E.push(b(u.series[0].xAxis,"foundExtremes",function(){v.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(u){let v=this,I=[];return["shades","handles"].forEach(function(E){v[E].forEach(function(R,j){I.push(b(R.element,u,function(G){v[E+"Mousedown"](G,j)}))})}),I}shadesMousedown(u,v){u=this.chart.pointer?.normalize(u)||u;let I=this.chart,E=this.xAxis,R=this.zoomedMin,j=this.size,G=this.range,W=this.left,N=u.chartX,B,X,V,H;I.inverted&&(N=u.chartY,W=this.top),v===1?(this.grabbedCenter=N,this.fixedWidth=G,this.dragOffset=N-R):(H=N-W-G/2,v===0?H=Math.max(0,H):v===2&&H+G>=j&&(H=j-G,this.reversedExtremes?(H-=G,X=this.getUnionExtremes().dataMin):B=this.getUnionExtremes().dataMax),H!==R&&(this.fixedWidth=G,M((V=E.navigatorAxis.toFixedRange(H,H+G,X,B)).min)&&z(this,"setRange",{min:Math.min(V.min,V.max),max:Math.max(V.min,V.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(u,v){u=this.chart.pointer?.normalize(u)||u;let I=this.chart,E=I.xAxis[0],R=this.reversedExtremes;v===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=R?E.min:E.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=R?E.max:E.min),I.setFixedRange(void 0)}onMouseMove(u){let v=this,I=v.chart,E=v.navigatorSize,R=v.range,j=v.dragOffset,G=I.inverted,W=v.left,N;(!u.touches||u.touches[0].pageX!==0)&&(N=(u=I.pointer?.normalize(u)||u).chartX,G&&(W=v.top,N=u.chartY),v.grabbedLeft?(v.hasDragged=!0,v.render(0,0,N-W,v.otherHandlePos)):v.grabbedRight?(v.hasDragged=!0,v.render(0,0,v.otherHandlePos,N-W)):v.grabbedCenter&&(v.hasDragged=!0,N<j?N=j:N>E+j-R&&(N=E+j-R),v.render(0,0,N-j,N-j+R)),v.hasDragged&&v.scrollbar&&F(v.scrollbar.options.liveRedraw,!p&&!this.chart.boosted)&&(u.DOMType=u.type,setTimeout(function(){v.onMouseUp(u)},0)))}onMouseUp(u){let v,I,E,R,j,G,W=this.chart,N=this.xAxis,B=this.scrollbar,X=u.DOMEvent||u,V=W.inverted,H=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!B||!B.hasDragged)||u.trigger==="scrollbar")&&(E=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?R=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(j=this.fixedExtreme),this.zoomedMax===this.size&&(j=this.reversedExtremes?E.dataMin:E.dataMax),this.zoomedMin===0&&(R=this.reversedExtremes?E.dataMax:E.dataMin),M((G=N.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,R,j)).min)&&z(this,"setRange",{min:Math.min(G.min,G.max),max:Math.max(G.min,G.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:X}})),u.DOMType!=="mousemove"&&u.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&C(this.zoomedMin)&&C(this.zoomedMax)&&(I=Math.round(this.zoomedMin),v=Math.round(this.zoomedMax),this.shades&&this.drawMasks(I,v,V,H),this.outline&&this.drawOutline(I,v,V,H),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(I,0,V,H),this.drawHandle(v,1,V,H)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(u){u()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let u=this.baseSeries||[];this.navigatorEnabled&&u[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&u.forEach(function(v){S(v,"updatedData",this.updatedDataHandler)},this),u[0].xAxis&&S(u[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(u){let v=u.options,I=v.navigator||{},E=I.enabled,R=v.scrollbar||{},j=R.enabled,G=E&&I.height||0,W=j&&R.height||0,N=R.buttonsEnabled&&W||0;this.handles=[],this.shades=[],this.chart=u,this.setBaseSeries(),this.height=G,this.scrollbarHeight=W,this.scrollButtonSize=N,this.scrollbarEnabled=j,this.navigatorEnabled=E,this.navigatorOptions=I,this.scrollbarOptions=R,this.setOpposite();let B=this,X=B.baseSeries,V=u.xAxis.length,H=u.yAxis.length,K=X&&X[0]&&X[0].xAxis||u.xAxis[0]||{options:{}};if(u.isDirtyBox=!0,B.navigatorEnabled){let U=this.getXAxisOffsets();B.xAxis=new i(u,A({breaks:K.options.breaks,ordinal:K.options.ordinal,overscroll:K.options.overscroll},I.xAxis,{type:"datetime",yAxis:I.yAxis?.id,index:V,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:K.options.ordinal?0:K.options.minPadding,maxPadding:K.options.ordinal?0:K.options.maxPadding,zoomEnabled:!1},u.inverted?{offsets:U,width:G}:{offsets:U,height:G}),"xAxis"),B.yAxis=new i(u,A(I.yAxis,{alignTicks:!1,offset:0,index:H,isInternal:!0,reversed:F(I.yAxis&&I.yAxis.reversed,u.yAxis[0]&&u.yAxis[0].reversed,!1),zoomEnabled:!1},u.inverted?{width:G}:{height:G}),"yAxis"),X||I.series.data?B.updateNavigatorSeries(!1):u.series.length===0&&(B.unbindRedraw=b(u,"beforeRedraw",function(){u.series.length>0&&!B.series&&(B.setBaseSeries(),B.unbindRedraw())})),B.reversedExtremes=u.inverted&&!B.xAxis.reversed||!u.inverted&&B.xAxis.reversed,B.renderElements(),B.addMouseEvents()}else B.xAxis={chart:u,navigatorAxis:{fake:!0},translate:function(U,Y){let Z=u.xAxis[0],q=Z.getExtremes(),J=Z.len-2*N,Q=D("min",Z.options.min,q.dataMin),$=D("max",Z.options.max,q.dataMax)-Q;return Y?U*$/J+Q:J*(U-Q)/$},toPixels:function(U){return this.translate(U)},toValue:function(U){return this.translate(U,!0)}},B.xAxis.navigatorAxis.axis=B.xAxis,B.xAxis.navigatorAxis.toFixedRange=a.prototype.toFixedRange.bind(B.xAxis.navigatorAxis);if(u.options.scrollbar.enabled){let U=A(u.options.scrollbar,{vertical:u.inverted});!C(U.margin)&&B.navigatorEnabled&&(U.margin=u.inverted?-3:3),u.scrollbar=B.scrollbar=new h(u.renderer,U,u),b(B.scrollbar,"changed",function(Y){let Z=B.size,q=Z*this.to,J=Z*this.from;B.hasDragged=B.scrollbar.hasDragged,B.render(0,0,J,q),this.shouldUpdateExtremes(Y.DOMType)&&setTimeout(function(){B.onMouseUp(Y)})})}B.addBaseSeriesEvents(),B.addChartEvents()}setOpposite(){let u=this.navigatorOptions,v=this.navigatorEnabled,I=this.chart;this.opposite=F(u.opposite,!!(!v&&I.inverted))}getUnionExtremes(u){let v,I=this.chart.xAxis[0],E=this.xAxis,R=E.options,j=I.options;return u&&I.dataMin===null||(v={dataMin:F(R&&R.min,D("min",j.min,I.dataMin,E.dataMin,E.min)),dataMax:F(R&&R.max,D("max",j.max,I.dataMax,E.dataMax,E.max))}),v}setBaseSeries(u,v){let I=this.chart,E=this.baseSeries=[];u=u||I.options&&I.options.navigator.baseSeries||(I.series.length?k(I.series,R=>!R.options.isInternal).index:0),(I.series||[]).forEach((R,j)=>{!R.options.isInternal&&(R.options.showInNavigator||(j===u||R.options.id===u)&&R.options.showInNavigator!==!1)&&E.push(R)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,v)}updateNavigatorSeries(u,v){let I=this,E=I.chart,R=I.baseSeries,j={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:this.navigatorOptions.xAxis?.id,yAxis:this.navigatorOptions.yAxis?.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},G=I.series=(I.series||[]).filter(V=>{let H=V.baseSeries;return!(0>R.indexOf(H))||(H&&(S(H,"updatedData",I.updatedDataHandler),delete H.navigatorSeries),V.chart&&V.destroy(),!1)}),W,N,B=I.navigatorOptions.series,X;R&&R.length&&R.forEach(V=>{let H=V.navigatorSeries,K=w({color:V.color,visible:V.visible},O(B)?d.navigator.series:B);if(H&&I.navigatorOptions.adaptToUpdatedData===!1)return;j.name="Navigator "+R.length,X=(W=V.options||{}).navigatorOptions||{},K.dataLabels=T(K.dataLabels),(N=A(W,j,K,X)).pointRange=F(K.pointRange,X.pointRange,d.plotOptions[N.type||"line"].pointRange);let U=X.data||K.data;I.hasNavigatorData=I.hasNavigatorData||!!U,N.data=U||W.data&&W.data.slice(0),H&&H.options?H.update(N,v):(V.navigatorSeries=E.initSeries(N),E.setSortedData(),V.navigatorSeries.baseSeries=V,G.push(V.navigatorSeries))}),(B.data&&!(R&&R.length)||O(B))&&(I.hasNavigatorData=!1,(B=T(B)).forEach((V,H)=>{j.name="Navigator "+(G.length+1),(N=A(d.navigator.series,{color:E.series[H]&&!E.series[H].options.isInternal&&E.series[H].color||E.options.colors[H]||E.options.colors[0]},j,V)).data=V.data,N.data&&(I.hasNavigatorData=!0,G.push(E.initSeries(N)))})),u&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let u=this,v=u.baseSeries||[];v[0]&&v[0].xAxis&&v[0].eventsToUnbind.push(b(v[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),v.forEach(I=>{I.eventsToUnbind.push(b(I,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),I.eventsToUnbind.push(b(I,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&I.xAxis&&I.eventsToUnbind.push(b(I,"updatedData",this.updatedDataHandler)),I.eventsToUnbind.push(b(I,"remove",function(){v&&_(v,I),this.navigatorSeries&&(_(u.series,this.navigatorSeries),M(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(u){return this.baseSeries.reduce(function(v,I){return Math.min(v,I.xData&&I.xData.length?I.xData[0]:v)},u)}modifyNavigatorAxisExtremes(){let u=this.xAxis;if(u.getExtremes!==void 0){let v=this.getUnionExtremes(!0);v&&(v.dataMin!==u.min||v.dataMax!==u.max)&&(u.min=v.dataMin,u.max=v.dataMax)}}modifyBaseAxisExtremes(){let u,v,I=this.chart.navigator,E=this.getExtremes(),R=E.min,j=E.max,G=E.dataMin,W=E.dataMax,N=j-R,B=I.stickToMin,X=I.stickToMax,V=F(this.ordinal?.convertOverscroll(this.options.overscroll),0),H=I.series&&I.series[0],K=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(B&&(u=(v=G)+N),X&&(u=W+V,B||(v=Math.max(G,u-N,I.getBaseSeriesMin(H&&H.xData?H.xData[0]:-Number.MAX_VALUE)))),K&&(B||X)&&C(v)&&(this.min=this.userMin=v,this.max=this.userMax=u)),I.stickToMin=I.stickToMax=null}updatedDataHandler(){let u=this.chart.navigator,v=this.navigatorSeries,I=u.reversedExtremes?Math.round(u.zoomedMin)===0:Math.round(u.zoomedMax)>=Math.round(u.size);u.stickToMax=F(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,I),u.stickToMin=u.shouldStickToMin(this,u),v&&!u.hasNavigatorData&&(v.options.pointStart=this.xData[0],v.setData(this.options.data,!1,null,!1))}shouldStickToMin(u,v){let I=v.getBaseSeriesMin(u.xData[0]),E=u.xAxis,R=E.max,j=E.min,G=E.options.range;return!!(C(R)&&C(j))&&(G&&R-I>0?R-I<G:j<=I)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(b(this.chart,"redraw",function(){let u=this.navigator,v=u&&(u.baseSeries&&u.baseSeries[0]&&u.baseSeries[0].xAxis||this.xAxis[0]);v&&u.render(v.min,v.max)}),b(this.chart,"getMargins",function(){let u=this.navigator,v=u.opposite?"plotTop":"marginBottom";this.inverted&&(v=u.opposite?"marginRight":"plotLeft"),this[v]=(this[v]||0)+(u.navigatorEnabled||!this.inverted?u.height+u.scrollbarHeight:0)+u.navigatorOptions.margin}),b(P,"setRange",function(u){this.chart.xAxis[0].setExtremes(u.min,u.max,u.redraw,u.animation,u.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(_(this.chart.xAxis,this.xAxis),_(this.chart.axes,this.xAxis)),this.yAxis&&(_(this.chart.yAxis,this.yAxis),_(this.chart.axes,this.yAxis)),(this.series||[]).forEach(u=>{u.destroy&&u.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(u=>{this[u]&&this[u].destroy&&this[u].destroy(),this[u]=null}),[this.handles].forEach(u=>{L(u)}),this.navigatorEnabled=!1}}return P}),e(t,"Core/Axis/OrdinalAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(i,s,r,o){var a;let{addEvent:l,correctFloat:h,css:c,defined:g,error:d,isNumber:p,pick:y,timeUnits:b,isString:x}=o;return function(f){function M(D,P,m,u,v=[],I=0,E){let R={},j=this.options.tickPixelInterval,G=this.chart.time,W=[],N,B,X,V,H,K=0,U=[],Y=-Number.MAX_VALUE;if(!this.options.ordinal&&!this.options.breaks||!v||v.length<3||P===void 0)return G.getTimeTicks.apply(G,arguments);let Z=v.length;for(N=0;N<Z;N++){if(H=N&&v[N-1]>m,v[N]<P&&(K=N),N===Z-1||v[N+1]-v[N]>5*I||H){if(v[N]>Y){for(B=G.getTimeTicks(D,v[K],v[N],u);B.length&&B[0]<=Y;)B.shift();B.length&&(Y=B[B.length-1]),W.push(U.length),U=U.concat(B)}K=N+1}if(H)break}if(B){if(V=B.info,E&&V.unitRange<=b.hour){for(K=1,N=U.length-1;K<N;K++)G.dateFormat("%d",U[K])!==G.dateFormat("%d",U[K-1])&&(R[U[K]]="day",X=!0);X&&(R[U[0]]="day"),V.higherRanks=R}V.segmentStarts=W,U.info=V}else d(12,!1,this.chart);if(E&&g(j)){let q=U.length,J=[],Q=[],$,tt,it,et,st,rt=q;for(;rt--;)tt=this.translate(U[rt]),it&&(Q[rt]=it-tt),J[rt]=it=tt;for(Q.sort((nt,ot)=>nt-ot),(et=Q[Math.floor(Q.length/2)])<.6*j&&(et=null),rt=U[q-1]>m?q-1:q,it=void 0;rt--;)st=Math.abs(it-(tt=J[rt])),it&&st<.8*j&&(et===null||st<.8*et)?(R[U[rt]]&&!R[U[rt+1]]?($=rt+1,it=tt):$=rt,U.splice($,1)):it=tt}return U}function L(D){let P=this.ordinal.positions;if(!P)return D;let m=P.length-1,u;return D<0?D=P[0]:D>m?D=P[m]:(m=Math.floor(D),u=D-m),u!==void 0&&P[m]!==void 0?P[m]+(u?u*(P[m+1]-P[m]):0):D}function _(D){let P=this.ordinal,m=this.old?this.old.min:this.min,u=this.old?this.old.transA:this.transA,v=P.getExtendedPositions();if(v&&v.length){let I=h((D-m)*u+this.minPixelPadding),E=h(P.getIndexOfPoint(I,v)),R=h(E%1);if(E>=0&&E<=v.length-1){let j=v[Math.floor(E)],G=v[Math.ceil(E)];return v[Math.floor(E)]+R*(G-j)}}return D}function w(D,P){let m=f.Additions.findIndexOf(D,P,!0);if(D[m]===P)return m;let u=(P-D[m])/(D[m+1]-D[m]);return m+u}function k(){this.ordinal||(this.ordinal=new f.Additions(this))}function z(){let{eventArgs:D,options:P}=this;if(this.isXAxis&&g(P.overscroll)&&P.overscroll!==0&&p(this.max)&&p(this.min)&&(this.options.ordinal&&!this.ordinal.originalOrdinalRange&&this.ordinal.getExtendedPositions(!1),this.max===this.dataMax&&(D?.trigger!=="pan"||this.isInternal)&&D?.trigger!=="navigator")){let m=this.ordinal.convertOverscroll(P.overscroll);this.max+=m,!this.isInternal&&g(this.userMin)&&D?.trigger!=="mousewheel"&&(this.min+=m)}}function O(){this.horiz&&!this.isDirty&&(this.isDirty=this.isOrdinal&&this.chart.navigator&&!this.chart.navigator.adaptToUpdatedData)}function C(){this.ordinal&&(this.ordinal.beforeSetTickPositions(),this.tickInterval=this.ordinal.postProcessTickInterval(this.tickInterval))}function A(D){let P=this.xAxis[0],m=P.ordinal.convertOverscroll(P.options.overscroll),u=D.originalEvent.chartX,v=this.options.chart.panning,I=!1;if(v&&v.type!=="y"&&P.options.ordinal&&P.series.length&&(!D.touches||D.touches.length<=1)){let E,R,j=this.mouseDownX,G=P.getExtremes(),W=G.dataMin,N=G.dataMax,B=G.min,X=G.max,V=this.hoverPoints,H=P.closestPointRange||P.ordinal&&P.ordinal.overscrollPointsRange,K=Math.round((j-u)/(P.translationSlope*(P.ordinal.slope||H))),U=P.ordinal.getExtendedPositions(),Y={ordinal:{positions:U,extendedOrdinalPositions:U}},Z=P.index2val,q=P.val2lin;if(B<=W&&K<0||X+m>=N&&K>0)return;Y.ordinal.positions?Math.abs(K)>1&&(V&&V.forEach(function(J){J.setState()}),N>(R=Y.ordinal.positions)[R.length-1]&&R.push(N),this.setFixedRange(X-B),(E=P.navigatorAxis.toFixedRange(void 0,void 0,Z.apply(Y,[q.apply(Y,[B,!0])+K]),Z.apply(Y,[q.apply(Y,[X,!0])+K]))).min>=Math.min(G.dataMin,B)&&E.max<=Math.max(N,X)+m&&P.setExtremes(E.min,E.max,!0,!1,{trigger:"pan"}),this.mouseDownX=u,c(this.container,{cursor:"move"})):I=!0}else I=!0;I||v&&/y/.test(v.type)?m&&(P.max=P.dataMax+m):D.preventDefault()}function F(){let D=this.xAxis;D&&D.options.ordinal&&(delete D.ordinal.index,delete D.ordinal.originalOrdinalRange)}function S(D,P){let m,u=this.ordinal,v=u.positions,I=u.slope,E;if(!v)return D;let R=v.length;if(v[0]<=D&&v[R-1]>=D)m=w(v,D);else{if(!((E=u.getExtendedPositions&&u.getExtendedPositions())&&E.length))return D;let j=E.length;I||(I=(E[j-1]-E[0])/j);let G=w(E,v[0]);if(D>=E[0]&&D<=E[j-1])m=w(E,D)-G;else{if(!P)return D;m=D<E[0]?-G-(E[0]-D)/I:(D-E[j-1])/I+j-G}}return P?m:I*(m||0)+u.offset}f.compose=function(D,P,m){let u=D.prototype;return u.ordinal2lin||(u.getTimeTicks=M,u.index2val=L,u.lin2val=_,u.val2lin=S,u.ordinal2lin=u.val2lin,l(D,"afterInit",k),l(D,"foundExtremes",z),l(D,"afterSetScale",O),l(D,"initialAxisTranslation",C),l(m,"pan",A),l(m,"touchpan",A),l(P,"updatedData",F)),D};class T{constructor(P){this.index={},this.axis=P}beforeSetTickPositions(){let P=this.axis,m=P.ordinal,u=P.getExtremes(),v=u.min,I=u.max,E=P.brokenAxis?.hasBreaks,R=P.options.ordinal,j,G,W,N,B,X,V,H=[],K=Number.MAX_VALUE,U=!1,Y=!1,Z=!1;if(R||E){let q=0;if(P.series.forEach(function(J,Q){if(G=[],Q>0&&J.options.id!=="highcharts-navigator-series"&&J.processedXData.length>1&&(Y=q!==J.processedXData[1]-J.processedXData[0]),q=J.processedXData[1]-J.processedXData[0],J.boosted&&(Z=J.boosted),J.reserveSpace()&&(J.takeOrdinalPosition!==!1||E)&&(j=(H=H.concat(J.processedXData)).length,H.sort(function($,tt){return $-tt}),K=Math.min(K,y(J.closestPointRange,K)),j)){for(Q=0;Q<j-1;)H[Q]!==H[Q+1]&&G.push(H[Q+1]),Q++;G[0]!==H[0]&&G.unshift(H[0]),H=G}}),P.ordinal.originalOrdinalRange||(P.ordinal.originalOrdinalRange=(H.length-1)*K),Y&&Z&&(H.pop(),H.shift()),(j=H.length)>2){for(W=H[1]-H[0],V=j-1;V--&&!U;)H[V+1]-H[V]!==W&&(U=!0);!P.options.keepOrdinalPadding&&(H[0]-v>W||I-H[H.length-1]>W)&&(U=!0)}else P.options.overscroll&&(j===2?K=H[1]-H[0]:j===1?(K=P.ordinal.convertOverscroll(P.options.overscroll),H=[H[0],H[0]+K]):K=m.overscrollPointsRange);U||P.forceOrdinal?(P.options.overscroll&&(m.overscrollPointsRange=K,H=H.concat(m.getOverscrollPositions())),m.positions=H,N=P.ordinal2lin(Math.max(v,H[0]),!0),B=Math.max(P.ordinal2lin(Math.min(I,H[H.length-1]),!0),1),m.slope=X=(I-v)/(B-N),m.offset=v-N*X):(m.overscrollPointsRange=y(P.closestPointRange,m.overscrollPointsRange),m.positions=P.ordinal.slope=m.offset=void 0)}P.isOrdinal=R&&U,m.groupIntervalFactor=null}static findIndexOf(P,m,u){let v=0,I=P.length-1,E;for(;v<I;)P[E=Math.ceil((v+I)/2)]<=m?v=E:I=E-1;return P[v]===m||u?v:-1}getExtendedPositions(P=!0){let m=this,u=m.axis,v=u.constructor.prototype,I=u.chart,E=u.series[0]?.currentDataGrouping,R=E?E.count+E.unitName:"raw",j=P?u.ordinal.convertOverscroll(u.options.overscroll):0,G=u.getExtremes(),W,N,B=m.index;return B||(B=m.index={}),B[R]||((W={series:[],chart:I,forceOrdinal:!1,getExtremes:function(){return{min:G.dataMin,max:G.dataMax+j}},applyGrouping:v.applyGrouping,getGroupPixelWidth:v.getGroupPixelWidth,getTimeTicks:v.getTimeTicks,options:{ordinal:!0},ordinal:{getGroupIntervalFactor:this.getGroupIntervalFactor},ordinal2lin:v.ordinal2lin,getIndexOfPoint:v.getIndexOfPoint,val2lin:v.val2lin}).ordinal.axis=W,u.series.forEach(function(X){N={xAxis:W,xData:X.xData.slice(),chart:I,groupPixelWidth:X.groupPixelWidth,destroyGroupedData:s.noop,getProcessedData:r.prototype.getProcessedData,applyGrouping:r.prototype.applyGrouping,reserveSpace:r.prototype.reserveSpace,visible:X.visible},P&&(N.xData=N.xData.concat(m.getOverscrollPositions())),N.options={dataGrouping:E?{firstAnchor:X.options.dataGrouping?.firstAnchor,anchor:X.options.dataGrouping?.anchor,lastAnchor:X.options.dataGrouping?.firstAnchor,enabled:!0,forced:!0,approximation:"open",units:[[E.unitName,[E.count]]]}:{enabled:!1}},W.series.push(N),X.processData.apply(N)}),W.applyGrouping({hasExtremesChanged:!0}),N?.closestPointRange!==N?.basePointRange&&N.currentDataGrouping&&(W.forceOrdinal=!0),u.ordinal.beforeSetTickPositions.apply({axis:W}),!u.ordinal.originalOrdinalRange&&W.ordinal.originalOrdinalRange&&(u.ordinal.originalOrdinalRange=W.ordinal.originalOrdinalRange),B[R]=W.ordinal.positions),B[R]}getGroupIntervalFactor(P,m,u){let v=u.processedXData,I=v.length,E=[],R,j,G=this.groupIntervalFactor;if(!G){for(j=0;j<I-1;j++)E[j]=v[j+1]-v[j];E.sort(function(W,N){return W-N}),R=E[Math.floor(I/2)],P=Math.max(P,v[0]),m=Math.min(m,v[I-1]),this.groupIntervalFactor=G=I*R/(m-P)}return G}getIndexOfPoint(P,m){let u,v=this.axis,I=0,E=function(G){let{min:W,max:N}=v;return!!(g(W)&&g(N))&&G.points.some(B=>B.x>=W&&B.x<=N)};v.series.forEach(G=>{let W=G.points?.[0];g(W?.plotX)&&(W.plotX<u||!g(u))&&E(G)&&(u=W.plotX,I=W.x)}),u??(u=v.minPixelPadding);let R=v.translationSlope*(this.slope||v.closestPointRange||this.overscrollPointsRange),j=h((P-u)/R);return T.findIndexOf(m,I,!0)+j}getOverscrollPositions(){let P=this.axis,m=this.convertOverscroll(P.options.overscroll),u=this.overscrollPointsRange,v=[],I=P.dataMax;if(g(u))for(;I<=P.dataMax+m;)v.push(I+=u);return v}postProcessTickInterval(P){let m=this.axis,u=this.slope;return u?m.options.breaks?m.closestPointRange||P:P/(u/m.closestPointRange):P}convertOverscroll(P=0){let m=this,u=m.axis,v=function(I){return y(m.originalOrdinalRange,g(u.dataMax)&&g(u.dataMin)?u.dataMax-u.dataMin:0)*I};if(x(P)){let I=parseInt(P,10);if(/%$/.test(P))return v(I/100);if(/px/.test(P)){let E=Math.min(I,.9*u.len)/u.len;return v(E/(1-E))}return 0}return P}}f.Additions=T}(a||(a={})),a}),e(t,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%e %b %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#334eff",cursor:"pointer",fontSize:"0.8em"},labelStyle:{color:"#666666",fontSize:"0.8em"}}}}),e(t,"Stock/RangeSelector/RangeSelectorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Core/Utilities.js"]],function(i,s,r,o){let a,{defaultOptions:l}=i,{composed:h}=s,{addEvent:c,defined:g,extend:d,isNumber:p,merge:y,pick:b,pushUnique:x}=o,f=[];function M(){let C,A,F=this.range,S=F.type,T=this.max,D=this.chart.time,P=function(u,v){let I=S==="year"?"FullYear":"Month",E=new D.Date(u),R=D.get(I,E);return D.set(I,E,R+v),R===D.get(I,E)&&D.set("Date",E,0),E.getTime()-u};p(F)?(C=T-F,A=F):F&&(C=T+P(T,-(F.count||1)),this.chart&&this.chart.setFixedRange(T-C));let m=b(this.dataMin,Number.MIN_VALUE);return p(C)||(C=m),C<=m&&(C=m,A===void 0&&(A=P(C,F.count)),this.newMax=Math.min(C+A,b(this.dataMax,Number.MAX_VALUE))),p(T)?!p(F)&&F&&F._offsetMin&&(C+=F._offsetMin):C=void 0,C}function L(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new a(this))}function _(){let C=this.rangeSelector;if(C){p(C.deferredYTDClick)&&(C.clickButton(C.deferredYTDClick),delete C.deferredYTDClick);let A=C.options.verticalAlign;C.options.floating||(A==="bottom"?this.extraBottomMargin=!0:A==="middle"||(this.extraTopMargin=!0))}}function w(){let C,A=this.rangeSelector;if(!A)return;let F=this.xAxis[0].getExtremes(),S=this.legend,T=A&&A.options.verticalAlign;p(F.min)&&A.render(F.min,F.max),S.display&&T==="top"&&T===S.options.verticalAlign&&(C=y(this.spacingBox),S.options.layout==="vertical"?C.y=this.plotTop:C.y+=A.getHeight(),S.group.placed=!1,S.align(C))}function k(){for(let C=0,A=f.length;C<A;++C){let F=f[C];if(F[0]===this){F[1].forEach(S=>S()),f.splice(C,1);return}}}function z(){let C=this.rangeSelector;if(C){let A=C.getHeight();this.extraTopMargin&&(this.plotTop+=A),this.extraBottomMargin&&(this.marginBottom+=A)}}function O(C){let A=C.options.rangeSelector,F=this.extraBottomMargin,S=this.extraTopMargin,T=this.rangeSelector;if(A&&A.enabled&&!g(T)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=T=new a(this)),this.extraBottomMargin=!1,this.extraTopMargin=!1,T){let D=A&&A.verticalAlign||T.options&&T.options.verticalAlign;T.options.floating||(D==="bottom"?this.extraBottomMargin=!0:D==="middle"||(this.extraTopMargin=!0)),(this.extraBottomMargin!==F||this.extraTopMargin!==S)&&(this.isDirtyBox=!0)}}return{compose:function(C,A,F){if(a=F,x(h,"RangeSelector")){let S=A.prototype;C.prototype.minFromRange=M,c(A,"afterGetContainer",L),c(A,"beforeRender",_),c(A,"destroy",k),c(A,"getMargins",z),c(A,"redraw",w),c(A,"update",O),S.callbacks.push(w),d(l,{rangeSelector:r.rangeSelector}),d(l.lang,r.lang)}}}}),e(t,"Stock/RangeSelector/RangeSelector.js",[t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Stock/RangeSelector/RangeSelectorComposition.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"],t["Core/Axis/OrdinalAxis.js"]],function(i,s,r,o,a,l,h){let{defaultOptions:c}=s,{addEvent:g,createElement:d,css:p,defined:y,destroyObjectProperties:b,discardElement:x,extend:f,fireEvent:M,isNumber:L,merge:_,objectEach:w,pad:k,pick:z,pInt:O,splat:C}=l;class A{static compose(S,T){o.compose(S,T,A)}constructor(S){this.buttonOptions=A.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.init(S)}clickButton(S,T){let D=this.chart,P=this.buttonOptions[S],m=D.xAxis[0],u=D.scroller&&D.scroller.getUnionExtremes()||m||{},v=P.type,I=P.dataGrouping,E=u.dataMin,R=u.dataMax,j,G=m&&Math.round(Math.min(m.max,z(R,m.max))),W,N=P._range,B,X,V,H=!0;if(E!==null&&R!==null){if(this.setSelected(S),I&&(this.forcedDataGrouping=!0,i.prototype.setDataGrouping.call(m||{chart:this.chart},I,!1),this.frozenStates=P.preserveDataGrouping),v==="month"||v==="year")m?(X={range:P,max:G,chart:D,dataMin:E,dataMax:R},j=m.minFromRange.call(X),L(X.newMax)&&(G=X.newMax),H=!1):N=P;else if(N)G=Math.min((j=Math.max(G-N,E))+N,R),H=!1;else if(v==="ytd")if(m)(R===void 0||E===void 0)&&(E=Number.MAX_VALUE,R=Number.MIN_VALUE,D.series.forEach(K=>{let U=K.xData;U&&(E=Math.min(U[0],E),R=Math.max(U[U.length-1],R))}),T=!1),j=B=(V=this.getYTDExtremes(R,E,D.time.useUTC)).min,G=V.max;else{this.deferredYTDClick=S;return}else v==="all"&&m&&(D.navigator&&D.navigator.baseSeries[0]&&(D.navigator.baseSeries[0].xAxis.options.range=void 0),j=E,G=R);if(H&&P._offsetMin&&y(j)&&(j+=P._offsetMin),P._offsetMax&&y(G)&&(G+=P._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=S+1),m)m.setExtremes(j,G,z(T,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:P}),D.setFixedRange(P._range);else{W=C(D.options.xAxis)[0];let K=g(D,"afterGetAxes",function(){let U=D.xAxis[0];U.range=U.options.range=N,U.min=U.options.min=B});g(D,"load",function(){let U=D.xAxis[0];D.setFixedRange(P._range),U.options.range=W.range,U.options.min=W.min,K()})}M(this,"afterBtnClick")}}setSelected(S){this.selected=this.options.selected=S}init(S){let T=this,D=S.options.rangeSelector,P=D.buttons||T.defaultButtons.slice(),m=D.selected,u=function(){let v=T.minInput,I=T.maxInput;v&&v.blur&&M(v,"blur"),I&&I.blur&&M(I,"blur")};T.chart=S,T.options=D,T.buttons=[],T.buttonOptions=P,this.eventsToUnbind=[],this.eventsToUnbind.push(g(S.container,"mousedown",u)),this.eventsToUnbind.push(g(S,"resize",u)),P.forEach(T.computeButtonRange),m!==void 0&&P[m]&&this.clickButton(m,!1),this.eventsToUnbind.push(g(S,"load",function(){S.xAxis&&S.xAxis[0]&&g(S.xAxis[0],"setExtremes",function(v){L(this.max)&&L(this.min)&&this.max-this.min!==S.fixedRange&&v.trigger!=="rangeSelectorButton"&&v.trigger!=="updatedData"&&T.forcedDataGrouping&&!T.frozenStates&&this.setDataGrouping(!1,!1)})})),this.createElements()}updateButtonStates(){let S=this,T=this.chart,D=this.dropdown,P=this.dropdownLabel,m=T.xAxis[0],u=Math.round(m.max-m.min),v=!m.hasVisibleSeries,I=24*36e5,E=T.scroller&&T.scroller.getUnionExtremes()||m,R=E.dataMin,j=E.dataMax,G=S.getYTDExtremes(j,R,T.time.useUTC),W=G.min,N=G.max,B=S.selected,X=S.options.allButtonsEnabled,V=Array(S.buttonOptions.length).fill(0),H=L(B),K=S.buttons,U=!1,Y=null;S.buttonOptions.forEach((Z,q)=>{let J=Z._range,Q=Z.type,$=Z.count||1,tt=Z._offsetMax-Z._offsetMin,it=q===B,et=J>j-R,st=J<m.minRange,rt=!1,nt=J===u;if(it&&et&&(U=!0),m.isOrdinal&&m.ordinal?.positions&&J&&u<J){let ct=m.ordinal.positions,ht=h.Additions.findIndexOf(ct,m.min,!0),lt=Math.min(h.Additions.findIndexOf(ct,m.max,!0)+1,ct.length-1);ct[lt]-ct[ht]>J&&(nt=!0)}else(Q==="month"||Q==="year")&&u+36e5>={month:28,year:365}[Q]*I*$-tt&&u-36e5<={month:31,year:366}[Q]*I*$+tt?nt=!0:Q==="ytd"?(nt=N-W+tt===u,rt=!it):Q==="all"&&(nt=m.max-m.min>=j-R);let ot=!X&&!(U&&Q==="all")&&(et||st||v),at=U&&Q==="all"||!rt&&nt||it&&S.frozenStates;ot?V[q]=3:at&&(!H||q===B)&&(Y=q)}),Y!==null?(V[Y]=2,S.setSelected(Y)):(S.setSelected(),P&&(P.setState(0),P.attr({text:(c.lang.rangeSelectorZoom||"")+" \u25BE"})));for(let Z=0;Z<V.length;Z++){let q=V[Z],J=K[Z];if(J.state!==q&&(J.setState(q),D)){D.options[Z+1].disabled=q===3,q===2&&(P&&(P.setState(2),P.attr({text:S.buttonOptions[Z].text+" \u25BE"})),D.selectedIndex=Z+1);let Q=P.getBBox();p(D,{width:`${Q.width}px`,height:`${Q.height}px`})}}}computeButtonRange(S){let T=S.type,D=S.count||1,P={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};P[T]?S._range=P[T]*D:(T==="month"||T==="year")&&(S._range=24*{month:30,year:365}[T]*36e5*D),S._offsetMin=z(S.offsetMin,0),S._offsetMax=z(S.offsetMax,0),S._range+=S._offsetMax-S._offsetMin}getInputValue(S){let T=S==="min"?this.minInput:this.maxInput,D=this.chart.options.rangeSelector,P=this.chart.time;return T?(T.type==="text"&&D.inputDateParser||this.defaultInputDateParser)(T.value,P.useUTC,P):0}setInputValue(S,T){let D=this.options,P=this.chart.time,m=S==="min"?this.minInput:this.maxInput,u=S==="min"?this.minDateBox:this.maxDateBox;if(m){let v=m.getAttribute("data-hc-time"),I=y(v)?Number(v):void 0;if(y(T)){let E=I;y(E)&&m.setAttribute("data-hc-time-previous",E),m.setAttribute("data-hc-time",T),I=T}m.value=P.dateFormat(this.inputTypeFormats[m.type]||D.inputEditDateFormat,I),u&&u.attr({text:P.dateFormat(D.inputDateFormat,I)})}}setInputExtremes(S,T,D){let P=S==="min"?this.minInput:this.maxInput;if(P){let m=this.inputTypeFormats[P.type],u=this.chart.time;if(m){let v=u.dateFormat(m,T);P.min!==v&&(P.min=v);let I=u.dateFormat(m,D);P.max!==I&&(P.max=I)}}}showInput(S){let T=S==="min"?this.minDateBox:this.maxDateBox,D=S==="min"?this.minInput:this.maxInput;if(D&&T&&this.inputGroup){let P=D.type==="text",{translateX:m=0,translateY:u=0}=this.inputGroup,{x:v=0,width:I=0,height:E=0}=T,{inputBoxWidth:R}=this.options;p(D,{width:P?I+(R?-2:20)+"px":"auto",height:E-2+"px",border:"2px solid silver"}),P&&R?p(D,{left:m+v+"px",top:u+"px"}):p(D,{left:Math.min(Math.round(v+m-(D.offsetWidth-I)/2),this.chart.chartWidth-D.offsetWidth)+"px",top:u-(D.offsetHeight-E)/2+"px"})}}hideInput(S){let T=S==="min"?this.minInput:this.maxInput;T&&p(T,{top:"-9999em",border:0,width:"1px",height:"1px"})}defaultInputDateParser(S,T,D){let P=S.split("/").join("-").split(" ").join("T");if(P.indexOf("T")===-1&&(P+="T00:00"),T)P+="Z";else{let u;if(r.isSafari&&!((u=P).length>6&&(u.lastIndexOf("-")===u.length-6||u.lastIndexOf("+")===u.length-6))){let v=new Date(P).getTimezoneOffset()/60;P+=v<=0?`+${k(-v)}:00`:`-${k(v)}:00`}}let m=Date.parse(P);if(!L(m)){let u=S.split("-");m=Date.UTC(O(u[0]),O(u[1])-1,O(u[2]))}return D&&T&&L(m)&&(m+=D.getTimezoneOffset(m)),m}drawInput(S){let{chart:T,div:D,inputGroup:P}=this,m=this,u=T.renderer.style||{},v=T.renderer,I=T.options.rangeSelector,E=c.lang,R=S==="min";function j(V){let{maxInput:H,minInput:K}=m,U=T.xAxis[0],Y=T.scroller?.getUnionExtremes()||U,Z=Y.dataMin,q=Y.dataMax,J=T.xAxis[0].getExtremes()[V],Q=m.getInputValue(V);L(Q)&&Q!==J&&(R&&H&&L(Z)?Q>Number(H.getAttribute("data-hc-time"))?Q=void 0:Q<Z&&(Q=Z):K&&L(q)&&(Q<Number(K.getAttribute("data-hc-time"))?Q=void 0:Q>q&&(Q=q)),Q!==void 0&&U.setExtremes(R?Q:U.min,R?U.max:Q,void 0,void 0,{trigger:"rangeSelectorInput"}))}let G=E[R?"rangeSelectorFrom":"rangeSelectorTo"]||"",W=v.label(G,0).addClass("highcharts-range-label").attr({padding:G?2:0,height:G?I.inputBoxHeight:0}).add(P),N=v.label("",0).addClass("highcharts-range-input").attr({padding:2,width:I.inputBoxWidth,height:I.inputBoxHeight,"text-align":"center"}).on("click",function(){m.showInput(S),m[S+"Input"].focus()});T.styledMode||N.attr({stroke:I.inputBoxBorderColor,"stroke-width":1}),N.add(P);let B=d("input",{name:S,className:"highcharts-range-selector"},void 0,D);B.setAttribute("type",function(V){if(V.indexOf("%L")!==-1)return"text";let H=["a","A","d","e","w","b","B","m","o","y","Y"].some(U=>V.indexOf("%"+U)!==-1),K=["H","k","I","l","M","S"].some(U=>V.indexOf("%"+U)!==-1);return H&&K?"datetime-local":H?"date":K?"time":"text"}(I.inputDateFormat||"%e %b %Y")),T.styledMode||(W.css(_(u,I.labelStyle)),N.css(_({color:"#333333"},u,I.inputStyle)),p(B,f({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:u.fontSize,fontFamily:u.fontFamily,top:"-9999em"},I.inputStyle))),B.onfocus=()=>{m.showInput(S)},B.onblur=()=>{B===r.doc.activeElement&&j(S),m.hideInput(S),m.setInputValue(S),B.blur()};let X=!1;return B.onchange=()=>{X||(j(S),m.hideInput(S),B.blur())},B.onkeypress=V=>{V.keyCode===13&&j(S)},B.onkeydown=V=>{X=!0,(V.key==="ArrowUp"||V.key==="ArrowDown"||V.key==="Tab")&&j(S)},B.onkeyup=()=>{X=!1},{dateBox:N,input:B,label:W}}getPosition(){let S=this.chart,T=S.options.rangeSelector,D=T.verticalAlign==="top"?S.plotTop-S.axisOffset[0]:0;return{buttonTop:D+T.buttonPosition.y,inputTop:D+T.inputPosition.y-10}}getYTDExtremes(S,T,D){let P=this.chart.time,m=new P.Date(S),u=P.get("FullYear",m),v=Math.max(T,D?P.Date.UTC(u,0,1):+new P.Date(u,0,1)),I=m.getTime();return{max:Math.min(S||I,I),min:v}}createElements(){let S=this.chart,T=S.renderer,D=S.container,P=S.options,m=P.rangeSelector,u=m.inputEnabled,v=z(P.chart.style?.zIndex,0)+1;if(m.enabled!==!1&&(this.group=T.g("range-selector-group").attr({zIndex:7}).add(),this.div=d("div",void 0,{position:"relative",height:0,zIndex:v}),this.buttonOptions.length&&this.renderButtons(),D.parentNode&&D.parentNode.insertBefore(this.div,D),u)){this.inputGroup=T.g("input-group").add(this.group);let I=this.drawInput("min");this.minDateBox=I.dateBox,this.minLabel=I.label,this.minInput=I.input;let E=this.drawInput("max");this.maxDateBox=E.dateBox,this.maxLabel=E.label,this.maxInput=E.input}}render(S,T){let D=this.chart,P=D.options.rangeSelector,m=P.inputEnabled;if(P.enabled!==!1){if(m){this.setInputValue("min",S),this.setInputValue("max",T);let u=D.scroller&&D.scroller.getUnionExtremes()||D.xAxis[0]||{};if(y(u.dataMin)&&y(u.dataMax)){let v=D.xAxis[0].minRange||0;this.setInputExtremes("min",u.dataMin,Math.min(u.dataMax,this.getInputValue("max"))-v),this.setInputExtremes("max",Math.max(u.dataMin,this.getInputValue("min"))+v,u.dataMax)}if(this.inputGroup){let v=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(I=>{if(I){let{width:E}=I.getBBox();E&&(I.attr({x:v}),v+=E+P.inputSpacing)}})}}this.alignElements(),this.updateButtonStates()}}renderButtons(){let{buttons:S,chart:T,options:D}=this,P=c.lang,m=T.renderer,u=_(D.buttonTheme),v=u&&u.states,I=u.width||28;delete u.width,delete u.states,this.buttonGroup=m.g("range-selector-buttons").add(this.group);let E=this.dropdown=d("select",void 0,{position:"absolute",padding:0,border:0,cursor:"pointer",opacity:1e-4},this.div),R=T.userOptions.rangeSelector?.buttonTheme;this.dropdownLabel=m.button("",0,0,()=>{},_(u,{"stroke-width":z(u["stroke-width"],0),width:"auto",paddingLeft:z(D.buttonTheme.paddingLeft,R?.padding,8),paddingRight:z(D.buttonTheme.paddingRight,R?.padding,8)}),v&&v.hover,v&&v.select,v&&v.disabled).hide().add(this.group),g(E,"touchstart",()=>{E.style.fontSize="16px"});let j=r.isMS?"mouseover":"mouseenter",G=r.isMS?"mouseout":"mouseleave";g(E,j,()=>{M(this.dropdownLabel.element,j)}),g(E,G,()=>{M(this.dropdownLabel.element,G)}),g(E,"change",()=>{M(this.buttons[E.selectedIndex-1].element,"click")}),this.zoomText=m.label(P.rangeSelectorZoom||"",0).attr({padding:D.buttonTheme.padding,height:D.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(D.labelStyle),u["stroke-width"]=z(u["stroke-width"],0)),d("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,E),this.buttonOptions.forEach((W,N)=>{d("option",{textContent:W.title||W.text},void 0,E),S[N]=m.button(W.text,0,0,B=>{let X,V=W.events&&W.events.click;V&&(X=V.call(W,B)),X!==!1&&this.clickButton(N),this.isActive=!0},u,v&&v.hover,v&&v.select,v&&v.disabled).attr({"text-align":"center",width:I}).add(this.buttonGroup),W.title&&S[N].attr("title",W.title)})}alignElements(){let{buttonGroup:S,buttons:T,chart:D,group:P,inputGroup:m,options:u,zoomText:v}=this,I=D.options,E=I.exporting&&I.exporting.enabled!==!1&&I.navigation&&I.navigation.buttonOptions,{buttonPosition:R,inputPosition:j,verticalAlign:G}=u,W=(B,X)=>E&&this.titleCollision(D)&&G==="top"&&X.align==="right"&&X.y-B.getBBox().height-12<(E.y||0)+(E.height||0)+D.spacing[0]?-40:0,N=D.plotLeft;if(P&&R&&j){let B=R.x-D.spacing[3];if(S){if(this.positionButtons(),!this.initialButtonGroupWidth){let J=0;v&&(J+=v.getBBox().width+5),T.forEach((Q,$)=>{J+=Q.width||0,$!==T.length-1&&(J+=u.buttonSpacing)}),this.initialButtonGroupWidth=J}N-=D.spacing[3];let q=W(S,R);this.alignButtonGroup(q),this.buttonGroup?.translateY&&this.dropdownLabel.attr({y:this.buttonGroup.translateY}),P.placed=S.placed=D.hasLoaded}let X=0;m&&(X=W(m,j),j.align==="left"?B=N:j.align==="right"&&(B=-Math.max(D.axisOffset[1],-X)),m.align({y:j.y,width:m.getBBox().width,align:j.align,x:j.x+B-2},!0,D.spacingBox),m.placed=D.hasLoaded),this.handleCollision(X),P.align({verticalAlign:G},!0,D.spacingBox);let V=P.alignAttr.translateY,H=P.getBBox().height+20,K=0;if(G==="bottom"){let q=D.legend&&D.legend.options;K=V-(H=H+(q&&q.verticalAlign==="bottom"&&q.enabled&&!q.floating?D.legend.legendHeight+z(q.margin,10):0)-20)-(u.floating?0:u.y)-(D.titleOffset?D.titleOffset[2]:0)-10}G==="top"?(u.floating&&(K=0),D.titleOffset&&D.titleOffset[0]&&(K=D.titleOffset[0]),K+=D.margin[0]-D.spacing[0]||0):G==="middle"&&(j.y===R.y?K=V:(j.y||R.y)&&(j.y<0||R.y<0?K-=Math.min(j.y,R.y):K=V-H)),P.translate(u.x,u.y+Math.floor(K));let{minInput:U,maxInput:Y,dropdown:Z}=this;u.inputEnabled&&U&&Y&&(U.style.marginTop=P.translateY+"px",Y.style.marginTop=P.translateY+"px"),Z&&(Z.style.marginTop=P.translateY+"px")}}alignButtonGroup(S,T){let{chart:D,options:P,buttonGroup:m}=this,{buttonPosition:u}=P,v=D.plotLeft-D.spacing[3],I=u.x-D.spacing[3];u.align==="right"?I+=S-v:u.align==="center"&&(I-=v/2),m&&m.align({y:u.y,width:z(T,this.initialButtonGroupWidth),align:u.align,x:I},!0,D.spacingBox)}positionButtons(){let{buttons:S,chart:T,options:D,zoomText:P}=this,m=T.hasLoaded?"animate":"attr",{buttonPosition:u}=D,v=T.plotLeft,I=v;P&&P.visibility!=="hidden"&&(P[m]({x:z(v+u.x,v)}),I+=u.x+P.getBBox().width+5);for(let E=0,R=this.buttonOptions.length;E<R;++E)S[E].visibility!=="hidden"?(S[E][m]({x:I}),I+=(S[E].width||0)+D.buttonSpacing):S[E][m]({x:v})}handleCollision(S){let{chart:T,buttonGroup:D,inputGroup:P}=this,{buttonPosition:m,dropdown:u,inputPosition:v}=this.options,I=()=>{let j=0;return this.buttons.forEach(G=>{let W=G.getBBox();W.width>j&&(j=W.width)}),j},E=j=>{if(P?.alignOptions&&D){let G=P.alignAttr.translateX+P.alignOptions.x-S+P.getBBox().x+2,W=P.alignOptions.width||0,N=D.alignAttr.translateX+D.getBBox().x;return N+j>G&&G+W>N&&m.y<v.y+P.getBBox().height}return!1},R=()=>{P&&D&&P.attr({translateX:P.alignAttr.translateX+(T.axisOffset[1]>=-S?0:-S),translateY:P.alignAttr.translateY+D.getBBox().height+10})};if(D){if(u==="always"){this.collapseButtons(),E(I())&&R();return}u==="never"&&this.expandButtons()}P&&D?v.align===m.align||E(this.initialButtonGroupWidth+20)?u==="responsive"?(this.collapseButtons(),E(I())&&R()):R():u==="responsive"&&this.expandButtons():D&&u==="responsive"&&(this.initialButtonGroupWidth>T.plotWidth?this.collapseButtons():this.expandButtons())}collapseButtons(){let{buttons:S,zoomText:T}=this;this.isCollapsed!==!0&&(this.isCollapsed=!0,T.hide(),S.forEach(D=>void D.hide()),this.showDropdown())}expandButtons(){let{buttons:S,zoomText:T}=this;this.isCollapsed!==!1&&(this.isCollapsed=!1,this.hideDropdown(),T.show(),S.forEach(D=>void D.show()),this.positionButtons())}showDropdown(){let{buttonGroup:S,chart:T,dropdownLabel:D,dropdown:P}=this;if(S&&P){let{translateX:m=0,translateY:u=0}=S,v=T.plotLeft+m;D.attr({x:v,y:u}).show(),p(P,{left:v+"px",top:u+"px",visibility:"inherit"}),this.hasVisibleDropdown=!0}}hideDropdown(){let{dropdown:S}=this;S&&(this.dropdownLabel.hide(),p(S,{visibility:"hidden",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)}getHeight(){let S=this.options,T=this.group,D=S.inputPosition,P=S.buttonPosition,m=S.y,u=P.y,v=D.y,I=0;if(S.height)return S.height;this.alignElements(),I=T?T.getBBox(!0).height+13+m:0;let E=Math.min(v,u);return(v<0&&u<0||v>0&&u>0)&&(I+=Math.abs(E)),I}titleCollision(S){return!(S.options.title.text||S.options.subtitle.text)}update(S,T=!0){let D=this.chart;_(!0,D.options.rangeSelector,S),this.destroy(),this.init(D),T&&this.render()}destroy(){let S=this,T=S.minInput,D=S.maxInput;S.eventsToUnbind&&(S.eventsToUnbind.forEach(P=>P()),S.eventsToUnbind=void 0),b(S.buttons),T&&(T.onfocus=T.onblur=T.onchange=null),D&&(D.onfocus=D.onblur=D.onchange=null),w(S,function(P,m){P&&m!=="chart"&&(P instanceof a?P.destroy():P instanceof window.HTMLElement&&x(P)),P!==A.prototype[m]&&(S[m]=null)},this)}}return f(A.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),A}),e(t,"Core/Chart/StockChart.js",[t["Core/Chart/Chart.js"],t["Core/Templating.js"],t["Core/Defaults.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/RangeSelector/RangeSelectorDefaults.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c){let{format:g}=s,{getOptions:d}=r,{setFixedRange:p}=h,{addEvent:y,clamp:b,crisp:x,defined:f,extend:M,find:L,isNumber:_,isString:w,merge:k,pick:z,splat:O}=c;function C(S,T,D){return S==="xAxis"?{minPadding:0,maxPadding:0,overscroll:0,ordinal:!0}:S==="yAxis"?{labels:{y:-2},opposite:D.opposite??T.opposite??!0,showLastLabel:!!(T.categories||T.type==="category"),title:{text:D.title?.text!=="Values"?D.title?.text:null}}:{}}function A(S,T){if(S==="xAxis"){let D=z(T.navigator&&T.navigator.enabled,o.enabled,!0),P={type:"datetime",categories:void 0};return D&&(P.startOnTick=!1,P.endOnTick=!1),P}return{}}class F extends i{init(T,D){let P=d(),m=T.xAxis,u=T.yAxis,v=z(T.navigator&&T.navigator.enabled,o.enabled,!0);T.xAxis=T.yAxis=void 0;let I=k({chart:{panning:{enabled:!0,type:"x"},zooming:{pinchType:"x",mouseWheel:{type:"x"}}},navigator:{enabled:v},scrollbar:{enabled:z(l.enabled,!0)},rangeSelector:{enabled:z(a.rangeSelector.enabled,!0)},title:{text:null},tooltip:{split:z(P.tooltip&&P.tooltip.split,!0),crosshairs:!0},legend:{enabled:!1}},T,{isStock:!0});T.xAxis=m,T.yAxis=u,I.xAxis=O(T.xAxis||{}).map(E=>k(C("xAxis",E,P.xAxis),E,A("xAxis",T))),I.yAxis=O(T.yAxis||{}).map(E=>k(C("yAxis",E,P.yAxis),E)),super.init(I,D)}createAxis(T,D){return D.axis=k(C(T,D.axis,d()[T]),D.axis,A(T,this.userOptions)),super.createAxis(T,D)}}return y(i,"update",function(S){let T=S.options;"scrollbar"in T&&this.navigator&&(k(!0,this.options.scrollbar,T.scrollbar),this.navigator.update({enabled:!!this.navigator.navigatorEnabled}),delete T.scrollbar)}),function(S){function T(R){if(!this.crosshair||!this.crosshair.label||!this.crosshair.label.enabled||!this.cross||!_(this.min)||!_(this.max))return;let j=this.chart,G=this.logarithmic,W=this.crosshair.label,N=this.horiz,B=this.opposite,X=this.left,V=this.top,H=this.width,K=this.options.tickPosition==="inside",U=this.crosshair.snap!==!1,Y=R.e||this.cross&&this.cross.e,Z=R.point,q=this.crossLabel,J,Q,$=W.format,tt="",it,et=0,st=this.min,rt=this.max;G&&(st=G.lin2log(this.min),rt=G.lin2log(this.max));let nt=N?"center":B?this.labelAlign==="right"?"right":"left":this.labelAlign==="left"?"left":"center";q||(q=this.crossLabel=j.renderer.label("",0,void 0,W.shape||"callout").addClass("highcharts-crosshair-label highcharts-color-"+(Z&&Z.series?Z.series.colorIndex:this.series[0]&&this.series[0].colorIndex)).attr({align:W.align||nt,padding:z(W.padding,8),r:z(W.borderRadius,3),zIndex:2}).add(this.labelGroup),j.styledMode||q.attr({fill:W.backgroundColor||Z&&Z.series&&Z.series.color||"#666666",stroke:W.borderColor||"","stroke-width":W.borderWidth||0}).css(M({color:"#ffffff",fontWeight:"normal",fontSize:"0.7em",textAlign:"center"},W.style||{}))),N?(J=U?(Z.plotX||0)+X:Y.chartX,Q=V+(B?0:this.height)):(J=X+this.offset+(B?H:0),Q=U?(Z.plotY||0)+V:Y.chartY),$||W.formatter||(this.dateTime&&(tt="%b %d, %Y"),$="{value"+(tt?":"+tt:"")+"}");let ot=U?this.isXAxis?Z.x:Z.y:this.toValue(N?Y.chartX:Y.chartY),at=Z&&Z.series?Z.series.isPointInside(Z):_(ot)&&ot>st&&ot<rt,ct="";$?ct=g($,{value:ot},j):W.formatter&&_(ot)&&(ct=W.formatter.call(this,ot)),q.attr({text:ct,x:J,y:Q,visibility:at?"inherit":"hidden"});let ht=q.getBBox();!_(q.x)||N||B||(J=q.x-ht.width/2),_(q.y)&&(N?(K&&!B||!K&&B)&&(Q=q.y-ht.height):Q=q.y-ht.height/2),it=N?{left:X,right:X+this.width}:{left:this.labelAlign==="left"?X:0,right:this.labelAlign==="right"?X+this.width:j.chartWidth};let lt=q.translateX||0;lt<it.left&&(et=it.left-lt),lt+ht.width>=it.right&&(et=-(lt+ht.width-it.right)),q.attr({x:J+et,y:Q,anchorX:N?J:this.opposite?0:j.chartWidth,anchorY:N?this.opposite?j.chartHeight:0:Q+ht.height/2})}function D(){this.crossLabel&&(this.crossLabel=this.crossLabel.hide())}function P(R){let j=this.chart,G=this.options,W=j._labelPanes=j._labelPanes||{},N=G.labels;if(j.options.isStock&&this.coll==="yAxis"){let B=G.top+","+G.height;!W[B]&&N.enabled&&(N.distance===15&&this.side===1&&(N.distance=0),N.align===void 0&&(N.align="right"),W[B]=this,R.align="right",R.preventDefault())}}function m(){let R=this.chart,j=this.options&&this.options.top+","+this.options.height;j&&R._labelPanes&&R._labelPanes[j]===this&&delete R._labelPanes[j]}function u(R){let j=this,G=j.isLinked&&!j.series&&j.linkedParent?j.linkedParent.series:j.series,W=j.chart,N=W.renderer,B=j.left,X=j.top,V=[],H=R.translatedValue,K=R.value,U=R.force,Y,Z,q,J,Q=[],$,tt;if(W.options.isStock&&R.acrossPanes!==!1&&j.coll==="xAxis"||j.coll==="yAxis"){for(let it of(R.preventDefault(),Q=(et=>{let st=et==="xAxis"?"yAxis":"xAxis",rt=j.options[st];return _(rt)?[W[st][rt]]:w(rt)?[W.get(rt)]:G.map(nt=>nt[st])})(j.coll),j.isXAxis?W.yAxis:W.xAxis))if(!it.options.isInternal){let et=it.isXAxis?"yAxis":"xAxis";j===(f(it.options[et])?W[et][it.options[et]]:W[et][0])&&Q.push(it)}for(let it of($=Q.length?[]:[j.isXAxis?W.yAxis[0]:W.xAxis[0]],Q))$.indexOf(it)!==-1||L($,et=>et.pos===it.pos&&et.len===it.len)||$.push(it);if(_(tt=z(H,j.translate(K||0,void 0,void 0,R.old))))if(j.horiz)for(let it of $){let et;J=(Z=it.pos)+it.len,Y=q=Math.round(tt+j.transB),U!=="pass"&&(Y<B||Y>B+j.width)&&(U?Y=q=b(Y,B,B+j.width):et=!0),et||V.push(["M",Y,Z],["L",q,J])}else for(let it of $){let et;q=(Y=it.pos)+it.len,Z=J=Math.round(X+j.height-tt),U!=="pass"&&(Z<X||Z>X+j.height)&&(U?Z=J=b(Z,X,X+j.height):et=!0),et||V.push(["M",Y,Z],["L",q,J])}R.path=V.length>0?N.crispPolyLine(V,R.lineWidth||1):void 0}}function v(R){if(this.chart.options.isStock){let j;this.is("column")||this.is("columnrange")?j={borderWidth:0,shadow:!1}:this.is("scatter")||this.is("sma")||(j={marker:{enabled:!1,radius:2}}),j&&(R.plotOptions[this.type]=k(R.plotOptions[this.type],j))}}function I(){let R=this.chart,j=this.options.dataGrouping;return this.allowDG!==!1&&j&&z(j.enabled,R.options.isStock)}function E(R,j){for(let G=0;G<R.length;G+=2){let W=R[G],N=R[G+1];f(W[1])&&W[1]===N[1]&&(W[1]=N[1]=x(W[1],j)),f(W[2])&&W[2]===N[2]&&(W[2]=N[2]=x(W[2],j))}return R}S.compose=function(R,j,G,W){let N=G.prototype;N.forceCropping||(y(j,"afterDrawCrosshair",T),y(j,"afterHideCrosshair",D),y(j,"autoLabelAlign",P),y(j,"destroy",m),y(j,"getPlotLinePath",u),R.prototype.setFixedRange=p,N.forceCropping=I,y(G,"setOptions",v),W.prototype.crispPolyLine=E)},S.stockChart=function(R,j,G){return new S(R,j,G)}}(F||(F={})),F}),e(t,"Series/HLC/HLCPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(i){let{column:{prototype:{pointClass:s}}}=i.seriesTypes;return class extends s{}}),e(t,"Series/HLC/HLCSeriesDefaults.js",[],function(){return{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b> {series.name}</b><br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0}}),e(t,"Series/HLC/HLCSeries.js",[t["Series/HLC/HLCPoint.js"],t["Series/HLC/HLCSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o){let{column:a}=r.seriesTypes,{crisp:l,extend:h,merge:c}=o;class g extends a{extendStem(p,y,b){let x=p[0],f=p[1];typeof x[2]=="number"&&(x[2]=Math.max(b+y,x[2])),typeof f[2]=="number"&&(f[2]=Math.min(b-y,f[2]))}getPointPath(p,y){let b=y.strokeWidth(),x=p.series,f=l(p.plotX||0,b),M=Math.round(p.shapeArgs.width/2),L=[["M",f,Math.round(p.yBottom)],["L",f,Math.round(p.plotHigh)]];if(p.close!==null){let _=l(p.plotClose,b);L.push(["M",f,_],["L",f+M,_]),x.extendStem(L,b/2,_)}return L}drawSinglePoint(p){let y=p.series,b=y.chart,x,f=p.graphic;p.plotY!==void 0&&(f||(p.graphic=f=b.renderer.path().add(y.group)),b.styledMode||f.attr(y.pointAttribs(p,p.selected&&"select")),x=y.getPointPath(p,f),f[f?"animate":"attr"]({d:x}).addClass(p.getClassName(),!0))}drawPoints(){this.points.forEach(this.drawSinglePoint)}init(){super.init.apply(this,arguments),this.options.stacking=void 0}pointAttribs(p,y){let b=super.pointAttribs.call(this,p,y);return delete b.fill,b}toYData(p){return[p.high,p.low,p.close]}translate(){let p=this,y=p.yAxis,b=this.pointArrayMap&&this.pointArrayMap.slice()||[],x=b.map(f=>`plot${f.charAt(0).toUpperCase()+f.slice(1)}`);x.push("yBottom"),b.push("low"),super.translate.apply(p),p.points.forEach(function(f){b.forEach(function(M,L){let _=f[M];_!==null&&(p.dataModify&&(_=p.dataModify.modifyValue(_)),f[x[L]]=y.toPixels(_,!0))}),f.tooltipPos[1]=f.plotHigh+y.pos-p.chart.plotTop})}}return g.defaultOptions=c(a.defaultOptions,s),h(g.prototype,{pointClass:i,animate:null,directTouch:!1,pointArrayMap:["high","low","close"],pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointValKey:"close"}),r.registerSeriesType("hlc",g),g}),e(t,"Series/OHLC/OHLCPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(i){let{seriesTypes:{hlc:s}}=i;class r extends s.prototype.pointClass{getClassName(){return super.getClassName.call(this)+(this.open<this.close?" highcharts-point-up":" highcharts-point-down")}resolveUpColor(){this.open<this.close&&!this.options.color&&this.series.options.upColor&&(this.color=this.series.options.upColor)}resolveColor(){super.resolveColor(),this.series.is("heikinashi")||this.resolveUpColor()}getZone(){let a=super.getZone();return this.resolveUpColor(),a}applyOptions(){return super.applyOptions.apply(this,arguments),this.resolveColor&&this.resolveColor(),this}}return r}),e(t,"Series/OHLC/OHLCSeriesDefaults.js",[],function(){return{tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'}}}),e(t,"Series/OHLC/OHLCSeries.js",[t["Core/Globals.js"],t["Series/OHLC/OHLCPoint.js"],t["Series/OHLC/OHLCSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a){let{composed:l}=i,{hlc:h}=o.seriesTypes,{addEvent:c,crisp:g,extend:d,merge:p,pushUnique:y}=a;function b(M){let L=M.options,_=L.dataGrouping;_&&L.useOhlcData&&L.id!=="highcharts-navigator-series"&&(_.approximation="ohlc")}function x(M){let L=M.options;L.useOhlcData&&L.id!=="highcharts-navigator-series"&&d(this,{pointValKey:f.prototype.pointValKey,pointArrayMap:f.prototype.pointArrayMap,toYData:f.prototype.toYData})}class f extends h{static compose(L,..._){y(l,"OHLCSeries")&&(c(L,"afterSetOptions",b),c(L,"init",x))}getPointPath(L,_){let w=super.getPointPath(L,_),k=_.strokeWidth(),z=g(L.plotX||0,k),O=Math.round(L.shapeArgs.width/2);if(L.open!==null){let C=g(L.plotOpen,k);w.push(["M",z,C],["L",z-O,C]),super.extendStem(w,k/2,C)}return w}pointAttribs(L,_){let w=super.pointAttribs.call(this,L,_),k=this.options;return delete w.fill,!L.options.color&&k.upColor&&L.open<L.close&&(w.stroke=k.upColor),w}toYData(L){return[L.open,L.high,L.low,L.close]}}return f.defaultOptions=p(h.defaultOptions,r),d(f.prototype,{pointClass:s,pointArrayMap:["open","high","low","close"]}),o.registerSeriesType("ohlc",f),f}),e(t,"Series/Candlestick/CandlestickSeriesDefaults.js",[],function(){return{states:{hover:{lineWidth:2}},threshold:null,lineColor:"#000000",lineWidth:1,upColor:"#ffffff",stickyTracking:!0}}),e(t,"Series/Candlestick/CandlestickSeries.js",[t["Series/Candlestick/CandlestickSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r){let{column:o,ohlc:a}=s.seriesTypes,{crisp:l,merge:h}=r;class c extends a{pointAttribs(d,p){let y=o.prototype.pointAttribs.call(this,d,p),b=this.options,x=d.open<d.close,f=b.lineColor||this.color,M=d.color||this.color;if(y["stroke-width"]=b.lineWidth,y.fill=d.options.color||x&&b.upColor||M,y.stroke=d.options.lineColor||x&&b.upLineColor||f,p){let L=b.states[p];y.fill=L.color||y.fill,y.stroke=L.lineColor||y.stroke,y["stroke-width"]=L.lineWidth||y["stroke-width"]}return y}drawPoints(){let d=this.points,p=this.chart,y=this.yAxis.reversed;for(let b of d){let x=b.graphic,f,M,L,_,w,k,z,O,C,A=!x;if(b.plotY!==void 0){x||(b.graphic=x=p.renderer.path().add(this.group)),this.chart.styledMode||x.attr(this.pointAttribs(b,b.selected&&"select")).shadow(this.options.shadow);let F=x.strokeWidth();z=l(b.plotX||0,F),L=Math.min(f=b.plotOpen,M=b.plotClose),_=Math.max(f,M),C=Math.round(b.shapeArgs.width/2),w=y?_!==b.yBottom:Math.round(L)!==Math.round(b.plotHigh||0),k=y?Math.round(L)!==Math.round(b.plotHigh||0):_!==b.yBottom,L=l(L,F),_=l(_,F),(O=[]).push(["M",z-C,_],["L",z-C,L],["L",z+C,L],["L",z+C,_],["Z"],["M",z,L],["L",z,w?Math.round(y?b.yBottom:b.plotHigh):L],["M",z,_],["L",z,k?Math.round(y?b.plotHigh:b.yBottom):_]),x[A?"attr":"animate"]({d:O}).addClass(b.getClassName(),!0)}}}}return c.defaultOptions=h(a.defaultOptions,{tooltip:a.defaultOptions.tooltip},i),s.registerSeriesType("candlestick",c),c}),e(t,"Series/Flags/FlagsPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s){let{column:{prototype:{pointClass:r}}}=i.seriesTypes,{isNumber:o}=s;return class extends r{constructor(){super(...arguments),this.ttBelow=!1}isValid(){return o(this.y)||this.y===void 0}hasNewShapeType(){let a=this.options.shape||this.series.options.shape;return this.graphic&&a&&a!==this.graphic.symbolKey}}}),e(t,"Series/Flags/FlagsSeriesDefaults.js",[],function(){return{borderRadius:0,pointRange:0,allowOverlapX:!1,shape:"flag",stackDistance:12,textAlign:"center",tooltip:{pointFormat:"{point.text}"},threshold:null,y:-30,fillColor:"#ffffff",lineWidth:1,states:{hover:{lineColor:"#000000",fillColor:"#ccd3ff"}},style:{fontSize:"0.7em",fontWeight:"bold"}}}),e(t,"Series/Flags/FlagsSymbols.js",[t["Core/Renderer/RendererRegistry.js"]],function(i){var s;return function(r){let o=[];function a(h,c,g,d,p){let y=p&&p.anchorX||h,b=p&&p.anchorY||c,x=this.circle(y-1,b-1,2,2);return x.push(["M",y,b],["L",h,c+d],["L",h,c],["L",h+g,c],["L",h+g,c+d],["L",h,c+d],["Z"]),x}function l(h,c){h[c+"pin"]=function(g,d,p,y,b){let x,f=b&&b.anchorX,M=b&&b.anchorY;if(c==="circle"&&y>p&&(g-=Math.round((y-p)/2),p=y),x=h[c](g,d,p,y,b),f&&M){let L=f;if(c==="circle")L=g+p/2;else{let w=x[0],k=x[1];w[0]==="M"&&k[0]==="L"&&(L=(w[1]+k[1])/2)}let _=d>M?d:d+y;x.push(["M",L,_],["L",f,M]),x=x.concat(h.circle(f-1,M-1,2,2))}return x}}r.compose=function(h){if(o.indexOf(h)===-1){o.push(h);let g=h.prototype.symbols;g.flag=a,l(g,"circle"),l(g,"square")}let c=i.getRendererType();o.indexOf(c)&&o.push(c)}}(s||(s={})),s}),e(t,"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(i,s,r,o){var a;let{composed:l}=s,{prototype:h}=i,{prototype:c}=r,{defined:g,pushUnique:d,stableSort:p}=o;return function(y){function b(f){return c.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,f)}function x(){h.translate.apply(this);let f=this,M=f.options,L=f.chart,_=f.points,w=M.onSeries,k=w&&L.get(w),z=k&&k.options.step,O=k&&k.points,C=L.inverted,A=f.xAxis,F=f.yAxis,S=_.length-1,T,D,P=M.onKey||"y",m=O&&O.length,u=0,v,I,E,R,j;if(k&&k.visible&&m){for(u=(k.pointXOffset||0)+(k.barW||0)/2,R=k.currentDataGrouping,I=O[m-1].x+(R?R.totalRange:0),p(_,(G,W)=>G.x-W.x),P="plot"+P[0].toUpperCase()+P.substr(1);m--&&_[S];)if(v=O[m],(T=_[S]).y=v.y,v.x<=T.x&&v[P]!==void 0){if(T.x<=I&&(T.plotY=v[P],v.x<T.x&&!z&&(E=O[m+1])&&E[P]!==void 0))if(g(T.plotX)&&k.is("spline")){let G=[v.plotX||0,v.plotY||0],W=[E.plotX||0,E.plotY||0],N=v.controlPoints?.high||G,B=E.controlPoints?.low||W,X=(U,Y)=>Math.pow(1-U,3)*G[Y]+3*(1-U)*(1-U)*U*N[Y]+3*(1-U)*U*U*B[Y]+U*U*U*W[Y],V=0,H=1,K;for(let U=0;U<100;U++){let Y=(V+H)/2,Z=X(Y,0);if(Z===null)break;if(.25>Math.abs(Z-T.plotX)){K=Y;break}Z<T.plotX?V=Y:H=Y}g(K)&&(T.plotY=X(K,1),T.y=F.toValue(T.plotY,!0))}else j=(T.x-v.x)/(E.x-v.x),T.plotY+=j*(E[P]-v[P]),T.y+=j*(E.y-v.y);if(S--,m++,S<0)break}}_.forEach((G,W)=>{let N;G.plotX+=u,(G.plotY===void 0||C)&&(G.plotX>=0&&G.plotX<=A.len?C?(G.plotY=A.translate(G.x,0,1,0,1),G.plotX=g(G.y)?F.translate(G.y,0,0,0,1):0):G.plotY=(A.opposite?0:f.yAxis.len)+A.offset:G.shapeArgs={}),(D=_[W-1])&&D.plotX===G.plotX&&(D.stackIndex===void 0&&(D.stackIndex=0),N=D.stackIndex+1),G.stackIndex=N}),this.onSeries=k}y.compose=function(f){if(d(l,"OnSeries")){let M=f.prototype;M.getPlotBox=b,M.translate=x}return f},y.getPlotBox=b,y.translate=x}(a||(a={})),a}),e(t,"Series/Flags/FlagsSeries.js",[t["Series/Flags/FlagsPoint.js"],t["Series/Flags/FlagsSeriesDefaults.js"],t["Series/Flags/FlagsSymbols.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l,h,c,g){let{noop:d}=o,{distribute:p}=l,{series:y,seriesTypes:{column:b}}=h,{addEvent:x,defined:f,extend:M,isNumber:L,merge:_,objectEach:w,wrap:k}=g;class z extends b{animate(C){C&&this.setClip()}drawPoints(){let C,A,F,S,T,D,P,m,u,v,I,E=this.points,R=this.chart,j=R.renderer,G=R.inverted,W=this.options,N=W.y,B=this.yAxis,X={},V=[],H=L(W.borderRadius)?W.borderRadius:0;for(S=E.length;S--;)T=E[S],v=(G?T.plotY:T.plotX)>this.xAxis.len,C=T.plotX,P=T.stackIndex,F=T.options.shape||W.shape,(A=T.plotY)!==void 0&&(A=T.plotY+N-(P!==void 0&&P*W.stackDistance)),T.anchorX=P?void 0:T.plotX,m=P?void 0:T.plotY,I=F!=="flag",D=T.graphic,A!==void 0&&C>=0&&!v?(D&&T.hasNewShapeType()&&(D=D.destroy()),D||(D=T.graphic=j.label("",0,void 0,F,void 0,void 0,W.useHTML).addClass("highcharts-point").add(this.markerGroup),T.graphic.div&&(T.graphic.div.point=T),D.isNew=!0),D.attr({align:I?"center":"left",width:W.width,height:W.height,"text-align":W.textAlign,r:H}),R.styledMode||D.attr(this.pointAttribs(T)).css(_(W.style,T.style)).shadow(W.shadow),C>0&&(C-=D.strokeWidth()%2),u={y:A,anchorY:m},W.allowOverlapX&&(u.x=C,u.anchorX=T.anchorX),D.attr({text:T.options.title??W.title??"A"})[D.isNew?"attr":"animate"](u),W.allowOverlapX||(X[T.plotX]?X[T.plotX].size=Math.max(X[T.plotX].size,D.width||0):X[T.plotX]={align:I?.5:0,size:D.width||0,target:C,anchorX:C}),T.tooltipPos=[C,A+B.pos-R.plotTop]):D&&(T.graphic=D.destroy());if(!W.allowOverlapX){let K=100;for(let U of(w(X,function(Y){Y.plotX=Y.anchorX,V.push(Y),K=Math.max(Y.size,K)}),p(V,G?B.len:this.xAxis.len,K),E)){let Y=U.plotX,Z=U.graphic,q=Z&&X[Y];q&&Z&&(f(q.pos)?Z[Z.isNew?"attr":"animate"]({x:q.pos+(q.align||0)*q.size,anchorX:U.anchorX}).show().isNew=!1:Z.hide().isNew=!0)}}W.useHTML&&this.markerGroup&&k(this.markerGroup,"on",function(K){return c.prototype.on.apply(K.apply(this,[].slice.call(arguments,1)),[].slice.call(arguments,1))})}drawTracker(){let C=this.points;for(let A of(super.drawTracker(),C)){let F=A.graphic;F&&(A.unbindMouseOver&&A.unbindMouseOver(),A.unbindMouseOver=x(F.element,"mouseover",function(){for(let S of(A.stackIndex>0&&!A.raised&&(A._y=F.y,F.attr({y:A._y-8}),A.raised=!0),C))S!==A&&S.raised&&S.graphic&&(S.graphic.attr({y:S._y}),S.raised=!1)}))}}pointAttribs(C,A){let F=this.options,S=C&&C.color||this.color,T=F.lineColor,D=C&&C.lineWidth,P=C&&C.fillColor||F.fillColor;return A&&(P=F.states[A].fillColor,T=F.states[A].lineColor,D=F.states[A].lineWidth),{fill:P||S,stroke:T||S,"stroke-width":D||F.lineWidth||0}}setClip(){y.prototype.setClip.apply(this,arguments),this.options.clip!==!1&&this.sharedClipKey&&this.markerGroup&&this.markerGroup.clip(this.chart.sharedClips[this.sharedClipKey])}}return z.compose=r.compose,z.defaultOptions=_(b.defaultOptions,s),a.compose(z),M(z.prototype,{allowDG:!1,forceCrop:!0,invertible:!1,noSharedTooltip:!0,pointClass:i,sorted:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],buildKDTree:d,init:y.prototype.init}),h.registerSeriesType("flags",z),z}),e(t,"Core/Axis/BrokenAxis.js",[t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(i,s){var r;let{addEvent:o,find:a,fireEvent:l,isArray:h,isNumber:c,pick:g}=s;return function(d){function p(){this.brokenAxis!==void 0&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function y(){this.brokenAxis?.hasBreaks&&(this.options.ordinal=!1)}function b(){let k=this.brokenAxis;if(k?.hasBreaks){let z=this.tickPositions,O=this.tickPositions.info,C=[];for(let A=0;A<z.length;A++)k.isInAnyBreak(z[A])||C.push(z[A]);this.tickPositions=C,this.tickPositions.info=O}}function x(){this.brokenAxis||(this.brokenAxis=new w(this))}function f(){let{isDirty:k,options:{connectNulls:z},points:O,xAxis:C,yAxis:A}=this;if(k){let F=O.length;for(;F--;){let S=O[F],T=!(S.y===null&&z===!1)&&(C?.brokenAxis?.isInAnyBreak(S.x,!0)||A?.brokenAxis?.isInAnyBreak(S.y,!0));S.visible=!T&&S.options.visible!==!1}}}function M(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,g(this.pointArrayMap,["y"]))}function L(k,z){let O,C,A,F=this,S=F.points;if(k?.brokenAxis?.hasBreaks){let T=k.brokenAxis;z.forEach(function(D){O=T?.breakArray||[],C=k.isXAxis?k.min:g(F.options.threshold,k.min);let P=k?.options?.breaks?.filter(function(m){let u=!0;for(let v=0;v<O.length;v++){let I=O[v];if(I.from===m.from&&I.to===m.to){u=!1;break}}return u});S.forEach(function(m){A=g(m["stack"+D.toUpperCase()],m[D]),O.forEach(function(u){if(c(C)&&c(A)){let v="";C<u.from&&A>u.to||C>u.from&&A<u.from?v="pointBreak":(C<u.from&&A>u.from&&A<u.to||C>u.from&&A>u.to&&A<u.from)&&(v="pointInBreak"),v&&l(k,v,{point:m,brk:u})}}),P?.forEach(function(u){l(k,"pointOutsideOfBreak",{point:m,brk:u})})})})}}function _(){let k=this.currentDataGrouping,z=k?.gapSize,O=this.points.slice(),C=this.yAxis,A=this.options.gapSize,F=O.length-1;if(A&&F>0){let S,T;for(this.options.gapUnit!=="value"&&(A*=this.basePointRange),z&&z>A&&z>=this.basePointRange&&(A=z);F--;)if(T&&T.visible!==!1||(T=O[F+1]),S=O[F],T.visible!==!1&&S.visible!==!1){if(T.x-S.x>A){let D=(S.x+T.x)/2;O.splice(F+1,0,{isNull:!0,x:D}),C.stacking&&this.options.stacking&&((C.stacking.stacks[this.stackKey][D]=new i(C,C.options.stackLabels,!1,D,this.stack)).total=0)}T=S}}return this.getGraphPath(O)}d.compose=function(k,z){if(!k.keepProps.includes("brokenAxis")){k.keepProps.push("brokenAxis"),o(k,"init",x),o(k,"afterInit",p),o(k,"afterSetTickPositions",b),o(k,"afterSetOptions",y);let O=z.prototype;O.drawBreaks=L,O.gappedPath=_,o(z,"afterGeneratePoints",f),o(z,"afterRender",M)}return k};class w{static isInBreak(z,O){let C=z.repeat||1/0,A=z.from,F=z.to-z.from,S=O>=A?(O-A)%C:C-(A-O)%C;return z.inclusive?S<=F:S<F&&S!==0}static lin2Val(z){let O=this.brokenAxis,C=O&&O.breakArray;if(!C||!c(z))return z;let A=z,F,S;for(S=0;S<C.length&&!((F=C[S]).from>=A);S++)(F.to<A||w.isInBreak(F,A))&&(A+=F.len);return A}static val2Lin(z){let O=this.brokenAxis,C=O&&O.breakArray;if(!C||!c(z))return z;let A=z,F,S;for(S=0;S<C.length;S++)if((F=C[S]).to<=z)A-=F.len;else{if(F.from>=z)break;if(w.isInBreak(F,z)){A-=z-F.from;break}}return A}constructor(z){this.hasBreaks=!1,this.axis=z}findBreakAt(z,O){return a(O,function(C){return C.from<z&&z<C.to})}isInAnyBreak(z,O){let C=this.axis,A=C.options.breaks||[],F=A.length,S,T,D;if(F&&c(z)){for(;F--;)w.isInBreak(A[F],z)&&(S=!0,T||(T=g(A[F].showPoints,!C.isXAxis)));D=S&&O?S&&!T:S}return D}setBreaks(z,O){let C=this,A=C.axis,F=h(z)&&!!z.length&&!!Object.keys(z[0]).length;A.isDirty=C.hasBreaks!==F,C.hasBreaks=F,z!==A.options.breaks&&(A.options.breaks=A.userOptions.breaks=z),A.forceRedraw=!0,A.series.forEach(function(S){S.isDirty=!0}),F||A.val2lin!==w.val2Lin||(delete A.val2lin,delete A.lin2val),F&&(A.userOptions.ordinal=!1,A.lin2val=w.lin2Val,A.val2lin=w.val2Lin,A.setExtremes=function(S,T,D,P,m){if(C.hasBreaks){let u,v=this.options.breaks||[];for(;u=C.findBreakAt(S,v);)S=u.to;for(;u=C.findBreakAt(T,v);)T=u.from;T<S&&(T=S)}A.constructor.prototype.setExtremes.call(this,S,T,D,P,m)},A.setAxisTranslation=function(){if(A.constructor.prototype.setAxisTranslation.call(this),C.unitLength=void 0,C.hasBreaks){let S=A.options.breaks||[],T=[],D=[],P=g(A.pointRangePadding,0),m=0,u,v,I=A.userMin||A.min,E=A.userMax||A.max,R,j;S.forEach(function(G){v=G.repeat||1/0,c(I)&&c(E)&&(w.isInBreak(G,I)&&(I+=G.to%v-I%v),w.isInBreak(G,E)&&(E-=E%v-G.from%v))}),S.forEach(function(G){if(R=G.from,v=G.repeat||1/0,c(I)&&c(E)){for(;R-v>I;)R-=v;for(;R<I;)R+=v;for(j=R;j<E;j+=v)T.push({value:j,move:"in"}),T.push({value:j+G.to-G.from,move:"out",size:G.breakSize})}}),T.sort(function(G,W){return G.value===W.value?(G.move==="in"?0:1)-(W.move==="in"?0:1):G.value-W.value}),u=0,R=I,T.forEach(function(G){(u+=G.move==="in"?1:-1)===1&&G.move==="in"&&(R=G.value),u===0&&c(R)&&(D.push({from:R,to:G.value,len:G.value-R-(G.size||0)}),m+=G.value-R-(G.size||0))}),C.breakArray=D,c(I)&&c(E)&&c(A.min)&&(C.unitLength=E-I-m+P,l(A,"afterBreaks"),A.staticScale?A.transA=A.staticScale:C.unitLength&&(A.transA*=(E-A.min+P)/C.unitLength),P&&(A.minPixelPadding=A.transA*(A.minPointOffset||0)),A.min=I,A.max=E)}}),g(O,!0)&&A.chart.redraw()}}d.Additions=w}(r||(r={})),r}),e(t,"masters/modules/broken-axis.src.js",[t["Core/Globals.js"],t["Core/Axis/BrokenAxis.js"]],function(i,s){return i.BrokenAxis=i.BrokenAxis||s,i.BrokenAxis.compose(i.Axis,i.Series),i}),e(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),e(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(i,s){let{arrayMax:r,arrayMin:o,correctFloat:a,extend:l,isNumber:h}=s;function c(p){let y=p.length,b=g(p);return h(b)&&y&&(b=a(b/y)),b}function g(p){let y=p.length,b;if(!y&&p.hasNulls)b=null;else if(y)for(b=0;y--;)b+=p[y];return b}let d={average:c,averages:function(){let p=[];return[].forEach.call(arguments,function(y){p.push(c(y))}),p[0]===void 0?void 0:p},close:function(p){return p.length?p[p.length-1]:p.hasNulls?null:void 0},high:function(p){return p.length?r(p):p.hasNulls?null:void 0},hlc:function(p,y,b){if(p=i.high(p),y=i.low(y),b=i.close(b),h(p)||h(y)||h(b))return[p,y,b]},low:function(p){return p.length?o(p):p.hasNulls?null:void 0},ohlc:function(p,y,b,x){if(p=i.open(p),y=i.high(y),b=i.low(b),x=i.close(x),h(p)||h(y)||h(b)||h(x))return[p,y,b,x]},open:function(p){return p.length?p[0]:p.hasNulls?null:void 0},range:function(p,y){return p=i.low(p),y=i.high(y),h(p)||h(y)?[p,y]:p===null&&y===null?null:void 0},sum:g};return l(i,d),d}),e(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),e(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(i,s){let r,{addEvent:o,extend:a,merge:l,pick:h}=s;function c(y){let b=this,x=b.series;x.forEach(function(f){f.groupPixelWidth=void 0}),x.forEach(function(f){f.groupPixelWidth=b.getGroupPixelWidth&&b.getGroupPixelWidth(),f.groupPixelWidth&&(f.hasProcessed=!0),f.applyGrouping(!!y.hasExtremesChanged)})}function g(){let y=this.series,b=y.length,x=0,f=!1,M,L;for(;b--;)(L=y[b].options.dataGrouping)&&(x=Math.max(x,h(L.groupPixelWidth,i.common.groupPixelWidth)),M=(y[b].processedXData||y[b].data).length,(y[b].groupPixelWidth||M>this.chart.plotSizeX/x||M&&L.forced)&&(f=!0));return f?x:0}function d(){this.series.forEach(function(y){y.hasProcessed=!1})}function p(y,b){let x;if(b=h(b,!0),y||(y={forced:!1,units:null}),this instanceof r)for(x=this.series.length;x--;)this.series[x].update({dataGrouping:y},!1);else this.chart.options.series.forEach(function(f){f.dataGrouping=typeof y=="boolean"?y:l(y,f.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),b&&this.chart.redraw()}return{compose:function(y){r=y;let b=y.prototype;b.applyGrouping||(o(y,"afterSetScale",d),o(y,"postProcessData",c),a(b,{applyGrouping:c,getGroupPixelWidth:g,setDataGrouping:p}))}}}),e(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{series:{prototype:h}}=a,{addEvent:c,defined:g,error:d,extend:p,isNumber:y,merge:b,pick:x}=l,f=h.generatePoints;function M(O){var C;let A,F,S=this.chart,T=this.options.dataGrouping,D=this.allowDG!==!1&&T&&x(T.enabled,S.options.isStock),P=this.reserveSpace(),m=this.currentDataGrouping,u,v,I=!1;D&&!this.requireSorting&&(this.requireSorting=I=!0);let E=!!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!O)||!D;if(I&&(this.requireSorting=!1),E)return;this.destroyGroupedData();let R=T.groupAll?this.xData:this.processedXData,j=T.groupAll?this.yData:this.processedYData,G=S.plotSizeX,W=this.xAxis,N=W.options.ordinal,B=this.groupPixelWidth;if(B&&R&&R.length&&G){F=!0,this.isDirty=!0,this.points=null;let X=W.getExtremes(),V=X.min,H=X.max,K=N&&W.ordinal&&W.ordinal.getGroupIntervalFactor(V,H,this)||1,U=B*(H-V)/G*K,Y=W.getTimeTicks(r.Additions.prototype.normalizeTimeTickInterval(U,T.units||s.units),Math.min(V,R[0]),Math.max(H,R[R.length-1]),W.options.startOfWeek,R,this.closestPointRange),Z=h.groupData.apply(this,[R,j,Y,T.approximation]),q=Z.groupedXData,J=Z.groupedYData,Q=0;for(T&&T.smoothed&&q.length&&(T.firstAnchor="firstPoint",T.anchor="middle",T.lastAnchor="lastPoint",d(32,!1,S,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),A=1;A<Y.length;A++)Y.info.segmentStarts&&Y.info.segmentStarts.indexOf(A)!==-1||(Q=Math.max(Y[A]-Y[A-1],Q));(u=Y.info).gapSize=Q,this.closestPointRange=Y.info.totalRange,this.groupMap=Z.groupMap,this.currentDataGrouping=u,function($,tt,it){let et=$.options.dataGrouping,st=$.currentDataGrouping&&$.currentDataGrouping.gapSize;if(!(et&&$.xData&&st&&$.groupMap))return;let rt=tt.length-1,nt=et.anchor,ot=et.firstAnchor,at=et.lastAnchor,ct=tt.length-1,ht=0;if(ot&&$.xData[0]>=tt[0]){let lt;ht++;let yt=$.groupMap[0].start,Et=$.groupMap[0].length;y(yt)&&y(Et)&&(lt=yt+(Et-1)),tt[0]={start:tt[0],middle:tt[0]+.5*st,end:tt[0]+st,firstPoint:$.xData[0],lastPoint:lt&&$.xData[lt]}[ot]}if(rt>0&&at&&st&&tt[rt]>=it-st){ct--;let lt=$.groupMap[$.groupMap.length-1].start;tt[rt]={start:tt[rt],middle:tt[rt]+.5*st,end:tt[rt]+st,firstPoint:lt&&$.xData[lt],lastPoint:$.xData[$.xData.length-1]}[at]}if(nt&&nt!=="start"){let lt=st*{middle:.5,end:1}[nt];for(;ct>=ht;)tt[ct]+=lt,ct--}}(this,q,H),P&&(g((C=q)[0])&&y(W.min)&&y(W.dataMin)&&C[0]<W.min&&((!g(W.options.min)&&W.min<=W.dataMin||W.min===W.dataMin)&&(W.min=Math.min(C[0],W.min)),W.dataMin=Math.min(C[0],W.dataMin)),g(C[C.length-1])&&y(W.max)&&y(W.dataMax)&&C[C.length-1]>W.max&&((!g(W.options.max)&&y(W.dataMax)&&W.max>=W.dataMax||W.max===W.dataMax)&&(W.max=Math.max(C[C.length-1],W.max)),W.dataMax=Math.max(C[C.length-1],W.dataMax))),T.groupAll&&(this.allGroupedData=J,q=(v=this.cropData(q,J,W.min,W.max)).xData,J=v.yData,this.cropStart=v.start),this.processedXData=q,this.processedYData=J}else this.groupMap=null,this.currentDataGrouping=void 0;this.hasGroupedData=F,this.preventGraphAnimation=(m&&m.totalRange)!==(u&&u.totalRange)}function L(){this.groupedData&&(this.groupedData.forEach(function(O,C){O&&(this.groupedData[C]=O.destroy?O.destroy():null)},this),this.groupedData.length=0,delete this.allGroupedData)}function _(){f.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function w(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")||this.options.cumulative?"sum":"average"}function k(O,C,A,F){let S=this,T=S.data,D=S.options&&S.options.data,P=[],m=[],u=[],v=O.length,I=!!C,E=[],R=S.pointArrayMap,j=R&&R.length,G=["x"].concat(R||["y"]),W=this.options.dataGrouping&&this.options.dataGrouping.groupAll,N,B,X,V=0,H=0,K=typeof F=="function"?F:F&&i[F]?i[F]:i[S.getDGApproximation&&S.getDGApproximation()||"average"];if(j){let Y=R.length;for(;Y--;)E.push([])}else E.push([]);let U=j||1;for(let Y=0;Y<=v;Y++)if(!(O[Y]<A[0])){for(;A[V+1]!==void 0&&O[Y]>=A[V+1]||Y===v;){N=A[V],S.dataGroupInfo={start:W?H:S.cropStart+H,length:E[0].length,groupStart:N},X=K.apply(S,E),S.pointClass&&!g(S.dataGroupInfo.options)&&(S.dataGroupInfo.options=b(S.pointClass.prototype.optionsToObject.call({series:S},S.options.data[S.cropStart+H])),G.forEach(function(Z){delete S.dataGroupInfo.options[Z]})),X!==void 0&&(P.push(N),m.push(X),u.push(S.dataGroupInfo)),H=Y;for(let Z=0;Z<U;Z++)E[Z].length=0,E[Z].hasNulls=!1;if(V+=1,Y===v)break}if(Y===v)break;if(R){let Z,q=S.options.dataGrouping&&S.options.dataGrouping.groupAll?Y:S.cropStart+Y,J=T&&T[q]||S.pointClass.prototype.applyOptions.apply({series:S},[D[q]]);for(let Q=0;Q<j;Q++)y(Z=J[R[Q]])?E[Q].push(Z):Z===null&&(E[Q].hasNulls=!0)}else y(B=I?C[Y]:null)?E[0].push(B):B===null&&(E[0].hasNulls=!0)}return{groupedXData:P,groupedYData:m,groupMap:u}}function z(O){let C=O.options,A=this.type,F=this.chart.options.plotOptions,S=this.useCommonDataGrouping&&s.common,T=s.seriesSpecific,D=o.defaultOptions.plotOptions[A].dataGrouping;if(F&&(T[A]||S)){let P=this.chart.rangeSelector;D||(D=b(s.common,T[A])),C.dataGrouping=b(S,D,F.series&&F.series.dataGrouping,F[A].dataGrouping,this.userOptions.dataGrouping,!C.isInternal&&P&&y(P.selected)&&P.buttonOptions[P.selected].dataGrouping)}}return{compose:function(O){let C=O.prototype;C.applyGrouping||(c(O.prototype.pointClass,"update",function(){if(this.dataGroup)return d(24,!1,this.series.chart),!1}),c(O,"afterSetOptions",z),c(O,"destroy",L),p(C,{applyGrouping:M,destroyGroupedData:L,generatePoints:_,getDGApproximation:w,groupData:k}))},groupData:k}}),e(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,s,r,o,a,l){let{format:h}=o,{composed:c}=a,{addEvent:g,extend:d,isNumber:p,pick:y,pushUnique:b}=l;function x(f){let M=this.chart,L=M.time,_=f.labelConfig,w=_.series,k=_.point,z=w.options,O=w.tooltipOptions,C=z.dataGrouping,A=w.xAxis,F=O.xDateFormat,S,T,D,P,m,u=O[f.isFooter?"footerFormat":"headerFormat"];if(A&&A.options.type==="datetime"&&C&&p(_.key)){T=w.currentDataGrouping,D=C.dateTimeLabelFormats||s.common.dateTimeLabelFormats,T?(P=D[T.unitName],T.count===1?F=P[0]:(F=P[1],S=P[2])):!F&&D&&A.dateTime&&(F=A.dateTime.getXDateFormat(_.x,O.dateTimeLabelFormats));let v=y(w.groupMap?.[k.index].groupStart,_.key),I=v+T?.totalRange-1;m=L.dateFormat(F,v),S&&(m+=L.dateFormat(S,I)),w.chart.styledMode&&(u=this.styledModeFormat(u)),f.text=h(u,{point:d(_.point,{key:m}),series:w},M),f.preventDefault()}}return{compose:function(f,M,L){i.compose(f),r.compose(M),L&&b(c,"DataGrouping")&&g(L,"headerFormatter",x)},groupData:r.groupData}}),e(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(i,s,r,o){return i.dataGrouping=i.dataGrouping||{},i.dataGrouping.approximationDefaults=i.dataGrouping.approximationDefaults||s,i.dataGrouping.approximations=i.dataGrouping.approximations||r,o.compose(i.Axis,i.Series,i.Tooltip),i}),e(t,"Extensions/Annotations/NavigationBindingsUtilities.js",[t["Core/Utilities.js"]],function(i){let{defined:s,isNumber:r,pick:o}=i,a={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};return{annotationsFieldsTypes:a,getAssignedAxis:function(l){return l.filter(h=>{let c=h.axis.getExtremes(),g=c.min,d=c.max,p=o(h.axis.minPointOffset,0);return r(g)&&r(d)&&h.value>=g-p&&h.value<=d+p&&!h.axis.options.isInternal})[0]},getFieldType:function(l,h){let c=a[l],g=typeof h;return s(c)&&(g=c),{string:"text",number:"number",boolean:"checkbox"}[g]}}}),e(t,"Extensions/MouseWheelZoom/MouseWheelZoom.js",[t["Core/Utilities.js"],t["Extensions/Annotations/NavigationBindingsUtilities.js"]],function(i,s){let r,{addEvent:o,isObject:a,pick:l,defined:h,merge:c}=i,{getAssignedAxis:g}=s,d=[],p={enabled:!0,sensitivity:1.1},y=f=>(a(f)||(f={enabled:f??!0}),c(p,f)),b=function(f,M,L,_,w,k,z){let O=l(z.type,f.zooming.type,""),C=[];O==="x"?C=L:O==="y"?C=_:O==="xy"&&(C=f.axes);let A=f.transform({axes:C,to:{x:w-5,y:k-5,width:10,height:10},from:{x:w-5*M,y:k-5*M,width:10*M,height:10*M},trigger:"mousewheel"});return A&&(h(r)&&clearTimeout(r),r=setTimeout(()=>{f.pointer?.drop()},400)),A};function x(){let f=y(this.zooming.mouseWheel);f.enabled&&o(this.container,"wheel",M=>{M=this.pointer?.normalize(M)||M;let{pointer:L}=this,_=L&&!L.inClass(M.target,"highcharts-no-mousewheel");if(this.isInsidePlot(M.chartX-this.plotLeft,M.chartY-this.plotTop)&&_){let w=f.sensitivity||1.1,k=M.detail||(M.deltaY||0)/120,z=g(L.getCoordinates(M).xAxis),O=g(L.getCoordinates(M).yAxis);b(this,Math.pow(w,k),z?[z.axis]:this.xAxis,O?[O.axis]:this.yAxis,M.chartX,M.chartY,f)&&M.preventDefault?.()}})}return{compose:function(f){d.indexOf(f)===-1&&(d.push(f),o(f,"afterGetContainer",x))}}}),e(t,"masters/modules/mouse-wheel-zoom.src.js",[t["Core/Globals.js"],t["Extensions/MouseWheelZoom/MouseWheelZoom.js"]],function(i,s){return i.MouseWheelZoom=i.MouseWheelZoom||s,i.MouseWheelZoom.compose(i.Chart),i}),e(t,"masters/modules/stock.src.js",[t["Core/Globals.js"],t["Series/DataModifyComposition.js"],t["Stock/Navigator/Navigator.js"],t["Core/Axis/OrdinalAxis.js"],t["Stock/RangeSelector/RangeSelector.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Chart/StockChart.js"],t["Series/OHLC/OHLCSeries.js"],t["Series/Flags/FlagsSeries.js"]],function(i,s,r,o,a,l,h,c,g){return i.Navigator=i.Navigator||r,i.OrdinalAxis=i.OrdinalAxis||o,i.RangeSelector=i.RangeSelector||a,i.Scrollbar=i.Scrollbar||l,i.stockChart=i.stockChart||h.stockChart,i.StockChart=i.StockChart||i.stockChart,i.extend(i.StockChart,h),s.compose(i.Series,i.Axis,i.Point),g.compose(i.Renderer),c.compose(i.Series),i.Navigator.compose(i.Chart,i.Axis,i.Series),i.OrdinalAxis.compose(i.Axis,i.Series,i.Chart),i.RangeSelector.compose(i.Axis,i.Chart),i.Scrollbar.compose(i.Axis),i.StockChart.compose(i.Chart,i.Axis,i.Series,i.SVGRenderer),i})})});var Qu=ai((wA,go)=>{"use strict";(function(n){typeof go=="object"&&go.exports?(n.default=n,go.exports=n):typeof define=="function"&&define.amd?define("highcharts/modules/solid-gauge",["highcharts","highcharts/highcharts-more"],function(t){return n(t),n.Highcharts=t,n}):n(typeof Highcharts<"u"?Highcharts:void 0)})(function(n){"use strict";var t=n?n._modules:{};function e(i,s,r,o){i.hasOwnProperty(s)||(i[s]=o.apply(null,r),typeof CustomEvent=="function"&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:s,module:i[s]}})))}e(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(i,s){var r,o;let{parse:a}=i,{merge:l}=s;return(o=r||(r={})).initDataClasses=function(h){let c=this.chart,g=this.legendItem=this.legendItem||{},d=this.options,p=h.dataClasses||[],y,b,x=c.options.chart.colorCount,f=0,M;this.dataClasses=b=[],g.labels=[];for(let L=0,_=p.length;L<_;++L)y=l(y=p[L]),b.push(y),(c.styledMode||!y.color)&&(d.dataClassColor==="category"?(c.styledMode||(x=(M=c.options.colors||[]).length,y.color=M[f]),y.colorIndex=f,++f===x&&(f=0)):y.color=a(d.minColor).tweenTo(a(d.maxColor),_<2?.5:L/(_-1)))},o.initStops=function(){let h=this.options,c=this.stops=h.stops||[[0,h.minColor||""],[1,h.maxColor||""]];for(let g=0,d=c.length;g<d;++g)c[g].color=a(c[g][1])},o.normalizedValue=function(h){let c=this.max||0,g=this.min||0;return this.logarithmic&&(h=this.logarithmic.log2lin(h)),1-(c-h)/(c-g||1)},o.toColor=function(h,c){let g,d,p,y,b,x,f=this.dataClasses,M=this.stops;if(f){for(x=f.length;x--;)if(d=(b=f[x]).from,p=b.to,(d===void 0||h>=d)&&(p===void 0||h<=p)){y=b.color,c&&(c.dataClass=x,c.colorIndex=b.colorIndex);break}}else{for(g=this.normalizedValue(h),x=M.length;x--&&!(g>M[x][0]););d=M[x]||M[x+1],g=1-((p=M[x+1]||d)[0]-g)/(p[0]-d[0]||1),y=d.color.tweenTo(p.color,g)}return y},r}),e(t,"Core/Axis/SolidGaugeAxis.js",[t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Utilities.js"]],function(i,s){let{extend:r}=s;return{init:function(o){r(o,i)}}}),e(t,"Series/SolidGauge/SolidGaugeSeriesDefaults.js",[],function(){return{colorByPoint:!0,dataLabels:{y:0}}}),e(t,"Series/SolidGauge/SolidGaugeSeries.js",[t["Extensions/BorderRadius.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/SolidGaugeAxis.js"],t["Series/SolidGauge/SolidGaugeSeriesDefaults.js"],t["Core/Utilities.js"]],function(i,s,r,o,a){let{gauge:l,pie:h}=s.seriesTypes,{clamp:c,extend:g,isNumber:d,merge:p,pick:y,pInt:b}=a;class x extends l{translate(){let M=this.yAxis;r.init(M),!M.dataClasses&&M.options.dataClasses&&M.initDataClasses(M.options),M.initStops(),l.prototype.translate.call(this)}drawPoints(){let M,L=this.yAxis,_=L.center,w=this.options,k=this.chart.renderer,z=w.overshoot,O=w.rounded&&w.borderRadius===void 0,C=d(z)?z/180*Math.PI:0;for(let A of(d(w.threshold)&&(M=L.startAngleRad+L.translate(w.threshold,void 0,void 0,void 0,!0)),this.thresholdAngleRad=y(M,L.startAngleRad),this.points))if(!A.isNull){let F=b(y(A.options.radius,w.radius,100))*_[2]/200,S=b(y(A.options.innerRadius,w.innerRadius,60))*_[2]/200,T=Math.min(L.startAngleRad,L.endAngleRad),D=Math.max(L.startAngleRad,L.endAngleRad),P=A.graphic,m=L.startAngleRad+L.translate(A.y,void 0,void 0,void 0,!0),u,v,I=L.toColor(A.y,A);I==="none"&&(I=A.color||this.color||"none"),I!=="none"&&(A.color=I),m=c(m,T-C,D+C),w.wrap===!1&&(m=c(m,T,D));let E=O?(F-S)/2/F:0,R=Math.min(m,this.thresholdAngleRad)-E,j=Math.max(m,this.thresholdAngleRad)+E;j-R>2*Math.PI&&(j=R+2*Math.PI);let G=O?"50%":0;w.borderRadius&&(G=i.optionsToObject(w.borderRadius).radius),A.shapeArgs=u={x:_[0],y:_[1],r:F,innerR:S,start:R,end:j,borderRadius:G},A.startR=F,P?(v=u.d,P.animate(g({fill:I},u)),v&&(u.d=v)):A.graphic=P=k.arc(u).attr({fill:I,"sweep-flag":0}).add(this.group),this.chart.styledMode||(w.linecap!=="square"&&P.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),P.attr({stroke:w.borderColor||"none","stroke-width":w.borderWidth||0})),P&&P.addClass(A.getClassName(),!0)}}animate(M){M||(this.startAngleRad=this.thresholdAngleRad,h.prototype.animate.call(this,M))}}return x.defaultOptions=p(l.defaultOptions,o),s.registerSeriesType("solidgauge",x),x}),e(t,"masters/modules/solid-gauge.src.js",[t["Core/Globals.js"]],function(i){return i})})});var _o=Jt(Ms());var Yh="Oxygen",Uh="mdx2json.emptyportlet",Hh="DSW.Addons.";var pe=(()=>{class n{constructor(){this.model={},this.el=Qt(Lh),this.cd=Qt(Rh),this.ds=Qt(jh),this.ss=Qt(Bh),this.bs=Qt(Gh),this.us=Qt(Nh),this.i18n=Qt(zh),this.route=Qt(Fh),this.fs=Qt(Wh),this.dbs=Qt(Xh),this.isSpinner=!0,this.drills=[],this.drillFilterWidgets=[],this.customDataSource="",this.preventColFilteringBasedOnDataProperties=!1,this.drillFilter="",this.drillFilterDrills=[],this.customColSpec="",this.customRowSpec="",this.linkedMdx="",this.canDoDrillthrough=!1,this.firstRun=!0,this.baseType="",this.hasDatasourceChooser=!1,this.oneItemDrillApplied=!1}get inline(){return this.widget.inline}ngOnInit(){this.baseType=this.widget?.type,this.override=this.getOverride(),this.extendPropsWithOverrides(),this.loadWidgetSettings(),this.initializeDrills(),this.initializeTile(),this.initializeActionAndPvItems(),this.initializeDataSourceChooser(),this.initializeDrillthrough(),this.initializeLiveDataUpdate(),this.subscribe(),this.initializeLinkedWidgets(),this.initializeDependants(),this.initializeDrillFilter(),this.initializeChoseDataSource(),this.initializeInputControls(),this.initializeActions(),this.requestPivotData(),this.initializeDataRequest()}ngOnDestroy(){clearInterval(this.liveUpdateInterval),this.subDrilldown?.unsubscribe(),this.subDrillthrough?.unsubscribe(),this.subLinkedMdx?.unsubscribe(),this.subRefreshDependants?.unsubscribe(),this.subDrillFilter?.unsubscribe(),this.subDrillFilterAll?.unsubscribe(),this.subPivotVar?.unsubscribe(),this.subPivotVarAll?.unsubscribe(),this.subDataSourceChange?.unsubscribe(),this.subColSpec?.unsubscribe(),this.subColSpecAll?.unsubscribe(),this.subChartType?.unsubscribe()}getDataProp(e){if(this.widget.dataProperties)return this.widget.dataProperties.find(i=>i.name===e)}getDataPropByDataValue(e){if(!this.widget.dataProperties||!e)return;let i=e.split("/");return this.widget.dataProperties.find(s=>{let r=s.dataValue?.toString().split("/");return i.some(o=>r.includes(o))})}getDataPropValue(e){let i=this.getDataProp(e);if(i&&i.dataValue!==null&&i.dataValue!==void 0)return i.dataValue.toString()}initializeActions(){if(!this.widget.controls||this.widget.controls.length===0)return;let e=["chooserowspec","setrowspec","choosedatasource","choosecharttype","applyfilter","setfilter","refresh","reloaddashboard","showlisting","showgeolisting","showbreakdown","setdatasource","applyvariable","setrowcount","setrowsort","setcolumncount","setcolumnsort","choosecolumnspec"],i=this.widget.controls.filter(s=>e.indexOf(s.action.toLowerCase())===-1&&s.type!=="hidden");i.length!==0&&(this.widget.acItems=i)}initializeChoseDataSource(){return Ft(this,null,function*(){if(!this.widget)return;let e=r=>r.action==="chooseDataSource"||r.action==="chooseRowSpec"||r.action==="setRowSpec"||r.action==="chooseColumnSpec",i=this.widget.type===Uh;if(!i&&(!this.widget.controls||this.widget.controls.length===0))return;let s=[];if(this.widget.controls&&(s=this.widget.controls.filter(e).filter(r=>r.location!=="dashboard")),i){let r=this.dbs.getWidgets();for(let o=0;o<r.length;o++)r[o].controls&&(s=s.concat(r[o].controls.filter(e).filter(a=>a.location==="dashboard")))}if(s.length!==0){this.hasDatasourceChooser=!0,this.widget.dsItems=[];for(let r=0;r<s.length;r++){let o=s[r].valueList,a=s[r].displayList,l={},h=s[r].targetProperty;if(h)h.toLowerCase().slice(-9)===".termlist"&&(h=h.slice(0,-9)),h.toLowerCase().slice(-5)===".term"&&(h=h.slice(0,-5));else{if(!o||!a)continue;{l={};let d=o.split(",");a.split(",").forEach((p,y)=>{l[p]=d[y]})}}let c={action:s[r].action,label:s[r].label||this.i18n.get("dataSource"),dsSelected:s[r].value,control:s[r],labels:[],values:[],field:"select"};this.widget.dsItems.push(c);let g=null;if(h?g=yield this.ds.getTermList(h):g=l,g&&typeof g=="object"){for(let p in g)g[p]===this.widget.dataSource&&(this.widget.dsSelected=p);c.labels=[],c.values=[],(c.control?.action==="chooseRowSpec"||c.control?.action==="setRowSpec")&&(c.labels.push(""),c.values.push(""));for(let p in g)c.labels.push(p),c.values.push(g[p]);let d=-1;this.customDataSource?d=c.values.findIndex(p=>p===this.customDataSource):d=c.values.findIndex(p=>p.split("/").pop()===c.dsSelected),d===-1?c.dsSelected=c.labels[0]:c.dsSelected=c.labels[d],this.parent?.filters.detectChanges()}}}})}onVariableChange(e){let i=e.target;this.bs.broadcast(`updatePivotVar:${i}`)}onPivotVarChanged(){this.requestData()}getColumnIndexByName(e,i){return e.Cols[0].tuples.findIndex(s=>s.caption.toLowerCase()===i.toLowerCase())}getDataByColumnName(e,i,s,r=""){if(!e||!e.Data||!e.Cols||!e.Cols[0]||!e.Cols[0].tuples)return;let o=e.Cols[0].tuples.filter(c=>c.caption.toLowerCase()===i.toLowerCase());if(o.length===0)return;let a=e.Cols[0].tuples.indexOf(o[0]),l=e.Cols[0].tuples[a].originalIndex;l!==void 0&&(a=l);let h=e.Data[s+a];return r&&(h=this.formatNumber(h,r)),h}initializeDrillFilter(){let e=this.fs.getClickFilterTarget(this.widget.name);e?.length&&(this.drillFilterWidgets=e)}resetClickFilter(){if(this.widget.clickFilterActive=!1,!(!this.drillFilterWidgets||!this.drillFilterWidgets.length))for(let e=0;e<this.drillFilterWidgets.length;e++){if(!this.drillFilterWidgets[e])continue;this.drillFilterWidgets[e].split(",").forEach(s=>{this.bs.broadcast("drillFilter:"+s,{path:"",drills:[]})})}}doDrillFilter(e,i=[]){if(!this.drillFilterWidgets||!this.drillFilterWidgets.length)return;let s=i.slice();e||s.pop(),this.widget.clickFilterActive=!!e;for(let r=0;r<this.drillFilterWidgets.length;r++){if(!this.drillFilterWidgets[r])continue;this.drillFilterWidgets[r].split(",").forEach(a=>{this.bs.broadcast("drillFilter:"+a,{path:e,drills:s})})}this.parent?.header?.cd.detectChanges()}onDrillFilter(e,i){this.drillFilter=e,this.drillFilterDrills=i,this.requestData()}actionNavigate(e,i=!1){let s=e.targetProperty,r=s.toUpperCase().indexOf("DASHBOARD=");if(r!==-1){let o=s.substring(r+10,s.length);o.indexOf("?")===-1&&(o=o.replace("&","?"));let a=location.href;a.indexOf("#")!==-1?s=a.split("#")[0]+"#/"+Ss+"/"+o:s+="#/"+Ss+"/"+o}if(s=s.replace("$$$FILTERS",this.fs.getFiltersUrlString(this.widget.name)),this.lpt&&this.lpt.getSelectedRows().length){let o=this.lpt.dataController.getData(),a=o.dataArray[(this.lpt.getSelectedRows()[0]-1)*o.columnProps.length],l=s.toLowerCase().indexOf("$$$currvalue");l!==-1&&(s=s.substring(0,l)+a+s.substring(l+12,s.length))}if(this.lpt&&this.lpt.getSelectedRows().length){let o=this.lpt.dataController.getData(),a=this.lpt.getSelectedRows(),l=[];for(let c=0;c<a.length;c++){let g=o.dataArray[(a[c]-1)*o.columnProps.length];l.push(g)}let h=s.toLowerCase().indexOf("$$$valuelist");h!==-1&&(s=s.substring(0,h)+l.join(",")+s.substring(h+12,s.length))}i?window.open(s,"_blank"):window.location.href=s}performAction(e){let i=e.action.toLowerCase();i==="viewdashboard"?this.navigateDashboard(e.targetProperty):i==="navigate"?this.actionNavigate(e):i==="newwindow"?this.actionNavigate(e,!0):i==="setColumnSpec"?(this.customColSpec=e.targetProperty,this.requestData()):this.ds.execAction(e.action,this.widget.cube?this.widget.cube:this.widget.dataSource.replace(".kpi","")).then(()=>this.requestData())}getDrillTitle(e){if(!e)return this.widget.baseTitle||"";let i=e.path.split(".");return i.pop(),(this.widget.baseTitle?this.widget.baseTitle+" - ":"")+(e.name?i[i.length-1]+" - ":"")+(e.name||e.category)}isEmptyData(e){return!e||!e.Cols||!e.Cols[1]||!e.Cols[1]||!e.Cols[1].tuples||e.Cols[1].tuples.length===0||!e.Data||e.Data.length===0||e.Data[0]==="@NOPROPERTY"}doDrillUp(){this.widget.isDrillthrough?(this.restoreWidgetType(),this.widget.isDrillthrough=!1,this.widget.backButton=!!this.drills?.length,this.parent.header?.cd.detectChanges()):this.doDrillOnly()}restoreWidgetType(){delete this.widget.pivotMdx,delete this.widget.pivotData,this.widget?.oldType&&(this.widget.type=this.widget.oldType,this.parent?.updateComponent())}changeWidgetType(e){this.widget.oldType=this.widget.type,this.widget.type=e,this.parent?.updateComponent()}getDrillthroughMdx(e){let i=e.toLowerCase(),s="select non empty",r=i.lastIndexOf(s);r===-1&&(s="select",r=i.lastIndexOf(s));let o=i.lastIndexOf("from");if(r===-1){console.warn("Can't find 'select' in MDX during calculation drillthrough mdx");return}if(o===-1){console.warn("Can't find 'from' in MDX during calculation drillthrough mdx");return}let a="";if(this.pivotData?.listingRows){let h=parseInt(this.pivotData.listingRows,10);h&&(a=` MAXROWS ${h} `)}let l=this.widget.controls.find(h=>h.action==="showListing");if(l){let h=l.targetPropertyDisplay;if(h)return"DRILLTHROUGH "+a+e.substring(0,r+s.length)+" "+e.substring(o,e.length)+` %LISTING [${h}]`}return"DRILLTHROUGH "+a+e.substring(0,r+s.length)+" "+e.substring(o,e.length)}doDrill(e,i,s,r,o=!1,a,l){return new Promise((h,c)=>{this.clearError(),o||this.doDrillFilter(e,this.drills);let g=this.drills.slice();e?this.drills.push({path:e,name:i||"",category:s}):this.drills.pop();let d=this.getMDX();this.drills=g,this.showLoading();let p=()=>{if(r){r();return}if(!this.canDoDrillthrough)return;let y=this.getDrillthroughMdx(d)||"";this.ds.execMDX(y).then(b=>{!b||!b.children||b.children.length===0||(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.pivotData=b,this._currentData=b,this.displayAsPivot(y))}).catch(b=>{l&&l(b)})};this.showLoading(),this.ds.execMDX(d).catch(y=>{o?l&&l(y):p()}).then(y=>{if(y){if(this.chartConfig&&(this.chartConfig.loading=!1),this.isEmptyData(y)&&e){p();return}this.isEmptyData(y)||(e?this.drills.push({path:e,name:i||"",category:s}):this.drills.pop(),this.widget.backButton=this.drills.length!==0,this.widget.baseTitle||(this.widget.baseTitle=this.widget.title||""),this.widget.title=this.getDrillTitle(this.drills[this.drills.length-1]),this.broadcastDependents(d),this.retrieveData(y),this.updateLocationDrillParameters(),this.parent?.header?.cd.detectChanges(),this._currentData=y,a&&a())}}).finally(()=>{this.hideLoading(),h()})})}doDrillthrough(e,i,s,r,o=!1,a,l){return new Promise((h,c)=>{if(!this.canDoDrillthrough){h();return}if(this.clearError(),this.widget.kpitype&&i){this.doKPIDrillthrough(i);return}let g=this.drills.slice();e?Array.isArray(e)?e.forEach(y=>{this.drills.push({path:y,name:i||"",category:s})}):this.drills.push({path:e,name:i||"",category:s}):this.drills.pop();let d=this.getMDX();this.drills=g,this.showLoading();let p=this.getDrillthroughMdx(d)||"";this.ds.execMDX(p).then(y=>{!y||!y.children||y.children.length===0||(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.pivotData=y,this.displayAsPivot(p))}).catch(y=>{l&&l(y)}).finally(()=>{this.hideLoading()})})}doDrillOnly(e,i,s,r,o=!1,a,l){return new Promise((h,c)=>{this.clearError();let g=this.drills.slice();e?this.drills.push({path:e,name:i||"",category:s}):this.drills.pop();let d=this.getMDX();this.drills=g,this.showLoading(),this.ds.execMDX(d).catch(p=>{l&&l(p)}).then(p=>{p&&(this.chartConfig&&(this.chartConfig.loading=!1),!this.isEmptyData(p)&&(this.removeColsThatNotExistInDataProperties(p),this._currentData=p,e?this.drills.push({path:e,name:i||"",category:s}):this.drills.pop(),this.widget.backButton=this.drills.length!==0,this.widget.baseTitle||(this.widget.baseTitle=this.widget.title||""),this.widget.title=this.getDrillTitle(this.drills[this.drills.length-1]),this.broadcastDependents(d),this.retrieveData(p),this.updateLocationDrillParameters(),this.parent?.header?.cd.detectChanges(),a&&a()))}).finally(()=>{this.hideLoading(),h()})})}checkForAutoDrill(e){return Ft(this,null,function*(){let i=!1;return e?.Cols[1]?.tuples?.length===1&&(this.oneItemDrillApplied=!0,yield this.doDrill(e.Cols[1].tuples[0].path,e.Cols[1].tuples[0].caption,void 0,void 0,!0,()=>{this.widget.backButton=!1,this.parent?.header?.cd.detectChanges(),i=!0},()=>{this.oneItemDrillApplied=!1})),i})}showLoading(){this.isSpinner||(this.isSpinner=!0,this.parent.cd.detectChanges(),this.cd.detectChanges())}hideLoading(){this.isSpinner&&(this.isSpinner=!1,this.parent.cd.detectChanges(),this.cd.detectChanges())}applyDrill(e){let i=this.route.snapshot.queryParamMap.get("filter");i&&(e=e+" %FILTER "+i);let s=this.drills;if(s.length===0&&(s=this.drillFilterDrills),s.length===0)return e;let r=[];this.pivotData&&this.pivotData.rowAxisOptions&&this.pivotData.rowAxisOptions.drilldownSpec&&(r=this.pivotData.rowAxisOptions.drilldownSpec.split("^"));for(let c=0;c<s.length;c++)s[c].path&&(e+=" %FILTER "+s[c].path);let o=r[s.length-1],a=o||s[s.length-1].path,l=e.match(/ON 0,(.*)ON 1/),h="";if(l&&l.length===2){let c=l[1],g=c.match(/ORDER\((.*?)\,/);if(g&&g[0]&&(h=g[0]),h)e=e.replace(h,"ORDER("+a+".children,");else{let d=c.indexOf("NON EMPTY")!==-1;e=e.replace(c,(d?"NON EMPTY ":" ")+a+" ")}}if((!o&&r.length!==0||r.length===0)&&!e.match(/\{.*\} ON 1/)){if(e.indexOf(".Members ON 1 FROM")===-1)h||(e=e.replace(" ON 1 FROM"," .children ON 1 FROM"));else{let g=e.indexOf("["),d=".Members ON 1 FROM",p=e.indexOf(d);e=e.substr(0,g)+a+".children ON 1 FROM"+e.substr(p+d.length)}return e}return this.drillFilter&&(e=e+" %FILTER "+this.drillFilter),e}changeDataSource(e,i){if(i&&i?.control?.target!==""){let s=i?.control?.target.split(",")??[];for(let r=0;r<s.length;r++)this.bs.broadcast("changeDataSource:"+s[r],e);return}e?this.customDataSource=e:this.customDataSource="",this.requestPivotData(),this.updateDatasourceParameterInURL()}onColSpecChanged(e){this.customColSpec=e,this.requestData()}changeRowSpec(e,i=!0){e?this.customRowSpec=e:this.customRowSpec="",i&&this.requestData()}changeColumnSpec(e,i){let s="";e&&(s=e.replace(/\\/g,""));let r=i.control?.target;this.bs.broadcast("setColSpec:"+r,s)}onDataSourceChange(e){let i="",s=e.dsSelected;if(s){let r=e.labels?.indexOf(s.toString())??-1;r!==-1&&(i=e?.values?.[r]||"")}switch(e.action){case"chooseDataSource":this.changeDataSource(i,e);break;case"chooseRowSpec":case"setRowSpec":this.changeRowSpec(i,e.action!=="setRowSpec");break;case"chooseColumnSpec":this.changeColumnSpec(i,e);break}}onRefreshDependents(){this.broadcastDependents()}onSetLinkedMdx(e){this.widget.linkedMdx=e,this.linkedMdx=e,this.requestData()}isLinked(){return!!this.widget?.dataLink}hasDependents(){return!!this.widget?.dependents?.length}requestPivotData(){let e=this.customDataSource||this.widget.dataSource;this.widget.kpitype||e&&this.ds.getPivotData(e).then(i=>this._retriveDataSource(i)).catch(i=>{this.showError(i.error?.Error||i.message)})}convertKPIToMDXData(e,i=!1){let s=e,r=e.Result,o={Info:{cubeName:s.Info.KpiName},Cols:[],Data:[]},a=[];for(let h=0;h<r.Properties.length;h++)a.push({caption:r.Properties[h].caption||r.Properties[h].name,dimension:r.Properties[h].name});o.Cols.push({tuples:a});let l=[];for(let h=0;h<r.Series.length;h++){for(let g=0;g<r.Properties.length;g++)o.Data.push(r.Series[h][r.Properties[g].name]);let c=r.Series[h]["%series"]||r.Series[h].seriesName;l.push({title:c,caption:c})}return o.Cols.push({tuples:l}),i||this.removeColsThatNotExistInDataProperties(o),o}retrieveData(e){if(this.hideLoading(),e.Error){this.showError(e.Error);return}}_retriveKPI(e,i=!1){if(this){if(this._kpiData=e,this.lpt){this.lpt.dataController.setData(this.lpt.dataSource._convert(this.convertKPIToMDXData(e,i)));return}this.retrieveData(this.convertKPIToMDXData(e,i))}}_retriveDataSource(e){this&&(this.pivotData=e,this.customDataSource&&(this.widget.mdx=e.mdx,this.requestData()))}onResize(){}requestData(){if(!this.widget.isSupported)return;if(this.oneItemDrillApplied&&(this.drills=[],this.oneItemDrillApplied=!1,this.widget.backButton=!1,this.widget.title=this.getDrillTitle(),this.parent?.header?.cd.detectChanges()),this.widget.kpitype){this._requestKPIData();return}let e=this.getMDX();if(!e){this.isSpinner=!1;return}this.clearError(),setTimeout(()=>this.broadcastDependents(),0),e.indexOf("$")!==-1&&!this.pivotVariables&&this.ds.getPivotVariables(this.widget.cube).then(i=>{this.pivotVariables=i}).catch(i=>{this.showError(i.message)}),this.showLoading(),this.ds.execMDX(e).then(i=>{this.removeColsThatNotExistInDataProperties(i),this._currentData=i,this.retrieveData(i)}).catch(i=>this._onRequestError(i)).finally(()=>{this.hideLoading()})}broadcastDependents(e){if(this.hasDependents())for(let i=0;i<this.widget.dependents.length;i++)this.bs.broadcast("setLinkedMDX:"+this.widget.dependents[i],e||this.getMDX())}_onRequestError(e,i){this.chartConfig&&(this.chartConfig.loading=!1);let s=this.i18n.get("errWidgetRequest");switch(i){case 401:case 403:s=this.i18n.get("errUnauth");break;case 404:s=this.i18n.get("errNotFound");break}this.showError(s)}clearError(){this.parent&&this.parent.clearError()}showError(e){this.parent&&this.parent.showError(e)}checkColSpec(e){if(this.customColSpec){let i="SELECT NON EMPTY",s=e.lastIndexOf(i);if(s===-1&&(i="SELECT",s=e.lastIndexOf(i)),s===-1)return e;let r=e.lastIndexOf("ON 0");return r===-1||r<s||(e=e.replace(e.substring(s,r),i+" "+this.customColSpec+" ")),e}return e}replaceMDXVariables(e,i){if(e.indexOf("$")===-1)return e;let s=i.filter(r=>r.action==="applyVariable");if(this.widget.shared){let r=this.route.snapshot.queryParamMap.get("variables");r&&r.split("~").forEach(a=>{let l=a.split("."),h=l[0],c=l[1],g=s.findIndex(d=>d.targetProperty==="$variable."+h);g!==-1?s[g].value=c:s.push({targetProperty:"$variable."+h,value:c})})}if(!s.length)return e;for(let r=0;r<s.length;r++){let o=s[r];if(o.value==="")continue;let a=o.targetProperty.toLowerCase(),l;for(;(l=e.toLowerCase().indexOf(a))!==-1;)e=e.substr(0,l)+o.value+e.substr(l+a.length,e.length)}return e}addQueryFilters(e){let i=this.route.snapshot.queryParamMap.get("SETTINGS");if(!i)return e;let s=i.split(";"),r="",o="";for(let a=0;a<s.length;a++){let l=s[a].split(":");if(l[0].toLowerCase()==="target"){r=l[1];continue}l[0].toLowerCase()==="filter"&&(o=l.slice(1).join(":"))}if(r&&(this.widget.name===r||r==="*"||r.split(",").indexOf(this.widget.name)!==-1)&&o){let a=o.split("~");for(let l=0;l<a.length;l++){let h=a[l],c=h.indexOf("%NOT")!==-1;if(h.indexOf("{")!==-1){let g=h.substring(0,h.indexOf("{")).replace("%NOT ",""),d=h.match(/\{([^)]+)\}/)?.[1].split(",");e+=" %FILTER %OR({",e+=d?.map(p=>g+p+(c?".%NOT":"")).join(",")||"",e+="})"}else e+=" %FILTER "+h}}return e}dateToHorolog(e){let i=new Date("12/31/1840Z"),r=this.us.toDate(e).getTime()-i.getTime();return Math.ceil(r/(1e3*3600*24)).toString()}getMDX(){let e=!1;if(this.widget.kpitype)return"";let i=this.fs.getWidgetFilters(this.widget.name);if(this.isLinked()){let o=this.replaceMDXVariables(this.linkedMdx||this.widget.linkedMdx||"",i);return o=this.checkColSpec(o),this.applyDrill(o)}if(this.drillFilter){let o=this.drillFilter.indexOf("&");o!==-1&&i.push({targetProperty:this.drillFilter.substring(0,o-1),value:"&"+this.drillFilter.substring(o+1,this.drillFilter.length)})}for(let o=0;o<i.length;o++){let a=i[o];if(a.value!==""||a.isInterval){e=!0;break}}let s=this.replaceMDXVariables(this.widget.mdx,i);if(!s)return this.widget.edKey||this.showError("Widget without MDX"),"";if(this.customRowSpec){let o=s.indexOf("ON 0"),a=s.indexOf("ON 1");o!==-1&&(s=s.slice(0,o)+"ON 0, NON EMPTY "+this.customRowSpec+" ON 1 "+s.slice(a+4))}if(s=this.applyRowCount(s),s=this.checkColSpec(s),s=this.addQueryFilters(s),!e||this.widget.tile)return this.applyDrill(s);s+=this.applyFilters(i);let r="";if(r){let o=s.toUpperCase(),a=o.indexOf("WHERE");a===-1?(a=o.indexOf("%FILTER"),a===-1?s+=" WHERE "+r:s=s.slice(0,a)+" WHERE "+r+" "+s.slice(a)):s=s.slice(0,a)+" "+r+" AND "+s.slice(a)}return this.applyDrill(s)}onHeaderButton(e){e.name==="expand"&&(this.widget.isExpanded=e.state,this.widget.dragEnabled=this.widget.isExpanded,setTimeout(()=>{this.onResize()},0))}displayAsPivot(e){this.widget.type==="pivot"?(this.widget.isDrillthrough=!1,this.restoreWidgetType()):(this.widget.pivotMdx=e||this.getMDX(),this.changeWidgetType("pivot")),this.parent?.cd&&this.parent.cd.detectChanges()}formatNumber(e,i=""){let s="";if(e==null&&(e=""),i?s=(0,_o.default)(e).format(i.replace(/;/g,""))||"":s=e.toString(),this.dataInfo){let r=this.dataInfo.numericGroupSeparator,o=this.dataInfo.numericGroupSize||3;if(r){let a=s.split(".");a[0]=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),s=a.join(".")}this.dataInfo.decimalSeparator&&(s=s.replace(/\./g,this.dataInfo.decimalSeparator))}return s}getDrillsAsParameter(){let e=this.drills;return e?.length?encodeURIComponent(e.map(i=>i.path).join("~")):""}getFormat(e,i,s){let r="";return this.widget?.format&&(r=this.widget.format),i.Cols[0].tuples[e].format&&(r=i.Cols[0].tuples[e].format),s?.format&&(r=s?.format),r}getDataValue(e,i,s){let r=i.Data[e],o=this.getFormat(e,i,s);return o&&(r=(0,_o.default)(r).format(o)),r}_requestKPIData(e,i=!1){let s=this.customDataSource||this.widget.dataSource;if(!s)return;let r=this.fs.getWidgetFilters(this.widget.name)?.filter(a=>!!a.value).map(a=>a.value.toString().split("|").map(h=>({name:a.targetProperty,value:h,exclude:!!a.isExclude}))).flat();e&&r.push(...e);let o=!!e||i;return this.showLoading(),this.ds.getKPIData(s,r,o).then(a=>this._retriveKPI(a,o)).finally(()=>{this.hideLoading()})}removeColsThatNotExistInDataProperties(e){if(this.widget.type==="map"||this.preventColFilteringBasedOnDataProperties||!this.widget.dataProperties?.length||!e?.Cols[0]?.tuples?.length)return;let i=[],s=e.Cols[0]?.tuples?.length||0;s&&(e.Cols[0].tuples=e?.Cols[0]?.tuples.filter((r,o)=>{let a=r.dimension.toString().split("/"),l=this.widget.dataProperties.some(h=>h.dataValue.toString().split("/").some(g=>a.includes(g)));return l||i.push(o),l}),e.Data=e.Data?.filter((r,o)=>!i.some(a=>o%s===a)))}subscribe(){this.subDrillFilter=this.bs.subscribe("drillFilter:"+this.widget.name,({path:e,drills:i})=>{this.onDrillFilter(e,i)}),this.subDrillFilterAll=this.bs.subscribe("drillFilter:*",({path:e,drills:i})=>{this.onDrillFilter(e,i)}),this.subDrilldown=this.bs.subscribe("drilldown:"+this.widget.name,({path:e,title:i})=>{this.doDrillOnly(e,i,i)}),this.subDrillthrough=this.bs.subscribe("drillthrough:"+this.widget.name,({path:e,title:i})=>{this.doDrillthrough(e,i,i)}),this.subPivotVar=this.bs.subscribe("updatePivotVar:"+this.widget.name,e=>this.onPivotVarChanged()),this.subPivotVarAll=this.bs.subscribe("updatePivotVar:*",e=>this.onPivotVarChanged()),this.subColSpec=this.bs.subscribe("setColSpec:"+this.widget.name,e=>this.onColSpecChanged(e)),this.subColSpecAll=this.bs.subscribe("setColSpec:*",e=>this.onColSpecChanged(e)),this.subDataSourceChange=this.bs.subscribe("changeDataSource:"+this.widget.name,e=>this.changeDataSource(e)),this.subChartType=this.bs.subscribe("setWidgetType:"+this.widget.name,e=>{this.changeWidgetType(e)})}getOverride(){let e=this.baseType;return e==="lineChartMarkers"&&(e="lineChart"),e==="regular"&&(e="scoreCard"),this.widget?.overrides?.find(i=>i._type===e)}updateLocationDrillParameters(){if(!this.widget?.shared)return;let e=location.hash,i=this.getDrillsAsParameter();this.ds.router.navigate([],{relativeTo:this.route,queryParams:{drilldown:i},queryParamsHandling:"merge"});let s={type:"drill",index:this.route.snapshot.queryParamMap.get("widget"),widget:this.widget,drills:this.drills};window.parent&&window.parent.postMessage(s,"*");try{window.parent.dsw?.onDrill&&window.parent.dsw.onDrill(s)}catch(r){console.error(r)}}updateDatasourceParameterInURL(){if(!this.widget?.shared)return;this.ds.router.navigate([],{relativeTo:this.route,queryParams:{datasource:this.customDataSource},queryParamsHandling:"merge"});let e={type:"datasource",index:this.route.snapshot.queryParamMap.get("widget"),widget:this.widget,datasource:this.customDataSource};window.parent&&window.parent.postMessage(e,"*");try{window.parent.dsw?.onDataSource&&window.parent.dsw.onDataSource(e)}catch(i){console.error(i)}}navigateDashboard(e){this.ds.router.navigateByUrl(Ss+"/"+e)}initializeInputControls(){let e="setRowCount";this.widget.controls.filter(s=>e.includes(s.action)).forEach(s=>{this.widget.dsItems.push({action:s.action,label:s.label||"Row count",field:"input",type:"number",_value:s.value||void 0})})}applyRowCount(e){let i=this.widget.dsItems.find(l=>l.action==="setRowCount");if(!i||!i._value)return e;let s=/(HEAD\(.*),(.*)(\))/i;if(e.match(s))return e.replace(s,`$1,${i._value}$3`);let o=e.match(/ON 0,(.*)ON 1/)?.[1];if(!o)return e;o=o.replace("NON EMPTY","");let a=" HEAD("+o.trim()+`, ${i._value}) `;return e.replace(o,a)}extendPropsWithOverrides(){this.override&&this.override.columns?.forEach((e,i)=>{let s=this.widget.dataProperties[i];s&&(e.showAs&&(s.showAs=e.showAs),e.format&&(s.format=e.format),e.display&&(s.display=e.display),e.label&&(s.label=e.label),e.summary&&(s.summary=e.summary),e.rangeLower&&(s.rangeLower=e.rangeLower),e.rangeUpper&&(s.rangeUpper=e.rangeUpper),e.targetValue&&(s.targetValue=e.targetValue),e.thresholdLower&&(s.thresholdLower=e.thresholdLower),e.thresholdUpper&&(s.thresholdUpper=e.thresholdUpper))})}initializeDataSourceChooser(){this.widget.dsItems=[],this.widget.dsLabel="",this.widget.dsSelected="",this.widget&&this.widget.dataSource&&(this.widget.dsSelected=this.us.removeExt(this.widget.dataSource.split("/").pop()))}initializeLiveDataUpdate(){if(!(this.widget&&this.widget.controls))return;let e=this.widget.controls.filter(s=>s.action==="setColumnSpec");e.length!==0&&(this.customColSpec=e[0].targetProperty);let i=this.widget.controls.filter(s=>s.action==="refresh"&&parseInt(s.timeout,10)>0);i.length!==0&&(this.liveUpdateInterval=setInterval(()=>this.requestData(),parseInt(i[0].timeout,10)*1e3))}initializeLinkedWidgets(){if(this.isLinked())if(this.widget.shared||this.widget.inline||this.widget.edKey){let i=this.dbs.getAllWidgets().find(s=>s.name===this.widget.dataLink);i&&(this.linkedMdx=i.mdx)}else this.subLinkedMdx=this.bs.subscribe("setLinkedMDX:"+this.widget.name,e=>this.onSetLinkedMdx(e))}loadWidgetSettings(){let e=this.ss.getAppSettings(),i=e.theme||"";this.widgetsSettings=this.ss.getWidgetsSettings(this.widget.dashboard)||{},this.tc=e?.themeColors?.[i];let s=this.widgetsSettings?.[this.widget.name]?.themeColors?.[i];s&&(this.tc=s)}initializeDrills(){this.widget?.drills&&(this.drills=this.widget.drills)}initializeTile(){this.tile&&(this.widget={},this.us.mergeRecursive(this.widget,this.tile))}initializeActionAndPvItems(){this.widget.acItems=[],this.widget.pvItems=[]}initializeDrillthrough(){this.widget.controls&&this.widget.controls.length&&(this.canDoDrillthrough=!0)}initializeDependants(){this.hasDependents()&&(this.subRefreshDependants=this.bs.subscribe("widget:"+this.widget.name+":refreshDependents",e=>this.onRefreshDependents()))}initializeDataRequest(){this.widget.initialData||(this.widget?.properties?.chartToggle==="table"&&this.widget.type!=="pivot"&&!this.widget.oldType?this.requestData():this.customDataSource||this.requestData())}doKPIDrillthrough(e){if(!this._kpiData)return;let i=this._kpiData.Result.Series.find(a=>a.seriesName===e);if(!i)return;let s=this._kpiData.Result.Properties.map(a=>({name:a.name,value:i[a.name],path:""})),r=this._kpiData.Result.Properties.map(a=>({name:a.name,value:i.seriesName,path:""})),o=this._requestKPIData([...s,...r]);o&&o.then(a=>{this._kpiData&&(this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.widget.initialData=this.convertKPIToMDXData(this._kpiData,!0),this.changeWidgetType("pivot"),setTimeout(()=>{delete this.widget.initialData}))})}getFilterString(e){let i=[],s=e.value.toString().split("|"),r=e.targetProperty;if(e.isInterval){let l=e.values[e.fromIdx].path,h=e.values[e.toIdx].path;e.isDate&&(l=this.dateToHorolog(l.replace("&[","").replace("]","")),h=this.dateToHorolog(h.replace("&[","").replace("]","")),l=`&[${l}]`,h=`&[${h}]`),i.push("%OR("+r+"."+l+":"+h+")")}else for(let l=0;l<s.length;l++){let h=s[l];e.isDate&&(h=this.dateToHorolog(h.replace("&[","").replace("]","")),h=`&[${h}]`),e.isExclude?i.push(r+"."+h+".%NOT"):i.push(r+"."+h)}let o=e.isExclude?"(":"%OR({",a=e.isExclude?")":"})";return s.length>1?o+i.join(",")+a:i}applyFilters(e){let i=e.filter(o=>o.action==="applyVariable"?!1:o.value!=="");if(i.length===0)return"";if(i.length===1)return" %FILTER "+this.getFilterString(i[0]);let s=i.map(o=>this.getFilterString(o)),r=s[0];for(let o=1;o<s.length;o++)r=`NONEMPTYCROSSJOIN(${r},${s[o]})`;return" %FILTER "+r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["ng-component"]],hostVars:2,hostBindings:function(i,s){i&2&&Ze("inline",s.inline)},inputs:{model:"model",parent:"parent",widget:"widget"},standalone:!0,features:[vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var Mp=["images"];function Ep(n,t){if(n&1){let e=Ih();Dt(0,"div",2),kh("click",function(){let s=Eh(e).$implicit,r=Nt();return Ph(r.onClick(s))}),Th(),Dt(1,"svg",3,0)(3,"text"),ne(4),Dt(5,"tspan",4),ne(6),It(),Dt(7,"tspan",5),ne(8),It()()(),Ah(),Dt(9,"label"),ne(10),It()()}if(n&2){let e=t.$implicit,i=Nt();Ze("clickable",i.canDrillthrough),Lt(3),Oe("fill",e.valueColor),Lt(),ws("",e.value," "),Lt(2),Fe(e.deltaNeg),Lt(2),Fe(e.delta),Lt(2),Fe(e.label)}}var Zh=(()=>{class n extends pe{constructor(){super(...arguments),this.images=[],this.widget={},this.textData=[]}get flexDirection(){let e=this.el?.nativeElement;if(e)return e.offsetWidth>e.offsetHeight?"row":"column"}get canDrillthrough(){return this.canDoDrillthrough}ngOnInit(){this.textData=[],super.ngOnInit()}ngAfterViewInit(){}findDataPropByName(e){if(this.widget.dataProperties){for(let i=0;i<this.widget.dataProperties.length;i++)if(this.widget.dataProperties[i].dataValue===e)return this.widget.dataProperties[i]}}adjustSize(){this.images.forEach(e=>{let i=e.nativeElement,r=i.firstChild.getBBox();i.setAttribute("viewBox",[r.x,r.y,r.width,r.height].join(" "))})}retrieveData(e){if(this.textData=[],this.hideLoading(),e)for(let i=0;i<e.Cols[0].tuples.length;i++){let s=null;if(this.widget.dataProperties&&(s=this.getDataPropByDataValue(e.Cols[0].tuples[i].dimension)??null),!s)continue;let r=this.getDataValue(i,e,s),o="var(--cl-text-widget-font)";if(this.widget.tile){let h=document.querySelector("."+ue.const.fontColors[this.widget.tile.fontColor]);h&&(o=window.getComputedStyle(h).getPropertyValue("color"))}let a=e.Cols[0].tuples[i].caption,l=this.findDataPropByName(e.Cols[0].tuples[i]?.caption);if(l&&(l.label==="$auto"?a=l.dataValue||a:a=l.label||a),a.substr(0,5).toLowerCase()==="delta"){let h=parseInt(a.substring(5,a.length),10)-1;!isNaN(h)&&this.textData[h]&&r.toString()!=="0"&&(r.toString()[0]!=="-"?this.textData[h].delta="+"+r.toString():this.textData[h].deltaNeg=r.toString())}else{let h=o;if(l){let c=parseFloat(l.thresholdLower.toString()),g=parseFloat(l.thresholdUpper.toString()),d=l.override;if(d.normalStyle){let p=this.getCss(d.normalStyle);p.fill&&(h=p.fill)}if(c!==void 0&&!isNaN(c)&&this.getNumber(r)<c){let p=this.widget.properties?.lowRangeColor;d.lowStyle&&(p=this.getCss(d.lowStyle).fill),p&&(h=p)}if(g!==void 0&&!isNaN(g)&&this.getNumber(r)>g){let p=this.widget.properties?.highRangeColor;d.highStyle&&(p=this.getCss(d.highStyle).fill),p&&(h=p)}}this.textData.push({label:a,value:r,color:o,valueColor:h,dimension:e.Cols[0].tuples[i].dimension})}}this.cd.detectChanges(),setTimeout(()=>this.adjustSize())}onClick(e){this.doDrillthrough("",e.label)}getCss(e){let i={};return e.split(";").filter(s=>s).forEach(s=>{let r=s.split(":");i[r[0]]=r[1]}),i}getNumber(e){return typeof e=="string"?parseFloat(e.replace(/,/g,"").replace(/ /g,"")):e}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-wtext"]],viewQuery:function(i,s){if(i&1&&Si(Mp,5),i&2){let r;Mi(r=Ei())&&(s.images=r)}},hostVars:2,hostBindings:function(i,s){i&2&&Oe("flex-direction",s.flexDirection)},inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[["images",""],[1,"item2",3,"clickable"],[1,"item2",3,"click"],[1,"text-widget"],[2,"font-size","4px","fill","red"],[2,"font-size","4px","fill","green"]],template:function(i,s){i&1&&ce(0,Ep,11,8,"div",1,he),i&2&&de(s.textData)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-display:row;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial}.inline[_nghost-%COMP%]   label[_ngcontent-%COMP%]{background-color:transparent;background-image:none}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:0}label[_ngcontent-%COMP%]{display:block;flex-shrink:0;height:16px;background-image:linear-gradient(to bottom,#f5f5f5 0,#e8e8e8);width:100%;text-align:center;font-family:monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item2[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 100%;justify-content:center;align-items:center;margin:10px;background-color:#fafafa;padding:10px;min-height:0;min-width:0}.item2.clickable[_ngcontent-%COMP%]{cursor:pointer}.item2[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{height:auto;background:transparent;color:gray;font-size:19px}.item2[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{height:50%;width:100%;display:block}.text-widget[_ngcontent-%COMP%]{height:100%}"]})}}return n})();var wo=(()=>{class n extends pe{constructor(){super(),this.widget={},this.isSpinner=!1,this._oldMdx=""}ngAfterViewInit(){this.createPivotTable()}ngOnDestroy(){super.ngOnDestroy()}createPivotTable(){let e=this,i={initialData:this.widget.pivotData,container:this.el.nativeElement,pivotProperties:{},enableListingSelect:!1,enableSearch:!1,dataSource:{pivot:this.widget.dataSource,MDX2JSONSource:this.ds.url.substring(0,this.ds.url.length-1),basicMDX:this.widget.pivotMdx||this.getMDX(),namespace:Ss,sendCookies:!0},triggers:{drillDown:s=>this.onDrillDown(s),rowClick:(s,r,o)=>e.drillFilterWidgets?.length?(e.doDrillFilter(o.source.path,e.drills),e.parent?.header?.cd.detectChanges(),!1):!this.widget.kpitype,back:s=>this.onDrillDown(s),cellDrillThrough:(...s)=>this.onDrillThrough(...s),responseHandler:s=>{s.status!==200&&this.showError(s.xhr.responseText)}},loadingMessageHTML:'<img src="assets/img/spinner.svg">',columnResizeAnimation:!0,locale:this.i18n.current,hideButtons:!0,formatNumbers:"#,###.##",controls:this.widget.controls};if(delete this.widget.pivotMdx,this.lpt=new LightPivotTable(i),this.widget.edKey&&this.lpt?.pivotView.displayMessage(""),this.lpt&&this.widget.initialData){let s=this.widget.initialData;setTimeout(()=>{this.lpt?.dataController.setData(this.lpt.dataSource._convert(s))})}}doDrillUp(){this.widget.isDrillthrough&&this.restoreWidgetType?(this.widget.isDrillthrough=!1,this.restoreWidgetType(),this.widget.kpitype&&this.requestData()):this.lpt?.CONTROLS.back(),this.widget.backButton=this.lpt?.DRILL_LEVEL!==0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges()}onDrillThrough(...e){if(!this.canDoDrillthrough)return!1;if(this.widget.kpitype){let{cellData:i,x:s,y:r}=e[0],{info:o,dimensions:a}=e[1];if(!a[0])return;let l=a[0][s-o.leftHeaderColumnsNumber]?.dimension||"",h=a[0][0]?.dimension||"",c=a[1][r-o.topHeaderRowsNumber]?.title||"";if(!l||!h)return;let g=[{name:l,value:i.value,path:""},{name:h,value:c,path:""}];return this._requestKPIData(g)?.then(()=>{this.widget.isDrillthrough=!0,this.widget.backButton=!0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges()}),!1}return this._oldMdx=this.lpt?.getActualMDX()||"",this.widget.backButton=!0,this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges(),!0}onDrillDown(e){e.path?(this.doDrillFilter(e.path,this.drills),this.drills.push({path:e.path,name:"",category:""}),this.widget.backButton=!0):(this.drills.pop(),this.doDrillFilter(e.path,this.drills)),this.parent.cd.detectChanges(),this.parent.header?.cd.detectChanges(),this.broadcastDependents(e.mdx)}requestData(){let e=this.customDataSource||this.widget.dataSource;if(this.widget.kpitype){this._requestKPIData();return}if(this.lpt){let i=this.getMDX();if(this.lpt.isListing()&&(delete this.lpt.CONFIG.initialData,i.toLowerCase().substr(0,12)!=="drillthrough"&&(i=this.getDrillthroughMdx(i)||"")),i==="")return;this.drillFilter&&(i=i+" %FILTER "+this.drillFilter),this.broadcastDependents(),this.clearError(),this.lpt.changeBasicMDX(i)}}onResize(){this.lpt&&setTimeout(()=>this.lpt?.updateSizes(),100)}print(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-pivot"]],inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},styles:["[_nghost-%COMP%]{height:100%}"]})}}return n})();var So=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var te=So;var Ke={PROPERTYCHANGE:"propertychange"};var Mo=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},Es=Mo;function Kh(n,t,e){let i,s;e=e||qe;let r=0,o=n.length,a=!1;for(;r<o;)i=r+(o-r>>1),s=+e(n[i],t),s<0?r=i+1:(o=i,a=!s);return a?r:~r}function qe(n,t){return n>t?1:n<t?-1:0}function Ps(n,t,e){if(n[0]<=t)return 0;let i=n.length;if(t<=n[i-1])return i-1;if(typeof e=="function"){for(let s=1;s<i;++s){let r=n[s];if(r===t)return s;if(r<t)return e(t,n[s-1],r)>0?s-1:s}return i-1}if(e>0){for(let s=1;s<i;++s)if(n[s]<t)return s-1;return i-1}if(e<0){for(let s=1;s<i;++s)if(n[s]<=t)return s;return i-1}for(let s=1;s<i;++s){if(n[s]==t)return s;if(n[s]<t)return n[s-1]-t<t-n[s]?s-1:s}return i-1}function qh(n,t,e){for(;t<e;){let i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function ye(n,t){let e=Array.isArray(t)?t:[t],i=e.length;for(let s=0;s<i;s++)n[n.length]=e[s]}function fe(n,t){let e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function $h(n,t,e){let i=t||qe;return n.every(function(s,r){if(r===0)return!0;let o=i(n[r-1],s);return!(o>0||e&&o===0)})}function Pi(){return!0}function Ti(){return!1}function $e(){}function Jh(n){let t=!1,e,i,s;return function(){let r=Array.prototype.slice.call(arguments);return(!t||this!==s||!fe(r,i))&&(t=!0,s=this,i=r,e=n.apply(this,arguments)),e}}function li(n){for(let t in n)delete n[t]}function Je(n){let t;for(t in n)return!1;return!t}var Eo=class extends Es{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;let i=this.listeners_||(this.listeners_={}),s=i[t]||(i[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){let e=typeof t=="string",i=e?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;let r=e?new te(t):t;r.target||(r.target=this.eventTarget_||this);let o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let h=0,c=s.length;h<c;++h)if("handleEvent"in s[h]?l=s[h].handleEvent(r):l=s[h].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,$e);delete o[i]}return l}disposeInternal(){this.listeners_&&li(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){let i=this.listeners_&&this.listeners_[t];if(i){let s=i.indexOf(e);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[s]=$e,++this.pendingRemovals_[t]):(i.splice(s,1),i.length===0&&delete this.listeners_[t]))}}},Xi=Eo;var ut={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function wt(n,t,e,i,s){if(i&&i!==n&&(e=e.bind(i)),s){let o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}let r={target:n,type:t,listener:e};return n.addEventListener(t,e),r}function Ts(n,t,e,i){return wt(n,t,e,i,!0)}function Tt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),li(n))}var As=class extends Xi{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ut.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){let i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=wt(this,t[r],e);return s}return wt(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){let s=t.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=Ts(this,t[r],e)}else i=Ts(this,t,e);return e.ol_key=i,i}unInternal(t,e){let i=e.ol_key;if(i)Pp(i);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}};As.prototype.on;As.prototype.once;As.prototype.un;function Pp(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)Tt(n[t]);else Tt(n)}var Jr=As;function ft(){throw new Error("Unimplemented abstract method.")}var Tp=0;function Mt(n){return n.ol_uid||(n.ol_uid=String(++Tp))}var Qr=class extends te{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}},Po=class extends Jr{constructor(t){super(),this.on,this.once,this.un,Mt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Qr(i,t,e)),i=Ke.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Qr(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){let s=this.values_||(this.values_={});if(i)s[t]=e;else{let r=s[t];s[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(let i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){let i=this.values_[t];delete this.values_[t],Je(this.values_)&&(this.values_=null),e||this.notify(t,i)}}},Zt=Po;var Ap={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"},To=class extends Error{constructor(t){let e=Ap[t];super(e),this.code=t,this.name="AssertionError",this.message=e}},tn=To;var ee={ADD:"add",REMOVE:"remove"};var Qh={LENGTH:"length"},Ds=class extends te{constructor(t,e,i){super(t),this.element=e,this.index=i}},Ao=class extends Zt{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){let e=this.array_;for(let i=0,s=e.length;i<s;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Qh.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Ds(ee.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);let e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){let e=this.array_;for(let i=0,s=e.length;i<s;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;let e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ds(ee.REMOVE,e,t)),e}setAt(t,e){let i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);let s=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Ds(ee.REMOVE,s,t)),this.dispatchEvent(new Ds(ee.ADD,e,t))}updateLength_(){this.set(Qh.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==e)throw new tn(58)}},oe=Ao;var Wi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",tc=Wi.includes("firefox"),Dp=Wi.includes("safari")&&!Wi.includes("chrom"),vm=Dp&&(Wi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Wi)),ec=Wi.includes("webkit")&&!Wi.includes("edge"),Do=Wi.includes("macintosh"),en=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ls=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ic=typeof Image<"u"&&Image.prototype.decode,sn=function(){let n=!1;try{let t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n}();function gt(n,t){if(!n)throw new tn(t)}var Em=new Array(6);function ge(){return[1,0,0,1,0,0]}function Lp(n,t,e,i,s,r,o){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n[4]=r,n[5]=o,n}function rc(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function Wt(n,t){let e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function nc(n,t,e){return Lp(n,t,0,0,e,0,0)}function be(n,t,e,i,s,r,o,a){let l=Math.sin(r),h=Math.cos(r);return n[0]=i*h,n[1]=s*l,n[2]=-i*l,n[3]=s*h,n[4]=o*i*h-a*i*l+t,n[5]=o*s*l+a*s*h+e,n}function Is(n,t){let e=Ip(t);gt(e!==0,32);let i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return n[0]=o/e,n[1]=-s/e,n[2]=-r/e,n[3]=i/e,n[4]=(r*l-o*a)/e,n[5]=-(i*l-s*a)/e,n}function Ip(n){return n[0]*n[3]-n[1]*n[2]}var sc;function rn(n){let t="matrix("+n.join(", ")+")";if(Ls)return t;let e=sc||(sc=document.createElement("div"));return e.style.transform=t,e.style.transform}var Kt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Lo(n){let t=Ut();for(let e=0,i=n.length;e<i;++e)os(t,n[e]);return t}function kp(n,t,e){let i=Math.min.apply(null,n),s=Math.min.apply(null,t),r=Math.max.apply(null,n),o=Math.max.apply(null,t);return ze(i,s,r,o,e)}function ks(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function on(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function Me(n,t,e){let i,s;return t<n[0]?i=n[0]-t:n[2]<t?i=t-n[2]:i=0,e<n[1]?s=n[1]-e:n[3]<e?s=e-n[3]:s=0,i*i+s*s}function Vi(n,t){return nr(n,t[0],t[1])}function Ai(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function nr(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function nn(n,t){let e=n[0],i=n[1],s=n[2],r=n[3],o=t[0],a=t[1],l=Kt.UNKNOWN;return o<e?l=l|Kt.LEFT:o>s&&(l=l|Kt.RIGHT),a<i?l=l|Kt.BELOW:a>r&&(l=l|Kt.ABOVE),l===Kt.UNKNOWN&&(l=Kt.INTERSECTING),l}function Ut(){return[1/0,1/0,-1/0,-1/0]}function ze(n,t,e,i,s){return s?(s[0]=n,s[1]=t,s[2]=e,s[3]=i,s):[n,t,e,i]}function Di(n){return ze(1/0,1/0,-1/0,-1/0,n)}function oc(n,t){let e=n[0],i=n[1];return ze(e,i,e,i,t)}function an(n,t,e,i,s){let r=Di(s);return Io(r,n,t,e,i)}function Li(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function ln(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function os(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function Io(n,t,e,i,s){for(;e<i;e+=s)Rp(n,t[e],t[e+1]);return n}function Rp(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function hn(n,t){let e;return e=t(Rs(n)),e||(e=t(Os(n)),e)||(e=t(Fs(n)),e)||(e=t(Xe(n)),e)?e:!1}function or(n){let t=0;return Ui(n)||(t=At(n)*me(n)),t}function Rs(n){return[n[0],n[1]]}function Os(n){return[n[2],n[1]]}function Ge(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function ac(n,t){let e;return t==="bottom-left"?e=Rs(n):t==="bottom-right"?e=Os(n):t==="top-left"?e=Xe(n):t==="top-right"?e=Fs(n):gt(!1,13),e}function ar(n,t,e,i,s){let[r,o,a,l,h,c,g,d]=cn(n,t,e,i);return ze(Math.min(r,a,h,g),Math.min(o,l,c,d),Math.max(r,a,h,g),Math.max(o,l,c,d),s)}function cn(n,t,e,i){let s=t*i[0]/2,r=t*i[1]/2,o=Math.cos(e),a=Math.sin(e),l=s*o,h=s*a,c=r*o,g=r*a,d=n[0],p=n[1];return[d-l+g,p-h-c,d-l-g,p-h+c,d+l-g,p+h+c,d+l+g,p+h-c,d-l+g,p-h-c]}function me(n){return n[3]-n[1]}function Yi(n,t,e){let i=e||Ut();return Vt(n,t)?(n[0]>t[0]?i[0]=n[0]:i[0]=t[0],n[1]>t[1]?i[1]=n[1]:i[1]=t[1],n[2]<t[2]?i[2]=n[2]:i[2]=t[2],n[3]<t[3]?i[3]=n[3]:i[3]=t[3]):Di(i),i}function Xe(n){return[n[0],n[3]]}function Fs(n){return[n[2],n[3]]}function At(n){return n[2]-n[0]}function Vt(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function Ui(n){return n[2]<n[0]||n[3]<n[1]}function lc(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function hc(n,t,e){let i=!1,s=nn(n,t),r=nn(n,e);if(s===Kt.INTERSECTING||r===Kt.INTERSECTING)i=!0;else{let o=n[0],a=n[1],l=n[2],h=n[3],c=t[0],g=t[1],d=e[0],p=e[1],y=(p-g)/(d-c),b,x;r&Kt.ABOVE&&!(s&Kt.ABOVE)&&(b=d-(p-h)/y,i=b>=o&&b<=l),!i&&r&Kt.RIGHT&&!(s&Kt.RIGHT)&&(x=p-(d-l)*y,i=x>=a&&x<=h),!i&&r&Kt.BELOW&&!(s&Kt.BELOW)&&(b=d-(p-a)/y,i=b>=o&&b<=l),!i&&r&Kt.LEFT&&!(s&Kt.LEFT)&&(x=p-(d-o)*y,i=x>=a&&x<=h)}return i}function cc(n,t,e,i){if(Ui(n))return Di(e);let s=[];if(i>1){let a=n[2]-n[0],l=n[3]-n[1];for(let h=0;h<i;++h)s.push(n[0]+a*h/i,n[1],n[2],n[1]+l*h/i,n[2]-a*h/i,n[3],n[0],n[3]-l*h/i)}else s=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];t(s,s,2);let r=[],o=[];for(let a=0,l=s.length;a<l;a+=2)r.push(s[a]),o.push(s[a+1]);return kp(r,o,e)}function ko(n,t){let e=t.getExtent(),i=Ge(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){let s=At(e),o=Math.floor((i[0]-e[0])/s)*s;n[0]-=o,n[2]-=o}return n}function dc(n,t){if(t.canWrapX()){let e=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[e[0],n[1],e[2],n[3]]];ko(n,t);let i=At(e);if(At(n)>i)return[[e[0],n[1],e[2],n[3]]];if(n[0]<e[0])return[[n[0]+i,n[1],e[2],n[3]],[e[0],n[1],n[2],n[3]]];if(n[2]>e[2])return[[n[0],n[1],e[2],n[3]],[e[0],n[1],n[2]-i,n[3]]]}return[n]}function Rt(n,t,e){return Math.min(Math.max(n,t),e)}function uc(n,t,e,i,s,r){let o=s-e,a=r-i;if(o!==0||a!==0){let l=((n-e)*o+(t-i)*a)/(o*o+a*a);l>1?(e=s,i=r):l>0&&(e+=o*l,i+=a*l)}return Qe(n,t,e,i)}function Qe(n,t,e,i){let s=e-n,r=i-t;return s*s+r*r}function pc(n){let t=n.length;for(let i=0;i<t;i++){let s=i,r=Math.abs(n[i][i]);for(let a=i+1;a<t;a++){let l=Math.abs(n[a][i]);l>r&&(r=l,s=a)}if(r===0)return null;let o=n[s];n[s]=n[i],n[i]=o;for(let a=i+1;a<t;a++){let l=-n[a][i]/n[i][i];for(let h=i;h<t+1;h++)i==h?n[a][h]=0:n[a][h]+=l*n[i][h]}}let e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=n[i][t]/n[i][i];for(let s=i-1;s>=0;s--)n[s][t]-=n[s][i]*e[i]}return e}function zs(n){return n*Math.PI/180}function Ii(n,t){let e=n%t;return e*t<0?e+t:e}function ae(n,t,e){return n+e*(t-n)}function dn(n,t){let e=Math.pow(10,t);return Math.round(n*e)/e}function lr(n,t){return Math.floor(dn(n,t))}function hr(n,t){return Math.ceil(dn(n,t))}var Op=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Fp=/^([a-z]*)$|^hsla?\(.*\)$/i;function un(n){return typeof n=="string"?n:Ro(n)}function zp(n){let t=document.createElement("div");if(t.style.color=n,t.style.color!==""){document.body.appendChild(t);let e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}var jp=function(){let t={},e=0;return function(i){let s;if(t.hasOwnProperty(i))s=t[i];else{if(e>=1024){let r=0;for(let o in t)r++&3||(delete t[o],--e)}s=Np(i),t[i]=s,++e}return s}}();function as(n){return Array.isArray(n)?n:jp(n)}function Np(n){let t,e,i,s,r;if(Fp.exec(n)&&(n=zp(n)),Op.exec(n)){let o=n.length-1,a;o<=4?a=1:a=2;let l=o===4||o===8;t=parseInt(n.substr(1+0*a,a),16),e=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),l?s=parseInt(n.substr(1+3*a,a),16):s=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,l&&(s=(s<<4)+s)),r=[t,e,i,s/255]}else n.startsWith("rgba(")?(r=n.slice(5,-1).split(",").map(Number),fc(r)):n.startsWith("rgb(")?(r=n.slice(4,-1).split(",").map(Number),r.push(1),fc(r)):gt(!1,14);return r}function fc(n){return n[0]=Rt(n[0]+.5|0,0,255),n[1]=Rt(n[1]+.5|0,0,255),n[2]=Rt(n[2]+.5|0,0,255),n[3]=Rt(n[3],0,1),n}function Ro(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);let s=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+t+","+e+","+i+","+s+")"}var Oo=class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(let e in this.cache_){let i=this.cache_[e];!(t++&3)&&!i.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){let s=gc(t,e,i);return s in this.cache_?this.cache_[s]:null}set(t,e,i,s){let r=gc(t,e,i);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};function gc(n,t,e){let i=e?un(e):"null";return t+":"+n+":"+i}var js=new Oo;var kt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var Fo=class extends Zt{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;let e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[kt.OPACITY]=t.opacity!==void 0?t.opacity:1,gt(typeof e[kt.OPACITY]=="number",64),e[kt.VISIBLE]=t.visible!==void 0?t.visible:!0,e[kt.Z_INDEX]=t.zIndex,e[kt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[kt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[kt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[kt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){let e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=Rt(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return ft()}getLayerStatesArray(t){return ft()}getExtent(){return this.get(kt.EXTENT)}getMaxResolution(){return this.get(kt.MAX_RESOLUTION)}getMinResolution(){return this.get(kt.MIN_RESOLUTION)}getMinZoom(){return this.get(kt.MIN_ZOOM)}getMaxZoom(){return this.get(kt.MAX_ZOOM)}getOpacity(){return this.get(kt.OPACITY)}getSourceState(){return ft()}getVisible(){return this.get(kt.VISIBLE)}getZIndex(){return this.get(kt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(kt.EXTENT,t)}setMaxResolution(t){this.set(kt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(kt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(kt.MAX_ZOOM,t)}setMinZoom(t){this.set(kt.MIN_ZOOM,t)}setOpacity(t){gt(typeof t=="number",64),this.set(kt.OPACITY,t)}setVisible(t){this.set(kt.VISIBLE,t)}setZIndex(t){this.set(kt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},pn=Fo;var ve={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var qt={ANIMATING:0,INTERACTING:1};var We={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var ti={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var zo=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ti[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},fn=zo;var cr=6378137,Ns=Math.PI*cr,Bp=[-Ns,-Ns,Ns,Ns],Gp=[-180,-85,180,85],gn=cr*Math.log(Math.tan(Math.PI/2)),Hi=class extends fn{constructor(t){super({code:t,units:"m",extent:Bp,global:!0,worldExtent:Gp,getPointResolution:function(e,i){return e/Math.cosh(i[1]/cr)}})}},jo=[new Hi("EPSG:3857"),new Hi("EPSG:102100"),new Hi("EPSG:102113"),new Hi("EPSG:900913"),new Hi("http://www.opengis.net/def/crs/EPSG/0/3857"),new Hi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function mc(n,t,e){let i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let s=0;s<i;s+=e){t[s]=Ns*n[s]/180;let r=cr*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));r>gn?r=gn:r<-gn&&(r=-gn),t[s+1]=r}return t}function xc(n,t,e){let i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let s=0;s<i;s+=e)t[s]=180*n[s]/Ns,t[s+1]=360*Math.atan(Math.exp(n[s+1]/cr))/Math.PI-90;return t}var Xp=6378137,yc=[-180,-90,180,90],Wp=Math.PI*Xp/180,ki=class extends fn{constructor(t,e){super({code:t,units:"degrees",extent:yc,axisOrientation:e,global:!0,metersPerUnit:Wp,worldExtent:yc})}},No=[new ki("CRS:84"),new ki("EPSG:4326","neu"),new ki("urn:ogc:def:crs:OGC:1.3:CRS84"),new ki("urn:ogc:def:crs:OGC:2:84"),new ki("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ki("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ki("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var Bo={};function bc(n){return Bo[n]||Bo[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function vc(n,t){Bo[n]=t}var Bs={};function dr(n,t,e){let i=n.getCode(),s=t.getCode();i in Bs||(Bs[i]={}),Bs[i][s]=e}function Cc(n,t){let e;return n in Bs&&t in Bs[n]&&(e=Bs[n][t]),e}function _c(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function ls(n,t){let e=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function Gs(n,t){let e=Math.cos(t),i=Math.sin(t),s=n[0]*e-n[1]*i,r=n[1]*e+n[0]*i;return n[0]=s,n[1]=r,n}function wc(n,t){return n[0]*=t,n[1]*=t,n}function mn(n,t){if(t.canWrapX()){let e=At(t.getExtent()),i=Sc(n,t,e);i&&(n[0]-=i*e)}return n}function Sc(n,t,e){let i=t.getExtent(),s=0;return t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(e=e||At(i),s=Math.floor((n[0]-i[0])/e)),s}var Vp=63710088e-1;function Go(n,t,e){e=e||Vp;let i=zs(n[1]),s=zs(t[1]),r=(s-i)/2,o=zs(t[0]-n[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var Mc={info:1,warn:2,error:3,none:4},Yp=Mc.info;function xn(...n){Yp>Mc.warn||console.warn(...n)}var Xo=!0;function Pc(n){Xo=!(n===void 0?!0:n)}function Wo(n,t){if(t!==void 0){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];t=t}else t=n.slice();return t}function Tc(n,t){if(t!==void 0&&n!==t){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];n=t}return n}function Up(n){vc(n.getCode(),n),dr(n,n,Wo)}function Hp(n){n.forEach(Up)}function zt(n){return typeof n=="string"?bc(n):n||null}function Vo(n,t,e,i){n=zt(n);let s,r=n.getPointResolutionFunc();if(r){if(s=r(t,e),i&&i!==n.getUnits()){let o=n.getMetersPerUnit();o&&(s=s*o/ti[i])}}else{let o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")s=t;else{let a=ur(n,zt("EPSG:4326"));if(a===Tc&&o!=="degrees")s=t*n.getMetersPerUnit();else{let h=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];h=a(h,h,2);let c=Go(h.slice(0,2),h.slice(2,4)),g=Go(h.slice(4,6),h.slice(6,8));s=(c+g)/2}let l=i?ti[i]:n.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Ec(n){Hp(n),n.forEach(function(t){n.forEach(function(e){t!==e&&dr(t,e,Wo)})})}function Zp(n,t,e,i){n.forEach(function(s){t.forEach(function(r){dr(s,r,e),dr(r,s,i)})})}function yn(n,t){return n?typeof n=="string"?zt(n):n:zt(t)}function hi(n,t){if(n===t)return!0;let e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||ur(n,t)===Wo)&&e}function ur(n,t){let e=n.getCode(),i=t.getCode(),s=Cc(e,i);return s||(s=Tc),s}function hs(n,t){let e=zt(n),i=zt(t);return ur(e,i)}function Zi(n,t,e){return hs(t,e)(n,void 0,n.length)}function Yo(n,t,e,i){let s=hs(t,e);return cc(n,s,void 0,i)}var ei=null;function bn(){return ei}function pr(n,t){return ei?Zi(n,t,ei):n}function ii(n,t){return ei?Zi(n,ei,t):(Xo&&!ls(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Xo=!1,xn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n)}function Xs(n,t){return ei?Yo(n,t,ei):n}function si(n,t){return ei?Yo(n,ei,t):n}function Ac(n,t){if(!ei)return n;let e=zt(t).getUnits(),i=ei.getUnits();return e&&i?n*ti[e]/ti[i]:n}function Kp(){Ec(jo),Ec(No),Zp(No,jo,mc,xc)}Kp();function Uo(n,t,e){return function(i,s,r,o,a){if(!i)return;if(!s&&!t)return i;let l=t?0:r[0]*s,h=t?0:r[1]*s,c=a?a[0]:0,g=a?a[1]:0,d=n[0]+l/2+c,p=n[2]-l/2+c,y=n[1]+h/2+g,b=n[3]-h/2+g;d>p&&(d=(p+d)/2,p=d),y>b&&(y=(b+y)/2,b=y);let x=Rt(i[0],d,p),f=Rt(i[1],y,b);if(o&&e&&s){let M=30*s;x+=-M*Math.log(1+Math.max(0,d-i[0])/M)+M*Math.log(1+Math.max(0,i[0]-p)/M),f+=-M*Math.log(1+Math.max(0,y-i[1])/M)+M*Math.log(1+Math.max(0,i[1]-b)/M)}return[x,f]}}function Dc(n){return n}function Ho(n,t,e,i){let s=At(t)/e[0],r=me(t)/e[1];return i?Math.min(n,Math.max(s,r)):Math.min(n,Math.min(s,r))}function Zo(n,t,e){let i=Math.min(n,t),s=50;return i*=Math.log(1+s*Math.max(0,n/t-1))/s+1,e&&(i=Math.max(i,e),i/=Math.log(1+s*Math.max(0,e/n-1))/s+1),Rt(i,e/2,t*2)}function Lc(n,t,e,i){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){let l=n[0],h=n[n.length-1],c=e?Ho(l,e,o,i):l;if(a)return t?Zo(s,c,h):Rt(s,h,c);let g=Math.min(c,s),d=Math.floor(Ps(n,g,r));return n[d]>c&&d<n.length-1?n[d+1]:n[d]}}}function Ic(n,t,e,i,s,r){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(o,a,l,h){if(o!==void 0){let c=s?Ho(t,s,l,r):t;if(h)return i?Zo(o,c,e):Rt(o,e,c);let g=1e-9,d=Math.ceil(Math.log(t/c)/Math.log(n)-g),p=-a*(.5-g)+.5,y=Math.min(c,o),b=Math.floor(Math.log(t/y)/Math.log(n)+p),x=Math.max(d,b),f=t/Math.pow(n,x);return Rt(f,e,c)}}}function Ko(n,t,e,i,s){return e=e!==void 0?e:!0,function(r,o,a,l){if(r!==void 0){let h=i?Ho(n,i,a,s):n;return!e||!l?Rt(r,t,h):Zo(r,h,t)}}}function Ws(n){if(n!==void 0)return 0}function qo(n){if(n!==void 0)return n}function kc(n){let t=2*Math.PI/n;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function Rc(n){return n=n||zs(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=n?0:t}}function $o(n){return Math.pow(n,3)}function Ve(n){return 1-$o(1-n)}function Oc(n){return 3*n*n-2*n*n*n}function Fc(n){return n}function Ye(n,t,e,i,s,r){r=r||[];let o=0;for(let a=t;a<e;a+=i){let l=n[a],h=n[a+1];r[o++]=s[0]*l+s[2]*h+s[4],r[o++]=s[1]*l+s[3]*h+s[5]}return r&&r.length!=o&&(r.length=o),r}function vn(n,t,e,i,s,r,o){o=o||[];let a=Math.cos(s),l=Math.sin(s),h=r[0],c=r[1],g=0;for(let d=t;d<e;d+=i){let p=n[d]-h,y=n[d+1]-c;o[g++]=h+p*a-y*l,o[g++]=c+p*l+y*a;for(let b=d+2;b<d+i;++b)o[g++]=n[b]}return o&&o.length!=g&&(o.length=g),o}function zc(n,t,e,i,s,r,o,a){a=a||[];let l=o[0],h=o[1],c=0;for(let g=t;g<e;g+=i){let d=n[g]-l,p=n[g+1]-h;a[c++]=l+s*d,a[c++]=h+r*p;for(let y=g+2;y<g+i;++y)a[c++]=n[y]}return a&&a.length!=c&&(a.length=c),a}function jc(n,t,e,i,s,r,o){o=o||[];let a=0;for(let l=t;l<e;l+=i){o[a++]=n[l]+s,o[a++]=n[l+1]+r;for(let h=l+2;h<l+i;++h)o[a++]=n[h]}return o&&o.length!=a&&(o.length=a),o}var Nc=ge(),Jo=class extends Zt{constructor(){super(),this.extent_=Ut(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Jh(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);let s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return ft()}closestPointXY(t,e,i,s){return ft()}containsXY(t,e){let i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return ft()}getExtent(t){if(this.extentRevision_!=this.getRevision()){let e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Di(e),this.extentRevision_=this.getRevision()}return lc(this.extent_,t)}rotate(t,e){ft()}scale(t,e,i){ft()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return ft()}getType(){return ft()}applyTransform(t){ft()}intersectsExtent(t){return ft()}translate(t,e){ft()}transform(t,e){let i=zt(t),s=i.getUnits()=="tile-pixels"?function(r,o,a){let l=i.getExtent(),h=i.getWorldExtent(),c=me(h)/me(l);return be(Nc,h[0],h[3],c,-c,0,0,0),Ye(r,0,r.length,a,Nc,o),hs(i,e)(r,o,a)}:hs(i,e);return this.applyTransform(s),this}},Cn=Jo;var Qo=class extends Cn{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return an(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return ft()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Bc(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){ft()}setLayout(t,e,i){let s;if(t)s=Bc(t);else{for(let r=0;r<i;++r){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}s=e.length,t=qp(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){let i=this.getFlatCoordinates();if(i){let s=this.getStride();vn(i,0,i.length,s,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=Ge(this.getExtent()));let s=this.getFlatCoordinates();if(s){let r=this.getStride();zc(s,0,s.length,r,t,e,i,s),this.changed()}}translate(t,e){let i=this.getFlatCoordinates();if(i){let s=this.getStride();jc(i,0,i.length,s,t,e,i),this.changed()}}};function qp(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function Bc(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}function Gc(n,t,e){let i=n.getFlatCoordinates();if(!i)return null;let s=n.getStride();return Ye(i,0,i.length,s,t,e)}var Ee=Qo;function Xc(n,t,e,i,s,r,o){let a=n[t],l=n[t+1],h=n[e]-a,c=n[e+1]-l,g;if(h===0&&c===0)g=t;else{let d=((s-a)*h+(r-l)*c)/(h*h+c*c);if(d>1)g=e;else if(d>0){for(let p=0;p<i;++p)o[p]=ae(n[t+p],n[e+p],d);o.length=i;return}else g=t}for(let d=0;d<i;++d)o[d]=n[g+d];o.length=i}function fr(n,t,e,i,s){let r=n[t],o=n[t+1];for(t+=i;t<e;t+=i){let a=n[t],l=n[t+1],h=Qe(r,o,a,l);h>s&&(s=h),r=a,o=l}return s}function gr(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){let a=e[r];s=fr(n,t,a,i,s),t=a}return s}function Wc(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){let a=e[r];s=gr(n,t,a,i,s),t=a[a.length-1]}return s}function mr(n,t,e,i,s,r,o,a,l,h,c){if(t==e)return h;let g,d;if(s===0){if(d=Qe(o,a,n[t],n[t+1]),d<h){for(g=0;g<i;++g)l[g]=n[t+g];return l.length=i,d}return h}c=c||[NaN,NaN];let p=t+i;for(;p<e;)if(Xc(n,p-i,p,i,o,a,c),d=Qe(o,a,c[0],c[1]),d<h){for(h=d,g=0;g<i;++g)l[g]=c[g];l.length=i,p+=i}else p+=i*Math.max((Math.sqrt(d)-Math.sqrt(h))/s|0,1);if(r&&(Xc(n,e-i,t,i,o,a,c),d=Qe(o,a,c[0],c[1]),d<h)){for(h=d,g=0;g<i;++g)l[g]=c[g];l.length=i}return h}function xr(n,t,e,i,s,r,o,a,l,h,c){c=c||[NaN,NaN];for(let g=0,d=e.length;g<d;++g){let p=e[g];h=mr(n,t,p,i,s,r,o,a,l,h,c),t=p}return h}function Vc(n,t,e,i,s,r,o,a,l,h,c){c=c||[NaN,NaN];for(let g=0,d=e.length;g<d;++g){let p=e[g];h=xr(n,t,p,i,s,r,o,a,l,h,c),t=p[p.length-1]}return h}function Yc(n,t,e,i){for(let s=0,r=e.length;s<r;++s)n[t++]=e[s];return t}function cs(n,t,e,i){for(let s=0,r=e.length;s<r;++s){let o=e[s];for(let a=0;a<i;++a)n[t++]=o[a]}return t}function yr(n,t,e,i,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){let l=cs(n,t,e[o],i);s[r++]=l,t=l}return s.length=r,s}function Uc(n,t,e,i,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){let l=yr(n,t,e[o],i,s[r]);l.length===0&&(l[0]=t),s[r++]=l,t=l[l.length-1]}return s.length=r,s}function br(n,t,e,i,s,r,o){let a=(e-t)/i;if(a<3){for(;t<e;t+=i)r[o++]=n[t],r[o++]=n[t+1];return o}let l=new Array(a);l[0]=1,l[a-1]=1;let h=[t,e-i],c=0;for(;h.length>0;){let g=h.pop(),d=h.pop(),p=0,y=n[d],b=n[d+1],x=n[g],f=n[g+1];for(let M=d+i;M<g;M+=i){let L=n[M],_=n[M+1],w=uc(L,_,y,b,x,f);w>p&&(c=M,p=w)}p>s&&(l[(c-t)/i]=1,d+i<c&&h.push(d,c),c+i<g&&h.push(c,g))}for(let g=0;g<a;++g)l[g]&&(r[o++]=n[t+g*i],r[o++]=n[t+g*i+1]);return o}function Hc(n,t,e,i,s,r,o,a){for(let l=0,h=e.length;l<h;++l){let c=e[l];o=br(n,t,c,i,s,r,o),a.push(o),t=c}return o}function Ki(n,t){return t*Math.round(n/t)}function $p(n,t,e,i,s,r,o){if(t==e)return o;let a=Ki(n[t],s),l=Ki(n[t+1],s);t+=i,r[o++]=a,r[o++]=l;let h,c;do if(h=Ki(n[t],s),c=Ki(n[t+1],s),t+=i,t==e)return r[o++]=h,r[o++]=c,o;while(h==a&&c==l);for(;t<e;){let g=Ki(n[t],s),d=Ki(n[t+1],s);if(t+=i,g==h&&d==c)continue;let p=h-a,y=c-l,b=g-a,x=d-l;if(p*x==y*b&&(p<0&&b<p||p==b||p>0&&b>p)&&(y<0&&x<y||y==x||y>0&&x>y)){h=g,c=d;continue}r[o++]=h,r[o++]=c,a=h,l=c,h=g,c=d}return r[o++]=h,r[o++]=c,o}function ta(n,t,e,i,s,r,o,a){for(let l=0,h=e.length;l<h;++l){let c=e[l];o=$p(n,t,c,i,s,r,o),a.push(o),t=c}return o}function Zc(n,t,e,i,s,r,o,a){for(let l=0,h=e.length;l<h;++l){let c=e[l],g=[];o=ta(n,t,c,i,s,r,o,g),a.push(g),t=c[c.length-1]}return o}function Ue(n,t,e,i,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<e;o+=i)s[r++]=n.slice(o,o+i);return s.length=r,s}function qi(n,t,e,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){let l=e[o];s[r++]=Ue(n,t,l,i,s[r]),t=l}return s.length=r,s}function vr(n,t,e,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){let l=e[o];s[r++]=l.length===1&&l[0]===t?[]:qi(n,t,l,i,s[r]),t=l[l.length-1]}return s.length=r,s}function ea(n,t,e,i){let s=0,r=n[e-i],o=n[e-i+1];for(;t<e;t+=i){let a=n[t],l=n[t+1];s+=o*a-r*l,r=a,o=l}return s/2}function ia(n,t,e,i){let s=0;for(let r=0,o=e.length;r<o;++r){let a=e[r];s+=ea(n,t,a,i),t=a}return s}function Kc(n,t,e,i){let s=0;for(let r=0,o=e.length;r<o;++r){let a=e[r];s+=ia(n,t,a,i),t=a[a.length-1]}return s}var sa=class n extends Ee{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new n(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,s){return s<Me(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,s))}getArea(){return ea(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let e=[];return e.length=br(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new n(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cs(this.flatCoordinates,0,t,this.stride),this.changed()}},ra=sa;var na=class n extends Ee{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){let t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){let r=this.flatCoordinates,o=Qe(t,e,r[0],r[1]);if(o<s){let a=this.stride;for(let l=0;l<a;++l)i[l]=r[l];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return oc(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return nr(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yc(this.flatCoordinates,0,t,this.stride),this.changed()}},Pe=na;function qc(n,t,e,i,s){return!hn(s,function(o){return!$i(n,t,e,i,o[0],o[1])})}function $i(n,t,e,i,s,r){let o=0,a=n[e-i],l=n[e-i+1];for(;t<e;t+=i){let h=n[t],c=n[t+1];l<=r?c>r&&(h-a)*(r-l)-(s-a)*(c-l)>0&&o++:c<=r&&(h-a)*(r-l)-(s-a)*(c-l)<0&&o--,a=h,l=c}return o!==0}function Cr(n,t,e,i,s,r){if(e.length===0||!$i(n,t,e[0],i,s,r))return!1;for(let o=1,a=e.length;o<a;++o)if($i(n,e[o-1],e[o],i,s,r))return!1;return!0}function $c(n,t,e,i,s,r){if(e.length===0)return!1;for(let o=0,a=e.length;o<a;++o){let l=e[o];if(Cr(n,t,l,i,s,r))return!0;t=l[l.length-1]}return!1}function oa(n,t,e,i,s,r,o){let a,l,h,c,g,d,p,y=s[r+1],b=[];for(let M=0,L=e.length;M<L;++M){let _=e[M];for(c=n[_-i],d=n[_-i+1],a=t;a<_;a+=i)g=n[a],p=n[a+1],(y<=d&&p<=y||d<=y&&y<=p)&&(h=(y-d)/(p-d)*(g-c)+c,b.push(h)),c=g,d=p}let x=NaN,f=-1/0;for(b.sort(qe),c=b[0],a=1,l=b.length;a<l;++a){g=b[a];let M=Math.abs(g-c);M>f&&(h=(c+g)/2,Cr(n,t,e,i,h,y)&&(x=h,f=M)),c=g}return isNaN(x)&&(x=s[r]),o?(o.push(x,y,f),o):[x,y,f]}function Jc(n,t,e,i,s){let r=[];for(let o=0,a=e.length;o<a;++o){let l=e[o];r=oa(n,t,l,i,s,2*o,r),t=l[l.length-1]}return r}function _n(n,t,e,i,s){let r;for(t+=i;t<e;t+=i)if(r=s(n.slice(t-i,t),n.slice(t,t+i)),r)return r;return!1}function _r(n,t,e,i,s){let r=Io(Ut(),n,t,e,i);return Vt(s,r)?Ai(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:_n(n,t,e,i,function(o,a){return hc(s,o,a)}):!1}function Qc(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){if(_r(n,t,e[r],i,s))return!0;t=e[r]}return!1}function aa(n,t,e,i,s){return!!(_r(n,t,e,i,s)||$i(n,t,e,i,s[0],s[1])||$i(n,t,e,i,s[0],s[3])||$i(n,t,e,i,s[2],s[1])||$i(n,t,e,i,s[2],s[3]))}function la(n,t,e,i,s){if(!aa(n,t,e[0],i,s))return!1;if(e.length===1)return!0;for(let r=1,o=e.length;r<o;++r)if(qc(n,e[r-1],e[r],i,s)&&!_r(n,e[r-1],e[r],i,s))return!1;return!0}function td(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){let a=e[r];if(la(n,t,a,i,s))return!0;t=a[a.length-1]}return!1}function ed(n,t,e,i){for(;t<e-i;){for(let s=0;s<i;++s){let r=n[t+s];n[t+s]=n[e-i+s],n[e-i+s]=r}t+=i,e-=i}}function id(n,t,e,i){let s=0,r=n[e-i],o=n[e-i+1];for(;t<e;t+=i){let a=n[t],l=n[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function ha(n,t,e,i,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){let a=e[r],l=id(n,t,a,i);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function sd(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r){let a=e[r];if(!ha(n,t,a,i,s))return!1;a.length&&(t=a[a.length-1])}return!0}function wn(n,t,e,i,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){let a=e[r],l=id(n,t,a,i);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&ed(n,t,a,i),t=a}return t}function ca(n,t,e,i,s){for(let r=0,o=e.length;r<o;++r)t=wn(n,t,e[r],i,s);return t}var Sn=class n extends Ee{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ye(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Me(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gr(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xr(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return Cr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return ia(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),wn(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,qi(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let t=Ge(this.getExtent());this.flatInteriorPoint_=oa(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Pe(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new ra(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){let t=this.layout,e=this.flatCoordinates,i=this.ends_,s=[],r=0;for(let o=0,a=i.length;o<a;++o){let l=i[o],h=new ra(e.slice(r,l),t);s.push(h),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;ha(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=wn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let e=[],i=[];return e.length=ta(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new n(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return la(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let i=yr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}},ci=Sn;function da(n){if(Ui(n))throw new Error("Cannot create polygon from empty extent");let t=n[0],e=n[1],i=n[2],s=n[3],r=[t,e,t,s,i,s,i,e,t,e];return new Sn(r,"XY",[r.length])}var ua=0,fa=class extends Zt{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=yn(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Pc(),t.center&&(t.center=ii(t.center,this.projection_)),t.extent&&(t.extent=si(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){let e=Object.assign({},t);for(let a in We)delete e[a];this.setProperties(e,!0);let i=Qp(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;let s=Jp(t),r=i.constraint,o=tf(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;let i=this.getCenterInternal();if(i){let s=t||[0,0,0,0];e=e||[0,0,0,0];let r=this.getResolution(),o=r/2*(s[3]-e[3]+e[1]-s[1]),a=r/2*(s[0]-e[0]+e[2]-s[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){let e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let e=new Array(arguments.length);for(let i=0;i<e.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=ii(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=ii(s.anchor,this.getProjection())),e[i]=s}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let s=0;for(;s<e&&!this.isDef();++s){let c=arguments[s];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(s===e){i&&Mn(i,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,h=[];for(;s<e;++s){let c=arguments[s],g={start:r,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||Oc,callback:i};if(c.center&&(g.sourceCenter=o,g.targetCenter=c.center.slice(),o=g.targetCenter),c.zoom!==void 0?(g.sourceResolution=a,g.targetResolution=this.getResolutionForZoom(c.zoom),a=g.targetResolution):c.resolution&&(g.sourceResolution=a,g.targetResolution=c.resolution,a=g.targetResolution),c.rotation!==void 0){g.sourceRotation=l;let d=Ii(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=l+d,l=g.targetRotation}ef(g)?g.complete=!0:r+=g.duration,h.push(g)}this.animations_.push(h),this.setHint(qt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[qt.ANIMATING]>0}getInteracting(){return this.hints_[qt.INTERACTING]>0}cancelAnimations(){this.setHint(qt.ANIMATING,-this.hints_[qt.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){let s=this.animations_[e];if(s[0].callback&&Mn(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){let a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let t=Date.now(),e=!1;for(let i=this.animations_.length-1;i>=0;--i){let s=this.animations_[i],r=!0;for(let o=0,a=s.length;o<a;++o){let l=s[o];if(l.complete)continue;let h=t-l.start,c=l.duration>0?h/l.duration:1;c>=1?(l.complete=!0,c=1):r=!1;let g=l.easing(c);if(l.sourceCenter){let d=l.sourceCenter[0],p=l.sourceCenter[1],y=l.targetCenter[0],b=l.targetCenter[1];this.nextCenter_=l.targetCenter;let x=d+g*(y-d),f=p+g*(b-p);this.targetCenter_=[x,f]}if(l.sourceResolution&&l.targetResolution){let d=g===1?l.targetResolution:l.sourceResolution+g*(l.targetResolution-l.sourceResolution);if(l.anchor){let p=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(d,0,p,!0);this.targetCenter_=this.calculateCenterZoom(y,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){let d=g===1?Ii(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+g*(l.targetRotation-l.sourceRotation);if(l.anchor){let p=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(qt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let o=s[0].callback;o&&Mn(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i,s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-e[0],s[1]-e[1]],Gs(i,t-this.getRotation()),_c(i,e)),i}calculateCenterZoom(t,e){let i,s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){let o=e[0]-t*(e[0]-s[0])/r,a=e[1]-t*(e[1]-s[1])/r;i=[o,a]}return i}getViewportSize_(t){let e=this.viewportSize_;if(t){let i=e[0],s=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let t=this.getCenterInternal();return t&&pr(t,this.getProjection())}getCenterInternal(){return this.get(We.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){let e=this.calculateExtentInternal(t);return Xs(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();let e=this.getCenterInternal();gt(e,1);let i=this.getResolution();gt(i!==void 0,2);let s=this.getRotation();return gt(s!==void 0,3),ar(e,i,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(We.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(si(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();let i=At(t)/e[0],s=me(t)/e[1];return Math.max(i,s)}getResolutionForValueFunction(t){t=t||2;let e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(e/i)/Math.log(t);return function(r){return e/Math.pow(t,r*s)}}getRotation(){return this.get(We.ROTATION)}getValueForResolutionFunction(t){let e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/e;return function(o){return Math.log(i/o)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t),i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){let t=this.getProjection(),e=this.getResolution(),i=this.getRotation(),s=this.getCenterInternal(),r=this.padding_;if(r){let o=this.getViewportSizeMinusPadding_();s=pa(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,i)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t,e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,s;if(this.resolutions_){let r=Ps(this.resolutions_,t,1);e=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return e+Math.log(i/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let e=Rt(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Rt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(gt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){gt(!Ui(t),25);let s=si(t,this.getProjection());i=da(s)}else if(t.getType()==="Circle"){let s=si(t.getExtent(),this.getProjection());i=da(s),i.rotate(this.getRotation(),Ge(s))}else{let s=bn();s?i=t.clone().transform(s,this.getProjection()):i=t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){let e=this.getRotation(),i=Math.cos(e),s=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride(),a=1/0,l=1/0,h=-1/0,c=-1/0;for(let g=0,d=r.length;g<d;g+=o){let p=r[g]*i-r[g+1]*s,y=r[g]*s+r[g+1]*i;a=Math.min(a,p),l=Math.min(l,y),h=Math.max(h,p),c=Math.max(c,y)}return[a,l,h,c]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());let s=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0?e.nearest:!1,o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;let a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);let h=this.getRotation(),c=Math.sin(h),g=Math.cos(h),d=Ge(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;let p=d[0]*g-d[1]*c,y=d[1]*g+d[0]*c,b=this.getConstrainedCenter([p,y],l),x=e.callback?e.callback:$e;e.duration!==void 0?this.animateInternal({resolution:l,center:b,duration:e.duration,easing:e.easing},x):(this.targetResolution_=l,this.targetCenter_=b,this.applyTargetState_(!1,!0),Mn(x,!0))}centerOn(t,e,i){this.centerOnInternal(ii(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(pa(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,s){let r,o=this.padding_;if(o&&t){let a=this.getViewportSizeMinusPadding_(-i),l=pa(t,s,[a[0]/2+o[3],a[1]/2+o[0]],e,i);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){let e=pr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){let e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&ii(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){let i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=ii(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){let i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&ii(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){let i=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(We.ROTATION)!==s&&this.set(We.ROTATION,s),this.get(We.RESOLUTION)!==o&&(this.set(We.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(We.CENTER)||!ls(this.get(We.CENTER),a))&&this.set(We.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;let s=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!ls(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:Ve,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(qt.INTERACTING,1)}endInteraction(t,e,i){i=i&&ii(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(qt.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){let i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){let i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;let i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};function Mn(n,t){setTimeout(function(){n(t)},0)}function Jp(n){if(n.extent!==void 0){let e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Uo(n.extent,n.constrainOnlyCenter,e)}let t=yn(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){let e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Uo(e,!1,!1)}return Dc}function Qp(n){let t,e,i,o=n.minZoom!==void 0?n.minZoom:ua,a=n.maxZoom!==void 0?n.maxZoom:28,l=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,c=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,g=n.showFullExtent!==void 0?n.showFullExtent:!1,d=yn(n.projection,"EPSG:3857"),p=d.getExtent(),y=n.constrainOnlyCenter,b=n.extent;if(!h&&!b&&d.isGlobal()&&(y=!1,b=p),n.resolutions!==void 0){let x=n.resolutions;e=x[o],i=x[a]!==void 0?x[a]:x[x.length-1],n.constrainResolution?t=Lc(x,c,!y&&b,g):t=Ko(e,i,c,!y&&b,g)}else{let f=(p?Math.max(At(p),me(p)):360*ti.degrees/d.getMetersPerUnit())/256/Math.pow(2,ua),M=f/Math.pow(2,28-ua);e=n.maxResolution,e!==void 0?o=0:e=f/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=e/Math.pow(l,a):i=f/Math.pow(l,a):i=M),a=o+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,a-o),n.constrainResolution?t=Ic(l,e,i,c,!y&&b,g):t=Ko(e,i,c,!y&&b,g)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:o,zoomFactor:l}}function tf(n){if(n.enableRotation!==void 0?n.enableRotation:!0){let e=n.constrainRotation;return e===void 0||e===!0?Rc():e===!1?qo:typeof e=="number"?kc(e):qo}return Ws}function ef(n){return!(n.sourceCenter&&n.targetCenter&&!ls(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function pa(n,t,e,i,s){let r=Math.cos(-s),o=Math.sin(-s),a=n[0]*r-n[1]*o,l=n[1]*r+n[0]*o;a+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,o=-o;let h=a*r-l*o,c=l*r+a*o;return[h,c]}var Ce=fa;var ga=class extends pn{constructor(t){let e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(kt.SOURCE,this.handleSourcePropertyChange_);let i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(kt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Tt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let t=this.getSource();t&&(this.sourceChangeKey_=wt(t,ut.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e,i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof Ce?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;e.layerStatesArray?s=e.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();let r=this.getExtent();return wr(s,e.viewState)&&(!r||Vt(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e,i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];let s=t instanceof Ce?t.getViewStateAndExtent():t,r=e(s);return Array.isArray(r)||(r=[r]),r}render(t,e){let i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(kt.MAP,t)}getMapInternal(){return this.get(kt.MAP)}setMap(t){this.mapPrecomposeKey_&&(Tt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Tt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=wt(t,ve.PRECOMPOSE,function(e){let s=e.frameState.layerStatesArray,r=this.getLayerState(!1);gt(!s.some(function(o){return o.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=wt(this,ut.CHANGE,t.render,t),this.changed())}setSource(t){this.set(kt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function wr(n,t){if(!n.visible)return!1;let e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;let i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}var ds=ga;var ma=class extends Es{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){ft()}calculateMatrices2D(t){let e=t.viewState,i=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;be(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Is(s,i)}forEachFeatureAtCoordinate(t,e,i,s,r,o,a,l){let h,c=e.viewState;function g(_,w,k,z){return r.call(o,w,_?k:null,z)}let d=c.projection,p=mn(t.slice(),d),y=[[0,0]];if(d.canWrapX()&&s){let _=d.getExtent(),w=At(_);y.push([-w,0],[w,0])}let b=e.layerStatesArray,x=b.length,f=[],M=[];for(let _=0;_<y.length;_++)for(let w=x-1;w>=0;--w){let k=b[w],z=k.layer;if(z.hasRenderer()&&wr(k,c)&&a.call(l,z)){let O=z.getRenderer(),C=z.getSource();if(O&&C){let A=C.getWrapX()?p:t,F=g.bind(null,k.managed);M[0]=A[0]+y[_][0],M[1]=A[1]+y[_][1],h=O.forEachFeatureAtCoordinate(M,e,i,F,f)}if(h)return h}}if(f.length===0)return;let L=1/f.length;return f.forEach((_,w)=>_.distanceSq+=w*L),f.sort((_,w)=>_.distanceSq-w.distanceSq),f.some(_=>h=_.callback(_.feature,_.layer,_.geometry)),h}hasFeatureAtCoordinate(t,e,i,s,r,o){return this.forEachFeatureAtCoordinate(t,e,i,s,Pi,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){ft()}flushDeclutterItems(t){}scheduleExpireIconCache(t){js.canExpireCache()&&t.postRenderFunctions.push(sf)}};function sf(n,t){js.expire()}var nd=ma;var xa=class extends te{constructor(t,e,i,s){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=s}},En=xa;var Sr="ol-hidden";var Ji="ol-unselectable";var Vs="ol-control",ya="ol-collapsed",rf=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),od=["style","variant","weight","size","lineHeight","family"],ba=function(n){let t=n.match(rf);if(!t)return null;let e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=od.length;i<s;++i){let r=t[i+1];r!==void 0&&(e[od[i]]=r)}return e.families=e.family.split(/,\s?/),e};function Gt(n,t,e,i){let s;return e&&e.length?s=e.shift():Ls?s=new OffscreenCanvas(n||300,t||300):s=document.createElement("canvas"),n&&(s.width=n),t&&(s.height=t),s.getContext("2d",i)}function us(n){let t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function va(n,t){let e=t.parentNode;e&&e.replaceChild(n,t)}function Mr(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function ad(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function ld(n,t){let e=n.childNodes;for(let i=0;;++i){let s=e[i],r=t[i];if(!s&&!r)break;if(s!==r){if(!s){n.appendChild(r);continue}if(!r){n.removeChild(s),--i;continue}n.insertBefore(r,s)}}}var Tn="10px sans-serif",$t="#000",ps="round",Te=[],Ae=0,ui="round",Ri=10,Oi="#000",Qi="center",fs="middle",Fi=[0,0,0,0],zi=1,di=new Zt,Ys=null,Ca,_a={},hd=function(){let t="32px ",e=["monospace","serif"],i=e.length,s="wmytzilWMYTZIL@#/&?$%10\uF013",r,o;function a(h,c,g){let d=!0;for(let p=0;p<i;++p){let y=e[p];if(o=Pn(h+" "+c+" "+t+y,s),g!=y){let b=Pn(h+" "+c+" "+t+g+","+y,s);d=d&&b!=o}}return!!d}function l(){let h=!0,c=di.getKeys();for(let g=0,d=c.length;g<d;++g){let p=c[g];di.get(p)<100&&(a.apply(this,p.split(`
`))?(li(_a),Ys=null,Ca=void 0,di.set(p,100)):(di.set(p,di.get(p)+1,!0),h=!1))}h&&(clearInterval(r),r=void 0)}return function(h){let c=ba(h);if(!c)return;let g=c.families;for(let d=0,p=g.length;d<p;++d){let y=g[d],b=c.style+`
`+c.weight+`
`+y;di.get(b)===void 0&&(di.set(b,100,!0),a(c.style,c.weight,y)||(di.set(b,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),nf=function(){let n;return function(t){let e=_a[t];if(e==null){if(Ls){let i=ba(t),s=cd(t,"\u017Dg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);_a[t]=e}return e}}();function cd(n,t){return Ys||(Ys=Gt(1,1)),n!=Ca&&(Ys.font=n,Ca=Ys.font),Ys.measureText(t)}function Pn(n,t){return cd(n,t).width}function wa(n,t,e){if(t in e)return e[t];let i=t.split(`
`).reduce((s,r)=>Math.max(s,Pn(n,r)),0);return e[t]=i,i}function dd(n,t){let e=[],i=[],s=[],r=0,o=0,a=0,l=0;for(let h=0,c=t.length;h<=c;h+=2){let g=t[h];if(g===`
`||h===c){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}let d=t[h+1]||n.font,p=Pn(d,g);e.push(p),o+=p;let y=nf(d);i.push(y),l=Math.max(l,y)}return{width:r,height:a,widths:e,heights:i,lineWidths:s}}function ud(n,t,e,i,s,r,o,a,l,h,c){n.save(),e!==1&&(n.globalAlpha*=e),t&&n.setTransform.apply(n,t),i.contextInstructions?(n.translate(l,h),n.scale(c[0],c[1]),of(i,n)):c[0]<0||c[1]<0?(n.translate(l,h),n.scale(c[0],c[1]),n.drawImage(i,s,r,o,a,0,0,o,a)):n.drawImage(i,s,r,o,a,l,h,o*c[0],a*c[1]),n.restore()}function of(n,t){let e=n.contextInstructions;for(let i=0,s=e.length;i<s;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}var Sa=class extends nd{constructor(t){super(t),this.fontChangeListenerKey_=wt(di,Ke.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");let e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Ji+" ol-layers";let i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,e){let i=this.getMap();if(i.hasListener(t)){let s=new En(t,void 0,e);i.dispatchEvent(s)}}disposeInternal(){Tt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(ve.PRECOMPOSE,t);let e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;let s=this.declutterLayers_;s.length=0;let r=null;for(let o=0,a=e.length;o<a;++o){let l=e[o];t.layerIndex=o;let h=l.layer,c=h.getSourceState();if(!wr(l,i)||c!="ready"&&c!="undefined"){h.unrender();continue}let g=h.render(t,r);g&&(g!==r&&(this.children_.push(g),r=g),"getDeclutter"in h&&s.push(h))}this.flushDeclutterItems(t),ld(this.element_,this.children_),this.dispatchRenderEvent(ve.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){let e=this.declutterLayers_;for(let i=e.length-1;i>=0;--i)e[i].renderDeclutter(t);e.length=0}},pd=Sa;var ri=class extends te{constructor(t,e){super(t),this.layer=e}},Ma={LAYERS:"layers"},Ea=class n extends pn{constructor(t){t=t||{};let e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ma.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new oe(i.slice(),{unique:!0}):gt(typeof i.getArray=="function",43):i=new oe(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Tt),this.layersListenerKeys_.length=0;let t=this.getLayers();this.layersListenerKeys_.push(wt(t,ee.ADD,this.handleLayersAdd_,this),wt(t,ee.REMOVE,this.handleLayersRemove_,this));for(let i in this.listenerKeys_)this.listenerKeys_[i].forEach(Tt);li(this.listenerKeys_);let e=t.getArray();for(let i=0,s=e.length;i<s;i++){let r=e[i];this.registerLayerListeners_(r),this.dispatchEvent(new ri("addlayer",r))}this.changed()}registerLayerListeners_(t){let e=[wt(t,Ke.PROPERTYCHANGE,this.handleLayerChange_,this),wt(t,ut.CHANGE,this.handleLayerChange_,this)];t instanceof n&&e.push(wt(t,"addlayer",this.handleLayerGroupAdd_,this),wt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Mt(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new ri("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new ri("removelayer",t.layer))}handleLayersAdd_(t){let e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new ri("addlayer",e)),this.changed()}handleLayersRemove_(t){let e=t.element,i=Mt(e);this.listenerKeys_[i].forEach(Tt),delete this.listenerKeys_[i],this.dispatchEvent(new ri("removelayer",e)),this.changed()}getLayers(){return this.get(Ma.LAYERS)}setLayers(t){let e=this.getLayers();if(e){let i=e.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new ri("removelayer",i[s]))}this.set(Ma.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){let e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});let s=this.getLayerState(),r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=i,a=e.length;o<a;o++){let l=e[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=Yi(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return e}getSourceState(){return"ready"}},Er=Ea;var Pa=class extends te{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}},ts=Pa;var Ta=class extends ts{constructor(t,e,i,s,r,o){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},pi=Ta;var jt={SINGLECLICK:"singleclick",CLICK:ut.CLICK,DBLCLICK:ut.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Pr={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Aa=class extends Xi{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;let i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=wt(i,Pr.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=wt(i,Pr.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ut.TOUCHMOVE,this.boundHandleTouchMove_,sn?{passive:!1}:!1)}emulateClick_(t){let e=new pi(jt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new pi(jt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let i=new pi(jt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){let e=t,i=e.pointerId;if(e.type==jt.POINTERUP||e.type==jt.POINTERCANCEL){delete this.trackedTouches_[i];for(let s in this.trackedTouches_)if(this.trackedTouches_[s].target!==e.target){delete this.trackedTouches_[s];break}}else(e.type==jt.POINTERDOWN||e.type==jt.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);let e=new pi(jt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Tt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);let e=new pi(jt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){let i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(wt(i,jt.POINTERMOVE,this.handlePointerMove_,this),wt(i,jt.POINTERUP,this.handlePointerUp_,this),wt(this.element_,jt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(wt(this.element_.getRootNode(),jt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;let e=new pi(jt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;let e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new pi(jt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){let e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Tt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ut.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Tt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Tt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},fd=Aa;var fi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var le={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var Tr=1/0,Da=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,li(this.queuedElements_)}dequeue(){let t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));let s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){gt(!(this.keyFunction_(t)in this.queuedElements_),31);let e=this.priorityFunction_(t);return e!=Tr?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){let e=this.elements_,i=this.priorities_,s=e.length,r=e[t],o=i[t],a=t;for(;t<s>>1;){let l=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),c=h<s&&i[h]<i[l]?h:l;e[t]=e[c],i[t]=i[c],t=c}e[t]=r,i[t]=o,this.siftDown_(a,t)}siftDown_(t,e){let i=this.elements_,s=this.priorities_,r=i[e],o=s[e];for(;e>t;){let a=this.getParentIndex_(e);if(s[a]>o)i[e]=i[a],s[e]=s[a],e=a;else break}i[e]=r,s[e]=o}reprioritize(){let t=this.priorityFunction_,e=this.elements_,i=this.priorities_,s=0,r=e.length,o,a,l;for(a=0;a<r;++a)o=e[a],l=t(o),l==Tr?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=l,e[s++]=o);e.length=s,i.length=s,this.heapify_()}},gd=Da;var pt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var La=class extends gd{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){let e=super.enqueue(t);return e&&t[0].addEventListener(ut.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){let e=t.target,i=e.getState();if(i===pt.LOADED||i===pt.ERROR||i===pt.EMPTY){i!==pt.ERROR&&e.removeEventListener(ut.CHANGE,this.boundHandleTileChange_);let s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0,s,r,o;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===pt.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}},md=La;function xd(n,t,e,i,s){if(!n||!(e in n.wantedTiles))return Tr;if(!n.wantedTiles[e][t.getKey()])return Tr;let r=n.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}var Ia=class extends Zt{constructor(t){super();let e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Mr(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Mr(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)Tt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==$e&&this.listenerKeys.push(wt(t,fi.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}},Us=Ia;var ka=class extends Us{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:e+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;let a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(ut.CLICK,this.handleClick_.bind(this),!1);let h=e+" "+Ji+" "+Vs+(this.collapsed_&&this.collapsible_?" "+ya:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){let e=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),e}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!fe(e,this.renderedAttributions_)){ad(this.ulElement_);for(let s=0,r=e.length;s<r;++s){let o=document.createElement("li");o.innerHTML=e[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ya),this.collapsed_?va(this.collapseLabel_,this.label_):va(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},yd=ka;var Ra=class extends Us{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});let e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"\u21E7",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));let r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(ut.CLICK,this.handleClick_.bind(this),!1);let a=e+" "+Ji+" "+Vs,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Sr)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let e=this.getMap().getView();if(!e)return;let i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Ve}):e.setRotation(0))}render(t){let e=t.frameState;if(!e)return;let i=e.viewState.rotation;if(i!=this.rotation_){let s="rotate("+i+"rad)";if(this.autoHide_){let r=this.element.classList.contains(Sr);!r&&i===0?this.element.classList.add(Sr):r&&i!==0&&this.element.classList.remove(Sr)}this.label_.style.transform=s}this.rotation_=i}},bd=Ra;var Oa=class extends Us{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});let e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(ut.CLICK,this.handleClick_.bind(this,i),!1);let g=document.createElement("button");g.className=r,g.setAttribute("type","button"),g.title=h,g.appendChild(typeof a=="string"?document.createTextNode(a):a),g.addEventListener(ut.CLICK,this.handleClick_.bind(this,-i),!1);let d=e+" "+Ji+" "+Vs,p=this.element;p.className=d,p.appendChild(c),p.appendChild(g),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){let i=this.getMap().getView();if(!i)return;let s=i.getZoom();if(s!==void 0){let r=i.getConstrainedZoom(s+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Ve})):i.setZoom(r)}}},vd=Oa;function gs(n){n=n||{};let t=new oe;return(n.zoom!==void 0?n.zoom:!0)&&t.push(new vd(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&t.push(new bd(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&t.push(new yd(n.attributionOptions)),t}var Fa={ACTIVE:"active"};var za=class extends Zt{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Fa.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Fa.ACTIVE,t)}setMap(t){this.map_=t}};function Cd(n,t,e){let i=n.getCenterInternal();if(i){let s=[i[0]+t[0],i[1]+t[1]];n.animateInternal({duration:e!==void 0?e:250,easing:Fc,center:n.getConstrainedCenter(s)})}}function Hs(n,t,e,i){let s=n.getZoom();if(s===void 0)return;let r=n.getConstrainedZoom(s+t),o=n.getResolutionForZoom(r);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:e,duration:i!==void 0?i:250,easing:Ve})}var gi=za;var ja=class extends gi{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==jt.DBLCLICK){let i=t.originalEvent,s=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=s.getView();Hs(a,o,r,this.duration_),i.preventDefault(),e=!0}return!e}},_d=ja;var Na=class extends gi{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==jt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==jt.POINTERUP){let i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==jt.POINTERDOWN){let i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==jt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Zs(n){let t=n.length,e=0,i=0;for(let s=0;s<t;s++)e+=n[s].clientX,i+=n[s].clientY;return{clientX:e/t,clientY:i/t}}var mi=Na;function Ar(n){let t=arguments;return function(e){let i=!0;for(let s=0,r=t.length;s<r&&(i=i&&t[s](e),!!i);++s);return i}}var wd=function(n){let t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},af=function(n){let t=n.map.getTargetElement(),e=n.map.getOwnerDocument().activeElement;return t.contains(e)},An=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?af(n):!0},Sd=Pi;var Dn=function(n){let t=n.originalEvent;return t.button==0&&!(ec&&Do&&t.ctrlKey)};var Ln=function(n){let t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Md=function(n){let t=n.originalEvent;return Do?t.metaKey:t.ctrlKey},Ed=function(n){let t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},In=function(n){let t=n.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},kn=function(n){let t=n.originalEvent;return gt(t!==void 0,56),t.pointerType=="mouse"};var Pd=function(n){let t=n.originalEvent;return gt(t!==void 0,56),t.isPrimary&&t.button===0};var Ba=class extends mi{constructor(t){super({stopDown:Ti}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let e=t.condition?t.condition:Ar(Ln,Pd);this.condition_=t.onFocusOnly?Ar(An,e):e,this.noKinetic_=!1}handleDragEvent(t){let e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());let i=this.targetPointers,s=e.getEventPixel(Zs(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){let r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=t.map.getView();wc(r,a.getResolution()),Gs(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){let e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Ve})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){let i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Td=Ba;var Ga=class extends mi{constructor(t){t=t||{},super({stopDown:Ti}),this.condition_=t.condition?t.condition:wd,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!kn(t))return;let e=t.map,i=e.getView();if(i.getConstraints().rotation===Ws)return;let s=e.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){let a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return kn(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return kn(t)&&Dn(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},Ad=Ga;var Xa=class extends Es{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let t=this.startPixel_,e=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+i,s.top=Math.min(t[1],e[1])+i,s.width=Math.abs(e[0]-t[0])+i,s.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){let t=this.startPixel_,e=this.endPixel_,s=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new ci([s])}getGeometry(){return this.geometry_}},Dd=Xa;var Rn={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},Dr=class extends te{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}},Wa=class extends mi{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Dd(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Dn,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){let s=i[0]-e[0],r=i[1]-e[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Dr(Rn.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);let e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Dr(e?Rn.BOXEND:Rn.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Dr(Rn.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}},Ld=Wa;var Va=class extends Ld{constructor(t){t=t||{};let e=t.condition?t.condition:Ed;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){let i=this.getMap().getView(),s=this.getGeometry();if(this.out_){let r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:Ve})}},Id=Va;var es={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var Ya=class extends gi{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return Ln(e)&&In(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==ut.KEYDOWN){let i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==es.DOWN||s==es.LEFT||s==es.RIGHT||s==es.UP)){let o=t.map.getView(),a=o.getResolution()*this.pixelDelta_,l=0,h=0;s==es.DOWN?h=-a:s==es.LEFT?l=-a:s==es.RIGHT?l=a:h=a;let c=[l,h];Gs(c,o.getRotation()),Cd(o,c,this.duration_),i.preventDefault(),e=!0}}return!e}},kd=Ya;var Ua=class extends gi{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!Md(e)&&In(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==ut.KEYDOWN||t.type==ut.KEYPRESS){let i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==="+"||s==="-")){let r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();Hs(a,o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},Rd=Ua;var Ha=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;let t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;let s=this.points_[e+2]-this.points_[i+2];if(s<1e3/60)return!1;let r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},Od=Ha;var Za=class extends gi{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;let e=t.condition?t.condition:Sd;this.condition_=t.onFocusOnly?Ar(An,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==ut.WHEEL)return!0;let i=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==ut.WHEEL&&(r=s.deltaY,tc&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=en),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;let o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");let a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;let l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){let e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-Rt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Hs(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},Fd=Za;var Ka=class extends mi{constructor(t){t=t||{};let e=t;e.stopDown||(e.stopDown=Ti),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0,i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){let l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=r;let o=t.map,a=o.getView();a.getConstraints().rotation!==Ws&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Zs(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},zd=Ka;var qa=class extends mi{constructor(t){t=t||{};let e=t;e.stopDown||(e.stopDown=Ti),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1,i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;let l=t.map,h=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Zs(this.targetPointers))),l.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){let i=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},jd=qa;function Nd(n){n=n||{};let t=new oe,e=new Od(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&t.push(new Ad),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&t.push(new _d({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&t.push(new Td({onFocusOnly:n.onFocusOnly,kinetic:e})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&t.push(new zd),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&t.push(new jd({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(t.push(new kd),t.push(new Rd({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&t.push(new Fd({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&t.push(new Id({duration:n.zoomDuration})),t}function $a(n){return n[0]>0&&n[1]>0}function Bd(n,t,e){return e===void 0&&(e=[0,0]),e[0]=n[0]*t+.5|0,e[1]=n[1]*t+.5|0,e}function ie(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}function Gd(n){if(n instanceof ds){n.setMapInternal(null);return}n instanceof Er&&n.getLayers().forEach(Gd)}function Xd(n,t){if(n instanceof ds){n.setMapInternal(t);return}if(n instanceof Er){let e=n.getLayers().getArray();for(let i=0,s=e.length;i<s;++i)Xd(e[i],t)}}var Ja=class extends Zt{constructor(t){super(),t=t||{},this.on,this.once,this.un;let e=lf(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:en,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ge(),this.pixelToCoordinateTransform_=ge(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||gs(),this.interactions=e.interactions||Nd({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new md(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(le.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(le.VIEW,this.handleViewChanged_),this.addChangeListener(le.SIZE,this.handleSizeChanged_),this.addChangeListener(le.TARGET,this.handleTargetChanged_),this.setProperties(e.values);let i=this;t.view&&!(t.view instanceof Ce)&&t.view.then(function(s){i.setView(new Ce(s))}),this.controls.addEventListener(ee.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(ee.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(ee.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(ee.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(ee.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(ee.REMOVE,s=>{let r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Xd(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){let e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;let s=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};let r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:Pi,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,e,null,o,null)}getFeaturesAtPixel(t,e){let i=[];return this.forEachFeatureAtPixel(t,function(s){i.push(s)},e),i}getAllLayers(){let t=[];function e(i){i.forEach(function(s){s instanceof Er?e(s.getLayers()):t.push(s)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;let i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};let s=e.layerFilter!==void 0?e.layerFilter:Pi,r=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){let i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],o=i.height/s[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/r,(a.clientY-i.top)/o]}getTarget(){return this.get(le.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return pr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){let e=this.frameState_;return e?Wt(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){let e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(le.LAYERGROUP)}setLayers(t){let e=this.getLayerGroup();if(t instanceof oe){e.setLayers(t);return}let i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){let s=t[e];if(!s.visible)continue;let r=s.layer.getRenderer();if(r&&!r.ready)return!0;let o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){let e=ii(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){let e=this.frameState_;return e?Wt(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(le.SIZE)}getView(){return this.get(le.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,s){return xd(this.frameState_,t,e,i,s)}handleBrowserEvent(t,e){e=e||t.type;let i=new pi(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;let e=t.originalEvent,i=e.type;if(i===Pr.POINTERDOWN||i===ut.WHEEL||i===ut.KEYDOWN){let s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){let s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){let o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){let t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){let o=t.viewHints;if(o[qt.ANIMATING]||o[qt.INTERACTING]){let a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}e.getTilesLoading()<s&&(e.reprioritize(),e.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(ve.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ve.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ts(fi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ts(fi.LOADSTART,this,t))));let i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)Tt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ut.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ut.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Mr(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);let i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}let t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new pd(this)),this.mapBrowserEventHandler_=new fd(this,this.moveTolerance_);for(let r in jt)this.mapBrowserEventHandler_.addEventListener(jt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ut.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ut.WHEEL,this.boundHandleBrowserEvent_,sn?{passive:!1}:!1);let i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[wt(i,ut.KEYDOWN,this.handleBrowserEvent,this),wt(i,ut.KEYPRESS,this.handleBrowserEvent,this)];let s=e.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Tt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Tt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=wt(t,Ke.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=wt(t,ut.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Tt),this.layerGroupPropertyListenerKeys_=null);let t=this.getLayerGroup();t&&(this.handleLayerAdd_(new ri("addlayer",t)),this.layerGroupPropertyListenerKeys_=[wt(t,Ke.PROPERTYCHANGE,this.render,this),wt(t,ut.CHANGE,this.render,this),wt(t,"addlayer",this.handleLayerAdd_,this),wt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){let s=t[e].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){let t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Gd(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){let e=this.getSize(),i=this.getView(),s=this.frameState_,r=null;if(e!==void 0&&$a(e)&&i&&i.isDef()){let o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ar(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Mt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){let l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=ar(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Ui(this.previousExtent_)&&!Li(r.extent,this.previousExtent_))&&(this.dispatchEvent(new ts(fi.MOVESTART,this,s)),this.previousExtent_=Di(this.previousExtent_)),this.previousExtent_&&!r.viewHints[qt.ANIMATING]&&!r.viewHints[qt.INTERACTING]&&!Li(r.extent,this.previousExtent_)&&(this.dispatchEvent(new ts(fi.MOVEEND,this,r)),on(r.extent,this.previousExtent_))),this.dispatchEvent(new ts(fi.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(fi.LOADSTART)||this.hasListener(fi.LOADEND)||this.hasListener(ve.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){let e=this.getLayerGroup();e&&this.handleLayerRemove_(new ri("removelayer",e)),this.set(le.LAYERGROUP,t)}setSize(t){this.set(le.SIZE,t)}setTarget(t){this.set(le.TARGET,t)}setView(t){if(!t||t instanceof Ce){this.set(le.VIEW,t);return}this.set(le.VIEW,new Ce);let e=this;t.then(function(i){e.setView(new Ce(i))})}updateSize(){let t=this.getTargetElement(),e;if(t){let s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(e=[r,o],!$a(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&xn("No map visible because the map container's width or height are 0."))}let i=this.getSize();e&&(!i||!fe(e,i))&&(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){let t=this.getView();if(t){let e,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}};function lf(n){let t=null;n.keyboardEventTarget!==void 0&&(t=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);let e={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Er({layers:n.layers});e[le.LAYERGROUP]=i,e[le.TARGET]=n.target,e[le.VIEW]=n.view instanceof Ce?n.view:new Ce;let s;n.controls!==void 0&&(Array.isArray(n.controls)?s=new oe(n.controls.slice()):(gt(typeof n.controls.getArray=="function",47),s=n.controls));let r;n.interactions!==void 0&&(Array.isArray(n.interactions)?r=new oe(n.interactions.slice()):(gt(typeof n.interactions.getArray=="function",48),r=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new oe(n.overlays.slice()):(gt(typeof n.overlays.getArray=="function",49),o=n.overlays):o=new oe,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:e}}var On=Ja;var Qa=class{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){let i=this.entries_[t];return gt(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){let e=this.entries_[t];return gt(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){let t=new Array(this.count_),e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){let t=new Array(this.count_),e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){let t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){gt(!(t in this.entries_),16);let i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}},Wd=Qa;var tl=class extends Xi{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(ut.CHANGE)}release(){this.state===pt.ERROR&&this.setState(pt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==pt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==pt.LOADED){t.interimTile=null;break}else t.getState()==pt.LOADING?e=t:t.getState()==pt.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==pt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){ft()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;let s=e-i+1e3/60;return s>=this.transition_?1:$o(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}},Fn=tl;var Ot={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function zn(n,t,e){let i=n,s=!0,r=!1,o=!1,a=[Ts(i,ut.LOAD,function(){o=!0,r||t()})];return i.src&&ic?(r=!0,i.decode().then(function(){s&&t()}).catch(function(l){s&&(o?t():e())})):a.push(Ts(i,ut.ERROR,e)),function(){s=!1,a.forEach(Tt)}}var el=class extends Fn{constructor(t,e,i,s,r,o){super(t,e,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=pt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=pt.ERROR,this.unlistenImage_(),this.image_=hf(),this.changed()}handleImageLoad_(){let t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=pt.LOADED:this.state=pt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==pt.ERROR&&(this.state=pt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==pt.IDLE&&(this.state=pt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=zn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function hf(){let n=Gt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var jn=el;var cf=10,Vd=.25,il=class{constructor(t,e,i,s,r,o){this.sourceProj_=t,this.targetProj_=e;let a={},l=hs(this.targetProj_,this.sourceProj_);this.transformInv_=function(M){let L=M[0]+"/"+M[1];return a[L]||(a[L]=l(M)),a[L]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&At(s)>=At(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?At(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?At(this.targetProj_.getExtent()):null;let h=Xe(i),c=Fs(i),g=Os(i),d=Rs(i),p=this.transformInv_(h),y=this.transformInv_(c),b=this.transformInv_(g),x=this.transformInv_(d),f=cf+(o?Math.max(0,Math.ceil(Math.log2(or(i)/(o*o*256*256)))):0);if(this.addQuad_(h,c,g,d,p,y,b,x,f),this.wrapsXInSource_){let M=1/0;this.triangles_.forEach(function(L,_,w){M=Math.min(M,L.source[0][0],L.source[1][0],L.source[2][0])}),this.triangles_.forEach(L=>{if(Math.max(L.source[0][0],L.source[1][0],L.source[2][0])-M>this.sourceWorldWidth_/2){let _=[[L.source[0][0],L.source[0][1]],[L.source[1][0],L.source[1][1]],[L.source[2][0],L.source[2][1]]];_[0][0]-M>this.sourceWorldWidth_/2&&(_[0][0]-=this.sourceWorldWidth_),_[1][0]-M>this.sourceWorldWidth_/2&&(_[1][0]-=this.sourceWorldWidth_),_[2][0]-M>this.sourceWorldWidth_/2&&(_[2][0]-=this.sourceWorldWidth_);let w=Math.min(_[0][0],_[1][0],_[2][0]);Math.max(_[0][0],_[1][0],_[2][0])-w<this.sourceWorldWidth_/2&&(L.source=_)}})}a={}}addTriangle_(t,e,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,e,i]})}addQuad_(t,e,i,s,r,o,a,l,h){let c=Lo([r,o,a,l]),g=this.sourceWorldWidth_?At(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&g>.5&&g<1,y=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let x=Lo([t,e,i,s]);y=At(x)/this.targetWorldWidth_>Vd||y}!p&&this.sourceProj_.isGlobal()&&g&&(y=g>Vd||y)}if(!y&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Vt(c,this.maxSourceExtent_))return;let b=0;if(!y&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(h>0)y=!0;else if(b=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),b!=1&&b!=2&&b!=4&&b!=8)return}if(h>0){if(!y){let x=[(t[0]+i[0])/2,(t[1]+i[1])/2],f=this.transformInv_(x),M;p?M=(Ii(r[0],d)+Ii(a[0],d))/2-Ii(f[0],d):M=(r[0]+a[0])/2-f[0];let L=(r[1]+a[1])/2-f[1];y=M*M+L*L>this.errorThresholdSquared_}if(y){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){let x=[(e[0]+i[0])/2,(e[1]+i[1])/2],f=this.transformInv_(x),M=[(s[0]+t[0])/2,(s[1]+t[1])/2],L=this.transformInv_(M);this.addQuad_(t,e,x,M,r,o,f,L,h-1),this.addQuad_(M,x,i,s,L,f,a,l,h-1)}else{let x=[(t[0]+e[0])/2,(t[1]+e[1])/2],f=this.transformInv_(x),M=[(i[0]+s[0])/2,(i[1]+s[1])/2],L=this.transformInv_(M);this.addQuad_(t,x,M,s,r,f,L,l,h-1),this.addQuad_(x,e,i,M,f,o,a,L,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}b&11||this.addTriangle_(t,i,s,r,a,l),b&14||this.addTriangle_(t,i,e,r,a,o),b&&(b&13||this.addTriangle_(e,s,t,o,l,r),b&7||this.addTriangle_(e,s,i,o,l,a))}calculateSourceExtent(){let t=Ut();return this.triangles_.forEach(function(e,i,s){let r=e.source;os(t,r[0]),os(t,r[1]),os(t,r[2])}),t}getTriangles(){return this.triangles_}},Yd=il;var sl,ms=[];function Ud(n,t,e,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,i)+1,Math.max(e,s)),n.restore()}function rl(n,t){return Math.abs(n[t*4]-210)>2||Math.abs(n[t*4+3]-.75*255)>2}function df(){if(sl===void 0){let n=Gt(6,6,ms);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Ud(n,4,5,4,0),Ud(n,4,5,0,5);let t=n.getImageData(0,0,3,3).data;sl=rl(t,0)||rl(t,4)||rl(t,8),us(n),ms.push(n.canvas)}return sl}function Hd(n,t,e,i){let s=Zi(e,t,n),r=Vo(t,i,e),o=t.getMetersPerUnit();o!==void 0&&(r*=o);let a=n.getMetersPerUnit();a!==void 0&&(r/=a);let l=n.getExtent();if(!l||Vi(l,s)){let h=Vo(n,r,s)/r;isFinite(h)&&h>0&&(r/=h)}return r}function Zd(n,t,e,i){let s=Ge(e),r=Hd(n,t,s,i);return(!isFinite(r)||r<=0)&&hn(e,function(o){return r=Hd(n,t,o,i),isFinite(r)&&r>0}),r}function Kd(n,t,e,i,s,r,o,a,l,h,c,g){let d=Gt(Math.round(e*n),Math.round(e*t),ms);if(g||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(e,e);function p(_){return Math.round(_*e)/e}d.globalCompositeOperation="lighter";let y=Ut();l.forEach(function(_,w,k){ln(y,_.extent)});let b=At(y),x=me(y),f=Gt(Math.round(e*b/i),Math.round(e*x/i),ms);g||(f.imageSmoothingEnabled=!1);let M=e/i;l.forEach(function(_,w,k){let z=_.extent[0]-y[0],O=-(_.extent[3]-y[3]),C=At(_.extent),A=me(_.extent);_.image.width>0&&_.image.height>0&&f.drawImage(_.image,h,h,_.image.width-2*h,_.image.height-2*h,z*M,O*M,C*M,A*M)});let L=Xe(o);return a.getTriangles().forEach(function(_,w,k){let z=_.source,O=_.target,C=z[0][0],A=z[0][1],F=z[1][0],S=z[1][1],T=z[2][0],D=z[2][1],P=p((O[0][0]-L[0])/r),m=p(-(O[0][1]-L[1])/r),u=p((O[1][0]-L[0])/r),v=p(-(O[1][1]-L[1])/r),I=p((O[2][0]-L[0])/r),E=p(-(O[2][1]-L[1])/r),R=C,j=A;C=0,A=0,F-=R,S-=j,T-=R,D-=j;let G=[[F,S,0,0,u-P],[T,D,0,0,I-P],[0,0,F,S,v-m],[0,0,T,D,E-m]],W=pc(G);if(W){if(d.save(),d.beginPath(),df()||!g){d.moveTo(u,v);let N=4,B=P-u,X=m-v;for(let V=0;V<N;V++)d.lineTo(u+p((V+1)*B/N),v+p(V*X/(N-1))),V!=N-1&&d.lineTo(u+p((V+1)*B/N),v+p((V+1)*X/(N-1)));d.lineTo(I,E)}else d.moveTo(u,v),d.lineTo(P,m),d.lineTo(I,E);d.clip(),d.transform(W[0],W[2],W[1],W[3],P,m),d.translate(y[0]-R,y[3]-j),d.scale(i/e,-i/e),d.drawImage(f.canvas,0,0),d.restore()}}),us(f),ms.push(f.canvas),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(_,w,k){let z=_.target,O=(z[0][0]-L[0])/r,C=-(z[0][1]-L[1])/r,A=(z[1][0]-L[0])/r,F=-(z[1][1]-L[1])/r,S=(z[2][0]-L[0])/r,T=-(z[2][1]-L[1])/r;d.beginPath(),d.moveTo(A,F),d.lineTo(O,C),d.lineTo(S,T),d.closePath(),d.stroke()}),d.restore()),d.canvas}var nl=class extends Fn{constructor(t,e,i,s,r,o,a,l,h,c,g,d){super(r,pt.IDLE,{interpolate:!!d}),this.renderEdges_=g!==void 0?g:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let p=s.getTileCoordExtent(this.wrappedTileCoord_),y=this.targetTileGrid_.getExtent(),b=this.sourceTileGrid_.getExtent(),x=y?Yi(p,y):p;if(or(x)===0){this.state=pt.EMPTY;return}let f=t.getExtent();f&&(b?b=Yi(b,f):b=f);let M=s.getResolution(this.wrappedTileCoord_[0]),L=Zd(t,i,x,M);if(!isFinite(L)||L<=0){this.state=pt.EMPTY;return}let _=c!==void 0?c:.5;if(this.triangulation_=new Yd(t,i,x,b,L*_,M),this.triangulation_.getTriangles().length===0){this.state=pt.EMPTY;return}this.sourceZ_=e.getZForResolution(L);let w=this.triangulation_.calculateSourceExtent();if(b&&(t.canWrapX()?(w[1]=Rt(w[1],b[1],b[3]),w[3]=Rt(w[3],b[1],b[3])):w=Yi(w,b)),!or(w))this.state=pt.EMPTY;else{let k=e.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let z=k.minX;z<=k.maxX;z++)for(let O=k.minY;O<=k.maxY;O++){let C=h(this.sourceZ_,z,O,a);C&&this.sourceTiles_.push(C)}this.sourceTiles_.length===0&&(this.state=pt.EMPTY)}}getImage(){return this.canvas_}reproject_(){let t=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==pt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=pt.ERROR;else{let e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),s=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Kd(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=pt.LOADED}this.changed()}load(){if(this.state==pt.IDLE){this.state=pt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{let i=e.getState();if(i==pt.IDLE||i==pt.LOADING){t++;let s=wt(e,ut.CHANGE,function(r){let o=e.getState();(o==pt.LOADED||o==pt.ERROR||o==pt.EMPTY)&&(Tt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,s){e.getState()==pt.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Tt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(us(this.canvas_.getContext("2d")),ms.push(this.canvas_),this.canvas_=null),super.release()}},Lr=nl;function ol(n,t,e,i){return i!==void 0?(i[0]=n,i[1]=t,i[2]=e,i):[n,t,e]}function xs(n,t,e){return n+"/"+t+"/"+e}function Nn(n){return xs(n[0],n[1],n[2])}function qd(n){return n.split("/").map(Number)}function $d(n){return(n[1]<<n[0])+n[2]}function Jd(n,t){let e=n[0],i=n[1],s=n[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;let r=t.getFullTileRange(e);return r?r.containsXY(i,s):!0}var al=class extends Wd{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let t=this.peekFirstKey(),i=qd(t)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(Nn(s.tileCoord)),s.release())})}},Bn=al;var Gn={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var ll=class extends Zt{constructor(t){super(),this.projection=zt(t.projection),this.attributions_=Qd(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;let e=this;this.viewPromise_=new Promise(function(i,s){e.viewResolver=i,e.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Qd(t),this.changed()}setState(t){this.state_=t,this.changed()}};function Qd(n){return n?Array.isArray(n)?function(t){return n}:typeof n=="function"?n:function(t){return[n]}:null}var Xn=ll;var Wn=class{constructor(t,e,i,s){this.minX=t,this.maxX=e,this.minY=i,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}};function ys(n,t,e,i,s){return s!==void 0?(s.minX=n,s.maxX=t,s.minY=e,s.maxY=i,s):new Wn(n,t,e,i)}var Vn=Wn;var Ks=[0,0,0],is=5,hl=class{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,gt($h(this.resolutions_,function(s,r){return r-s},!0),17);let e;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!e)e=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,gt(this.origins_.length==this.resolutions_.length,20));let i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Xe(i)),gt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,gt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:256,gt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(s,r){let o=new Vn(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){let a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){let s=this.getTileRangeForExtentAndZ(t,e);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)i([e,r,a])}forEachTileCoordParentTileRange(t,e,i,s){let r,o,a,l=null,h=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);h>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=ys(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(l,h,i),e(h,r))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){let r=t[1]*2,o=t[2]*2;return ys(r,r+1,o,o+1,e)}let s=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;let s=t[0],r=t[1],o=t[2];if(e===s)return ys(r,o,r,o,i);if(this.zoomFactor_){let l=Math.pow(this.zoomFactor_,e-s),h=Math.floor(r*l),c=Math.floor(o*l);if(e<s)return ys(h,h,c,c,i);let g=Math.floor(l*(r+1))-1,d=Math.floor(l*(o+1))-1;return ys(h,g,c,d,i)}let a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Ks);let s=Ks[1],r=Ks[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Ks);let o=Ks[1],a=Ks[2];return ys(s,o,r,a,i)}getTileCoordCenter(t){let e=this.getOrigin(t[0]),i=this.getResolution(t[0]),s=ie(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*s[0]*i,e[1]-(t[2]+.5)*s[1]*i]}getTileCoordExtent(t,e){let i=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=ie(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*s,a=i[1]-(t[2]+1)*r[1]*s,l=o+r[0]*s,h=a+r[1]*s;return ze(o,a,l,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,s,r){let o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),h=ie(this.getTileSize(o),this.tmpSize_),c=a*(t-l[0])/i/h[0],g=a*(l[1]-e)/i/h[1];return s?(c=hr(c,is)-1,g=hr(g,is)-1):(c=lr(c,is),g=lr(g,is)),ol(o,c,g,r)}getTileCoordForXYAndZ_(t,e,i,s,r){let o=this.getOrigin(i),a=this.getResolution(i),l=ie(this.getTileSize(i),this.tmpSize_),h=(t-o[0])/a/l[0],c=(o[1]-e)/a/l[1];return s?(h=hr(h,is)-1,c=hr(c,is)-1):(h=lr(h,is),c=lr(c,is)),ol(i,h,c,r)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){let i=Ps(this.resolutions_,t,e||0);return Rt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return aa(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){let e=this.resolutions_.length,i=new Array(e);for(let s=this.minZoom;s<e;++s)i[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=i}},cl=hl;function Yn(n){let t=n.getDefaultTileGrid();return t||(t=pf(n),n.setDefaultTileGrid(t)),t}function tu(n,t,e){let i=t[0],s=n.getTileCoordCenter(t),r=Un(e);if(!Vi(r,s)){let o=At(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,n.getTileCoordForCoordAndZ(s,i)}return t}function uf(n,t,e,i){i=i!==void 0?i:"top-left";let s=iu(n,t,e);return new cl({extent:n,origin:ac(n,i),resolutions:s,tileSize:e})}function eu(n){let t=n||{},e=t.extent||zt("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:iu(e,t.maxZoom,t.tileSize,t.maxResolution)};return new cl(i)}function iu(n,t,e,i){t=t!==void 0?t:42,e=ie(e!==void 0?e:256);let s=me(n),r=At(n);i=i>0?i:Math.max(r/e[0],s/e[1]);let o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function pf(n,t,e,i){let s=Un(n);return uf(s,t,e,i)}function Un(n){n=zt(n);let t=n.getExtent();if(!t){let e=180*ti.degrees/n.getMetersPerUnit();t=ze(-e,-e,e,e)}return t}var dl=class extends Xn{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;let e=[256,256];this.tileGrid&&ie(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new Bn(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){let i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,s){let r=this.getTileCacheForProjection(t);if(!r)return!1;let o=!0,a,l,h;for(let c=i.minX;c<=i.maxX;++c)for(let g=i.minY;g<=i.maxY;++g)l=xs(e,c,g),h=!1,r.containsKey(l)&&(a=r.get(l),h=a.getState()===pt.LOADED,h&&(h=s(a)!==!1)),h||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){let e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,s,r){return ft()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Yn(t)}getTileCacheForProjection(t){let e=this.getProjection();return gt(e===null||hi(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){let s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),o=ie(s.getTileSize(t),this.tmpSize);return r==1?o:Bd(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();let i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=tu(i,t,e)),Jd(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){let i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,s){}},Hn=class extends te{constructor(t,e){super(t),this.tile=e}},su=dl;function ff(n,t){let e=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(e,o[0].toString()).replace(i,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){let h=o[0],c=t.getFullTileRange(h);return gt(c,55),(c.getHeight()-o[2]-1).toString()})}}function ru(n,t){let e=n.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=ff(n[s],t);return gf(i)}function gf(n){return n.length===1?n[0]:function(t,e,i){if(!t)return;let s=$d(t),r=Ii(s,n.length);return n[r](t,e,i)}}function nu(n){let t=[],e=/\{([a-z])-([a-z])\}/.exec(n);if(e){let i=e[1].charCodeAt(0),s=e[2].charCodeAt(0),r;for(r=i;r<=s;++r)t.push(n.replace(e[0],String.fromCharCode(r)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n),e){let i=parseInt(e[2],10);for(let s=parseInt(e[1],10);s<=i;s++)t.push(n.replace(e[0],s.toString()));return t}return t.push(n),t}var ul=class n extends su{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===n.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){let e=t.target,i=Mt(e),s=e.getState(),r;s==pt.LOADING?(this.tileLoadingKeys_[i]=!0,r=Gn.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==pt.ERROR?Gn.TILELOADERROR:s==pt.LOADED?Gn.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new Hn(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){let e=nu(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;let e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(ru(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){let s=xs(t,e,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}},ou=ul;var pl=class extends ou{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:mf,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:jn,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){let i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(let s in this.tileCacheForProjection){let r=this.tileCacheForProjection[s];r.expireCache(r==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!hi(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!hi(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){let e=this.getProjection();if(this.tileGrid&&(!e||hi(e,t)))return this.tileGrid;let i=Mt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Yn(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){let e=this.getProjection();if(!e||hi(e,t))return this.tileCache;let i=Mt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Bn(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,s,r,o){let a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,r),h=l?this.tileUrlFunction(l,s,r):void 0,c=new this.tileClass(a,h!==void 0?pt.IDLE:pt.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(ut.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,i,s,r){let o=this.getProjection();if(!o||!r||hi(o,r))return this.getTileInternal(t,e,i,s,o||r);let a=this.getTileCacheForProjection(r),l=[t,e,i],h,c=Nn(l);a.containsKey(c)&&(h=a.get(c));let g=this.getKey();if(h&&h.key==g)return h;let d=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),y=this.getTileCoordForTileUrlFunction(l,r),b=new Lr(o,d,r,p,l,y,this.getTilePixelRatio(s),this.getGutter(),(x,f,M,L)=>this.getTileInternal(x,f,M,L,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return b.key=g,h?(b.interimTile=h,b.refreshInterimChain(),a.replace(c,b)):a.set(c,b),b}getTileInternal(t,e,i,s,r){let o=null,a=xs(t,e,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,e,i,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){let h=o;o=this.createTile_(t,e,i,s,r,l),h.getState()==pt.IDLE?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(let e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){let i=zt(t);if(i){let s=Mt(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=e)}}clear(){super.clear();for(let t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};function mf(n,t){n.getImage().src=t}var au=pl;var fl=class extends au{constructor(t){t=t||{};let e=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:eu({extent:Un(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}},lu=fl;var gl=class n extends Zt{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){let e=t;this.setGeometry(e)}else{let e=t;this.setProperties(e)}}clone(){let t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let e=this.getGeometry();e&&t.setGeometry(e.clone());let i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Tt(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=wt(t,ut.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?xf(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function xf(n){if(typeof n=="function")return n;let t;return Array.isArray(n)?t=n:(gt(typeof n.getZIndex=="function",41),t=[n]),function(){return t}}var bs=gl;var hu=Jt(yl(),1);var bl=class{constructor(t){this.rbush_=new hu.default(t),this.items_={}}insert(t,e){let i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Mt(e)]=i}load(t,e){let i=new Array(e.length);for(let s=0,r=e.length;s<r;s++){let o=t[s],a=e[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[Mt(a)]=l}this.rbush_.load(i)}remove(t){let e=Mt(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){let i=this.items_[Mt(e)],s=[i.minX,i.minY,i.maxX,i.maxY];Li(s,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){let e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,r=t.length;s<r;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return Je(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let e=this.rbush_.toJSON();return ze(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(let e in t.items_)this.items_[e]=t.items_[e]}},vl=bl;var He={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function cu(n,t){return[[-1/0,-1/0,1/0,1/0]]}var yf=!1;function bf(n,t,e,i,s,r,o){let a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(e,i,s):n,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=yf,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){let h=t.getType(),c;h=="json"||h=="text"?c=a.responseText:h=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):h=="arraybuffer"&&(c=a.response),c?r(t.readFeatures(c,{extent:e,featureProjection:s}),t.readProjection(c)):o()}else o()},a.onerror=o,a.send()}function Cl(n,t){return function(e,i,s,r,o){let a=this;bf(n,t,e,i,s,function(l,h){a.addFeatures(l),r!==void 0&&r(l)},o||$e)}}var xi=class extends te{constructor(t,e,i){super(t),this.feature=e,this.features=i}},_l=class extends Xn{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=$e,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(gt(this.format_,7),this.loader_=Cl(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:cu;let e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new vl:null,this.loadedExtentsRtree_=new vl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),!e&&i===void 0&&(i=new oe(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let e=Mt(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);let i=t.getGeometry();if(i){let s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new xi(He.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[wt(e,ut.CHANGE,this.handleFeatureChange_,this),wt(e,Ke.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0,s=e.getId();return s!==void 0&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=e),i&&(gt(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let e=[],i=[],s=[];for(let r=0,o=t.length;r<o;r++){let a=t[r],l=Mt(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){let a=i[r],l=Mt(a);this.setupChangeEvents_(l,a);let h=a.getGeometry();if(h){let c=h.getExtent();e.push(c),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(He.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new xi(He.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(He.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(He.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(ee.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(ee.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(let i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Tt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(let s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let e=new xi(He.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){let i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(s){if(s.getGeometry().intersectsCoordinate(t))return e(s)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){let r=e(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Je(this.nullGeometryFeatures_)||ye(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);let s=dc(t,e);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){let i=t[0],s=t[1],r=null,o=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0];return e=e||Pi,this.featuresRtree_.forEachInExtent(l,function(h){if(e(h)){let c=h.getGeometry(),g=a;if(a=c.closestPointXY(i,s,o,a),a<g){r=h;let d=Math.sqrt(a);l[0]=i-d,l[1]=s-d,l[2]=i+d,l[3]=s+d}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){let e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let e=t.target,i=Mt(e),s=e.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{let o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}let r=e.getId();if(r!==void 0){let o=r.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new xi(He.CHANGEFEATURE,e))}hasFeature(t){let e=t.getId();return e!==void 0?e in this.idIndex_:Mt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Je(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){let s=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let o=0,a=r.length;o<a;++o){let l=r[o];s.forEachInExtent(l,function(c){return Ai(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new xi(He.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new xi(He.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new xi(He.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let e=this.loadedExtentsRtree_,i;e.forEachInExtent(t,function(s){if(Li(s.extent,t))return i=s,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;let e=Mt(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let e=Mt(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(Tt),delete this.featureChangeKeys_[e];let s=t.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[e],this.dispatchEvent(new xi(He.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(let i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){gt(this.format_,7),this.url_=t,this.setLoader(Cl(t,this.format_))}},yi=_l;var vf='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',wl=class extends lu{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[vf];let i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}},Ir=wl;var Sl=class extends Jr{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return ft()}getData(t){return null}prepareFrame(t){return ft()}renderFrame(t,e){return ft()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(s,r)=>{let o=this.loadedTileCallback.bind(this,i,s);return t.forEachLoadedTile(e,s,r,o)}}forEachFeatureAtCoordinate(t,e,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){let e=t.target;(e.getState()===Ot.LOADED||e.getState()===Ot.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Ot.LOADED&&e!=Ot.ERROR&&t.addEventListener(ut.CHANGE,this.boundHandleImageChange_),e==Ot.IDLE&&(t.load(),e=t.getState()),e==Ot.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},du=Sl;var El=[],qs=null;function Cf(){qs=Gt(1,1,void 0,{willReadFrequently:!0})}var Ml=class extends du{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=ge(),this.pixelTransform=ge(),this.inversePixelTransform=ge(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){qs||Cf(),qs.clearRect(0,0,1,1);let s;try{qs.drawImage(t,e,i,1,1,0,0,1,1),s=qs.getImageData(0,0,1,1).data}catch{return qs=null,null}return s}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){let s=this.getLayer().getClassName(),r,o;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&fe(as(t.style.backgroundColor),as(i)))){let a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Gt();let l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){let s=Xe(i),r=Fs(i),o=Os(i),a=Rs(i);Wt(e.coordinateToPixelTransform,s),Wt(e.coordinateToPixelTransform,r),Wt(e.coordinateToPixelTransform,o),Wt(e.coordinateToPixelTransform,a);let l=this.inversePixelTransform;Wt(l,s),Wt(l,r),Wt(l,o),Wt(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){let s=this.getLayer();if(s.hasListener(t)){let r=new En(t,this.inversePixelTransform,i,e);s.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(ve.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(ve.POSTRENDER,t,e)}getRenderTransform(t,e,i,s,r,o,a){let l=r/2,h=o/2,c=s/e,g=-c,d=-t[0]+a,p=-t[1];return be(this.tempTransform,l,h,c,g,-i,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}},Zn=Ml;var kr={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Pl=class extends ds{constructor(t){t=t||{};let e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(kr.PRELOAD)}setPreload(t){this.set(kr.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(kr.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(kr.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}},uu=Pl;var Tl=class extends Zn{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ut(),this.tmpTileRange_=new Vn(0,0,0,0)}isDrawableTile(t){let e=this.getLayer(),i=t.getState(),s=e.getUseInterimTilesOnError();return i==pt.LOADED||i==pt.EMPTY||i==pt.ERROR&&!s}getTile(t,e,i,s){let r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer(),h=a.getSource().getTile(t,e,i,r,o);return h.getState()==pt.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(h)||(h=h.getInterimTile()),h}getData(t){let e=this.frameState;if(!e)return null;let i=this.getLayer(),s=Wt(e.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!Vi(r,s))return null;let o=e.pixelRatio,a=e.viewState.projection,l=e.viewState,h=i.getRenderSource(),c=h.getTileGridForProjection(l.projection),g=h.getTilePixelRatio(e.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){let p=c.getTileCoordForCoordAndZ(s,d),y=h.getTile(d,p[1],p[2],o,a);if(!(y instanceof jn||y instanceof Lr)||y instanceof Lr&&y.getState()===pt.EMPTY)return null;if(y.getState()!==pt.LOADED)continue;let b=c.getOrigin(d),x=ie(c.getTileSize(d)),f=c.getResolution(d),M=Math.floor(g*((s[0]-b[0])/f-p[1]*x[0])),L=Math.floor(g*((b[1]-s[1])/f-p[2]*x[1])),_=Math.round(g*h.getGutterForProjection(l.projection));return this.getImageData(y.getImage(),M+_,L+_)}return null}loadedTileCallback(t,e,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,e,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){let i=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,h=t.pixelRatio,c=this.getLayer(),g=c.getSource(),d=g.getRevision(),p=g.getTileGridForProjection(r),y=p.getZForResolution(o,g.zDirection),b=p.getResolution(y),x=t.extent,f=t.viewState.resolution,M=g.getTilePixelRatio(h),L=Math.round(At(x)/f*h),_=Math.round(me(x)/f*h),w=i.extent&&si(i.extent,r);w&&(x=Yi(x,si(i.extent,r)));let k=b*L/2/M,z=b*_/2/M,O=[a[0]-k,a[1]-z,a[0]+k,a[1]+z],C=p.getTileRangeForExtentAndZ(x,y),A={};A[y]={};let F=this.createLoadedTileFinder(g,r,A),S=this.tmpExtent,T=this.tmpTileRange_;this.newTiles_=!1;let D=l?cn(s.center,f,l,t.size):void 0;for(let G=C.minX;G<=C.maxX;++G)for(let W=C.minY;W<=C.maxY;++W){if(l&&!p.tileCoordIntersectsViewport([y,G,W],D))continue;let N=this.getTile(y,G,W,t);if(this.isDrawableTile(N)){let V=Mt(this);if(N.getState()==pt.LOADED){A[y][N.tileCoord.toString()]=N;let H=N.inTransition(V);H&&i.opacity!==1&&(N.endTransition(V),H=!1),!this.newTiles_&&(H||!this.renderedTiles.includes(N))&&(this.newTiles_=!0)}if(N.getAlpha(V,t.time)===1)continue}let B=p.getTileCoordChildTileRange(N.tileCoord,T,S),X=!1;B&&(X=F(y+1,B)),X||p.forEachTileCoordParentTileRange(N.tileCoord,F,T,S)}let P=b/o*h/M;be(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,l,-L/2,-_/2);let m=rn(this.pixelTransform);this.useContainer(e,m,this.getBackground(t));let u=this.context,v=u.canvas;Is(this.inversePixelTransform,this.pixelTransform),be(this.tempTransform,L/2,_/2,P,P,0,-L/2,-_/2),v.width!=L||v.height!=_?(v.width=L,v.height=_):this.containerReused||u.clearRect(0,0,L,_),w&&this.clipUnrotated(u,t,w),g.getInterpolate()||(u.imageSmoothingEnabled=!1),this.preRender(u,t),this.renderedTiles.length=0;let I=Object.keys(A).map(Number);I.sort(qe);let E,R,j;i.opacity===1&&(!this.containerReused||g.getOpaque(t.viewState.projection))?I=I.reverse():(E=[],R=[]);for(let G=I.length-1;G>=0;--G){let W=I[G],N=g.getTilePixelSize(W,h,r),X=p.getResolution(W)/b,V=N[0]*X*P,H=N[1]*X*P,K=p.getTileCoordForCoordAndZ(Xe(O),W),U=p.getTileCoordExtent(K),Y=Wt(this.tempTransform,[M*(U[0]-O[0])/b,M*(O[3]-U[3])/b]),Z=M*g.getGutterForProjection(r),q=A[W];for(let J in q){let Q=q[J],$=Q.tileCoord,tt=K[1]-$[1],it=Math.round(Y[0]-(tt-1)*V),et=K[2]-$[2],st=Math.round(Y[1]-(et-1)*H),rt=Math.round(Y[0]-tt*V),nt=Math.round(Y[1]-et*H),ot=it-rt,at=st-nt,ct=y===W,ht=ct&&Q.getAlpha(Mt(this),t.time)!==1,lt=!1;if(!ht)if(E){j=[rt,nt,rt+ot,nt,rt+ot,nt+at,rt,nt+at];for(let yt=0,Et=E.length;yt<Et;++yt)if(y!==W&&W<R[yt]){let dt=E[yt];Vt([rt,nt,rt+ot,nt+at],[dt[0],dt[3],dt[4],dt[7]])&&(lt||(u.save(),lt=!0),u.beginPath(),u.moveTo(j[0],j[1]),u.lineTo(j[2],j[3]),u.lineTo(j[4],j[5]),u.lineTo(j[6],j[7]),u.moveTo(dt[6],dt[7]),u.lineTo(dt[4],dt[5]),u.lineTo(dt[2],dt[3]),u.lineTo(dt[0],dt[1]),u.clip())}E.push(j),R.push(W)}else u.clearRect(rt,nt,ot,at);this.drawTileImage(Q,t,rt,nt,ot,at,Z,ct),E&&!ht?(lt&&u.restore(),this.renderedTiles.unshift(Q)):this.renderedTiles.push(Q),this.updateUsedTiles(t.usedTiles,g,Q)}}return this.renderedRevision=d,this.renderedResolution=b,this.extentChanged=!this.renderedExtent_||!Li(this.renderedExtent_,O),this.renderedExtent_=O,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(t,g,p,h,r,x,y,c.getPreload()),this.scheduleExpireCache(t,g),this.postRender(u,t),i.extent&&u.restore(),u.imageSmoothingEnabled=!0,m!==v.style.transform&&(v.style.transform=m),this.container}drawTileImage(t,e,i,s,r,o,a,l){let h=this.getTileImage(t);if(!h)return;let c=Mt(this),g=e.layerStatesArray[e.layerIndex],d=g.opacity*(l?t.getAlpha(c,e.time):1),p=d!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,s,r,o),p&&this.context.restore(),d!==g.opacity?e.animate=!0:l&&t.endTransition(c)}getImage(){let t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){let i=function(s,r,o){let a=Mt(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){let s=Mt(e);s in t||(t[s]={}),t[s][i.getKey()]=!0}manageTilePyramid(t,e,i,s,r,o,a,l,h){let c=Mt(e);c in t.wantedTiles||(t.wantedTiles[c]={});let g=t.wantedTiles[c],d=t.tileQueue,p=i.getMinZoom(),y=t.viewState.rotation,b=y?cn(t.viewState.center,t.viewState.resolution,y,t.size):void 0,x=0,f,M,L,_,w,k;for(k=p;k<=a;++k)for(M=i.getTileRangeForExtentAndZ(o,k,M),L=i.getResolution(k),_=M.minX;_<=M.maxX;++_)for(w=M.minY;w<=M.maxY;++w)y&&!i.tileCoordIntersectsViewport([k,_,w],b)||(a-k<=l?(++x,f=e.getTile(k,_,w,s,r),f.getState()==pt.IDLE&&(g[f.getKey()]=!0,d.isKeyQueued(f.getKey())||d.enqueue([f,c,i.getTileCoordCenter(f.tileCoord),L])),h!==void 0&&h(f)):e.useTile(k,_,w,r));e.updateCacheSize(x,r)}},pu=Tl;var Al=class extends uu{constructor(t){super(t)}createRenderer(){return new pu(this)}},Rr=Al;var Dl=class n{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){let t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}},_e=Dl;function qn(n,t,e,i,s,r,o){let a,l,h=(e-t)/i;if(h===1)a=t;else if(h===2)a=t,l=s;else if(h!==0){let c=n[t],g=n[t+1],d=0,p=[0];for(let x=t+i;x<e;x+=i){let f=n[x],M=n[x+1];d+=Math.sqrt((f-c)*(f-c)+(M-g)*(M-g)),p.push(d),c=f,g=M}let y=s*d,b=Kh(p,y);b<0?(l=(y-p[-b-2])/(p[-b-1]-p[-b-2]),a=t+(-b-2)*i):a=t+b*i}o=o>1?o:2,r=r||new Array(o);for(let c=0;c<o;++c)r[c]=a===void 0?NaN:l===void 0?n[a+c]:ae(n[a+c],n[a+i+c],l);return r}function Kn(n,t,e,i,s,r){if(e==t)return null;let o;if(s<n[t+i-1])return r?(o=n.slice(t,t+i),o[i-1]=s,o):null;if(n[e-1]<s)return r?(o=n.slice(e-i,e),o[i-1]=s,o):null;if(s==n[t+i-1])return n.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){let d=a+l>>1;s<n[(d+1)*i-1]?l=d:a=d+1}let h=n[a*i-1];if(s==h)return n.slice((a-1)*i,(a-1)*i+i);let c=n[(a+1)*i-1],g=(s-h)/(c-h);o=[];for(let d=0;d<i-1;++d)o.push(ae(n[(a-1)*i+d],n[a*i+d],g));return o.push(s),o}function fu(n,t,e,i,s,r,o){if(o)return Kn(n,t,e[e.length-1],i,s,r);let a;if(s<n[i-1])return r?(a=n.slice(0,i),a[i-1]=s,a):null;if(n[n.length-1]<s)return r?(a=n.slice(n.length-i),a[i-1]=s,a):null;for(let l=0,h=e.length;l<h;++l){let c=e[l];if(t!=c){if(s<n[t+i-1])return null;if(s<=n[c-1])return Kn(n,t,c,i,s,!1);t=c}}return null}function $n(n,t,e,i){let s=n[t],r=n[t+1],o=0;for(let a=t+i;a<e;a+=i){let l=n[a],h=n[a+1];o+=Math.sqrt((l-s)*(l-s)+(h-r)*(h-r)),s=l,r=h}return o}var Ll=class n extends Ee{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?ye(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){let t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Me(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))}forEachSegment(t){return _n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return $n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){let e=[];return e.length=br(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new n(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return _r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cs(this.flatCoordinates,0,t,this.stride),this.changed()}},Or=Ll;var Il=class n{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){let t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}},De=Il;var kl=class n{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ie(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ft()}getImage(t){return ft()}getHitDetectionImage(){return ft()}getPixelRatio(t){return 1}getImageState(){return ft()}getImageSize(){return ft()}getOrigin(){return ft()}getSize(){return ft()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ie(t)}listenImageChange(t){ft()}load(){ft()}unlistenImageChange(t){ft()}},Jn=kl;function Le(n){return Array.isArray(n)?Ro(n):n}var Rl=class n extends Jn{constructor(t){let e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){let t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){let t=this.size_;if(!t)return null;let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){let i=this.renderOptions_,s=Gt(i.size*t,i.size*t);this.draw_(i,s,t),e=s.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Ot.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){let k=s;s=r,r=k}let o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),h=Math.sqrt(r*r-l*l),c=s-h,g=Math.sqrt(l*l+c*c),d=g/l;if(t==="miter"&&d<=i)return d*e;let p=e/2/d,y=e/2*(c/g),x=Math.sqrt((s+p)*(s+p)+y*y)-s;if(this.radius2_===void 0||t==="bevel")return x*2;let f=s*Math.sin(a),M=Math.sqrt(s*s-f*f),L=r-M,w=Math.sqrt(f*f+L*L)/f;if(w<=i){let k=w*e/2-r-s;return 2*Math.max(x,k)}return x*2}createRenderOptions(){let t=ui,e=0,i=null,s=0,r,o=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=Oi),r=Le(r),o=this.stroke_.getWidth(),o===void 0&&(o=zi),i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=ui),e=this.stroke_.getMiterLimit(),e===void 0&&(e=Ri));let a=this.calculateLineJoinSize_(t,o,e),l=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*l+a);return{strokeStyle:r,strokeWidth:o,size:h,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let s=this.fill_.getColor();s===null&&(s=$t),e.fillStyle=Le(s),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=as(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){let s=Gt(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{let s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);let r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){let l=r+a*o,h=a%2===0?i:s;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=$t,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},Qn=Rl;var Ol=class n extends Qn{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){let t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}},to=Ol;var eo=class n{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=gu,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new n({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=gu,this.geometry_=t}setZIndex(t){this.zIndex_=t}};function mu(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(gt(typeof n.getZIndex=="function",41),e=[n]),t=function(){return e}}return t}var Fl=null;function xu(n,t){if(!Fl){let e=new _e({color:"rgba(255,255,255,0.4)"}),i=new De({color:"#3399CC",width:1.25});Fl=[new eo({image:new to({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return Fl}function gu(n){return n.getGeometry()}var we=eo;var _f="#333",zl=class n{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=ie(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new _e({color:_f}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){let t=this.getScale();return new n({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ie(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}},ss=zl;var Cu=Jt(yl(),1);var Fr=null,jl=class extends Xi{constructor(t,e,i,s,r,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ot.LOADED){Fr||(Fr=Gt(1,1,void 0,{willReadFrequently:!0})),Fr.drawImage(this.image_,0,0);try{Fr.getImageData(0,0,1,1),this.tainted_=!1}catch{Fr=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ut.CHANGE)}handleImageError_(){this.imageState_=Ot.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ot.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let t=this.size_[0],e=this.size_[1],i=Gt(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ot.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ot.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=zn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Ot.LOADED)return;let e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);let s=i.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=un(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function yu(n,t,e,i,s,r){let o=js.get(t,i,r);return o||(o=new jl(n,t,e,i,s,r),js.set(t,i,r,o)),o}function bu(n,t,e,i){return e!==void 0&&i!==void 0?[e/n,i/t]:e!==void 0?e/n:i!==void 0?i/t:1}var Nl=class n extends Jn{constructor(t){t=t||{};let e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;let o=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let a=t.src;gt(!(a!==void 0&&o),4),gt(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||Mt(o)),gt(a!==void 0&&a.length>0,6),gt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),69);let l=t.src!==void 0?Ot.IDLE:Ot.LOADED;if(this.color_=t.color!==void 0?as(t.color):null,this.iconImage_=yu(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let h,c;if(t.size)[h,c]=t.size;else{let g=this.getImage(1);if(g instanceof HTMLCanvasElement||g.src&&g.complete)h=g.width,c=g.height;else{this.initialOptions_=t;let d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;let p=this.iconImage_.getSize();this.setScale(bu(p[0],p[1],t.width,t.height))};this.listenImageChange(d);return}}h!==void 0&&this.setScale(bu(h,c,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){let e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){let t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(ut.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ut.CHANGE,t)}},ji=Nl;function Bl(n){return new we({fill:zr(n,""),stroke:jr(n,""),text:wf(n),image:Sf(n)})}function zr(n,t){let e=n[t+"fill-color"];if(e)return e==="none"?null:new _e({color:e})}function jr(n,t){let e=n[t+"stroke-width"],i=n[t+"stroke-color"];if(!(!e&&!i))return new De({width:e,color:i,lineCap:n[t+"stroke-line-cap"],lineJoin:n[t+"stroke-line-join"],lineDash:n[t+"stroke-line-dash"],lineDashOffset:n[t+"stroke-line-dash-offset"],miterLimit:n[t+"stroke-miter-limit"]})}function wf(n){let t=n["text-value"];return t?new ss({text:t,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],repeat:n["text-repeat"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:zr(n,"text-"),backgroundFill:zr(n,"text-background-"),stroke:jr(n,"text-"),backgroundStroke:jr(n,"text-background-")}):void 0}function Sf(n){let t=n["icon-src"],e=n["icon-img"];if(t||e)return new ji({src:t,img:e,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],width:n["icon-width"],height:n["icon-height"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});let i=n["shape-points"];if(i){let r="shape-";return new Qn({points:i,fill:zr(n,r),stroke:jr(n,r),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}let s=n["circle-radius"];if(s){let r="circle-";return new to({radius:s,fill:zr(n,r),stroke:jr(n,r),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}var vu={RENDER_ORDER:"renderOrder"},Gl=class extends ds{constructor(t){t=t||{};let e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(vu.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Cu.default(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(vu.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=xu;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof we)e=t;else if(Array.isArray(t)){let i=t.length,s=new Array(i);for(let r=0;r<i;++r){let o=t[r];o instanceof we?s[r]=o:s[r]=Bl(o)}e=s}else e=Bl(t);this.style_=e,this.styleFunction_=t===null?void 0:mu(this.style_),this.changed()}},_u=Gl;var Nr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Br=[Nr.FILL],bi=[Nr.STROKE],Ni=[Nr.BEGIN_PATH],Xl=[Nr.CLOSE_PATH],xt=Nr;var Wl=class{drawCustom(t,e,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}},io=Wl;var Vl=class extends io{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){let e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){let i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates,o=r.length;for(let a=0,l=t.length;a<l;a+=e)s[0]=t[a],s[1]=t[a+1],Vi(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,r,o){let a=this.coordinates,l=a.length,h=this.getBufferedMaxExtent();o&&(e+=s);let c=t[e],g=t[e+1],d=this.tmpCoordinate_,p=!0,y,b,x;for(y=e+s;y<i;y+=s)d[0]=t[y],d[1]=t[y+1],x=nn(h,d),x!==b?(p&&(a[l++]=c,a[l++]=g,p=!1),a[l++]=d[0],a[l++]=d[1]):x===Kt.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],p=!1):p=!0,c=d[0],g=d[1],b=x;return(r&&p||y===e+s)&&(a[l++]=c,a[l++]=g),l}drawCustomCoordinates_(t,e,i,s,r){for(let o=0,a=i.length;o<a;++o){let l=i[o],h=this.appendFlatLineCoordinates(t,e,l,s,!1,!1);r.push(h),e=l}return e}drawCustom(t,e,i,s){this.beginGeometry(t,e);let r=t.getType(),o=t.getStride(),a=this.coordinates.length,l,h,c,g,d;switch(r){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),g=[];let p=t.getEndss();d=0;for(let y=0,b=p.length;y<b;++y){let x=[];d=this.drawCustomCoordinates_(l,d,p[y],o,x),g.push(x)}this.instructions.push([xt.CUSTOM,a,g,t,i,vr]),this.hitDetectionInstructions.push([xt.CUSTOM,a,g,t,s||i,vr]);break;case"Polygon":case"MultiLineString":c=[],l=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),o,c),this.instructions.push([xt.CUSTOM,a,c,t,i,qi]),this.hitDetectionInstructions.push([xt.CUSTOM,a,c,t,s||i,qi]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([xt.CUSTOM,a,h,t,i,Ue]),this.hitDetectionInstructions.push([xt.CUSTOM,a,h,t,s||i,Ue]);break;case"MultiPoint":l=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(l,o),h>a&&(this.instructions.push([xt.CUSTOM,a,h,t,i,Ue]),this.hitDetectionInstructions.push([xt.CUSTOM,a,h,t,s||i,Ue]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),h=this.coordinates.length,this.instructions.push([xt.CUSTOM,a,h,t,i]),this.hitDetectionInstructions.push([xt.CUSTOM,a,h,t,s||i]);break;default:}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[xt.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[xt.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t=this.hitDetectionInstructions;t.reverse();let e,i=t.length,s,r,o=-1;for(e=0;e<i;++e)s=t[e],r=s[0],r==xt.END_GEOMETRY?o=e:r==xt.BEGIN_GEOMETRY&&(s[2]=e,qh(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){let i=this.state;if(t){let s=t.getColor();i.fillStyle=Le(s||$t)}else i.fillStyle=void 0;if(e){let s=e.getColor();i.strokeStyle=Le(s||Oi);let r=e.getLineCap();i.lineCap=r!==void 0?r:ps;let o=e.getLineDash();i.lineDash=o?o.slice():Te;let a=e.getLineDashOffset();i.lineDashOffset=a||Ae;let l=e.getLineJoin();i.lineJoin=l!==void 0?l:ui;let h=e.getWidth();i.lineWidth=h!==void 0?h:zi;let c=e.getMiterLimit();i.miterLimit=c!==void 0?c:Ri,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){let e=t.fillStyle,i=[xt.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[xt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){let i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){let i=t.strokeStyle,s=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||r!=t.currentLineDash&&!fe(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let e=[xt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=on(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;ks(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},vi=Vl;var Yl=class extends vi{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([xt.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([xt.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){let i=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},wu=Yl;var Ul=class extends vi{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){let r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),a=[xt.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){let i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Te,Ae],Ni);let o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(bi),this.endGeometry(e)}drawMultiLineString(t,e){let i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Te,Ae],Ni);let o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride(),h=0;for(let c=0,g=o.length;c<g;++c)h=this.drawFlatCoordinates_(a,h,o[c],l);this.hitDetectionInstructions.push(bi),this.endGeometry(e)}finish(){let t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(bi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(bi),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ni)}},Su=Ul;var Hl=class extends vi{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){let r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=i.length;this.instructions.push(Ni),this.hitDetectionInstructions.push(Ni);for(let h=0;h<l;++h){let c=i[h],g=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,c,s,!0,!a),p=[xt.MOVE_TO_LINE_TO,g,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(Xl),this.hitDetectionInstructions.push(Xl)),e=c}return o&&(this.instructions.push(Br),this.hitDetectionInstructions.push(Br)),a&&(this.instructions.push(bi),this.hitDetectionInstructions.push(bi)),e}drawCircle(t,e){let i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,$t]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Te,Ae]);let o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);let h=[xt.CIRCLE,l];this.instructions.push(Ni,h),this.hitDetectionInstructions.push(Ni,h),i.fillStyle!==void 0&&(this.instructions.push(Br),this.hitDetectionInstructions.push(Br)),i.strokeStyle!==void 0&&(this.instructions.push(bi),this.hitDetectionInstructions.push(bi)),this.endGeometry(e)}drawPolygon(t,e){let i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,$t]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Te,Ae]);let o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e){let i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,$t]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Te,Ae]);let o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride(),h=0;for(let c=0,g=o.length;c<g;++c)h=this.drawFlatCoordinatess_(a,h,o[c],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(t!==0){let e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=Ki(e[i],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}},Zl=Hl;function Mu(n,t,e,i,s){let r=[],o=e,a=0,l=t.slice(e,2);for(;a<n&&o+s<i;){let[h,c]=l.slice(-2),g=t[o+s],d=t[o+s+1],p=Math.sqrt((g-h)*(g-h)+(d-c)*(d-c));if(a+=p,a>=n){let y=(n-a+p)/p,b=ae(h,g,y),x=ae(c,d,y);l.push(b,x),r.push(l),l=[b,x],a==n&&(o+=s),a=0}else if(a<n)l.push(t[o+s],t[o+s+1]),o+=s;else{let y=p-a,b=ae(h,g,y/p),x=ae(c,d,y/p);l.push(b,x),r.push(l),l=[b,x],a=0,o+=s}}return a>0&&r.push(l),r}function Eu(n,t,e,i,s){let r=e,o=e,a=0,l=0,h=e,c,g,d,p,y,b,x,f,M,L;for(g=e;g<i;g+=s){let _=t[g],w=t[g+1];y!==void 0&&(M=_-y,L=w-b,p=Math.sqrt(M*M+L*L),x!==void 0&&(l+=d,c=Math.acos((x*M+f*L)/(d*p)),c>n&&(l>a&&(a=l,r=h,o=g),l=0,h=g-s)),d=p,x=M,f=L),y=_,b=w}return l+=p,l>a?[h,g]:[r,o]}var Gr={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Kl=class extends vi{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[$t]={fillStyle:$t},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){let i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;let o=this.coordinates,a=o.length,l=t.getType(),h=null,c=t.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Vt(this.getBufferedMaxExtent(),t.getExtent()))return;let g;if(h=t.getFlatCoordinates(),l=="LineString")g=[h.length];else if(l=="MultiLineString")g=t.getEnds();else if(l=="Polygon")g=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){let b=t.getEndss();g=[];for(let x=0,f=b.length;x<f;++x)g.push(b[x][0])}this.beginGeometry(t,e);let d=r.repeat,p=d?void 0:r.textAlign,y=0;for(let b=0,x=g.length;b<x;++b){let f;d?f=Mu(d*this.resolution,h,y,g[b],c):f=[h.slice(y,g[b])];for(let M=0,L=f.length;M<L;++M){let _=f[M],w=0,k=_.length;if(p==null){let O=Eu(r.maxAngle,_,0,_.length,2);w=O[0],k=O[1]}for(let O=w;O<k;O+=c)o.push(_[O],_[O+1]);let z=o.length;y=g[b],this.drawChars_(a,z),a=z}}this.endGeometry(e)}else{let g=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),r.overflow||g.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":let f=t.getFlatInteriorPoints();h=[];for(let M=0,L=f.length;M<L;M+=3)r.overflow||g.push(f[M+2]/this.resolution),h.push(f[M],f[M+1]);if(h.length===0)return;c=2;break;default:}let d=this.appendFlatPointCoordinates(h,c);if(d===a)return;if(g&&(d-a)/2!==h.length/c){let f=a/2;g=g.filter((M,L)=>{let _=o[(f+L)*2]===h[L*c]&&o[(f+L)*2+1]===h[L*c+1];return _||--f,_})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let p=r.padding;if(p!=Fi&&(r.scale[0]<0||r.scale[1]<0)){let f=r.padding[0],M=r.padding[1],L=r.padding[2],_=r.padding[3];r.scale[0]<0&&(M=-M,_=-_),r.scale[1]<0&&(f=-f,L=-L),p=[f,M,L,_]}let y=this.pixelRatio;this.instructions.push([xt.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,p==Fi?Fi:p.map(function(f){return f*y}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);let b=1/y,x=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=$t,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[b,b],NaN,void 0,this.declutterImageWithText_,p,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?$t:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),r.backgroundFill&&(this.state.fillStyle=x,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){let t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));let r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||Qi,justify:e.justify,textBaseline:e.textBaseline||fs,scale:e.scale});let o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){let i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();let l=this.pixelRatio,h=Gr[s.textBaseline],c=this.textOffsetY_*l,g=this.text_,d=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([xt.DRAW_CHARS,t,e,h,s.overflow,a,s.maxAngle,l,c,r,d*l,g,o,1]),this.hitDetectionInstructions.push([xt.DRAW_CHARS,t,e,h,s.overflow,a&&$t,s.maxAngle,1,c,r,d,g,o,1/l])}setTextStyle(t,e){let i,s,r;if(!t)this.text_="";else{let o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Le(o.getColor()||$t)):(s=null,this.textFillState_=s);let a=t.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);let y=a.getLineDash(),b=a.getLineDashOffset(),x=a.getWidth(),f=a.getMiterLimit();r.lineCap=a.getLineCap()||ps,r.lineDash=y?y.slice():Te,r.lineDashOffset=b===void 0?Ae:b,r.lineJoin=a.getLineJoin()||ui,r.lineWidth=x===void 0?zi:x,r.miterLimit=f===void 0?Ri:f,r.strokeStyle=Le(a.getColor()||Oi)}i=this.textState_;let l=t.getFont()||Tn;hd(l);let h=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||fs,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Fi,i.scale=h===void 0?[1,1]:h;let c=t.getOffsetX(),g=t.getOffsetY(),d=t.getRotateWithView(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=g===void 0?0:g,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=p===void 0?0:p,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:Mt(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+Mt(s.fillStyle):""}this.declutterImageWithText_=e}},Pu=Kl;var Mf={Circle:Zl,Default:vi,Image:wu,LineString:Su,Polygon:Zl,Text:Pu},ql=class{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){let t={};for(let e in this.buildersByZIndex_){t[e]=t[e]||{};let i=this.buildersByZIndex_[e];for(let s in i){let r=i[s].finish();t[e][s]=r}}return t}getBuilder(t,e){let i=t!==void 0?t.toString():"0",s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[e];if(r===void 0){let o=Mf[e];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=r}return r}},$l=ql;function Tu(n,t,e,i,s,r,o,a,l,h,c,g){let d=n[t],p=n[t+1],y=0,b=0,x=0,f=0;function M(){y=d,b=p,t+=i,d=n[t],p=n[t+1],f+=x,x=Math.sqrt((d-y)*(d-y)+(p-b)*(p-b))}do M();while(t<e-i&&f+x<r);let L=x===0?0:(r-f)/x,_=ae(y,d,L),w=ae(b,p,L),k=t-i,z=f,O=r+a*l(h,s,c);for(;t<e-i&&f+x<O;)M();L=x===0?0:(O-f)/x;let C=ae(y,d,L),A=ae(b,p,L),F;if(g){let m=[_,w,C,A];vn(m,0,4,2,g,m,m),F=m[0]>m[2]}else F=_>C;let S=Math.PI,T=[],D=k+i===t;t=k,x=0,f=z,d=n[t],p=n[t+1];let P;if(D){M(),P=Math.atan2(p-b,d-y),F&&(P+=P>0?-S:S);let m=(C+_)/2,u=(A+w)/2;return T[0]=[m,u,(O-r)/2,P,s],T}s=s.replace(/\n/g," ");for(let m=0,u=s.length;m<u;){M();let v=Math.atan2(p-b,d-y);if(F&&(v+=v>0?-S:S),P!==void 0){let W=v-P;if(W+=W>S?-2*S:W<-S?2*S:0,Math.abs(W)>o)return null}P=v;let I=m,E=0;for(;m<u;++m){let W=F?u-m-1:m,N=a*l(h,s[W],c);if(t+i<e&&f+x<r+E+N/2)break;E+=N}if(m===I)continue;let R=F?s.substring(u-I,u-m):s.substring(I,m);L=x===0?0:(r+E/2-f)/x;let j=ae(y,d,L),G=ae(b,p,L);T.push([j,G,E/2,v,R]),r+=E}return T}var $s=Ut(),rs=[],Bi=[],Gi=[],ns=[];function Au(n){return n[3].declutterBox}var Du=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function Jl(n,t){return t==="start"?t=Du.test(n)?"right":"left":t==="end"&&(t=Du.test(n)?"left":"right"),Gr[t]}function Ef(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}var Ql=class{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=ge(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){let r=t+e+i+s;if(this.labels_[r])return this.labels_[r];let o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],h=this.pixelRatio,c=[l.scale[0]*h,l.scale[1]*h],g=Array.isArray(t),d=l.justify?Gr[l.justify]:Jl(Array.isArray(t)?t[0]:t,l.textAlign||Qi),p=s&&o.lineWidth?o.lineWidth:0,y=g?t:t.split(`
`).reduce(Ef,[]),{width:b,height:x,widths:f,heights:M,lineWidths:L}=dd(l,y),_=b+p,w=[],k=(_+2)*c[0],z=(x+p)*c[1],O={width:k<0?Math.floor(k):Math.ceil(k),height:z<0?Math.floor(z):Math.ceil(z),contextInstructions:w};(c[0]!=1||c[1]!=1)&&w.push("scale",c),s&&(w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",p),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit),w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset)),i&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");let C=.5-d,A=d*_+C*p,F=[],S=[],T=0,D=0,P=0,m=0,u;for(let v=0,I=y.length;v<I;v+=2){let E=y[v];if(E===`
`){D+=T,T=0,A=d*_+C*p,++m;continue}let R=y[v+1]||l.font;R!==u&&(s&&F.push("font",R),i&&S.push("font",R),u=R),T=Math.max(T,M[P]);let j=[E,A+C*f[P]+d*(f[P]-L[m]),.5*(p+T)+D];A+=f[P],s&&F.push("strokeText",j),i&&S.push("fillText",j),++P}return Array.prototype.push.apply(w,F),Array.prototype.push.apply(w,S),this.labels_[r]=O,O}replayTextBackground_(t,e,i,s,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,r,o,a,l,h,c,g,d,p,y,b,x){a*=d[0],l*=d[1];let f=i-a,M=s-l,L=r+h>t?t-h:r,_=o+c>e?e-c:o,w=y[3]+L*d[0]+y[1],k=y[0]+_*d[1]+y[2],z=f-y[3],O=M-y[0];(b||g!==0)&&(rs[0]=z,ns[0]=z,rs[1]=O,Bi[1]=O,Bi[0]=z+w,Gi[0]=Bi[0],Gi[1]=O+k,ns[1]=Gi[1]);let C;return g!==0?(C=be(ge(),i,s,1,1,g,-i,-s),Wt(C,rs),Wt(C,Bi),Wt(C,Gi),Wt(C,ns),ze(Math.min(rs[0],Bi[0],Gi[0],ns[0]),Math.min(rs[1],Bi[1],Gi[1],ns[1]),Math.max(rs[0],Bi[0],Gi[0],ns[0]),Math.max(rs[1],Bi[1],Gi[1],ns[1]),$s)):ze(Math.min(z,z+w),Math.min(O,O+k),Math.max(z,z+w),Math.max(O,O+k),$s),p&&(f=Math.round(f),M=Math.round(M)),{drawImageX:f,drawImageY:M,drawImageW:L,drawImageH:_,originX:h,originY:c,declutterBox:{minX:$s[0],minY:$s[1],maxX:$s[2],maxY:$s[3],value:x},canvasTransform:C,scale:d}}replayImageOrLabel_(t,e,i,s,r,o,a){let l=!!(o||a),h=s.declutterBox,c=t.canvas,g=a?a[2]*s.scale[0]/2:0;return h.minX-g<=c.width/e&&h.maxX+g>=0&&h.minY-g<=c.height/e&&h.maxY+g>=0&&(l&&this.replayTextBackground_(t,rs,Bi,Gi,ns,o,a),ud(t,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){let e=Wt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){let r=this.textStates[e],o=this.createLabel(t,e,s,i),a=this.strokeStates[i],l=this.pixelRatio,h=Jl(Array.isArray(t)?t[0]:t,r.textAlign||Qi),c=Gr[r.textBaseline||fs],g=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*r.scale[0],p=h*d+2*(.5-h)*g,y=c*o.height/l+2*(.5-c)*g;return{label:o,anchorX:p,anchorY:y}}execute_(t,e,i,s,r,o,a,l){let h;this.pixelCoordinates_&&fe(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Ye(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),rc(this.renderedTransform_,i));let c=0,g=s.length,d=0,p,y,b,x,f,M,L,_,w,k,z,O,C=0,A=0,F=null,S=null,T=this.coordinateCache_,D=this.viewRotation_,P=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,m={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:D},u=this.instructions!=s||this.overlaps?0:200,v,I,E,R;for(;c<g;){let j=s[c];switch(j[0]){case xt.BEGIN_GEOMETRY:v=j[1],R=j[3],v.getGeometry()?a!==void 0&&!Vt(a,R.getExtent())?c=j[2]+1:++c:c=j[2];break;case xt.BEGIN_PATH:C>u&&(this.fill_(t),C=0),A>u&&(t.stroke(),A=0),!C&&!A&&(t.beginPath(),x=NaN,f=NaN),++c;break;case xt.CIRCLE:d=j[1];let W=h[d],N=h[d+1],B=h[d+2],X=h[d+3],V=B-W,H=X-N,K=Math.sqrt(V*V+H*H);t.moveTo(W+K,N),t.arc(W,N,K,0,2*Math.PI,!0),++c;break;case xt.CLOSE_PATH:t.closePath(),++c;break;case xt.CUSTOM:d=j[1],p=j[2];let U=j[3],Y=j[4],Z=j.length==6?j[5]:void 0;m.geometry=U,m.feature=v,c in T||(T[c]=[]);let q=T[c];Z?Z(h,d,p,2,q):(q[0]=h[d],q[1]=h[d+1],q.length=2),Y(q,m),++c;break;case xt.DRAW_IMAGE:d=j[1],p=j[2],_=j[3],y=j[4],b=j[5];let J=j[6],Q=j[7],$=j[8],tt=j[9],it=j[10],et=j[11],st=j[12],rt=j[13],nt=j[14],ot=j[15];if(!_&&j.length>=20){w=j[19],k=j[20],z=j[21],O=j[22];let ke=this.drawLabelWithPointPlacement_(w,k,z,O);_=ke.label,j[3]=_;let vs=j[23];y=(ke.anchorX-vs)*this.pixelRatio,j[4]=y;let Ne=j[24];b=(ke.anchorY-Ne)*this.pixelRatio,j[5]=b,J=_.height,j[6]=J,rt=_.width,j[13]=rt}let at;j.length>25&&(at=j[25]);let ct,ht,lt;j.length>17?(ct=j[16],ht=j[17],lt=j[18]):(ct=Fi,ht=!1,lt=!1),it&&P?et+=D:!it&&!P&&(et-=D);let yt=0;for(;d<p;d+=2){if(at&&at[yt++]<rt/this.pixelRatio)continue;let ke=this.calculateImageOrLabelDimensions_(_.width,_.height,h[d],h[d+1],rt,J,y,b,$,tt,et,st,r,ct,ht||lt,v),vs=[t,e,_,ke,Q,ht?F:null,lt?S:null];if(l){if(nt==="none")continue;if(nt==="obstacle"){l.insert(ke.declutterBox);continue}else{let Ne,_i;if(ot){let Re=p-d;if(!ot[Re]){ot[Re]=vs;continue}if(Ne=ot[Re],delete ot[Re],_i=Au(Ne),l.collides(_i))continue}if(l.collides(ke.declutterBox))continue;Ne&&(l.insert(_i),this.replayImageOrLabel_.apply(this,Ne)),l.insert(ke.declutterBox)}}this.replayImageOrLabel_.apply(this,vs)}++c;break;case xt.DRAW_CHARS:let Et=j[1],dt=j[2],St=j[3],mt=j[4];O=j[5];let Pt=j[6],Yt=j[7],xe=j[8];z=j[9];let se=j[10];w=j[11],k=j[12];let Ie=[j[13],j[13]],vo=this.textStates[k],tr=vo.font,er=[vo.scale[0]*Yt,vo.scale[1]*Yt],ir;tr in this.widths_?ir=this.widths_[tr]:(ir={},this.widths_[tr]=ir);let _h=$n(h,Et,dt,2),wh=Math.abs(er[0])*wa(tr,w,ir);if(mt||wh<=_h){let ke=this.textStates[k].textAlign,vs=(_h-wh)*Jl(w,ke),Ne=Tu(h,Et,dt,2,w,vs,Pt,Math.abs(er[0]),wa,tr,ir,P?0:this.viewRotation_);t:if(Ne){let _i=[],Re,Zr,Kr,Se,Be;if(z)for(Re=0,Zr=Ne.length;Re<Zr;++Re){Be=Ne[Re],Kr=Be[4],Se=this.createLabel(Kr,k,"",z),y=Be[2]+(er[0]<0?-se:se),b=St*Se.height+(.5-St)*2*se*er[1]/er[0]-xe;let wi=this.calculateImageOrLabelDimensions_(Se.width,Se.height,Be[0],Be[1],Se.width,Se.height,y,b,0,0,Be[3],Ie,!1,Fi,!1,v);if(l&&l.collides(wi.declutterBox))break t;_i.push([t,e,Se,wi,1,null,null])}if(O)for(Re=0,Zr=Ne.length;Re<Zr;++Re){Be=Ne[Re],Kr=Be[4],Se=this.createLabel(Kr,k,O,""),y=Be[2],b=St*Se.height-xe;let wi=this.calculateImageOrLabelDimensions_(Se.width,Se.height,Be[0],Be[1],Se.width,Se.height,y,b,0,0,Be[3],Ie,!1,Fi,!1,v);if(l&&l.collides(wi.declutterBox))break t;_i.push([t,e,Se,wi,1,null,null])}l&&l.load(_i.map(Au));for(let wi=0,Sp=_i.length;wi<Sp;++wi)this.replayImageOrLabel_.apply(this,_i[wi])}}++c;break;case xt.END_GEOMETRY:if(o!==void 0){v=j[1];let ke=o(v,R);if(ke)return ke}++c;break;case xt.FILL:u?C++:this.fill_(t),++c;break;case xt.MOVE_TO_LINE_TO:for(d=j[1],p=j[2],I=h[d],E=h[d+1],M=I+.5|0,L=E+.5|0,(M!==x||L!==f)&&(t.moveTo(I,E),x=M,f=L),d+=2;d<p;d+=2)I=h[d],E=h[d+1],M=I+.5|0,L=E+.5|0,(d==p-2||M!==x||L!==f)&&(t.lineTo(I,E),x=M,f=L);++c;break;case xt.SET_FILL_STYLE:F=j,this.alignFill_=j[2],C&&(this.fill_(t),C=0,A&&(t.stroke(),A=0)),t.fillStyle=j[1],++c;break;case xt.SET_STROKE_STYLE:S=j,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,j),++c;break;case xt.STROKE:u?A++:t.stroke(),++c;break;default:++c;break}}C&&this.fill_(t),A&&t.stroke()}execute(t,e,i,s,r,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,i,s,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,s,r)}},Lu=Ql;var th=["Polygon","Circle","LineString","Image","Text","Default"],ih=class{constructor(t,e,i,s,r,o){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ge(),this.createExecutors_(r)}clip(t,e){let i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(let e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);let s=t[e];for(let r in s){let o=s[r];i[r]=new Lu(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(let e in this.executorsByZIndex_){let i=this.executorsByZIndex_[e];for(let s=0,r=t.length;s<r;++s)if(t[s]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,r,o){s=Math.round(s);let a=s*2+1,l=be(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Gt(a,a,void 0,{willReadFrequently:!0}));let c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):h||c.clearRect(0,0,a,a);let g;this.renderBuffer_!==void 0&&(g=Ut(),os(g,t),ks(g,e*(this.renderBuffer_+s),g));let d=Pf(s),p;function y(w,k){let z=c.getImageData(0,0,a,a).data;for(let O=0,C=d.length;O<C;O++)if(z[d[O]]>0){if(!o||p!=="Image"&&p!=="Text"||o.includes(w)){let A=(d[O]-3)/4,F=s-A%a,S=s-(A/a|0),T=r(w,k,F*F+S*S);if(T)return T}c.clearRect(0,0,a,a);break}}let b=Object.keys(this.executorsByZIndex_).map(Number);b.sort(qe);let x,f,M,L,_;for(x=b.length-1;x>=0;--x){let w=b[x].toString();for(M=this.executorsByZIndex_[w],f=th.length-1;f>=0;--f)if(p=th[f],L=M[p],L!==void 0&&(_=L.executeHitDetection(c,l,i,y,g),_))return _}}getClipCoords(t){let e=this.maxExtent_;if(!e)return null;let i=e[0],s=e[1],r=e[2],o=e[3],a=[i,s,i,o,r,o,r,s];return Ye(a,0,8,2,t,a),a}isEmpty(){return Je(this.executorsByZIndex_)}execute(t,e,i,s,r,o,a){let l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(qe),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||th;let h,c,g,d,p,y;for(a&&l.reverse(),h=0,c=l.length;h<c;++h){let b=l[h].toString();for(p=this.executorsByZIndex_[b],g=0,d=o.length;g<d;++g){let x=o[g];y=p[x],y!==void 0&&y.execute(t,e,i,s,r,a)}}this.maxExtent_&&t.restore()}},eh={};function Pf(n){if(eh[n]!==void 0)return eh[n];let t=n*2+1,e=n*n,i=new Array(e+1);for(let r=0;r<=n;++r)for(let o=0;o<=n;++o){let a=r*r+o*o;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+r)*t+(n+o))*4+3),r>0&&l.push(((n-r)*t+(n+o))*4+3),o>0&&(l.push(((n+r)*t+(n-o))*4+3),r>0&&l.push(((n-r)*t+(n-o))*4+3))}let s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return eh[n]=s,s}var sh=ih;var rh=class extends io{constructor(t,e,i,s,r,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?dn(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ge()}drawImages_(t,e,i,s){if(!this.image_)return;let r=Ye(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,g=r.length;c<g;c+=2){let d=r[c]-this.imageAnchorX_,p=r[c+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let y=d+this.imageAnchorX_,b=p+this.imageAnchorY_;be(a,y,b,1,1,h,-y,-b),o.setTransform.apply(o,a),o.translate(y,b),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let r=Ye(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=s){let l=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,h-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,h),this.textFillState_&&o.fillText(this.text_,l,h))}}moveToLineTo_(t,e,i,s,r){let o=this.context_,a=Ye(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let h=2;h<l;h+=2)o.lineTo(a[h],a[h+1]);return r&&o.closePath(),i}drawRings_(t,e,i,s){for(let r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=Gc(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,e){let i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){let e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){let e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getExtent();if(Vt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let i=this.context_,s=t.getFlatCoordinates(),r=0,o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,h=o.length;l<h;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(this.text_!==""){let i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getOrientedFlatCoordinates(),s=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=r.length;a<l;++a){let h=r[a];s=this.drawRings_(i,s,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){let e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),fe(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:Qi;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{let i=t.getColor();this.fillState_={fillStyle:Le(i||$t)}}if(!e)this.strokeState_=null;else{let i=e.getColor(),s=e.getLineCap(),r=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),c=r||Te;this.strokeState_={lineCap:s!==void 0?s:ps,lineDash:this.pixelRatio_===1?c:c.map(g=>g*this.pixelRatio_),lineDashOffset:(o||Ae)*this.pixelRatio_,lineJoin:a!==void 0?a:ui,lineWidth:(l!==void 0?l:zi)*this.pixelRatio_,miterLimit:h!==void 0?h:Ri,strokeStyle:Le(i||Oi)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}let i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{let e=t.getFill();if(!e)this.textFillState_=null;else{let p=e.getColor();this.textFillState_={fillStyle:Le(p||$t)}}let i=t.getStroke();if(!i)this.textStrokeState_=null;else{let p=i.getColor(),y=i.getLineCap(),b=i.getLineDash(),x=i.getLineDashOffset(),f=i.getLineJoin(),M=i.getWidth(),L=i.getMiterLimit();this.textStrokeState_={lineCap:y!==void 0?y:ps,lineDash:b||Te,lineDashOffset:x||Ae,lineJoin:f!==void 0?f:ui,lineWidth:M!==void 0?M:zi,miterLimit:L!==void 0?L:Ri,strokeStyle:Le(p||Oi)}}let s=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),c=t.getText(),g=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:s!==void 0?s:Tn,textAlign:g!==void 0?g:Qi,textBaseline:d!==void 0?d:fs},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,y,b)=>p+=b%2?" ":y,""):c:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}},Iu=rh;var ni=.5;function ku(n,t,e,i,s,r,o){let a=n[0]*ni,l=n[1]*ni,h=Gt(a,l);h.imageSmoothingEnabled=!1;let c=h.canvas,g=new Iu(h,ni,s,null,o),d=e.length,p=Math.floor((256*256*256-1)/d),y={};for(let x=1;x<=d;++x){let f=e[x-1],M=f.getStyleFunction()||i;if(!M)continue;let L=M(f,r);if(!L)continue;Array.isArray(L)||(L=[L]);let w=(x*p).toString(16).padStart(7,"#00000");for(let k=0,z=L.length;k<z;++k){let O=L[k],C=O.getGeometryFunction()(f);if(!C||!Vt(s,C.getExtent()))continue;let A=O.clone(),F=A.getFill();F&&F.setColor(w);let S=A.getStroke();S&&(S.setColor(w),S.setLineDash(null)),A.setText(void 0);let T=O.getImage();if(T){let u=T.getImageSize();if(!u)continue;let v=Gt(u[0],u[1],void 0,{alpha:!1}),I=v.canvas;v.fillStyle=w,v.fillRect(0,0,I.width,I.height),A.setImage(new ji({img:I,imgSize:u,anchor:T.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:T.getOrigin(),opacity:1,size:T.getSize(),scale:T.getScale(),rotation:T.getRotation(),rotateWithView:T.getRotateWithView()}))}let D=A.getZIndex()||0,P=y[D];P||(P={},y[D]=P,P.Polygon=[],P.Circle=[],P.LineString=[],P.Point=[]);let m=C.getType();if(m==="GeometryCollection"){let u=C.getGeometriesArrayRecursive();for(let v=0,I=u.length;v<I;++v){let E=u[v];P[E.getType().replace("Multi","")].push(E,A)}}else P[m.replace("Multi","")].push(C,A)}}let b=Object.keys(y).map(Number).sort(qe);for(let x=0,f=b.length;x<f;++x){let M=y[b[x]];for(let L in M){let _=M[L];for(let w=0,k=_.length;w<k;w+=2){g.setStyle(_[w+1]);for(let z=0,O=t.length;z<O;++z)g.setTransform(t[z]),g.drawGeometry(_[w])}}}return h.getImageData(0,0,c.width,c.height)}function Ru(n,t,e){let i=[];if(e){let s=Math.floor(Math.round(n[0])*ni),r=Math.floor(Math.round(n[1])*ni),o=(Rt(s,0,e.width-1)+Rt(r,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],c=e.data[o+2]+256*(l+256*a),g=Math.floor((256*256*256-1)/t.length);c&&c%g===0&&i.push(t[c/g-1])}return i}var Tf=.5,Ou={Point:Of,LineString:If,Polygon:zf,MultiPoint:Ff,MultiLineString:kf,MultiPolygon:Rf,GeometryCollection:Lf,Circle:Af};function Fu(n,t){return parseInt(Mt(n),10)-parseInt(Mt(t),10)}function zu(n,t){let e=so(n,t);return e*e}function so(n,t){return Tf*n/t}function Af(n,t,e,i,s){let r=e.getFill(),o=e.getStroke();if(r||o){let l=n.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(t,i)}let a=e.getText();if(a&&a.getText()){let l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function nh(n,t,e,i,s,r,o){let a=!1,l=e.getImage();if(l){let h=l.getImageState();h==Ot.LOADED||h==Ot.ERROR?l.unlistenImageChange(s):(h==Ot.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return Df(n,t,e,i,r,o),a}function Df(n,t,e,i,s,r){let o=e.getGeometryFunction()(t);if(!o)return;let a=o.simplifyTransformed(i,s);if(e.getRenderer())ju(n,a,e,t);else{let h=Ou[a.getType()];h(n,a,e,t,r)}}function ju(n,t,e,i){if(t.getType()=="GeometryCollection"){let r=t.getGeometries();for(let o=0,a=r.length;o<a;++o)ju(n,r[o],e,i);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function Lf(n,t,e,i,s){let r=t.getGeometriesArray(),o,a;for(o=0,a=r.length;o<a;++o){let l=Ou[r[o].getType()];l(n,r[o],e,i,s)}}function If(n,t,e,i,s){let r=e.getStroke();if(r){let a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(t,i)}let o=e.getText();if(o&&o.getText()){let a=(s||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function kf(n,t,e,i,s){let r=e.getStroke();if(r){let a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(t,i)}let o=e.getText();if(o&&o.getText()){let a=(s||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function Rf(n,t,e,i,s){let r=e.getFill(),o=e.getStroke();if(o||r){let l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(t,i)}let a=e.getText();if(a&&a.getText()){let l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Of(n,t,e,i,s){let r=e.getImage(),o=e.getText(),a;if(r){if(r.getImageState()!=Ot.LOADED)return;let l=n;if(s){let c=r.getDeclutterMode();if(c!=="none")if(l=s,c==="obstacle"){let g=n.getBuilder(e.getZIndex(),"Image");g.setImageStyle(r,a),g.drawPoint(t,i)}else o&&o.getText()&&(a={})}let h=l.getBuilder(e.getZIndex(),"Image");h.setImageStyle(r,a),h.drawPoint(t,i)}if(o&&o.getText()){let l=n;s&&(l=s);let h=l.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(t,i)}}function Ff(n,t,e,i,s){let r=e.getImage(),o=e.getText(),a;if(r){if(r.getImageState()!=Ot.LOADED)return;let l=n;if(s){let c=r.getDeclutterMode();if(c!=="none")if(l=s,c==="obstacle"){let g=n.getBuilder(e.getZIndex(),"Image");g.setImageStyle(r,a),g.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}let h=l.getBuilder(e.getZIndex(),"Image");h.setImageStyle(r,a),h.drawMultiPoint(t,i)}if(o&&o.getText()){let l=n;s&&(l=s);let h=l.getBuilder(e.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(t,i)}}function zf(n,t,e,i,s){let r=e.getFill(),o=e.getStroke();if(r||o){let l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(t,i)}let a=e.getText();if(a&&a.getText()){let l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}var oh=class extends Zn{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ut(),this.wrappedRenderedExtent_=Ut(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){let s=e.extent,r=e.viewState,o=r.center,a=r.resolution,l=r.projection,h=r.rotation,c=l.getExtent(),g=this.getLayer().getSource(),d=e.pixelRatio,p=e.viewHints,y=!(p[qt.ANIMATING]||p[qt.INTERACTING]),b=this.compositionContext_,x=Math.round(e.size[0]*d),f=Math.round(e.size[1]*d),M=g.getWrapX()&&l.canWrapX(),L=M?At(c):null,_=M?Math.ceil((s[2]-c[2])/L)+1:1,w=M?Math.floor((s[0]-c[0])/L):0;do{let k=this.getRenderTransform(o,a,h,d,x,f,w*L);t.execute(b,1,k,h,y,void 0,i)}while(++w<_)}setupCompositionContext_(){if(this.opacity_!==1){let t=Gt(this.context.canvas.width,this.context.canvas.height,El);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){let t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,us(this.compositionContext_),El.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){let i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];nc(this.pixelTransform,1/i,1/i),Is(this.inversePixelTransform,this.pixelTransform);let r=rn(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));let o=this.context,a=o.canvas,l=this.replayGroup_,h=this.declutterExecutorGroup,c=l&&!l.isEmpty()||h&&!h.isEmpty();if(!c&&!(this.getLayer().hasListener(ve.PRERENDER)||this.getLayer().hasListener(ve.POSTRENDER)))return null;let g=Math.round(t.size[0]*i),d=Math.round(t.size[1]*i);a.width!=g||a.height!=d?(a.width=g,a.height=d,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,g,d),this.preRender(o,t);let p=t.viewState,y=p.projection;this.opacity_=s.opacity,this.setupCompositionContext_();let b=!1;if(c&&s.extent&&this.clipping){let x=si(s.extent,y);c=Vt(x,t.extent),b=c&&!Ai(x,t.extent),b&&this.clipUnrotated(this.compositionContext_,t,x)}return c&&this.renderWorlds(l,t),b&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let i=[this.context.canvas.width,this.context.canvas.height];Wt(this.pixelTransform,i);let s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,h=this.getLayer(),c=[],g=i[0]*ni,d=i[1]*ni;c.push(this.getRenderTransform(s,r,o,ni,g,d,0).slice());let p=h.getSource(),y=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!Ai(y,l)){let b=l[0],x=At(y),f=0,M;for(;b<y[0];)--f,M=x*f,c.push(this.getRenderTransform(s,r,o,ni,g,d,M).slice()),b+=x;for(f=0,b=l[2];b>y[2];)++f,M=x*f,c.push(this.getRenderTransform(s,r,o,ni,g,d,M).slice()),b-=x}this.hitDetectionImageData_=ku(i,c,this.renderedFeatures_,h.getStyleFunction(),l,r,o)}e(Ru(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,s,r){if(!this.replayGroup_)return;let o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),h={},c=function(p,y,b){let x=Mt(p),f=h[x];if(f){if(f!==!0&&b<f.distanceSq){if(b===0)return h[x]=!0,r.splice(r.lastIndexOf(f),1),s(p,l,y);f.geometry=y,f.distanceSq=b}}else{if(b===0)return h[x]=!0,s(p,l,y);r.push(h[x]={feature:p,layer:l,geometry:y,distanceSq:b,callback:s})}},g,d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(p=>g=p.forEachFeatureAtCoordinate(t,o,a,i,c,p===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(y=>y.value):null)),g}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){let e=this.getLayer(),i=e.getSource();if(!i)return!1;let s=t.viewHints[qt.ANIMATING],r=t.viewHints[qt.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let l=t.extent,h=t.viewState,c=h.projection,g=h.resolution,d=t.pixelRatio,p=e.getRevision(),y=e.getRenderBuffer(),b=e.getRenderOrder();b===void 0&&(b=Fu);let x=h.center.slice(),f=ks(l,y*g),M=f.slice(),L=[f.slice()],_=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!Ai(_,t.extent)){let m=At(_),u=Math.max(At(f)/2,m);f[0]=_[0]-u,f[2]=_[2]+u,mn(x,c);let v=ko(L[0],c);v[0]<_[0]&&v[2]<_[2]?L.push([v[0]+m,v[1],v[2]+m,v[3]]):v[0]>_[0]&&v[2]>_[2]&&L.push([v[0]-m,v[1],v[2]-m,v[3]])}if(this.ready&&this.renderedResolution_==g&&this.renderedRevision_==p&&this.renderedRenderOrder_==b&&Ai(this.wrappedRenderedExtent_,f))return fe(this.renderedExtent_,M)||(this.hitDetectionImageData_=null,this.renderedExtent_=M),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let w=new $l(so(g,d),f,g,d),k;this.getLayer().getDeclutter()&&(k=new $l(so(g,d),f,g,d));let z=bn(),O;if(z){for(let m=0,u=L.length;m<u;++m){let v=L[m],I=Xs(v,c);i.loadFeatures(I,Ac(g,c),z)}O=ur(z,c)}else for(let m=0,u=L.length;m<u;++m)i.loadFeatures(L[m],g,c);let C=zu(g,d),A=!0,F=m=>{let u,v=m.getStyleFunction()||e.getStyleFunction();if(v&&(u=v(m,g)),u){let I=this.renderFeature(m,C,u,w,O,k);A=A&&!I}},S=Xs(f,c),T=i.getFeaturesInExtent(S);b&&T.sort(b);for(let m=0,u=T.length;m<u;++m)F(T[m]);this.renderedFeatures_=T,this.ready=A;let D=w.finish(),P=new sh(f,g,d,i.getOverlaps(),D,e.getRenderBuffer());return k&&(this.declutterExecutorGroup=new sh(f,g,d,i.getOverlaps(),k.finish(),e.getRenderBuffer())),this.renderedResolution_=g,this.renderedRevision_=p,this.renderedRenderOrder_=b,this.renderedExtent_=M,this.wrappedRenderedExtent_=f,this.renderedCenter_=x,this.renderedProjection_=c,this.replayGroup_=P,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,h=i.length;l<h;++l)a=nh(s,t,i[l],e,this.boundHandleStyleImageChange_,r,o)||a;else a=nh(s,t,i,e,this.boundHandleStyleImageChange_,r,o);return a}},Nu=oh;var ah=class extends _u{constructor(t){super(t)}createRenderer(){return new Nu(this)}},Ci=ah;var lh=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?zt(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=zt(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return ft()}readFeature(t,e){return ft()}readFeatures(t,e){return ft()}readGeometry(t,e){return ft()}readProjection(t){return ft()}writeFeature(t,e){return ft()}writeFeatures(t,e){return ft()}writeGeometry(t,e){return ft()}},Bu=lh;function hh(n,t,e){let i=e?zt(e.featureProjection):null,s=e?zt(e.dataProjection):null,r;if(i&&s&&!hi(i,s)?r=(t?n.clone():n).transform(t?i:s,t?s:i):r=n,t&&e&&e.decimals!==void 0){let o=Math.pow(10,e.decimals),a=function(l){for(let h=0,c=l.length;h<c;++h)l[h]=Math.round(l[h]*o)/o;return l};r===n&&(r=n.clone()),r.applyTransform(a)}return r}var ch=class n extends Ee{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let s=this.getLayout(),r=t,o=[],a=[];for(let l=0,h=r.length;l<h;++l){let c=r[l];l===0&&(s=c.getLayout()),ye(o,c.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?ye(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Me(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gr(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xr(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,s))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,fu(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return qi(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Or(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){let t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[],r=0;for(let o=0,a=e.length;o<a;++o){let l=e[o],h=new Or(t.slice(r,l),i);s.push(h),r=l}return s}getFlatMidpoints(){let t=[],e=this.flatCoordinates,i=0,s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){let l=s[o],h=qn(e,i,l,r,.5);ye(t,h),i=l}return t}getSimplifiedGeometryInternal(t){let e=[],i=[];return e.length=Hc(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new n(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return Qc(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let i=yr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}},Gu=ch;var dh=class n extends Ee{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?ye(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){let t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Me(this.getExtent(),t,e))return s;let r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){let h=Qe(t,e,r[a],r[a+1]);if(h<s){s=h;for(let c=0;c<o;++c)i[c]=r[a+c];i.length=o}}return s}getCoordinates(){return Ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){let e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Pe(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){let t=this.flatCoordinates,e=this.layout,i=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=i){let a=new Pe(t.slice(r,r+i),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){let e=this.flatCoordinates,i=this.stride;for(let s=0,r=e.length;s<r;s+=i){let o=e[s],a=e[s+1];if(nr(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cs(this.flatCoordinates,0,t,this.stride),this.changed()}},ro=dh;function Xu(n,t,e,i){let s=[],r=Ut();for(let o=0,a=e.length;o<a;++o){let l=e[o];r=an(n,t,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return s}var uh=class n extends Ee{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let s=this.getLayout(),r=t,o=[],a=[];for(let l=0,h=r.length;l<h;++l){let c=r[l];l===0&&(s=c.getLayout());let g=o.length,d=c.getEnds();for(let p=0,y=d.length;p<y;++p)d[p]+=g;ye(o,c.getFlatCoordinates()),a.push(d)}e=s,t=o,i=a}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{let i=this.flatCoordinates.length;ye(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,r=e.length;s<r;++s)e[s]+=i}this.endss_.push(e),this.changed()}clone(){let t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();let i=new n(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,s){return s<Me(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wc(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return $c(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return Kc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),ca(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,vr(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let t=Xu(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Jc(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ro(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;sd(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ca(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let e=[],i=[];return e.length=Zc(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new n(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{let r=this.endss_[t-1];e=r[r.length-1]}let i=this.endss_[t].slice(),s=i[i.length-1];if(e!==0)for(let r=0,o=i.length;r<o;++r)i[r]-=e;return new ci(this.flatCoordinates.slice(e,s),this.layout,i)}getPolygons(){let t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[],r=0;for(let o=0,a=i.length;o<a;++o){let l=i[o].slice(),h=l[l.length-1];if(r!==0)for(let g=0,d=l.length;g<d;++g)l[g]-=r;let c=new ci(e.slice(r,h),t,l);s.push(c),r=h}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return td(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);let i=Uc(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{let s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}},Xr=uh;var ph=class n extends Cn{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Tt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(wt(this.geometries_[t],ut.CHANGE,this.changed,this))}clone(){let t=new n(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Me(this.getExtent(),t,e))return s;let r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(t,e,i,s);return s}containsXY(t,e){let i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(t,e))return!0;return!1}computeExtent(t){Di(t);let e=this.geometries_;for(let i=0,s=e.length;i<s;++i)ln(t,e[i].getExtent());return t}getGeometries(){return Wu(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[],e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let e=[],i=this.geometries_,s=!1;for(let r=0,o=i.length;r<o;++r){let a=i[r],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(s=!0)}if(s){let r=new n(null);return r.setGeometriesArray(e),r}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){let e=this.geometries_;for(let i=0,s=e.length;i<s;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){let i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Ge(this.getExtent()));let s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(Wu(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){let e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].applyTransform(t);this.changed()}translate(t,e){let i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function Wu(n){let t=[];for(let e=0,i=n.length;e<i;++e)t.push(n[e].clone());return t}var Vu=ph;var fh=class extends Bu{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(no(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(no(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return ft()}readFeaturesFromObject(t,e){return ft()}readGeometry(t,e){return this.readGeometryFromObject(no(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return ft()}readProjection(t){return this.readProjectionFromObject(no(t))}readProjectionFromObject(t){return ft()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return ft()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return ft()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return ft()}};function no(n){if(typeof n=="string"){let t=JSON.parse(n);return t||null}return n!==null?n:null}var Yu=fh;var gh=class extends Yu{constructor(t){t=t||{},super(),this.dataProjection=zt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=zt(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};let s=mh(i.geometry,e),r=new bs;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(s),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(t,e){let i=t,s=null;if(i.type==="FeatureCollection"){let r=t;s=[];let o=r.features;for(let a=0,l=o.length;a<l;++a)s.push(this.readFeatureFromObject(o[a],e))}else s=[this.readFeatureFromObject(t,e)];return s}readGeometryFromObject(t,e){return mh(t,e)}readProjectionFromObject(t){let e=t.crs,i;return e?e.type=="name"?i=zt(e.properties.name):e.type==="EPSG"?i=zt("EPSG:"+e.properties.code):gt(!1,36):i=this.dataProjection,i}writeFeatureObject(t,e){e=this.adaptOptions(e);let i={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(i.id=s),!t.hasProperties())return i;let r=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=xh(o,e),delete r[t.getGeometryName()]),Je(r)||(i.properties=r),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);let i=[];for(let s=0,r=t.length;s<r;++s)i.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return xh(t,this.adaptOptions(e))}};function mh(n,t){if(!n)return null;let e;switch(n.type){case"Point":{e=Nf(n);break}case"LineString":{e=Bf(n);break}case"Polygon":{e=Vf(n);break}case"MultiPoint":{e=Xf(n);break}case"MultiLineString":{e=Gf(n);break}case"MultiPolygon":{e=Wf(n);break}case"GeometryCollection":{e=jf(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return hh(e,!1,t)}function jf(n,t){let e=n.geometries.map(function(i){return mh(i,t)});return new Vu(e)}function Nf(n){return new Pe(n.coordinates)}function Bf(n){return new Or(n.coordinates)}function Gf(n){return new Gu(n.coordinates)}function Xf(n){return new ro(n.coordinates)}function Wf(n){return new Xr(n.coordinates)}function Vf(n){return new ci(n.coordinates)}function xh(n,t){n=hh(n,!0,t);let e=n.getType(),i;switch(e){case"Point":{i=qf(n,t);break}case"LineString":{i=Uf(n,t);break}case"Polygon":{i=$f(n,t);break}case"MultiPoint":{i=Zf(n,t);break}case"MultiLineString":{i=Hf(n,t);break}case"MultiPolygon":{i=Kf(n,t);break}case"GeometryCollection":{i=Yf(n,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function Yf(n,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return xh(i,t)})}}function Uf(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}function Hf(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Zf(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Kf(n,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}function qf(n,t){return{type:"Point",coordinates:n.getCoordinates()}}function $f(n,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}var Wr=gh;var Jf=["tooltip"],oo=(()=>{class n extends pe{constructor(){super(...arguments),this.lastHoveredFeatures=[],this.iconStyle=new we({zIndex:100,image:new ji({anchor:[.5,25],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:1,src:"assets/img/map-pin-icon.svg"})}),this.defaultPolyStroke=new De({color:"rgba(0, 0, 0, 0.3)",width:1}),this.hoverPolyStroke=new De({color:"rgba(0, 0, 255, 0.5)",width:2}),this.mouseOut=e=>{this.onMouseOut(e)},this.mouseClick=e=>this.onMapClick(e),this.pointerMove=e=>this.onPointerMove(e)}ngOnInit(){super.ngOnInit(),this.widget.isMap=!0,this.requestPolygonData(),this.us.isEmbedded()&&(this.onMessage=e=>{let i=e.data;switch(i.type){case"map.applyStyle":this.applyStyle(i);break}},window.addEventListener("message",this.onMessage))}applyStyle(e){let{selector:i,style:s,value:r}=e,o=this.map?.getTargetElement();(o&&o.querySelectorAll(i))?.forEach(l=>{l.style[s]=r})}ngAfterViewInit(){this.createMap()}ngOnDestroy(){this.us.isEmbedded()&&this.onMessage&&window.removeEventListener("message",this.onMessage),this.unbindEvents(),super.ngOnDestroy()}retrieveData(e){return Ft(this,null,function*(){if(this.polygonsLoaded&&(yield this.polygonsLoaded),e.Error){this.showError(e.Error);return}e.Info&&(this.dataInfo=e.Info),this.hideTooltip(),this.markers?.clear(),this.polyVector?.clear(),this.data=e,this.buildMap(),this.fitPolygonsToScreen()})}buildMap(){let e="world";switch(this.isMarketsData()&&(e="markers"),e){case"markers":this.buildMarkers();break;case"world":this.buildWorldMapPolygons();break}}get lonLatNames(){return["latitude","longitude",this.getDataPropValue("latitude")?.toLowerCase(),this.getDataPropValue("longitude")?.toLowerCase()].filter(e=>!!e)}isMarketsData(){let e=this.lonLatNames;return this.data?.Cols[0]?.tuples?.some(i=>e.includes(i.caption?.toLowerCase())||e.includes(i.dimension?.toLowerCase()))}buildMarkers(){let e=this.data?.Cols[0].tuples.length;if(!e)return;let i=0,s=[],r=this.getDataPropValue("latitude")||"latitude",o=this.getDataPropValue("longitude")||"longitude",a=this.data?.Cols[0].tuples.findIndex(c=>c.caption.toLowerCase()===r)??-1,l=this.data?.Cols[0].tuples.findIndex(c=>c.caption.toLowerCase()===o)??-1;if(l===-1||a===-1){console.error("Can't find latitude/longitude columns. Check name of columns that contain latitude or longitude. Also if columns named differently, check latitude/longitude data properties on map widget.");return}let h=this.data?.Cols[1].tuples;if(h?.[0]?.children&&(h=h[0]?.children),!(!h||!this.data)){for(let c=0;c<h.length;c++){if(this.data.Data[i+a]===""||this.data.Data[i+a]===void 0||this.data.Data[i+l]===""||this.data.Data[i+l]===void 0)continue;let g=parseFloat(this.data.Data[i+a].toString()||"0"),d=parseFloat(this.data.Data[i+l].toString()||"0"),p=h[c].caption,y=new Pe([d,g]);y.transform("EPSG:4326",this.map?.getView().getProjection());let b=new bs({geometry:y,title:p,dataIdx:i,path:h[c].path,desc:h[c].title});s.push(b),i+=e}s.length!==0&&this.markers?.addFeatures(s)}}createMap(){let e=this.getDataPropValue("tileUrl"),i=new Ir({wrapX:!0,url:e}),s=new On({layers:[new Rr({source:i})],controls:gs({attributionOptions:{collapsible:!1}}),target:this.el.nativeElement,view:new Ce({center:[0,0],zoom:2})});this.map=s,this.createLayers(),this.bindEvents()}bindEvents(){this.map?.getViewport().addEventListener("mouseout",this.mouseOut,!1),this.map?.on("click",this.mouseClick),this.map?.on("pointermove",this.pointerMove)}unbindEvents(){this.map?.getViewport().removeEventListener("mouseout",this.mouseOut,!1),this.map?.un("click",this.mouseClick),this.map?.un("pointermove",this.pointerMove)}createLayers(){if(!this.map){console.error("Map object doesn't exists!");return}this.polyVector=new yi({features:[]});let e=new Ci({source:this.polyVector});if(e.setZIndex(1),this.map?.addLayer(e),this.markers=new yi({features:[]}),this.markers){let i=new Ci({source:this.markers,style:this.iconStyle});i.setZIndex(100),this.map?.addLayer(i)}}onMouseOut(e){this.hideTooltip()}onMapClick(e){if(ue.mobile&&e.originalEvent.touches&&e.originalEvent.touches.length!==1)return;let i=this.map?.forEachFeatureAtPixel(e.pixel,(s,r)=>s);if(i){if(this.hideTooltip(),ue.mobile){this.onPointerMove(e);return}this.doDrill(i.get("path"),i.get("name")||i.get("title"),void 0)}}onPointerMove(e){this.updateHoverStyle(e),this.updateTooltip(e)}updateTooltip(e){if(e.dragging){this.hideTooltip(),this.tooltipFeature=void 0;return}let i=this.map?.getEventPixel(e.originalEvent);i&&this.displayFeatureInfo(i,e.originalEvent.target)}updateHoverStyle(e){this.lastHoveredFeatures.forEach(i=>{let s=i.getStyle();s.setStroke(this.defaultPolyStroke),i.setStyle(s)}),this.lastHoveredFeatures=[],this.map?.forEachFeatureAtPixel(e.pixel,i=>{let s=i.getGeometry()?.getType();if(s==="Polygon"||s==="MultiPolygon"){let r=i,o=r.getStyle();o.setStroke(this.hoverPolyStroke),r.setStyle(o),this.lastHoveredFeatures.push(r)}})}displayFeatureInfo(e,i){let s=i.closest(".ol-control")?void 0:this.map?.forEachFeatureAtPixel(e,function(r){return r});if(s){if(this.updateTooltipPosition(e[0],e[1]),s!==this.tooltipFeature){let r=this.getDataPropValue("tooltip")||this.getDataPropValue("tooltipProperty")||"TooltipValue",o=this.getDataByColumnName(this.data,r,s.get("dataIdx"));o||(o=this.getFeatureText(s)),o&&(this.tooltip.nativeElement.innerHTML=o.toString(),this.showTooltip())}}else this.hideTooltip();this.tooltipFeature=s}updateTooltipPosition(e,i){let s=this.tooltip.nativeElement;s.classList.remove("ol-tooltip-top"),s.classList.remove("ol-tooltip-left"),s.classList.remove("ol-tooltip-right"),s.style.left=e+"px",s.style.top=i+"px";let r=s.getBoundingClientRect(),o=this.el.nativeElement.getBoundingClientRect();(r.y+r.height>o.y+o.height+20||r.y+r.height>window.innerHeight-20)&&s.classList.add("ol-tooltip-top"),(r.x+r.width>o.x+o.width+20||r.x+r.width>window.innerWidth-20)&&s.classList.add("ol-tooltip-left"),(r.x<o.x-20||r.x<20)&&s.classList.add("ol-tooltip-right")}showTooltip(){this.tooltip.nativeElement.style.visibility="visible"}hideTooltip(){this.tooltip.nativeElement.style.visibility="hidden"}requestPolygonData(){let e=this.widget.name;this.widget.name.indexOf(".")===-1&&(e+=".js"),e=this.getDataPropValue("polygonFile")||this.getDataPropValue("coordsJsFile")||e;let i=this.ss.serverSettings.DefaultApp||"/csp",r=(this.ds.configDefaultApp||i)+"/"+e,o=e.split(".").pop()?.toString(),l=o==="json"||o==="geojson"?this.ds.getJSONFile(r):this.ds.getFile(r);this.polygonsLoaded=new Promise(h=>{l.then(c=>this.onPolyFileLoaded(c)).catch(c=>this.loadDefaultGeoJSON()).finally(()=>{this.hideLoading(),h()})})}onPolyFileLoaded(e){e&&(typeof e=="string"?this.parsePlainJS(e):this.createGeoJSON(e))}parsePlainJS(e){let i=/function\s+\w+\s*\(([^)]*)\)\s*\{([\s\S]*)\}/,s=e.match(i);if(s){let r=s[1].trim(),o=s[2],a=new Function(r,o),l={};a(l),this.createGeoJSON(this.convertToGeoJSON(l))}}loadDefaultGeoJSON(){return Ft(this,null,function*(){let e;try{e=yield this.ds.getJSONFile("assets/countries.json")}catch{console.error(`Can't load default GeoJSON: "assets/countries.json"`);return}e&&this.createGeoJSON(e)})}convertToGeoJSON(e){return{type:"FeatureCollection",features:Object.keys(e).map(s=>{let r=e[s].split(";"),o=[];return r.forEach(a=>{o.push(a.split(" ").map(l=>{let[h,c]=l.split(",").map(Number);return[h,c]}))}),{type:"Feature",geometry:{type:o.length>1?"MultiPolygon":"Polygon",coordinates:o.length>1?[o]:[o[0]]},properties:{name:s}}})}}createGeoJSON(e){this.worldMap=new yi,this.worldMap.addFeatures(new Wr().readFeatures(e,{dataProjection:"EPSG:4326",featureProjection:this.map?.getView().getProjection()}))}fitPolygonsToScreen(){this.polyVector?.getFeatures()?.length&&this.map?.getView().fit(this.polyVector.getExtent(),{padding:[20,20,20,20]}),this.markers?.getFeatures()?.length&&this.map?.getView().fit(this.markers.getExtent(),{padding:[20,20,20,20]})}buildWorldMapPolygons(){let e=[],i=(this.data?.Cols[0]?.tuples?.length??0)<2,s=this.getColumnIndexByDataProp("Key");s===-1&&(s=this.getColumnIndexByDataProp("coordsProperty"));let r=this.getColumnIndexByDataProp("Value");r===-1&&(r=this.getColumnIndexByDataProp("colorProperty")),s===-1&&(s=0),r===-1&&(i?r=0:r=1);let o=this.data?.Cols[0]?.tuples?.length||2,a=Number.MAX_VALUE,l=Number.MIN_VALUE;for(let h=0;h<(this.data?.Cols[1]?.tuples?.length??-1);h++){let c=this.data?.Data[h*o+r];c<a&&(a=c),c>l&&(l=c)}for(let h=0;h<(this.data?.Cols[1]?.tuples?.length??-1);h++){let c="";if(i?c=this.data?.Cols[1]?.tuples[h].caption??"":c=this.data?.Data[h*o+s].toString()??"",!c)continue;let g=this.getDataPropValue("geojsonKeyField")||"name",d=this.worldMap?.getFeatures().find(L=>L.get(g)===c.toString());if(!d)continue;d.set("dataIdx",h*o),d.set("title",this.data?.Cols[1].tuples[h].caption),d.set("path",this.data?.Cols[1].tuples[h].path),e.push(d);let p=this.data?.Data[h*o+r],y;l-a===0?y=255:y=(p-a)/(l-a)*255;let x=`hsla(${(255-y)/255*120}, 100%, 50%, 0.6)`,f=new ss({font:"8px Oxygen",fill:new _e({color:"black"}),text:`${this.data?.Cols[1].tuples[h].caption}
`+this.formatNumber(p,this.data?.Cols[1].tuples[h].format)}),M=this;d.setStyle(new we({zIndex:0,fill:new _e({color:x}),stroke:this.defaultPolyStroke,text:f}))}this.featureOverlay?.getSource().clear(),this.polyVector?.clear(),this.polyVector?.addFeatures(e),this.fitPolygonsToScreen()}getColumnIndexByDataProp(e){if(!this.data)return 0;let i=0,s=this.getDataPropValue(e)||e;return i=this.getColumnIndexByName(this.data,s),i}getFeatureText(e){let i=e.get("dataIdx");if(i===void 0)return;let s="",r=[],o="";e.get("title")&&(o="<b>"+e.get("title")+"</b><hr/>");let a=this.lonLatNames;for(let l=0;l<(this.data?.Cols[0]?.tuples?.length??-1);l++){let h=this.data?.Cols[0]?.tuples[l],c=h?.caption?.toLowerCase();if(a.includes(c)||this.getDataPropValue("Key")===c||c==="key")continue;let g=this.data?.Data[i+l]?.toString()??"";h?.format&&(g=this.formatNumber(g,h.format)),g&&h&&r.push(`<b>${h.caption}:</b> ${g}`)}return s=o+r.join("<br>"),s}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-map-widget"]],viewQuery:function(i,s){if(i&1&&Si(Jf,7),i&2){let r;Mi(r=Ei())&&(s.tooltip=r.first)}},standalone:!0,features:[Ct,vt],decls:7,vars:0,consts:[["popup",""],["tooltip",""],[1,"panel","panel-default","map-popup",2,"visibility","hidden"],["ng-bind-html","model.tooltip.content | sanitize"],[1,"arrow_box"],[1,"tooltip"]],template:function(i,s){i&1&&(Dt(0,"div",2,0)(2,"div"),Ht(3,"div",3),It(),Ht(4,"div",4),It(),Ht(5,"div",5,1))},styles:['[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]{margin-top:24px;z-index:1000;position:absolute;color:#929292;background-color:#fff;white-space:nowrap;font-family:Oxygen;font-size:12px;box-shadow:1px 1px 4px #7f7f7f;padding:4px 10px;border-radius:4px;transform:translate(-50%);visibility:hidden}.ol-tooltip-top[_ngcontent-%COMP%]{transform:translate(-50%) translateY(calc(-100% - 8px));margin-top:0}.ol-tooltip-left[_ngcontent-%COMP%]{transform:translate(-100%)}.ol-tooltip-right[_ngcontent-%COMP%]{transform:translate(0)}.ol-tooltip-top.ol-tooltip-left[_ngcontent-%COMP%]{transform:translate(-100%) translateY(calc(-100% - 8px));margin-top:0}.ol-tooltip-top.ol-tooltip-right[_ngcontent-%COMP%]{transform:translate(0) translateY(calc(-100% - 8px));margin-top:0}.map-popup[_ngcontent-%COMP%]{transform:translateY(-100%) translate(-50%);z-index:1;position:absolute;background-color:var(--cl-widget-filter-bg);margin-bottom:0;border-color:#b0b0b0;padding:4px;-webkit-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);-moz-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);box-shadow:1px 1px 9px #32323280;color:var(--cl-widget-header-txt)}.map-popup[_ngcontent-%COMP%]:after{content:" ";display:block;width:0;height:0;border-style:solid;border-width:8px 4px 0 4px;bottom:-8px;left:calc(50% - 4px);position:absolute;border-color:var(--cl-widget-filter-bg) transparent transparent transparent}'],changeDetection:0})}}return n})();var je=Jt(Co()),tp=Jt(Uu()),ep=Jt(Hu()),ip=Jt(Zu()),sp=Jt(Ku()),rp=Jt(qu()),np=Jt($u()),op=Jt(Ju()),ap=Jt(Qu());(0,ep.default)(je.default);(0,ap.default)(je.default);(0,tp.default)(je.default);(0,ip.default)(je.default);(0,sp.default)(je.default);(0,rp.default)(je.default);(0,np.default)(je.default);(0,op.default)(je.default);var Yr=20;var Vr={treemap:{showLines:!1,showText:!1},pie:{showLines:!1}},Xt=(()=>{class n extends pe{constructor(){super(...arguments),this.widgetData=null,this.seriesTypes=[],this.firstRun=!0,this.baseSeriesType="bar",this.sbs=Qt(qr),this.wts=Qt(lp),this.zone=Qt(Dh),this.axisLabelListeners=[],this.seriesVisibility=[]}ngOnInit(){super.ngOnInit(),this.widget.isChart=!0,this.setupHeaderButtons(),this.override?.seriesTypes&&(this.seriesTypes=this.override?.seriesTypes.split(",")),this.subPrint=this.bs.subscribe("print:"+this.widget.name,()=>{if(this.chart){let e=new Blob([this.chart.getSVG()],{type:"image/svg+xml"}),i=window.open(URL.createObjectURL(e),"_blank");i&&(i.onload=()=>{let s=i?.document.querySelector("svg");s?.setAttribute("width","100%"),s?.setAttribute("height","100%"),s&&(s.style.height="auto"),i?.print()},i.onafterprint=()=>{i?.close()})}}),this.setupChart(),this.widget.inline&&this.setupInline(),this.subColorsConfig=this.bs.subscribe("charts:update-colors",e=>this.updateColors(e))}ngAfterViewInit(){this.createChart(),setTimeout(()=>{this.chart?.reflow()})}createChart(){this.chartConfig.chart&&(this.chartConfig.chart.renderTo=this.el.nativeElement),this.chartConfig?.chart?.type==="map"?this.chart=je.default.mapChart(this.chartConfig):this.widget.type.toLowerCase()==="timechart"?this.chart=je.default.stockChart(this.chartConfig):this.chart=je.default.chart(this.chartConfig)}clearSeries(e){let i=e||this.chart;if(i)for(;i.series.length>0;)i.series[0].remove(!1)}onHeaderButton(e){switch(super.onHeaderButton(e),e.name){case"isLegend":this.toggleLegend(e.state);break;case"showValues":{(this.chartConfig?.plotOptions?.series?.dataLabels).enabled=e.state,this.chartConfig.plotOptions?.pie?.dataLabels&&(this.chartConfig.plotOptions.pie.dataLabels.enabled=e.state),this.updateChart(),this.chart?.legend.update({enabled:this.widget.isLegend},!0);break}case"showZero":this.showZeroOnAxis();break;case"isTop":this.limitSeriesAndData();break;case"chartConfig":this.showChartConfig();break}}updateChart(e=!1,i=!1){this.chart&&this.chart.update(this.chartConfig,e,!1,i)}hasOption(e){let i=this.ss.getWidgetsSettings(this.widget.dashboard);return!(!i[this.widget.name]||i[this.widget.name][e]===void 0||i[this.widget.name][e]===!1)}setYAxisMinToZero(){if(this.chartConfig.yAxis instanceof Array)for(let e=0;e<this.chartConfig.yAxis.length;e++)this.chartConfig.yAxis[e].prevMin=this.chartConfig.yAxis[e].min,this.chartConfig.yAxis[e].min=0;else this.chartConfig.yAxis.prevMin=this.chartConfig.yAxis.min,this.chartConfig.yAxis.min=0;this.updateChart(!0)}showZeroOnAxis(){if(this.widget.showZero)this.setYAxisMinToZero();else{if(this.chartConfig.yAxis instanceof Array)for(let e=0;e<this.chartConfig.yAxis.length;e++){let i=this.chartConfig.yAxis[e].prevMin;this.chartConfig.yAxis[e].min=i,this.chart&&(this.chart.yAxis[e].min=i)}else{let e=this.chartConfig.yAxis.prevMin;this.chartConfig.yAxis.min=e,this.chart&&(this.chart.yAxis.min=e)}this.updateChart(!0)}}limitSeriesAndData(){this.requestData()}toggleLegend(e){this.chart&&this.chart.legend.update({enabled:e})}initFormatForSeries(e){let i=r=>{if(!r||!r.Info)return"";let o="";for(let a=0;a<r.Info.numericGroupSize;a++)o+="#";return o+=",#.##",o},s=this.chartConfig.series;if(s)for(let r=0;r<s.length;r++)s[r]&&(!s[r]).format&&(s[r].format=i(e))}retrieveData2(e){this.hideLoading(),this.addSeries({data:[{y:1,name:"test"}]}),this.updateChart(!0)}retrieveData(e){if(this.hideLoading(),this.seriesVisibility=this.chart?.series?.map(i=>i.visible)??[],this.clearSeries(),this.widgetData=JSON.parse(JSON.stringify(e)),e.Error){this.showError(e.Error);return}if(e){let i=this.getMinValue(e.Data);if(i>0&&i<=10&&(this.chartConfig.yAxis.min=-10),!e.Cols)return;if(e.Cols[0].tuples.length===0&&e.Data.length!==0&&e.Cols[0].tuples.push({caption:this.i18n.get("count")}),this.parseData(e),this.widget.showZero&&this.setYAxisMinToZero(),this.firstRun){let s=this.ss.getWidgetsSettings(this.widget.dashboard);if(this.us.isEmbedded()){let r=this.route.snapshot.queryParamMap.get("hiddenSeries"),o=[];r&&(o=r.split(",")),o.forEach(a=>{this.chartConfig?.series?.[a]&&(this.chartConfig.series[a].visible=!1)})}else if(s[this.widget.name]&&s[this.widget.name].series)for(let r=0;r<(this.chartConfig?.series?.length||0);r++)s[this.widget.name].series[r]===!1&&this.chartConfig.series&&(this.chartConfig.series[r].visible=!1);this.firstRun=!1,this.onResize()}}(this.chart?.series?.length??0)<2&&!this.hasOption("isLegend")&&(this.widget.isLegend=!1,this.parent?.header?.cd?.detectChanges(),this.chart?.legend.update({enabled:!1}))}buildAxisTitles(e){if(this.chartConfig?.chart?.type!=="column")return;let i=!1,s=!1,r=this.getMDX(),o=r.indexOf("ON"),a=-1;o!==-1&&(a=r.indexOf("FROM",o),a!==-1&&(s=r.substring(o,a).toLowerCase().lastIndexOf(".members")!==-1)),a!==-1&&(o=a,a=r.indexOf("FROM",o),i=r.substring(o,a).toLowerCase().lastIndexOf(".members")!==-1),this.chartConfig.yAxis&&e.Cols[0]&&e.Cols[0].tuples&&e.Cols[0].tuples.length&&(this.chartConfig.yAxis.title={text:e.Cols[0].tuples.map(l=>l.caption||"").join(" & ")}),this.chartConfig.xAxis&&e.Cols[1]&&e.Cols[1].tuples&&e.Cols[1].tuples.length&&(this.chartConfig.xAxis.title={text:e.Cols[1].tuples.map(l=>l.caption||"").join(" & ")})}addSeries(e,i,s,r=!1){let o=i||this.chart;if(!o)return;let a=(o.options||this.chartConfig).series?.length??-1;if(e&&e.data&&e.data.length!==0){let g=!0,d=!1;for(let p=0;p<e.data.length;p++){let y=e.data[p];if(typeof y=="object"&&!(y instanceof Array)&&(d=!0,y.y===""&&(y.y=0),y.y!==0&&y.y!==""&&y.y!==null&&y.y!==void 0)){g=!1;break}}g&&d&&(e.showInLegend=!1)}let l=this.tc?.hcColors||je.default.getOptions().colors||["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"];if(e.color=l[o.series.length%l.length||0],this.widget?.seriesTypes){let g=this.widget?.seriesTypes[a]||this.baseSeriesType;g&&(e.type=g)}if(this.override?.markerShapes){let g=this.override?.markerShapes.split(",")[a];if(!g)return;switch(g){case"up":g="triangle";break;case"down":g="triangle-down";break}e.marker={symbol:g}}let h=(s||this.chart||this.chartConfig)?.series?.length;if(this.seriesTypes&&h!==void 0&&this.seriesTypes[h]&&(e.type=this.seriesTypes[h]),e.visible=!0,this.widgetsSettings&&this.widgetsSettings[this.widget.name]&&this.widgetsSettings[this.widget.name].series&&this.widgetsSettings[this.widget.name].series?.[e.name||""]===!1&&(e.visible=!1),this.widget.type.toLowerCase()==="combochart"&&(e.type||(e.type=h===0?"bar":"line"),this.override)){let g=[];this.override.seriesYAxes&&(g=this.override.seriesYAxes.split(",").map(p=>parseInt(p,10)));let d=(this.chart||this.chartConfig).series?.length||-1;e.yAxis=g[d]||0}e.showInLegend=!0,o.addSeries(e,r,!1);let c=this.seriesVisibility[o.series.length-1];c!==void 0&&(o.series[o.series.length-1].visible=c)}enableStacking(){let e={plotOptions:{series:{stacking:"normal"}}};this.us.mergeRecursive(this.chartConfig,e)}getMinValue(e){let i=1/0;for(let s=0;s<e.length;s++)e[s]<i&&(i=e[s]);return i}limitData(e){let i,s,r,a=(this.widget.controls||[]).filter(h=>h.action==="setRowCount")[0],l=a&&parseInt(a.value.toString())||Yr;if(this.chartConfig?.plotOptions?.series?.stacking==="normal"||!this.chartConfig?.plotOptions?.series?.stacking){let h=e.Cols[1].tuples,c=e.Cols[0].tuples;if(this.widget.isTop)if(c.length===1){let g=!0;for(;g;){g=!1;let d;for(d=0;d<e.Data.length-1;d++)if(e.Data[d]<e.Data[d+1]){g=!0;let p=e.Data[d];e.Data[d]=e.Data[d+1],e.Data[d+1]=p,p=e.Cols[1].tuples[d],e.Cols[1].tuples[d]=e.Cols[1].tuples[d+1],e.Cols[1].tuples[d+1]=p}}e.Cols[1].tuples.splice(l,e.Cols[1].tuples.length-l)}else{e.Cols[1].tuples.splice(l,e.Cols[1].tuples.length-l);return}}}parseData(e){return Ft(this,null,function*(){let i=e;this.route.snapshot.queryParamMap.get("autodrill")==="1"&&(yield this.checkForAutoDrill(e))||(i.Cols[1]||(i.Cols[1]={tuples:[]}),i.Cols[1].tuples.length===0&&i.Cols[1].tuples.push({caption:this.i18n.get("count")}),this.limitData(e),e&&e.Info&&(this.dataInfo=e.Info),this.sortTuplesBasedOnLabels(i),this.setupAxisMinMax(i.Data),this.buildSeries(i),this.updateChart(!0))})}onResize(){super.onResize(),this.chart&&this.chart.reflow()}setElColor(e,i=""){if(!e)return;e.setAttribute("fill",i),e.setAttribute("stroke",i);let s=e.children;s&&Array.from(s).forEach(r=>this.setElColor(r,i))}updateColors(e){this.zone.runOutsideAngular(()=>{let i=this.chart;if(!i)return;let s=i.options?.chart?.type;if(e.hcColors)if(s==="treemap"||s==="pie"){let o=i.options.plotOptions?.[s];o&&(o.colors=e.hcColors);for(let a=0;a<i.series[0]?.points.length;a++){let l=i.series[0].points[a],h=e.hcColors[(l.colorIndex||0)%e.hcColors.length];l.color=h,l.graphic?.element.setAttribute("fill",h),this.setElColor(l?.legendItem?.symbol?.element,h)}}else for(let o=0;o<i.series.length;o++){let a=i.series[o],l=e.hcColors[o%e.hcColors.length],h=a.graph?.element;h&&h.setAttribute("stroke",l),this.setElColor(a?.area?.element,l),this.setElColor(a?.bar?.element,l),this.setElColor(a?.markerGroup?.element,l),this.setElColor(a?.legendItem?.symbol?.element,l),this.setElColor(a?.legendItem?.line?.element,l),this.setElColor(a?.legendItem?.group?.element,l),a.data.forEach(g=>{g.color=l,this.setElColor(g.graphic?.element,l)});let c=i.legend.allItems[o];c&&c.legendSymbol&&[c.legendSymbol.element,c.legendLine.element].forEach(g=>{g&&(g.setAttribute("fill",l),g.setAttribute("stroke",l))}),i.series[o].color=l}if(e.hcBorderColor&&Vr[s||""]?.showBorder!==!1)for(let o=0;o<i?.series.length;o++)(i?.series[o]).data.forEach(l=>{let h=l.graphic?.element;h&&h.setAttribute("stroke",e.hcBorderColor)});if(e.hcBackground&&Vr[s||""]?.showBackground!==!1){let o=i.chartBackground.element;o.setAttribute("fill",e.hcBackground),o.setAttribute("stroke",e.hcBackground),i.options.chart&&(i.options.chart.backgroundColor=e.hcBackground)}if(e.hcLineColor&&Vr[s||""]?.showLines!==!1){let o=e.hcLineColor;i.yAxis.forEach(a=>{i.yAxis[0].options.minorGridLineColor=o,a.gridGroup.element.setAttribute("stroke",o),a.gridGroup.element.childNodes.forEach(l=>{l.setAttribute("stroke",o)})}),i?.xAxis.forEach(a=>{a.axisGroup.element.setAttribute("stroke",o),a.axisGroup.element.childNodes.forEach(l=>{l.setAttribute("stroke",o)})})}let r=e.hcTextColor;if(r&&Vr[s||""]?.showText!==!1){let o=a=>{if(a.labelGroup){a.labelGroup.element.setAttribute("fill",r);for(let l=0;l<a.labelGroup.element.children.length;l++){let h=a.labelGroup.element.children[l];h.setAttribute("fill",r),h.setAttribute("color",r),h.style.color=r,h.style.fill=r}}};i?.xAxis.forEach(o),i?.yAxis.forEach(o),i?.options?.legend?.itemStyle&&(i.options.legend.itemStyle.color=r),i?.legend.allItems.forEach(a=>{a.options.color=r,a.legendItem&&(a.legendItem?.group?.element?.setAttribute("color",r),a.legendItem?.group?.element?.setAttribute("fill",r),a.legendItem?.label?.element?.setAttribute("color",r),a.legendItem?.label?.element?.setAttribute("fill",r))}),i?.series.forEach(a=>a.data.forEach(l=>{let h=l.dataLabel?.element?.children[0]?.style;h&&(h.color=r,h.fill=r)}))}})}fixData(e){for(let i=0;i<e.length;i++)!e[i].y&&e[i].y!==0&&(e[i].y=null),(e[i].y===""||e[i].y===void 0)&&(e[i].y=null)}ngOnDestroy(){this.subPrint?.unsubscribe(),this.removeAxisListeners(),super.ngOnDestroy()}onLegendItemHover(e){}onLegendItemOut(e){}buildAxis(e,i=0){let s=[];return e.tuples?.forEach((r,o)=>{i&&o>i-1||((r.children?.length??0)>1?r.children?.forEach(a=>{a.caption=r.caption+"/"+a.caption,s.push(a)}):s.push(r))}),s}buildSeries(e){this.chartConfig.series=[];let i=this.widget.controls.find(a=>a.action.toLowerCase()==="setcolumncount"),s=this.buildAxis(e.Cols[1],i?.value||0),r=this.buildAxis(e.Cols[0]);r.forEach((a,l)=>{let h=[];s.forEach((c,g)=>{h.push({y:+e.Data[g*r.length+l],drilldown:!0,cube:e.Info?.cubeName||"",path:c.path,name:c.caption,title:c.title})}),this.fixData(h),this.addSeries({data:h,name:a.caption,format:a.format,path:a.path})});let o=this.chartConfig.xAxis;o.categories=s.map(a=>a.caption)}removeAxisListeners(){this.axisLabelListeners.forEach(e=>{e.element.removeEventListener(e.event,e.func)})}saveSeriesVisiblilityState(e,i){let s=this.ss.getWidgetsSettings(this.widget.dashboard);s[this.widget.name]||(s[this.widget.name]={});let r=s[this.widget.name];r.series||(r.series={}),r.series[e]=i,this.ss.setWidgetsSettings(s,this.widget.dashboard)}setupChart(){let e=this,i=this.wts.getDesc(this.widget.type);function s(){let r=this.value,o=e.override,a=o?.valueLabelFormat,l=e.baseType;return(o?.yAxisList[0]?.axisType==="percent"||o?.xAxis.axisType==="percent"&&(l==="barChart"||l==="barChartStacked"))&&(r=e.formatNumber(r,"#%")),r}if(this.chartConfig={accessibility:{enabled:!1},drilldown:{activeAxisLabelStyle:{color:this.tc?.hcTextColor||void 0},activeDataLabelStyle:{color:this.tc?.hcTextColor||void 0}},legend:re({enabled:this.widget.isLegend,align:"left"},this.tc?.hcTextColor?{itemStyle:{color:this.tc?.hcTextColor}}:{}),navigation:{buttonOptions:{align:"center"}},chart:{type:i?.chart||"column",backgroundColor:this.tc?.hcBackground||"transparent",events:{redraw:r=>{e.removeAxisListeners(),r.target?.series?.forEach(o=>{e.chartConfig.chart?.type==="pie"&&e.chart?.legend.allItems.forEach(a=>{let l=g=>{this.onLegendItemHover({series:a.series,index:a.index})},h=g=>{this.onLegendItemOut({series:a.series,index:a.index})},c=a.legendItem?.group.element;c&&(c.addEventListener("mouseover",l),e.axisLabelListeners.push({event:"mouseover",element:c,func:l}),c.addEventListener("mouseout",h),e.axisLabelListeners.push({event:"out",element:c,func:h}))}),o.data.forEach((a,l)=>{let h="contextmenu",c=a.graphic?.element;if(!c)return;let g=d=>{d.preventDefault(),d.stopImmediatePropagation();let p=e._currentData?.Cols[1]?.tuples;if(!p||!p[l])return;let y=o.userOptions.path,b=p[l].path;y&&(b=y),this.bs.broadcast("contextmenu",{widget:this.widget,event:d,ctxData:{canDrillthrough:this.canDoDrillthrough,canDrill:!0,drillPath:b,drillTitle:p[l].caption||p[l].title}})};a.graphic?.element?.addEventListener(h,g),this.axisLabelListeners.push({event:h,element:c,func:g})})}),e.chartConfig?.chart?.type==="pie"?e.chart?.legend?.allItems.forEach(o=>{let a=o.dataLabel?.element;if(!a)return;let l=()=>{e.showLoading(),e.doDrillOnly(o.options.path,o.name.toString(),o.name.toString()).finally(()=>{e.hideLoading()})};a.addEventListener("click",l),this.axisLabelListeners.push({event:"click",element:a,func:l})}):e.chart?.xAxis[0]?.labelGroup?.element?.childNodes?.forEach((o,a)=>{let l=()=>{let h=e._currentData?.Cols[1]?.tuples,c=e._currentData?.Cols[1]?.tuples[0]?.children;c?.length&&(a=Math.floor(a/c?.length)),!(!h||!h[a])&&(e.showLoading(),e.doDrillOnly(h[a].path,h[a].caption||h[a].title,h[a].caption||h[a].title).finally(()=>{e.hideLoading()}))};o.addEventListener("click",l),this.axisLabelListeners.push({event:"click",element:o,func:l})})}}},credits:{enabled:!1},tooltip:{formatter(){let r=e.override,o=this,a=r?.valueLabelFormat||o.series.options.format,l=o.y;l=e.formatNumber(l,a);let h=o.point.title;h===o.point.name&&(h="");let c=(o.point.name||o.x||"")+"<br>"+(h?h+"<br>":"")+o.series.name+": <b>"+l+"</b><br>";return o.point.percentage&&(c+=e.formatNumber(this.point.percentage,e.getDataPropByDataValue(this.series?.userOptions?.name||"")?.format||"#.##")+"%"),c}},exporting:{enabled:!1},plotOptions:{column:{borderColor:this.tc?.hcBorderColor||void 0},bar:{borderColor:this.tc?.hcBorderColor||void 0},pie:{borderColor:this.tc?.hcBorderColor,colors:this.tc?.hcColors},treemap:{colors:this.tc?.hcColors},series:{opacity:this.tc?.hcOpacity,cursor:"pointer",point:{events:{click(r){if(e.drillFilterWidgets?.length){e.doDrillFilter(r.point.path,e.drills),e.parent?.header?.cd.detectChanges();return}if(!r.point)return;if(ue.mobile&&e._selectedPoint!==r.point){e._selectedPoint=r.point;return}let o=r.point.series.userOptions.path,a=[r.point.path];o&&a.push(o),e.showLoading(),e.doDrillthrough(a,r.point.name,r.point.category).finally(()=>{e.hideLoading()})}}},dataLabels:{color:this.tc?.hcTextColor||void 0,enabled:this.widget.showValues===!0,formatter(){let r=e.override,o=this,a=r?.valueLabelFormat||o.series.options.format,l=o.y;return l=e.formatNumber(l,a),l}},events:{hide:r=>this.saveSeriesVisiblilityState(r.target.name,r.target.visible),show:r=>this.saveSeriesVisiblilityState(r.target.name,r.target.visible)}}},yAxis:{events:{},title:{text:this.widget?.overrides?.[0]?.xAxis?.title||""},labels:{style:{color:this.tc?.hcTextColor||void 0,textOverflow:"none"},formatter:s},minorGridLineColor:this.tc?.hcLineColor||"#e6e6e6",gridLineColor:this.tc?.hcLineColor||"#e6e6e6",lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor},xAxis:{events:{},title:{text:this.widget?.overrides?.[0]?.yAxisList?.[0]?.title||""},labels:{style:{color:this.tc?.hcTextColor||void 0,textOverflow:"none",cursor:"pointer"}},minorGridLineColor:this.tc?.hcLineColor||"#e6e6e6",gridLineColor:this.tc?.hcLineColor||"#e6e6e6",lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor},series:[],title:{text:""}},this.setup3DChart(),this.chartConfig.navigator={outlineColor:this.tc?.hcLineColor,xAxis:{gridLineColor:this.tc?.hcLineColor},yAxis:{gridLineColor:this.tc?.hcLineColor}},this.widget.type.toLowerCase()==="combochart"&&(this.chartConfig.yAxis=[{events:{},gridLineColor:this.tc?.hcLineColor,lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor,labels:{style:{color:this.tc?.hcTextColor||void 0}}},{events:{},opposite:!0,gridLineColor:this.tc?.hcLineColor,lineColor:this.tc?.hcLineColor,tickColor:this.tc?.hcLineColor,labels:{style:{color:this.tc?.hcTextColor||void 0}}}],this.widget.overrides&&this.widget.overrides[0]&&this.widget.overrides[0]._type==="comboChart")){let o=this.widget.overrides.find(a=>a._type.toLowerCase()==="combochart")?.yAxisList;if(o&&o.length)for(let a=0;a<o.length;a++)o[a].title&&(this.chartConfig.yAxis[a].title||(this.chartConfig.yAxis[a].title={}),this.chartConfig.yAxis[a].title.text=o[a].title),o[a].axisType&&(this.chartConfig.yAxis[a].type=o[a].axisType,o[a].axisType==="percent"&&(this.chartConfig.yAxis[a].min=0,this.chartConfig.yAxis[a].max=1,this.chartConfig.yAxis[a].endOnTick=!1,this.chartConfig.yAxis[a].labels={formatter(){return(this.value*100).toFixed(0)+"%"}})),o[a].maxValue!==void 0&&(this.chartConfig.yAxis[a].max=o[a].maxValue),o[a].minValue!==void 0&&(this.chartConfig.yAxis[a].min=o[a].minValue)}}setupHeaderButtons(){this.widget.isBtnZero===void 0&&(this.widget.isBtnZero=!1),this.widget.isBtnValues===void 0&&(this.widget.isBtnValues=!1),this.widget.isLegend===void 0&&(this.widget.isLegend=!0)}setupInline(){if(this.chartConfig.chart&&(this.chartConfig.chart.backgroundColor=""),this.chartConfig.plotOptions={series:{enableMouseTracking:!1}},this.chartConfig.legend={enabled:!1},this.widget.tile){let e={xAxis:{events:{},labels:{style:{color:window.getComputedStyle(document.querySelector("."+ue.const.fontColors[this.widget.tile.fontColor])).getPropertyValue("color")}}},yAxis:{events:{},labels:{style:{color:window.getComputedStyle(document.querySelector("."+ue.const.fontColors[this.widget.tile.fontColor])).getPropertyValue("color")}}}};this.us.mergeRecursive(this.chartConfig,e)}}showChartConfig(){let e=this.widget.name,i=this.ss.getWidgetsSettings(this.widget.dashboard)||{},s=()=>{this.ss.setWidgetsSettings(i,this.widget.dashboard)};i[e]||(i[e]={}),i[e].themeColors||(i[e].themeColors={});let r=Vr[this.chart?.options?.chart?.type||""]||{};this.sbs.showComponent({component:import("./chunk-2IM73FOQ.js"),inputs:{widgetSettings:i[e],appearance:r,onSave:s,onUpdate:o=>this.updateColors(o),chart:this.chart}})}setupAxisMinMax(e){let i=this.override,s=this.chartConfig.yAxis,r=this.chartConfig.xAxis,o=i?.yAxisList[0];e.some(a=>a<0)||(s.min=0),(this.baseType==="barChart"||this.baseType==="barChartStacked")&&(o=i?.xAxis),o?.minValue!==void 0&&(s.min=o.minValue),o?.maxValue!==void 0&&(s.max=o.maxValue)}removeUndefinedColors(e){let i=(s,r)=>{s[r]===void 0&&delete s[r]};i(e.plotOptions?.column,"borderColor"),i(e.plotOptions?.bar,"borderColor"),i(e.plotOptions?.pie,"borderColor"),i(e.plotOptions?.treemap,"borderColor"),i(e.plotOptions?.treemap,"borderColor"),i(e.drilldown?.activeAxisLabelStyle,"color"),i(e.drilldown?.activeDataLabelStyle,"color"),i(e.legend?.itemStyle,"color"),i(e.chart,"backgroundColor"),i(e.plotOptions?.series,"opacity"),i(e.plotOptions?.series?.dataLabels,"color"),i(e.yAxis?.labels?.style,"color"),i(e.yAxis,"minorGridLineColor"),i(e.yAxis,"gridLineColor"),i(e.yAxis,"lineColor"),i(e.yAxis,"tickColor"),i(e.xAxis?.labels?.style,"color"),i(e.xAxis,"minorGridLineColor"),i(e.xAxis,"gridLineColor"),i(e.xAxis,"lineColor"),i(e.xAxis,"tickColor"),this.removeEmptyObjects(e)}removeEmptyObjects(e){let i=!0;for(;i;)i=!1,Object.keys(e).forEach(s=>{typeof e[s]=="object"&&!Array.isArray(e[s])&&(Object.keys(e[s]).length===0?(i=!0,delete e[s]):this.removeEmptyObjects(e[s]))})}setup3DChart(){this.widget?.type.toLowerCase().includes("3d")&&(this.chartConfig.chart&&(this.chartConfig.chart.options3d={enabled:!0,alpha:0,beta:8,depth:50,viewDistance:8}),this.chartConfig.plotOptions?.column&&(this.chartConfig.plotOptions.column.depth=25),this.chartConfig.plotOptions?.bar&&(this.chartConfig.plotOptions.bar.depth=25),this.chartConfig.plotOptions?.pie&&(this.chartConfig.plotOptions.pie.depth=25))}sortTuplesArray(e,i){let s=new Map;i.forEach((r,o)=>{s.set(r,o)}),e.forEach((r,o)=>{r.originalIndex=o}),e.sort((r,o)=>{let a=s.get(r.dimension),l=s.get(o.dimension);return a!==void 0&&l!==void 0?a-l:a!==void 0?-1:l!==void 0?1:0})}sortTuplesBasedOnLabels(e){if(!e.Cols[0].tuples?.length)return;let i=this.widget.overrides?.find(r=>r._type==="chartLegend");if(!i)return;let s=i.legendLabels?.split(",");s&&this.sortTuplesArray(e.Cols[0].tuples,s)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var mo=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0,this.widget.type.toLowerCase()==="columnchartstacked"&&this.enableStacking()}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-column-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var xo=(()=>{class n extends pe{constructor(){super(...arguments),this.isSpinner=!1}ngOnInit(){this.widget.title=this.i18n.get("filters"),this.widget.toolbar=!0,this.widget.viewSize=this.getViewSize()}requestData(){}onHeaderButton(e){switch(e.name){case"setDefault":this.setFiltersToDefaults();break;case"byRows":this.setViewSize(0);break;case"by2columns":this.setViewSize(1);break;case"by3columns":this.setViewSize(2);break;case"by4columns":this.setViewSize(3);break;case"by5columns":this.setViewSize(4);break;case"by6columns":this.setViewSize(5);break}}setFiltersToDefaults(){for(let e=0;e<this.model.filters.length;e++){let i=this.fs.getFilter(e);i&&(i.isInterval=!1,i.isExclude=i.defaultExclude,i.fromIdx=-1,i.toIdx=-1,i.values.forEach(function(s){s.checked=s.default===!0}),this.fs.applyFilter(i,!0))}this.bs.broadcast("filterAll")}setViewSize(e){this.widget.viewSize=e,this.saveViewSize()}getViewSize(){let e=this.ss.getWidgetsSettings(this.widget.dashboard),i=this.widget.name;return!e[i]||e[i].viewSize===void 0?0:e[i].viewSize}saveViewSize(){let e=this.ss.getWidgetsSettings(this.widget.dashboard),i=this.widget.name;e[i]||(e[i]={}),e[i].viewSize=this.widget.viewSize,this.ss.setWidgetsSettings(e,this.widget.dashboard)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-empty-widget"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var hp=(()=>{class n extends Xt{constructor(){super(...arguments),this.isPercent=!0,this.totalSum=0,this.prevData=null,this.baseSeriesType="treemap"}ngOnInit(){super.ngOnInit(),this.totalSum=0,this.widget.overrides&&this.widget.overrides[0]&&this.widget.overrides[0].showPercentage===0&&(this.isPercent=!1);let e=this,i={levels:[{level:1,layoutAlgorithm:"sliceAndDice",dataLabels:{enabled:!0,align:"left",verticalAlign:"top",style:{fontSize:"15px",fontWeight:"bold"}}}],legend:{enabled:this.widget.isLegend},plotOptions:{series:{animation:!1,colorByPoint:!0,legendType:"point"},treemap:{dataLabels:{enabled:!0,formatter(){if(e.totalSum){let s=this.point.value/e.totalSum*100;return s=e.formatNumber(s,e.getDataPropByDataValue(this.series?.userOptions?.dimension)?.format||"#.##"),`${this.point.caption}<br>${s}%`}else return`${this.point.caption}`}}}},tooltip:{formatter(){let s=this.series.userOptions.caption,r=this.series.userOptions.format,o=this.point.value;return o=e.formatNumber(o,r),this.point.caption+"<br>"+s+": <b>"+o+"</b>"}}};this.us.mergeRecursive(this.chartConfig,i),delete this.chartConfig.plotOptions?.series?.dataLabels}parseData(e){return Ft(this,null,function*(){this.prevData=e,e&&e.Info&&(this.dataInfo=e.Info);let i=[];if(e.Cols[0].tuples.length){if(e.Cols[0].tuples[0].children)console.error("Data converter for this treemap chart not implemented!");else{if(yield this.checkForAutoDrill(e))return;i=[];let s=0;for(let a=0;a<e.Data.length;a++)s+=parseFloat(e.Data[a]);for(let a=0;a<e.Cols[1].tuples.length;a++)i.push({caption:e.Cols[1].tuples[a].caption,id:e.Cols[1].tuples[a].caption+"<br>"+parseFloat(parseFloat(e.Data[a])/s*100).toFixed(2).toString()+"%",value:parseFloat(e.Data[a]),y:parseFloat(e.Data[a]),path:e.Cols[1].tuples[a].path,name:e.Cols[1].tuples[a].caption});let r="",o="";e.Cols[0].tuples[0]&&(r=e.Cols[0].tuples[0].caption,o=e.Cols[0].tuples[0].format),this.totalSum=e.Data.map(a=>parseFloat(a)||0).reduce((a,l)=>a+l,0),this.addSeries({data:i,name:"",layoutAlgorithm:"squarified",caption:r,dimension:e.Cols[0].tuples[0].dimension,format:o,dataLabels:{enabled:!0}},void 0,void 0,!0)}this.toggleLegend(this.widget.isLegend)}})}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-tree-map"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var yo=Jt(Ms());var cp=(()=>{class n extends Xt{constructor(){super(...arguments),this.thirdTitle=""}ngOnInit(){super.ngOnInit();let e=this,i={plotOptions:{bubble:{minSize:"5%",maxSize:"35%",sizeBy:"width"},series:{cursor:null,point:{events:{click:null}}}},chart:{zoomType:"xy"},xAxis:{tickWidth:10,title:{enabled:!0}},tooltip:{formatter:function(){let s=this.series.userOptions.format1,r=this.series.userOptions.format2,o=this.series.userOptions.format3,a=this.x,l=this.y,h=this.point.z;s&&(a=(0,yo.default)(a).format(s)),r&&(l=(0,yo.default)(l).format(r)),o&&(h=(0,yo.default)(h).format(o));let c=e.thirdTitle||"radius";return this.series.name+"<br/>"+e.chartConfig.xAxis.title.text+":<b>"+a+"</b><br/>"+e.chartConfig.yAxis.title.text+":<b>"+l+"</b>"+(h?"<br>"+c+": <b>"+h.toString()+"</b>":"")}}};this.us.mergeRecursive(this.chartConfig,i)}getSeriesNames(e){let i={};if(e.Cols[0].tuples.length==4)for(let s=3;s<e.Data.length;s+=4)i[e.Data[s]]=!0;return Object.keys(i)}mapBySeries(e,i){let s={};if(e.Cols[0].tuples.length==4)for(let r in i)i.hasOwnProperty(r)&&(s[i[r]]=[]);else{let r="default";e.Cols[1]&&e.Cols[1].tuples[0]&&(r=e.Cols[1].tuples[0].caption),s[r]=[]}return s}parseData(e){return Ft(this,null,function*(){let i=this.getSeriesNames(e);this.clearSeries(),e.Cols[0].tuples.length>=1&&(this.chartConfig.xAxis.title.text=e.Cols[0].tuples[0].caption),e.Cols[0].tuples.length>=2&&(this.chartConfig.yAxis.title.text=e.Cols[0].tuples[1].caption),e.Cols[0].tuples.length>=3&&(this.thirdTitle=e.Cols[0].tuples[2].caption);let s=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this bubble chart not implemented!");else{let r=e.Cols[0].tuples.length,o="",a="",l="";e.Cols[0].tuples[0]&&(o=e.Cols[0].tuples[0].format),e.Cols[0].tuples[1]&&(a=e.Cols[0].tuples[1].format),e.Cols[0].tuples[2]&&(l=e.Cols[0].tuples[2].format);let h={},c=!1,g;if(this.hasOption("isTop")){c=!0;let y=(this.widget.controls||[]).filter(function(b){return b.action==="setRowCount"})[0];g=y?y.value||Yr:Yr}let d=c?g:e.Data.length;d>e.Data.length&&(d=e.Data.length);for(let p=0;p<d;p+=r){let y=e.Cols[1].tuples[Math.floor(p/r)].caption;h[y]||(h[y]=[]);let b={x:e.Data[p],y:e.Data[p+1],z:e.Data[p+2]};h[y].push(b)}for(let p in h)this.addSeries({data:h[p],name:p,format1:o,format2:a,format3:l})}this.updateChart(!0)})}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-bubble-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var bo=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={};this.widget.type.toLowerCase()!=="combochart"&&(e={plotOptions:{series:{lineWidth:3,marker:{enabled:!1}}}}),this.widget.type.toLowerCase()==="linechartmarkers"&&(e={series:{marker:{enabled:!0}}}),this.us.mergeRecursive(this.chartConfig,e)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-line-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var yh=Jt(Ms());var dp=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit();let e={series:{fillColor:"#dddddF"},plotOptions:{boxplot:{fillColor:"#fafafF",whiskerLength:0,colorByPoint:!0,lineWidth:3,stemWidth:0}},tooltip:{formatter:function(){let i=this.series.userOptions.caption1||"Minimum",s=this.series.userOptions.caption2||"Maximum",r=this.series.userOptions.format1,o=this.series.userOptions.format2,a=this.point.low,l=this.point.high;return r&&(a=(0,yh.default)(a).format(r)),o&&(l=(0,yh.default)(l).format(o)),this.key+"<br/>"+s+":<b>"+l+"</b><br/>"+i+":<b>"+a+"</b>"}}};this.us.mergeRecursive(this.chartConfig,e)}parseData(e){return Ft(this,null,function*(){let i=this.chartConfig.xAxis;i.categories=[];for(let r=0;r<e.Cols[1].tuples.length;r++)i.categories.push(e.Cols[1].tuples[r].caption.toString());this.chartConfig.series=[];let s=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this hi-low chart not implemented!");else{for(let h=0;h<e.Cols[1].tuples.length;h++)s.push({q1:e.Data[h*2],q3:e.Data[h*2+1],low:e.Data[h*2],high:e.Data[h*2+1],cube:e.Info.cubeName,path:e.Cols[1].tuples[h].path});let r="",o="",a="",l="";e.Cols[0].tuples[0]&&(r=e.Cols[0].tuples[0].caption,a=e.Cols[0].tuples[0].format),e.Cols[0].tuples[1]&&(o=e.Cols[0].tuples[1].caption,l=e.Cols[0].tuples[1].format),this.addSeries({data:s,caption1:r,caption2:o,format1:a,format2:l})}this.updateChart(!0)})}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-hi-low-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var up=Jt(Ms()),pp=Jt(Co());var Qf=["charts"];function tg(n,t){n&1&&Ht(0,"div",null,0)}var bh=(()=>{class n extends Xt{constructor(){super(...arguments),this.confs=[],this.charts=[]}ngOnInit(){super.ngOnInit();let e={title:{verticalAlign:"bottom",style:{fontFamily:Yh}},tooltip:{enabled:!1},legend:{enabled:!1},chart:{plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1},plotOptions:{series:{dataLabels:{enabled:!0,formatter:function(){let i=this.point.y,s=this.series.userOptions.format||"#.##";return s&&(i=(0,up.default)(i).format(s.replace(",","."))),i}}}},pane:{startAngle:-150,endAngle:150,background:[{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#333"]]},borderWidth:0,outerRadius:"109%"},{backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#333"],[1,"#FFF"]]},borderWidth:1,outerRadius:"107%"},{},{backgroundColor:"#DDD",borderWidth:0,outerRadius:"105%",innerRadius:"103%"}]}};this.chartConfig.yAxis={minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666"},this.chartConfig.chart?.type==="solidgauge"&&(e.pane={center:["50%","85%"],size:"140%",startAngle:-90,endAngle:90,background:[{backgroundColor:"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}]}),this.us.mergeRecursive(this.chartConfig,e)}ngAfterViewInit(){}createChart(){let e=this.chartsEl?.toArray().map(i=>i.nativeElement);this.charts=[],this.confs.forEach((i,s)=>{i.chart&&(i.chart.renderTo=e?.[s]),this.charts.push(pp.default.chart(i))})}retrieveData(e){let i;if(this.hideLoading(),this.charts.forEach(s=>{for(;s.series.length>0;)s.series[0].remove()}),this.widgetData=JSON.parse(JSON.stringify(e)),e.Error){this.showError(e.Error);return}if(e){if(!e.Cols)return;e.Cols[0].tuples.length===0&&e.Data.length!==0&&e.Cols[0].tuples.push({caption:this.i18n.get("count")}),this.parseData(e)}}parseData(e){return Ft(this,null,function*(){if(this.confs.length===0){for(let i=0;i<e.Cols[0].tuples.length;i++){let s=e.Cols[0].tuples[i].caption,r=this.widget.dataProperties.find(a=>a.dataValue===e.Cols[0].tuples[i].dimension);r&&r.label&&r.label!=="$auto"&&(s=r.label),this.confs.push(this.us.mergeRecursive({},this.chartConfig));let o=this.confs[this.confs.length-1];o.title&&(o.title.text=s)}this.cd.markForCheck(),this.cd.detectChanges(),setTimeout(()=>{this.createChart(),this.parseData(e)});return}for(let i=0;i<e.Cols[0].tuples.length;i++){let s=e.Data[i];s||(s=0),this.charts[i]&&this.clearSeries(this.charts[i]);let r=this.confs[i].yAxis;if(parseFloat(s)<1)r.min=0,r.max=1;else if(parseInt(s,10)===0)r.min=0,r.max=10;else{s=parseInt(s,10);let h=s.toString().length;r.max=Math.pow(10,h),r.min=0}let o=this.widget.dataProperties[i];if(o){let h=parseFloat(o.rangeLower),c=parseFloat(o.rangeUpper);isNaN(h)||(r.min=h),isNaN(c)||(r.max=c);let g=parseFloat(o.thresholdLower),d=parseFloat(o.thresholdUpper);if(isNaN(g)&&(g=r.min||0),isNaN(d)&&(d=r.max||0),g<r.min&&(g=r.min),d>r.max&&(d=r.max),r.plotBands=[],g!==r.min&&r.plotBands.push({from:r.min,to:g,color:"rgba(255, 0, 0, 0.4)",zIndex:5}),d!==r.max&&r.plotBands.push({from:d,to:r.max,color:"rgba(255, 0, 0, 0.4)",zIndex:5}),o.targetValue){let p=parseFloat(o.targetValue);r.plotLines=[{value:p,color:"rgba(0, 180, 0, 0.4)",width:3,zIndex:5}]}}let a="";this.widget.properties&&this.widget.properties.format&&(a=this.widget.properties.format),e.Cols[0].tuples[i].format&&(a=e.Cols[0].tuples[i].format);let l=e.Cols[0].tuples[i].caption;o&&o.label&&o.label!=="$auto"&&(l=o.label),this.addSeries({data:[e.Data[i]||0],name:l,format:a},this.charts[i],this.confs[i]),this.charts[i]&&this.charts[i].update(this.confs[i])}})}onResize(){super.onResize(),this.charts.forEach(e=>e.reflow())}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-speedometer-chart"]],viewQuery:function(i,s){if(i&1&&Si(Qf,5),i&2){let r;Mi(r=Ei())&&(s.chartsEl=r)}},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[["charts",""]],template:function(i,s){i&1&&ce(0,tg,2,0,"div",null,he),i&2&&de(s.confs)},styles:["[_nghost-%COMP%]{display:flex}div[_ngcontent-%COMP%]{flex:1 1 100%}"]})}}return n})();var fp=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={plotOptions:{series:{colorByPoint:!1},area:{stacking:"normal",marker:{enabled:!1}}}};this.us.mergeRecursive(this.chartConfig,e)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-area-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var gp=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0;let e={plotOptions:{series:{cursor:null,point:{events:{click:null}}},pie:{allowPointSelect:!1,dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.series.options.size}}}},tooltip:{formatter:function(){return this.key+": <b>"+this.y+"</b><br/>"}}};this.us.mergeRecursive(this.chartConfig,e)}parseData(e){return Ft(this,null,function*(){let i=[];this.clearSeries();let s=Math.max.apply(null,e.Data);for(let r=0;r<e.Cols[1].tuples.length;r++)i.push([e.Cols[1].tuples[r].caption,e.Data[r]]),this.addSeries({innerSize:"0%",size:Math.floor(e.Data[r]/s*100).toString()+"%",data:[[e.Cols[1].tuples[r].caption,e.Data[r]]],borderWidth:2});this.updateChart(!0)})}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-area-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var Ur=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit(),this.widget.isBtnValues=!0;let e={series:{allowPointSelect:!0,stickyTracking:!1}};this.chartConfig.plotOptions||(this.chartConfig.plotOptions={}),this.us.mergeRecursive(this.chartConfig.plotOptions,e),(this.widget.type==="donutChart"||this.widget.type==="donutChart3D")&&(e={plotOptions:{pie:{innerSize:"20%"}}},this.us.mergeRecursive(this.chartConfig,e)),(this.widget.type==="pieChart3D"||this.widget.type==="donutChart3D")&&(e={chart:{options3d:{enabled:!0,alpha:55,beta:0}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35}}},this.us.mergeRecursive(this.chartConfig,e));let i=this,s={plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,formatter:function(){let r=i.override,o=this,a=r?.valueLabelFormat||o.series.options.format,l=this.point.name,h=i.formatNumber(this.y,a);i.widget.showValues||(h=""),i.widget["btn.ShowAnnotations"]===!1&&(l="");let c=i.formatNumber(this.point.percentage,i.getDataPropByDataValue(this.series?.userOptions?.name)?.format||"#.##")+"%";return i.widget["btn.ShowPercents"]||(c=""),[l,h,c].filter(g=>g).join(", ")}},showInLegend:!0},series:{dataLabels:{formatter:function(){let r=this,o=r.series.options.format,a=r.y;return o&&(a=i.formatNumber(a,o)),r.key+", "+a}},point:{events:{legendItemClick:function(){let r=this.path,o=this.name,a=this.visible;i.chart?.series.forEach(l=>{l.data.forEach(h=>{(r&&h.path===r||o&&h.name===o)&&(h!==this&&h.update({visible:!a}),a&&h.setState("normal"))})})},mouseOut:function(){let r=[],o=this.series,a=this.index;o.chart.series.forEach(l=>{l!==o&&r.push(l.points[a])}),r.forEach(l=>{l.setState("")})},mouseOver:function(){let r=[],o=this.series,a=this.index;o.chart.series.forEach(l=>{l!==o&&r.push(l.points[a])}),r.forEach(l=>{l.setState("hover")})}}}}}};this.us.mergeRecursive(this.chartConfig,s),this.chartConfig?.plotOptions?.series?.dataLabels||(this.chartConfig.plotOptions.series.dataLabels={}),(this.chartConfig?.plotOptions?.pie?.dataLabels).enabled=this.isValuesVisible(),this.widget.showValues,this.updateChart(!0,!0)}isValuesVisible(){return this.widget.showValues||this.widget["btn.ShowAnnotations"]}onHeaderButton(e){(e.name==="ShowValues"||e.name==="btn.ShowAnnotations"||e.name==="btn.ShowPercents")&&((this.chartConfig.plotOptions?.pie?.dataLabels).enabled=this.isValuesVisible(),this.updateChart(!0),this.chart?.series.forEach((i,s)=>{s!==0&&(i.options.showInLegend=!1)}),(this.chart?.series.length??0)>1&&this.chartConfig.legend&&this.chart?.legend.update(this.chartConfig.legend,!0)),super.onHeaderButton(e)}addSeries(e,i,s,r=!1){let o=this._currentData?.Cols[0]?.tuples?.length||1,a=this._currentData?.Cols[1]?.tuples?.length||1;if(o!==1){let l=100/o,h=this.chart?.series.length||0;e.center=[(l/2+h*l).toString()+"%","50%"],h>a&&(e.showInLegend=!1)}super.addSeries(e,i,s,r),this.chart&&this.chart.series.length>1&&(this.chart.series[this.chart.series.length-1].options.showInLegend=!1)}updateSeriesVisibilityAndPositionForMultiplePies(){this.chart?.series.forEach((e,i)=>{e.options.showInLegend=i===0})}onLegendItemHover(e){super.onLegendItemHover(e),(this.chart?.series?.length??0)>1&&this.chart?.series.forEach(i=>{i!==e.series&&i.setState("inactive",!0)}),this.chartConfig.plotOptions.series.point.events.mouseOver.call(e)}onLegendItemOut(e){super.onLegendItemOut(e),(this.chart?.series?.length??0)>1&&this.chart?.series.forEach(i=>{i!==e.series&&i.setState("normal",!0)}),this.chartConfig.plotOptions.series.point.events.mouseOut.call(e)}parseData(e){return Ft(this,null,function*(){yield Sh(n.prototype,this,"parseData").call(this,e),this.toggleLegend(this.widget.isLegend)})}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-line-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var vh=Jt(Ms());var mp=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit(),this.chartConfig.plotOptions={series:{lineWidth:3,marker:{enabled:!0}}};let e=this;this.chartConfig.tooltip={formatter(){let i=this.series.userOptions,s=i.format1,r=i.format2,o=this.y,a=this.x;s&&(o=(0,vh.default)(o).format(s)),r&&(a=(0,vh.default)(a).format(r));let l=e.chartConfig.yAxis,h=e.chartConfig.xAxis;return l.title?.text+":<b>"+o+"</b><br/>"+h.title?.text+":<b>"+a+"</b>"}},this.updateChart()}parseData(e){return Ft(this,null,function*(){let i="",s="";if(e.Cols[0].tuples.length>=1){let o=this.chartConfig.xAxis;o?.title&&(o.title.text=e.Cols[0].tuples[0].caption),i=e.Cols[0].tuples[0].format}if(e.Cols[0].tuples.length>=2){let o=this.chartConfig.yAxis;o?.title!==void 0&&(o.title.text=e.Cols[0]?.tuples[1]?.caption),i=e.Cols[0].tuples[1].format}this.chartConfig.series=[];let r=[];if(e.Cols[0].tuples[0].children)this.showError("Data converter for this xy chart not implemented!");else{for(let o=0;o<e.Cols[1].tuples.length;o++)r.push([parseFloat(e.Data[o*2]),parseFloat(e.Data[o*2+1])]);this.addSeries({data:r,name:"",format1:i,format2:s}),(this.chartConfig?.xAxis).tickInterval=Math.round((r[r.length-1][0]-r[0][0])/10)}this.updateChart(!0)})}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-line-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var xp=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit(),this.widget.isBtnValues=!0;let e=this;function i(){let r,o,a,l=this,h=new Date(l.x),c=h.toLocaleDateString();if(h.getHours()!==0&&h.getMinutes()!==0&&h.getSeconds()!==0&&(c+=" "+h.toLocaleTimeString()),l.series)return o=l.series.options.format,a=l.y,a=e.formatNumber(a,o),r="<b>"+c+'</b><br><span style="color:'+l.series.color+'">\u25CF</span>'+l.series.name+":<b> "+a,r;r="<b>"+c+"</b><br>";for(let g=l.points.length-1;g>-1;g--)o=l.points[g].series.options.format,a=l.points[g].y,a=e.formatNumber(a,o),r+='<span style="color:'+l.points[g].series.color+'">\u25CF</span>'+l.points[g].series.name+":<b> "+a+"<br>";return r}let s={options:{chart:{zoomType:"x"},tooltip:{formatter:i},navigator:{enabled:!0},scrollbar:{enabled:!1}},series:[],useHighStocks:!0,loading:!0};this.us.mergeRecursive(this.chartConfig,s)}parseData(e){return Ft(this,null,function*(){e&&e.Info&&(this.dataInfo=e.Info),this.chartConfig.yAxis.min=this.getMinValue(e.Data),this.clearSeries();let i=[],s,r;if(e.Cols[0].tuples[0].children){let o=0;for(let a=0;a<e.Cols[0].tuples.length;a++)for(let l=0;l<e.Cols[0].tuples[a].children.length;l++){i=[];for(let h=0;h<e.Cols[1].tuples.length;h++)s=this.convertDateFromCache(this.extractValue(e.Cols[1].tuples[h].path)),i.push([s,+e.Data[e.Cols[0].tuples.length*e.Cols[0].tuples[a].children.length*h+a*e.Cols[0].tuples[a].children.length+l]||0]),i[i.length-1][1]===""&&(i[i.length-1][1]=null),o++;this.addSeries({data:i,name:e.Cols[0].tuples[a].caption+"/"+e.Cols[0].tuples[a].children[l].caption,format:e.Cols[0].tuples[a].format})}}else for(let o=e.Cols[0].tuples.length-1;o>=0;o--){for(i=[],r=0;r<e.Cols[1].tuples.length;r++){s=this.convertDateFromCache(this.extractValue(e.Cols[1].tuples[r].path));let a=+e.Data[r*e.Cols[0].tuples.length+o];a!==void 0&&i.push([s,a||0])}this.addSeries({data:i,name:e.Cols[0].tuples[o].caption,format:e.Cols[0].tuples[o].format})}this.initFormatForSeries(e),this.updateChart(!0)})}addDays(e,i){let s=new Date(e);return s.setDate(e.getDate()+i),s}extractValue(e){let i=e.indexOf("&[");return i==-1?"":e.substring(i+2,e.length-1)}getDate(e){let i=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],s=Date.parse(e);if(!isNaN(s))return s;if(e.split("-").length==2){let r=e.split("-"),o=i.indexOf(r[0].toLowerCase());if(o!=-1)return Date.parse((o+1).toString()+"/01/"+r[1])}else if(e.split(" ").length==2&&(e.split(" ")[1].split(":").length===0&&(e+=":00"),s=Date.parse(e.replace(/-/g,"/")),!isNaN(s)))return s;return 0}convertDateFromCache(e){let i,s;if(e===""&&e===void 0||e===null)return null;let r=e.toString();if(e.length===7&&e.charAt(4)==="W")return s=1+(parseInt(e.substring(5,7))-1)*7,i=parseInt(e.substring(0,4)),Date.parse(new Date(i,0,s));if(r.length==4)return this.getDate(e);if(r.indexOf("-")!=-1)return this.getDate(e);if(r.indexOf(" ")!=-1)return this.getDate(e);if(r.length==6){i=r.substr(0,4);let o=r.substr(4,2);return Date.parse(new Date(parseInt(i),parseInt(o)-1,1))}if(r.length==5&&!isNaN(parseInt(r))){let o=new Date(1840,11,31),a=r.toString().split(",");s=parseInt(a[0]);let l;return a.length>1&&(l=parseInt(a[1])),o=this.addDays(o,parseInt(s)),l&&o.setSeconds(l),Date.parse(o)}else return this.getDate(e)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-line-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var Ch=(()=>{class n extends Xt{ngOnInit(){super.ngOnInit(),this.widget.isBtnZero=!0,this.widget.isBtnValues=!0,this.widget.type.toLowerCase()==="barchartstacked"&&this.enableStacking()}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-bar-chart"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();var yp=Jt(Co());function eg(n,t){if(n&1&&(Dt(0,"div",2)(1,"div",4),ne(2),It(),Ht(3,"span")(4,"span")(5,"span")(6,"span"),Dt(7,"div",4),ne(8),It()()),n&2){let e=Nt().$implicit;Lt(2),Fe(e.rangeLower||"0"),Lt(6),Fe(e.rangeUpper||"0")}}function ig(n,t){if(n&1&&(Dt(0,"div"),ne(1),It()),n&2){let e=Nt().$implicit;Ze("align-left",e.display==="label"),Lt(),ws(" ",e.label," ")}}function sg(n,t){if(n&1&&(Dt(0,"td"),sr(1,eg,9,2,"div",2)(2,ig,2,3,"div",3),It()),n&2){let e,i=t.$implicit;Ze("plotbox-cell",i.display==="plotBox"),Lt(),rr((e=i.display)==="plotBox"?1:2)}}function rg(n,t){if(n&1&&(Dt(0,"div"),Ht(1,"img",7),It()),n&2){let e=Nt().$index,i=Nt().$index,s=Nt();Lt(),_s("src",s.data[i][e],Cs)}}function ng(n,t){if(n&1&&Ht(0,"span",10),n&2){let e=Nt(2).$index,i=Nt().$index,s=Nt();Oe("left",s.targets[i][e],"%")}}function og(n,t){if(n&1&&(Dt(0,"div",8),sr(1,ng,1,2,"span",9),It()),n&2){let e=Nt().$index,i=Nt().$index,s=Nt();Oe("background-color",s.color)("width",s.data[i][e],"%"),Lt(),rr(s.targets[i][e]?1:-1)}}function ag(n,t){if(n&1&&(Dt(0,"div"),ne(1),It()),n&2){let e=Nt().$index,i=Nt().$index,s=Nt();Lt(),ws(" ",s.data[i]?s.data[i][e]:""," ")}}function lg(n,t){if(n&1&&(Dt(0,"td"),sr(1,rg,2,1,"div")(2,og,2,5,"div",6)(3,ag,2,1,"div"),It()),n&2){let e,i=t.$implicit,s=Nt(2);Oe("width",i.display==="plotBox"?100/s.props.length*2:null,"%"),Ze("align-left",i.display==="label")("align-center",i.display==="itemNo"),Lt(),rr((e=i.display)==="trendLine"?1:e==="plotBox"?2:3)}}function hg(n,t){if(n&1&&(Dt(0,"tr"),ce(1,lg,4,7,"td",5,he),It()),n&2){let e=Nt();Lt(),de(e.props)}}function cg(n,t){if(n&1&&(Dt(0,"td"),ne(1),It()),n&2){let e=t.$implicit;Lt(),ws(" ",e," ")}}function dg(n,t){if(n&1&&(Dt(0,"tr",1),ce(1,cg,2,1,"td",null,he),It()),n&2){let e=Nt();Lt(),de(e.footerValues)}}var bp=(()=>{class n extends pe{constructor(){super(...arguments),this.widget={},this.columns=[],this.rows=[],this.data=[],this.targets=[],this.color="",this.props=[],this.hasFooter=!1,this.footerValues=[],this.san=Qt(Oh),this.sbs=Qt(qr),this.totalByColumn={},this.originalData=[]}ngOnInit(){super.ngOnInit(),this.color=yp.default.getOptions().colors?.[0],this.tc&&this.tc.hcColors&&(this.color=this.tc.hcColors[0]),this.subColorsConfig=this.bs.subscribe("charts:update-colors",e=>this.updateColors(e)),this.prepareProps(),this.props?.length||this.override?.columns?.length&&(this.props=this.override.columns)}ngOnDestroy(){this.subColorsConfig?.unsubscribe(),super.ngOnDestroy()}retrieveData(e){super.retrieveData(e),!e.Error&&(this.originalData=e.Data,this.columns=e.Cols[0].tuples,this.rows=e.Cols[1]?.tuples||[{}],this.prepareData(e.Data),this.cd.detectChanges())}prepareProps(){this.props=this.widget.dataProperties,this.props&&this.props.forEach(e=>e.label=e.label.replace("\\n",`
`))}onHeaderButton(e){switch(super.onHeaderButton(e),e.name){case"chartConfig":this.showChartConfig();break}}getValue(e,i,s,r,o){switch(s.display||""){case"itemNo":return(i+1).toString();case"label":return this.rows[i].caption;case"":case"value":case"plotBox":{let a=s.format,l=this.getPropValue(e,i,s);if(s.display==="plotBox"){let h=s.rangeLower||0,c=s.rangeUpper||0;return r!==void 0&&(h=r),o!==void 0&&(c=o),s.showAs==="target%"?parseFloat(l)/parseFloat(this.getPropValue(e,i,s,"targetValue"))*100:c-h===0?0:(l-h)/(c-h)*100}else{if(l==="")return"";if(s.showAs==="target%"){let h=this.getPropValue(e,i,s,"targetValue");return this.formatNumber(l/h,a)}return s.showAs==="sum%"?this.formatNumber(l/this.totalByColumn[s.dataValue],a||"#.##%"):this.formatNumber(l,a)}}case"trendLine":{let a=this.getColumnIndex(s.dataValue),l="";return a!==-1&&(l=e[i*this.columns.length+a]),this.getSvgForTrendLine(s,l)}}return 0}prepareFooter(){if(this.hasFooter=this.props.some(e=>e.summary==="sum"),this.footerValues=[],!!this.hasFooter)for(let e=0;e<this.props.length;e++){let i=this.props[e].format,s=this.props[e].summary;this.footerValues[e]="",s&&(this.footerValues[e]=this.formatNumber(this.calcTotal(e,s),i))}}updateColors(e){this.tc=e,this.color=e?.hcColors[0],this.originalData&&this.prepareData(this.originalData),this.cd.detectChanges()}showChartConfig(){let e=this.widget.name,i=this.ss.getWidgetsSettings(this.widget.dashboard)||{},s=()=>{this.ss.setWidgetsSettings(i,this.widget.dashboard)};i[e]||(i[e]={}),i[e].themeColors||(i[e].themeColors={}),this.sbs.showComponent({component:import("./chunk-2IM73FOQ.js"),inputs:{appearance:{showSeries:[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],showBackground:!1,showLines:!1,showText:!1,showBorder:!1},widgetSettings:i[e],onSave:s,onUpdate:r=>this.updateColors(r)}})}getPropValue(e,i,s,r="dataValue"){let o=!isNaN(parseFloat(s[r])),a=s[r];if(!o){let l=this.getColumnIndex(s[r]);l===-1?a=0:a=e[i*this.columns.length+l]}return a}getColumnIndex(e){return this.columns.findIndex(s=>s.dimension?e.split("/").includes(s.dimension):/^Properties\(\"([^)]+)\"\)/.exec(s.valueID)?.[1]===e)}prepareData(e){let i=[];for(let s=0;s<this.props.length;s++){let r,o;if(this.props[s].rangeLower!==void 0&&this.props[s].rangeLower!==""&&(r=this.props[s].rangeLower),this.props[s].rangeUpper!==void 0&&this.props[s].rangeUpper!==""&&(o=this.props[s].rangeUpper),r!==void 0&&o!==void 0&&!isNaN(r)&&!isNaN(o)){i.push({min:r,max:o});continue}if(this.props[s].display==="plotBox"){let a=this.getColumnIndex(this.props[s].dataValue),l=e.filter((h,c)=>(c+a)%this.columns.length===0);o=Math.max(...l),r=Math.min(...l)}r=0,i.push({min:r,max:o}),this.props[s].rangeLower||(this.props[s].rangeLower=r),this.props[s].rangeUpper||(this.props[s].rangeUpper=o)}this.preparePercentageSums(e),this.data=[],this.targets=[];for(let s=0;s<this.rows.length;s++){this.data[s]||(this.data[s]=[],this.targets[s]=[]);for(let r=0;r<this.props.length;r++){let o=i[r].min,a=i[r].max;if(this.props[r].rangeLower&&typeof this.props[r].rangeLower=="string"&&(o=this.getPropValue(e,s,this.props[r],"rangeLower")),this.props[r].rangeUpper&&typeof this.props[r].rangeUpper=="string"&&(a=this.getPropValue(e,s,this.props[r],"rangeUpper")),this.data[s][r]=this.getValue(e,s,this.props[r],o,a),this.props[r].showAs!=="target%"&&this.props[r].targetValue&&a-o!==0){let l=1e4;this.targets[s][r]=l*1/this.data[s][r]*(this.getPropValue(e,s,this.props[r],"targetValue")-o)/(a-o)}}}this.prepareFooter()}getSvgForTrendLine(e,i){let r=[];typeof i=="string"?r=i.split(",").map(g=>{if(!g)return 0;let d=parseFloat(g);return isNaN(d)?0:d}):typeof i=="number"?r=[i]:Array.isArray(i);let o=Math.max(...r),a=Math.min(...r),l=(r.length-1)*4,h=`<svg xmlns="http://www.w3.org/2000/svg" width="${l}px" height="40px" viewBox="0 0 ${l}px 40px">
                        <path vector-effect="non-scaling-stroke" stroke-width="2" stroke="${this.color}" fill="none" d="`,c=0;for(let g=0;g<r.length;g++){let d=parseFloat(r[g]||"0");d=35-d/(o-a)*30,g===0?h+=`M ${c} ${d} `:h+=`L ${c} ${d} `,c+=4}return h+='"/></svg>',this.san.bypassSecurityTrustUrl("data:image/svg+xml;base64,"+btoa(h))}calcTotal(e,i){let s=this.getColumnIndex(this.props[e].dataValue);if(s===-1)return 0;let r=0;for(let o=0;o<this.rows.length;o++)r+=parseFloat(this.originalData[o*this.columns.length+s]);return i==="avg"&&(r=r/this.rows.length),r}preparePercentageSums(e){if(this.totalByColumn={},!this.override)return;let i=this.override.columns?.filter(s=>s.showAs==="sum%");i?.length&&i.forEach(s=>{let r=this.columns.findIndex(o=>o.dimension===s.dataValue);this.totalByColumn[s.dataValue]=e.reduce((o,a,l)=>{if(l%this.columns.length!==r||a==="")return o;let h=parseFloat(a);return isNaN(h)?o:o+h},0)})}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-scorecard"]],inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:9,vars:1,consts:[[3,"plotbox-cell"],[1,"footer"],[1,"axis"],[3,"align-left"],[1,"label"],[3,"width","align-left","align-center"],[1,"box",3,"background-color","width"],[3,"src"],[1,"box"],[1,"target",3,"left"],[1,"target"]],template:function(i,s){i&1&&(Dt(0,"table")(1,"thead")(2,"tr"),ce(3,sg,3,3,"td",0,he),It()(),Dt(5,"tbody"),ce(6,hg,3,0,"tr",null,he),sr(8,dg,3,0,"tr",1),It()()),i&2&&(Lt(3),de(s.props),Lt(3),de(s.rows),Lt(2),rr(s.hasFooter?8:-1))},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{overflow-y:auto}table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;width:100%}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{color:#686868}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{position:relative;z-index:2}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{white-space:pre;text-align:right;position:sticky;top:0;padding:0 10px;height:40px;background-color:var(--cl-widget-filter-bg);border-bottom:1px solid var(--cl-header-border)}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-left[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-center[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:6px 10px;text-align:right}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-left[_ngcontent-%COMP%]{text-align:left}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.align-center[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:30px}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#00000003}.box[_ngcontent-%COMP%]{height:18px;flex-shrink:0;flex-grow:0;position:relative}.boxes-container[_ngcontent-%COMP%]{display:flex}.boxes-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:40px;flex-shrink:0;flex-grow:0;margin-right:10px}.axis[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:10px;border-bottom:1px solid gray;height:6px;border-left:1px solid gray;margin-top:28px;position:relative}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]{position:absolute;text-align:center;top:-14px}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]:first-child{left:0;transform:translate(-50%)}.axis[_ngcontent-%COMP%] > .label[_ngcontent-%COMP%]:last-child{right:0;transform:translate(50%)}.axis[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;border-right:1px solid gray}.footer[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{color:var(--cl-txt);background-color:var(--cl-widget-filter-bg);border-top:1px solid var(--cl-header-border);position:sticky;bottom:0}.target[_ngcontent-%COMP%]{display:inline-block;width:2px;transform:translate(-1);background-color:#1c1d20;height:calc(100% + 4px);position:absolute;top:-2px}.plotbox-cell[_ngcontent-%COMP%]{z-index:1}"]})}}return n})();var Js=(()=>{class n extends pe{constructor(){super(...arguments),this.data=[]}retrieveData(e){this.hideLoading(),this.prepareMeterData(e),this.cd.markForCheck(),this.cd.detectChanges()}prepareMeterData(e){if(this.data=[],!e)return;let i=!!this.widget?.dataProperties?.length,s=i?this.widget?.dataProperties:e.Cols[0].tuples;for(let r=0;r<s.length;r++){let o;i?o=s[r]:o=this.getDataPropByDataValue(s[r].dimension);let a,l="";if(i){let y=e.Cols[0].tuples.findIndex(b=>b.dimension===o.dataValue);l=e.Cols[0].tuples[y].caption,a=e.Data[y]}else l=s[r].caption,a=e.Data[r];let h=1,c=parseFloat(o.rangeLower.toString()),g=parseFloat(o.rangeUpper.toString());isNaN(c)&&(c=0),isNaN(g)&&(g=100);let d=c,p=g;isNaN(d)&&(d=33.33333),isNaN(p)&&(p=66.66666),a<d&&(h=0),a>=p&&(h=2),this.data.push({caption:l,state:h,value:a,min:c,max:g})}}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ct,vt],decls:0,vars:0,template:function(i,s){},encapsulation:2})}}return n})();function ug(n,t){if(n&1&&(Dt(0,"div",0),Ht(1,"img",1),Dt(2,"label"),ne(3),It()()),n&2){let e=t.$implicit;Lt(),_s("src","assets/img/smiley/"+(e.state===1?"smile-yellow.svg":e.state===0?"smile-red.svg":"smile-green.svg"),Cs),Lt(2),Fe(e.caption)}}var vp=(()=>{class n extends Js{constructor(){super(...arguments),this.widget={}}get gridColumns(){return"repeat("+(this.data?.length>=3?3:this.data?.length||0).toString()+", 1fr)"}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-wsmiley"]],hostVars:2,hostBindings:function(i,s){i&2&&Oe("grid-template-columns",s.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[[1,"card"],[3,"src"]],template:function(i,s){i&1&&ce(0,ug,4,2,"div",0,he),i&2&&de(s.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center}img[_ngcontent-%COMP%]{width:100%;max-height:calc(100% - 24px);max-width:100%}.card[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0})}}return n})();function pg(n,t){if(n&1&&Ht(0,"div",3),n&2){let e=t.$implicit,i=Nt().$implicit;Ze("filled",i.progress>=e+1)}}function fg(n,t){if(n&1&&(Dt(0,"div",0)(1,"div",1),ce(2,pg,1,2,"div",2,he),It(),Dt(4,"label"),ne(5),It()()),n&2){let e=t.$implicit,i=Nt();Lt(),Ze("high",e.state===2)("low",e.state===0),Lt(),de(i.dots),Lt(3),Fe(e.caption)}}var Cp=(()=>{class n extends Js{constructor(){super(...arguments),this.widget={},this.data=[],this.dots=[0,1,2,3,4,5,6,7,8,9]}get gridColumns(){return"repeat("+(this.data?.length>=5?2:1).toString()+", 1fr)"}prepareMeterData(e){super.prepareMeterData(e),this.data.forEach(i=>{i.progress=(i.value-i.min)/(i.max-i.min)*10,isNaN(i.progress)&&(i.progress=0)}),console.log(this.data)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-light-bar"]],hostVars:2,hostBindings:function(i,s){i&2&&Oe("grid-template-columns",s.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[[1,"holder"],[1,"bar"],[1,"dot",3,"filled"],[1,"dot"]],template:function(i,s){i&1&&ce(0,fg,6,5,"div",0,he),i&2&&de(s.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center;gap:20px}.holder[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bar[_ngcontent-%COMP%]{display:flex;width:100%;height:24px;border:1px solid var(--cl-accent);border-radius:1000px;padding-left:3px;padding-right:3px;gap:4px;justify-content:space-between;align-items:center}.dot[_ngcontent-%COMP%]{background:var(--cl-hover);border-radius:1000px;width:100%;height:100%;max-width:18px;max-height:18px}.dot.filled[_ngcontent-%COMP%]{background:var(--cl-accent)}.bar.high[_ngcontent-%COMP%] > .dot[_ngcontent-%COMP%]:last-child{background-color:#e07d86}.bar.low[_ngcontent-%COMP%] > .dot[_ngcontent-%COMP%]:first-child{background-color:#175ab8}"],changeDetection:0})}}return n})();function gg(n,t){if(n&1&&(Dt(0,"div",0),Ht(1,"img",1),Dt(2,"label"),ne(3),It()()),n&2){let e=t.$implicit;Lt(),_s("src","assets/img/traffic-light/"+(e.state===1?"yellow.svg":e.state===0?"red.svg":"green.svg"),Cs),Lt(2),Fe(e.caption)}}var _p=(()=>{class n extends Js{constructor(){super(...arguments),this.widget={}}get gridColumns(){return"repeat("+(this.data?.length>=3?3:this.data?.length||0).toString()+", 1fr)"}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_t(n)))(s||n)}})()}static{this.\u0275cmp=bt({type:n,selectors:[["dsw-traffic-light"]],hostVars:2,hostBindings:function(i,s){i&2&&Oe("grid-template-columns",s.gridColumns)},inputs:{widget:"widget"},standalone:!0,features:[Ct,vt],decls:2,vars:0,consts:[[1,"card"],[3,"src"]],template:function(i,s){i&1&&ce(0,gg,4,2,"div",0,he),i&2&&de(s.data)},styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:grid;width:100%;height:100%;font-family:Oxygen;-webkit-user-select:initial;user-select:initial;align-items:center;justify-content:center;gap:20px}img[_ngcontent-%COMP%]{width:100%;max-height:calc(100% - 24px);max-width:100%}.card[_ngcontent-%COMP%]{width:100%;height:100%;flex:1 1 100%;min-width:0;min-height:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}label[_ngcontent-%COMP%]{width:100%;font-family:Oxygen;color:gray;font-size:14px;text-align:center;height:24px;max-height:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0})}}return n})();var mg=["popup"],xg=["tooltip"],wp=(()=>{class MapWidgetOldComponent extends pe{constructor(){super(...arguments),this.tooltipData={visible:!1,content:"",name:"",items:[]},this.preventColFilteringBasedOnDataProperties=!0,this.CLUSTER_RANGE=1,this.isRGBColor=!1,this._selectedFeature=null,this.featureOverlay=null,this.mapData=null,this.hintTimeout=null,this.popupElement=null,this.polyData=null,this.isGeoJSON=!1,this.isWorldMap=!1}ngOnInit(){super.ngOnInit(),this.popupElement=this.popupEl.nativeElement,this.tooltipData.name="",this.tooltipData.items=[],this.widget.isMap=!0,this.requestPolygons(),this.us.isEmbedded()&&(this.onMessage=n=>{let t=n.data;switch(t.type){case"map.applyStyle":this.applyStyle(t);break}},window.addEventListener("message",this.onMessage))}applyStyle(n){let{selector:t,style:e,value:i}=n,s=this.map?.getTargetElement();(s&&s.querySelectorAll(t))?.forEach(o=>{o.style[e]=i})}ngAfterViewInit(){this.createMap()}ngOnDestroy(){this.us.isEmbedded()&&window.removeEventListener("message",this.onMessage),this.tooltip?.nativeElement?.remove(),super.ngOnDestroy()}createMap(){let n=this.ss.getAppSettings(),t;t=this.getDataPropValue("tileUrl");let e=new Ir({wrapX:!0,url:t}),i=new On({layers:[new Rr({source:e})],controls:gs({attributionOptions:{collapsible:!1}}),target:this.el.nativeElement,view:new Ce({center:[0,0],zoom:2})});i.getViewport().addEventListener("mouseout",s=>{this.hideTooltip()},!1),this.map=i,this.initialize()}hideTooltip(){this.hintTimeout&&clearTimeout(this.hintTimeout),this.tooltip&&(this.tooltip.nativeElement.style.display="none")}rejectTooltipCreation(){clearTimeout(this.hintTimeout)}showTooltip(n,t,e){this.hintTimeout&&clearTimeout(this.hintTimeout),this.hintTimeout=setTimeout(()=>{let i=this.tooltip?.nativeElement,s=this.getDataPropValue("tooltipStyles");if(s){let r=JSON.parse(s);for(let o in r)i.style.setProperty(o,r[o])}i.innerHTML=n,i.style.left=t.toString()+"px",i.style.top=e.toString()+"px",i.style.display="block"},600)}showPopup(){let n=this.popupElement,t=this.getDataPropValue("popupStyles");if(t){let e=JSON.parse(t);for(let i in e)n.style.setProperty(i,e[i])}this.popupElement&&(this.popupElement.style.visibility="hidden"),setTimeout(()=>{this.popupElement&&(this.popupElement.style.visibility="visible"),this.map?.render()},0)}hidePopup(){this.popupElement&&(this.popupElement.style.visibility="hidden")}doDrillUp(){this.hideTooltip(),this.hidePopup(),this.doDrill()}displayAsPivot(n){this.hideTooltip(),this.rejectTooltipCreation(),this.widget.type==="pivot"?(this.widget.isDrillthrough=!1,this.restoreWidgetType()):(this.widget.pivotMdx=n||this.getMDX(),this.changeWidgetType("pivot"))}requestPolygons(){let n=this.widget.name;this.widget.name.indexOf(".")===-1&&(n+=".js"),n=this.getDataPropValue("coordsJsFile")||n;let e=(this.ss.serverSettings.DefaultApp||"/csp")+"/"+n;this.ds.getFile(e).then(i=>this.onPolyFileLoaded(i)).catch(i=>{this.loadDefaultGeoJSON()}).finally(()=>this.hideLoading())}onPolyFileLoaded(result){this.isGeoJSON=!1;try{let n=JSON.parse(result);this.polyData=n,this.isGeoJSON=!0,this.buildPolygons();return}catch(n){}var polys={};result="("+result+")(polys)",eval(result),this.polyData=polys,this.buildPolygons()}onPolyJSONFileLoaded(n){this.polyData=n,this.buildPolygons()}getFeatureColor(n,t){let e=this.mapData.Cols[1].tuples.filter(c=>c.caption===n);if(e.length===0)return;e=e[0];let i,s=this.mapData.Cols[1].tuples.indexOf(e),r=this.mapData.Cols[0].tuples.length,o="ColorExplicitValue";o=this.getDataPropValue("colorProperty")||o;let a;isNaN(parseInt(o,10))?a=this.mapData.Cols[0].tuples.filter(c=>c.caption===o):a=this.mapData.Cols[0].tuples.slice(o,1),a=a[0];let l=this.mapData.Cols[0].tuples.indexOf(a),h=this.mapData.Data[s*r+l];if(isNaN(parseFloat(h)))return h.toString().indexOf("rgb")!==-1&&h.toString().indexOf("rgba")===-1&&(h=h.replace("rgb","rgba"),h=h.substr(0,h.length-1)+", 0)"),i=h.split(","),i[3]="0.4)",i.join(",");{let c=this.getDataPropValue("colorFormula")||"hsl((255-x)/255 * 120, 100%, 50%)";this.isRGBColor&&(c="rgb(x, 255-x, 0)");let g=c.indexOf("("),d=c.substring(0,g).toLowerCase();c=c.substring(g+1,c.length-1),i=c.split(",");let p=t||0;for(let y=0;y<i.length;y++){if(i[y].indexOf("x")===-1)continue;i[y]=i[y].replace(/x/g,p.toString());let x=window["eval"](i[y]);x>255&&(x=255),x<0&&(x=0),i[y]=Math.floor(x).toString()}return d.indexOf("a")===-1?d+"a("+i.join(",")+", 0.45)":d+"("+i.join(",")+")"}}centerView(n,t){let e,i,s;if(this.widget.properties&&(e=parseFloat(this.widget.properties.latitude),i=parseFloat(this.widget.properties.longitude),s=parseFloat(this.widget.properties.zoom)),this.drills.length===0&&!isNaN(e)&&!isNaN(i)&&!isNaN(s)&&e!==void 0&&i!==void 0&&s!==void 0)this.map?.getView().setCenter(Zi([i,e],"EPSG:4326","EPSG:900913")),this.map?.getView().setZoom(s);else{if(Math.abs(n[0]-t[0])<1e-8&&Math.abs(n[1]-t[1])<1e-8)return;let r=Zi([n[0],n[1]],"EPSG:4326","EPSG:900913"),o=Zi([t[0],t[1]],"EPSG:4326","EPSG:900913");this.map?.getView().fit([r[0],r[1],o[0],o[1]],this.map?.getSize())}this.getDataPropValue("fixMaxZoom")==="1"&&this.map?.getView().setMaxZoom(this.map?.getView().getZoom()||1),this.getDataPropValue("fixMinZoom")==="1"&&this.map?.getView().setMinZoom(this.map?.getView().getZoom()||1),this.getDataPropValue("maxZoom")&&this.map?.getView().setMaxZoom(parseFloat(this.getDataPropValue("maxZoom")||"1"))}buildPolygons(){let n,t,e,i,s,r,o,a,l,h,c,g;this.isRGBColor=!1;let d=this.getDataPropValue("colorProperty")||"ColorHSLValue",p=this.getDataPropValue("coordsProperty")||"CoordKeyValue";if(!this.polyData||!this.map||!this.mapData)return;if(this.isWorldMap){this.buildWorldMapPolygons();return}let y=[];o=this.mapData.Cols[0].tuples.length;let b=Number.MAX_VALUE,x=Number.MIN_VALUE,f=0;for(isNaN(parseInt(d))?(g=this.mapData.Cols[0].tuples.filter(w=>w.caption===d),f=this.mapData.Cols[0].tuples.indexOf(g[0]),f===-1&&(this.isRGBColor=!0,d="ColorRGBValue",g=this.mapData.Cols[0].tuples.filter(w=>w.caption===d),f=this.mapData.Cols[0].tuples.indexOf(g[0]))):f=parseInt(this.widget.properties.colorProperty,10)||0,a=0;a<this.mapData.Cols[1].tuples.length;a++)l=this.mapData.Data[a*o+f],l<b&&(b=l),l>x&&(x=l);let M=[99999999,99999999],L=[-99999999,-99999999],_=0;for(c=-1,g=this.mapData.Cols[0].tuples.filter(w=>w.caption===p),g.length===0&&(g=this.mapData.Cols[0].tuples.filter(w=>w.caption==="Key")),g.length!==0&&(c=this.mapData.Cols[0].tuples.indexOf(g[0])),a=0;a<this.mapData.Cols[1].tuples.length;a++){let w=this.mapData.Cols[1].tuples[a].caption,k=w;if(c!==-1&&(k=this.mapData.Data[a*o+c]),h=this.getPartsByKey(k,p),!h)continue;let z=[];_++;let O=this.getDataPropValue("dataLabels");if(this.isGeoJSON){let D=this.convertCoordinatesOfGEOJson(h,M,L);z=D.poly,M=D.min,L=D.max}else for(r=0;r<h.length;r++){let D=[];if(!h[r])continue;let P=h[r];typeof P=="string"&&(P=P.split(" "));let m=[];for(i in P){if(!P[i])continue;let u=P[i];if(typeof u=="string"&&(u=u.split(",")),u.length<2)continue;if(n=parseFloat(u[0]),t=parseFloat(u[1]),isNaN(n)||isNaN(t)){console.warn("Wrong poly coordinates: ",P[i]);continue}let v=new Pe([n,t]);v.transform("EPSG:4326","EPSG:3857");let I=n;I<0&&(I+=360),parseFloat(I)<M[0]&&(M[0]=parseFloat(I)),parseFloat(t)<M[1]&&(M[1]=parseFloat(t)),parseFloat(I)>L[0]&&(L[0]=parseFloat(I)),parseFloat(t)>L[1]&&(L[1]=parseFloat(t)),m.push(v.getCoordinates())}if(D.push(m),D.length>300){let u=[];for(i=0;i<D.length;i+=2)u.push(D[i]);D=u}z.push(m)}let C=w,A=this.getDataPropValue("polygonTitleProperty");if(A){let D=this.mapData.Cols[0].tuples.filter(P=>P.caption===A);if(D.length!==0){let P=this.mapData.Cols[0].tuples.indexOf(D[0]);P!==-1&&(C=this.mapData.Data[a*o+P])}}let F=ci;if(this.isGeoJSON){switch(h.type.toLowerCase()){}F=Xr}let S=new bs({geometry:new F(z),key:w,title:C,dataIdx:a*o,path:this.mapData.Cols[1].tuples[a].path,desc:this.mapData.Cols[1].tuples[a].title}),T;if(isNaN(parseFloat(C))||(C=this.formatNumber(C,"")),O){let D=JSON.parse(O),P=D.size||12,m=D.font||"Calibri,Arial,sans-serif",u=D.color||"#000",v=D.stroke||"#fff",I=D.strokeWidth||2;T=new ss({font:`${P}px ${m}`,fill:new _e({color:u}),stroke:new De({color:v,width:I}),text:C+""})}l=this.mapData.Data[a*o+f],S.setStyle(new we({zIndex:0,fill:new _e({color:this.getFeatureColor(w,(l-b)*255/(x-b))||"none"}),stroke:new De({color:"rgba(0, 0, 0, 0.3)",width:1}),text:T})),y.push(S)}this.featureOverlay.getSource().clear(),this.polys.clear(),this.polys.addFeatures(y),setTimeout(()=>{this.centerView(M,L)})}retrieveData(n){if(setTimeout(()=>{this.map?.updateSize()},0),n.Error){this.showError(n.Error);return}n.Info&&(this.dataInfo=n.Info),this.hideTooltip(),this.markers.clear(),this.mapData=n,this.buildPolygons();let t=[Number.MAX_VALUE,Number.MAX_VALUE],e=[-Number.MAX_VALUE,-Number.MAX_VALUE];if(n&&this.map){let i=n.Cols[0].tuples.length,s=0,r=[],o="latitude";this.widget.properties&&this.widget.properties.latitudeProperty&&(o=this.widget.properties.latitudeProperty);let a="longitude";this.widget.properties&&this.widget.properties.longitudeProperty&&(a=this.widget.properties.longitudeProperty);let l=-1,h=-1,c=n.Cols[0].tuples.filter(d=>d.caption.toLowerCase()===o);if(c.length!==0&&(h=n.Cols[0].tuples.indexOf(c[0])),c=n.Cols[0].tuples.filter(d=>d.caption.toLowerCase()===a),c.length!==0&&(l=n.Cols[0].tuples.indexOf(c[0])),h===-1||l===-1)return;let g=n.Cols[1].tuples;g[0]?.children&&(g=g[0]?.children);for(let d=0;d<g.length;d++){if(n.Data[s+l]===""||n.Data[s+l]===void 0||n.Data[s+h]===""||n.Data[s+h]===void 0)continue;let p=parseFloat(n.Data[s+l]||0),y=parseFloat(n.Data[s+h]||0),b=g[d].caption,x=new Pe([p,y]);x.transform("EPSG:4326","EPSG:900913");let f=[],M=[];for(let _=2;_<n.Cols[0].tuples.length;_++)f.push(n.Cols[0].tuples[_].caption),M.push(n.Data[s+_]);let L=new bs({geometry:x,name:b,labels:f,values:M,dataIdx:s,path:g[d].path,desc:g[d].title});parseFloat(y.toString())<t[1]&&(t[1]=parseFloat(y.toString())),parseFloat(p.toString())<t[0]&&(t[0]=parseFloat(p.toString())),parseFloat(y.toString())>e[1]&&(e[1]=parseFloat(y.toString())),parseFloat(p.toString())>e[0]&&(e[0]=parseFloat(p.toString())),t[0]==e[0]&&(t[0]-=.25,e[0]+=.25),t[1]==e[1]&&(t[1]-=.25,e[1]+=.25),r.push(L),s+=i}r.length!==0&&(this.markers.addFeatures(r),this.centerView(t,e)),this.centerView(t,e)}}initialize(){this.iconStyle=new we({zIndex:100,image:new ji({anchor:[.5,40],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:1,src:"assets/img/map-marker-red.png"})});let n=this.map,t=new we({zIndex:0,stroke:new De({color:"rgba(0, 0, 0, 0.5)",width:1})});this.polyStyle=t,this.hoverStyle=new we({zIndex:1,stroke:new De({color:"blue",width:2})}),this.polys=new yi({features:[]});let e=new Ci({source:this.polys,style:this.polyStyle});e.setZIndex(1),this.map?.addLayer(e),this.markers=new yi({features:[]});let i=new oe;this.featureOverlay=new Ci({map:this.map,source:new yi({features:i,useSpatialIndex:!1}),style:this.hoverStyle,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.featureOverlay.setZIndex(10),this.featureOverlay.setMap(this.map),this.markers&&(e=new Ci({source:this.markers,style:this.iconStyle}),e.setZIndex(100),this.map?.addLayer(e)),this.map?.on("click",s=>this.onMapClick(s)),this.map?.on("pointermove",s=>this.onPointerMove(s))}onPointerMove(n){if(ue.mobile&&n.originalEvent.touches&&n.originalEvent.touches.length!==1)return;this.hideTooltip();let t=this.map?.forEachFeatureAtPixel(n.pixel,(i,s)=>i);if(t){let i=t.get("dataIdx"),s,r="TooltipValue",o="";if(this.isWorldMap){let a=[];for(let l=0;l<this.mapData?.Cols[0]?.tuples?.length;l++){let h=this.mapData?.Cols[0]?.tuples[l],c=this.mapData?.Data[i+l]?.toString()??"";c&&a.push(`<b>${h.caption}:</b> ${c}`)}s=a.join("<br>"),s?.toString()&&this.showTooltip(s.toString(),n.pixel[0],n.pixel[1])}else{let a=this.getDataProp("tooltipProperty");a&&(r=a.dataValue,o=a.format),s=this.getDataByColumnName(this.mapData,r||"Name",i,o),!s&&this.widget.properties?.polygonTitleProperty&&t.get("title")&&(s=t.get("title")),s||(s=this.getDataByColumnName(this.mapData,"Name",i)),s||(s=(this.mapData.Cols[1].tuples[0]?.children||this.mapData.Cols[1].tuples)[Math.floor(i/this.mapData.Cols[0].tuples.length)].caption||""),s?.toString()&&this.showTooltip(s.toString(),n.pixel[0],n.pixel[1])}}if(n.dragging){this.hideTooltip();return}let e=this.map?.getEventPixel(n.originalEvent);if(e){let i=this.map?.hasFeatureAtPixel(e);(this.map?.getTarget()).style.cursor=i?"pointer":""}this.featureOverlay?.getSource().clear(),t&&this.featureOverlay?.getSource().addFeature(t)}getTooltipData(n){if(!this.mapData)return;let t=[],e=this.mapData.Cols[1].tuples.filter(a=>a.caption===n);if(e.length===0)return;e=e[0];let i=this.mapData.Cols[1].tuples.indexOf(e),s=this.mapData.Cols[0].tuples.length,r=this.mapData.Cols[0].tuples.filter(a=>a.caption==="tooltip");if(r.length===0)return;r=r[0];let o=this.mapData.Cols[0].tuples.indexOf(r);return t.push({label:"",value:this.mapData?.Data[i*s+o].split(":")[1]||""}),t}onMapClick(n){if(this.hidePopup(),ue.mobile&&n.originalEvent.touches&&n.originalEvent.touches.length!==1)return;let t=this.map?.forEachFeatureAtPixel(n.pixel,(i,s)=>i);if(t){if(this.hideTooltip(),ue.mobile&&this._selectedFeature!==t){this._selectedFeature=t,this.onPointerMove(n);return}this.doDrill(t.get("path"),t.get("name")||t.get("title"),void 0,()=>{e(t)})}else this.hideTooltip();let e=i=>{let s=i.get("dataIdx"),r,o,a="PopupValue",l="",h=this.getDataProp("popupProperty");if(h&&(a=h.dataValue,l=h.format),a?(o="<b>"+(i.get("key")||i.values_.title)+"</b><br/>",o+=a+": ",o+=this.getDataByColumnName(this.mapData,a,s,l)):o=this.mapData?.Cols[1].tuples[Math.floor(s/this.mapData?.Cols[0].tuples.length)].caption||this.mapData?.Cols[1].tuples[Math.floor(s/this.mapData?.Cols[0].tuples.length)].desc||"",!o)if(o="<b>"+(i.get("name")||i.values_.title)+"</b><br/>",this.mapData?.Cols[0].tuples.length)for(let c=0;c<this.mapData?.Cols[0].tuples.length;c++){let g=this.mapData?.Cols[0].tuples[c].caption;if(g.toLowerCase()==="latitude"||g.toLowerCase()==="longitude")continue;let d=this.getDataByColumnName(this.mapData,g,s);o+=`${g}: <span style="opacity: 0.6">${d}</span>`,c!==this.mapData?.Cols[0].tuples.length-1&&(o+="<br/>")}else o=this.getDataByColumnName(this.mapData,"Name",s);o&&(this.tooltipData.content=o,this.popupElement&&(this.popupElement.style.left=n.pixel[0]+"px",this.popupElement.style.top=n.pixel[1]-10+"px",this.popupElement.innerHTML=o),this.showPopup())}}onResize(){this.map&&this.map.updateSize()}buildGeoJSON(n){}getPartsByKey(n,t="Key"){if(this.isGeoJSON){let e=this.polyData?.features.find(i=>i.properties[t]===n);return e?e.geometry:void 0}else if(this.polyData?.[n])return this.polyData[n]?.split(";")}convertCoordinatesOfGEOJson(n,t,e){let i=JSON.parse(JSON.stringify(n.coordinates));for(let s=0;s<i.length;s++)for(let r=0;r<i[s].length;r++)for(let o=0;o<i[s][r].length;o++){let a=i[s][r][o][0],l=i[s][r][o][1],h=new Pe([a,l]);h.transform("EPSG:4326","EPSG:3857"),i[s][r][o][0]=h.getCoordinates()[0],i[s][r][o][1]=h.getCoordinates()[1];let c=a;c<0&&(c+=360),parseFloat(c)<t[0]&&(t[0]=parseFloat(c)),parseFloat(l)<t[1]&&(t[1]=parseFloat(l)),parseFloat(c)>e[0]&&(e[0]=parseFloat(c)),parseFloat(l)>e[1]&&(e[1]=parseFloat(l))}return{poly:i,min:t,max:e}}loadDefaultGeoJSON(){return Ft(this,null,function*(){let n;try{n=yield this.ds.getJSONFile("assets/countries.json")}catch{console.error(`Can't load default GEOJSON: "assets/countries.json"`);return}if(!n)return;let t=new yi;t.addFeatures(new Wr().readFeatures(n,{dataProjection:"EPSG:4326",featureProjection:this.map?.getView().getProjection()})),this.worldMap=t;let e=new Ci({source:t});this.polyData=n,this.isWorldMap=!0,this.isGeoJSON=!0})}buildWorldMapPolygons(){let n=this.polyData.features,t=[],e=Number.MAX_VALUE,i=Number.MIN_VALUE;for(let s=0;s<this.mapData?.Data?.length;s+=2){let r=this.mapData?.Data[s+1];r<e&&(e=r),r>i&&(i=r)}for(let s=0;s<this.mapData?.Cols[1]?.tuples?.length;s++){let r=this.mapData.Data[s*2];if(!r)continue;let o=this.worldMap?.getFeatures().find(p=>p.get("name")===r);if(!o)continue;o.set("dataIdx",s*2),o.set("title",r),o.set("path",this.mapData.Cols[1].tuples[s].path),t.push(o);let a=this.mapData.Data[s*2+1],c=`hsla(${(255-(a-e)/(i-e)*255)/255*120}, 100%, 50%, 0.6)`,g=new ss({font:"8px Oxygen",fill:new _e({color:"black"}),text:`${r}
`+a.toString()}),d=this;o.setStyle(new we({zIndex:0,fill:new _e({color:c}),stroke:new De({color:"rgba(0, 0, 0, 0.3)",width:1}),text:g}))}this.featureOverlay.getSource().clear(),this.polys.clear(),this.polys.addFeatures(t),this.fitPolygonsToScreen()}getMaxPoly(n){let t=[];for(let e=0;e<n.length;e++)t.push({poly:n[e],area:n[e].getArea()});return t.sort(function(e,i){return e.area-i.area}),t[t.length-1].poly}fitPolygonsToScreen(){this.map?.getView().fit(this.polys.getExtent(),{padding:[20,20,20,20]})}static{this.\u0275fac=(()=>{let n;return function(e){return(n||(n=_t(MapWidgetOldComponent)))(e||MapWidgetOldComponent)}})()}static{this.\u0275cmp=bt({type:MapWidgetOldComponent,selectors:[["dsw-map-widget"]],viewQuery:function(t,e){if(t&1&&(Si(mg,7),Si(xg,7)),t&2){let i;Mi(i=Ei())&&(e.popupEl=i.first),Mi(i=Ei())&&(e.tooltip=i.first)}},standalone:!0,features:[Ct,vt],decls:7,vars:0,consts:[["popup",""],["tooltip",""],[1,"panel","panel-default","map-popup",2,"visibility","hidden"],["ng-bind-html","model.tooltip.content | sanitize"],[1,"arrow_box"],[1,"tooltip",2,"display","none"]],template:function(t,e){t&1&&(Dt(0,"div",2,0)(2,"div"),Ht(3,"div",3),It(),Ht(4,"div",4),It(),Ht(5,"div",5,1))},styles:['[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]{margin-top:24px;z-index:1000;position:absolute;border:solid 1px #000000;color:#000;background-color:#ffffe1;white-space:nowrap;font-family:Oxygen;font-size:13px;-moz-box-shadow:2px 2px 4px #7f7f7f;box-shadow:2px 2px 4px #7f7f7f;padding:2px 3px}.map-popup[_ngcontent-%COMP%]{transform:translateY(-100%) translate(-50%);z-index:1;position:absolute;background-color:var(--cl-widget-filter-bg);margin-bottom:0;border-color:#b0b0b0;padding:4px;-webkit-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);-moz-box-shadow:1px 1px 9px 0px rgba(50,50,50,.5);box-shadow:1px 1px 9px #32323280;color:var(--cl-widget-header-txt)}.map-popup[_ngcontent-%COMP%]:after{content:" ";display:block;width:0;height:0;border-style:solid;border-width:8px 4px 0 4px;bottom:-8px;left:calc(50% - 4px);position:absolute;border-color:var(--cl-widget-filter-bg) transparent transparent transparent}']})}}return MapWidgetOldComponent})();var Hr=[{id:"btn.ShowAnnotations",text:"Show annotations",tooltip:"Show annotations",icon:"assets/img/icons/text.svg",defValue:!0},{id:"btn.ShowPercents",text:"Show percents",tooltip:"Show percents",icon:"assets/img/icons/percent.svg"}],Qs={regular:{label:"Scorecard chart",class:bp,allowShowAsPivot:!0},fuelGauge:{class:bh,type:"chart",chart:"solidgauge",allowShowAsPivot:!0},bullseyeChart:{label:"Bullseye chart",class:gp,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},speedometer:{class:bh,type:"chart",chart:"gauge",allowShowAsPivot:!0,disableLegend:!0},bubbleChart:{label:"Bubble chart",class:cp,type:"chart",chart:"bubble",allowShowAsPivot:!0},treeMapChart:{label:"Tree map chart",class:hp,type:"chart",chart:"treemap",allowShowAsPivot:!0},hilowChart:{label:"Hi-low chart",class:dp,type:"chart",chart:"boxplot",allowShowAsPivot:!0},pieChart3D:{label:"Pie chart 3D",class:Ur,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},donutChart3D:{label:"Donut chart 3D",class:Ur,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},donutChart:{label:"Donut chart",class:Ur,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},pieChart:{label:"Pie chart",class:Ur,type:"chart",chart:"pie",headerButtons:Hr,allowShowAsPivot:!0},areaChart:{label:"Area chart",class:fp,type:"chart",chart:"area",allowShowAsPivot:!0},barChart:{label:"Bar chart",class:Ch,type:"chart",chart:"bar",allowShowAsPivot:!0},barChartStacked:{label:"Bar chart stacked",class:Ch,type:"chart",chart:"bar",allowShowAsPivot:!0},lineChart:{label:"Linear chart",class:bo,type:"chart",chart:"line",allowShowAsPivot:!0},lineChartMarkers:{label:"Linear chart with markers",class:bo,type:"chart",chart:"line",allowShowAsPivot:!0},comboChart:{label:"Combo chart",class:bo,type:"chart",chart:"line",allowShowAsPivot:!0},columnChart:{label:"Column chart",class:mo,type:"chart",chart:"column",allowShowAsPivot:!0},columnChart3D:{label:"Column chart 3D",class:mo,type:"chart",chart:"column",allowShowAsPivot:!0},columnChartStacked:{label:"Column chart stacked",class:mo,type:"chart",chart:"column",allowShowAsPivot:!0},xyChart:{label:"XY chart",class:mp,type:"chart",chart:"scatter",allowShowAsPivot:!0},timeChart:{label:"Time chart",class:xp,type:"chart",allowShowAsPivot:!0},pivot:{label:"Table",class:wo,type:"pivot"},"deepsee.lightpivottable":{class:wo,type:"pivot"},textMeter:{label:"Text meter",class:Zh,type:"text",allowShowAsPivot:!0},map:{label:"World map",class:location.hash.indexOf("oldmap=1")!==-1?wp:oo,type:"map",allowShowAsPivot:!0},"deepsee.enhancedmapportlet":{class:oo,type:"map",allowShowAsPivot:!0},"rf.mapportlet":{class:oo,type:"map",allowShowAsPivot:!0},horizontalControls:{class:xo,type:"empty"},verticalControls:{class:xo,type:"empty"},smiley:{class:vp,allowShowAsPivot:!1},lightBar:{class:Cp,allowShowAsPivot:!1},trafficLight:{class:_p,allowShowAsPivot:!1}};Qs[ue.const.emptyWidgetClass]={class:xo,type:"empty"};var lp=(()=>{class n{constructor(){}initialize(){let e=ue.addons;if(e&&e&&e.length)for(let i=0;i<e.length;i++){let s=e[i].split("/").pop();s=Hh+s;try{}catch{console.error(`Can't register addon: ${s}. Be aware that all names is case sensitive!`)}}}register(e,i,s,r){Qs[e]=re({class:s,type:i},r)}getClass(e){let i=e.toLowerCase();if(Qs[i]||(i=i.replace(/dsw.addons./ig,"")),!!Qs[i])return Qs[i].class}getDesc(e){return Qs[e.replace(/dsw.addons./ig,"")]}getType(e){return this.getDesc(e)?.type||""}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Mh({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{Uh as a,pe as b,Zh as c,Xt as d,Qs as e,lp as f};
