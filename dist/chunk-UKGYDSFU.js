import{a as D}from"./chunk-5KDDYWN7.js";import{a as W}from"./chunk-7O6273DX.js";import"./chunk-W7AFIDCE.js";import{a as J}from"./chunk-54YLOEMX.js";import"./chunk-3NOBMICG.js";import"./chunk-RNWIIYZZ.js";import{a as I}from"./chunk-SUAWKU6Z.js";import{a as A}from"./chunk-HK4SYSVW.js";import{D as E,J as L}from"./chunk-WWDBWM36.js";import{$a as a,$b as x,Bb as S,Bc as V,Cb as O,Db as l,Eb as c,Fb as P,Jb as f,Nb as C,Ob as r,Xb as p,Yb as M,_b as b,ab as w,ac as u,cc as T,fa as k,hc as B,ic as F,qa as d,ra as h,rb as y,tb as g,yb as _,zb as v}from"./chunk-ZKAUCJHV.js";import{f as j}from"./chunk-DEPBX7UX.js";var U=j(J());function N(i,s){if(i&1){let n=f();l(0,"span",5)(1,"dsw-color-picker",6),u("colorChange",function(t){d(n);let o=r().$index,m=r();return x(m.model.themeColors.hcColors[o],t)||(m.model.themeColors.hcColors[o]=t),h(t)}),C("colorChange",function(){d(n);let t=r(2);return h(t.update())}),c()()}if(i&2){let n=r().$index,e=r();a(),g("isImmediate",!0),b("color",e.model.themeColors.hcColors[n])}}function z(i,s){if(i&1&&y(0,N,2,2,"span",5),i&2){let n=s.$index,e=r();_((e.appearance==null||e.appearance.showSeries==null?null:e.appearance.showSeries[n])!==!1?0:-1)}}function R(i,s){if(i&1){let n=f();l(0,"label"),p(1,"Chart background"),c(),l(2,"dsw-color-picker",6),u("colorChange",function(t){d(n);let o=r();return x(o.model.themeColors.hcBackground,t)||(o.model.themeColors.hcBackground=t),h(t)}),C("colorChange",function(){d(n);let t=r();return h(t.update())}),c()}if(i&2){let n=r();a(2),g("isImmediate",!0),b("color",n.model.themeColors.hcBackground)}}function H(i,s){if(i&1){let n=f();l(0,"label"),p(1,"Lines color"),c(),l(2,"dsw-color-picker",6),u("colorChange",function(t){d(n);let o=r();return x(o.model.themeColors.hcLineColor,t)||(o.model.themeColors.hcLineColor=t),h(t)}),C("colorChange",function(){d(n);let t=r();return h(t.update())}),c()}if(i&2){let n=r();a(2),g("isImmediate",!0),b("color",n.model.themeColors.hcLineColor)}}function Y(i,s){if(i&1){let n=f();l(0,"label"),p(1,"Text color"),c(),l(2,"dsw-color-picker",6),u("colorChange",function(t){d(n);let o=r();return x(o.model.themeColors.hcTextColor,t)||(o.model.themeColors.hcTextColor=t),h(t)}),C("colorChange",function(){d(n);let t=r();return h(t.update())}),c()}if(i&2){let n=r();a(2),g("isImmediate",!0),b("color",n.model.themeColors.hcTextColor)}}function q(i,s){if(i&1){let n=f();l(0,"label"),p(1,"Series border color"),c(),l(2,"dsw-color-picker",6),u("colorChange",function(t){d(n);let o=r();return x(o.model.themeColors.hcBorderColor,t)||(o.model.themeColors.hcBorderColor=t),h(t)}),C("colorChange",function(){d(n);let t=r();return h(t.update())}),c()}if(i&2){let n=r();a(2),g("isImmediate",!0),b("color",n.model.themeColors.hcBorderColor)}}var te=(()=>{let s=class s{constructor(e,t,o,m){this.sbs=e,this.ss=t,this.cd=o,this.bs=m,this.model={themeColors:{hcColors:[],hcTextColor:"",hcBackground:"",hcLineColor:"",hcBorderColor:""}},this.key="",this.isApplied=!1,this.isChanged=!1}ngOnInit(){let e=this.ss.getAppSettings();if(this.key=e.theme||"",this.widgetSettings){let t=this.widgetSettings.themeColors[this.key];t&&(this.model.themeColors=JSON.parse(JSON.stringify(t)))}else if(e?.themeColors?.[this.key]&&(this.globalOriginalColors=JSON.parse(JSON.stringify(e.themeColors[this.key]))),!e?.themeColors?.[this.key])e.themeColors||(e.themeColors={}),e.themeColors[this.key]=this.model.themeColors;else{let t=e.themeColors[this.key];t&&(this.model.themeColors=t)}this.initColors()}ngOnDestroy(){this.isApplied||this.restoreColors()}onCancel(){this.sbs.hide()}onApply(){if(this.isApplied=!0,this.onSave)this.isChanged&&(this.widgetSettings.themeColors[this.key]=this.model.themeColors),this.onSave();else{let e=this.ss.getAppSettings();e.themeColors&&(e.themeColors[this.key]=this.model.themeColors),this.ss.setAppSettings(e)}this.sbs.hide()}update(){this.isChanged=!0,this.onUpdate?this.onUpdate(this.model.themeColors):this.bs.broadcast("charts:update-colors",this.model.themeColors)}initColors(){let e=this.model.themeColors,t=this.getDefaultColors();(!e.hcColors||e.hcColors.length===0)&&(e.hcColors=t.hcColors),e.hcTextColor||(e.hcTextColor=t.hcTextColor),e.hcBackground||(e.hcBackground=t.hcBackground),e.hcBorderColor||(e.hcBorderColor=t.hcBorderColor),e.hcLineColor||(e.hcLineColor=t.hcLineColor),this.originalColors=JSON.parse(JSON.stringify(e))}byIndex(e,t){return e}resetToDefault(){let e=this.getDefaultColors();this.model.themeColors.hcLineColor=e.hcLineColor,this.model.themeColors.hcBorderColor=e.hcBorderColor,this.model.themeColors.hcBackground=e.hcBackground,this.model.themeColors.hcTextColor=e.hcTextColor,this.model.themeColors.hcColors=e.hcColors,this.widgetSettings?.themeColors[this.key]&&(this.widgetSettings.themeColors[this.key]=null),this.onUpdate?this.onUpdate(e):this.bs.broadcast("charts:update-colors",e),this.isChanged=!1}restoreColors(){if(this.widgetSettings)this.widgetSettings.themeColors[this.key]=this.originalColors;else{let e=this.ss.getAppSettings();e.themeColors&&(e.themeColors[this.key]=this.globalOriginalColors)}this.onUpdate?this.onUpdate(this.originalColors):this.bs.broadcast("charts:update-colors",this.originalColors)}getDefaultColors(){let e=U.default.getOptions();return{hcColors:e.colors?.slice()||"",hcBackground:e.chart?.backgroundColor||"",hcTextColor:e.labels?.style?.color||"",hcBorderColor:"",hcLineColor:"#e6e6e6"}}};s.\u0275fac=function(t){return new(t||s)(w(I),w(L),w(V),w(A))},s.\u0275cmp=k({type:s,selectors:[["dsw-chart-config"]],inputs:{chart:"chart",widgetSettings:"widgetSettings",onSave:"onSave",appearance:"appearance",onUpdate:"onUpdate"},standalone:!0,features:[T],decls:16,vars:7,consts:[[3,"cancel","apply"],[1,"container"],[1,"series-colors"],[1,"divider"],[1,"btn","btn-success",3,"click"],[1,"color-small"],[3,"colorChange","isImmediate","color"]],template:function(t,o){t&1&&(l(0,"dsw-sidebar-actions",0),C("cancel",function(){return o.onCancel()})("apply",function(){return o.onApply()}),p(1,"Chart colors"),c(),l(2,"div",1)(3,"label"),p(4),B(5,"i18n"),c(),l(6,"div",2),S(7,z,1,1,null,null,v),c(),y(9,R,3,2)(10,H,3,2)(11,Y,3,2)(12,q,3,2),P(13,"div",3),l(14,"button",4),C("click",function(){return o.resetToDefault()}),p(15,"Reset to default"),c()()),t&2&&(a(4),M(F(5,5,"seriesColor")),a(3),O(o.model.themeColors.hcColors),a(2),_((o.appearance==null?null:o.appearance.showBackground)!==!1?9:-1),a(),_((o.appearance==null?null:o.appearance.showLines)!==!1?10:-1),a(),_((o.appearance==null?null:o.appearance.showText)!==!1?11:-1),a(),_((o.appearance==null?null:o.appearance.showBorder)!==!1?12:-1))},dependencies:[W,E,D],styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;padding-bottom:20px;transition:transform 2s linear;min-width:var(--sidebar-width)}.container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;padding-left:20px;flex:1 1 100%}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px;height:4px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-left:solid 16px var(--cl-bg);background:#ebebea}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-left:solid 16px var(--cl-bg);border-radius:0;background:#1c1d2066}label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-family:Oxygen;color:var(--cl-sidebar-txt);margin-top:10px;margin-bottom:2px;font-size:14px;width:calc(100% - 4px)}input[_ngcontent-%COMP%]{margin-bottom:4px}.divider[_ngcontent-%COMP%]{display:block;width:100%;clear:both}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#fff;padding:10px;color:#1a73e8;font-size:14px;line-height:16px;border:1px solid #EBEBEA;border-radius:4px;width:100%;cursor:pointer;transition:background-color .3s linear}.btn-section[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#1a73e80d}.btn-section[_ngcontent-%COMP%]:not(.disabled):active{transform:translateY(1px)}.headline[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.navigation[_ngcontent-%COMP%]{margin-top:20px}.navigation[_ngcontent-%COMP%] > .btn-section[_ngcontent-%COMP%]:not(:last-child){margin-bottom:4px}.navigation[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]{margin-top:20px}.disabled[_ngcontent-%COMP%]{cursor:default;filter:grayscale(1);opacity:.5}.footer[_ngcontent-%COMP%]{padding-left:20px}.footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-top:20px}.footer[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}.color-rect[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:inline-flex;position:relative;align-items:center;justify-content:center;cursor:pointer;width:32px;height:32px;margin-right:4px;margin-bottom:4px;border:var(--tile-border);font-size:24px;outline-offset:-2px;float:left;background-size:60%}.color-rect[_ngcontent-%COMP%]:hover{outline:1px solid var(--cl-accent)}.color-rect.active[_ngcontent-%COMP%]{outline:3px solid var(--cl-accent)}.color-rect.small[_ngcontent-%COMP%]{width:32px}",".color-small[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;min-width:32px;flex-shrink:0}.series-colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}label[_ngcontent-%COMP%] + .color-small[_ngcontent-%COMP%]{margin-left:0}.color[_ngcontent-%COMP%]{display:inline-flex}.divider[_ngcontent-%COMP%]{margin-bottom:10px}"]});let i=s;return i})();export{te as ChartColorsConfigComponent};
