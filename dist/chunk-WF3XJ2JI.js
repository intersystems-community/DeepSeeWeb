import{a as J}from"./chunk-5B56YEDA.js";import{a as G}from"./chunk-ZQHHRJ3Q.js";import{a as K}from"./chunk-RU73HBGW.js";import{a as Y,b as U}from"./chunk-XVENQY62.js";import{a as X}from"./chunk-NHWJ6QQD.js";import"./chunk-WPPKA3B4.js";import"./chunk-MDOQS4TE.js";import{a as q}from"./chunk-G7BOERRR.js";import"./chunk-3X5SOEI4.js";import{b as $,d as N,e as R,j as z}from"./chunk-5SPVZWMF.js";import{D,F as O,H as V,J as j,c as W,s as H,w as A}from"./chunk-UL3V6HGA.js";import{Ab as f,B as k,Eb as v,Fb as C,Gb as w,Hb as r,Ib as a,Kc as L,Nb as y,Rb as u,Sb as g,ab as l,bb as p,bc as s,cc as m,dc as I,ec as F,fa as S,fc as M,gc as E,lc as B,qa as _,qc as h,ra as x,rc as b,xb as T,zb as P}from"./chunk-ZEAAPN4P.js";import"./chunk-MG3ERZGY.js";function Z(c,d){if(c&1){let t=y();r(0,"div",7),u("click",function(){let e=_(t).$index,o=g();return x(o.setTileColor(e))}),a()}if(c&2){let t=d.$implicit,i=d.$index,e=g();f("color-rect "+t),P("active",e.tile.color==i)}}function ee(c,d){if(c&1){let t=y();r(0,"div",7),u("click",function(){let e=_(t).$index,o=g();return x(o.setFontColor(e))}),r(1,"span"),s(2,"A"),a()()}if(c&2){let t=d.$implicit,i=d.$index,e=g();f("color-rect "+t+" "+e.model.colors[e.tile.color]),P("active",e.tile.fontColor==i),l(),f(t)}}function te(c,d){if(c&1){let t=y();r(0,"div",8),u("click",function(){let e=_(t).$index,o=g();return x(o.setIcon(e))}),a()}if(c&2){let t=d.$implicit,i=d.$index,e=g();f("cl"+e.tile.color+" "+(e.tile.icon==i?"active":"")),T("ngClass",t)}}var ve=(()=>{class c{constructor(t,i,e,o,n,Q){this.ds=t,this.ms=i,this.sbs=e,this.st=o,this.router=n,this.cdr=Q,this.tiles=[],this.folder="",this.model={colors:O.const.bgColorClasses,fontColors:O.const.fontColors,icons:O.const.icons,widgetList:[]},this.originalTiles="",this.subRouteChange=this.router.events.pipe(K())}get tile(){return this._tile}set tile(t){let i=t!==this._tile;this._tile=t,i&&this.requestWidgetList()}ngOnInit(){this.subscribeForRouteChange(),this.saveOriginalTiles(),this.requestWidgetList()}ngOnDestroy(){this.ms.onEditDashboard.emit(!1)}saveTiles(){let t=this.st.getTilesSettings();for(let i=0;i<this.tiles.length;i++){let e=this.tiles[i],o=this.folder;t[o]||(t[o]={}),t[o][e.title]||(t[o][e.title]={});let n=t[o][e.title];n.row=e.y,n.col=e.x,n.sizeX=e.cols,n.sizeY=e.rows,n.color=e.color,n.fontColor=e.fontColor,n.icon=e.icon,n.hideTitle=e.hideTitle,n.customTitle=e.customTitle,e.widget!==null&&e.widget!==-1&&e.widget!==void 0?n.widget=e.widget:delete n.widget}this.st.setTilesSettings(t)}setTileColor(t){this.tile&&(this.tile.color=t)}setFontColor(t){this.tile&&(this.tile.fontColor=t)}setIcon(t){this.tile&&(this.tile.icon=t)}onCancelEditing(){this.restoreOriginalTiles(),this.close()}onSaveTiles(){this.saveTiles(),this.st.onTilesChanged.emit(),this.close()}close(){this.sbs.hide()}saveOriginalTiles(){this.originalTiles=JSON.stringify(this.tiles)}restoreOriginalTiles(){this.tiles.splice(0,this.tiles.length),JSON.parse(this.originalTiles).forEach(i=>this.tiles.push(i))}requestWidgetList(){this.model.widgetList=[],this.tile&&!this.tile.isFolder&&this.ds.getWidgets(this.tile.fullPath).then(t=>this.fillWidgetList(t))}fillWidgetList(t){t&&(this.model.widgetList=t.widgets.map((i,e)=>({idx:e,name:i.title||i.name})),this.model.widgetList=[{idx:-1,name:""},...this.model.widgetList],this.cdr.detectChanges())}subscribeForRouteChange(){this.subRouteChange.pipe(k(t=>t instanceof H)).subscribe(()=>this.onCancelEditing())}static{this.\u0275fac=function(i){return new(i||c)(p(V),p(X),p(q),p(j),p(A),p(L))}}static{this.\u0275cmp=S({type:c,selectors:[["dsw-home-editor"]],inputs:{tiles:"tiles",folder:"folder",tile:"tile"},standalone:!0,features:[B],decls:30,vars:23,consts:[[3,"apply","cancel"],[1,"container"],[3,"ngModelChange","ngModel"],[3,"active","class"],[1,"color-rect",3,"ngClass","class"],["bindLabel","name","bindValue","idx",1,"dsw",3,"ngModelChange","ngModel","clearable","items"],["type","checkbox",3,"ngModelChange","ngModel"],[3,"click"],[1,"color-rect",3,"click","ngClass"]],template:function(i,e){i&1&&(r(0,"dsw-sidebar-actions",0),u("apply",function(){return e.onSaveTiles()})("cancel",function(){return e.onCancelEditing()}),s(1,"Edit dashboard"),a(),r(2,"div",1)(3,"label"),s(4),h(5,"i18n"),a(),r(6,"dsw-input",2),E("ngModelChange",function(n){return M(e.tile.customTitle,n)||(e.tile.customTitle=n),n}),a(),r(7,"label"),s(8),h(9,"i18n"),a(),C(10,Z,1,4,"div",3,v),r(12,"label"),s(13),h(14,"i18n"),a(),C(15,ee,3,6,"div",3,v),r(17,"label"),s(18),h(19,"i18n"),a(),C(20,te,1,3,"div",4,v),r(22,"label"),s(23),h(24,"i18n"),a(),r(25,"ng-select",5),E("ngModelChange",function(n){return M(e.tile.widget,n)||(e.tile.widget=n),n}),a(),r(26,"label"),s(27),h(28,"i18n"),r(29,"input",6),E("ngModelChange",function(n){return M(e.tile.hideTitle,n)||(e.tile.hideTitle=n),n}),a()()()),i&2&&(l(4),m(b(5,11,"title")),l(2),F("ngModel",e.tile.customTitle),l(2),m(b(9,13,"bgColor")),l(2),w(e.model.colors),l(3),m(b(14,15,"fntColor")),l(2),w(e.model.fontColors),l(3),m(b(19,17,"icon")),l(2),w(e.model.icons),l(3),m(b(24,19,"widget")),l(2),F("ngModel",e.tile.widget),T("clearable",!1)("items",e.model.widgetList),l(2),I("",b(28,21,"hideTitle")," "),l(2),F("ngModel",e.tile.hideTitle))},dependencies:[G,J,z,$,N,R,U,Y,D,W],styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;padding-bottom:20px;transition:transform 2s linear;min-width:var(--sidebar-width)}.container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;padding-left:20px;flex:1 1 100%}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px;height:4px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-left:solid 16px var(--cl-bg);background:#ebebea}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-left:solid 16px var(--cl-bg);border-radius:0;background:#1c1d2066}label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-family:Oxygen;color:var(--cl-sidebar-txt);margin-top:10px;margin-bottom:2px;font-size:14px;width:calc(100% - 4px)}input[_ngcontent-%COMP%]{margin-bottom:4px}.divider[_ngcontent-%COMP%]{display:block;width:100%;clear:both}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#fff;padding:10px;color:#1a73e8;font-size:14px;line-height:16px;border:1px solid #EBEBEA;border-radius:4px;width:100%;cursor:pointer;transition:background-color .3s linear}.btn-section[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#1a73e80d}.btn-section[_ngcontent-%COMP%]:not(.disabled):active{transform:translateY(1px)}.headline[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.navigation[_ngcontent-%COMP%]{margin-top:20px}.navigation[_ngcontent-%COMP%] > .btn-section[_ngcontent-%COMP%]:not(:last-child){margin-bottom:4px}.navigation[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]{margin-top:20px}.disabled[_ngcontent-%COMP%]{cursor:default;filter:grayscale(1);opacity:.5}.footer[_ngcontent-%COMP%]{padding-left:20px}.footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-top:20px}.footer[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}.color-rect[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:inline-flex;position:relative;align-items:center;justify-content:center;cursor:pointer;width:32px;height:32px;margin-right:4px;margin-bottom:4px;border:var(--tile-border);font-size:24px;outline-offset:-2px;float:left;background-size:60%}.color-rect[_ngcontent-%COMP%]:hover{outline:1px solid var(--cl-accent)}.color-rect.active[_ngcontent-%COMP%]{outline:3px solid var(--cl-accent)}.color-rect.small[_ngcontent-%COMP%]{width:32px}","[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}input[type=checkbox][_ngcontent-%COMP%]{cursor:pointer;outline:none;display:inline}input[type=checkbox][_ngcontent-%COMP%]:focus, input[type=checkbox][_ngcontent-%COMP%]:active{outline:none}.divider[_ngcontent-%COMP%]{display:block;width:100%;clear:both}"],changeDetection:0})}}return c})();export{ve as HomeEditorComponent};
