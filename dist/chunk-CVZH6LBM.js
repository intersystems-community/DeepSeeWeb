import{a as j}from"./chunk-AEWTSXVQ.js";import{a as D}from"./chunk-OHDPW6E3.js";import"./chunk-W7AFIDCE.js";import{a as z,b as I}from"./chunk-BESYD4HY.js";import"./chunk-DZHBHS6A.js";import"./chunk-RNWIIYZZ.js";import{a as B}from"./chunk-SUAWKU6Z.js";import"./chunk-FILD5LFJ.js";import{c as T,d as A,e as V,j as W}from"./chunk-IQUH5TNY.js";import{F as E,J as k}from"./chunk-BHOYI6KV.js";import{$a as h,$b as u,Bb as M,Cb as P,Db as r,Eb as o,Jb as w,Nb as g,Ob as a,Xb as s,Yb as O,_b as f,ab as x,ac as _,cc as S,fa as y,qa as b,ra as m,rb as F,tb as C,yb as v}from"./chunk-ZKAUCJHV.js";import"./chunk-DEPBX7UX.js";function N(l,c){if(l&1){let i=w();r(0,"dsw-color-picker",7),_("colorChange",function(t){b(i);let n=a().$implicit;return u(n.value,t)||(n.value=t),m(t)}),g("colorChange",function(){b(i);let t=a().$implicit,n=a();return m(n.updateVariable(t))}),o()}if(l&2){let i=a().$implicit;f("color",i.value),C("isImmediate",!0)}}function L(l,c){if(l&1){let i=w();r(0,"input",8),_("ngModelChange",function(t){b(i);let n=a().$implicit;return u(n.value,t)||(n.value=t),m(t)}),g("change",function(){b(i);let t=a().$implicit,n=a();return m(n.updateVariable(t))}),o()}if(l&2){let i=a().$implicit;f("ngModel",i.value)}}function R(l,c){if(l&1&&(r(0,"tr")(1,"td"),s(2),o(),r(3,"td"),F(4,N,1,2,"dsw-color-picker",5)(5,L,1,1,"input",6),o()()),l&2){let i=c.$implicit;h(2),O(i.name),h(2),v(i.isColor?4:-1),h(),v(i.isColor?-1:5)}}var Z=(()=>{let c=class c{constructor(e,t){this.sbs=e,this.ss=t,this.variables=[],this.isApplied=!1,this.settings=this.ss.getAppSettings(),this.model={themes:E.const.themes,theme:this.settings.theme},this.initializeVariables()}ngOnDestroy(){this.isApplied||this.restoreTheme()}onCancel(){this.sbs.hide()}onApply(){let e=this.ss.getAppSettings();e.theme=this.model.theme,this.ss.setAppSettings(e),this.isApplied=!0,this.sbs.hide()}exportTheme(){let e=`:root {\r
`;this.variables.forEach(n=>{e+="	--"+n.name+": "+n.value+`;\r
`}),e+="}";let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","theme.css"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}updateVariable(e){document.documentElement.style.setProperty("--"+e.name,e.value)}restoreTheme(){this.model.theme=this.settings.theme,this.applyTheme()}trackVariable(e,t){return t.name}applyTheme(){this.variables.forEach(t=>{document.documentElement.style.setProperty("--"+t.name,null)});let e=document.getElementById("page-theme");e||(e=document.createElement("link")),e.id="page-theme",e.rel="stylesheet",e.type="text/css",this.model.theme?e.href="css/"+this.model.theme:e.href="",document.head.appendChild(e),setTimeout(()=>{this.initializeVariables()},100)}initializeVariables(){this.variables=this.getAllCssVariables().map(e=>{let t=getComputedStyle(document.documentElement).getPropertyValue(e);return{name:e.replace("--",""),value:t,isColor:this.isColor(t)}})}isColor(e){let t=new Option().style;return t.color=e,t.color!==""}getAllCssVariables(){return Array.from(document.styleSheets).filter(e=>e.href===null||e.href.startsWith(window.location.origin)).reduce((e,t)=>e=[...e,...Array.from(t.cssRules).reduce((n,d)=>n=d.selectorText===":root"?[...n,...Array.from(d.style).filter(p=>p.startsWith("--"))]:n,[])],[])}};c.\u0275fac=function(t){return new(t||c)(x(B),x(k))},c.\u0275cmp=y({type:c,selectors:[["dsw-theme-settings"]],standalone:!0,features:[S],decls:21,vars:3,consts:[[3,"cancel","apply"],[1,"container"],["bindValue","file","bindLabel","text",1,"dsw",3,"ngModelChange","ngModel","clearable","items"],[1,"variables-container"],[1,"btn","btn-success",3,"click"],[3,"color","isImmediate"],[1,"input",3,"ngModel"],[3,"colorChange","color","isImmediate"],[1,"input",3,"ngModelChange","change","ngModel"]],template:function(t,n){t&1&&(r(0,"dsw-sidebar-actions",0),g("cancel",function(){return n.onCancel()})("apply",function(){return n.onApply()}),s(1,"Theme settings"),o(),r(2,"div",1)(3,"label"),s(4,"Current theme"),o(),r(5,"ng-select",2),_("ngModelChange",function(p){return u(n.model.theme,p)||(n.model.theme=p),p}),o(),r(6,"label"),s(7,"Theme variables"),o(),r(8,"div",3)(9,"table")(10,"thead")(11,"tr")(12,"td"),s(13,"Name"),o(),r(14,"td"),s(15,"Value"),o()()(),r(16,"tbody"),M(17,R,6,3,"tr",null,n.trackVariable,!0),o()()(),r(19,"button",4),g("click",function(){return n.exportTheme()}),s(20,"Download theme"),o()()),t&2&&(h(5),f("ngModel",n.model.theme),C("clearable",!1)("items",n.model.themes),h(12),P(n.variables))},dependencies:[D,I,z,W,T,A,V,j],styles:["[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;padding-bottom:20px;transition:transform 2s linear;min-width:var(--sidebar-width)}.container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;padding-left:20px;flex:1 1 100%}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px;height:4px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-left:solid 16px var(--cl-bg);background:#ebebea}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-left:solid 16px var(--cl-bg);border-radius:0;background:#1c1d2066}label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-family:Oxygen;color:var(--cl-sidebar-txt);margin-top:10px;margin-bottom:2px;font-size:14px;width:calc(100% - 4px)}input[_ngcontent-%COMP%]{margin-bottom:4px}.divider[_ngcontent-%COMP%]{display:block;width:100%;clear:both}.btn-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#fff;padding:10px;color:#1a73e8;font-size:14px;line-height:16px;border:1px solid #EBEBEA;border-radius:4px;width:100%;cursor:pointer;transition:background-color .3s linear}.btn-section[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#1a73e80d}.btn-section[_ngcontent-%COMP%]:not(.disabled):active{transform:translateY(1px)}.headline[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.navigation[_ngcontent-%COMP%]{margin-top:20px}.navigation[_ngcontent-%COMP%] > .btn-section[_ngcontent-%COMP%]:not(:last-child){margin-bottom:4px}.navigation[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]{margin-top:20px}.disabled[_ngcontent-%COMP%]{cursor:default;filter:grayscale(1);opacity:.5}.footer[_ngcontent-%COMP%]{padding-left:20px}.footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-top:20px}.footer[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}.color-rect[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:inline-flex;position:relative;align-items:center;justify-content:center;cursor:pointer;width:32px;height:32px;margin-right:4px;margin-bottom:4px;border:var(--tile-border);font-size:24px;outline-offset:-2px;float:left;background-size:60%}.color-rect[_ngcontent-%COMP%]:hover{outline:1px solid var(--cl-accent)}.color-rect.active[_ngcontent-%COMP%]{outline:3px solid var(--cl-accent)}.color-rect.small[_ngcontent-%COMP%]{width:32px}","[_ngcontent-%COMP%]:root{--cl-bg: #F5F5F5;--cl-accent: #1A73E8;--cl-btn-hover: #76abf1;--cl-hover: #E8F0FE;--cl-txt: #555555;--input-border-radius: 13px;--cl-btn-main: #5cb85c;--cl-btn-main-txt: #fff;--cl-btn-main-border: #4cae4c;--cl-btn-main-hover: #6eca6e;--cl-btn-secondary: #e6e6e6;--cl-btn-secondary-txt: #cccccc;--cl-btn-secondary-border: #b4b2b2;--cl-btn-secondary-hover: #dbdbdb;--icon-filter: none;--cl1: #b6e6ff;--cl2: #f7bfb7;--cl3: #bceca8;--cl4: #fff9a8;--cl5: #ffc593;--cl6: #f9b1ab;--cl7: #9de7fb;--cl8: #a8b8f9;--cl9: #9df1ae;--cl-header-bg: #FFFFFF;--cl-header-border: #F5F5F5;--cl-header-txt: #606367;--cl-header-ico: var(--cl-header-txt);--cl-header-btn-active: var(--cl-header-bg);--cl-header-btn-hover: var(--cl-bg);--cl-header-btn-hover-darken: var(--cl-hover);--header-height: 64px;--menu-item-icon-filter: none;--cl-sidebar-bg: #F5F5F5;--cl-sidebar-txt: #606367;--tile-border: none;--tile-border-radius: 10px;--tile-header-height: 28px;--cl-modal-bg: white;--fc0: #606367;--fc1: black;--fc2: red;--fc3: white;--fc4: green;--fc5: blue;--cl-widget-bg: white;--cl-widget-header-btn-active: #A9FFA1;--cl-widget-header-border: none;--cl-text-widget-font: #6b6464;--cl-widget-header-bg: var(--cl-header-bg);--cl-widget-header-txt: var(--cl-header-txt);--cl-widget-filter-txt: #606367;--cl-widget-filter-bg: var(--cl-header-bg);--widget-header-btn-opacity: 1;--widget-header-btn-filter: none;--widget-header-btn-active-filter: contrast(.7) sepia(1) brightness(1) hue-rotate(-898deg) contrast(9);--cl-input-bg: white;--cl-input-border: #EBEBEA;--cl-check-border: #606367;--cl-input-placeholder: rgba(96, 99, 103, .6);--cl-input-text: #606367;--cl-input-height: 26px;--cl-pivot-cell-border: rgb(208, 208, 208);--cl-pivot-cell-hover: #FFF7D7;--pivot-row-hover: inset 0 0 30px #fff5b9;--sidebar-width: 322px;--cl-scrollbar: #606367}table[_ngcontent-%COMP%]{font-size:12px}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{opacity:.7}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:50%}.color[_ngcontent-%COMP%]{height:14px;cursor:pointer}.input[_ngcontent-%COMP%]{height:14px}.btn-success[_ngcontent-%COMP%]{margin-top:10px}dsw-color-picker[_ngcontent-%COMP%]{height:20px}"]});let l=c;return l})();export{Z as ThemeSettingsComponent};
